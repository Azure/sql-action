require('./sourcemap-register.js');(()=>{var t={87351:function(t,r,n){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(Object.hasOwnProperty.call(t,n))r[n]=t[n];r["default"]=t;return r};Object.defineProperty(r,"__esModule",{value:true});const o=i(n(22037));const a=n(5278);function issueCommand(t,r,n){const i=new Command(t,r,n);process.stdout.write(i.toString()+o.EOL)}r.issueCommand=issueCommand;function issue(t,r=""){issueCommand(t,{},r)}r.issue=issue;const s="::";class Command{constructor(t,r,n){if(!t){t="missing.command"}this.command=t;this.properties=r;this.message=n}toString(){let t=s+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=true;for(const n in this.properties){if(this.properties.hasOwnProperty(n)){const i=this.properties[n];if(i){if(r){r=false}else{t+=","}t+=`${n}=${escapeProperty(i)}`}}}}t+=`${s}${escapeData(this.message)}`;return t}}function escapeData(t){return a.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(t){return a.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},42186:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(Object.hasOwnProperty.call(t,n))r[n]=t[n];r["default"]=t;return r};Object.defineProperty(r,"__esModule",{value:true});const a=n(87351);const s=n(717);const c=n(5278);const u=o(n(22037));const l=o(n(71017));var d;(function(t){t[t["Success"]=0]="Success";t[t["Failure"]=1]="Failure"})(d=r.ExitCode||(r.ExitCode={}));function exportVariable(t,r){const n=c.toCommandValue(r);process.env[t]=n;const i=process.env["GITHUB_ENV"]||"";if(i){const r="_GitHubActionsFileCommandDelimeter_";const i=`${t}<<${r}${u.EOL}${n}${u.EOL}${r}`;s.issueCommand("ENV",i)}else{a.issueCommand("set-env",{name:t},n)}}r.exportVariable=exportVariable;function setSecret(t){a.issueCommand("add-mask",{},t)}r.setSecret=setSecret;function addPath(t){const r=process.env["GITHUB_PATH"]||"";if(r){s.issueCommand("PATH",t)}else{a.issueCommand("add-path",{},t)}process.env["PATH"]=`${t}${l.delimiter}${process.env["PATH"]}`}r.addPath=addPath;function getInput(t,r){const n=process.env[`INPUT_${t.replace(/ /g,"_").toUpperCase()}`]||"";if(r&&r.required&&!n){throw new Error(`Input required and not supplied: ${t}`)}return n.trim()}r.getInput=getInput;function setOutput(t,r){a.issueCommand("set-output",{name:t},r)}r.setOutput=setOutput;function setCommandEcho(t){a.issue("echo",t?"on":"off")}r.setCommandEcho=setCommandEcho;function setFailed(t){process.exitCode=d.Failure;error(t)}r.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}r.isDebug=isDebug;function debug(t){a.issueCommand("debug",{},t)}r.debug=debug;function error(t){a.issue("error",t instanceof Error?t.toString():t)}r.error=error;function warning(t){a.issue("warning",t instanceof Error?t.toString():t)}r.warning=warning;function info(t){process.stdout.write(t+u.EOL)}r.info=info;function startGroup(t){a.issue("group",t)}r.startGroup=startGroup;function endGroup(){a.issue("endgroup")}r.endGroup=endGroup;function group(t,r){return i(this,void 0,void 0,(function*(){startGroup(t);let n;try{n=yield r()}finally{endGroup()}return n}))}r.group=group;function saveState(t,r){a.issueCommand("save-state",{name:t},r)}r.saveState=saveState;function getState(t){return process.env[`STATE_${t}`]||""}r.getState=getState},717:function(t,r,n){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(Object.hasOwnProperty.call(t,n))r[n]=t[n];r["default"]=t;return r};Object.defineProperty(r,"__esModule",{value:true});const o=i(n(57147));const a=i(n(22037));const s=n(5278);function issueCommand(t,r){const n=process.env[`GITHUB_${t}`];if(!n){throw new Error(`Unable to find environment variable for file command ${t}`)}if(!o.existsSync(n)){throw new Error(`Missing file at path: ${n}`)}o.appendFileSync(n,`${s.toCommandValue(r)}${a.EOL}`,{encoding:"utf8"})}r.issueCommand=issueCommand},5278:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});function toCommandValue(t){if(t===null||t===undefined){return""}else if(typeof t==="string"||t instanceof String){return t}return JSON.stringify(t)}r.toCommandValue=toCommandValue},71514:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(88159);function exec(t,r,n){return i(this,void 0,void 0,(function*(){const i=o.argStringToArray(t);if(i.length===0){throw new Error(`Parameter 'commandLine' cannot be null or empty.`)}const a=i[0];r=i.slice(1).concat(r||[]);const s=new o.ToolRunner(a,r,n);return s.exec()}))}r.exec=exec},88159:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(22037);const a=n(82361);const s=n(32081);const c=process.platform==="win32";class ToolRunner extends a.EventEmitter{constructor(t,r,n){super();if(!t){throw new Error("Parameter 'toolPath' cannot be null or empty.")}this.toolPath=t;this.args=r||[];this.options=n||{}}_debug(t){if(this.options.listeners&&this.options.listeners.debug){this.options.listeners.debug(t)}}_getCommandString(t,r){const n=this._getSpawnFileName();const i=this._getSpawnArgs(t);let o=r?"":"[command]";if(c){if(this._isCmdFile()){o+=n;for(const t of i){o+=` ${t}`}}else if(t.windowsVerbatimArguments){o+=`"${n}"`;for(const t of i){o+=` ${t}`}}else{o+=this._windowsQuoteCmdArg(n);for(const t of i){o+=` ${this._windowsQuoteCmdArg(t)}`}}}else{o+=n;for(const t of i){o+=` ${t}`}}return o}_processLineBuffer(t,r,n){try{let i=r+t.toString();let a=i.indexOf(o.EOL);while(a>-1){const t=i.substring(0,a);n(t);i=i.substring(a+o.EOL.length);a=i.indexOf(o.EOL)}r=i}catch(t){this._debug(`error processing line. Failed with error ${t}`)}}_getSpawnFileName(){if(c){if(this._isCmdFile()){return process.env["COMSPEC"]||"cmd.exe"}}return this.toolPath}_getSpawnArgs(t){if(c){if(this._isCmdFile()){let r=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const n of this.args){r+=" ";r+=t.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n)}r+='"';return[r]}}return this.args}_endsWith(t,r){return t.endsWith(r)}_isCmdFile(){const t=this.toolPath.toUpperCase();return this._endsWith(t,".CMD")||this._endsWith(t,".BAT")}_windowsQuoteCmdArg(t){if(!this._isCmdFile()){return this._uvQuoteCmdArg(t)}if(!t){return'""'}const r=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let n=false;for(const i of t){if(r.some((t=>t===i))){n=true;break}}if(!n){return t}let i='"';let o=true;for(let r=t.length;r>0;r--){i+=t[r-1];if(o&&t[r-1]==="\\"){i+="\\"}else if(t[r-1]==='"'){o=true;i+='"'}else{o=false}}i+='"';return i.split("").reverse().join("")}_uvQuoteCmdArg(t){if(!t){return'""'}if(!t.includes(" ")&&!t.includes("\t")&&!t.includes('"')){return t}if(!t.includes('"')&&!t.includes("\\")){return`"${t}"`}let r='"';let n=true;for(let i=t.length;i>0;i--){r+=t[i-1];if(n&&t[i-1]==="\\"){r+="\\"}else if(t[i-1]==='"'){n=true;r+="\\"}else{n=false}}r+='"';return r.split("").reverse().join("")}_cloneExecOptions(t){t=t||{};const r={cwd:t.cwd||process.cwd(),env:t.env||process.env,silent:t.silent||false,windowsVerbatimArguments:t.windowsVerbatimArguments||false,failOnStdErr:t.failOnStdErr||false,ignoreReturnCode:t.ignoreReturnCode||false,delay:t.delay||1e4};r.outStream=t.outStream||process.stdout;r.errStream=t.errStream||process.stderr;return r}_getSpawnOptions(t,r){t=t||{};const n={};n.cwd=t.cwd;n.env=t.env;n["windowsVerbatimArguments"]=t.windowsVerbatimArguments||this._isCmdFile();if(t.windowsVerbatimArguments){n.argv0=`"${r}"`}return n}exec(){return i(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{this._debug(`exec tool: ${this.toolPath}`);this._debug("arguments:");for(const t of this.args){this._debug(`   ${t}`)}const n=this._cloneExecOptions(this.options);if(!n.silent&&n.outStream){n.outStream.write(this._getCommandString(n)+o.EOL)}const i=new ExecState(n,this.toolPath);i.on("debug",(t=>{this._debug(t)}));const a=this._getSpawnFileName();const c=s.spawn(a,this._getSpawnArgs(n),this._getSpawnOptions(this.options,a));const u="";if(c.stdout){c.stdout.on("data",(t=>{if(this.options.listeners&&this.options.listeners.stdout){this.options.listeners.stdout(t)}if(!n.silent&&n.outStream){n.outStream.write(t)}this._processLineBuffer(t,u,(t=>{if(this.options.listeners&&this.options.listeners.stdline){this.options.listeners.stdline(t)}}))}))}const l="";if(c.stderr){c.stderr.on("data",(t=>{i.processStderr=true;if(this.options.listeners&&this.options.listeners.stderr){this.options.listeners.stderr(t)}if(!n.silent&&n.errStream&&n.outStream){const r=n.failOnStdErr?n.errStream:n.outStream;r.write(t)}this._processLineBuffer(t,l,(t=>{if(this.options.listeners&&this.options.listeners.errline){this.options.listeners.errline(t)}}))}))}c.on("error",(t=>{i.processError=t.message;i.processExited=true;i.processClosed=true;i.CheckComplete()}));c.on("exit",(t=>{i.processExitCode=t;i.processExited=true;this._debug(`Exit code ${t} received from tool '${this.toolPath}'`);i.CheckComplete()}));c.on("close",(t=>{i.processExitCode=t;i.processExited=true;i.processClosed=true;this._debug(`STDIO streams have closed for tool '${this.toolPath}'`);i.CheckComplete()}));i.on("done",((n,i)=>{if(u.length>0){this.emit("stdline",u)}if(l.length>0){this.emit("errline",l)}c.removeAllListeners();if(n){r(n)}else{t(i)}}))}))}))}}r.ToolRunner=ToolRunner;function argStringToArray(t){const r=[];let n=false;let i=false;let o="";function append(t){if(i&&t!=='"'){o+="\\"}o+=t;i=false}for(let a=0;a<t.length;a++){const s=t.charAt(a);if(s==='"'){if(!i){n=!n}else{append(s)}continue}if(s==="\\"&&i){append(s);continue}if(s==="\\"&&n){i=true;continue}if(s===" "&&!n){if(o.length>0){r.push(o);o=""}continue}append(s)}if(o.length>0){r.push(o.trim())}return r}r.argStringToArray=argStringToArray;class ExecState extends a.EventEmitter{constructor(t,r){super();this.processClosed=false;this.processError="";this.processExitCode=0;this.processExited=false;this.processStderr=false;this.delay=1e4;this.done=false;this.timeout=null;if(!r){throw new Error("toolPath must not be empty")}this.options=t;this.toolPath=r;if(t.delay){this.delay=t.delay}}CheckComplete(){if(this.done){return}if(this.processClosed){this._setResult()}else if(this.processExited){this.timeout=setTimeout(ExecState.HandleTimeout,this.delay,this)}}_debug(t){this.emit("debug",t)}_setResult(){let t;if(this.processExited){if(this.processError){t=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`)}else if(this.processExitCode!==0&&!this.options.ignoreReturnCode){t=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)}else if(this.processStderr&&this.options.failOnStdErr){t=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)}}if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.done=true;this.emit("done",t,this.processExitCode)}static HandleTimeout(t){if(t.done){return}if(!t.processClosed&&t.processExited){const r=`The STDIO streams did not close within ${t.delay/1e3} seconds of the exit event from process '${t.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;t._debug(r)}t._setResult()}}},96255:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});r.HttpClient=r.isHttps=r.HttpClientResponse=r.HttpClientError=r.getProxyUrl=r.MediaTypes=r.Headers=r.HttpCodes=void 0;const c=a(n(13685));const u=a(n(95687));const l=a(n(19835));const d=a(n(74294));var p;(function(t){t[t["OK"]=200]="OK";t[t["MultipleChoices"]=300]="MultipleChoices";t[t["MovedPermanently"]=301]="MovedPermanently";t[t["ResourceMoved"]=302]="ResourceMoved";t[t["SeeOther"]=303]="SeeOther";t[t["NotModified"]=304]="NotModified";t[t["UseProxy"]=305]="UseProxy";t[t["SwitchProxy"]=306]="SwitchProxy";t[t["TemporaryRedirect"]=307]="TemporaryRedirect";t[t["PermanentRedirect"]=308]="PermanentRedirect";t[t["BadRequest"]=400]="BadRequest";t[t["Unauthorized"]=401]="Unauthorized";t[t["PaymentRequired"]=402]="PaymentRequired";t[t["Forbidden"]=403]="Forbidden";t[t["NotFound"]=404]="NotFound";t[t["MethodNotAllowed"]=405]="MethodNotAllowed";t[t["NotAcceptable"]=406]="NotAcceptable";t[t["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";t[t["RequestTimeout"]=408]="RequestTimeout";t[t["Conflict"]=409]="Conflict";t[t["Gone"]=410]="Gone";t[t["TooManyRequests"]=429]="TooManyRequests";t[t["InternalServerError"]=500]="InternalServerError";t[t["NotImplemented"]=501]="NotImplemented";t[t["BadGateway"]=502]="BadGateway";t[t["ServiceUnavailable"]=503]="ServiceUnavailable";t[t["GatewayTimeout"]=504]="GatewayTimeout"})(p=r.HttpCodes||(r.HttpCodes={}));var g;(function(t){t["Accept"]="accept";t["ContentType"]="content-type"})(g=r.Headers||(r.Headers={}));var v;(function(t){t["ApplicationJson"]="application/json"})(v=r.MediaTypes||(r.MediaTypes={}));function getProxyUrl(t){const r=l.getProxyUrl(new URL(t));return r?r.href:""}r.getProxyUrl=getProxyUrl;const E=[p.MovedPermanently,p.ResourceMoved,p.SeeOther,p.TemporaryRedirect,p.PermanentRedirect];const S=[p.BadGateway,p.ServiceUnavailable,p.GatewayTimeout];const w=["OPTIONS","GET","DELETE","HEAD"];const x=10;const N=5;class HttpClientError extends Error{constructor(t,r){super(t);this.name="HttpClientError";this.statusCode=r;Object.setPrototypeOf(this,HttpClientError.prototype)}}r.HttpClientError=HttpClientError;class HttpClientResponse{constructor(t){this.message=t}readBody(){return s(this,void 0,void 0,(function*(){return new Promise((t=>s(this,void 0,void 0,(function*(){let r=Buffer.alloc(0);this.message.on("data",(t=>{r=Buffer.concat([r,t])}));this.message.on("end",(()=>{t(r.toString())}))}))))}))}}r.HttpClientResponse=HttpClientResponse;function isHttps(t){const r=new URL(t);return r.protocol==="https:"}r.isHttps=isHttps;class HttpClient{constructor(t,r,n){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=t;this.handlers=r||[];this.requestOptions=n;if(n){if(n.ignoreSslError!=null){this._ignoreSslError=n.ignoreSslError}this._socketTimeout=n.socketTimeout;if(n.allowRedirects!=null){this._allowRedirects=n.allowRedirects}if(n.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=n.allowRedirectDowngrade}if(n.maxRedirects!=null){this._maxRedirects=Math.max(n.maxRedirects,0)}if(n.keepAlive!=null){this._keepAlive=n.keepAlive}if(n.allowRetries!=null){this._allowRetries=n.allowRetries}if(n.maxRetries!=null){this._maxRetries=n.maxRetries}}}options(t,r){return s(this,void 0,void 0,(function*(){return this.request("OPTIONS",t,null,r||{})}))}get(t,r){return s(this,void 0,void 0,(function*(){return this.request("GET",t,null,r||{})}))}del(t,r){return s(this,void 0,void 0,(function*(){return this.request("DELETE",t,null,r||{})}))}post(t,r,n){return s(this,void 0,void 0,(function*(){return this.request("POST",t,r,n||{})}))}patch(t,r,n){return s(this,void 0,void 0,(function*(){return this.request("PATCH",t,r,n||{})}))}put(t,r,n){return s(this,void 0,void 0,(function*(){return this.request("PUT",t,r,n||{})}))}head(t,r){return s(this,void 0,void 0,(function*(){return this.request("HEAD",t,null,r||{})}))}sendStream(t,r,n,i){return s(this,void 0,void 0,(function*(){return this.request(t,r,n,i)}))}getJson(t,r={}){return s(this,void 0,void 0,(function*(){r[g.Accept]=this._getExistingOrDefaultHeader(r,g.Accept,v.ApplicationJson);const n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)}))}postJson(t,r,n={}){return s(this,void 0,void 0,(function*(){const i=JSON.stringify(r,null,2);n[g.Accept]=this._getExistingOrDefaultHeader(n,g.Accept,v.ApplicationJson);n[g.ContentType]=this._getExistingOrDefaultHeader(n,g.ContentType,v.ApplicationJson);const o=yield this.post(t,i,n);return this._processResponse(o,this.requestOptions)}))}putJson(t,r,n={}){return s(this,void 0,void 0,(function*(){const i=JSON.stringify(r,null,2);n[g.Accept]=this._getExistingOrDefaultHeader(n,g.Accept,v.ApplicationJson);n[g.ContentType]=this._getExistingOrDefaultHeader(n,g.ContentType,v.ApplicationJson);const o=yield this.put(t,i,n);return this._processResponse(o,this.requestOptions)}))}patchJson(t,r,n={}){return s(this,void 0,void 0,(function*(){const i=JSON.stringify(r,null,2);n[g.Accept]=this._getExistingOrDefaultHeader(n,g.Accept,v.ApplicationJson);n[g.ContentType]=this._getExistingOrDefaultHeader(n,g.ContentType,v.ApplicationJson);const o=yield this.patch(t,i,n);return this._processResponse(o,this.requestOptions)}))}request(t,r,n,i){return s(this,void 0,void 0,(function*(){if(this._disposed){throw new Error("Client has already been disposed.")}const o=new URL(r);let a=this._prepareRequest(t,o,i);const s=this._allowRetries&&w.includes(t)?this._maxRetries+1:1;let c=0;let u;do{u=yield this.requestRaw(a,n);if(u&&u.message&&u.message.statusCode===p.Unauthorized){let t;for(const r of this.handlers){if(r.canHandleAuthentication(u)){t=r;break}}if(t){return t.handleAuthentication(this,a,n)}else{return u}}let r=this._maxRedirects;while(u.message.statusCode&&E.includes(u.message.statusCode)&&this._allowRedirects&&r>0){const s=u.message.headers["location"];if(!s){break}const c=new URL(s);if(o.protocol==="https:"&&o.protocol!==c.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}yield u.readBody();if(c.hostname!==o.hostname){for(const t in i){if(t.toLowerCase()==="authorization"){delete i[t]}}}a=this._prepareRequest(t,c,i);u=yield this.requestRaw(a,n);r--}if(!u.message.statusCode||!S.includes(u.message.statusCode)){return u}c+=1;if(c<s){yield u.readBody();yield this._performExponentialBackoff(c)}}while(c<s);return u}))}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(t,r){return s(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{function callbackForResult(t,r){if(t){i(t)}else if(!r){i(new Error("Unknown error"))}else{n(r)}}this.requestRawWithCallback(t,r,callbackForResult)}))}))}requestRawWithCallback(t,r,n){if(typeof r==="string"){if(!t.options.headers){t.options.headers={}}t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8")}let i=false;function handleResult(t,r){if(!i){i=true;n(t,r)}}const o=t.httpModule.request(t.options,(t=>{const r=new HttpClientResponse(t);handleResult(undefined,r)}));let a;o.on("socket",(t=>{a=t}));o.setTimeout(this._socketTimeout||3*6e4,(()=>{if(a){a.end()}handleResult(new Error(`Request timeout: ${t.options.path}`))}));o.on("error",(function(t){handleResult(t)}));if(r&&typeof r==="string"){o.write(r,"utf8")}if(r&&typeof r!=="string"){r.on("close",(function(){o.end()}));r.pipe(o)}else{o.end()}}getAgent(t){const r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){const i={};i.parsedUrl=r;const o=i.parsedUrl.protocol==="https:";i.httpModule=o?u:c;const a=o?443:80;i.options={};i.options.host=i.parsedUrl.hostname;i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):a;i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||"");i.options.method=t;i.options.headers=this._mergeHeaders(n);if(this.userAgent!=null){i.options.headers["user-agent"]=this.userAgent}i.options.agent=this._getAgent(i.parsedUrl);if(this.handlers){for(const t of this.handlers){t.prepareRequest(i.options)}}return i}_mergeHeaders(t){if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(t||{}))}return lowercaseKeys(t||{})}_getExistingOrDefaultHeader(t,r,n){let i;if(this.requestOptions&&this.requestOptions.headers){i=lowercaseKeys(this.requestOptions.headers)[r]}return t[r]||i||n}_getAgent(t){let r;const n=l.getProxyUrl(t);const i=n&&n.hostname;if(this._keepAlive&&i){r=this._proxyAgent}if(this._keepAlive&&!i){r=this._agent}if(r){return r}const o=t.protocol==="https:";let a=100;if(this.requestOptions){a=this.requestOptions.maxSockets||c.globalAgent.maxSockets}if(n&&n.hostname){const t={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})};let i;const s=n.protocol==="https:";if(o){i=s?d.httpsOverHttps:d.httpsOverHttp}else{i=s?d.httpOverHttps:d.httpOverHttp}r=i(t);this._proxyAgent=r}if(this._keepAlive&&!r){const t={keepAlive:this._keepAlive,maxSockets:a};r=o?new u.Agent(t):new c.Agent(t);this._agent=r}if(!r){r=o?u.globalAgent:c.globalAgent}if(o&&this._ignoreSslError){r.options=Object.assign(r.options||{},{rejectUnauthorized:false})}return r}_performExponentialBackoff(t){return s(this,void 0,void 0,(function*(){t=Math.min(x,t);const r=N*Math.pow(2,t);return new Promise((t=>setTimeout((()=>t()),r)))}))}_processResponse(t,r){return s(this,void 0,void 0,(function*(){return new Promise(((n,i)=>s(this,void 0,void 0,(function*(){const o=t.message.statusCode||0;const a={statusCode:o,result:null,headers:{}};if(o===p.NotFound){n(a)}function dateTimeDeserializer(t,r){if(typeof r==="string"){const t=new Date(r);if(!isNaN(t.valueOf())){return t}}return r}let s;let c;try{c=yield t.readBody();if(c&&c.length>0){if(r&&r.deserializeDates){s=JSON.parse(c,dateTimeDeserializer)}else{s=JSON.parse(c)}a.result=s}a.headers=t.message.headers}catch(t){}if(o>299){let t;if(s&&s.message){t=s.message}else if(c&&c.length>0){t=c}else{t=`Failed request: (${o})`}const r=new HttpClientError(t,o);r.result=a.result;i(r)}else{n(a)}}))))}))}}r.HttpClient=HttpClient;const lowercaseKeys=t=>Object.keys(t).reduce(((r,n)=>(r[n.toLowerCase()]=t[n],r)),{})},19835:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.checkBypass=r.getProxyUrl=void 0;function getProxyUrl(t){const r=t.protocol==="https:";if(checkBypass(t)){return undefined}const n=(()=>{if(r){return process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{return process.env["http_proxy"]||process.env["HTTP_PROXY"]}})();if(n){return new URL(n)}else{return undefined}}r.getProxyUrl=getProxyUrl;function checkBypass(t){if(!t.hostname){return false}const r=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!r){return false}let n;if(t.port){n=Number(t.port)}else if(t.protocol==="http:"){n=80}else if(t.protocol==="https:"){n=443}const i=[t.hostname.toUpperCase()];if(typeof n==="number"){i.push(`${i[0]}:${n}`)}for(const t of r.split(",").map((t=>t.trim().toUpperCase())).filter((t=>t))){if(i.some((r=>r===t))){return true}}return false}r.checkBypass=checkBypass},81962:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c;Object.defineProperty(r,"__esModule",{value:true});r.getCmdPath=r.tryGetExecutablePath=r.isRooted=r.isDirectory=r.exists=r.IS_WINDOWS=r.unlink=r.symlink=r.stat=r.rmdir=r.rename=r.readlink=r.readdir=r.mkdir=r.lstat=r.copyFile=r.chmod=void 0;const u=a(n(57147));const l=a(n(71017));c=u.promises,r.chmod=c.chmod,r.copyFile=c.copyFile,r.lstat=c.lstat,r.mkdir=c.mkdir,r.readdir=c.readdir,r.readlink=c.readlink,r.rename=c.rename,r.rmdir=c.rmdir,r.stat=c.stat,r.symlink=c.symlink,r.unlink=c.unlink;r.IS_WINDOWS=process.platform==="win32";function exists(t){return s(this,void 0,void 0,(function*(){try{yield r.stat(t)}catch(t){if(t.code==="ENOENT"){return false}throw t}return true}))}r.exists=exists;function isDirectory(t,n=false){return s(this,void 0,void 0,(function*(){const i=n?yield r.stat(t):yield r.lstat(t);return i.isDirectory()}))}r.isDirectory=isDirectory;function isRooted(t){t=normalizeSeparators(t);if(!t){throw new Error('isRooted() parameter "p" cannot be empty')}if(r.IS_WINDOWS){return t.startsWith("\\")||/^[A-Z]:/i.test(t)}return t.startsWith("/")}r.isRooted=isRooted;function tryGetExecutablePath(t,n){return s(this,void 0,void 0,(function*(){let i=undefined;try{i=yield r.stat(t)}catch(r){if(r.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${r}`)}}if(i&&i.isFile()){if(r.IS_WINDOWS){const r=l.extname(t).toUpperCase();if(n.some((t=>t.toUpperCase()===r))){return t}}else{if(isUnixExecutable(i)){return t}}}const o=t;for(const a of n){t=o+a;i=undefined;try{i=yield r.stat(t)}catch(r){if(r.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${r}`)}}if(i&&i.isFile()){if(r.IS_WINDOWS){try{const n=l.dirname(t);const i=l.basename(t).toUpperCase();for(const o of yield r.readdir(n)){if(i===o.toUpperCase()){t=l.join(n,o);break}}}catch(r){console.log(`Unexpected error attempting to determine the actual case of the file '${t}': ${r}`)}return t}else{if(isUnixExecutable(i)){return t}}}}return""}))}r.tryGetExecutablePath=tryGetExecutablePath;function normalizeSeparators(t){t=t||"";if(r.IS_WINDOWS){t=t.replace(/\//g,"\\");return t.replace(/\\\\+/g,"\\")}return t.replace(/\/\/+/g,"/")}function isUnixExecutable(t){return(t.mode&1)>0||(t.mode&8)>0&&t.gid===process.getgid()||(t.mode&64)>0&&t.uid===process.getuid()}function getCmdPath(){var t;return(t=process.env["COMSPEC"])!==null&&t!==void 0?t:`cmd.exe`}r.getCmdPath=getCmdPath},47351:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});r.findInPath=r.which=r.mkdirP=r.rmRF=r.mv=r.cp=void 0;const c=n(39491);const u=a(n(32081));const l=a(n(71017));const d=n(73837);const p=a(n(81962));const g=d.promisify(u.exec);const v=d.promisify(u.execFile);function cp(t,r,n={}){return s(this,void 0,void 0,(function*(){const{force:i,recursive:o,copySourceDirectory:a}=readCopyOptions(n);const s=(yield p.exists(r))?yield p.stat(r):null;if(s&&s.isFile()&&!i){return}const c=s&&s.isDirectory()&&a?l.join(r,l.basename(t)):r;if(!(yield p.exists(t))){throw new Error(`no such file or directory: ${t}`)}const u=yield p.stat(t);if(u.isDirectory()){if(!o){throw new Error(`Failed to copy. ${t} is a directory, but tried to copy without recursive flag.`)}else{yield cpDirRecursive(t,c,0,i)}}else{if(l.relative(t,c)===""){throw new Error(`'${c}' and '${t}' are the same file`)}yield copyFile(t,c,i)}}))}r.cp=cp;function mv(t,r,n={}){return s(this,void 0,void 0,(function*(){if(yield p.exists(r)){let i=true;if(yield p.isDirectory(r)){r=l.join(r,l.basename(t));i=yield p.exists(r)}if(i){if(n.force==null||n.force){yield rmRF(r)}else{throw new Error("Destination already exists")}}}yield mkdirP(l.dirname(r));yield p.rename(t,r)}))}r.mv=mv;function rmRF(t){return s(this,void 0,void 0,(function*(){if(p.IS_WINDOWS){if(/[*"<>|]/.test(t)){throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows')}try{const r=p.getCmdPath();if(yield p.isDirectory(t,true)){yield g(`${r} /s /c "rd /s /q "%inputPath%""`,{env:{inputPath:t}})}else{yield g(`${r} /s /c "del /f /a "%inputPath%""`,{env:{inputPath:t}})}}catch(t){if(t.code!=="ENOENT")throw t}try{yield p.unlink(t)}catch(t){if(t.code!=="ENOENT")throw t}}else{let r=false;try{r=yield p.isDirectory(t)}catch(t){if(t.code!=="ENOENT")throw t;return}if(r){yield v(`rm`,[`-rf`,`${t}`])}else{yield p.unlink(t)}}}))}r.rmRF=rmRF;function mkdirP(t){return s(this,void 0,void 0,(function*(){c.ok(t,"a path argument must be provided");yield p.mkdir(t,{recursive:true})}))}r.mkdirP=mkdirP;function which(t,r){return s(this,void 0,void 0,(function*(){if(!t){throw new Error("parameter 'tool' is required")}if(r){const r=yield which(t,false);if(!r){if(p.IS_WINDOWS){throw new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`)}else{throw new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`)}}return r}const n=yield findInPath(t);if(n&&n.length>0){return n[0]}return""}))}r.which=which;function findInPath(t){return s(this,void 0,void 0,(function*(){if(!t){throw new Error("parameter 'tool' is required")}const r=[];if(p.IS_WINDOWS&&process.env["PATHEXT"]){for(const t of process.env["PATHEXT"].split(l.delimiter)){if(t){r.push(t)}}}if(p.isRooted(t)){const n=yield p.tryGetExecutablePath(t,r);if(n){return[n]}return[]}if(t.includes(l.sep)){return[]}const n=[];if(process.env.PATH){for(const t of process.env.PATH.split(l.delimiter)){if(t){n.push(t)}}}const i=[];for(const o of n){const n=yield p.tryGetExecutablePath(l.join(o,t),r);if(n){i.push(n)}}return i}))}r.findInPath=findInPath;function readCopyOptions(t){const r=t.force==null?true:t.force;const n=Boolean(t.recursive);const i=t.copySourceDirectory==null?true:Boolean(t.copySourceDirectory);return{force:r,recursive:n,copySourceDirectory:i}}function cpDirRecursive(t,r,n,i){return s(this,void 0,void 0,(function*(){if(n>=255)return;n++;yield mkdirP(r);const o=yield p.readdir(t);for(const a of o){const o=`${t}/${a}`;const s=`${r}/${a}`;const c=yield p.lstat(o);if(c.isDirectory()){yield cpDirRecursive(o,s,n,i)}else{yield copyFile(o,s,i)}}yield p.chmod(r,(yield p.stat(t)).mode)}))}function copyFile(t,r,n){return s(this,void 0,void 0,(function*(){if((yield p.lstat(t)).isSymbolicLink()){try{yield p.lstat(r);yield p.unlink(r)}catch(t){if(t.code==="EPERM"){yield p.chmod(r,"0666");yield p.unlink(r)}}const n=yield p.readlink(t);yield p.symlink(n,r,p.IS_WINDOWS?"junction":null)}else if(!(yield p.exists(r))||n){yield p.copyFile(t,r)}}))}},32473:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});r._readLinuxVersionFile=r._getOsVersion=r._findMatch=void 0;const c=a(n(70562));const u=n(42186);const l=n(22037);const d=n(32081);const p=n(57147);function _findMatch(r,n,i,o){return s(this,void 0,void 0,(function*(){const a=l.platform();let s;let d;let p;for(const s of i){const i=s.version;u.debug(`check ${i} satisfies ${r}`);if(c.satisfies(i,r)&&(!n||s.stable===n)){p=s.files.find((r=>{u.debug(`${r.arch}===${o} && ${r.platform}===${a}`);let n=r.arch===o&&r.platform===a;if(n&&r.platform_version){const i=t.exports._getOsVersion();if(i===r.platform_version){n=true}else{n=c.satisfies(i,r.platform_version)}}return n}));if(p){u.debug(`matched ${s.version}`);d=s;break}}}if(d&&p){s=Object.assign({},d);s.files=[p]}return s}))}r._findMatch=_findMatch;function _getOsVersion(){const r=l.platform();let n="";if(r==="darwin"){n=d.execSync("sw_vers -productVersion").toString()}else if(r==="linux"){const r=t.exports._readLinuxVersionFile();if(r){const t=r.split("\n");for(const r of t){const t=r.split("=");if(t.length===2&&(t[0].trim()==="VERSION_ID"||t[0].trim()==="DISTRIB_RELEASE")){n=t[1].trim().replace(/^"/,"").replace(/"$/,"");break}}}}return n}r._getOsVersion=_getOsVersion;function _readLinuxVersionFile(){const t="/etc/lsb-release";const r="/etc/os-release";let n="";if(p.existsSync(t)){n=p.readFileSync(t).toString()}else if(p.existsSync(r)){n=p.readFileSync(r).toString()}return n}r._readLinuxVersionFile=_readLinuxVersionFile},38279:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});r.RetryHelper=void 0;const c=a(n(42186));class RetryHelper{constructor(t,r,n){if(t<1){throw new Error("max attempts should be greater than or equal to 1")}this.maxAttempts=t;this.minSeconds=Math.floor(r);this.maxSeconds=Math.floor(n);if(this.minSeconds>this.maxSeconds){throw new Error("min seconds should be less than or equal to max seconds")}}execute(t,r){return s(this,void 0,void 0,(function*(){let n=1;while(n<this.maxAttempts){try{return yield t()}catch(t){if(r&&!r(t)){throw t}c.info(t.message)}const i=this.getSleepAmount();c.info(`Waiting ${i} seconds before trying again`);yield this.sleep(i);n++}return yield t()}))}getSleepAmount(){return Math.floor(Math.random()*(this.maxSeconds-this.minSeconds+1))+this.minSeconds}sleep(t){return s(this,void 0,void 0,(function*(){return new Promise((r=>setTimeout(r,t*1e3)))}))}}r.RetryHelper=RetryHelper},27784:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});r.evaluateVersions=r.isExplicitVersion=r.findFromManifest=r.getManifestFromRepo=r.findAllVersions=r.find=r.cacheFile=r.cacheDir=r.extractZip=r.extractXar=r.extractTar=r.extract7z=r.downloadTool=r.HTTPError=void 0;const u=a(n(42186));const l=a(n(47351));const d=a(n(57147));const p=a(n(32473));const g=a(n(22037));const v=a(n(71017));const E=a(n(96255));const S=a(n(70562));const w=a(n(12781));const x=a(n(73837));const N=n(39491);const P=c(n(80824));const D=n(71514);const M=n(38279);class HTTPError extends Error{constructor(t){super(`Unexpected HTTP response: ${t}`);this.httpStatusCode=t;Object.setPrototypeOf(this,new.target.prototype)}}r.HTTPError=HTTPError;const L=process.platform==="win32";const U=process.platform==="darwin";const q="actions/tool-cache";function downloadTool(t,r,n,i){return s(this,void 0,void 0,(function*(){r=r||v.join(_getTempDirectory(),P.default());yield l.mkdirP(v.dirname(r));u.debug(`Downloading ${t}`);u.debug(`Destination ${r}`);const o=3;const a=_getGlobal("TEST_DOWNLOAD_TOOL_RETRY_MIN_SECONDS",10);const c=_getGlobal("TEST_DOWNLOAD_TOOL_RETRY_MAX_SECONDS",20);const d=new M.RetryHelper(o,a,c);return yield d.execute((()=>s(this,void 0,void 0,(function*(){return yield downloadToolAttempt(t,r||"",n,i)}))),(t=>{if(t instanceof HTTPError&&t.httpStatusCode){if(t.httpStatusCode<500&&t.httpStatusCode!==408&&t.httpStatusCode!==429){return false}}return true}))}))}r.downloadTool=downloadTool;function downloadToolAttempt(t,r,n,i){return s(this,void 0,void 0,(function*(){if(d.existsSync(r)){throw new Error(`Destination file path ${r} already exists`)}const o=new E.HttpClient(q,[],{allowRetries:false});if(n){u.debug("set auth");if(i===undefined){i={}}i.authorization=n}const a=yield o.get(t,i);if(a.message.statusCode!==200){const r=new HTTPError(a.message.statusCode);u.debug(`Failed to download from "${t}". Code(${a.message.statusCode}) Message(${a.message.statusMessage})`);throw r}const s=x.promisify(w.pipeline);const c=_getGlobal("TEST_DOWNLOAD_TOOL_RESPONSE_MESSAGE_FACTORY",(()=>a.message));const p=c();let g=false;try{yield s(p,d.createWriteStream(r));u.debug("download complete");g=true;return r}finally{if(!g){u.debug("download failed");try{yield l.rmRF(r)}catch(t){u.debug(`Failed to delete '${r}'. ${t.message}`)}}}}))}function extract7z(t,r,n){return s(this,void 0,void 0,(function*(){N.ok(L,"extract7z() not supported on current OS");N.ok(t,'parameter "file" is required');r=yield _createExtractFolder(r);const i=process.cwd();process.chdir(r);if(n){try{const r=u.isDebug()?"-bb1":"-bb0";const i=["x",r,"-bd","-sccUTF-8",t];const o={silent:true};yield D.exec(`"${n}"`,i,o)}finally{process.chdir(i)}}else{const n=v.join(__dirname,"..","scripts","Invoke-7zdec.ps1").replace(/'/g,"''").replace(/"|\n|\r/g,"");const o=t.replace(/'/g,"''").replace(/"|\n|\r/g,"");const a=r.replace(/'/g,"''").replace(/"|\n|\r/g,"");const s=`& '${n}' -Source '${o}' -Target '${a}'`;const c=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",s];const u={silent:true};try{const t=yield l.which("powershell",true);yield D.exec(`"${t}"`,c,u)}finally{process.chdir(i)}}return r}))}r.extract7z=extract7z;function extractTar(t,r,n="xz"){return s(this,void 0,void 0,(function*(){if(!t){throw new Error("parameter 'file' is required")}r=yield _createExtractFolder(r);u.debug("Checking tar --version");let i="";yield D.exec("tar --version",[],{ignoreReturnCode:true,silent:true,listeners:{stdout:t=>i+=t.toString(),stderr:t=>i+=t.toString()}});u.debug(i.trim());const o=i.toUpperCase().includes("GNU TAR");let a;if(n instanceof Array){a=n}else{a=[n]}if(u.isDebug()&&!n.includes("v")){a.push("-v")}let s=r;let c=t;if(L&&o){a.push("--force-local");s=r.replace(/\\/g,"/");c=t.replace(/\\/g,"/")}if(o){a.push("--warning=no-unknown-keyword");a.push("--overwrite")}a.push("-C",s,"-f",c);yield D.exec(`tar`,a);return r}))}r.extractTar=extractTar;function extractXar(t,r,n=[]){return s(this,void 0,void 0,(function*(){N.ok(U,"extractXar() not supported on current OS");N.ok(t,'parameter "file" is required');r=yield _createExtractFolder(r);let i;if(n instanceof Array){i=n}else{i=[n]}i.push("-x","-C",r,"-f",t);if(u.isDebug()){i.push("-v")}const o=yield l.which("xar",true);yield D.exec(`"${o}"`,_unique(i));return r}))}r.extractXar=extractXar;function extractZip(t,r){return s(this,void 0,void 0,(function*(){if(!t){throw new Error("parameter 'file' is required")}r=yield _createExtractFolder(r);if(L){yield extractZipWin(t,r)}else{yield extractZipNix(t,r)}return r}))}r.extractZip=extractZip;function extractZipWin(t,r){return s(this,void 0,void 0,(function*(){const n=t.replace(/'/g,"''").replace(/"|\n|\r/g,"");const i=r.replace(/'/g,"''").replace(/"|\n|\r/g,"");const o=yield l.which("pwsh",false);if(o){const t=[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.ZipFile } catch { } ;`,`try { [System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${i}', $true) }`,`catch { if (($_.Exception.GetType().FullName -eq 'System.Management.Automation.MethodException') -or ($_.Exception.GetType().FullName -eq 'System.Management.Automation.RuntimeException') ){ Expand-Archive -LiteralPath '${n}' -DestinationPath '${i}' -Force } else { throw $_ } } ;`].join(" ");const r=["-NoLogo","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",t];u.debug(`Using pwsh at path: ${o}`);yield D.exec(`"${o}"`,r)}else{const t=[`$ErrorActionPreference = 'Stop' ;`,`try { Add-Type -AssemblyName System.IO.Compression.FileSystem } catch { } ;`,`if ((Get-Command -Name Expand-Archive -Module Microsoft.PowerShell.Archive -ErrorAction Ignore)) { Expand-Archive -LiteralPath '${n}' -DestinationPath '${i}' -Force }`,`else {[System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${i}', $true) }`].join(" ");const r=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",t];const o=yield l.which("powershell",true);u.debug(`Using powershell at path: ${o}`);yield D.exec(`"${o}"`,r)}}))}function extractZipNix(t,r){return s(this,void 0,void 0,(function*(){const n=yield l.which("unzip",true);const i=[t];if(!u.isDebug()){i.unshift("-q")}i.unshift("-o");yield D.exec(`"${n}"`,i,{cwd:r})}))}function cacheDir(t,r,n,i){return s(this,void 0,void 0,(function*(){n=S.clean(n)||n;i=i||g.arch();u.debug(`Caching tool ${r} ${n} ${i}`);u.debug(`source dir: ${t}`);if(!d.statSync(t).isDirectory()){throw new Error("sourceDir is not a directory")}const o=yield _createToolPath(r,n,i);for(const r of d.readdirSync(t)){const n=v.join(t,r);yield l.cp(n,o,{recursive:true})}_completeToolPath(r,n,i);return o}))}r.cacheDir=cacheDir;function cacheFile(t,r,n,i,o){return s(this,void 0,void 0,(function*(){i=S.clean(i)||i;o=o||g.arch();u.debug(`Caching tool ${n} ${i} ${o}`);u.debug(`source file: ${t}`);if(!d.statSync(t).isFile()){throw new Error("sourceFile is not a file")}const a=yield _createToolPath(n,i,o);const s=v.join(a,r);u.debug(`destination file ${s}`);yield l.cp(t,s);_completeToolPath(n,i,o);return a}))}r.cacheFile=cacheFile;function find(t,r,n){if(!t){throw new Error("toolName parameter is required")}if(!r){throw new Error("versionSpec parameter is required")}n=n||g.arch();if(!isExplicitVersion(r)){const i=findAllVersions(t,n);const o=evaluateVersions(i,r);r=o}let i="";if(r){r=S.clean(r)||"";const o=v.join(_getCacheDirectory(),t,r,n);u.debug(`checking cache: ${o}`);if(d.existsSync(o)&&d.existsSync(`${o}.complete`)){u.debug(`Found tool in cache ${t} ${r} ${n}`);i=o}else{u.debug("not found")}}return i}r.find=find;function findAllVersions(t,r){const n=[];r=r||g.arch();const i=v.join(_getCacheDirectory(),t);if(d.existsSync(i)){const t=d.readdirSync(i);for(const o of t){if(isExplicitVersion(o)){const t=v.join(i,o,r||"");if(d.existsSync(t)&&d.existsSync(`${t}.complete`)){n.push(o)}}}}return n}r.findAllVersions=findAllVersions;function getManifestFromRepo(t,r,n,i="master"){return s(this,void 0,void 0,(function*(){let o=[];const a=`https://api.github.com/repos/${t}/${r}/git/trees/${i}`;const s=new E.HttpClient("tool-cache");const c={};if(n){u.debug("set auth");c.authorization=n}const l=yield s.getJson(a,c);if(!l.result){return o}let d="";for(const t of l.result.tree){if(t.path==="versions-manifest.json"){d=t.url;break}}c["accept"]="application/vnd.github.VERSION.raw";let p=yield(yield s.get(d,c)).readBody();if(p){p=p.replace(/^\uFEFF/,"");try{o=JSON.parse(p)}catch(t){u.debug("Invalid json")}}return o}))}r.getManifestFromRepo=getManifestFromRepo;function findFromManifest(t,r,n,i=g.arch()){return s(this,void 0,void 0,(function*(){const o=yield p._findMatch(t,r,n,i);return o}))}r.findFromManifest=findFromManifest;function _createExtractFolder(t){return s(this,void 0,void 0,(function*(){if(!t){t=v.join(_getTempDirectory(),P.default())}yield l.mkdirP(t);return t}))}function _createToolPath(t,r,n){return s(this,void 0,void 0,(function*(){const i=v.join(_getCacheDirectory(),t,S.clean(r)||r,n||"");u.debug(`destination ${i}`);const o=`${i}.complete`;yield l.rmRF(i);yield l.rmRF(o);yield l.mkdirP(i);return i}))}function _completeToolPath(t,r,n){const i=v.join(_getCacheDirectory(),t,S.clean(r)||r,n||"");const o=`${i}.complete`;d.writeFileSync(o,"");u.debug("finished caching tool")}function isExplicitVersion(t){const r=S.clean(t)||"";u.debug(`isExplicit: ${r}`);const n=S.valid(r)!=null;u.debug(`explicit? ${n}`);return n}r.isExplicitVersion=isExplicitVersion;function evaluateVersions(t,r){let n="";u.debug(`evaluating ${t.length} versions`);t=t.sort(((t,r)=>{if(S.gt(t,r)){return 1}return-1}));for(let i=t.length-1;i>=0;i--){const o=t[i];const a=S.satisfies(o,r);if(a){n=o;break}}if(n){u.debug(`matched: ${n}`)}else{u.debug("match not found")}return n}r.evaluateVersions=evaluateVersions;function _getCacheDirectory(){const t=process.env["RUNNER_TOOL_CACHE"]||"";N.ok(t,"Expected RUNNER_TOOL_CACHE to be defined");return t}function _getTempDirectory(){const t=process.env["RUNNER_TEMP"]||"";N.ok(t,"Expected RUNNER_TEMP to be defined");return t}function _getGlobal(t,r){const n=global[t];return n!==undefined?n:r}function _unique(t){return Array.from(new Set(t))}},70562:(t,r)=>{r=t.exports=SemVer;var n;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){n=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER");console.log.apply(console,t)}}else{n=function(){}}r.SEMVER_SPEC_VERSION="2.0.0";var i=256;var o=Number.MAX_SAFE_INTEGER||9007199254740991;var a=16;var s=r.re=[];var c=r.src=[];var u=r.tokens={};var l=0;function tok(t){u[t]=l++}tok("NUMERICIDENTIFIER");c[u.NUMERICIDENTIFIER]="0|[1-9]\\d*";tok("NUMERICIDENTIFIERLOOSE");c[u.NUMERICIDENTIFIERLOOSE]="[0-9]+";tok("NONNUMERICIDENTIFIER");c[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";tok("MAINVERSION");c[u.MAINVERSION]="("+c[u.NUMERICIDENTIFIER]+")\\."+"("+c[u.NUMERICIDENTIFIER]+")\\."+"("+c[u.NUMERICIDENTIFIER]+")";tok("MAINVERSIONLOOSE");c[u.MAINVERSIONLOOSE]="("+c[u.NUMERICIDENTIFIERLOOSE]+")\\."+"("+c[u.NUMERICIDENTIFIERLOOSE]+")\\."+"("+c[u.NUMERICIDENTIFIERLOOSE]+")";tok("PRERELEASEIDENTIFIER");c[u.PRERELEASEIDENTIFIER]="(?:"+c[u.NUMERICIDENTIFIER]+"|"+c[u.NONNUMERICIDENTIFIER]+")";tok("PRERELEASEIDENTIFIERLOOSE");c[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+c[u.NUMERICIDENTIFIERLOOSE]+"|"+c[u.NONNUMERICIDENTIFIER]+")";tok("PRERELEASE");c[u.PRERELEASE]="(?:-("+c[u.PRERELEASEIDENTIFIER]+"(?:\\."+c[u.PRERELEASEIDENTIFIER]+")*))";tok("PRERELEASELOOSE");c[u.PRERELEASELOOSE]="(?:-?("+c[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+c[u.PRERELEASEIDENTIFIERLOOSE]+")*))";tok("BUILDIDENTIFIER");c[u.BUILDIDENTIFIER]="[0-9A-Za-z-]+";tok("BUILD");c[u.BUILD]="(?:\\+("+c[u.BUILDIDENTIFIER]+"(?:\\."+c[u.BUILDIDENTIFIER]+")*))";tok("FULL");tok("FULLPLAIN");c[u.FULLPLAIN]="v?"+c[u.MAINVERSION]+c[u.PRERELEASE]+"?"+c[u.BUILD]+"?";c[u.FULL]="^"+c[u.FULLPLAIN]+"$";tok("LOOSEPLAIN");c[u.LOOSEPLAIN]="[v=\\s]*"+c[u.MAINVERSIONLOOSE]+c[u.PRERELEASELOOSE]+"?"+c[u.BUILD]+"?";tok("LOOSE");c[u.LOOSE]="^"+c[u.LOOSEPLAIN]+"$";tok("GTLT");c[u.GTLT]="((?:<|>)?=?)";tok("XRANGEIDENTIFIERLOOSE");c[u.XRANGEIDENTIFIERLOOSE]=c[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";tok("XRANGEIDENTIFIER");c[u.XRANGEIDENTIFIER]=c[u.NUMERICIDENTIFIER]+"|x|X|\\*";tok("XRANGEPLAIN");c[u.XRANGEPLAIN]="[v=\\s]*("+c[u.XRANGEIDENTIFIER]+")"+"(?:\\.("+c[u.XRANGEIDENTIFIER]+")"+"(?:\\.("+c[u.XRANGEIDENTIFIER]+")"+"(?:"+c[u.PRERELEASE]+")?"+c[u.BUILD]+"?"+")?)?";tok("XRANGEPLAINLOOSE");c[u.XRANGEPLAINLOOSE]="[v=\\s]*("+c[u.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+c[u.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+c[u.XRANGEIDENTIFIERLOOSE]+")"+"(?:"+c[u.PRERELEASELOOSE]+")?"+c[u.BUILD]+"?"+")?)?";tok("XRANGE");c[u.XRANGE]="^"+c[u.GTLT]+"\\s*"+c[u.XRANGEPLAIN]+"$";tok("XRANGELOOSE");c[u.XRANGELOOSE]="^"+c[u.GTLT]+"\\s*"+c[u.XRANGEPLAINLOOSE]+"$";tok("COERCE");c[u.COERCE]="(^|[^\\d])"+"(\\d{1,"+a+"})"+"(?:\\.(\\d{1,"+a+"}))?"+"(?:\\.(\\d{1,"+a+"}))?"+"(?:$|[^\\d])";tok("COERCERTL");s[u.COERCERTL]=new RegExp(c[u.COERCE],"g");tok("LONETILDE");c[u.LONETILDE]="(?:~>?)";tok("TILDETRIM");c[u.TILDETRIM]="(\\s*)"+c[u.LONETILDE]+"\\s+";s[u.TILDETRIM]=new RegExp(c[u.TILDETRIM],"g");var d="$1~";tok("TILDE");c[u.TILDE]="^"+c[u.LONETILDE]+c[u.XRANGEPLAIN]+"$";tok("TILDELOOSE");c[u.TILDELOOSE]="^"+c[u.LONETILDE]+c[u.XRANGEPLAINLOOSE]+"$";tok("LONECARET");c[u.LONECARET]="(?:\\^)";tok("CARETTRIM");c[u.CARETTRIM]="(\\s*)"+c[u.LONECARET]+"\\s+";s[u.CARETTRIM]=new RegExp(c[u.CARETTRIM],"g");var p="$1^";tok("CARET");c[u.CARET]="^"+c[u.LONECARET]+c[u.XRANGEPLAIN]+"$";tok("CARETLOOSE");c[u.CARETLOOSE]="^"+c[u.LONECARET]+c[u.XRANGEPLAINLOOSE]+"$";tok("COMPARATORLOOSE");c[u.COMPARATORLOOSE]="^"+c[u.GTLT]+"\\s*("+c[u.LOOSEPLAIN]+")$|^$";tok("COMPARATOR");c[u.COMPARATOR]="^"+c[u.GTLT]+"\\s*("+c[u.FULLPLAIN]+")$|^$";tok("COMPARATORTRIM");c[u.COMPARATORTRIM]="(\\s*)"+c[u.GTLT]+"\\s*("+c[u.LOOSEPLAIN]+"|"+c[u.XRANGEPLAIN]+")";s[u.COMPARATORTRIM]=new RegExp(c[u.COMPARATORTRIM],"g");var g="$1$2$3";tok("HYPHENRANGE");c[u.HYPHENRANGE]="^\\s*("+c[u.XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+c[u.XRANGEPLAIN]+")"+"\\s*$";tok("HYPHENRANGELOOSE");c[u.HYPHENRANGELOOSE]="^\\s*("+c[u.XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+c[u.XRANGEPLAINLOOSE]+")"+"\\s*$";tok("STAR");c[u.STAR]="(<|>)?=?\\s*\\*";for(var v=0;v<l;v++){n(v,c[v]);if(!s[v]){s[v]=new RegExp(c[v])}}r.parse=parse;function parse(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof SemVer){return t}if(typeof t!=="string"){return null}if(t.length>i){return null}var n=r.loose?s[u.LOOSE]:s[u.FULL];if(!n.test(t)){return null}try{return new SemVer(t,r)}catch(t){return null}}r.valid=valid;function valid(t,r){var n=parse(t,r);return n?n.version:null}r.clean=clean;function clean(t,r){var n=parse(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null}r.SemVer=SemVer;function SemVer(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof SemVer){if(t.loose===r.loose){return t}else{t=t.version}}else if(typeof t!=="string"){throw new TypeError("Invalid Version: "+t)}if(t.length>i){throw new TypeError("version is longer than "+i+" characters")}if(!(this instanceof SemVer)){return new SemVer(t,r)}n("SemVer",t,r);this.options=r;this.loose=!!r.loose;var a=t.trim().match(r.loose?s[u.LOOSE]:s[u.FULL]);if(!a){throw new TypeError("Invalid Version: "+t)}this.raw=t;this.major=+a[1];this.minor=+a[2];this.patch=+a[3];if(this.major>o||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>o||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>o||this.patch<0){throw new TypeError("Invalid patch version")}if(!a[4]){this.prerelease=[]}else{this.prerelease=a[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var r=+t;if(r>=0&&r<o){return r}}return t}))}this.build=a[5]?a[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(t){n("SemVer.compare",this.version,this.options,t);if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}return this.compareMain(t)||this.comparePre(t)};SemVer.prototype.compareMain=function(t){if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}return compareIdentifiers(this.major,t.major)||compareIdentifiers(this.minor,t.minor)||compareIdentifiers(this.patch,t.patch)};SemVer.prototype.comparePre=function(t){if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}if(this.prerelease.length&&!t.prerelease.length){return-1}else if(!this.prerelease.length&&t.prerelease.length){return 1}else if(!this.prerelease.length&&!t.prerelease.length){return 0}var r=0;do{var i=this.prerelease[r];var o=t.prerelease[r];n("prerelease compare",r,i,o);if(i===undefined&&o===undefined){return 0}else if(o===undefined){return 1}else if(i===undefined){return-1}else if(i===o){continue}else{return compareIdentifiers(i,o)}}while(++r)};SemVer.prototype.compareBuild=function(t){if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}var r=0;do{var i=this.build[r];var o=t.build[r];n("prerelease compare",r,i,o);if(i===undefined&&o===undefined){return 0}else if(o===undefined){return 1}else if(i===undefined){return-1}else if(i===o){continue}else{return compareIdentifiers(i,o)}}while(++r)};SemVer.prototype.inc=function(t,r){switch(t){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",r);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",r);break;case"prepatch":this.prerelease.length=0;this.inc("patch",r);this.inc("pre",r);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",r)}this.inc("pre",r);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var n=this.prerelease.length;while(--n>=0){if(typeof this.prerelease[n]==="number"){this.prerelease[n]++;n=-2}}if(n===-1){this.prerelease.push(0)}}if(r){if(this.prerelease[0]===r){if(isNaN(this.prerelease[1])){this.prerelease=[r,0]}}else{this.prerelease=[r,0]}}break;default:throw new Error("invalid increment argument: "+t)}this.format();this.raw=this.version;return this};r.inc=inc;function inc(t,r,n,i){if(typeof n==="string"){i=n;n=undefined}try{return new SemVer(t,n).inc(r,i).version}catch(t){return null}}r.diff=diff;function diff(t,r){if(eq(t,r)){return null}else{var n=parse(t);var i=parse(r);var o="";if(n.prerelease.length||i.prerelease.length){o="pre";var a="prerelease"}for(var s in n){if(s==="major"||s==="minor"||s==="patch"){if(n[s]!==i[s]){return o+s}}}return a}}r.compareIdentifiers=compareIdentifiers;var E=/^[0-9]+$/;function compareIdentifiers(t,r){var n=E.test(t);var i=E.test(r);if(n&&i){t=+t;r=+r}return t===r?0:n&&!i?-1:i&&!n?1:t<r?-1:1}r.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(t,r){return compareIdentifiers(r,t)}r.major=major;function major(t,r){return new SemVer(t,r).major}r.minor=minor;function minor(t,r){return new SemVer(t,r).minor}r.patch=patch;function patch(t,r){return new SemVer(t,r).patch}r.compare=compare;function compare(t,r,n){return new SemVer(t,n).compare(new SemVer(r,n))}r.compareLoose=compareLoose;function compareLoose(t,r){return compare(t,r,true)}r.compareBuild=compareBuild;function compareBuild(t,r,n){var i=new SemVer(t,n);var o=new SemVer(r,n);return i.compare(o)||i.compareBuild(o)}r.rcompare=rcompare;function rcompare(t,r,n){return compare(r,t,n)}r.sort=sort;function sort(t,n){return t.sort((function(t,i){return r.compareBuild(t,i,n)}))}r.rsort=rsort;function rsort(t,n){return t.sort((function(t,i){return r.compareBuild(i,t,n)}))}r.gt=gt;function gt(t,r,n){return compare(t,r,n)>0}r.lt=lt;function lt(t,r,n){return compare(t,r,n)<0}r.eq=eq;function eq(t,r,n){return compare(t,r,n)===0}r.neq=neq;function neq(t,r,n){return compare(t,r,n)!==0}r.gte=gte;function gte(t,r,n){return compare(t,r,n)>=0}r.lte=lte;function lte(t,r,n){return compare(t,r,n)<=0}r.cmp=cmp;function cmp(t,r,n,i){switch(r){case"===":if(typeof t==="object")t=t.version;if(typeof n==="object")n=n.version;return t===n;case"!==":if(typeof t==="object")t=t.version;if(typeof n==="object")n=n.version;return t!==n;case"":case"=":case"==":return eq(t,n,i);case"!=":return neq(t,n,i);case">":return gt(t,n,i);case">=":return gte(t,n,i);case"<":return lt(t,n,i);case"<=":return lte(t,n,i);default:throw new TypeError("Invalid operator: "+r)}}r.Comparator=Comparator;function Comparator(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof Comparator){if(t.loose===!!r.loose){return t}else{t=t.value}}if(!(this instanceof Comparator)){return new Comparator(t,r)}n("comparator",t,r);this.options=r;this.loose=!!r.loose;this.parse(t);if(this.semver===S){this.value=""}else{this.value=this.operator+this.semver.version}n("comp",this)}var S={};Comparator.prototype.parse=function(t){var r=this.options.loose?s[u.COMPARATORLOOSE]:s[u.COMPARATOR];var n=t.match(r);if(!n){throw new TypeError("Invalid comparator: "+t)}this.operator=n[1]!==undefined?n[1]:"";if(this.operator==="="){this.operator=""}if(!n[2]){this.semver=S}else{this.semver=new SemVer(n[2],this.options.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(t){n("Comparator.test",t,this.options.loose);if(this.semver===S||t===S){return true}if(typeof t==="string"){try{t=new SemVer(t,this.options)}catch(t){return false}}return cmp(t,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(t,r){if(!(t instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}var n;if(this.operator===""){if(this.value===""){return true}n=new Range(t.value,r);return satisfies(this.value,n,r)}else if(t.operator===""){if(t.value===""){return true}n=new Range(this.value,r);return satisfies(t.semver,n,r)}var i=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">");var o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<");var a=this.semver.version===t.semver.version;var s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<=");var c=cmp(this.semver,"<",t.semver,r)&&((this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"));var u=cmp(this.semver,">",t.semver,r)&&((this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">"));return i||o||a&&s||c||u};r.Range=Range;function Range(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof Range){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease){return t}else{return new Range(t.raw,r)}}if(t instanceof Comparator){return new Range(t.value,r)}if(!(this instanceof Range)){return new Range(t,r)}this.options=r;this.loose=!!r.loose;this.includePrerelease=!!r.includePrerelease;this.raw=t;this.set=t.split(/\s*\|\|\s*/).map((function(t){return this.parseRange(t.trim())}),this).filter((function(t){return t.length}));if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+t)}this.format()}Range.prototype.format=function(){this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(t){var r=this.options.loose;t=t.trim();var i=r?s[u.HYPHENRANGELOOSE]:s[u.HYPHENRANGE];t=t.replace(i,hyphenReplace);n("hyphen replace",t);t=t.replace(s[u.COMPARATORTRIM],g);n("comparator trim",t,s[u.COMPARATORTRIM]);t=t.replace(s[u.TILDETRIM],d);t=t.replace(s[u.CARETTRIM],p);t=t.split(/\s+/).join(" ");var o=r?s[u.COMPARATORLOOSE]:s[u.COMPARATOR];var a=t.split(" ").map((function(t){return parseComparator(t,this.options)}),this).join(" ").split(/\s+/);if(this.options.loose){a=a.filter((function(t){return!!t.match(o)}))}a=a.map((function(t){return new Comparator(t,this.options)}),this);return a};Range.prototype.intersects=function(t,r){if(!(t instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((function(n){return isSatisfiable(n,r)&&t.set.some((function(t){return isSatisfiable(t,r)&&n.every((function(n){return t.every((function(t){return n.intersects(t,r)}))}))}))}))};function isSatisfiable(t,r){var n=true;var i=t.slice();var o=i.pop();while(n&&i.length){n=i.every((function(t){return o.intersects(t,r)}));o=i.pop()}return n}r.toComparators=toComparators;function toComparators(t,r){return new Range(t,r).set.map((function(t){return t.map((function(t){return t.value})).join(" ").trim().split(" ")}))}function parseComparator(t,r){n("comp",t,r);t=replaceCarets(t,r);n("caret",t);t=replaceTildes(t,r);n("tildes",t);t=replaceXRanges(t,r);n("xrange",t);t=replaceStars(t,r);n("stars",t);return t}function isX(t){return!t||t.toLowerCase()==="x"||t==="*"}function replaceTildes(t,r){return t.trim().split(/\s+/).map((function(t){return replaceTilde(t,r)})).join(" ")}function replaceTilde(t,r){var i=r.loose?s[u.TILDELOOSE]:s[u.TILDE];return t.replace(i,(function(r,i,o,a,s){n("tilde",t,r,i,o,a,s);var c;if(isX(i)){c=""}else if(isX(o)){c=">="+i+".0.0 <"+(+i+1)+".0.0"}else if(isX(a)){c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"}else if(s){n("replaceTilde pr",s);c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+(+o+1)+".0"}else{c=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0"}n("tilde return",c);return c}))}function replaceCarets(t,r){return t.trim().split(/\s+/).map((function(t){return replaceCaret(t,r)})).join(" ")}function replaceCaret(t,r){n("caret",t,r);var i=r.loose?s[u.CARETLOOSE]:s[u.CARET];return t.replace(i,(function(r,i,o,a,s){n("caret",t,r,i,o,a,s);var c;if(isX(i)){c=""}else if(isX(o)){c=">="+i+".0.0 <"+(+i+1)+".0.0"}else if(isX(a)){if(i==="0"){c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"}else{c=">="+i+"."+o+".0 <"+(+i+1)+".0.0"}}else if(s){n("replaceCaret pr",s);if(i==="0"){if(o==="0"){c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+o+"."+(+a+1)}else{c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+(+o+1)+".0"}}else{c=">="+i+"."+o+"."+a+"-"+s+" <"+(+i+1)+".0.0"}}else{n("no pr");if(i==="0"){if(o==="0"){c=">="+i+"."+o+"."+a+" <"+i+"."+o+"."+(+a+1)}else{c=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0"}}else{c=">="+i+"."+o+"."+a+" <"+(+i+1)+".0.0"}}n("caret return",c);return c}))}function replaceXRanges(t,r){n("replaceXRanges",t,r);return t.split(/\s+/).map((function(t){return replaceXRange(t,r)})).join(" ")}function replaceXRange(t,r){t=t.trim();var i=r.loose?s[u.XRANGELOOSE]:s[u.XRANGE];return t.replace(i,(function(i,o,a,s,c,u){n("xRange",t,i,o,a,s,c,u);var l=isX(a);var d=l||isX(s);var p=d||isX(c);var g=p;if(o==="="&&g){o=""}u=r.includePrerelease?"-0":"";if(l){if(o===">"||o==="<"){i="<0.0.0-0"}else{i="*"}}else if(o&&g){if(d){s=0}c=0;if(o===">"){o=">=";if(d){a=+a+1;s=0;c=0}else{s=+s+1;c=0}}else if(o==="<="){o="<";if(d){a=+a+1}else{s=+s+1}}i=o+a+"."+s+"."+c+u}else if(d){i=">="+a+".0.0"+u+" <"+(+a+1)+".0.0"+u}else if(p){i=">="+a+"."+s+".0"+u+" <"+a+"."+(+s+1)+".0"+u}n("xRange return",i);return i}))}function replaceStars(t,r){n("replaceStars",t,r);return t.trim().replace(s[u.STAR],"")}function hyphenReplace(t,r,n,i,o,a,s,c,u,l,d,p,g){if(isX(n)){r=""}else if(isX(i)){r=">="+n+".0.0"}else if(isX(o)){r=">="+n+"."+i+".0"}else{r=">="+r}if(isX(u)){c=""}else if(isX(l)){c="<"+(+u+1)+".0.0"}else if(isX(d)){c="<"+u+"."+(+l+1)+".0"}else if(p){c="<="+u+"."+l+"."+d+"-"+p}else{c="<="+c}return(r+" "+c).trim()}Range.prototype.test=function(t){if(!t){return false}if(typeof t==="string"){try{t=new SemVer(t,this.options)}catch(t){return false}}for(var r=0;r<this.set.length;r++){if(testSet(this.set[r],t,this.options)){return true}}return false};function testSet(t,r,i){for(var o=0;o<t.length;o++){if(!t[o].test(r)){return false}}if(r.prerelease.length&&!i.includePrerelease){for(o=0;o<t.length;o++){n(t[o].semver);if(t[o].semver===S){continue}if(t[o].semver.prerelease.length>0){var a=t[o].semver;if(a.major===r.major&&a.minor===r.minor&&a.patch===r.patch){return true}}}return false}return true}r.satisfies=satisfies;function satisfies(t,r,n){try{r=new Range(r,n)}catch(t){return false}return r.test(t)}r.maxSatisfying=maxSatisfying;function maxSatisfying(t,r,n){var i=null;var o=null;try{var a=new Range(r,n)}catch(t){return null}t.forEach((function(t){if(a.test(t)){if(!i||o.compare(t)===-1){i=t;o=new SemVer(i,n)}}}));return i}r.minSatisfying=minSatisfying;function minSatisfying(t,r,n){var i=null;var o=null;try{var a=new Range(r,n)}catch(t){return null}t.forEach((function(t){if(a.test(t)){if(!i||o.compare(t)===1){i=t;o=new SemVer(i,n)}}}));return i}r.minVersion=minVersion;function minVersion(t,r){t=new Range(t,r);var n=new SemVer("0.0.0");if(t.test(n)){return n}n=new SemVer("0.0.0-0");if(t.test(n)){return n}n=null;for(var i=0;i<t.set.length;++i){var o=t.set[i];o.forEach((function(t){var r=new SemVer(t.semver.version);switch(t.operator){case">":if(r.prerelease.length===0){r.patch++}else{r.prerelease.push(0)}r.raw=r.format();case"":case">=":if(!n||gt(n,r)){n=r}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}}))}if(n&&t.test(n)){return n}return null}r.validRange=validRange;function validRange(t,r){try{return new Range(t,r).range||"*"}catch(t){return null}}r.ltr=ltr;function ltr(t,r,n){return outside(t,r,"<",n)}r.gtr=gtr;function gtr(t,r,n){return outside(t,r,">",n)}r.outside=outside;function outside(t,r,n,i){t=new SemVer(t,i);r=new Range(r,i);var o,a,s,c,u;switch(n){case">":o=gt;a=lte;s=lt;c=">";u=">=";break;case"<":o=lt;a=gte;s=gt;c="<";u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(t,r,i)){return false}for(var l=0;l<r.set.length;++l){var d=r.set[l];var p=null;var g=null;d.forEach((function(t){if(t.semver===S){t=new Comparator(">=0.0.0")}p=p||t;g=g||t;if(o(t.semver,p.semver,i)){p=t}else if(s(t.semver,g.semver,i)){g=t}}));if(p.operator===c||p.operator===u){return false}if((!g.operator||g.operator===c)&&a(t,g.semver)){return false}else if(g.operator===u&&s(t,g.semver)){return false}}return true}r.prerelease=prerelease;function prerelease(t,r){var n=parse(t,r);return n&&n.prerelease.length?n.prerelease:null}r.intersects=intersects;function intersects(t,r,n){t=new Range(t,n);r=new Range(r,n);return t.intersects(r)}r.coerce=coerce;function coerce(t,r){if(t instanceof SemVer){return t}if(typeof t==="number"){t=String(t)}if(typeof t!=="string"){return null}r=r||{};var n=null;if(!r.rtl){n=t.match(s[u.COERCE])}else{var i;while((i=s[u.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length)){if(!n||i.index+i[0].length!==n.index+n[0].length){n=i}s[u.COERCERTL].lastIndex=i.index+i[1].length+i[2].length}s[u.COERCERTL].lastIndex=-1}if(n===null){return null}return parse(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),r)}},52557:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const n=new WeakMap;const i=new WeakMap;class AbortSignal{constructor(){this.onabort=null;n.set(this,[]);i.set(this,false)}get aborted(){if(!i.has(this)){throw new TypeError("Expected `this` to be an instance of AbortSignal.")}return i.get(this)}static get none(){return new AbortSignal}addEventListener(t,r){if(!n.has(this)){throw new TypeError("Expected `this` to be an instance of AbortSignal.")}const i=n.get(this);i.push(r)}removeEventListener(t,r){if(!n.has(this)){throw new TypeError("Expected `this` to be an instance of AbortSignal.")}const i=n.get(this);const o=i.indexOf(r);if(o>-1){i.splice(o,1)}}dispatchEvent(t){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function abortSignal(t){if(t.aborted){return}if(t.onabort){t.onabort.call(t)}const r=n.get(t);if(r){r.slice().forEach((r=>{r.call(t,{type:"abort"})}))}i.set(t,true)}class AbortError extends Error{constructor(t){super(t);this.name="AbortError"}}class AbortController{constructor(t){this._signal=new AbortSignal;if(!t){return}if(!Array.isArray(t)){t=arguments}for(const r of t){if(r.aborted){this.abort()}else{r.addEventListener("abort",(()=>{this.abort()}))}}}get signal(){return this._signal}abort(){abortSignal(this._signal)}static timeout(t){const r=new AbortSignal;const n=setTimeout(abortSignal,t,r);if(typeof n.unref==="function"){n.unref()}return r}}r.AbortController=AbortController;r.AbortError=AbortError;r.AbortSignal=AbortSignal},29729:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=n(88121);var o=n(3233);function encodeByteArray(t){const r=t instanceof Buffer?t:Buffer.from(t.buffer);return r.toString("base64")}function decodeString(t){return Buffer.from(t,"base64")}function decodeStringToString(t){return Buffer.from(t,"base64").toString()}const a="$";const s="_";function isPrimitiveBody(t,r){return r!=="Composite"&&r!=="Dictionary"&&(typeof t==="string"||typeof t==="number"||typeof t==="boolean"||(r===null||r===void 0?void 0:r.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))!==null||t===undefined||t===null)}const c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function isDuration(t){return c.test(t)}const u=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function isValidUuid(t){return u.test(t)}function handleNullableResponseAndWrappableBody(t){const r=Object.assign(Object.assign({},t.headers),t.body);if(t.hasNullableType&&Object.getOwnPropertyNames(r).length===0){return t.shouldWrapBody?{body:null}:null}else{return t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):r}}function flattenResponse(t,r){var n,i;const o=t.parsedHeaders;if(t.request.method==="HEAD"){return Object.assign(Object.assign({},o),{body:t.parsedBody})}const a=r&&r.bodyMapper;const s=Boolean(a===null||a===void 0?void 0:a.nullable);const c=a===null||a===void 0?void 0:a.type.name;if(c==="Stream"){return Object.assign(Object.assign({},o),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody})}const u=c==="Composite"&&a.type.modelProperties||{};const l=Object.keys(u).some((t=>u[t].serializedName===""));if(c==="Sequence"||l){const r=(n=t.parsedBody)!==null&&n!==void 0?n:[];for(const n of Object.keys(u)){if(u[n].serializedName){r[n]=(i=t.parsedBody)===null||i===void 0?void 0:i[n]}}if(o){for(const t of Object.keys(o)){r[t]=o[t]}}return s&&!t.parsedBody&&!o&&Object.getOwnPropertyNames(u).length===0?null:r}return handleNullableResponseAndWrappableBody({body:t.parsedBody,headers:o,hasNullableType:s,shouldWrapBody:isPrimitiveBody(t.parsedBody,c)})}class SerializerImpl{constructor(t={},r=false){this.modelMappers=t;this.isXML=r}validateConstraints(t,r,n){const failValidation=(t,i)=>{throw new Error(`"${n}" with value "${r}" should satisfy the constraint "${t}": ${i}.`)};if(t.constraints&&r!==undefined&&r!==null){const{ExclusiveMaximum:n,ExclusiveMinimum:i,InclusiveMaximum:o,InclusiveMinimum:a,MaxItems:s,MaxLength:c,MinItems:u,MinLength:l,MultipleOf:d,Pattern:p,UniqueItems:g}=t.constraints;if(n!==undefined&&r>=n){failValidation("ExclusiveMaximum",n)}if(i!==undefined&&r<=i){failValidation("ExclusiveMinimum",i)}if(o!==undefined&&r>o){failValidation("InclusiveMaximum",o)}if(a!==undefined&&r<a){failValidation("InclusiveMinimum",a)}if(s!==undefined&&r.length>s){failValidation("MaxItems",s)}if(c!==undefined&&r.length>c){failValidation("MaxLength",c)}if(u!==undefined&&r.length<u){failValidation("MinItems",u)}if(l!==undefined&&r.length<l){failValidation("MinLength",l)}if(d!==undefined&&r%d!==0){failValidation("MultipleOf",d)}if(p){const t=typeof p==="string"?new RegExp(p):p;if(typeof r!=="string"||r.match(t)===null){failValidation("Pattern",p)}}if(g&&r.some(((t,r,n)=>n.indexOf(t)!==r))){failValidation("UniqueItems",g)}}}serialize(t,r,n,i={xml:{}}){var o,a,c;const u={xml:{rootName:(o=i.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=i.xml.includeRoot)!==null&&a!==void 0?a:false,xmlCharKey:(c=i.xml.xmlCharKey)!==null&&c!==void 0?c:s}};let l={};const d=t.type.name;if(!n){n=t.serializedName}if(d.match(/^Sequence$/i)!==null){l=[]}if(t.isConstant){r=t.defaultValue}const{required:p,nullable:g}=t;if(p&&g&&r===undefined){throw new Error(`${n} cannot be undefined.`)}if(p&&!g&&(r===undefined||r===null)){throw new Error(`${n} cannot be null or undefined.`)}if(!p&&g===false&&r===null){throw new Error(`${n} cannot be null.`)}if(r===undefined||r===null){l=r}else{this.validateConstraints(t,r,n);if(d.match(/^any$/i)!==null){l=r}else if(d.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null){l=serializeBasicTypes(d,n,r)}else if(d.match(/^Enum$/i)!==null){const i=t;l=serializeEnumType(n,i.type.allowedValues,r)}else if(d.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null){l=serializeDateTypes(d,r,n)}else if(d.match(/^ByteArray$/i)!==null){l=serializeByteArrayType(n,r)}else if(d.match(/^Base64Url$/i)!==null){l=serializeBase64UrlType(n,r)}else if(d.match(/^Sequence$/i)!==null){l=serializeSequenceType(this,t,r,n,Boolean(this.isXML),u)}else if(d.match(/^Dictionary$/i)!==null){l=serializeDictionaryType(this,t,r,n,Boolean(this.isXML),u)}else if(d.match(/^Composite$/i)!==null){l=serializeCompositeType(this,t,r,n,Boolean(this.isXML),u)}}return l}deserialize(t,r,n,i={xml:{}}){var o,c,u;const l={xml:{rootName:(o=i.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(c=i.xml.includeRoot)!==null&&c!==void 0?c:false,xmlCharKey:(u=i.xml.xmlCharKey)!==null&&u!==void 0?u:s}};if(r===undefined||r===null){if(this.isXML&&t.type.name==="Sequence"&&!t.xmlIsWrapped){r=[]}if(t.defaultValue!==undefined){r=t.defaultValue}return r}let d;const p=t.type.name;if(!n){n=t.serializedName}if(p.match(/^Composite$/i)!==null){d=deserializeCompositeType(this,t,r,n,l)}else{if(this.isXML){const t=l.xml.xmlCharKey;if(r[a]!==undefined&&r[t]!==undefined){r=r[t]}}if(p.match(/^Number$/i)!==null){d=parseFloat(r);if(isNaN(d)){d=r}}else if(p.match(/^Boolean$/i)!==null){if(r==="true"){d=true}else if(r==="false"){d=false}else{d=r}}else if(p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null){d=r}else if(p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null){d=new Date(r)}else if(p.match(/^UnixTime$/i)!==null){d=unixTimeToDate(r)}else if(p.match(/^ByteArray$/i)!==null){d=decodeString(r)}else if(p.match(/^Base64Url$/i)!==null){d=base64UrlToByteArray(r)}else if(p.match(/^Sequence$/i)!==null){d=deserializeSequenceType(this,t,r,n,l)}else if(p.match(/^Dictionary$/i)!==null){d=deserializeDictionaryType(this,t,r,n,l)}}if(t.isConstant){d=t.defaultValue}return d}}function createSerializer(t={},r=false){return new SerializerImpl(t,r)}function trimEnd(t,r){let n=t.length;while(n-1>=0&&t[n-1]===r){--n}return t.substr(0,n)}function bufferToBase64Url(t){if(!t){return undefined}if(!(t instanceof Uint8Array)){throw new Error(`Please provide an input of type Uint8Array for converting to Base64Url.`)}const r=encodeByteArray(t);return trimEnd(r,"=").replace(/\+/g,"-").replace(/\//g,"_")}function base64UrlToByteArray(t){if(!t){return undefined}if(t&&typeof t.valueOf()!=="string"){throw new Error("Please provide an input of type string for converting to Uint8Array")}t=t.replace(/-/g,"+").replace(/_/g,"/");return decodeString(t)}function splitSerializeName(t){const r=[];let n="";if(t){const i=t.split(".");for(const t of i){if(t.charAt(t.length-1)==="\\"){n+=t.substr(0,t.length-1)+"."}else{n+=t;r.push(n);n=""}}}return r}function dateToUnixTime(t){if(!t){return undefined}if(typeof t.valueOf()==="string"){t=new Date(t)}return Math.floor(t.getTime()/1e3)}function unixTimeToDate(t){if(!t){return undefined}return new Date(t*1e3)}function serializeBasicTypes(t,r,n){if(n!==null&&n!==undefined){if(t.match(/^Number$/i)!==null){if(typeof n!=="number"){throw new Error(`${r} with value ${n} must be of type number.`)}}else if(t.match(/^String$/i)!==null){if(typeof n.valueOf()!=="string"){throw new Error(`${r} with value "${n}" must be of type string.`)}}else if(t.match(/^Uuid$/i)!==null){if(!(typeof n.valueOf()==="string"&&isValidUuid(n))){throw new Error(`${r} with value "${n}" must be of type string and a valid uuid.`)}}else if(t.match(/^Boolean$/i)!==null){if(typeof n!=="boolean"){throw new Error(`${r} with value ${n} must be of type boolean.`)}}else if(t.match(/^Stream$/i)!==null){const t=typeof n;if(t!=="string"&&typeof n.pipe!=="function"&&!(n instanceof ArrayBuffer)&&!ArrayBuffer.isView(n)&&!((typeof Blob==="function"||typeof Blob==="object")&&n instanceof Blob)){throw new Error(`${r} must be a string, Blob, ArrayBuffer, ArrayBufferView, or NodeJS.ReadableStream.`)}}}return n}function serializeEnumType(t,r,n){if(!r){throw new Error(`Please provide a set of allowedValues to validate ${t} as an Enum Type.`)}const i=r.some((t=>{if(typeof t.valueOf()==="string"){return t.toLowerCase()===n.toLowerCase()}return t===n}));if(!i){throw new Error(`${n} is not a valid value for ${t}. The valid values are: ${JSON.stringify(r)}.`)}return n}function serializeByteArrayType(t,r){if(r!==undefined&&r!==null){if(!(r instanceof Uint8Array)){throw new Error(`${t} must be of type Uint8Array.`)}r=encodeByteArray(r)}return r}function serializeBase64UrlType(t,r){if(r!==undefined&&r!==null){if(!(r instanceof Uint8Array)){throw new Error(`${t} must be of type Uint8Array.`)}r=bufferToBase64Url(r)}return r}function serializeDateTypes(t,r,n){if(r!==undefined&&r!==null){if(t.match(/^Date$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()==="string"&&!isNaN(Date.parse(r)))){throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`)}r=r instanceof Date?r.toISOString().substring(0,10):new Date(r).toISOString().substring(0,10)}else if(t.match(/^DateTime$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()==="string"&&!isNaN(Date.parse(r)))){throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`)}r=r instanceof Date?r.toISOString():new Date(r).toISOString()}else if(t.match(/^DateTimeRfc1123$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()==="string"&&!isNaN(Date.parse(r)))){throw new Error(`${n} must be an instanceof Date or a string in RFC-1123 format.`)}r=r instanceof Date?r.toUTCString():new Date(r).toUTCString()}else if(t.match(/^UnixTime$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()==="string"&&!isNaN(Date.parse(r)))){throw new Error(`${n} must be an instanceof Date or a string in RFC-1123/ISO8601 format `+`for it to be serialized in UnixTime/Epoch format.`)}r=dateToUnixTime(r)}else if(t.match(/^TimeSpan$/i)!==null){if(!isDuration(r)){throw new Error(`${n} must be a string in ISO 8601 format. Instead was "${r}".`)}}}return r}function serializeSequenceType(t,r,n,i,o,s){var c;if(!Array.isArray(n)){throw new Error(`${i} must be of type Array.`)}let u=r.type.element;if(!u||typeof u!=="object"){throw new Error(`element" metadata for an Array must be defined in the `+`mapper and it must of type "object" in ${i}.`)}if(u.type.name==="Composite"&&u.type.className){u=(c=t.modelMappers[u.type.className])!==null&&c!==void 0?c:u}const l=[];for(let r=0;r<n.length;r++){const c=t.serialize(u,n[r],i,s);if(o&&u.xmlNamespace){const t=u.xmlNamespacePrefix?`xmlns:${u.xmlNamespacePrefix}`:"xmlns";if(u.type.name==="Composite"){l[r]=Object.assign({},c);l[r][a]={[t]:u.xmlNamespace}}else{l[r]={};l[r][s.xml.xmlCharKey]=c;l[r][a]={[t]:u.xmlNamespace}}}else{l[r]=c}}return l}function serializeDictionaryType(t,r,n,i,o,s){if(typeof n!=="object"){throw new Error(`${i} must be of type object.`)}const c=r.type.value;if(!c||typeof c!=="object"){throw new Error(`"value" metadata for a Dictionary must be defined in the `+`mapper and it must of type "object" in ${i}.`)}const u={};for(const r of Object.keys(n)){const a=t.serialize(c,n[r],i,s);u[r]=getXmlObjectValue(c,a,o,s)}if(o&&r.xmlNamespace){const t=r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns";const n=u;n[a]={[t]:r.xmlNamespace};return n}return u}function resolveAdditionalProperties(t,r,n){const i=r.type.additionalProperties;if(!i&&r.type.className){const i=resolveReferencedMapper(t,r,n);return i===null||i===void 0?void 0:i.type.additionalProperties}return i}function resolveReferencedMapper(t,r,n){const i=r.type.className;if(!i){throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(r,undefined,2)}".`)}return t.modelMappers[i]}function resolveModelProperties(t,r,n){let i=r.type.modelProperties;if(!i){const o=resolveReferencedMapper(t,r,n);if(!o){throw new Error(`mapper() cannot be null or undefined for model "${r.type.className}".`)}i=o===null||o===void 0?void 0:o.type.modelProperties;if(!i){throw new Error(`modelProperties cannot be null or undefined in the `+`mapper "${JSON.stringify(o)}" of type "${r.type.className}" for object "${n}".`)}}return i}function serializeCompositeType(t,r,n,i,o,s){if(getPolymorphicDiscriminatorRecursively(t,r)){r=getPolymorphicMapper(t,r,n,"clientName")}if(n!==undefined&&n!==null){const c={};const u=resolveModelProperties(t,r,i);for(const l of Object.keys(u)){const d=u[l];if(d.readOnly){continue}let p;let g=c;if(t.isXML){if(d.xmlIsWrapped){p=d.xmlName}else{p=d.xmlElementName||d.xmlName}}else{const t=splitSerializeName(d.serializedName);p=t.pop();for(const r of t){const t=g[r];if((t===undefined||t===null)&&(n[l]!==undefined&&n[l]!==null||d.defaultValue!==undefined)){g[r]={}}g=g[r]}}if(g!==undefined&&g!==null){if(o&&r.xmlNamespace){const t=r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns";g[a]=Object.assign(Object.assign({},g[a]),{[t]:r.xmlNamespace})}const c=d.serializedName!==""?i+"."+d.serializedName:i;let u=n[l];const v=getPolymorphicDiscriminatorRecursively(t,r);if(v&&v.clientName===l&&(u===undefined||u===null)){u=r.serializedName}const E=t.serialize(d,u,c,s);if(E!==undefined&&p!==undefined&&p!==null){const t=getXmlObjectValue(d,E,o,s);if(o&&d.xmlIsAttribute){g[a]=g[a]||{};g[a][p]=E}else if(o&&d.xmlIsWrapped){g[p]={[d.xmlElementName]:t}}else{g[p]=t}}}}const l=resolveAdditionalProperties(t,r,i);if(l){const r=Object.keys(u);for(const o in n){const a=r.every((t=>t!==o));if(a){c[o]=t.serialize(l,n[o],i+'["'+o+'"]',s)}}}return c}return n}function getXmlObjectValue(t,r,n,i){if(!n||!t.xmlNamespace){return r}const o=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";const s={[o]:t.xmlNamespace};if(["Composite"].includes(t.type.name)){if(r[a]){return r}else{const t=Object.assign({},r);t[a]=s;return t}}const c={};c[i.xml.xmlCharKey]=r;c[a]=s;return c}function isSpecialXmlProperty(t,r){return[a,r.xml.xmlCharKey].includes(t)}function deserializeCompositeType(t,r,n,i,o){var s;if(getPolymorphicDiscriminatorRecursively(t,r)){r=getPolymorphicMapper(t,r,n,"serializedName")}const c=resolveModelProperties(t,r,i);let u={};const l=[];for(const d of Object.keys(c)){const p=c[d];const g=splitSerializeName(c[d].serializedName);l.push(g[0]);const{serializedName:v,xmlName:E,xmlElementName:S}=p;let w=i;if(v!==""&&v!==undefined){w=i+"."+v}const x=p.headerCollectionPrefix;if(x){const r={};for(const i of Object.keys(n)){if(i.startsWith(x)){r[i.substring(x.length)]=t.deserialize(p.type.value,n[i],w,o)}l.push(i)}u[d]=r}else if(t.isXML){if(p.xmlIsAttribute&&n[a]){u[d]=t.deserialize(p,n[a][E],w,o)}else{const r=S||E||v;if(p.xmlIsWrapped){const r=n[E];const i=(s=r===null||r===void 0?void 0:r[S])!==null&&s!==void 0?s:[];u[d]=t.deserialize(p,i,w,o)}else{const i=n[r];u[d]=t.deserialize(p,i,w,o)}}}else{let i;let a=n;for(const t of g){if(!a)break;a=a[t]}i=a;const s=r.type.polymorphicDiscriminator;if(s&&d===s.clientName&&(i===undefined||i===null)){i=r.serializedName}let l;if(Array.isArray(n[d])&&c[d].serializedName===""){i=n[d];const r=t.deserialize(p,i,w,o);for(const[t,n]of Object.entries(u)){if(!Object.prototype.hasOwnProperty.call(r,t)){r[t]=n}}u=r}else if(i!==undefined||p.defaultValue!==undefined){l=t.deserialize(p,i,w,o);u[d]=l}}}const d=r.type.additionalProperties;if(d){const isAdditionalProperty=t=>{for(const r in c){const n=splitSerializeName(c[r].serializedName);if(n[0]===t){return false}}return true};for(const r in n){if(isAdditionalProperty(r)){u[r]=t.deserialize(d,n[r],i+'["'+r+'"]',o)}}}else if(n){for(const t of Object.keys(n)){if(u[t]===undefined&&!l.includes(t)&&!isSpecialXmlProperty(t,o)){u[t]=n[t]}}}return u}function deserializeDictionaryType(t,r,n,i,o){const a=r.type.value;if(!a||typeof a!=="object"){throw new Error(`"value" metadata for a Dictionary must be defined in the `+`mapper and it must of type "object" in ${i}`)}if(n){const r={};for(const s of Object.keys(n)){r[s]=t.deserialize(a,n[s],i,o)}return r}return n}function deserializeSequenceType(t,r,n,i,o){var a;let s=r.type.element;if(!s||typeof s!=="object"){throw new Error(`element" metadata for an Array must be defined in the `+`mapper and it must of type "object" in ${i}`)}if(n){if(!Array.isArray(n)){n=[n]}if(s.type.name==="Composite"&&s.type.className){s=(a=t.modelMappers[s.type.className])!==null&&a!==void 0?a:s}const r=[];for(let a=0;a<n.length;a++){r[a]=t.deserialize(s,n[a],`${i}[${a}]`,o)}return r}return n}function getPolymorphicMapper(t,r,n,i){const o=getPolymorphicDiscriminatorRecursively(t,r);if(o){let a=o[i];if(a){if(i==="serializedName"){a=a.replace(/\\/gi,"")}const o=n[a];if(o!==undefined&&o!==null){const n=r.type.uberParent||r.type.className;const i=o===n?o:n+"."+o;const a=t.modelMappers.discriminators[i];if(a){r=a}}}}return r}function getPolymorphicDiscriminatorRecursively(t,r){return r.type.polymorphicDiscriminator||getPolymorphicDiscriminatorSafely(t,r.type.uberParent)||getPolymorphicDiscriminatorSafely(t,r.type.className)}function getPolymorphicDiscriminatorSafely(t,r){return r&&t.modelMappers[r]&&t.modelMappers[r].type.polymorphicDiscriminator}const l={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};function getOperationArgumentValueFromParameter(t,r,n){let i=r.parameterPath;const o=r.mapper;let a;if(typeof i==="string"){i=[i]}if(Array.isArray(i)){if(i.length>0){if(o.isConstant){a=o.defaultValue}else{let r=getPropertyFromParameterPath(t,i);if(!r.propertyFound&&n){r=getPropertyFromParameterPath(n,i)}let s=false;if(!r.propertyFound){s=o.required||i[0]==="options"&&i.length===2}a=s?o.defaultValue:r.propertyValue}}}else{if(o.required){a={}}for(const r in i){const s=o.type.modelProperties[r];const c=i[r];const u=getOperationArgumentValueFromParameter(t,{parameterPath:c,mapper:s},n);if(u!==undefined){if(!a){a={}}a[r]=u}}}return a}function getPropertyFromParameterPath(t,r){const n={propertyFound:false};let i=0;for(;i<r.length;++i){const n=r[i];if(t&&n in t){t=t[n]}else{break}}if(i===r.length){n.propertyValue=t;n.propertyFound=true}return n}const d=new WeakMap;function getOperationRequestInfo(t){let r=d.get(t);if(!r){r={};d.set(t,r)}return r}const p=["application/json","text/json"];const g=["application/xml","application/atom+xml"];const v="deserializationPolicy";function deserializationPolicy(t={}){var r,n,i,o,a,c,u;const l=(n=(r=t.expectedContentTypes)===null||r===void 0?void 0:r.json)!==null&&n!==void 0?n:p;const d=(o=(i=t.expectedContentTypes)===null||i===void 0?void 0:i.xml)!==null&&o!==void 0?o:g;const E=t.parseXML;const S=t.serializerOptions;const w={xml:{rootName:(a=S===null||S===void 0?void 0:S.xml.rootName)!==null&&a!==void 0?a:"",includeRoot:(c=S===null||S===void 0?void 0:S.xml.includeRoot)!==null&&c!==void 0?c:false,xmlCharKey:(u=S===null||S===void 0?void 0:S.xml.xmlCharKey)!==null&&u!==void 0?u:s}};return{name:v,async sendRequest(t,r){const n=await r(t);return deserializeResponseBody(l,d,n,w,E)}}}function getOperationResponseMap(t){let r;const n=t.request;const i=getOperationRequestInfo(n);const o=i===null||i===void 0?void 0:i.operationSpec;if(o){if(!(i===null||i===void 0?void 0:i.operationResponseGetter)){r=o.responses[t.status]}else{r=i===null||i===void 0?void 0:i.operationResponseGetter(o,t)}}return r}function shouldDeserializeResponse(t){const r=t.request;const n=getOperationRequestInfo(r);const i=n===null||n===void 0?void 0:n.shouldDeserialize;let o;if(i===undefined){o=true}else if(typeof i==="boolean"){o=i}else{o=i(t)}return o}async function deserializeResponseBody(t,r,n,o,a){const s=await parse(t,r,n,o,a);if(!shouldDeserializeResponse(s)){return s}const c=getOperationRequestInfo(s.request);const u=c===null||c===void 0?void 0:c.operationSpec;if(!u||!u.responses){return s}const d=getOperationResponseMap(s);const{error:p,shouldReturnResponse:g}=handleErrorResponse(s,u,d);if(p){throw p}else if(g){return s}if(d){if(d.bodyMapper){let t=s.parsedBody;if(u.isXML&&d.bodyMapper.type.name===l.Sequence){t=typeof t==="object"?t[d.bodyMapper.xmlElementName]:[]}try{s.parsedBody=u.serializer.deserialize(d.bodyMapper,t,"operationRes.parsedBody")}catch(t){const r=new i.RestError(`Error ${t} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s});throw r}}else if(u.httpMethod==="HEAD"){s.parsedBody=n.status>=200&&n.status<300}if(d.headersMapper){s.parsedHeaders=u.serializer.deserialize(d.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders")}}return s}function isOperationSpecEmpty(t){const r=Object.keys(t.responses);return r.length===0||r.length===1&&r[0]==="default"}function handleErrorResponse(t,r,n){var o;const a=200<=t.status&&t.status<300;const s=isOperationSpecEmpty(r)?a:!!n;if(s){if(n){if(!n.isError){return{error:null,shouldReturnResponse:false}}}else{return{error:null,shouldReturnResponse:false}}}const c=n!==null&&n!==void 0?n:r.responses.default;const u=((o=t.request.streamResponseStatusCodes)===null||o===void 0?void 0:o.has(t.status))?`Unexpected status code: ${t.status}`:t.bodyAsText;const d=new i.RestError(u,{statusCode:t.status,request:t.request,response:t});if(!c){throw d}const p=c.bodyMapper;const g=c.headersMapper;try{if(t.parsedBody){const n=t.parsedBody;let i;if(p){let t=n;if(r.isXML&&p.type.name===l.Sequence){t=[];const r=p.xmlElementName;if(typeof n==="object"&&r){t=n[r]}}i=r.serializer.deserialize(p,t,"error.response.parsedBody")}const o=n.error||i||n;d.code=o.code;if(o.message){d.message=o.message}if(p){d.response.parsedBody=i}}if(t.headers&&g){d.response.parsedHeaders=r.serializer.deserialize(g,t.headers.toJSON(),"operationRes.parsedHeaders")}}catch(r){d.message=`Error "${r.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:d,shouldReturnResponse:false}}async function parse(t,r,n,o,a){var s;if(!((s=n.request.streamResponseStatusCodes)===null||s===void 0?void 0:s.has(n.status))&&n.bodyAsText){const s=n.bodyAsText;const c=n.headers.get("Content-Type")||"";const u=!c?[]:c.split(";").map((t=>t.toLowerCase()));try{if(u.length===0||u.some((r=>t.indexOf(r)!==-1))){n.parsedBody=JSON.parse(s);return n}else if(u.some((t=>r.indexOf(t)!==-1))){if(!a){throw new Error("Parsing XML not supported.")}const t=await a(s,o.xml);n.parsedBody=t;return n}}catch(t){const r=`Error "${t}" occurred while parsing the response body - ${n.bodyAsText}.`;const o=t.code||i.RestError.PARSE_ERROR;const a=new i.RestError(r,{code:o,statusCode:n.status,request:n.request,response:n});throw a}}return n}function getStreamingResponseStatusCodes(t){const r=new Set;for(const n in t.responses){const i=t.responses[n];if(i.bodyMapper&&i.bodyMapper.type.name===l.Stream){r.add(Number(n))}}return r}function getPathStringFromParameter(t){const{parameterPath:r,mapper:n}=t;let i;if(typeof r==="string"){i=r}else if(Array.isArray(r)){i=r.join(".")}else{i=n.serializedName}return i}const E="serializationPolicy";function serializationPolicy(t={}){const r=t.stringifyXML;return{name:E,async sendRequest(t,n){const i=getOperationRequestInfo(t);const o=i===null||i===void 0?void 0:i.operationSpec;const a=i===null||i===void 0?void 0:i.operationArguments;if(o&&a){serializeHeaders(t,a,o);serializeRequestBody(t,a,o,r)}return n(t)}}}function serializeHeaders(t,r,n){var i,o;if(n.headerParameters){for(const i of n.headerParameters){let o=getOperationArgumentValueFromParameter(r,i);if(o!==null&&o!==undefined||i.mapper.required){o=n.serializer.serialize(i.mapper,o,getPathStringFromParameter(i));const r=i.mapper.headerCollectionPrefix;if(r){for(const n of Object.keys(o)){t.headers.set(r+n,o[n])}}else{t.headers.set(i.mapper.serializedName||getPathStringFromParameter(i),o)}}}}const a=(o=(i=r.options)===null||i===void 0?void 0:i.requestOptions)===null||o===void 0?void 0:o.customHeaders;if(a){for(const r of Object.keys(a)){t.headers.set(r,a[r])}}}function serializeRequestBody(t,r,n,i=function(){throw new Error("XML serialization unsupported!")}){var o,a,c,u,d;const p=(o=r.options)===null||o===void 0?void 0:o.serializerOptions;const g={xml:{rootName:(a=p===null||p===void 0?void 0:p.xml.rootName)!==null&&a!==void 0?a:"",includeRoot:(c=p===null||p===void 0?void 0:p.xml.includeRoot)!==null&&c!==void 0?c:false,xmlCharKey:(u=p===null||p===void 0?void 0:p.xml.xmlCharKey)!==null&&u!==void 0?u:s}};const v=g.xml.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){t.body=getOperationArgumentValueFromParameter(r,n.requestBody);const o=n.requestBody.mapper;const{required:a,serializedName:s,xmlName:c,xmlElementName:u,xmlNamespace:p,xmlNamespacePrefix:E,nullable:S}=o;const w=o.type.name;try{if(t.body!==undefined&&t.body!==null||S&&t.body===null||a){const r=getPathStringFromParameter(n.requestBody);t.body=n.serializer.serialize(o,t.body,r,g);const a=w===l.Stream;if(n.isXML){const r=E?`xmlns:${E}`:"xmlns";const n=getXmlValueWithNamespace(p,r,w,t.body,g);if(w===l.Sequence){t.body=i(prepareXMLRootList(n,u||c||s,r,p),{rootName:c||s,xmlCharKey:v})}else if(!a){t.body=i(n,{rootName:c||s,xmlCharKey:v})}}else if(w===l.String&&(((d=n.contentType)===null||d===void 0?void 0:d.match("text/plain"))||n.mediaType==="text")){return}else if(!a){t.body=JSON.stringify(t.body)}}}catch(t){throw new Error(`Error "${t.message}" occurred in serializing the payload - ${JSON.stringify(s,undefined,"  ")}.`)}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(const i of n.formDataParameters){const o=getOperationArgumentValueFromParameter(r,i);if(o!==undefined&&o!==null){const r=i.mapper.serializedName||getPathStringFromParameter(i);t.formData[r]=n.serializer.serialize(i.mapper,o,getPathStringFromParameter(i),g)}}}}function getXmlValueWithNamespace(t,r,n,i,o){if(t&&!["Composite","Sequence","Dictionary"].includes(n)){const n={};n[o.xml.xmlCharKey]=i;n[a]={[r]:t};return n}return i}function prepareXMLRootList(t,r,n,i){if(!Array.isArray(t)){t=[t]}if(!n||!i){return{[r]:t}}const o={[r]:t};o[a]={[n]:i};return o}function createClientPipeline(t={}){const r=i.createPipelineFromOptions(t!==null&&t!==void 0?t:{});if(t.credentialOptions){r.addPolicy(i.bearerTokenAuthenticationPolicy({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes}))}r.addPolicy(serializationPolicy(t.serializationOptions),{phase:"Serialize"});r.addPolicy(deserializationPolicy(t.deserializationOptions),{phase:"Deserialize"});return r}let S;function getCachedDefaultHttpClient(){if(!S){S=i.createDefaultHttpClient()}return S}const w={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function getRequestUrl(t,r,n,i){const o=calculateUrlReplacements(r,n,i);let a=false;let s=replaceAll(t,o);if(r.path){let t=replaceAll(r.path,o);if(r.path==="/{nextLink}"&&t.startsWith("/")){t=t.substring(1)}if(isAbsoluteUrl(t)){s=t;a=true}else{s=appendPath(s,t)}}const{queryParams:c,sequenceParams:u}=calculateQueryParameters(r,n,i);s=appendQueryParams(s,c,u,a);return s}function replaceAll(t,r){let n=t;for(const[t,i]of r){n=n.split(t).join(i)}return n}function calculateUrlReplacements(t,r,n){var i;const o=new Map;if((i=t.urlParameters)===null||i===void 0?void 0:i.length){for(const i of t.urlParameters){let a=getOperationArgumentValueFromParameter(r,i,n);const s=getPathStringFromParameter(i);a=t.serializer.serialize(i.mapper,a,s);if(!i.skipEncoding){a=encodeURIComponent(a)}o.set(`{${i.mapper.serializedName||s}}`,a)}}return o}function isAbsoluteUrl(t){return t.includes("://")}function appendPath(t,r){if(!r){return t}const n=new URL(t);let i=n.pathname;if(!i.endsWith("/")){i=`${i}/`}if(r.startsWith("/")){r=r.substring(1)}const o=r.indexOf("?");if(o!==-1){const t=r.substring(0,o);const a=r.substring(o+1);i=i+t;if(a){n.search=n.search?`${n.search}&${a}`:a}}else{i=i+r}n.pathname=i;return n.toString()}function calculateQueryParameters(t,r,n){var i;const o=new Map;const a=new Set;if((i=t.queryParameters)===null||i===void 0?void 0:i.length){for(const i of t.queryParameters){if(i.mapper.type.name==="Sequence"&&i.mapper.serializedName){a.add(i.mapper.serializedName)}let s=getOperationArgumentValueFromParameter(r,i,n);if(s!==undefined&&s!==null||i.mapper.required){s=t.serializer.serialize(i.mapper,s,getPathStringFromParameter(i));const r=i.collectionFormat?w[i.collectionFormat]:"";if(Array.isArray(s)){s=s.map((t=>{if(t===null||t===undefined){return""}return t}))}if(i.collectionFormat==="Multi"&&s.length===0){continue}else if(Array.isArray(s)&&(i.collectionFormat==="SSV"||i.collectionFormat==="TSV")){s=s.join(r)}if(!i.skipEncoding){if(Array.isArray(s)){s=s.map((t=>encodeURIComponent(t)))}else{s=encodeURIComponent(s)}}if(Array.isArray(s)&&(i.collectionFormat==="CSV"||i.collectionFormat==="Pipes")){s=s.join(r)}o.set(i.mapper.serializedName||getPathStringFromParameter(i),s)}}}return{queryParams:o,sequenceParams:a}}function simpleParseQueryParams(t){const r=new Map;if(!t||t[0]!=="?"){return r}t=t.slice(1);const n=t.split("&");for(const t of n){const[n,i]=t.split("=",2);const o=r.get(n);if(o){if(Array.isArray(o)){o.push(i)}else{r.set(n,[o,i])}}else{r.set(n,i)}}return r}function appendQueryParams(t,r,n,i=false){if(r.size===0){return t}const o=new URL(t);const a=simpleParseQueryParams(o.search);for(const[t,o]of r){const r=a.get(t);if(Array.isArray(r)){if(Array.isArray(o)){r.push(...o);const n=new Set(r);a.set(t,Array.from(n))}else{r.push(o)}}else if(r){if(Array.isArray(o)){o.unshift(r)}else if(n.has(t)){a.set(t,[r,o])}if(!i){a.set(t,o)}}else{a.set(t,o)}}const s=[];for(const[t,r]of a){if(typeof r==="string"){s.push(`${t}=${r}`)}else if(Array.isArray(r)){for(const n of r){s.push(`${t}=${n}`)}}else{s.push(`${t}=${r}`)}}o.search=s.length?`?${s.join("&")}`:"";return o.toString()}const x=o.createClientLogger("core-client");class ServiceClient{constructor(t={}){var r,n;this._requestContentType=t.requestContentType;this._endpoint=(r=t.endpoint)!==null&&r!==void 0?r:t.baseUri;if(t.baseUri){x.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead.")}this._allowInsecureConnection=t.allowInsecureConnection;this._httpClient=t.httpClient||getCachedDefaultHttpClient();this.pipeline=t.pipeline||createDefaultPipeline(t);if((n=t.additionalPolicies)===null||n===void 0?void 0:n.length){for(const{policy:r,position:n}of t.additionalPolicies){const t=n==="perRetry"?"Sign":undefined;this.pipeline.addPolicy(r,{afterPhase:t})}}}async sendRequest(t){return this.pipeline.sendRequest(this._httpClient,t)}async sendOperationRequest(t,r){const n=r.baseUrl||this._endpoint;if(!n){throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.")}const o=getRequestUrl(n,r,t,this);const a=i.createPipelineRequest({url:o});a.method=r.httpMethod;const s=getOperationRequestInfo(a);s.operationSpec=r;s.operationArguments=t;const c=r.contentType||this._requestContentType;if(c&&r.requestBody){a.headers.set("Content-Type",c)}const u=t.options;if(u){const t=u.requestOptions;if(t){if(t.timeout){a.timeout=t.timeout}if(t.onUploadProgress){a.onUploadProgress=t.onUploadProgress}if(t.onDownloadProgress){a.onDownloadProgress=t.onDownloadProgress}if(t.shouldDeserialize!==undefined){s.shouldDeserialize=t.shouldDeserialize}if(t.allowInsecureConnection){a.allowInsecureConnection=true}}if(u.abortSignal){a.abortSignal=u.abortSignal}if(u.tracingOptions){a.tracingOptions=u.tracingOptions}}if(this._allowInsecureConnection){a.allowInsecureConnection=true}if(a.streamResponseStatusCodes===undefined){a.streamResponseStatusCodes=getStreamingResponseStatusCodes(r)}try{const t=await this.sendRequest(a);const n=flattenResponse(t,r.responses[t.status]);if(u===null||u===void 0?void 0:u.onResponse){u.onResponse(t,n)}return n}catch(t){if(typeof t==="object"&&(t===null||t===void 0?void 0:t.response)){const n=t.response;const i=flattenResponse(n,r.responses[t.statusCode]||r.responses["default"]);t.details=i;if(u===null||u===void 0?void 0:u.onResponse){u.onResponse(n,i,t)}}throw t}}}function createDefaultPipeline(t){const r=getCredentialScopes(t);const n=t.credential&&r?{credentialScopes:r,credential:t.credential}:undefined;return createClientPipeline(Object.assign(Object.assign({},t),{credentialOptions:n}))}function getCredentialScopes(t){if(t.credentialScopes){const r=t.credentialScopes;return Array.isArray(r)?r.map((t=>new URL(t).toString())):new URL(r).toString()}if(t.endpoint){return`${t.endpoint}/.default`}if(t.baseUri){return`${t.baseUri}/.default`}if(t.credential&&!t.credentialScopes){throw new Error(`When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy`)}return undefined}function parseCAEChallenge(t){const r=`, ${t.trim()}`.split(", Bearer ").filter((t=>t));return r.map((t=>{const r=`${t.trim()}, `.split('", ').filter((t=>t));const n=r.map((t=>(([t,r])=>({[t]:r}))(t.trim().split('="'))));return n.reduce(((t,r)=>Object.assign(Object.assign({},t),r)),{})}))}async function authorizeRequestOnClaimChallenge(t){const{scopes:r,response:n}=t;const i=t.logger||x;const o=n.headers.get("WWW-Authenticate");if(!o){i.info(`The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow.`);return false}const a=parseCAEChallenge(o)||[];const s=a.find((t=>t.claims));if(!s){i.info(`The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.`);return false}const c=await t.getAccessToken(s.scope?[s.scope]:r,{claims:decodeStringToString(s.claims)});if(!c){return false}t.request.headers.set("Authorization",`Bearer ${c.token}`);return true}const N={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};const authorizeRequestOnTenantChallenge=async t=>{const r=requestToOptions(t.request);const n=getChallenge(t.response);if(n){const i=parseChallenge(n);const o=buildScopes(t,i);const a=extractTenantId(i);const s=await t.getAccessToken(o,Object.assign(Object.assign({},r),{tenantId:a}));if(!s){return false}t.request.headers.set(N.HeaderConstants.AUTHORIZATION,`Bearer ${s.token}`);return true}return false};function extractTenantId(t){const r=new URL(t.authorization_uri);const n=r.pathname.split("/");const i=n[1];return i}function buildScopes(t,r){if(!r.resource_uri){return t.scopes}const n=new URL(r.resource_uri);n.pathname=N.DefaultScope;return[n.toString()]}function getChallenge(t){const r=t.headers.get("WWW-Authenticate");if(t.status===401&&r){return r}return}function parseChallenge(t){const r=t.slice("Bearer ".length);const n=`${r.trim()} `.split(" ").filter((t=>t));const i=n.map((t=>(([t,r])=>({[t]:r}))(t.trim().split("="))));return i.reduce(((t,r)=>Object.assign(Object.assign({},t),r)),{})}function requestToOptions(t){return{abortSignal:t.abortSignal,requestOptions:{timeout:t.timeout},tracingOptions:t.tracingOptions}}r.MapperTypeNames=l;r.ServiceClient=ServiceClient;r.XML_ATTRKEY=a;r.XML_CHARKEY=s;r.authorizeRequestOnClaimChallenge=authorizeRequestOnClaimChallenge;r.authorizeRequestOnTenantChallenge=authorizeRequestOnTenantChallenge;r.createClientPipeline=createClientPipeline;r.createSerializer=createSerializer;r.deserializationPolicy=deserializationPolicy;r.deserializationPolicyName=v;r.serializationPolicy=serializationPolicy;r.serializationPolicyName=E},88121:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=n(43833);var o=n(3233);var a=n(51333);var s=n(77219);var c=n(23764);var u=n(43285);var l=n(22037);var d=n(73837);var p=n(52557);var g=n(13685);var v=n(95687);var E=n(59796);var S=n(12781);var w=n(88640);function _interopDefaultLegacy(t){return t&&typeof t==="object"&&"default"in t?t:{default:t}}function _interopNamespace(t){if(t&&t.__esModule)return t;var r=Object.create(null);if(t){Object.keys(t).forEach((function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:true,get:function(){return t[n]}})}}))}r["default"]=t;return Object.freeze(r)}var x=_interopDefaultLegacy(i);var N=_interopNamespace(l);var P=_interopNamespace(g);var D=_interopNamespace(v);var M=_interopNamespace(E);const L=new Set(["Deserialize","Serialize","Retry","Sign"]);class HttpPipeline{constructor(t=[]){this._policies=[];this._policies=t;this._orderedPolicies=undefined}addPolicy(t,r={}){if(r.phase&&r.afterPhase){throw new Error("Policies inside a phase cannot specify afterPhase.")}if(r.phase&&!L.has(r.phase)){throw new Error(`Invalid phase name: ${r.phase}`)}if(r.afterPhase&&!L.has(r.afterPhase)){throw new Error(`Invalid afterPhase name: ${r.afterPhase}`)}this._policies.push({policy:t,options:r});this._orderedPolicies=undefined}removePolicy(t){const r=[];this._policies=this._policies.filter((n=>{if(t.name&&n.policy.name===t.name||t.phase&&n.options.phase===t.phase){r.push(n.policy);return false}else{return true}}));this._orderedPolicies=undefined;return r}sendRequest(t,r){const n=this.getOrderedPolicies();const i=n.reduceRight(((t,r)=>n=>r.sendRequest(n,t)),(r=>t.sendRequest(r)));return i(r)}getOrderedPolicies(){if(!this._orderedPolicies){this._orderedPolicies=this.orderPolicies()}return this._orderedPolicies}clone(){return new HttpPipeline(this._policies)}static create(){return new HttpPipeline}orderPolicies(){const t=[];const r=new Map;function createPhase(t){return{name:t,policies:new Set,hasRun:false}}const n=createPhase("Serialize");const i=createPhase("None");const o=createPhase("Deserialize");const a=createPhase("Retry");const s=createPhase("Sign");const c=[n,i,o,a,s];function getPhase(t){if(t==="Retry"){return a}else if(t==="Serialize"){return n}else if(t==="Deserialize"){return o}else if(t==="Sign"){return s}else{return i}}for(const t of this._policies){const n=t.policy;const i=t.options;const o=n.name;if(r.has(o)){throw new Error("Duplicate policy names not allowed in pipeline")}const a={policy:n,dependsOn:new Set,dependants:new Set};if(i.afterPhase){a.afterPhase=getPhase(i.afterPhase)}r.set(o,a);const s=getPhase(i.phase);s.policies.add(a)}for(const t of this._policies){const{policy:n,options:i}=t;const o=n.name;const a=r.get(o);if(!a){throw new Error(`Missing node for policy ${o}`)}if(i.afterPolicies){for(const t of i.afterPolicies){const n=r.get(t);if(n){a.dependsOn.add(n);n.dependants.add(a)}}}if(i.beforePolicies){for(const t of i.beforePolicies){const n=r.get(t);if(n){n.dependsOn.add(a);a.dependants.add(n)}}}}function walkPhase(n){n.hasRun=true;for(const i of n.policies){if(i.afterPhase&&(!i.afterPhase.hasRun||i.afterPhase.policies.size)){continue}if(i.dependsOn.size===0){t.push(i.policy);for(const t of i.dependants){t.dependsOn.delete(i)}r.delete(i.policy.name);n.policies.delete(i)}}}function walkPhases(){for(const t of c){walkPhase(t);if(t.policies.size>0&&t!==i){if(!i.hasRun){walkPhase(i)}return}}}let u=0;while(r.size>0){u++;const r=t.length;walkPhases();if(t.length<=r&&u>1){throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}}return t}}function createEmptyPipeline(){return HttpPipeline.create()}const U="decompressResponsePolicy";function decompressResponsePolicy(){return{name:U,async sendRequest(t,r){if(t.method!=="HEAD"){t.headers.set("Accept-Encoding","gzip,deflate")}return r(t)}}}const q="formDataPolicy";function formDataPolicy(){return{name:q,async sendRequest(t,r){if(t.formData){const r=t.headers.get("Content-Type");if(r&&r.indexOf("application/x-www-form-urlencoded")!==-1){t.body=wwwFormUrlEncode(t.formData);t.formData=undefined}else{prepareFormData(t.formData,t)}}return r(t)}}}function wwwFormUrlEncode(t){const r=new URLSearchParams;for(const[n,i]of Object.entries(t)){if(Array.isArray(i)){for(const t of i){r.append(n,t.toString())}}else{r.append(n,i.toString())}}return r.toString()}async function prepareFormData(t,r){const n=new x["default"];for(const r of Object.keys(t)){const i=t[r];if(Array.isArray(i)){for(const t of i){n.append(r,t)}}else{n.append(r,i)}}r.body=n;r.formData=undefined;const i=r.headers.get("Content-Type");if(i&&i.indexOf("multipart/form-data")!==-1){r.headers.set("Content-Type",`multipart/form-data; boundary=${n.getBoundary()}`)}try{const t=await new Promise(((t,r)=>{n.getLength(((n,i)=>{if(n){r(n)}else{t(i)}}))}));r.headers.set("Content-Length",t)}catch(t){}}const B=o.createClientLogger("core-rest-pipeline");const F="REDACTED";const j=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"];const H=["api-version"];class Sanitizer{constructor({additionalAllowedHeaderNames:t=[],additionalAllowedQueryParameters:r=[]}={}){t=j.concat(t);r=H.concat(r);this.allowedHeaderNames=new Set(t.map((t=>t.toLowerCase())));this.allowedQueryParameters=new Set(r.map((t=>t.toLowerCase())))}sanitize(t){const r=new Set;return JSON.stringify(t,((t,n)=>{if(n instanceof Error){return Object.assign(Object.assign({},n),{name:n.name,message:n.message})}if(t==="headers"){return this.sanitizeHeaders(n)}else if(t==="url"){return this.sanitizeUrl(n)}else if(t==="query"){return this.sanitizeQuery(n)}else if(t==="body"){return undefined}else if(t==="response"){return undefined}else if(t==="operationSpec"){return undefined}else if(Array.isArray(n)||a.isObject(n)){if(r.has(n)){return"[Circular]"}r.add(n)}return n}),2)}sanitizeHeaders(t){const r={};for(const n of Object.keys(t)){if(this.allowedHeaderNames.has(n.toLowerCase())){r[n]=t[n]}else{r[n]=F}}return r}sanitizeQuery(t){if(typeof t!=="object"||t===null){return t}const r={};for(const n of Object.keys(t)){if(this.allowedQueryParameters.has(n.toLowerCase())){r[n]=t[n]}else{r[n]=F}}return r}sanitizeUrl(t){if(typeof t!=="string"||t===null){return t}const r=new URL(t);if(!r.search){return t}for(const[t]of r.searchParams){if(!this.allowedQueryParameters.has(t.toLowerCase())){r.searchParams.set(t,F)}}return r.toString()}}const z="logPolicy";function logPolicy(t={}){var r;const n=(r=t.logger)!==null&&r!==void 0?r:B.info;const i=new Sanitizer({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:z,async sendRequest(t,r){if(!n.enabled){return r(t)}n(`Request: ${i.sanitize(t)}`);const o=await r(t);n(`Response status code: ${o.status}`);n(`Headers: ${i.sanitize(o.headers)}`);return o}}}const V="HTTPS_PROXY";const Y="HTTP_PROXY";const G="ALL_PROXY";const W="NO_PROXY";const $="proxyPolicy";const K=[];let J=false;const Z=new Map;function getEnvironmentValue(t){if(process.env[t]){return process.env[t]}else if(process.env[t.toLowerCase()]){return process.env[t.toLowerCase()]}return undefined}function loadEnvironmentProxyValue(){if(!process){return undefined}const t=getEnvironmentValue(V);const r=getEnvironmentValue(G);const n=getEnvironmentValue(Y);return t||r||n}function isBypassed(t,r,n){if(r.length===0){return false}const i=new URL(t).hostname;if(n===null||n===void 0?void 0:n.has(i)){return n.get(i)}let o=false;for(const t of r){if(t[0]==="."){if(i.endsWith(t)){o=true}else{if(i.length===t.length-1&&i===t.slice(1)){o=true}}}else{if(i===t){o=true}}}n===null||n===void 0?void 0:n.set(i,o);return o}function loadNoProxy(){const t=getEnvironmentValue(W);J=true;if(t){return t.split(",").map((t=>t.trim())).filter((t=>t.length))}return[]}function getDefaultProxySettings(t){if(!t){t=loadEnvironmentProxyValue();if(!t){return undefined}}const r=new URL(t);const n=r.protocol?r.protocol+"//":"";return{host:n+r.hostname,port:Number.parseInt(r.port||"80"),username:r.username,password:r.password}}function getProxyAgentOptions(t,{headers:r,tlsSettings:n}){let i;try{i=new URL(t.host)}catch(r){throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}if(n){B.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.")}const o={hostname:i.hostname,port:t.port,protocol:i.protocol,headers:r.toJSON()};if(t.username&&t.password){o.auth=`${t.username}:${t.password}`}else if(t.username){o.auth=`${t.username}`}return o}function setProxyAgentOnRequest(t,r){if(t.agent){return}const n=new URL(t.url);const i=n.protocol!=="https:";const o=t.proxySettings;if(o){if(i){if(!r.httpProxyAgent){const n=getProxyAgentOptions(o,t);r.httpProxyAgent=new c.HttpProxyAgent(n)}t.agent=r.httpProxyAgent}else{if(!r.httpsProxyAgent){const n=getProxyAgentOptions(o,t);r.httpsProxyAgent=new s.HttpsProxyAgent(n)}t.agent=r.httpsProxyAgent}}}function proxyPolicy(t=getDefaultProxySettings(),r){if(!J){K.push(...loadNoProxy())}const n={};return{name:$,async sendRequest(i,o){var a;if(!i.proxySettings&&!isBypassed(i.url,(a=r===null||r===void 0?void 0:r.customNoProxyList)!==null&&a!==void 0?a:K,(r===null||r===void 0?void 0:r.customNoProxyList)?undefined:Z)){i.proxySettings=t}if(i.proxySettings){setProxyAgentOnRequest(i,n)}return o(i)}}}const X="redirectPolicy";const Q=["GET","HEAD"];function redirectPolicy(t={}){const{maxRetries:r=20}=t;return{name:X,async sendRequest(t,n){const i=await n(t);return handleRedirect(n,i,r)}}}async function handleRedirect(t,r,n,i=0){const{request:o,status:a,headers:s}=r;const c=s.get("location");if(c&&(a===300||a===301&&Q.includes(o.method)||a===302&&Q.includes(o.method)||a===303&&o.method==="POST"||a===307)&&i<n){const r=new URL(c,o.url);o.url=r.toString();if(a===303){o.method="GET";o.headers.delete("Content-Length");delete o.body}o.headers.delete("Authorization");const s=await t(o);return handleRedirect(t,s,n,i+1)}return r}const ee="setClientRequestIdPolicy";function setClientRequestIdPolicy(t="x-ms-client-request-id"){return{name:ee,async sendRequest(r,n){if(!r.headers.has(t)){r.headers.set(t,r.requestId)}return n(r)}}}const te="1.8.1";const re=3;function getHeaderName(){return"User-Agent"}function setPlatformSpecificData(t){t.set("Node",process.version);t.set("OS",`(${N.arch()}-${N.type()}-${N.release()})`)}function getUserAgentString(t){const r=[];for(const[n,i]of t){const t=i?`${n}/${i}`:n;r.push(t)}return r.join(" ")}function getUserAgentHeaderName(){return getHeaderName()}function getUserAgentValue(t){const r=new Map;r.set("core-rest-pipeline",te);setPlatformSpecificData(r);const n=getUserAgentString(r);const i=t?`${t} ${n}`:n;return i}const ne=d.inspect.custom;const ie=new Sanitizer;class RestError extends Error{constructor(t,r={}){super(t);this.name="RestError";this.code=r.code;this.statusCode=r.statusCode;this.request=r.request;this.response=r.response;Object.setPrototypeOf(this,RestError.prototype)}[ne](){return`RestError: ${this.message} \n ${ie.sanitize(this)}`}}RestError.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";RestError.PARSE_ERROR="PARSE_ERROR";function isRestError(t){if(t instanceof RestError){return true}return a.isError(t)&&t.name==="RestError"}const oe="tracingPolicy";function tracingPolicy(t={}){const r=getUserAgentValue(t.userAgentPrefix);const n=tryCreateTracingClient();return{name:oe,async sendRequest(t,i){var o,a;if(!n||!((o=t.tracingOptions)===null||o===void 0?void 0:o.tracingContext)){return i(t)}const{span:s,tracingContext:c}=(a=tryCreateSpan(n,t,r))!==null&&a!==void 0?a:{};if(!s||!c){return i(t)}try{const r=await n.withContext(c,i,t);tryProcessResponse(s,r);return r}catch(t){tryProcessError(s,t);throw t}}}}function tryCreateTracingClient(){try{return u.createTracingClient({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:te})}catch(t){B.warning(`Error when creating the TracingClient: ${a.getErrorMessage(t)}`);return undefined}}function tryCreateSpan(t,r,n){try{const{span:i,updatedOptions:o}=t.startSpan(`HTTP ${r.method}`,{tracingOptions:r.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":r.method,"http.url":r.url,requestId:r.requestId}});if(!i.isRecording()){i.end();return undefined}if(n){i.setAttribute("http.user_agent",n)}const a=t.createRequestHeaders(o.tracingOptions.tracingContext);for(const[t,n]of Object.entries(a)){r.headers.set(t,n)}return{span:i,tracingContext:o.tracingOptions.tracingContext}}catch(t){B.warning(`Skipping creating a tracing span due to an error: ${a.getErrorMessage(t)}`);return undefined}}function tryProcessError(t,r){try{t.setStatus({status:"error",error:a.isError(r)?r:undefined});if(isRestError(r)&&r.statusCode){t.setAttribute("http.status_code",r.statusCode)}t.end()}catch(t){B.warning(`Skipping tracing span processing due to an error: ${a.getErrorMessage(t)}`)}}function tryProcessResponse(t,r){try{t.setAttribute("http.status_code",r.status);const n=r.headers.get("x-ms-request-id");if(n){t.setAttribute("serviceRequestId",n)}t.setStatus({status:"success"});t.end()}catch(t){B.warning(`Skipping tracing span processing due to an error: ${a.getErrorMessage(t)}`)}}const ae=getUserAgentHeaderName();const se="userAgentPolicy";function userAgentPolicy(t={}){const r=getUserAgentValue(t.userAgentPrefix);return{name:se,async sendRequest(t,n){if(!t.headers.has(ae)){t.headers.set(ae,r)}return n(t)}}}const ce="The operation was aborted.";function delay(t,r,n){return new Promise(((i,o)=>{let a=undefined;let s=undefined;const rejectOnAbort=()=>o(new p.AbortError((n===null||n===void 0?void 0:n.abortErrorMsg)?n===null||n===void 0?void 0:n.abortErrorMsg:ce));const removeListeners=()=>{if((n===null||n===void 0?void 0:n.abortSignal)&&s){n.abortSignal.removeEventListener("abort",s)}};s=()=>{if(a){clearTimeout(a)}removeListeners();return rejectOnAbort()};if((n===null||n===void 0?void 0:n.abortSignal)&&n.abortSignal.aborted){return rejectOnAbort()}a=setTimeout((()=>{removeListeners();i(r)}),t);if(n===null||n===void 0?void 0:n.abortSignal){n.abortSignal.addEventListener("abort",s)}}))}function parseHeaderValueAsNumber(t,r){const n=t.headers.get(r);if(!n)return;const i=Number(n);if(Number.isNaN(i))return;return i}const ue="Retry-After";const le=["retry-after-ms","x-ms-retry-after-ms",ue];function getRetryAfterInMs(t){if(!(t&&[429,503].includes(t.status)))return undefined;try{for(const r of le){const n=parseHeaderValueAsNumber(t,r);if(n===0||n){const t=r===ue?1e3:1;return n*t}}const r=t.headers.get(ue);if(!r)return;const n=Date.parse(r);const i=n-Date.now();return Number.isFinite(i)?Math.max(0,i):undefined}catch(t){return undefined}}function isThrottlingRetryResponse(t){return Number.isFinite(getRetryAfterInMs(t))}function throttlingRetryStrategy(){return{name:"throttlingRetryStrategy",retry({response:t}){const r=getRetryAfterInMs(t);if(!Number.isFinite(r)){return{skipStrategy:true}}return{retryAfterInMs:r}}}}const fe=1e3;const de=1e3*64;function exponentialRetryStrategy(t={}){var r,n;const i=(r=t.retryDelayInMs)!==null&&r!==void 0?r:fe;const o=(n=t.maxRetryDelayInMs)!==null&&n!==void 0?n:de;let s=i;return{name:"exponentialRetryStrategy",retry({retryCount:r,response:n,responseError:i}){const c=isSystemError(i);const u=c&&t.ignoreSystemErrors;const l=isExponentialRetryResponse(n);const d=l&&t.ignoreHttpStatusCodes;const p=n&&(isThrottlingRetryResponse(n)||!l);if(p||d||u){return{skipStrategy:true}}if(i&&!c&&!l){return{errorToThrow:i}}const g=s*Math.pow(2,r);const v=Math.min(o,g);s=v/2+a.getRandomIntegerInclusive(0,v/2);return{retryAfterInMs:s}}}}function isExponentialRetryResponse(t){return Boolean(t&&t.status!==undefined&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function isSystemError(t){if(!t){return false}return t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"}const pe=o.createClientLogger("core-rest-pipeline retryPolicy");const he="retryPolicy";function retryPolicy(t,r={maxRetries:re}){const n=r.logger||pe;return{name:he,async sendRequest(i,o){var a,s;let c;let u;let l=-1;e:while(true){l+=1;c=undefined;u=undefined;try{n.info(`Retry ${l}: Attempting to send request`,i.requestId);c=await o(i);n.info(`Retry ${l}: Received a response from request`,i.requestId)}catch(t){n.error(`Retry ${l}: Received an error from request`,i.requestId);u=t;if(!t||u.name!=="RestError"){throw t}c=u.response}if((a=i.abortSignal)===null||a===void 0?void 0:a.aborted){n.error(`Retry ${l}: Request aborted.`);const t=new p.AbortError;throw t}if(l>=((s=r.maxRetries)!==null&&s!==void 0?s:re)){n.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`);if(u){throw u}else if(c){return c}else{throw new Error("Maximum retries reached with no response or error to throw")}}n.info(`Retry ${l}: Processing ${t.length} retry strategies.`);t:for(const r of t){const t=r.logger||pe;t.info(`Retry ${l}: Processing retry strategy ${r.name}.`);const n=r.retry({retryCount:l,response:c,responseError:u});if(n.skipStrategy){t.info(`Retry ${l}: Skipped.`);continue t}const{errorToThrow:o,retryAfterInMs:a,redirectTo:s}=n;if(o){t.error(`Retry ${l}: Retry strategy ${r.name} throws error:`,o);throw o}if(a||a===0){t.info(`Retry ${l}: Retry strategy ${r.name} retries after ${a}`);await delay(a,undefined,{abortSignal:i.abortSignal});continue e}if(s){t.info(`Retry ${l}: Retry strategy ${r.name} redirects to ${s}`);i.url=s;continue e}}if(u){n.info(`None of the retry strategies could work with the received error. Throwing it.`);throw u}if(c){n.info(`None of the retry strategies could work with the received response. Returning it.`);return c}}}}}const me="defaultRetryPolicy";function defaultRetryPolicy(t={}){var r;return{name:me,sendRequest:retryPolicy([throttlingRetryStrategy(),exponentialRetryStrategy(t)],{maxRetries:(r=t.maxRetries)!==null&&r!==void 0?r:re}).sendRequest}}function createPipelineFromOptions(t){const r=createEmptyPipeline();if(a.isNode){r.addPolicy(proxyPolicy(t.proxyOptions));r.addPolicy(decompressResponsePolicy())}r.addPolicy(formDataPolicy());r.addPolicy(userAgentPolicy(t.userAgentOptions));r.addPolicy(setClientRequestIdPolicy());r.addPolicy(defaultRetryPolicy(t.retryOptions),{phase:"Retry"});r.addPolicy(tracingPolicy(t.userAgentOptions),{afterPhase:"Retry"});if(a.isNode){r.addPolicy(redirectPolicy(t.redirectOptions),{afterPhase:"Retry"})}r.addPolicy(logPolicy(t.loggingOptions),{afterPhase:"Retry"});return r}function normalizeName(t){return t.toLowerCase()}function*headerIterator(t){for(const r of t.values()){yield[r.name,r.value]}}class HttpHeadersImpl{constructor(t){this._headersMap=new Map;if(t){for(const r of Object.keys(t)){this.set(r,t[r])}}}set(t,r){this._headersMap.set(normalizeName(t),{name:t,value:String(r)})}get(t){var r;return(r=this._headersMap.get(normalizeName(t)))===null||r===void 0?void 0:r.value}has(t){return this._headersMap.has(normalizeName(t))}delete(t){this._headersMap.delete(normalizeName(t))}toJSON(t={}){const r={};if(t.preserveCase){for(const t of this._headersMap.values()){r[t.name]=t.value}}else{for(const[t,n]of this._headersMap){r[t]=n.value}}return r}toString(){return JSON.stringify(this.toJSON({preserveCase:true}))}[Symbol.iterator](){return headerIterator(this._headersMap)}}function createHttpHeaders(t){return new HttpHeadersImpl(t)}const ge={};function isReadableStream(t){return t&&typeof t.pipe==="function"}function isStreamComplete(t){return new Promise((r=>{t.on("close",r);t.on("end",r);t.on("error",r)}))}function isArrayBuffer(t){return t&&typeof t.byteLength==="number"}class ReportTransform extends S.Transform{constructor(t){super();this.loadedBytes=0;this.progressCallback=t}_transform(t,r,n){this.push(t);this.loadedBytes+=t.length;try{this.progressCallback({loadedBytes:this.loadedBytes});n()}catch(t){n(t)}}}class NodeHttpClient{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(t){var r,n,i;const o=new p.AbortController;let a;if(t.abortSignal){if(t.abortSignal.aborted){throw new p.AbortError("The operation was aborted.")}a=t=>{if(t.type==="abort"){o.abort()}};t.abortSignal.addEventListener("abort",a)}if(t.timeout>0){setTimeout((()=>{o.abort()}),t.timeout)}const s=t.headers.get("Accept-Encoding");const c=(s===null||s===void 0?void 0:s.includes("gzip"))||(s===null||s===void 0?void 0:s.includes("deflate"));let u=typeof t.body==="function"?t.body():t.body;if(u&&!t.headers.has("Content-Length")){const r=getBodyLength(u);if(r!==null){t.headers.set("Content-Length",r)}}let l;try{if(u&&t.onUploadProgress){const r=t.onUploadProgress;const n=new ReportTransform(r);n.on("error",(t=>{B.error("Error in upload progress",t)}));if(isReadableStream(u)){u.pipe(n)}else{n.end(u)}u=n}const a=await this.makeRequest(t,o,u);const s=getResponseHeaders(a);const d=(r=a.statusCode)!==null&&r!==void 0?r:0;const p={status:d,headers:s,request:t};if(t.method==="HEAD"){a.destroy();return p}l=c?getDecodedResponseStream(a,s):a;const g=t.onDownloadProgress;if(g){const t=new ReportTransform(g);t.on("error",(t=>{B.error("Error in download progress",t)}));l.pipe(t);l=t}if(((n=t.streamResponseStatusCodes)===null||n===void 0?void 0:n.has(Number.POSITIVE_INFINITY))||((i=t.streamResponseStatusCodes)===null||i===void 0?void 0:i.has(p.status))){p.readableStreamBody=l}else{p.bodyAsText=await streamToText(l)}return p}finally{if(t.abortSignal&&a){let r=Promise.resolve();if(isReadableStream(u)){r=isStreamComplete(u)}let n=Promise.resolve();if(isReadableStream(l)){n=isStreamComplete(l)}Promise.all([r,n]).then((()=>{var r;if(a){(r=t.abortSignal)===null||r===void 0?void 0:r.removeEventListener("abort",a)}})).catch((t=>{B.warning("Error when cleaning up abortListener on httpRequest",t)}))}}}makeRequest(t,r,n){var i;const o=new URL(t.url);const a=o.protocol!=="https:";if(a&&!t.allowInsecureConnection){throw new Error(`Cannot connect to ${t.url} while allowInsecureConnection is false.`)}const s=(i=t.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(t,a);const c={agent:s,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:t.method,headers:t.headers.toJSON({preserveCase:true})};return new Promise(((i,o)=>{const s=a?P.request(c,i):D.request(c,i);s.once("error",(r=>{var n;o(new RestError(r.message,{code:(n=r.code)!==null&&n!==void 0?n:RestError.REQUEST_SEND_ERROR,request:t}))}));r.signal.addEventListener("abort",(()=>{const t=new p.AbortError("The operation was aborted.");s.destroy(t);o(t)}));if(n&&isReadableStream(n)){n.pipe(s)}else if(n){if(typeof n==="string"||Buffer.isBuffer(n)){s.end(n)}else if(isArrayBuffer(n)){s.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n))}else{B.error("Unrecognized body type",n);o(new RestError("Unrecognized body type"))}}else{s.end()}}))}getOrCreateAgent(t,r){var n;const i=t.disableKeepAlive;if(r){if(i){return P.globalAgent}if(!this.cachedHttpAgent){this.cachedHttpAgent=new P.Agent({keepAlive:true})}return this.cachedHttpAgent}else{if(i&&!t.tlsSettings){return D.globalAgent}const r=(n=t.tlsSettings)!==null&&n!==void 0?n:ge;let o=this.cachedHttpsAgents.get(r);if(o&&o.options.keepAlive===!i){return o}B.info("No cached TLS Agent exist, creating a new Agent");o=new D.Agent(Object.assign({keepAlive:!i},r));this.cachedHttpsAgents.set(r,o);return o}}}function getResponseHeaders(t){const r=createHttpHeaders();for(const n of Object.keys(t.headers)){const i=t.headers[n];if(Array.isArray(i)){if(i.length>0){r.set(n,i[0])}}else if(i){r.set(n,i)}}return r}function getDecodedResponseStream(t,r){const n=r.get("Content-Encoding");if(n==="gzip"){const r=M.createGunzip();t.pipe(r);return r}else if(n==="deflate"){const r=M.createInflate();t.pipe(r);return r}return t}function streamToText(t){return new Promise(((r,n)=>{const i=[];t.on("data",(t=>{if(Buffer.isBuffer(t)){i.push(t)}else{i.push(Buffer.from(t))}}));t.on("end",(()=>{r(Buffer.concat(i).toString("utf8"))}));t.on("error",(t=>{if(t&&(t===null||t===void 0?void 0:t.name)==="AbortError"){n(t)}else{n(new RestError(`Error reading response as text: ${t.message}`,{code:RestError.PARSE_ERROR}))}}))}))}function getBodyLength(t){if(!t){return 0}else if(Buffer.isBuffer(t)){return t.length}else if(isReadableStream(t)){return null}else if(isArrayBuffer(t)){return t.byteLength}else if(typeof t==="string"){return Buffer.from(t).length}else{return null}}function createNodeHttpClient(){return new NodeHttpClient}function createDefaultHttpClient(){return createNodeHttpClient()}function generateUuid(){return w.v4()}class PipelineRequestImpl{constructor(t){var r,n,i,o,a,s,c;this.url=t.url;this.body=t.body;this.headers=(r=t.headers)!==null&&r!==void 0?r:createHttpHeaders();this.method=(n=t.method)!==null&&n!==void 0?n:"GET";this.timeout=(i=t.timeout)!==null&&i!==void 0?i:0;this.formData=t.formData;this.disableKeepAlive=(o=t.disableKeepAlive)!==null&&o!==void 0?o:false;this.proxySettings=t.proxySettings;this.streamResponseStatusCodes=t.streamResponseStatusCodes;this.withCredentials=(a=t.withCredentials)!==null&&a!==void 0?a:false;this.abortSignal=t.abortSignal;this.tracingOptions=t.tracingOptions;this.onUploadProgress=t.onUploadProgress;this.onDownloadProgress=t.onDownloadProgress;this.requestId=t.requestId||generateUuid();this.allowInsecureConnection=(s=t.allowInsecureConnection)!==null&&s!==void 0?s:false;this.enableBrowserStreams=(c=t.enableBrowserStreams)!==null&&c!==void 0?c:false}}function createPipelineRequest(t){return new PipelineRequestImpl(t)}const ve="exponentialRetryPolicy";function exponentialRetryPolicy(t={}){var r;return retryPolicy([exponentialRetryStrategy(Object.assign(Object.assign({},t),{ignoreSystemErrors:true}))],{maxRetries:(r=t.maxRetries)!==null&&r!==void 0?r:re})}const ye="systemErrorRetryPolicy";function systemErrorRetryPolicy(t={}){var r;return{name:ye,sendRequest:retryPolicy([exponentialRetryStrategy(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:true}))],{maxRetries:(r=t.maxRetries)!==null&&r!==void 0?r:re}).sendRequest}}const _e="throttlingRetryPolicy";function throttlingRetryPolicy(t={}){var r;return{name:_e,sendRequest:retryPolicy([throttlingRetryStrategy()],{maxRetries:(r=t.maxRetries)!==null&&r!==void 0?r:re}).sendRequest}}const Ee={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function beginRefresh(t,r,n){async function tryGetAccessToken(){if(Date.now()<n){try{return await t()}catch(t){return null}}else{const r=await t();if(r===null){throw new Error("Failed to refresh access token.")}return r}}let i=await tryGetAccessToken();while(i===null){await delay(r);i=await tryGetAccessToken()}return i}function createTokenCycler(t,r){let n=null;let i=null;let o;const a=Object.assign(Object.assign({},Ee),r);const s={get isRefreshing(){return n!==null},get shouldRefresh(){var t;return!s.isRefreshing&&((t=i===null||i===void 0?void 0:i.expiresOnTimestamp)!==null&&t!==void 0?t:0)-a.refreshWindowInMs<Date.now()},get mustRefresh(){return i===null||i.expiresOnTimestamp-a.forcedRefreshWindowInMs<Date.now()}};function refresh(r,c){var u;if(!s.isRefreshing){const tryGetAccessToken=()=>t.getToken(r,c);n=beginRefresh(tryGetAccessToken,a.retryIntervalInMs,(u=i===null||i===void 0?void 0:i.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then((t=>{n=null;i=t;o=c.tenantId;return i})).catch((t=>{n=null;i=null;o=undefined;throw t}))}return n}return async(t,r)=>{const n=o!==r.tenantId||s.mustRefresh;if(n)return refresh(t,r);if(s.shouldRefresh){refresh(t,r)}return i}}const be="bearerTokenAuthenticationPolicy";async function defaultAuthorizeRequest(t){const{scopes:r,getAccessToken:n,request:i}=t;const o={abortSignal:i.abortSignal,tracingOptions:i.tracingOptions};const a=await n(r,o);if(a){t.request.headers.set("Authorization",`Bearer ${a.token}`)}}function getChallenge(t){const r=t.headers.get("WWW-Authenticate");if(t.status===401&&r){return r}return}function bearerTokenAuthenticationPolicy(t){var r;const{credential:n,scopes:i,challengeCallbacks:o,logger:a}=t;const s=Object.assign({authorizeRequest:(r=o===null||o===void 0?void 0:o.authorizeRequest)!==null&&r!==void 0?r:defaultAuthorizeRequest,authorizeRequestOnChallenge:o===null||o===void 0?void 0:o.authorizeRequestOnChallenge},o);const c=n?createTokenCycler(n):()=>Promise.resolve(null);return{name:be,async sendRequest(t,r){if(!t.url.toLowerCase().startsWith("https://")){throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.")}await s.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:t,getAccessToken:c,logger:a});let n;let o;try{n=await r(t)}catch(t){o=t;n=t.response}if(s.authorizeRequestOnChallenge&&(n===null||n===void 0?void 0:n.status)===401&&getChallenge(n)){const o=await s.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:t,response:n,getAccessToken:c,logger:a});if(o){return r(t)}}if(o){throw o}else{return n}}}}const Se="ndJsonPolicy";function ndJsonPolicy(){return{name:Se,async sendRequest(t,r){if(typeof t.body==="string"&&t.body.startsWith("[")){const r=JSON.parse(t.body);if(Array.isArray(r)){t.body=r.map((t=>JSON.stringify(t)+"\n")).join("")}}return r(t)}}}r.RestError=RestError;r.bearerTokenAuthenticationPolicy=bearerTokenAuthenticationPolicy;r.bearerTokenAuthenticationPolicyName=be;r.createDefaultHttpClient=createDefaultHttpClient;r.createEmptyPipeline=createEmptyPipeline;r.createHttpHeaders=createHttpHeaders;r.createPipelineFromOptions=createPipelineFromOptions;r.createPipelineRequest=createPipelineRequest;r.decompressResponsePolicy=decompressResponsePolicy;r.decompressResponsePolicyName=U;r.defaultRetryPolicy=defaultRetryPolicy;r.exponentialRetryPolicy=exponentialRetryPolicy;r.exponentialRetryPolicyName=ve;r.formDataPolicy=formDataPolicy;r.formDataPolicyName=q;r.getDefaultProxySettings=getDefaultProxySettings;r.isRestError=isRestError;r.logPolicy=logPolicy;r.logPolicyName=z;r.ndJsonPolicy=ndJsonPolicy;r.ndJsonPolicyName=Se;r.proxyPolicy=proxyPolicy;r.proxyPolicyName=$;r.redirectPolicy=redirectPolicy;r.redirectPolicyName=X;r.retryPolicy=retryPolicy;r.setClientRequestIdPolicy=setClientRequestIdPolicy;r.setClientRequestIdPolicyName=ee;r.systemErrorRetryPolicy=systemErrorRetryPolicy;r.systemErrorRetryPolicyName=ye;r.throttlingRetryPolicy=throttlingRetryPolicy;r.throttlingRetryPolicyName=_e;r.tracingPolicy=tracingPolicy;r.tracingPolicyName=oe;r.userAgentPolicy=userAgentPolicy;r.userAgentPolicyName=se},43285:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const n={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function createTracingContext(t={}){let r=new TracingContextImpl(t.parentContext);if(t.span){r=r.setValue(n.span,t.span)}if(t.namespace){r=r.setValue(n.namespace,t.namespace)}return r}class TracingContextImpl{constructor(t){this._contextMap=t instanceof TracingContextImpl?new Map(t._contextMap):new Map}setValue(t,r){const n=new TracingContextImpl(this);n._contextMap.set(t,r);return n}getValue(t){return this._contextMap.get(t)}deleteValue(t){const r=new TracingContextImpl(this);r._contextMap.delete(t);return r}}function createDefaultTracingSpan(){return{end:()=>{},isRecording:()=>false,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function createDefaultInstrumenter(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>undefined,startSpan:(t,r)=>({span:createDefaultTracingSpan(),tracingContext:createTracingContext({parentContext:r.tracingContext})}),withContext(t,r,...n){return r(...n)}}}let i;function useInstrumenter(t){i=t}function getInstrumenter(){if(!i){i=createDefaultInstrumenter()}return i}function createTracingClient(t){const{namespace:r,packageName:i,packageVersion:o}=t;function startSpan(t,a,s){var c;const u=getInstrumenter().startSpan(t,Object.assign(Object.assign({},s),{packageName:i,packageVersion:o,tracingContext:(c=a===null||a===void 0?void 0:a.tracingOptions)===null||c===void 0?void 0:c.tracingContext}));let l=u.tracingContext;const d=u.span;if(!l.getValue(n.namespace)){l=l.setValue(n.namespace,r)}d.setAttribute("az.namespace",l.getValue(n.namespace));const p=Object.assign({},a,{tracingOptions:Object.assign(Object.assign({},a===null||a===void 0?void 0:a.tracingOptions),{tracingContext:l})});return{span:d,updatedOptions:p}}async function withSpan(t,r,n,i){const{span:o,updatedOptions:a}=startSpan(t,r,i);try{const t=await withContext(a.tracingOptions.tracingContext,(()=>Promise.resolve(n(a,o))));o.setStatus({status:"success"});return t}catch(t){o.setStatus({status:"error",error:t});throw t}finally{o.end()}}function withContext(t,r,...n){return getInstrumenter().withContext(t,r,...n)}function parseTraceparentHeader(t){return getInstrumenter().parseTraceparentHeader(t)}function createRequestHeaders(t){return getInstrumenter().createRequestHeaders(t)}return{startSpan:startSpan,withSpan:withSpan,withContext:withContext,parseTraceparentHeader:parseTraceparentHeader,createRequestHeaders:createRequestHeaders}}r.createTracingClient=createTracingClient;r.useInstrumenter=useInstrumenter},43833:(t,r,n)=>{var i=n(85443);var o=n(73837);var a=n(71017);var s=n(13685);var c=n(95687);var u=n(57310).parse;var l=n(57147);var d=n(12781).Stream;var p=n(43583);var g=n(14812);var v=n(80029);t.exports=FormData;o.inherits(FormData,i);function FormData(t){if(!(this instanceof FormData)){return new FormData(t)}this._overheadLength=0;this._valueLength=0;this._valuesToMeasure=[];i.call(this);t=t||{};for(var r in t){this[r]=t[r]}}FormData.LINE_BREAK="\r\n";FormData.DEFAULT_CONTENT_TYPE="application/octet-stream";FormData.prototype.append=function(t,r,n){n=n||{};if(typeof n=="string"){n={filename:n}}var a=i.prototype.append.bind(this);if(typeof r=="number"){r=""+r}if(o.isArray(r)){this._error(new Error("Arrays are not supported."));return}var s=this._multiPartHeader(t,r,n);var c=this._multiPartFooter();a(s);a(r);a(c);this._trackLength(s,r,n)};FormData.prototype._trackLength=function(t,r,n){var i=0;if(n.knownLength!=null){i+=+n.knownLength}else if(Buffer.isBuffer(r)){i=r.length}else if(typeof r==="string"){i=Buffer.byteLength(r)}this._valueLength+=i;this._overheadLength+=Buffer.byteLength(t)+FormData.LINE_BREAK.length;if(!r||!r.path&&!(r.readable&&r.hasOwnProperty("httpVersion"))&&!(r instanceof d)){return}if(!n.knownLength){this._valuesToMeasure.push(r)}};FormData.prototype._lengthRetriever=function(t,r){if(t.hasOwnProperty("fd")){if(t.end!=undefined&&t.end!=Infinity&&t.start!=undefined){r(null,t.end+1-(t.start?t.start:0))}else{l.stat(t.path,(function(n,i){var o;if(n){r(n);return}o=i.size-(t.start?t.start:0);r(null,o)}))}}else if(t.hasOwnProperty("httpVersion")){r(null,+t.headers["content-length"])}else if(t.hasOwnProperty("httpModule")){t.on("response",(function(n){t.pause();r(null,+n.headers["content-length"])}));t.resume()}else{r("Unknown stream")}};FormData.prototype._multiPartHeader=function(t,r,n){if(typeof n.header=="string"){return n.header}var i=this._getContentDisposition(r,n);var o=this._getContentType(r,n);var a="";var s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(i||[]),"Content-Type":[].concat(o||[])};if(typeof n.header=="object"){v(s,n.header)}var c;for(var u in s){if(!s.hasOwnProperty(u))continue;c=s[u];if(c==null){continue}if(!Array.isArray(c)){c=[c]}if(c.length){a+=u+": "+c.join("; ")+FormData.LINE_BREAK}}return"--"+this.getBoundary()+FormData.LINE_BREAK+a+FormData.LINE_BREAK};FormData.prototype._getContentDisposition=function(t,r){var n,i;if(typeof r.filepath==="string"){n=a.normalize(r.filepath).replace(/\\/g,"/")}else if(r.filename||t.name||t.path){n=a.basename(r.filename||t.name||t.path)}else if(t.readable&&t.hasOwnProperty("httpVersion")){n=a.basename(t.client._httpMessage.path||"")}if(n){i='filename="'+n+'"'}return i};FormData.prototype._getContentType=function(t,r){var n=r.contentType;if(!n&&t.name){n=p.lookup(t.name)}if(!n&&t.path){n=p.lookup(t.path)}if(!n&&t.readable&&t.hasOwnProperty("httpVersion")){n=t.headers["content-type"]}if(!n&&(r.filepath||r.filename)){n=p.lookup(r.filepath||r.filename)}if(!n&&typeof t=="object"){n=FormData.DEFAULT_CONTENT_TYPE}return n};FormData.prototype._multiPartFooter=function(){return function(t){var r=FormData.LINE_BREAK;var n=this._streams.length===0;if(n){r+=this._lastBoundary()}t(r)}.bind(this)};FormData.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+FormData.LINE_BREAK};FormData.prototype.getHeaders=function(t){var r;var n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(r in t){if(t.hasOwnProperty(r)){n[r.toLowerCase()]=t[r]}}return n};FormData.prototype.setBoundary=function(t){this._boundary=t};FormData.prototype.getBoundary=function(){if(!this._boundary){this._generateBoundary()}return this._boundary};FormData.prototype.getBuffer=function(){var t=new Buffer.alloc(0);var r=this.getBoundary();for(var n=0,i=this._streams.length;n<i;n++){if(typeof this._streams[n]!=="function"){if(Buffer.isBuffer(this._streams[n])){t=Buffer.concat([t,this._streams[n]])}else{t=Buffer.concat([t,Buffer.from(this._streams[n])])}if(typeof this._streams[n]!=="string"||this._streams[n].substring(2,r.length+2)!==r){t=Buffer.concat([t,Buffer.from(FormData.LINE_BREAK)])}}}return Buffer.concat([t,Buffer.from(this._lastBoundary())])};FormData.prototype._generateBoundary=function(){var t="--------------------------";for(var r=0;r<24;r++){t+=Math.floor(Math.random()*10).toString(16)}this._boundary=t};FormData.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;if(this._streams.length){t+=this._lastBoundary().length}if(!this.hasKnownLength()){this._error(new Error("Cannot calculate proper length in synchronous way."))}return t};FormData.prototype.hasKnownLength=function(){var t=true;if(this._valuesToMeasure.length){t=false}return t};FormData.prototype.getLength=function(t){var r=this._overheadLength+this._valueLength;if(this._streams.length){r+=this._lastBoundary().length}if(!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,r));return}g.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,i){if(n){t(n);return}i.forEach((function(t){r+=t}));t(null,r)}))};FormData.prototype.submit=function(t,r){var n,i,o={method:"post"};if(typeof t=="string"){t=u(t);i=v({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},o)}else{i=v(t,o);if(!i.port){i.port=i.protocol=="https:"?443:80}}i.headers=this.getHeaders(t.headers);if(i.protocol=="https:"){n=c.request(i)}else{n=s.request(i)}this.getLength(function(t,i){if(t&&t!=="Unknown stream"){this._error(t);return}if(i){n.setHeader("Content-Length",i)}this.pipe(n);if(r){var o;var callback=function(t,i){n.removeListener("error",callback);n.removeListener("response",o);return r.call(this,t,i)};o=callback.bind(this,null);n.on("error",callback);n.on("response",o)}}.bind(this));return n};FormData.prototype._error=function(t){if(!this.error){this.error=t;this.pause();this.emit("error",t)}};FormData.prototype.toString=function(){return"[object FormData]"}},80029:t=>{t.exports=function(t,r){Object.keys(r).forEach((function(n){t[n]=t[n]||r[n]}));return t}},88640:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});Object.defineProperty(r,"v1",{enumerable:true,get:function(){return i.default}});Object.defineProperty(r,"v3",{enumerable:true,get:function(){return o.default}});Object.defineProperty(r,"v4",{enumerable:true,get:function(){return a.default}});Object.defineProperty(r,"v5",{enumerable:true,get:function(){return s.default}});Object.defineProperty(r,"NIL",{enumerable:true,get:function(){return c.default}});Object.defineProperty(r,"version",{enumerable:true,get:function(){return u.default}});Object.defineProperty(r,"validate",{enumerable:true,get:function(){return l.default}});Object.defineProperty(r,"stringify",{enumerable:true,get:function(){return d.default}});Object.defineProperty(r,"parse",{enumerable:true,get:function(){return p.default}});var i=_interopRequireDefault(n(86432));var o=_interopRequireDefault(n(12677));var a=_interopRequireDefault(n(89271));var s=_interopRequireDefault(n(8126));var c=_interopRequireDefault(n(91982));var u=_interopRequireDefault(n(27889));var l=_interopRequireDefault(n(73507));var d=_interopRequireDefault(n(9124));var p=_interopRequireDefault(n(20645));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}},8093:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function md5(t){if(Array.isArray(t)){t=Buffer.from(t)}else if(typeof t==="string"){t=Buffer.from(t,"utf8")}return i.default.createHash("md5").update(t).digest()}var o=md5;r["default"]=o},91982:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var n="00000000-0000-0000-0000-000000000000";r["default"]=n},20645:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(73507));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function parse(t){if(!(0,i.default)(t)){throw TypeError("Invalid UUID")}let r;const n=new Uint8Array(16);n[0]=(r=parseInt(t.slice(0,8),16))>>>24;n[1]=r>>>16&255;n[2]=r>>>8&255;n[3]=r&255;n[4]=(r=parseInt(t.slice(9,13),16))>>>8;n[5]=r&255;n[6]=(r=parseInt(t.slice(14,18),16))>>>8;n[7]=r&255;n[8]=(r=parseInt(t.slice(19,23),16))>>>8;n[9]=r&255;n[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255;n[11]=r/4294967296&255;n[12]=r>>>24&255;n[13]=r>>>16&255;n[14]=r>>>8&255;n[15]=r&255;return n}var o=parse;r["default"]=o},51712:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;r["default"]=n},68088:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=rng;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=new Uint8Array(256);let a=o.length;function rng(){if(a>o.length-16){i.default.randomFillSync(o);a=0}return o.slice(a,a+=16)}},45289:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function sha1(t){if(Array.isArray(t)){t=Buffer.from(t)}else if(typeof t==="string"){t=Buffer.from(t,"utf8")}return i.default.createHash("sha1").update(t).digest()}var o=sha1;r["default"]=o},9124:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(73507));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=[];for(let t=0;t<256;++t){o.push((t+256).toString(16).substr(1))}function stringify(t,r=0){const n=(o[t[r+0]]+o[t[r+1]]+o[t[r+2]]+o[t[r+3]]+"-"+o[t[r+4]]+o[t[r+5]]+"-"+o[t[r+6]]+o[t[r+7]]+"-"+o[t[r+8]]+o[t[r+9]]+"-"+o[t[r+10]]+o[t[r+11]]+o[t[r+12]]+o[t[r+13]]+o[t[r+14]]+o[t[r+15]]).toLowerCase();if(!(0,i.default)(n)){throw TypeError("Stringified UUID is invalid")}return n}var a=stringify;r["default"]=a},86432:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(68088));var o=_interopRequireDefault(n(9124));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}let a;let s;let c=0;let u=0;function v1(t,r,n){let l=r&&n||0;const d=r||new Array(16);t=t||{};let p=t.node||a;let g=t.clockseq!==undefined?t.clockseq:s;if(p==null||g==null){const r=t.random||(t.rng||i.default)();if(p==null){p=a=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]}if(g==null){g=s=(r[6]<<8|r[7])&16383}}let v=t.msecs!==undefined?t.msecs:Date.now();let E=t.nsecs!==undefined?t.nsecs:u+1;const S=v-c+(E-u)/1e4;if(S<0&&t.clockseq===undefined){g=g+1&16383}if((S<0||v>c)&&t.nsecs===undefined){E=0}if(E>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}c=v;u=E;s=g;v+=122192928e5;const w=((v&268435455)*1e4+E)%4294967296;d[l++]=w>>>24&255;d[l++]=w>>>16&255;d[l++]=w>>>8&255;d[l++]=w&255;const x=v/4294967296*1e4&268435455;d[l++]=x>>>8&255;d[l++]=x&255;d[l++]=x>>>24&15|16;d[l++]=x>>>16&255;d[l++]=g>>>8|128;d[l++]=g&255;for(let t=0;t<6;++t){d[l+t]=p[t]}return r||(0,o.default)(d)}var l=v1;r["default"]=l},12677:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(33134));var o=_interopRequireDefault(n(8093));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=(0,i.default)("v3",48,o.default);var s=a;r["default"]=s},33134:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=_default;r.URL=r.DNS=void 0;var i=_interopRequireDefault(n(9124));var o=_interopRequireDefault(n(20645));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function stringToBytes(t){t=unescape(encodeURIComponent(t));const r=[];for(let n=0;n<t.length;++n){r.push(t.charCodeAt(n))}return r}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=s;function _default(t,r,n){function generateUUID(t,a,s,c){if(typeof t==="string"){t=stringToBytes(t)}if(typeof a==="string"){a=(0,o.default)(a)}if(a.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let u=new Uint8Array(16+t.length);u.set(a);u.set(t,a.length);u=n(u);u[6]=u[6]&15|r;u[8]=u[8]&63|128;if(s){c=c||0;for(let t=0;t<16;++t){s[c+t]=u[t]}return s}return(0,i.default)(u)}try{generateUUID.name=t}catch(t){}generateUUID.DNS=a;generateUUID.URL=s;return generateUUID}},89271:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(68088));var o=_interopRequireDefault(n(9124));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function v4(t,r,n){t=t||{};const a=t.random||(t.rng||i.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(r){n=n||0;for(let t=0;t<16;++t){r[n+t]=a[t]}return r}return(0,o.default)(a)}var a=v4;r["default"]=a},8126:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(33134));var o=_interopRequireDefault(n(45289));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=(0,i.default)("v5",80,o.default);var s=a;r["default"]=s},73507:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(51712));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function validate(t){return typeof t==="string"&&i.default.test(t)}var o=validate;r["default"]=o},27889:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(73507));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function version(t){if(!(0,i.default)(t)){throw TypeError("Invalid UUID")}return parseInt(t.substr(14,1),16)}var o=version;r["default"]=o},94175:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=n(65163);(function(t){t[t["INTERNAL"]=0]="INTERNAL";t[t["SERVER"]=1]="SERVER";t[t["CLIENT"]=2]="CLIENT";t[t["PRODUCER"]=3]="PRODUCER";t[t["CONSUMER"]=4]="CONSUMER"})(r.SpanKind||(r.SpanKind={}));function getSpan(t){return i.trace.getSpan(t)}function setSpan(t,r){return i.trace.setSpan(t,r)}function setSpanContext(t,r){return i.trace.setSpanContext(t,r)}function getSpanContext(t){return i.trace.getSpanContext(t)}function isSpanContextValid(t){return i.trace.isSpanContextValid(t)}function getTracer(t,r){return i.trace.getTracer(t||"azure/core-tracing",r)}const o=i.context;(function(t){t[t["UNSET"]=0]="UNSET";t[t["OK"]=1]="OK";t[t["ERROR"]=2]="ERROR"})(r.SpanStatusCode||(r.SpanStatusCode={}));function isTracingDisabled(){var t;if(typeof process==="undefined"){return false}const r=(t=process.env.AZURE_TRACING_DISABLED)===null||t===void 0?void 0:t.toLowerCase();if(r==="false"||r==="0"){return false}return Boolean(r)}function createSpanFunction(t){return function(n,a){const s=getTracer();const c=(a===null||a===void 0?void 0:a.tracingOptions)||{};const u=Object.assign({kind:r.SpanKind.INTERNAL},c.spanOptions);const l=t.packagePrefix?`${t.packagePrefix}.${n}`:n;let d;if(isTracingDisabled()){d=i.trace.wrapSpanContext(i.INVALID_SPAN_CONTEXT)}else{d=s.startSpan(l,u,c.tracingContext)}if(t.namespace){d.setAttribute("az.namespace",t.namespace)}let p=c.spanOptions||{};if(d.isRecording()&&t.namespace){p=Object.assign(Object.assign({},c.spanOptions),{attributes:Object.assign(Object.assign({},u.attributes),{"az.namespace":t.namespace})})}const g=Object.assign(Object.assign({},c),{spanOptions:p,tracingContext:setSpan(c.tracingContext||o.active(),d)});const v=Object.assign(Object.assign({},a),{tracingOptions:g});return{span:d,updatedOptions:v}}}const a="00";function extractSpanContextFromTraceParentHeader(t){const r=t.split("-");if(r.length!==4){return}const[n,i,o,s]=r;if(n!==a){return}const c=parseInt(s,16);const u={spanId:o,traceId:i,traceFlags:c};return u}function getTraceParentHeader(t){const r=[];if(!t.traceId){r.push("traceId")}if(!t.spanId){r.push("spanId")}if(r.length){return}const n=t.traceFlags||0;const i=n.toString(16);const o=i.length===1?`0${i}`:i;return`${a}-${t.traceId}-${t.spanId}-${o}`}r.context=o;r.createSpanFunction=createSpanFunction;r.extractSpanContextFromTraceParentHeader=extractSpanContextFromTraceParentHeader;r.getSpan=getSpan;r.getSpanContext=getSpanContext;r.getTraceParentHeader=getTraceParentHeader;r.getTracer=getTracer;r.isSpanContextValid=isSpanContextValid;r.setSpan=setSpan;r.setSpanContext=setSpanContext},51333:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=n(6113);var o;const a=typeof process!=="undefined"&&Boolean(process.version)&&Boolean((o=process.versions)===null||o===void 0?void 0:o.node);function delay(t){return new Promise((r=>setTimeout((()=>r()),t)))}function getRandomIntegerInclusive(t,r){t=Math.ceil(t);r=Math.floor(r);const n=Math.floor(Math.random()*(r-t+1));return n+t}function isObject(t){return typeof t==="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function isError(t){if(isObject(t)){const r=typeof t.name==="string";const n=typeof t.message==="string";return r&&n}return false}function getErrorMessage(t){if(isError(t)){return t.message}else{let r;try{if(typeof t==="object"&&t){r=JSON.stringify(t)}else{r=String(t)}}catch(t){r="[unable to stringify input]"}return`Unknown error ${r}`}}async function computeSha256Hmac(t,r,n){const o=Buffer.from(t,"base64");return i.createHmac("sha256",o).update(r).digest(n)}async function computeSha256Hash(t,r){return i.createHash("sha256").update(t).digest(r)}r.computeSha256Hash=computeSha256Hash;r.computeSha256Hmac=computeSha256Hmac;r.delay=delay;r.getErrorMessage=getErrorMessage;r.getRandomIntegerInclusive=getRandomIntegerInclusive;r.isError=isError;r.isNode=a;r.isObject=isObject},3084:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=n(12884);var o=n(94175);var a=n(29729);var s=n(51333);var c=n(88121);var u=n(52557);var l=n(3233);var d=n(45728);var p=n(57176);var g=n(57147);var v=n(22037);var E=n(71017);var S=n(32081);var w=n(6113);var x=n(73837);var N=n(95687);var P=n(13685);var D=n(85768);var M=n(24477);function _interopDefaultLegacy(t){return t&&typeof t==="object"&&"default"in t?t:{default:t}}function _interopNamespace(t){if(t&&t.__esModule)return t;var r=Object.create(null);if(t){Object.keys(t).forEach((function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:true,get:function(){return t[n]}})}}))}r["default"]=t;return Object.freeze(r)}var L=_interopNamespace(i);var U=_interopNamespace(d);var q=_interopDefaultLegacy(g);var B=_interopDefaultLegacy(v);var F=_interopDefaultLegacy(E);var j=_interopDefaultLegacy(S);var H=_interopNamespace(S);var z=_interopDefaultLegacy(N);var V=_interopDefaultLegacy(P);var Y=_interopDefaultLegacy(D);var G=_interopDefaultLegacy(M);function isErrorResponse(t){return t&&typeof t.error==="string"&&typeof t.error_description==="string"}const W="CredentialUnavailableError";class CredentialUnavailableError extends Error{constructor(t){super(t);this.name=W}}const $="AuthenticationError";class AuthenticationError extends Error{constructor(t,r){let n={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(isErrorResponse(r)){n=convertOAuthErrorResponseToErrorResponse(r)}else if(typeof r==="string"){try{const t=JSON.parse(r);n=convertOAuthErrorResponseToErrorResponse(t)}catch(i){if(t===400){n={error:"authority_not_found",errorDescription:"The specified authority URL was not found."}}else{n={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:\n\n${r}`}}}}else{n={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."}}super(`${n.error} Status code: ${t}\nMore details:\n${n.errorDescription}`);this.statusCode=t;this.errorResponse=n;this.name=$}}const K="AggregateAuthenticationError";class AggregateAuthenticationError extends Error{constructor(t,r){const n=t.join("\n");super(`${r}\n${n}`);this.errors=t;this.name=K}}function convertOAuthErrorResponseToErrorResponse(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}class AuthenticationRequiredError extends Error{constructor(t){super(t.message);this.scopes=t.scopes;this.getTokenOptions=t.getTokenOptions;this.name="AuthenticationRequiredError"}}function getIdentityTokenEndpointSuffix(t){if(t==="adfs"){return"oauth2/token"}else{return"oauth2/v2.0/token"}}const J="04b07795-8ddb-461a-bbee-02f9e1bf7b46";const Z="common";r.AzureAuthorityHosts=void 0;(function(t){t["AzureChina"]="https://login.chinacloudapi.cn";t["AzureGermany"]="https://login.microsoftonline.de";t["AzureGovernment"]="https://login.microsoftonline.us";t["AzurePublicCloud"]="https://login.microsoftonline.com"})(r.AzureAuthorityHosts||(r.AzureAuthorityHosts={}));const X=r.AzureAuthorityHosts.AzurePublicCloud;const Q=o.createSpanFunction({packagePrefix:"",namespace:"Microsoft.AAD"});async function trace(t,r,n,i=Q){const{updatedOptions:a,span:s}=i(t,r);try{const t=await n(a,s);s.setStatus({code:o.SpanStatusCode.OK});return t}catch(t){s.setStatus({code:o.SpanStatusCode.ERROR,message:t.message});throw t}finally{s.end()}}const ee=l.createClientLogger("identity");function processEnvVars(t){return t.reduce(((t,r)=>{if(process.env[r]){t.assigned.push(r)}else{t.missing.push(r)}return t}),{missing:[],assigned:[]})}function formatSuccess(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}function formatError(t,r){let n="ERROR.";if(t===null||t===void 0?void 0:t.length){n+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`}return`${n} Error message: ${typeof r==="string"?r:r.message}.`}function credentialLoggerInstance(t,r,n=ee){const i=r?`${r.fullTitle} ${t}`:t;function info(t){n.info(`${i} =>`,t)}function warning(t){n.warning(`${i} =>`,t)}return{title:t,fullTitle:i,info:info,warning:warning}}function credentialLogger(t,r=ee){const n=credentialLoggerInstance(t,undefined,r);return Object.assign(Object.assign({},n),{parent:r,getToken:credentialLoggerInstance("=> getToken()",n,r)})}const te="noCorrelationId";function getIdentityClientAuthorityHost(t){let r=t===null||t===void 0?void 0:t.authorityHost;if(s.isNode){r=r!==null&&r!==void 0?r:process.env.AZURE_AUTHORITY_HOST}return r!==null&&r!==void 0?r:X}class IdentityClient extends a.ServiceClient{constructor(t){var r;const n=`azsdk-js-identity/2.0.4`;const i=((r=t===null||t===void 0?void 0:t.userAgentOptions)===null||r===void 0?void 0:r.userAgentPrefix)?`${t.userAgentOptions.userAgentPrefix} ${n}`:`${n}`;const o=getIdentityClientAuthorityHost(t);if(!o.startsWith("https:")){throw new Error("The authorityHost address must use the 'https' protocol.")}super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},t),{userAgentOptions:{userAgentPrefix:i},baseUri:o}));this.authorityHost=o;this.abortControllers=new Map}async sendTokenRequest(t,r){ee.info(`IdentityClient: sending token request to [${t.url}]`);const n=await this.sendRequest(t);r=r||(t=>Date.now()+t.expires_in*1e3);if(n.bodyAsText&&(n.status===200||n.status===201)){const i=JSON.parse(n.bodyAsText);if(!i.access_token){return null}const o={accessToken:{token:i.access_token,expiresOnTimestamp:r(i)},refreshToken:i.refresh_token};ee.info(`IdentityClient: [${t.url}] token acquired, expires on ${o.accessToken.expiresOnTimestamp}`);return o}else{const t=new AuthenticationError(n.status,n.bodyAsText);ee.warning(`IdentityClient: authentication error. HTTP status: ${n.status}, ${t.errorResponse.errorDescription}`);throw t}}async refreshAccessToken(t,r,n,i,a,s,u){if(i===undefined){return null}ee.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);const{span:l,updatedOptions:d}=Q("IdentityClient-refreshAccessToken",u);const p={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};if(a!==undefined){p.client_secret=a}const g=new URLSearchParams(p);try{const n=getIdentityTokenEndpointSuffix(t);const i=c.createPipelineRequest({url:`${this.authorityHost}/${t}/${n}`,method:"POST",body:g.toString(),abortSignal:u&&u.abortSignal,headers:c.createHttpHeaders({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:d===null||d===void 0?void 0:d.tracingOptions});const o=await this.sendTokenRequest(i,s);ee.info(`IdentityClient: refreshed token for client ID: ${r}`);return o}catch(t){if(t.name===$&&t.errorResponse.error==="interaction_required"){ee.info(`IdentityClient: interaction required for client ID: ${r}`);l.setStatus({code:o.SpanStatusCode.ERROR,message:t.message});return null}else{ee.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${t}`);l.setStatus({code:o.SpanStatusCode.ERROR,message:t.message});throw t}}finally{l.end()}}generateAbortSignal(t){const r=new u.AbortController;const n=this.abortControllers.get(t)||[];n.push(r);this.abortControllers.set(t,n);const i=r.signal.onabort;r.signal.onabort=(...r)=>{this.abortControllers.set(t,undefined);if(i){i(...r)}};return r.signal}abortRequests(t){const r=t||te;const n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(te)||[]];if(!n.length){return}for(const t of n){t.abort()}this.abortControllers.set(r,undefined)}getCorrelationId(t){var r;const n=(r=t===null||t===void 0?void 0:t.body)===null||r===void 0?void 0:r.split("&").map((t=>t.split("="))).find((([t])=>t==="client-request-id"));return n&&n.length?n[1]||te:te}async sendGetRequestAsync(t,r){const n=c.createPipelineRequest({url:t,method:"GET",body:r===null||r===void 0?void 0:r.body,headers:c.createHttpHeaders(r===null||r===void 0?void 0:r.headers),abortSignal:this.generateAbortSignal(te)});const i=await this.sendRequest(n);return{body:i.bodyAsText?JSON.parse(i.bodyAsText):undefined,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(t,r){const n=c.createPipelineRequest({url:t,method:"POST",body:r===null||r===void 0?void 0:r.body,headers:c.createHttpHeaders(r===null||r===void 0?void 0:r.headers),abortSignal:this.generateAbortSignal(this.getCorrelationId(r))});const i=await this.sendRequest(n);return{body:i.bodyAsText?JSON.parse(i.bodyAsText):undefined,headers:i.headers.toJSON(),status:i.status}}}function checkTenantId(t,r){if(!r.match(/^[0-9a-zA-Z-.:/]+$/)){const r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://docs.microsoft.com/partner-center/find-ids-and-domain-names.");t.info(formatError("",r));throw r}}function resolveTenantId(t,r,n){if(r){checkTenantId(t,r);return r}if(!n){n=J}if(n!==J){return"common"}return"organizations"}const re="1.0";function ensureValidMsalToken(t,r,n,i){const error=n=>{r.getToken.info(n);return new AuthenticationRequiredError({scopes:Array.isArray(t)?t:[t],getTokenOptions:i,message:n})};if(!n){throw error("No response")}if(!n.expiresOn){throw error(`Response had no "expiresOn" property.`)}if(!n.accessToken){throw error(`Response had no "accessToken" property.`)}}function getAuthority(t,r){if(!r){r=X}if(new RegExp(`${t}/?$`).test(r)){return r}if(r.endsWith("/")){return r+t}else{return`${r}/${t}`}}function getKnownAuthorities(t,r){if(t==="adfs"&&r){return[r]}return[]}const defaultLoggerCallback=(t,r=(s.isNode?"Node":"Browser"))=>(n,i,o)=>{if(o){return}switch(n){case U.LogLevel.Error:t.info(`MSAL ${r} V2 error: ${i}`);return;case U.LogLevel.Info:t.info(`MSAL ${r} V2 info message: ${i}`);return;case U.LogLevel.Verbose:t.info(`MSAL ${r} V2 verbose message: ${i}`);return;case U.LogLevel.Warning:t.info(`MSAL ${r} V2 warning: ${i}`);return}};class MsalBaseUtilities{constructor(t){this.logger=t.logger;this.account=t.authenticationRecord}generateUuid(){return p.v4()}handleResult(t,r,n,i){if(n===null||n===void 0?void 0:n.account){this.account=msalToPublic(r,n.account)}ensureValidMsalToken(t,this.logger,n,i);this.logger.getToken.info(formatSuccess(t));return{token:n.accessToken,expiresOnTimestamp:n.expiresOn.getTime()}}handleError(t,r,n){if(r.name==="AuthError"||r.name==="ClientAuthError"||r.name==="BrowserAuthError"){const n=r;switch(n.errorCode){case"endpoints_resolution_error":this.logger.info(formatError(t,r.message));return new CredentialUnavailableError(r.message);case"device_code_polling_cancelled":return new u.AbortError("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":this.logger.info(formatError(t,`Authentication returned errorCode ${n.errorCode}`));break;default:this.logger.info(formatError(t,`Failed to acquire token: ${r.message}`));break}}if(r.name==="ClientConfigurationError"||r.name==="BrowserConfigurationAuthError"||r.name==="AbortError"){return r}return new AuthenticationRequiredError({scopes:t,getTokenOptions:n,message:r.message})}}function publicToMsal(t){const[r]=t.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[];return Object.assign(Object.assign({},t),{localAccountId:t.homeAccountId,environment:r})}function msalToPublic(t,r){const n={authority:getAuthority(r.tenantId,r.environment),homeAccountId:r.homeAccountId,tenantId:r.tenantId||Z,username:r.username,clientId:t,version:re};return n}function serializeAuthenticationRecord(t){return JSON.stringify(t)}function deserializeAuthenticationRecord(t){const r=JSON.parse(t);if(r.version&&r.version!==re){throw Error("Unsupported AuthenticationRecord version")}return r}const ne="A getToken request was attempted with a tenant different than the tenant configured at the initialization of the credential, but multi-tenant authentication has been disabled by the environment variable AZURE_IDENTITY_DISABLE_MULTITENANTAUTH.";const ie="A new tenant Id can't be assigned through the GetTokenOptions when a credential has been originally configured to use the tenant `adfs`.";function processMultiTenantRequest(t,r){if(!(r===null||r===void 0?void 0:r.tenantId)){return t}if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH){throw new Error(ne)}if(t==="adfs"){throw new Error(ie)}return r===null||r===void 0?void 0:r.tenantId}var oe;(function(t){t["AutoDiscoverRegion"]="AutoDiscoverRegion";t["USWest"]="westus";t["USWest2"]="westus2";t["USCentral"]="centralus";t["USEast"]="eastus";t["USEast2"]="eastus2";t["USNorthCentral"]="northcentralus";t["USSouthCentral"]="southcentralus";t["USWestCentral"]="westcentralus";t["CanadaCentral"]="canadacentral";t["CanadaEast"]="canadaeast";t["BrazilSouth"]="brazilsouth";t["EuropeNorth"]="northeurope";t["EuropeWest"]="westeurope";t["UKSouth"]="uksouth";t["UKWest"]="ukwest";t["FranceCentral"]="francecentral";t["FranceSouth"]="francesouth";t["SwitzerlandNorth"]="switzerlandnorth";t["SwitzerlandWest"]="switzerlandwest";t["GermanyNorth"]="germanynorth";t["GermanyWestCentral"]="germanywestcentral";t["NorwayWest"]="norwaywest";t["NorwayEast"]="norwayeast";t["AsiaEast"]="eastasia";t["AsiaSouthEast"]="southeastasia";t["JapanEast"]="japaneast";t["JapanWest"]="japanwest";t["AustraliaEast"]="australiaeast";t["AustraliaSouthEast"]="australiasoutheast";t["AustraliaCentral"]="australiacentral";t["AustraliaCentral2"]="australiacentral2";t["IndiaCentral"]="centralindia";t["IndiaSouth"]="southindia";t["IndiaWest"]="westindia";t["KoreaSouth"]="koreasouth";t["KoreaCentral"]="koreacentral";t["UAECentral"]="uaecentral";t["UAENorth"]="uaenorth";t["SouthAfricaNorth"]="southafricanorth";t["SouthAfricaWest"]="southafricawest";t["ChinaNorth"]="chinanorth";t["ChinaEast"]="chinaeast";t["ChinaNorth2"]="chinanorth2";t["ChinaEast2"]="chinaeast2";t["GermanyCentral"]="germanycentral";t["GermanyNorthEast"]="germanynortheast";t["GovernmentUSVirginia"]="usgovvirginia";t["GovernmentUSIowa"]="usgoviowa";t["GovernmentUSArizona"]="usgovarizona";t["GovernmentUSTexas"]="usgovtexas";t["GovernmentUSDodEast"]="usdodeast";t["GovernmentUSDodCentral"]="usdodcentral"})(oe||(oe={}));let ae=undefined;const se={setPersistence(t){ae=t}};class MsalNode extends MsalBaseUtilities{constructor(t){var r,n,i;super(t);this.requiresConfidential=false;this.msalConfig=this.defaultNodeMsalConfig(t);this.tenantId=resolveTenantId(t.logger,t.tenantId,t.clientId);this.clientId=this.msalConfig.auth.clientId;if(ae!==undefined&&((r=t.tokenCachePersistenceOptions)===null||r===void 0?void 0:r.enabled)){this.createCachePlugin=()=>ae(t.tokenCachePersistenceOptions)}else if((n=t.tokenCachePersistenceOptions)===null||n===void 0?void 0:n.enabled){throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "))}this.azureRegion=(i=t.regionalAuthority)!==null&&i!==void 0?i:process.env.AZURE_REGIONAL_AUTHORITY_NAME;if(this.azureRegion===oe.AutoDiscoverRegion){this.azureRegion="AUTO_DISCOVER"}}defaultNodeMsalConfig(t){const r=t.clientId||J;const n=resolveTenantId(t.logger,t.tenantId,t.clientId);this.authorityHost=t.authorityHost||process.env.AZURE_AUTHORITY_HOST;const i=getAuthority(n,this.authorityHost);this.identityClient=new IdentityClient(Object.assign(Object.assign({},t.tokenCredentialOptions),{authorityHost:i}));let o=["cp1"];if(process.env.AZURE_IDENTITY_DISABLE_CP1){o=[]}return{auth:{clientId:r,authority:i,knownAuthorities:getKnownAuthorities(n,i),clientCapabilities:o},system:{networkClient:this.identityClient,loggerOptions:{loggerCallback:defaultLoggerCallback(t.logger)}}}}async init(t){if(t===null||t===void 0?void 0:t.abortSignal){t.abortSignal.addEventListener("abort",(()=>{this.identityClient.abortRequests(t.correlationId)}))}if(this.publicApp||this.confidentialApp){return}if(this.createCachePlugin!==undefined){this.msalConfig.cache={cachePlugin:await this.createCachePlugin()}}this.publicApp=new L.PublicClientApplication(this.msalConfig);if(this.msalConfig.auth.clientSecret||this.msalConfig.auth.clientAssertion||this.msalConfig.auth.clientCertificate){this.confidentialApp=new L.ConfidentialClientApplication(this.msalConfig)}else{if(this.requiresConfidential){throw new Error("Unable to generate the MSAL confidential client. Missing either the client's secret, certificate or assertion.")}}}withCancellation(t,r,n){return new Promise(((i,o)=>{t.then((t=>i(t))).catch(o);if(r){r.addEventListener("abort",(()=>{n===null||n===void 0?void 0:n()}))}}))}async getActiveAccount(){var t,r,n;if(this.account){return this.account}const i=(r=(t=this.confidentialApp)===null||t===void 0?void 0:t.getTokenCache())!==null&&r!==void 0?r:(n=this.publicApp)===null||n===void 0?void 0:n.getTokenCache();const o=await(i===null||i===void 0?void 0:i.getAllAccounts());if(!o){return}if(o.length===1){this.account=msalToPublic(this.clientId,o[0])}else{this.logger.info(`More than one account was found authenticated for this Client ID and Tenant ID.\nHowever, no "authenticationRecord" has been provided for this credential,\ntherefore we're unable to pick between these accounts.\nA new login attempt will be requested, to ensure the correct account is picked.\nTo work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing a credential to prevent this from happening.`);return}return this.account}async getTokenSilent(t,r){var n,i;await this.getActiveAccount();if(!this.account){throw new AuthenticationRequiredError({scopes:t,getTokenOptions:r,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."})}const o={account:publicToMsal(this.account),correlationId:r===null||r===void 0?void 0:r.correlationId,scopes:t,authority:r===null||r===void 0?void 0:r.authority,claims:r===null||r===void 0?void 0:r.claims};try{this.logger.info("Attempting to acquire token silently");const r=(i=await((n=this.confidentialApp)===null||n===void 0?void 0:n.acquireTokenSilent(o)))!==null&&i!==void 0?i:await this.publicApp.acquireTokenSilent(o);return this.handleResult(t,this.clientId,r||undefined)}catch(n){throw this.handleError(t,n,r)}}async getToken(t,r={}){const n=processMultiTenantRequest(this.tenantId,r)||this.tenantId;r.authority=getAuthority(n,this.authorityHost);r.correlationId=(r===null||r===void 0?void 0:r.correlationId)||this.generateUuid();await this.init(r);try{return await this.getTokenSilent(t,r)}catch(n){if(n.name!=="AuthenticationRequiredError"){throw n}if(r===null||r===void 0?void 0:r.disableAutomaticAuthentication){throw new AuthenticationRequiredError({scopes:t,getTokenOptions:r,message:"Automatic authentication has been disabled. You may call the authentication() method."})}this.logger.info(`Silent authentication failed, falling back to interactive method.`);return this.doGetToken(t,r)}}}const ce="common";const ue="aebc6443-996d-45c2-90f0-388ff96faa56";const le=credentialLogger("VisualStudioCodeCredential");let fe=undefined;const de={setVsCodeCredentialFinder(t){fe=t}};const pe={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function checkUnsupportedTenant(t){const r=pe[t];if(r){throw new CredentialUnavailableError(r)}}const he={AzureCloud:r.AzureAuthorityHosts.AzurePublicCloud,AzureChina:r.AzureAuthorityHosts.AzureChina,AzureGermanCloud:r.AzureAuthorityHosts.AzureGermany,AzureUSGovernment:r.AzureAuthorityHosts.AzureGovernment};function getPropertyFromVSCode(t){const r=["User","settings.json"];const n="Code";const i=B["default"].homedir();function loadProperty(...i){const o=F["default"].join(...i,n,...r);const a=JSON.parse(q["default"].readFileSync(o,{encoding:"utf8"}));return a[t]}try{let t;switch(process.platform){case"win32":t=process.env.APPDATA;return t?loadProperty(t):undefined;case"darwin":return loadProperty(i,"Library","Application Support");case"linux":return loadProperty(i,".config");default:return}}catch(t){le.info(`Failed to load the Visual Studio Code configuration file. Error: ${t.message}`);return}}class VisualStudioCodeCredential{constructor(t){this.cloudName=getPropertyFromVSCode("azure.cloud")||"AzureCloud";const r=he[this.cloudName];this.identityClient=new IdentityClient(Object.assign({authorityHost:r},t));if(t&&t.tenantId){checkTenantId(le,t.tenantId);this.tenantId=t.tenantId}else{this.tenantId=ce}checkUnsupportedTenant(this.tenantId)}async prepare(){const t=getPropertyFromVSCode("azure.tenant");if(t){this.tenantId=t}checkUnsupportedTenant(this.tenantId)}prepareOnce(){if(!this.preparePromise){this.preparePromise=this.prepare()}return this.preparePromise}async getToken(t,r){var n,i;await this.prepareOnce();const o=processMultiTenantRequest(this.tenantId,r)||this.tenantId;if(fe===undefined){throw new CredentialUnavailableError(["No implementation of `VisualStudioCodeCredential` is available.","You must install the identity-vscode plugin package (`npm install --save-dev @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before creating a `VisualStudioCodeCredential`."].join(" "))}let a=typeof t==="string"?t:t.join(" ");if(!a.match(/^[0-9a-zA-Z-.:/]+$/)){const r=new Error("Invalid scope was specified by the user or calling client");le.getToken.info(formatError(t,r));throw r}if(a.indexOf("offline_access")<0){a+=" offline_access"}const s=await fe();const{password:c}=(i=(n=s.find((({account:t})=>t===this.cloudName)))!==null&&n!==void 0?n:s[0])!==null&&i!==void 0?i:{};if(c){const r=await this.identityClient.refreshAccessToken(o,ue,a,c,undefined);if(r){le.getToken.info(formatSuccess(t));return r.accessToken}else{const r=new CredentialUnavailableError("Could not retrieve the token associated with Visual Studio Code. Have you connected using the 'Azure Account' extension recently? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");le.getToken.info(formatError(t,r));throw r}}else{const r=new CredentialUnavailableError("Could not retrieve the token associated with Visual Studio Code. Did you connect using the 'Azure Account' extension? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");le.getToken.info(formatError(t,r));throw r}}}const me={cachePluginControl:se,vsCodeCredentialControl:de};function useIdentityPlugin(t){t(me)}const ge=credentialLogger("ChainedTokenCredential");class ChainedTokenCredential{constructor(...t){this.UnavailableMessage="ChainedTokenCredential => failed to retrieve a token from the included credentials";this._sources=[];this._sources=t}async getToken(t,r){let n=null;let i="";const a=[];const{span:s,updatedOptions:c}=Q("ChainedTokenCredential.getToken",r);for(let r=0;r<this._sources.length&&n===null;r++){try{n=await this._sources[r].getToken(t,c);i=this._sources[r].constructor.name}catch(r){if(r.name==="CredentialUnavailableError"||r.name==="AuthenticationRequiredError"){a.push(r)}else{ge.getToken.info(formatError(t,r));throw r}}}if(!n&&a.length>0){const r=new AggregateAuthenticationError(a,"ChainedTokenCredential authentication failed.");s.setStatus({code:o.SpanStatusCode.ERROR,message:r.message});ge.getToken.info(formatError(t,r));throw r}s.end();ge.getToken.info(`Result for ${i}: ${formatSuccess(t)}`);if(n===null){throw new CredentialUnavailableError("Failed to retrieve a valid token")}return n}}function ensureValidScope(t,r){if(!t.match(/^[0-9a-zA-Z-.:/]+$/)){const n=new Error("Invalid scope was specified by the user or calling client");r.getToken.info(formatError(t,n));throw n}}function getScopeResource(t){return t.replace(/\/.default$/,"")}const ve={getSafeWorkingDir(){if(process.platform==="win32"){if(!process.env.SystemRoot){throw new Error("Azure CLI credential expects a 'SystemRoot' environment variable")}return process.env.SystemRoot}else{return"/bin"}},async getAzureCliAccessToken(t,r){let n=[];if(r){n=["--tenant",r]}return new Promise(((r,i)=>{try{j["default"].execFile("az",["account","get-access-token","--output","json","--resource",t,...n],{cwd:ve.getSafeWorkingDir(),shell:true},((t,n,i)=>{r({stdout:n,stderr:i,error:t})}))}catch(t){i(t)}}))}};const ye=credentialLogger("AzureCliCredential");class AzureCliCredential{constructor(t){this.tenantId=t===null||t===void 0?void 0:t.tenantId}async getToken(t,r){const n=processMultiTenantRequest(this.tenantId,r);if(n){checkTenantId(ye,n)}const i=typeof t==="string"?t:t[0];ye.getToken.info(`Using the scope ${i}`);ensureValidScope(i,ye);const a=getScopeResource(i);let s="";const{span:c}=Q(`${this.constructor.name}.getToken`,r);try{const r=await ve.getAzureCliAccessToken(a,n);if(r.stderr){const n=r.stderr.match("(.*)az login(.*)");const i=r.stderr.match("az:(.*)not found")||r.stderr.startsWith("'az' is not recognized");if(i){const r=new CredentialUnavailableError("Azure CLI could not be found.  Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");ye.getToken.info(formatError(t,r));throw r}else if(n){const r=new CredentialUnavailableError("Please run 'az login' from a command prompt to authenticate before using this credential.");ye.getToken.info(formatError(t,r));throw r}const o=new CredentialUnavailableError(r.stderr);ye.getToken.info(formatError(t,o));throw o}else{s=r.stdout;const n=JSON.parse(s);ye.getToken.info(formatSuccess(t));const i={token:n.accessToken,expiresOnTimestamp:new Date(n.expiresOn).getTime()};return i}}catch(r){const n=new Error(r.message||"Unknown error while trying to retrieve the access token");c.setStatus({code:o.SpanStatusCode.ERROR,message:n.message});ye.getToken.info(formatError(t,n));throw n}}}const _e={execFile(t,r,n){return new Promise(((i,o)=>{H.execFile(t,r,n,((t,r,n)=>{if(Buffer.isBuffer(r)){r=r.toString("utf8")}if(Buffer.isBuffer(n)){n=n.toString("utf8")}if(n||t){o(n?new Error(n):t)}else{i(r)}}))}))}};const Ee=credentialLogger("AzurePowerShellCredential");const be=process.platform==="win32";function formatCommand(t){if(be){return`${t}.exe`}else{return t}}async function runCommands(t){const r=[];for(const n of t){const[t,...i]=n;const o=await _e.execFile(t,i,{encoding:"utf8"});r.push(o)}return r}const Se={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"};const Te={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:`To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot.`};const isLoginError=t=>t.message.match(`(.*)${Se.login}(.*)`);const isNotInstalledError=t=>t.message.match(Se.installed);const Ce=[formatCommand("pwsh")];if(be){Ce.push(formatCommand("powershell"))}class AzurePowerShellCredential{constructor(t){this.tenantId=t===null||t===void 0?void 0:t.tenantId}async getAzurePowerShellAccessToken(t,r){for(const n of[...Ce]){try{await runCommands([[n,"/?"]])}catch(t){Ce.shift();continue}let i="";if(r){i=`-TenantId "${r}"`}const o=await runCommands([[n,"-Command","Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru"],[n,"-Command",`Get-AzAccessToken ${i} -ResourceUrl "${t}" | ConvertTo-Json`]]);const a=o[1];try{return JSON.parse(a)}catch(t){throw new Error(`Unable to parse the output of PowerShell. Received output: ${a}`)}}throw new Error(`Unable to execute PowerShell. Ensure that it is installed in your system`)}async getToken(t,r={}){return trace(`${this.constructor.name}.getToken`,r,(async()=>{const n=processMultiTenantRequest(this.tenantId,r);if(n){checkTenantId(Ee,n)}const i=typeof t==="string"?t:t[0];ensureValidScope(i,Ee);Ee.getToken.info(`Using the scope ${i}`);const o=getScopeResource(i);try{const r=await this.getAzurePowerShellAccessToken(o,n);Ee.getToken.info(formatSuccess(t));return{token:r.Token,expiresOnTimestamp:new Date(r.ExpiresOn).getTime()}}catch(t){if(isNotInstalledError(t)){const t=new CredentialUnavailableError(Te.installed);Ee.getToken.info(formatError(i,t));throw t}else if(isLoginError(t)){const t=new CredentialUnavailableError(Te.login);Ee.getToken.info(formatError(i,t));throw t}const r=new CredentialUnavailableError(`${t}. ${Te.troubleshoot}`);Ee.getToken.info(formatError(i,r));throw r}}))}}class MsalClientSecret extends MsalNode{constructor(t){super(t);this.requiresConfidential=true;this.msalConfig.auth.clientSecret=t.clientSecret}async doGetToken(t,r={}){try{const n=await this.confidentialApp.acquireTokenByClientCredential({scopes:t,correlationId:r.correlationId,azureRegion:this.azureRegion,authority:r.authority,claims:r.claims});return this.handleResult(t,this.clientId,n||undefined)}catch(n){throw this.handleError(t,n,r)}}}const we=credentialLogger("ClientSecretCredential");class ClientSecretCredential{constructor(t,r,n,i={}){if(!t||!r||!n){throw new Error("ClientSecretCredential: tenantId, clientId, and clientSecret are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.")}this.msalFlow=new MsalClientSecret(Object.assign(Object.assign({},i),{logger:we,clientId:r,tenantId:t,clientSecret:n,tokenCredentialOptions:i}))}async getToken(t,r={}){return trace(`${this.constructor.name}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,r)}))}}const Ae=x.promisify(g.readFile);async function parseCertificate(t,r){const n={};n.certificateContents=t.certificate||await Ae(t.certificatePath,"utf8");if(r){n.x5c=n.certificateContents}const i=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g;const o=[];let a;do{a=i.exec(n.certificateContents);if(a){o.push(a[3])}}while(a);if(o.length===0){throw new Error("The file at the specified path does not contain a PEM-encoded certificate.")}n.thumbprint=w.createHash("sha1").update(Buffer.from(o[0],"base64")).digest("hex").toUpperCase();return n}class MsalClientCertificate extends MsalNode{constructor(t){super(t);this.requiresConfidential=true;this.configuration=t.configuration;this.sendCertificateChain=t.sendCertificateChain}async init(t){try{const t=await parseCertificate(this.configuration,this.sendCertificateChain);this.msalConfig.auth.clientCertificate={thumbprint:t.thumbprint,privateKey:t.certificateContents,x5c:t.x5c}}catch(t){this.logger.info(formatError("",t));throw t}return super.init(t)}async doGetToken(t,r={}){try{const n=await this.confidentialApp.acquireTokenByClientCredential({scopes:t,correlationId:r.correlationId,azureRegion:this.azureRegion,authority:r.authority,claims:r.claims});return this.handleResult(t,this.clientId,n||undefined)}catch(n){throw this.handleError(t,n,r)}}}const Ie="ClientCertificateCredential";const Oe=credentialLogger(Ie);class ClientCertificateCredential{constructor(t,r,n,i={}){if(!t||!r){throw new Error(`${Ie}: tenantId and clientId are required parameters.`)}const o=Object.assign({},typeof n==="string"?{certificatePath:n}:n);if(!o||!(o.certificate||o.certificatePath)){throw new Error(`${Ie}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`)}if(o.certificate&&o.certificatePath){throw new Error(`${Ie}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`)}this.msalFlow=new MsalClientCertificate(Object.assign(Object.assign({},i),{configuration:o,logger:Oe,clientId:r,tenantId:t,sendCertificateChain:i.sendCertificateChain,tokenCredentialOptions:i}))}async getToken(t,r={}){return trace(`${Ie}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,r)}))}}class MsalUsernamePassword extends MsalNode{constructor(t){super(t);this.username=t.username;this.password=t.password}async doGetToken(t,r){try{const n={scopes:t,username:this.username,password:this.password,correlationId:r===null||r===void 0?void 0:r.correlationId,authority:r===null||r===void 0?void 0:r.authority,claims:r===null||r===void 0?void 0:r.claims};const i=await this.publicApp.acquireTokenByUsernamePassword(n);return this.handleResult(t,this.clientId,i||undefined)}catch(n){throw this.handleError(t,n,r)}}}const Re=credentialLogger("UsernamePasswordCredential");class UsernamePasswordCredential{constructor(t,r,n,i,o={}){if(!t||!r||!n||!i){throw new Error("UsernamePasswordCredential: tenantId, clientId, username and password are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.")}this.msalFlow=new MsalUsernamePassword(Object.assign(Object.assign({},o),{logger:Re,clientId:r,tenantId:t,username:n,password:i,tokenCredentialOptions:o||{}}))}async getToken(t,r={}){return trace(`${this.constructor.name}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,r)}))}}const ke=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_USERNAME","AZURE_PASSWORD"];const xe="EnvironmentCredential";const Ne=credentialLogger(xe);class EnvironmentCredential{constructor(t){this._credential=undefined;const r=processEnvVars(ke).assigned.join(", ");Ne.info(`Found the following environment variables: ${r}`);const n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET;if(n){checkTenantId(Ne,n)}if(n&&i&&o){Ne.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`);this._credential=new ClientSecretCredential(n,i,o,t);return}const a=process.env.AZURE_CLIENT_CERTIFICATE_PATH;if(n&&i&&a){Ne.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${a}`);this._credential=new ClientCertificateCredential(n,i,{certificatePath:a},t);return}const s=process.env.AZURE_USERNAME;const c=process.env.AZURE_PASSWORD;if(n&&i&&s&&c){Ne.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${s}`);this._credential=new UsernamePasswordCredential(n,i,s,c,t)}}async getToken(t,r={}){return trace(`${xe}.getToken`,r,(async r=>{if(this._credential){try{const n=await this._credential.getToken(t,r);Ne.getToken.info(formatSuccess(t));return n}catch(r){const n=new AuthenticationError(400,{error:`${xe} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:r.message.toString().split("More details:").join("")});Ne.getToken.info(formatError(t,n));throw n}}throw new CredentialUnavailableError(`${xe} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)}))}}const Pe="/.default";const De="http://169.254.169.254";const Me="/metadata/identity/oauth2/token";const Le="2018-02-01";const Ue="2019-11-01";const qe="2019-07-01-preview";function mapScopesToResource(t){let r="";if(Array.isArray(t)){if(t.length!==1){return}r=t[0]}else if(typeof t==="string"){r=t}if(!r.endsWith(Pe)){return r}return r.substr(0,r.lastIndexOf(Pe))}const Be="ManagedIdentityCredential - AppServiceMSI 2017";const Fe=credentialLogger(Be);function expiresOnParser$2(t){return Date.parse(t.expires_on)}function prepareRequestOptions$5(t,r){const n=mapScopesToResource(t);if(!n){throw new Error(`${Be}: Multiple scopes are not supported.`)}const i={resource:n,"api-version":"2017-09-01"};if(r){i.clientid=r}const o=new URLSearchParams(i);if(!process.env.MSI_ENDPOINT){throw new Error(`${Be}: Missing environment variable: MSI_ENDPOINT`)}if(!process.env.MSI_SECRET){throw new Error(`${Be}: Missing environment variable: MSI_SECRET`)}return{url:`${process.env.MSI_ENDPOINT}?${o.toString()}`,method:"GET",headers:c.createHttpHeaders({Accept:"application/json",secret:process.env.MSI_SECRET})}}const je={async isAvailable(t){const r=mapScopesToResource(t);if(!r){Fe.info(`${Be}: Unavailable. Multiple scopes are not supported.`);return false}const n=process.env;const i=Boolean(n.MSI_ENDPOINT&&n.MSI_SECRET);if(!i){Fe.info(`${Be}: Unavailable. The environment variables needed are: MSI_ENDPOINT and MSI_SECRET.`)}return i},async getToken(t,r={}){const{identityClient:n,scopes:i,clientId:o}=t;Fe.info(`${Be}: Using the endpoint and the secret coming form the environment variables: MSI_ENDPOINT=${process.env.MSI_ENDPOINT} and MSI_SECRET=[REDACTED].`);const a=c.createPipelineRequest(Object.assign(Object.assign({abortSignal:r.abortSignal},prepareRequestOptions$5(i,o)),{allowInsecureConnection:true}));const s=await n.sendTokenRequest(a,expiresOnParser$2);return s&&s.accessToken||null}};const He="ManagedIdentityCredential - CloudShellMSI";const ze=credentialLogger(He);function prepareRequestOptions$4(t,r){const n=mapScopesToResource(t);if(!n){throw new Error(`${He}: Multiple scopes are not supported.`)}const i={resource:n};if(r){i.client_id=r}if(!process.env.MSI_ENDPOINT){throw new Error(`${He}: Missing environment variable: MSI_ENDPOINT`)}const o=new URLSearchParams(i);return{url:process.env.MSI_ENDPOINT,method:"POST",body:o.toString(),headers:c.createHttpHeaders({Accept:"application/json",Metadata:"true","Content-Type":"application/x-www-form-urlencoded"})}}const Ve={async isAvailable(t){const r=mapScopesToResource(t);if(!r){ze.info(`${He}: Unavailable. Multiple scopes are not supported.`);return false}const n=Boolean(process.env.MSI_ENDPOINT);if(!n){ze.info(`${He}: Unavailable. The environment variable MSI_ENDPOINT is needed.`)}return n},async getToken(t,r={}){const{identityClient:n,scopes:i,clientId:o}=t;if(o){ze.warning(`${He}: does not support user-assigned identities in the Cloud Shell environment. Argument clientId will be ignored.`)}ze.info(`${He}: Using the endpoint coming form the environment variable MSI_ENDPOINT = ${process.env.MSI_ENDPOINT}.`);const a=c.createPipelineRequest(Object.assign(Object.assign({abortSignal:r.abortSignal},prepareRequestOptions$4(i,o)),{allowInsecureConnection:true}));const s=await n.sendTokenRequest(a);return s&&s.accessToken||null}};const Ye="ManagedIdentityCredential - IMDS";const Ge=credentialLogger(Ye);function expiresOnParser$1(t){if(t.expires_on){const r=+t.expires_on*1e3;Ge.info(`${Ye}: Using expires_on: ${r} (original value: ${t.expires_on})`);return r}else{const r=Date.now()+t.expires_in*1e3;Ge.info(`${Ye}: IMDS using expires_in: ${r} (original value: ${t.expires_in})`);return r}}function prepareRequestOptions$3(t,r,n){var i;const o=mapScopesToResource(t);if(!o){throw new Error(`${Ye}: Multiple scopes are not supported.`)}const{skipQuery:a,skipMetadataHeader:s}=n||{};let u="";if(!a){const t={resource:o,"api-version":Le};if(r){t.client_id=r}const n=new URLSearchParams(t);u=`?${n.toString()}`}const l=new URL(Me,(i=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&i!==void 0?i:De);const d={Accept:"application/json",Metadata:"true"};if(s){delete d.Metadata}return{url:`${l}${u}`,method:"GET",headers:c.createHttpHeaders(d)}}const We={maxRetries:3,startDelayInMs:800,intervalIncrement:2};const $e={async isAvailable(t,r,n,i){var a,s;const u=mapScopesToResource(t);if(!u){Ge.info(`${Ye}: Unavailable. Multiple scopes are not supported.`);return false}const{span:l,updatedOptions:d}=Q("ManagedIdentityCredential-pingImdsEndpoint",i);if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST){return true}const p=prepareRequestOptions$3(u,n,{skipMetadataHeader:true,skipQuery:true});p.tracingOptions=d.tracingOptions;try{const t=c.createPipelineRequest(p);t.timeout=(s=(a=d.requestOptions)===null||a===void 0?void 0:a.timeout)!==null&&s!==void 0?s:300;t.allowInsecureConnection=true;try{Ge.info(`${Ye}: Pinging the Azure IMDS endpoint`);await r.sendRequest(t)}catch(t){if(t.name==="RestError"&&t.code===c.RestError.REQUEST_SEND_ERROR||t.name==="AbortError"||t.code==="ENETUNREACH"||t.code==="ECONNREFUSED"||t.code==="EHOSTDOWN"){Ge.info(`${Ye}: The Azure IMDS endpoint is unavailable`);l.setStatus({code:o.SpanStatusCode.ERROR,message:t.message});return false}}Ge.info(`${Ye}: The Azure IMDS endpoint is available`);return true}catch(t){Ge.info(`${Ye}: Error when creating the WebResource for the Azure IMDS endpoint: ${t.message}`);l.setStatus({code:o.SpanStatusCode.ERROR,message:t.message});throw t}finally{l.end()}},async getToken(t,r={}){const{identityClient:n,scopes:i,clientId:o}=t;Ge.info(`${Ye}: Using the Azure IMDS endpoint coming from the environment variable MSI_ENDPOINT=${process.env.MSI_ENDPOINT}, and using the cloud shell to proceed with the authentication.`);let a=We.startDelayInMs;for(let t=0;t<We.maxRetries;t++){try{const t=c.createPipelineRequest(Object.assign(Object.assign({abortSignal:r.abortSignal},prepareRequestOptions$3(i,o)),{allowInsecureConnection:true}));const a=await n.sendTokenRequest(t,expiresOnParser$1);return a&&a.accessToken||null}catch(t){if(t.statusCode===404){await s.delay(a);a*=We.intervalIncrement;continue}throw t}}throw new AuthenticationError(404,`${Ye}: Failed to retrieve IMDS token after ${We.maxRetries} retries.`)}};const Ke="ManagedIdentityCredential - Azure Arc MSI";const Je=credentialLogger(Ke);function prepareRequestOptions$2(t){const r=mapScopesToResource(t);if(!r){throw new Error(`${Ke}: Multiple scopes are not supported.`)}const n={resource:r,"api-version":Ue};const i=new URLSearchParams(n);if(!process.env.IDENTITY_ENDPOINT){throw new Error(`${Ke}: Missing environment variable: IDENTITY_ENDPOINT`)}return c.createPipelineRequest({url:`${process.env.IDENTITY_ENDPOINT}?${i.toString()}`,method:"GET",headers:c.createHttpHeaders({Accept:"application/json",Metadata:"true"})})}function readFileAsync$1(t,r){return new Promise(((n,i)=>g.readFile(t,r,((t,r)=>{if(t){i(t)}n(r)}))))}async function filePathRequest(t,r){const n=await t.sendRequest(c.createPipelineRequest(r));if(n.status!==401){let t="";if(n.bodyAsText){t=` Response: ${n.bodyAsText}`}throw new AuthenticationError(n.status,`${Ke}: To authenticate with Azure Arc MSI, status code 401 is expected on the first request. ${t}`)}const i=n.headers.get("www-authenticate")||"";try{return i.split("=").slice(1)[0]}catch(t){throw Error(`Invalid www-authenticate header format: ${i}`)}}const Ze={async isAvailable(t){const r=mapScopesToResource(t);if(!r){Je.info(`${Ke}: Unavailable. Multiple scopes are not supported.`);return false}const n=Boolean(process.env.IMDS_ENDPOINT&&process.env.IDENTITY_ENDPOINT);if(!n){Je.info(`${Ke}: The environment variables needed are: IMDS_ENDPOINT and IDENTITY_ENDPOINT`)}return n},async getToken(t,r={}){var n;const{identityClient:i,scopes:o,clientId:a}=t;Je.info(`${Ke}: Authenticating.`);if(a){throw new Error(`${Ke}: User assigned identity is not supported by the Azure Arc Managed Identity Endpoint. To authenticate with the system assigned identity, omit the client id when constructing the ManagedIdentityCredential, or if authenticating with the DefaultAzureCredential ensure the AZURE_CLIENT_ID environment variable is not set.`)}const s=Object.assign(Object.assign({disableJsonStringifyOnBody:true,deserializationMapper:undefined,abortSignal:r.abortSignal},prepareRequestOptions$2(o)),{allowInsecureConnection:true});const u=await filePathRequest(i,s);if(!u){throw new Error(`${Ke}: Failed to find the token file.`)}const l=await readFileAsync$1(u,{encoding:"utf-8"});(n=s.headers)===null||n===void 0?void 0:n.set("Authorization",`Basic ${l}`);const d=c.createPipelineRequest(Object.assign(Object.assign({},s),{allowInsecureConnection:true}));const p=await i.sendTokenRequest(d);return p&&p.accessToken||null}};const Xe="ManagedIdentityCredential - Token Exchange";const Qe=credentialLogger(Xe);const et=x.promisify(q["default"].readFile);function prepareRequestOptions$1(t,r,n){var i;const o={scope:Array.isArray(t)?t.join(" "):t,client_assertion:r,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",client_id:n,grant_type:"client_credentials"};const a=new URLSearchParams(o);const s=new URL(`${process.env.AZURE_TENANT_ID}/oauth2/v2.0/token`,(i=process.env.AZURE_AUTHORITY_HOST)!==null&&i!==void 0?i:X);return{url:s.toString(),method:"POST",body:a.toString(),headers:c.createHttpHeaders({Accept:"application/json"})}}function tokenExchangeMsi(){const t=process.env.AZURE_FEDERATED_TOKEN_FILE;let r=undefined;let n=undefined;async function readAssertion(){if(n!==undefined&&Date.now()-n>=1e3*60*5){r=undefined}if(!r){const i=await et(t,"utf8");const o=i.trim();if(!o){throw new Error(`No content on the file ${t}, indicated by the environment variable AZURE_FEDERATED_TOKEN_FILE`)}else{r=o;n=Date.now()}}return r}return{async isAvailable(r,n,i){const o=process.env;const a=Boolean((i||o.AZURE_CLIENT_ID)&&o.AZURE_TENANT_ID&&t);if(!a){Qe.info(`${Xe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`)}return a},async getToken(r,n={}){const{identityClient:i,scopes:o,clientId:a}=r;Qe.info(`${Xe}: Using the client assertion coming from environment variables.`);let s;try{s=await readAssertion()}catch(r){throw new Error(`${Xe}: Failed to read ${t}, indicated by the environment variable AZURE_FEDERATED_TOKEN_FILE`)}const u=c.createPipelineRequest(Object.assign(Object.assign({abortSignal:n.abortSignal},prepareRequestOptions$1(o,s,a||process.env.AZURE_CLIENT_ID)),{allowInsecureConnection:true}));const l=await i.sendTokenRequest(u);return l&&l.accessToken||null}}}const tt="ManagedIdentityCredential - Fabric MSI";const rt=credentialLogger(tt);function expiresOnParser(t){return Number(t.expires_on)}function prepareRequestOptions(t,r){const n=mapScopesToResource(t);if(!n){throw new Error(`${tt}: Multiple scopes are not supported.`)}const i={resource:n,"api-version":qe};if(r){i.client_id=r}const o=new URLSearchParams(i);if(!process.env.IDENTITY_ENDPOINT){throw new Error("Missing environment variable: IDENTITY_ENDPOINT")}if(!process.env.IDENTITY_HEADER){throw new Error("Missing environment variable: IDENTITY_HEADER")}return{url:`${process.env.IDENTITY_ENDPOINT}?${o.toString()}`,method:"GET",headers:c.createHttpHeaders({Accept:"application/json",secret:process.env.IDENTITY_HEADER})}}const nt={async isAvailable(t){const r=mapScopesToResource(t);if(!r){rt.info(`${tt}: Unavailable. Multiple scopes are not supported.`);return false}const n=process.env;const i=Boolean(n.IDENTITY_ENDPOINT&&n.IDENTITY_HEADER&&n.IDENTITY_SERVER_THUMBPRINT);if(!i){rt.info(`${tt}: Unavailable. The environment variables needed are: IDENTITY_ENDPOINT, IDENTITY_HEADER and IDENTITY_SERVER_THUMBPRINT`)}return i},async getToken(t,r={}){const{scopes:n,identityClient:i,clientId:o}=t;rt.info([`${tt}:`,"Using the endpoint and the secret coming from the environment variables:",`IDENTITY_ENDPOINT=${process.env.IDENTITY_ENDPOINT},`,"IDENTITY_HEADER=[REDACTED] and","IDENTITY_SERVER_THUMBPRINT=[REDACTED]."].join(" "));const a=c.createPipelineRequest(Object.assign({abortSignal:r.abortSignal},prepareRequestOptions(n,o)));a.agent=new z["default"].Agent({rejectUnauthorized:false});const s=await i.sendTokenRequest(a,expiresOnParser);return s&&s.accessToken||null}};const it=credentialLogger("ManagedIdentityCredential");class ManagedIdentityCredential{constructor(t,r){this.isEndpointUnavailable=null;let n;if(typeof t==="string"){this.clientId=t;n=r}else{n=t}this.identityClient=new IdentityClient(n);this.isAvailableIdentityClient=new IdentityClient(Object.assign(Object.assign({},n),{retryOptions:{maxRetries:0}}))}async cachedAvailableMSI(t,r,n){if(this.cachedMSI){return this.cachedMSI}const i=[nt,je,Ve,Ze,tokenExchangeMsi(),$e];for(const o of i){if(await o.isAvailable(t,this.isAvailableIdentityClient,r,n)){this.cachedMSI=o;return o}}throw new CredentialUnavailableError(`${ManagedIdentityCredential.name} - No MSI credential available`)}async authenticateManagedIdentity(t,r,n){const{span:i,updatedOptions:a}=Q(`${ManagedIdentityCredential.name}.authenticateManagedIdentity`,n);try{const n=await this.cachedAvailableMSI(t,r,a);return n.getToken({identityClient:this.identityClient,scopes:t,clientId:r},a)}catch(t){i.setStatus({code:o.SpanStatusCode.ERROR,message:t.message});throw t}finally{i.end()}}async getToken(t,r){let n=null;const{span:i,updatedOptions:a}=Q(`${ManagedIdentityCredential.name}.getToken`,r);try{if(this.isEndpointUnavailable!==true){n=await this.authenticateManagedIdentity(t,this.clientId,a);if(n===null){this.isEndpointUnavailable=true;const r=new CredentialUnavailableError("The managed identity endpoint was reached, yet no tokens were received.");it.getToken.info(formatError(t,r));throw r}this.isEndpointUnavailable=false}else{const r=new CredentialUnavailableError("The managed identity endpoint is not currently available");it.getToken.info(formatError(t,r));throw r}it.getToken.info(formatSuccess(t));return n}catch(r){if(r.name==="AuthenticationRequiredError"){throw r}i.setStatus({code:o.SpanStatusCode.ERROR,message:r.message});if(r.code==="ENETUNREACH"){const n=new CredentialUnavailableError(`${ManagedIdentityCredential.name}: Unavailable. Network unreachable. Message: ${r.message}`);it.getToken.info(formatError(t,n));throw n}if(r.code==="EHOSTUNREACH"){const n=new CredentialUnavailableError(`${ManagedIdentityCredential.name}: Unavailable. No managed identity endpoint found. Message: ${r.message}`);it.getToken.info(formatError(t,n));throw n}if(r.statusCode===400){throw new CredentialUnavailableError(`${ManagedIdentityCredential.name}: The managed identity endpoint is indicating there's no available identity. Message: ${r.message}`)}if(r.statusCode===undefined){throw new CredentialUnavailableError(`${ManagedIdentityCredential.name}: Authentication failed. Message ${r.message}`)}throw new AuthenticationError(r.statusCode,{error:`${ManagedIdentityCredential.name} authentication failed.`,error_description:r.message})}finally{i.end()}}}class DefaultManagedIdentityCredential extends ManagedIdentityCredential{constructor(t){var r;const n=(r=t===null||t===void 0?void 0:t.managedIdentityClientId)!==null&&r!==void 0?r:process.env.AZURE_CLIENT_ID;if(n!==undefined){super(n,t)}else{super(t)}}}const ot=[EnvironmentCredential,DefaultManagedIdentityCredential,VisualStudioCodeCredential,AzureCliCredential,AzurePowerShellCredential];class DefaultAzureCredential extends ChainedTokenCredential{constructor(t){super(...ot.map((r=>new r(t))));this.UnavailableMessage="DefaultAzureCredential => failed to retrieve a token from the included credentials. To troubleshoot, visit https://aka.ms/azsdk/js/identity/defaultazurecredential/troubleshoot."}}const at={open:Y["default"]};class MsalOpenBrowser extends MsalNode{constructor(t){super(t);this.logger=credentialLogger("Node.js MSAL Open Browser");this.redirectUri=t.redirectUri;this.loginHint=t.loginHint;const r=new URL(this.redirectUri);this.port=parseInt(r.port);if(isNaN(this.port)){this.port=80}this.hostname=r.hostname}async acquireTokenByCode(t){return this.publicApp.acquireTokenByCode(t)}doGetToken(t,r){return new Promise(((n,i)=>{const o=[];const requestListener=(o,a)=>{var s;if(!o.url){i(new Error(`Interactive Browser Authentication Error "Did not receive token with a valid expiration"`));return}let c;try{c=new URL(o.url,this.redirectUri)}catch(t){i(new Error(`Interactive Browser Authentication Error "Did not receive token with a valid expiration"`));return}const u={code:c.searchParams.get("code"),redirectUri:this.redirectUri,scopes:t,authority:r===null||r===void 0?void 0:r.authority,codeVerifier:(s=this.pkceCodes)===null||s===void 0?void 0:s.verifier};this.acquireTokenByCode(u).then((r=>{if(r===null||r===void 0?void 0:r.account){this.account=msalToPublic(this.clientId,r.account)}const o=`Authentication Complete. You can close the browser and return to the application.`;if(r&&r.expiresOn){const i=r===null||r===void 0?void 0:r.expiresOn.valueOf();a.writeHead(200);a.end(o);this.logger.getToken.info(formatSuccess(t));n({expiresOnTimestamp:i,token:r.accessToken})}else{const r=formatError(t,`${c.searchParams.get("error")}. ${c.searchParams.get("error_description")}`);a.writeHead(500);a.end(r);this.logger.getToken.info(r);i(new Error(`Interactive Browser Authentication Error "Did not receive token with a valid expiration"`))}cleanup();return})).catch((()=>{const r=formatError(t,`${c.searchParams.get("error")}. ${c.searchParams.get("error_description")}`);a.writeHead(500);a.end(r);this.logger.getToken.info(r);i(new Error(`Interactive Browser Authentication Error "Did not receive token with a valid expiration"`));cleanup()}))};const a=V["default"].createServer(requestListener);const s=G["default"](a);const c=a.listen(this.port,this.hostname,(()=>this.logger.info(`InteractiveBrowserCredential listening on port ${this.port}!`)));function cleanup(){if(c){c.close()}for(const t of o){t.destroy()}if(s){s.close();s.stop()}}a.on("connection",(t=>o.push(t)));a.on("error",(t=>{cleanup();const r=t.code;if(r==="EACCES"||r==="EADDRINUSE"){i(new CredentialUnavailableError([`InteractiveBrowserCredential: Access denied to port ${this.port}.`,`Try sending a redirect URI with a different port, as follows:`,'`new InteractiveBrowserCredential({ redirectUri: "http://localhost:1337" })`'].join(" ")))}else{i(new CredentialUnavailableError(`InteractiveBrowserCredential: Failed to start the necessary web server. Error: ${t.message}`))}}));a.on("listening",(()=>{const n=this.openAuthCodeUrl(t,r);const o=r===null||r===void 0?void 0:r.abortSignal;if(o){o.addEventListener("abort",(()=>{cleanup();i(new Error("Aborted"))}))}n.then().catch((t=>{cleanup();i(t)}))}))}))}async openAuthCodeUrl(t,r){const n=new L.CryptoProvider;this.pkceCodes=await n.generatePkceCodes();const i={scopes:t,correlationId:r===null||r===void 0?void 0:r.correlationId,redirectUri:this.redirectUri,authority:r===null||r===void 0?void 0:r.authority,claims:r===null||r===void 0?void 0:r.claims,loginHint:this.loginHint,codeChallenge:this.pkceCodes.challenge,codeChallengeMethod:"S256"};const o=await this.publicApp.getAuthCodeUrl(i);try{await at.open(o,{wait:true})}catch(t){throw new CredentialUnavailableError(`InteractiveBrowserCredential: Could not open a browser window. Error: ${t.message}`)}}}const st=credentialLogger("InteractiveBrowserCredential");class InteractiveBrowserCredential{constructor(t={}){const r=typeof t.redirectUri==="function"?t.redirectUri():t.redirectUri||"http://localhost";this.msalFlow=new MsalOpenBrowser(Object.assign(Object.assign({},t),{tokenCredentialOptions:t,logger:st,redirectUri:r}));this.disableAutomaticAuthentication=t===null||t===void 0?void 0:t.disableAutomaticAuthentication}async getToken(t,r={}){return trace(`${this.constructor.name}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,Object.assign(Object.assign({},r),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}async authenticate(t,r={}){return trace(`${this.constructor.name}.authenticate`,r,(async r=>{const n=Array.isArray(t)?t:[t];await this.msalFlow.getToken(n,r);return this.msalFlow.getActiveAccount()}))}}class MsalDeviceCode extends MsalNode{constructor(t){super(t);this.userPromptCallback=t.userPromptCallback}async doGetToken(t,r){try{const n={deviceCodeCallback:this.userPromptCallback,scopes:t,cancel:false,correlationId:r===null||r===void 0?void 0:r.correlationId,authority:r===null||r===void 0?void 0:r.authority,claims:r===null||r===void 0?void 0:r.claims};const i=this.publicApp.acquireTokenByDeviceCode(n);const o=await this.withCancellation(i,r===null||r===void 0?void 0:r.abortSignal,(()=>{n.cancel=true}));return this.handleResult(t,this.clientId,o||undefined)}catch(n){throw this.handleError(t,n,r)}}}const ct=credentialLogger("DeviceCodeCredential");function defaultDeviceCodePromptCallback(t){console.log(t.message)}class DeviceCodeCredential{constructor(t){this.msalFlow=new MsalDeviceCode(Object.assign(Object.assign({},t),{logger:ct,userPromptCallback:(t===null||t===void 0?void 0:t.userPromptCallback)||defaultDeviceCodePromptCallback,tokenCredentialOptions:t||{}}));this.disableAutomaticAuthentication=t===null||t===void 0?void 0:t.disableAutomaticAuthentication}async getToken(t,r={}){return trace(`${this.constructor.name}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,Object.assign(Object.assign({},r),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}async authenticate(t,r={}){return trace(`${this.constructor.name}.authenticate`,r,(async r=>{const n=Array.isArray(t)?t:[t];await this.msalFlow.getToken(n,r);return this.msalFlow.getActiveAccount()}))}}class MsalAuthorizationCode extends MsalNode{constructor(t){super(t);this.logger=credentialLogger("Node.js MSAL Authorization Code");this.redirectUri=t.redirectUri;this.authorizationCode=t.authorizationCode;if(t.clientSecret){this.msalConfig.auth.clientSecret=t.clientSecret}}async getAuthCodeUrl(t){await this.init();return this.confidentialApp.getAuthCodeUrl(t)}async doGetToken(t,r){var n;try{const i=await((n=this.confidentialApp)===null||n===void 0?void 0:n.acquireTokenByCode({scopes:t,redirectUri:this.redirectUri,code:this.authorizationCode,correlationId:r===null||r===void 0?void 0:r.correlationId,authority:r===null||r===void 0?void 0:r.authority,claims:r===null||r===void 0?void 0:r.claims}));return this.handleResult(t,this.clientId,i||undefined)}catch(n){throw this.handleError(t,n,r)}}}const ut=credentialLogger("AuthorizationCodeCredential");class AuthorizationCodeCredential{constructor(t,r,n,i,o,a){checkTenantId(ut,t);let s=n;if(typeof o==="string"){this.authorizationCode=i;this.redirectUri=o}else{this.authorizationCode=n;this.redirectUri=i;s=undefined;a=o}this.msalFlow=new MsalAuthorizationCode(Object.assign(Object.assign({},a),{clientSecret:s,clientId:r,tokenCredentialOptions:a||{},logger:ut,redirectUri:this.redirectUri,authorizationCode:this.authorizationCode}))}async getToken(t,r={}){return trace(`${this.constructor.name}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,Object.assign(Object.assign({},r),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}}class MsalOnBehalfOf extends MsalNode{constructor(t){super(t);this.logger.info("Initialized MSAL's On-Behalf-Of flow");this.requiresConfidential=true;this.userAssertionToken=t.userAssertionToken;this.certificatePath=t.certificatePath;this.sendCertificateChain=t.sendCertificateChain;this.clientSecret=t.clientSecret}async init(t){if(this.certificatePath){try{const t=await parseCertificate({certificatePath:this.certificatePath},this.sendCertificateChain);this.msalConfig.auth.clientCertificate={thumbprint:t.thumbprint,privateKey:t.certificateContents,x5c:t.x5c}}catch(t){this.logger.info(formatError("",t));throw t}}else{this.msalConfig.auth.clientSecret=this.clientSecret}return super.init(t)}async doGetToken(t,r={}){try{const n=await this.confidentialApp.acquireTokenOnBehalfOf({scopes:t,correlationId:r.correlationId,authority:r.authority,claims:r.claims,oboAssertion:this.userAssertionToken});return this.handleResult(t,this.clientId,n||undefined)}catch(n){throw this.handleError(t,n,r)}}}const ft="OnBehalfOfCredential";const dt=credentialLogger(ft);class OnBehalfOfCredential{constructor(t){this.options=t;const{clientSecret:r}=t;const{certificatePath:n}=t;const{tenantId:i,clientId:o,userAssertionToken:a}=t;if(!i||!o||!(r||n)||!a){throw new Error(`${ft}: tenantId, clientId, clientSecret (or certificatePath) and userAssertionToken are required parameters.`)}this.msalFlow=new MsalOnBehalfOf(Object.assign(Object.assign({},this.options),{logger:dt,tokenCredentialOptions:this.options}))}async getToken(t,r={}){return trace(`${ft}.getToken`,r,(async r=>{const n=Array.isArray(t)?t:[t];return this.msalFlow.getToken(n,r)}))}}function getDefaultAzureCredential(){return new DefaultAzureCredential}r.AggregateAuthenticationError=AggregateAuthenticationError;r.AggregateAuthenticationErrorName=K;r.AuthenticationError=AuthenticationError;r.AuthenticationErrorName=$;r.AuthenticationRequiredError=AuthenticationRequiredError;r.AuthorizationCodeCredential=AuthorizationCodeCredential;r.AzureCliCredential=AzureCliCredential;r.AzurePowerShellCredential=AzurePowerShellCredential;r.ChainedTokenCredential=ChainedTokenCredential;r.ClientCertificateCredential=ClientCertificateCredential;r.ClientSecretCredential=ClientSecretCredential;r.CredentialUnavailableError=CredentialUnavailableError;r.CredentialUnavailableErrorName=W;r.DefaultAzureCredential=DefaultAzureCredential;r.DeviceCodeCredential=DeviceCodeCredential;r.EnvironmentCredential=EnvironmentCredential;r.InteractiveBrowserCredential=InteractiveBrowserCredential;r.ManagedIdentityCredential=ManagedIdentityCredential;r.OnBehalfOfCredential=OnBehalfOfCredential;r.UsernamePasswordCredential=UsernamePasswordCredential;r.VisualStudioCodeCredential=VisualStudioCodeCredential;r.deserializeAuthenticationRecord=deserializeAuthenticationRecord;r.getDefaultAzureCredential=getDefaultAzureCredential;r.logger=ee;r.serializeAuthenticationRecord=serializeAuthenticationRecord;r.useIdentityPlugin=useIdentityPlugin},57176:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});Object.defineProperty(r,"v1",{enumerable:true,get:function(){return i.default}});Object.defineProperty(r,"v3",{enumerable:true,get:function(){return o.default}});Object.defineProperty(r,"v4",{enumerable:true,get:function(){return a.default}});Object.defineProperty(r,"v5",{enumerable:true,get:function(){return s.default}});Object.defineProperty(r,"NIL",{enumerable:true,get:function(){return c.default}});Object.defineProperty(r,"version",{enumerable:true,get:function(){return u.default}});Object.defineProperty(r,"validate",{enumerable:true,get:function(){return l.default}});Object.defineProperty(r,"stringify",{enumerable:true,get:function(){return d.default}});Object.defineProperty(r,"parse",{enumerable:true,get:function(){return p.default}});var i=_interopRequireDefault(n(63236));var o=_interopRequireDefault(n(16474));var a=_interopRequireDefault(n(37945));var s=_interopRequireDefault(n(65491));var c=_interopRequireDefault(n(72384));var u=_interopRequireDefault(n(88748));var l=_interopRequireDefault(n(99922));var d=_interopRequireDefault(n(26430));var p=_interopRequireDefault(n(21682));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}},30633:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function md5(t){if(Array.isArray(t)){t=Buffer.from(t)}else if(typeof t==="string"){t=Buffer.from(t,"utf8")}return i.default.createHash("md5").update(t).digest()}var o=md5;r["default"]=o},72384:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var n="00000000-0000-0000-0000-000000000000";r["default"]=n},21682:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(99922));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function parse(t){if(!(0,i.default)(t)){throw TypeError("Invalid UUID")}let r;const n=new Uint8Array(16);n[0]=(r=parseInt(t.slice(0,8),16))>>>24;n[1]=r>>>16&255;n[2]=r>>>8&255;n[3]=r&255;n[4]=(r=parseInt(t.slice(9,13),16))>>>8;n[5]=r&255;n[6]=(r=parseInt(t.slice(14,18),16))>>>8;n[7]=r&255;n[8]=(r=parseInt(t.slice(19,23),16))>>>8;n[9]=r&255;n[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255;n[11]=r/4294967296&255;n[12]=r>>>24&255;n[13]=r>>>16&255;n[14]=r>>>8&255;n[15]=r&255;return n}var o=parse;r["default"]=o},97866:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;r["default"]=n},96568:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=rng;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=new Uint8Array(256);let a=o.length;function rng(){if(a>o.length-16){i.default.randomFillSync(o);a=0}return o.slice(a,a+=16)}},82955:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function sha1(t){if(Array.isArray(t)){t=Buffer.from(t)}else if(typeof t==="string"){t=Buffer.from(t,"utf8")}return i.default.createHash("sha1").update(t).digest()}var o=sha1;r["default"]=o},26430:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(99922));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=[];for(let t=0;t<256;++t){o.push((t+256).toString(16).substr(1))}function stringify(t,r=0){const n=(o[t[r+0]]+o[t[r+1]]+o[t[r+2]]+o[t[r+3]]+"-"+o[t[r+4]]+o[t[r+5]]+"-"+o[t[r+6]]+o[t[r+7]]+"-"+o[t[r+8]]+o[t[r+9]]+"-"+o[t[r+10]]+o[t[r+11]]+o[t[r+12]]+o[t[r+13]]+o[t[r+14]]+o[t[r+15]]).toLowerCase();if(!(0,i.default)(n)){throw TypeError("Stringified UUID is invalid")}return n}var a=stringify;r["default"]=a},63236:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(96568));var o=_interopRequireDefault(n(26430));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}let a;let s;let c=0;let u=0;function v1(t,r,n){let l=r&&n||0;const d=r||new Array(16);t=t||{};let p=t.node||a;let g=t.clockseq!==undefined?t.clockseq:s;if(p==null||g==null){const r=t.random||(t.rng||i.default)();if(p==null){p=a=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]}if(g==null){g=s=(r[6]<<8|r[7])&16383}}let v=t.msecs!==undefined?t.msecs:Date.now();let E=t.nsecs!==undefined?t.nsecs:u+1;const S=v-c+(E-u)/1e4;if(S<0&&t.clockseq===undefined){g=g+1&16383}if((S<0||v>c)&&t.nsecs===undefined){E=0}if(E>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}c=v;u=E;s=g;v+=122192928e5;const w=((v&268435455)*1e4+E)%4294967296;d[l++]=w>>>24&255;d[l++]=w>>>16&255;d[l++]=w>>>8&255;d[l++]=w&255;const x=v/4294967296*1e4&268435455;d[l++]=x>>>8&255;d[l++]=x&255;d[l++]=x>>>24&15|16;d[l++]=x>>>16&255;d[l++]=g>>>8|128;d[l++]=g&255;for(let t=0;t<6;++t){d[l+t]=p[t]}return r||(0,o.default)(d)}var l=v1;r["default"]=l},16474:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(87328));var o=_interopRequireDefault(n(30633));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=(0,i.default)("v3",48,o.default);var s=a;r["default"]=s},87328:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=_default;r.URL=r.DNS=void 0;var i=_interopRequireDefault(n(26430));var o=_interopRequireDefault(n(21682));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function stringToBytes(t){t=unescape(encodeURIComponent(t));const r=[];for(let n=0;n<t.length;++n){r.push(t.charCodeAt(n))}return r}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=s;function _default(t,r,n){function generateUUID(t,a,s,c){if(typeof t==="string"){t=stringToBytes(t)}if(typeof a==="string"){a=(0,o.default)(a)}if(a.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let u=new Uint8Array(16+t.length);u.set(a);u.set(t,a.length);u=n(u);u[6]=u[6]&15|r;u[8]=u[8]&63|128;if(s){c=c||0;for(let t=0;t<16;++t){s[c+t]=u[t]}return s}return(0,i.default)(u)}try{generateUUID.name=t}catch(t){}generateUUID.DNS=a;generateUUID.URL=s;return generateUUID}},37945:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(96568));var o=_interopRequireDefault(n(26430));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function v4(t,r,n){t=t||{};const a=t.random||(t.rng||i.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(r){n=n||0;for(let t=0;t<16;++t){r[n+t]=a[t]}return r}return(0,o.default)(a)}var a=v4;r["default"]=a},65491:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(87328));var o=_interopRequireDefault(n(82955));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=(0,i.default)("v5",80,o.default);var s=a;r["default"]=s},99922:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(97866));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function validate(t){return typeof t==="string"&&i.default.test(t)}var o=validate;r["default"]=o},88748:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(99922));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function version(t){if(!(0,i.default)(t)){throw TypeError("Invalid UUID")}return parseInt(t.substr(14,1),16)}var o=version;r["default"]=o},3233:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});function _interopDefault(t){return t&&typeof t==="object"&&"default"in t?t["default"]:t}var i=_interopDefault(n(73837));var o=n(22037);function log(t,...r){process.stderr.write(`${i.format(t,...r)}${o.EOL}`)}const a=typeof process!=="undefined"&&process.env&&process.env.DEBUG||undefined;let s;let c=[];let u=[];const l=[];if(a){enable(a)}const d=Object.assign((t=>createDebugger(t)),{enable:enable,enabled:enabled,disable:disable,log:log});function enable(t){s=t;c=[];u=[];const r=/\*/g;const n=t.split(",").map((t=>t.trim().replace(r,".*?")));for(const t of n){if(t.startsWith("-")){u.push(new RegExp(`^${t.substr(1)}$`))}else{c.push(new RegExp(`^${t}$`))}}for(const t of l){t.enabled=enabled(t.namespace)}}function enabled(t){if(t.endsWith("*")){return true}for(const r of u){if(r.test(t)){return false}}for(const r of c){if(r.test(t)){return true}}return false}function disable(){const t=s||"";enable("");return t}function createDebugger(t){const r=Object.assign(debug,{enabled:enabled(t),destroy:destroy,log:d.log,namespace:t,extend:extend});function debug(...n){if(!r.enabled){return}if(n.length>0){n[0]=`${t} ${n[0]}`}r.log(...n)}l.push(r);return r}function destroy(){const t=l.indexOf(this);if(t>=0){l.splice(t,1);return true}return false}function extend(t){const r=createDebugger(`${this.namespace}:${t}`);r.log=this.log;return r}const p=new Set;const g=typeof process!=="undefined"&&process.env&&process.env.AZURE_LOG_LEVEL||undefined;let v;const E=d("azure");E.log=(...t)=>{d.log(...t)};const S=["verbose","info","warning","error"];if(g){if(isAzureLogLevel(g)){setLogLevel(g)}else{console.error(`AZURE_LOG_LEVEL set to unknown log level '${g}'; logging is not enabled. Acceptable values: ${S.join(", ")}.`)}}function setLogLevel(t){if(t&&!isAzureLogLevel(t)){throw new Error(`Unknown log level '${t}'. Acceptable values: ${S.join(",")}`)}v=t;const r=[];for(const t of p){if(shouldEnable(t)){r.push(t.namespace)}}d.enable(r.join(","))}function getLogLevel(){return v}const w={verbose:400,info:300,warning:200,error:100};function createClientLogger(t){const r=E.extend(t);patchLogMethod(E,r);return{error:createLogger(r,"error"),warning:createLogger(r,"warning"),info:createLogger(r,"info"),verbose:createLogger(r,"verbose")}}function patchLogMethod(t,r){r.log=(...r)=>{t.log(...r)}}function createLogger(t,r){const n=Object.assign(t.extend(r),{level:r});patchLogMethod(t,n);if(shouldEnable(n)){const t=d.disable();d.enable(t+","+n.namespace)}p.add(n);return n}function shouldEnable(t){if(v&&w[t.level]<=w[v]){return true}else{return false}}function isAzureLogLevel(t){return S.includes(t)}r.AzureLogger=E;r.createClientLogger=createClientLogger;r.getLogLevel=getLogLevel;r.setLogLevel=setLogLevel},45728:(t,r)=>{"use strict";
/*! @azure/msal-common v4.5.1 2021-08-02 */"use strict";Object.defineProperty(r,"__esModule",{value:true});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,r){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n))t[n]=r[n]};return extendStatics(t,r)};function __extends(t,r){extendStatics(t,r);function __(){this.constructor=t}t.prototype=r===null?Object.create(r):(__.prototype=r.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o))t[o]=r[o]}return t};return __assign.apply(this,arguments)};function __awaiter(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))}function __generator(t,r){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,s;return s={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function verb(t){return function(r){return step([t,r])}}function step(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(a=s[0]&2?o["return"]:s[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;if(o=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1];a=s;break}if(a&&n.label<a[2]){n.label=a[2];n.ops.push(s);break}if(a[2])n.ops.pop();n.trys.pop();continue}s=r.call(t,n)}catch(t){s=[6,t];o=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}}function __spreadArrays(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var i=Array(t),o=0,r=0;r<n;r++)for(var a=arguments[r],s=0,c=a.length;s<c;s++,o++)i[o]=a[s];return i}var n={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",ADFS:"adfs",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]};var i=[n.OPENID_SCOPE,n.PROFILE_SCOPE,n.OFFLINE_ACCESS_SCOPE];var o=__spreadArrays(i,[n.EMAIL_SCOPE]);var a;(function(t){t["CONTENT_TYPE"]="Content-Type";t["RETRY_AFTER"]="Retry-After";t["CCS_HEADER"]="X-AnchorMailbox"})(a||(a={}));r.PersistentCacheKeys=void 0;(function(t){t["ID_TOKEN"]="idtoken";t["CLIENT_INFO"]="client.info";t["ADAL_ID_TOKEN"]="adal.idtoken";t["ERROR"]="error";t["ERROR_DESC"]="error.description";t["ACTIVE_ACCOUNT"]="active-account"})(r.PersistentCacheKeys||(r.PersistentCacheKeys={}));var s;(function(t){t["COMMON"]="common";t["ORGANIZATIONS"]="organizations";t["CONSUMERS"]="consumers"})(s||(s={}));var c;(function(t){t["CLIENT_ID"]="client_id";t["REDIRECT_URI"]="redirect_uri";t["RESPONSE_TYPE"]="response_type";t["RESPONSE_MODE"]="response_mode";t["GRANT_TYPE"]="grant_type";t["CLAIMS"]="claims";t["SCOPE"]="scope";t["ERROR"]="error";t["ERROR_DESCRIPTION"]="error_description";t["ACCESS_TOKEN"]="access_token";t["ID_TOKEN"]="id_token";t["REFRESH_TOKEN"]="refresh_token";t["EXPIRES_IN"]="expires_in";t["STATE"]="state";t["NONCE"]="nonce";t["PROMPT"]="prompt";t["SESSION_STATE"]="session_state";t["CLIENT_INFO"]="client_info";t["CODE"]="code";t["CODE_CHALLENGE"]="code_challenge";t["CODE_CHALLENGE_METHOD"]="code_challenge_method";t["CODE_VERIFIER"]="code_verifier";t["CLIENT_REQUEST_ID"]="client-request-id";t["X_CLIENT_SKU"]="x-client-SKU";t["X_CLIENT_VER"]="x-client-VER";t["X_CLIENT_OS"]="x-client-OS";t["X_CLIENT_CPU"]="x-client-CPU";t["X_CLIENT_CURR_TELEM"]="x-client-current-telemetry";t["X_CLIENT_LAST_TELEM"]="x-client-last-telemetry";t["X_MS_LIB_CAPABILITY"]="x-ms-lib-capability";t["POST_LOGOUT_URI"]="post_logout_redirect_uri";t["ID_TOKEN_HINT"]="id_token_hint";t["DEVICE_CODE"]="device_code";t["CLIENT_SECRET"]="client_secret";t["CLIENT_ASSERTION"]="client_assertion";t["CLIENT_ASSERTION_TYPE"]="client_assertion_type";t["TOKEN_TYPE"]="token_type";t["REQ_CNF"]="req_cnf";t["OBO_ASSERTION"]="assertion";t["REQUESTED_TOKEN_USE"]="requested_token_use";t["ON_BEHALF_OF"]="on_behalf_of";t["FOCI"]="foci";t["CCS_HEADER"]="X-AnchorMailbox"})(c||(c={}));var u;(function(t){t["ACCESS_TOKEN"]="access_token";t["XMS_CC"]="xms_cc"})(u||(u={}));var l={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create"};var d;(function(t){t["ACCOUNT"]="account";t["SID"]="sid";t["LOGIN_HINT"]="login_hint";t["ID_TOKEN"]="id_token";t["DOMAIN_HINT"]="domain_hint";t["ORGANIZATIONS"]="organizations";t["CONSUMERS"]="consumers";t["ACCOUNT_ID"]="accountIdentifier";t["HOMEACCOUNT_ID"]="homeAccountIdentifier"})(d||(d={}));[d.SID,d.LOGIN_HINT];var p={PLAIN:"plain",S256:"S256"};r.ResponseMode=void 0;(function(t){t["QUERY"]="query";t["FRAGMENT"]="fragment";t["FORM_POST"]="form_post"})(r.ResponseMode||(r.ResponseMode={}));var g;(function(t){t["IMPLICIT_GRANT"]="implicit";t["AUTHORIZATION_CODE_GRANT"]="authorization_code";t["CLIENT_CREDENTIALS_GRANT"]="client_credentials";t["RESOURCE_OWNER_PASSWORD_GRANT"]="password";t["REFRESH_TOKEN_GRANT"]="refresh_token";t["DEVICE_CODE_GRANT"]="device_code";t["JWT_BEARER"]="urn:ietf:params:oauth:grant-type:jwt-bearer"})(g||(g={}));r.CacheAccountType=void 0;(function(t){t["MSSTS_ACCOUNT_TYPE"]="MSSTS";t["ADFS_ACCOUNT_TYPE"]="ADFS";t["MSAV1_ACCOUNT_TYPE"]="MSA";t["GENERIC_ACCOUNT_TYPE"]="Generic"})(r.CacheAccountType||(r.CacheAccountType={}));var v;(function(t){t["CACHE_KEY_SEPARATOR"]="-";t["CLIENT_INFO_SEPARATOR"]="."})(v||(v={}));r.CredentialType=void 0;(function(t){t["ID_TOKEN"]="IdToken";t["ACCESS_TOKEN"]="AccessToken";t["ACCESS_TOKEN_WITH_AUTH_SCHEME"]="AccessToken_With_AuthScheme";t["REFRESH_TOKEN"]="RefreshToken"})(r.CredentialType||(r.CredentialType={}));r.CacheSchemaType=void 0;(function(t){t["ACCOUNT"]="Account";t["CREDENTIAL"]="Credential";t["ID_TOKEN"]="IdToken";t["ACCESS_TOKEN"]="AccessToken";t["REFRESH_TOKEN"]="RefreshToken";t["APP_METADATA"]="AppMetadata";t["TEMPORARY"]="TempCache";t["TELEMETRY"]="Telemetry";t["UNDEFINED"]="Undefined";t["THROTTLING"]="Throttling"})(r.CacheSchemaType||(r.CacheSchemaType={}));r.CacheType=void 0;(function(t){t[t["ADFS"]=1001]="ADFS";t[t["MSA"]=1002]="MSA";t[t["MSSTS"]=1003]="MSSTS";t[t["GENERIC"]=1004]="GENERIC";t[t["ACCESS_TOKEN"]=2001]="ACCESS_TOKEN";t[t["REFRESH_TOKEN"]=2002]="REFRESH_TOKEN";t[t["ID_TOKEN"]=2003]="ID_TOKEN";t[t["APP_METADATA"]=3001]="APP_METADATA";t[t["UNDEFINED"]=9999]="UNDEFINED"})(r.CacheType||(r.CacheType={}));var E="appmetadata";var S="client_info";var w="1";var x={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24};var N;(function(t){t["CONFIG"]="config";t["CACHE"]="cache";t["NETWORK"]="network"})(N||(N={}));var P={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};r.AuthenticationScheme=void 0;(function(t){t["POP"]="pop";t["BEARER"]="Bearer"})(r.AuthenticationScheme||(r.AuthenticationScheme={}));var D={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"};var M={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"};var L;(function(t){t["username"]="username";t["password"]="password"})(L||(L={}));var U;(function(t){t[t["httpSuccess"]=200]="httpSuccess";t[t["httpBadRequest"]=400]="httpBadRequest"})(U||(U={}));var q;(function(t){t["FAILED_AUTO_DETECTION"]="1";t["INTERNAL_CACHE"]="2";t["ENVIRONMENT_VARIABLE"]="3";t["IMDS"]="4"})(q||(q={}));var B;(function(t){t["CONFIGURED_MATCHES_DETECTED"]="1";t["CONFIGURED_NO_AUTO_DETECTION"]="2";t["CONFIGURED_NOT_DETECTED"]="3";t["AUTO_DETECTION_REQUESTED_SUCCESSFUL"]="4";t["AUTO_DETECTION_REQUESTED_FAILED"]="5"})(B||(B={}));var F;(function(t){t["NO_CACHE_HIT"]="0";t["FORCE_REFRESH"]="1";t["NO_CACHED_ACCESS_TOKEN"]="2";t["CACHED_ACCESS_TOKEN_EXPIRED"]="3";t["REFRESH_CACHED_ACCESS_TOKEN"]="4"})(F||(F={}));var j={unexpectedError:{code:"unexpected_error",desc:"Unexpected error in authentication."}};var H=function(t){__extends(AuthError,t);function AuthError(r,i,o){var a=this;var s=i?r+": "+i:r;a=t.call(this,s)||this;Object.setPrototypeOf(a,AuthError.prototype);a.errorCode=r||n.EMPTY_STRING;a.errorMessage=i||"";a.subError=o||"";a.name="AuthError";return a}AuthError.createUnexpectedError=function(t){return new AuthError(j.unexpectedError.code,j.unexpectedError.desc+": "+t)};return AuthError}(Error);var z={createNewGuid:function(){var t="Crypto interface - createNewGuid() has not been implemented";throw H.createUnexpectedError(t)},base64Decode:function(){var t="Crypto interface - base64Decode() has not been implemented";throw H.createUnexpectedError(t)},base64Encode:function(){var t="Crypto interface - base64Encode() has not been implemented";throw H.createUnexpectedError(t)},generatePkceCodes:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - generatePkceCodes() has not been implemented";throw H.createUnexpectedError(t)}))}))},getPublicKeyThumbprint:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - getPublicKeyThumbprint() has not been implemented";throw H.createUnexpectedError(t)}))}))},signJwt:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - signJwt() has not been implemented";throw H.createUnexpectedError(t)}))}))}};var V={clientInfoDecodingError:{code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},clientInfoEmptyError:{code:"client_info_empty_error",desc:"The client info was empty. Please review the trace to determine the root cause."},tokenParsingError:{code:"token_parsing_error",desc:"Token cannot be parsed. Please review stack trace to determine root cause."},nullOrEmptyToken:{code:"null_or_empty_token",desc:"The token is null or empty. Please review the trace to determine the root cause."},endpointResolutionError:{code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},networkError:{code:"network_error",desc:"Network request failed. Please check network trace to determine root cause."},unableToGetOpenidConfigError:{code:"openid_config_error",desc:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints."},hashNotDeserialized:{code:"hash_not_deserialized",desc:"The hash parameters could not be deserialized. Please review the trace to determine the root cause."},blankGuidGenerated:{code:"blank_guid_generated",desc:"The guid generated was blank. Please review the trace to determine the root cause."},invalidStateError:{code:"invalid_state",desc:"State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState()."},stateMismatchError:{code:"state_mismatch",desc:"State mismatch error. Please check your network. Continued requests may cause cache overflow."},stateNotFoundError:{code:"state_not_found",desc:"State not found"},nonceMismatchError:{code:"nonce_mismatch",desc:"Nonce mismatch error. This may be caused by a race condition in concurrent requests."},nonceNotFoundError:{code:"nonce_not_found",desc:"nonce not found"},noTokensFoundError:{code:"no_tokens_found",desc:"No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken()."},multipleMatchingTokens:{code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. "+"Call AcquireToken again providing more requirements such as authority or account."},multipleMatchingAccounts:{code:"multiple_matching_accounts",desc:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account"},multipleMatchingAppMetadata:{code:"multiple_matching_appMetadata",desc:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata"},tokenRequestCannotBeMade:{code:"request_cannot_be_made",desc:"Token request cannot be made without authorization code or refresh token."},appendEmptyScopeError:{code:"cannot_append_empty_scope",desc:"Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info."},removeEmptyScopeError:{code:"cannot_remove_empty_scope",desc:"Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info."},appendScopeSetError:{code:"cannot_append_scopeset",desc:"Cannot append ScopeSet due to error."},emptyInputScopeSetError:{code:"empty_input_scopeset",desc:"Empty input ScopeSet cannot be processed."},DeviceCodePollingCancelled:{code:"device_code_polling_cancelled",desc:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true."},DeviceCodeExpired:{code:"device_code_expired",desc:"Device code is expired."},DeviceCodeUnknownError:{code:"device_code_unknown_error",desc:"Device code stopped polling for unknown reasons."},NoAccountInSilentRequest:{code:"no_account_in_silent_request",desc:"Please pass an account object, silent flow is not supported without account information"},invalidCacheRecord:{code:"invalid_cache_record",desc:"Cache record object was null or undefined."},invalidCacheEnvironment:{code:"invalid_cache_environment",desc:"Invalid environment when attempting to create cache entry"},noAccountFound:{code:"no_account_found",desc:"No account found in cache for given key."},CachePluginError:{code:"no cache plugin set on CacheManager",desc:"ICachePlugin needs to be set before using readFromStorage or writeFromStorage"},noCryptoObj:{code:"no_crypto_object",desc:"No crypto object detected. This is required for the following operation: "},invalidCacheType:{code:"invalid_cache_type",desc:"Invalid cache type"},unexpectedAccountType:{code:"unexpected_account_type",desc:"Unexpected account type."},unexpectedCredentialType:{code:"unexpected_credential_type",desc:"Unexpected credential type."},invalidAssertion:{code:"invalid_assertion",desc:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515"},invalidClientCredential:{code:"invalid_client_credential",desc:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential"},tokenRefreshRequired:{code:"token_refresh_required",desc:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired."},userTimeoutReached:{code:"user_timeout_reached",desc:"User defined timeout for device code polling reached"},tokenClaimsRequired:{code:"token_claims_cnf_required_for_signedjwt",desc:"Cannot generate a POP jwt if the token_claims are not populated"},noAuthorizationCodeFromServer:{code:"authorization_code_missing_from_server_response",desc:"Server response does not contain an authorization code to proceed"},noAzureRegionDetected:{code:"no_azure_region_detected",desc:"No azure region was detected and no fallback was made available"},accessTokenEntityNullError:{code:"access_token_entity_null",desc:"Access token entity is null, please check logs and cache to ensure a valid access token is present."}};var Y=function(t){__extends(ClientAuthError,t);function ClientAuthError(r,n){var i=t.call(this,r,n)||this;i.name="ClientAuthError";Object.setPrototypeOf(i,ClientAuthError.prototype);return i}ClientAuthError.createClientInfoDecodingError=function(t){return new ClientAuthError(V.clientInfoDecodingError.code,V.clientInfoDecodingError.desc+" Failed with error: "+t)};ClientAuthError.createClientInfoEmptyError=function(){return new ClientAuthError(V.clientInfoEmptyError.code,""+V.clientInfoEmptyError.desc)};ClientAuthError.createTokenParsingError=function(t){return new ClientAuthError(V.tokenParsingError.code,V.tokenParsingError.desc+" Failed with error: "+t)};ClientAuthError.createTokenNullOrEmptyError=function(t){return new ClientAuthError(V.nullOrEmptyToken.code,V.nullOrEmptyToken.desc+" Raw Token Value: "+t)};ClientAuthError.createEndpointDiscoveryIncompleteError=function(t){return new ClientAuthError(V.endpointResolutionError.code,V.endpointResolutionError.desc+" Detail: "+t)};ClientAuthError.createNetworkError=function(t,r){return new ClientAuthError(V.networkError.code,V.networkError.desc+" | Fetch client threw: "+r+" | Attempted to reach: "+t.split("?")[0])};ClientAuthError.createUnableToGetOpenidConfigError=function(t){return new ClientAuthError(V.unableToGetOpenidConfigError.code,V.unableToGetOpenidConfigError.desc+" Attempted to retrieve endpoints from: "+t)};ClientAuthError.createHashNotDeserializedError=function(t){return new ClientAuthError(V.hashNotDeserialized.code,V.hashNotDeserialized.desc+" Given Object: "+t)};ClientAuthError.createInvalidStateError=function(t,r){return new ClientAuthError(V.invalidStateError.code,V.invalidStateError.desc+" Invalid State: "+t+", Root Err: "+r)};ClientAuthError.createStateMismatchError=function(){return new ClientAuthError(V.stateMismatchError.code,V.stateMismatchError.desc)};ClientAuthError.createStateNotFoundError=function(t){return new ClientAuthError(V.stateNotFoundError.code,V.stateNotFoundError.desc+":  "+t)};ClientAuthError.createNonceMismatchError=function(){return new ClientAuthError(V.nonceMismatchError.code,V.nonceMismatchError.desc)};ClientAuthError.createNonceNotFoundError=function(t){return new ClientAuthError(V.nonceNotFoundError.code,V.nonceNotFoundError.desc+":  "+t)};ClientAuthError.createNoTokensFoundError=function(){return new ClientAuthError(V.noTokensFoundError.code,V.noTokensFoundError.desc)};ClientAuthError.createMultipleMatchingTokensInCacheError=function(){return new ClientAuthError(V.multipleMatchingTokens.code,V.multipleMatchingTokens.desc+".")};ClientAuthError.createMultipleMatchingAccountsInCacheError=function(){return new ClientAuthError(V.multipleMatchingAccounts.code,V.multipleMatchingAccounts.desc)};ClientAuthError.createMultipleMatchingAppMetadataInCacheError=function(){return new ClientAuthError(V.multipleMatchingAppMetadata.code,V.multipleMatchingAppMetadata.desc)};ClientAuthError.createTokenRequestCannotBeMadeError=function(){return new ClientAuthError(V.tokenRequestCannotBeMade.code,V.tokenRequestCannotBeMade.desc)};ClientAuthError.createAppendEmptyScopeToSetError=function(t){return new ClientAuthError(V.appendEmptyScopeError.code,V.appendEmptyScopeError.desc+" Given Scope: "+t)};ClientAuthError.createRemoveEmptyScopeFromSetError=function(t){return new ClientAuthError(V.removeEmptyScopeError.code,V.removeEmptyScopeError.desc+" Given Scope: "+t)};ClientAuthError.createAppendScopeSetError=function(t){return new ClientAuthError(V.appendScopeSetError.code,V.appendScopeSetError.desc+" Detail Error: "+t)};ClientAuthError.createEmptyInputScopeSetError=function(){return new ClientAuthError(V.emptyInputScopeSetError.code,""+V.emptyInputScopeSetError.desc)};ClientAuthError.createDeviceCodeCancelledError=function(){return new ClientAuthError(V.DeviceCodePollingCancelled.code,""+V.DeviceCodePollingCancelled.desc)};ClientAuthError.createDeviceCodeExpiredError=function(){return new ClientAuthError(V.DeviceCodeExpired.code,""+V.DeviceCodeExpired.desc)};ClientAuthError.createDeviceCodeUnknownError=function(){return new ClientAuthError(V.DeviceCodeUnknownError.code,""+V.DeviceCodeUnknownError.desc)};ClientAuthError.createNoAccountInSilentRequestError=function(){return new ClientAuthError(V.NoAccountInSilentRequest.code,""+V.NoAccountInSilentRequest.desc)};ClientAuthError.createNullOrUndefinedCacheRecord=function(){return new ClientAuthError(V.invalidCacheRecord.code,V.invalidCacheRecord.desc)};ClientAuthError.createInvalidCacheEnvironmentError=function(){return new ClientAuthError(V.invalidCacheEnvironment.code,V.invalidCacheEnvironment.desc)};ClientAuthError.createNoAccountFoundError=function(){return new ClientAuthError(V.noAccountFound.code,V.noAccountFound.desc)};ClientAuthError.createCachePluginError=function(){return new ClientAuthError(V.CachePluginError.code,""+V.CachePluginError.desc)};ClientAuthError.createNoCryptoObjectError=function(t){return new ClientAuthError(V.noCryptoObj.code,""+V.noCryptoObj.desc+t)};ClientAuthError.createInvalidCacheTypeError=function(){return new ClientAuthError(V.invalidCacheType.code,""+V.invalidCacheType.desc)};ClientAuthError.createUnexpectedAccountTypeError=function(){return new ClientAuthError(V.unexpectedAccountType.code,""+V.unexpectedAccountType.desc)};ClientAuthError.createUnexpectedCredentialTypeError=function(){return new ClientAuthError(V.unexpectedCredentialType.code,""+V.unexpectedCredentialType.desc)};ClientAuthError.createInvalidAssertionError=function(){return new ClientAuthError(V.invalidAssertion.code,""+V.invalidAssertion.desc)};ClientAuthError.createInvalidCredentialError=function(){return new ClientAuthError(V.invalidClientCredential.code,""+V.invalidClientCredential.desc)};ClientAuthError.createRefreshRequiredError=function(){return new ClientAuthError(V.tokenRefreshRequired.code,V.tokenRefreshRequired.desc)};ClientAuthError.createUserTimeoutReachedError=function(){return new ClientAuthError(V.userTimeoutReached.code,V.userTimeoutReached.desc)};ClientAuthError.createTokenClaimsRequiredError=function(){return new ClientAuthError(V.tokenClaimsRequired.code,V.tokenClaimsRequired.desc)};ClientAuthError.createNoAuthCodeInServerResponseError=function(){return new ClientAuthError(V.noAuthorizationCodeFromServer.code,V.noAuthorizationCodeFromServer.desc)};return ClientAuthError}(H);var G=function(){function StringUtils(){}StringUtils.decodeAuthToken=function(t){if(StringUtils.isEmpty(t)){throw Y.createTokenNullOrEmptyError(t)}var r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/;var n=r.exec(t);if(!n||n.length<4){throw Y.createTokenParsingError("Given token is malformed: "+JSON.stringify(t))}var i={header:n[1],JWSPayload:n[2],JWSSig:n[3]};return i};StringUtils.isEmpty=function(t){return typeof t==="undefined"||!t||0===t.length};StringUtils.isEmptyObj=function(t){if(t&&!StringUtils.isEmpty(t)){try{var r=JSON.parse(t);return Object.keys(r).length===0}catch(t){}}return true};StringUtils.startsWith=function(t,r){return t.indexOf(r)===0};StringUtils.endsWith=function(t,r){return t.length>=r.length&&t.lastIndexOf(r)===t.length-r.length};StringUtils.queryStringToObject=function(t){var r;var n=/\+/g;var i=/([^&=]+)=([^&]*)/g;var decode=function(t){return decodeURIComponent(t.replace(n," "))};var o={};r=i.exec(t);while(r){o[decode(r[1])]=decode(r[2]);r=i.exec(t)}return o};StringUtils.trimArrayEntries=function(t){return t.map((function(t){return t.trim()}))};StringUtils.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!StringUtils.isEmpty(t)}))};StringUtils.jsonParseHelper=function(t){try{return JSON.parse(t)}catch(t){return null}};StringUtils.matchPattern=function(t,r){var n=new RegExp(t.replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?"));return n.test(r)};return StringUtils}();r.LogLevel=void 0;(function(t){t[t["Error"]=0]="Error";t[t["Warning"]=1]="Warning";t[t["Info"]=2]="Info";t[t["Verbose"]=3]="Verbose";t[t["Trace"]=4]="Trace"})(r.LogLevel||(r.LogLevel={}));var W=function(){function Logger(t,i,o){this.level=r.LogLevel.Info;var defaultLoggerCallback=function(){};this.localCallback=t.loggerCallback||defaultLoggerCallback;this.piiLoggingEnabled=t.piiLoggingEnabled||false;this.level=t.logLevel||r.LogLevel.Info;this.correlationId=t.correlationId||"";this.packageName=i||n.EMPTY_STRING;this.packageVersion=o||n.EMPTY_STRING}Logger.prototype.clone=function(t,r,n){return new Logger({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},t,r)};Logger.prototype.logMessage=function(t,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii){return}var i=(new Date).toUTCString();var o;if(!G.isEmpty(n.correlationId)){o="["+i+"] : ["+n.correlationId+"]"}else if(!G.isEmpty(this.correlationId)){o="["+i+"] : ["+this.correlationId+"]"}else{o="["+i+"]"}var a=o+" : "+this.packageName+"@"+this.packageVersion+" : "+r.LogLevel[n.logLevel]+" - "+t;this.executeCallback(n.logLevel,a,n.containsPii||false)};Logger.prototype.executeCallback=function(t,r,n){if(this.localCallback){this.localCallback(t,r,n)}};Logger.prototype.error=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Error,containsPii:false,correlationId:n||""})};Logger.prototype.errorPii=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Error,containsPii:true,correlationId:n||""})};Logger.prototype.warning=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Warning,containsPii:false,correlationId:n||""})};Logger.prototype.warningPii=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Warning,containsPii:true,correlationId:n||""})};Logger.prototype.info=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Info,containsPii:false,correlationId:n||""})};Logger.prototype.infoPii=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Info,containsPii:true,correlationId:n||""})};Logger.prototype.verbose=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Verbose,containsPii:false,correlationId:n||""})};Logger.prototype.verbosePii=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Verbose,containsPii:true,correlationId:n||""})};Logger.prototype.trace=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Trace,containsPii:false,correlationId:n||""})};Logger.prototype.tracePii=function(t,n){this.logMessage(t,{logLevel:r.LogLevel.Trace,containsPii:true,correlationId:n||""})};Logger.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||false};return Logger}();var $="@azure/msal-common";var K="4.5.1";var J=function(){function CredentialEntity(){}CredentialEntity.prototype.generateAccountId=function(){return CredentialEntity.generateAccountIdForCacheKey(this.homeAccountId,this.environment)};CredentialEntity.prototype.generateCredentialId=function(){return CredentialEntity.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)};CredentialEntity.prototype.generateTarget=function(){return CredentialEntity.generateTargetForCacheKey(this.target)};CredentialEntity.prototype.generateCredentialKey=function(){return CredentialEntity.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId)};CredentialEntity.prototype.generateType=function(){switch(this.credentialType){case r.CredentialType.ID_TOKEN:return r.CacheType.ID_TOKEN;case r.CredentialType.ACCESS_TOKEN:return r.CacheType.ACCESS_TOKEN;case r.CredentialType.REFRESH_TOKEN:return r.CacheType.REFRESH_TOKEN;default:{throw Y.createUnexpectedCredentialTypeError()}}};CredentialEntity.getCredentialType=function(t){if(t.indexOf(r.CredentialType.ACCESS_TOKEN.toLowerCase())!==-1){if(t.indexOf(r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())!==-1){return r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME}return r.CredentialType.ACCESS_TOKEN}else if(t.indexOf(r.CredentialType.ID_TOKEN.toLowerCase())!==-1){return r.CredentialType.ID_TOKEN}else if(t.indexOf(r.CredentialType.REFRESH_TOKEN.toLowerCase())!==-1){return r.CredentialType.REFRESH_TOKEN}return n.NOT_DEFINED};CredentialEntity.generateCredentialCacheKey=function(t,r,n,i,o,a,s){var c=[this.generateAccountIdForCacheKey(t,r),this.generateCredentialIdForCacheKey(n,i,o,s),this.generateTargetForCacheKey(a)];return c.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};CredentialEntity.generateAccountIdForCacheKey=function(t,r){var n=[t,r];return n.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};CredentialEntity.generateCredentialIdForCacheKey=function(t,n,i,o){var a=t===r.CredentialType.REFRESH_TOKEN?o||n:n;var s=[t,a,i||""];return s.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};CredentialEntity.generateTargetForCacheKey=function(t){return(t||"").toLowerCase()};return CredentialEntity}();var Z={redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},urlParseError:{code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},urlEmptyError:{code:"empty_url_error",desc:"URL was empty or null."},emptyScopesError:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},nonArrayScopesError:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientIdSingleScopeError:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create' and 'none'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},invalidClaimsRequest:{code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},tokenRequestEmptyError:{code:"token_request_empty",desc:"Token request was empty and not found in cache."},logoutRequestEmptyError:{code:"logout_request_empty",desc:"The logout request was null or undefined."},invalidCodeChallengeMethod:{code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},invalidCodeChallengeParams:{code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},invalidCloudDiscoveryMetadata:{code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a JSON object containing tenant_discovery_endpoint and metadata fields"},invalidAuthorityMetadata:{code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a JSON object containing authorization_endpoint, token_endpoint, end_session_endpoint, issuer fields."},untrustedAuthority:{code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."}};var X=function(t){__extends(ClientConfigurationError,t);function ClientConfigurationError(r,n){var i=t.call(this,r,n)||this;i.name="ClientConfigurationError";Object.setPrototypeOf(i,ClientConfigurationError.prototype);return i}ClientConfigurationError.createRedirectUriEmptyError=function(){return new ClientConfigurationError(Z.redirectUriNotSet.code,Z.redirectUriNotSet.desc)};ClientConfigurationError.createPostLogoutRedirectUriEmptyError=function(){return new ClientConfigurationError(Z.postLogoutUriNotSet.code,Z.postLogoutUriNotSet.desc)};ClientConfigurationError.createClaimsRequestParsingError=function(t){return new ClientConfigurationError(Z.claimsRequestParsingError.code,Z.claimsRequestParsingError.desc+" Given value: "+t)};ClientConfigurationError.createInsecureAuthorityUriError=function(t){return new ClientConfigurationError(Z.authorityUriInsecure.code,Z.authorityUriInsecure.desc+" Given URI: "+t)};ClientConfigurationError.createUrlParseError=function(t){return new ClientConfigurationError(Z.urlParseError.code,Z.urlParseError.desc+" Given Error: "+t)};ClientConfigurationError.createUrlEmptyError=function(){return new ClientConfigurationError(Z.urlEmptyError.code,Z.urlEmptyError.desc)};ClientConfigurationError.createEmptyScopesArrayError=function(){return new ClientConfigurationError(Z.emptyScopesError.code,""+Z.emptyScopesError.desc)};ClientConfigurationError.createClientIdSingleScopeError=function(t){return new ClientConfigurationError(Z.clientIdSingleScopeError.code,Z.clientIdSingleScopeError.desc+" Given Scopes: "+t)};ClientConfigurationError.createInvalidPromptError=function(t){return new ClientConfigurationError(Z.invalidPrompt.code,Z.invalidPrompt.desc+" Given value: "+t)};ClientConfigurationError.createInvalidClaimsRequestError=function(){return new ClientConfigurationError(Z.invalidClaimsRequest.code,Z.invalidClaimsRequest.desc)};ClientConfigurationError.createEmptyLogoutRequestError=function(){return new ClientConfigurationError(Z.logoutRequestEmptyError.code,Z.logoutRequestEmptyError.desc)};ClientConfigurationError.createEmptyTokenRequestError=function(){return new ClientConfigurationError(Z.tokenRequestEmptyError.code,Z.tokenRequestEmptyError.desc)};ClientConfigurationError.createInvalidCodeChallengeMethodError=function(){return new ClientConfigurationError(Z.invalidCodeChallengeMethod.code,Z.invalidCodeChallengeMethod.desc)};ClientConfigurationError.createInvalidCodeChallengeParamsError=function(){return new ClientConfigurationError(Z.invalidCodeChallengeParams.code,Z.invalidCodeChallengeParams.desc)};ClientConfigurationError.createInvalidCloudDiscoveryMetadataError=function(){return new ClientConfigurationError(Z.invalidCloudDiscoveryMetadata.code,Z.invalidCloudDiscoveryMetadata.desc)};ClientConfigurationError.createInvalidAuthorityMetadataError=function(){return new ClientConfigurationError(Z.invalidAuthorityMetadata.code,Z.invalidAuthorityMetadata.desc)};ClientConfigurationError.createUntrustedAuthorityError=function(){return new ClientConfigurationError(Z.untrustedAuthority.code,Z.untrustedAuthority.desc)};return ClientConfigurationError}(Y);var Q=function(){function ScopeSet(t){var r=this;var n=t?G.trimArrayEntries(__spreadArrays(t)):[];var i=n?G.removeEmptyStringsFromArray(n):[];this.validateInputScopes(i);this.scopes=new Set;i.forEach((function(t){return r.scopes.add(t)}))}ScopeSet.fromString=function(t){var r=t||"";var n=r.split(" ");return new ScopeSet(n)};ScopeSet.prototype.validateInputScopes=function(t){if(!t||t.length<1){throw X.createEmptyScopesArrayError()}};ScopeSet.prototype.containsScope=function(t){var r=this.printScopesLowerCase().split(" ");var n=new ScopeSet(r);return!G.isEmpty(t)?n.scopes.has(t.toLowerCase()):false};ScopeSet.prototype.containsScopeSet=function(t){var r=this;if(!t||t.scopes.size<=0){return false}return this.scopes.size>=t.scopes.size&&t.asArray().every((function(t){return r.containsScope(t)}))};ScopeSet.prototype.containsOnlyOIDCScopes=function(){var t=this;var r=0;o.forEach((function(n){if(t.containsScope(n)){r+=1}}));return this.scopes.size===r};ScopeSet.prototype.appendScope=function(t){if(!G.isEmpty(t)){this.scopes.add(t.trim())}};ScopeSet.prototype.appendScopes=function(t){var r=this;try{t.forEach((function(t){return r.appendScope(t)}))}catch(t){throw Y.createAppendScopeSetError(t)}};ScopeSet.prototype.removeScope=function(t){if(G.isEmpty(t)){throw Y.createRemoveEmptyScopeFromSetError(t)}this.scopes.delete(t.trim())};ScopeSet.prototype.removeOIDCScopes=function(){var t=this;o.forEach((function(r){t.scopes.delete(r)}))};ScopeSet.prototype.unionScopeSets=function(t){if(!t){throw Y.createEmptyInputScopeSetError()}var r=new Set;t.scopes.forEach((function(t){return r.add(t.toLowerCase())}));this.scopes.forEach((function(t){return r.add(t.toLowerCase())}));return r};ScopeSet.prototype.intersectingScopeSets=function(t){if(!t){throw Y.createEmptyInputScopeSetError()}if(!t.containsOnlyOIDCScopes()){t.removeOIDCScopes()}var r=this.unionScopeSets(t);var n=t.getScopeCount();var i=this.getScopeCount();var o=r.size;return o<i+n};ScopeSet.prototype.getScopeCount=function(){return this.scopes.size};ScopeSet.prototype.asArray=function(){var t=[];this.scopes.forEach((function(r){return t.push(r)}));return t};ScopeSet.prototype.printScopes=function(){if(this.scopes){var t=this.asArray();return t.join(" ")}return""};ScopeSet.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()};return ScopeSet}();function buildClientInfo(t,r){if(G.isEmpty(t)){throw Y.createClientInfoEmptyError()}try{var n=r.base64Decode(t);return JSON.parse(n)}catch(t){throw Y.createClientInfoDecodingError(t)}}function buildClientInfoFromHomeAccountId(t){if(G.isEmpty(t)){throw Y.createClientInfoDecodingError("Home account ID was empty.")}var r=t.split(v.CLIENT_INFO_SEPARATOR,2);return{uid:r[0],utid:r.length<2?n.EMPTY_STRING:r[1]}}r.AuthorityType=void 0;(function(t){t[t["Default"]=0]="Default";t[t["Adfs"]=1]="Adfs"})(r.AuthorityType||(r.AuthorityType={}));var ee=function(){function AccountEntity(){}AccountEntity.prototype.generateAccountId=function(){var t=[this.homeAccountId,this.environment];return t.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};AccountEntity.prototype.generateAccountKey=function(){return AccountEntity.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})};AccountEntity.prototype.generateType=function(){switch(this.authorityType){case r.CacheAccountType.ADFS_ACCOUNT_TYPE:return r.CacheType.ADFS;case r.CacheAccountType.MSAV1_ACCOUNT_TYPE:return r.CacheType.MSA;case r.CacheAccountType.MSSTS_ACCOUNT_TYPE:return r.CacheType.MSSTS;case r.CacheAccountType.GENERIC_ACCOUNT_TYPE:return r.CacheType.GENERIC;default:{throw Y.createUnexpectedAccountTypeError()}}};AccountEntity.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims}};AccountEntity.generateAccountCacheKey=function(t){var r=[t.homeAccountId,t.environment||"",t.tenantId||""];return r.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};AccountEntity.createAccount=function(t,n,i,o,a,s,c){var u,l,d,p,g,v;var E=new AccountEntity;E.authorityType=r.CacheAccountType.MSSTS_ACCOUNT_TYPE;E.clientInfo=t;E.homeAccountId=n;var S=i.getPreferredCache();if(G.isEmpty(S)){throw Y.createInvalidCacheEnvironmentError()}E.environment=S;E.realm=((u=o===null||o===void 0?void 0:o.claims)===null||u===void 0?void 0:u.tid)||"";E.oboAssertion=a;if(o){E.idTokenClaims=o.claims;E.localAccountId=((l=o===null||o===void 0?void 0:o.claims)===null||l===void 0?void 0:l.oid)||((d=o===null||o===void 0?void 0:o.claims)===null||d===void 0?void 0:d.sub)||"";E.username=((p=o===null||o===void 0?void 0:o.claims)===null||p===void 0?void 0:p.preferred_username)||(((g=o===null||o===void 0?void 0:o.claims)===null||g===void 0?void 0:g.emails)?o.claims.emails[0]:"");E.name=(v=o===null||o===void 0?void 0:o.claims)===null||v===void 0?void 0:v.name}E.cloudGraphHostName=s;E.msGraphHost=c;return E};AccountEntity.createGenericAccount=function(t,n,i,o,a,s){var c,u,l,d;var p=new AccountEntity;p.authorityType=t.authorityType===r.AuthorityType.Adfs?r.CacheAccountType.ADFS_ACCOUNT_TYPE:r.CacheAccountType.GENERIC_ACCOUNT_TYPE;p.homeAccountId=n;p.realm="";p.oboAssertion=o;var g=t.getPreferredCache();if(G.isEmpty(g)){throw Y.createInvalidCacheEnvironmentError()}if(i){p.localAccountId=((c=i===null||i===void 0?void 0:i.claims)===null||c===void 0?void 0:c.oid)||((u=i===null||i===void 0?void 0:i.claims)===null||u===void 0?void 0:u.sub)||"";p.username=((l=i===null||i===void 0?void 0:i.claims)===null||l===void 0?void 0:l.upn)||"";p.name=((d=i===null||i===void 0?void 0:i.claims)===null||d===void 0?void 0:d.name)||"";p.idTokenClaims=i===null||i===void 0?void 0:i.claims}p.environment=g;p.cloudGraphHostName=a;p.msGraphHost=s;return p};AccountEntity.generateHomeAccountId=function(t,i,o,a,s){var c;var u=((c=s===null||s===void 0?void 0:s.claims)===null||c===void 0?void 0:c.sub)?s.claims.sub:n.EMPTY_STRING;if(i===r.AuthorityType.Adfs){return u}if(t){try{var l=buildClientInfo(t,a);if(!G.isEmpty(l.uid)&&!G.isEmpty(l.utid)){return""+l.uid+v.CLIENT_INFO_SEPARATOR+l.utid}}catch(t){}}o.verbose("No client info in response");return u};AccountEntity.isAccountEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType")};AccountEntity.accountInfoIsEqual=function(t,r,n){if(!t||!r){return false}var i=true;if(n){var o=t.idTokenClaims||{};var a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return t.homeAccountId===r.homeAccountId&&t.localAccountId===r.localAccountId&&t.username===r.username&&t.tenantId===r.tenantId&&t.environment===r.environment&&i};return AccountEntity}();var te=function(){function AuthToken(t,r){if(G.isEmpty(t)){throw Y.createTokenNullOrEmptyError(t)}this.rawToken=t;this.claims=AuthToken.extractTokenClaims(t,r)}AuthToken.extractTokenClaims=function(t,r){var n=G.decodeAuthToken(t);try{var i=n.JWSPayload;var o=r.base64Decode(i);return JSON.parse(o)}catch(t){throw Y.createTokenParsingError(t)}};return AuthToken}();var re=function(){function CacheManager(t,r){this.clientId=t;this.cryptoImpl=r}CacheManager.prototype.getAllAccounts=function(){var t=this;var r=this.getAccountsFilteredBy();var n=Object.keys(r).map((function(t){return r[t]}));var i=n.length;if(i<1){return[]}else{var o=n.map((function(r){var n=CacheManager.toObject(new ee,r);var i=n.getAccountInfo();var o=t.readIdTokenFromCache(t.clientId,i);if(o&&!i.idTokenClaims){i.idTokenClaims=new te(o.secret,t.cryptoImpl).claims}return i}));return o}};CacheManager.prototype.saveCacheRecord=function(t){if(!t){throw Y.createNullOrUndefinedCacheRecord()}if(!!t.account){this.setAccount(t.account)}if(!!t.idToken){this.setIdTokenCredential(t.idToken)}if(!!t.accessToken){this.saveAccessToken(t.accessToken)}if(!!t.refreshToken){this.setRefreshTokenCredential(t.refreshToken)}if(!!t.appMetadata){this.setAppMetadata(t.appMetadata)}};CacheManager.prototype.saveAccessToken=function(t){var r=this;var n=this.getCredentialsFilteredBy({clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm});var i=Q.fromString(t.target);var o=Object.keys(n.accessTokens).map((function(t){return n.accessTokens[t]}));if(o){o.forEach((function(t){var n=Q.fromString(t.target);if(n.intersectingScopeSets(i)){r.removeCredential(t)}}))}this.setAccessTokenCredential(t)};CacheManager.prototype.getAccountsFilteredBy=function(t){return this.getAccountsFilteredByInternal(t?t.homeAccountId:"",t?t.environment:"",t?t.realm:"")};CacheManager.prototype.getAccountsFilteredByInternal=function(t,r,n){var i=this;var o=this.getKeys();var a={};o.forEach((function(o){var s=i.getAccount(o);if(!s){return}if(!!t&&!i.matchHomeAccountId(s,t)){return}if(!!r&&!i.matchEnvironment(s,r)){return}if(!!n&&!i.matchRealm(s,n)){return}a[o]=s}));return a};CacheManager.prototype.getCredentialsFilteredBy=function(t){return this.getCredentialsFilteredByInternal(t.homeAccountId,t.environment,t.credentialType,t.clientId,t.familyId,t.realm,t.target,t.oboAssertion)};CacheManager.prototype.getCredentialsFilteredByInternal=function(t,i,o,a,s,c,u,l){var d=this;var p=this.getKeys();var g={idTokens:{},accessTokens:{},refreshTokens:{}};p.forEach((function(p){var v=J.getCredentialType(p);if(v===n.NOT_DEFINED){return}var E=d.getSpecificCredential(p,v);if(!E){return}if(!!l&&!d.matchOboAssertion(E,l)){return}if(!!t&&!d.matchHomeAccountId(E,t)){return}if(!!i&&!d.matchEnvironment(E,i)){return}if(!!c&&!d.matchRealm(E,c)){return}if(!!o&&!d.matchCredentialType(E,o)){return}if(!!a&&!d.matchClientId(E,a)){return}if(!!s&&!d.matchFamilyId(E,s)){return}if(!!u&&!d.matchTarget(E,u)){return}switch(v){case r.CredentialType.ID_TOKEN:g.idTokens[p]=E;break;case r.CredentialType.ACCESS_TOKEN:case r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:g.accessTokens[p]=E;break;case r.CredentialType.REFRESH_TOKEN:g.refreshTokens[p]=E;break}}));return g};CacheManager.prototype.getAppMetadataFilteredBy=function(t){return this.getAppMetadataFilteredByInternal(t.environment,t.clientId)};CacheManager.prototype.getAppMetadataFilteredByInternal=function(t,r){var n=this;var i=this.getKeys();var o={};i.forEach((function(i){if(!n.isAppMetadata(i)){return}var a=n.getAppMetadata(i);if(!a){return}if(!!t&&!n.matchEnvironment(a,t)){return}if(!!r&&!n.matchClientId(a,r)){return}o[i]=a}));return o};CacheManager.prototype.getAuthorityMetadataByAlias=function(t){var r=this;var n=this.getAuthorityMetadataKeys();var i=null;n.forEach((function(n){if(!r.isAuthorityMetadata(n)||n.indexOf(r.clientId)===-1){return}var o=r.getAuthorityMetadata(n);if(!o){return}if(o.aliases.indexOf(t)===-1){return}i=o}));return i};CacheManager.prototype.removeAllAccounts=function(){var t=this;var r=this.getKeys();r.forEach((function(r){var n=t.getAccount(r);if(!n){return}t.removeAccount(r)}));return true};CacheManager.prototype.removeAccount=function(t){var n=this.getAccount(t);if(!n){throw Y.createNoAccountFoundError()}return this.removeAccountContext(n)&&this.removeItem(t,r.CacheSchemaType.ACCOUNT)};CacheManager.prototype.removeAccountContext=function(t){var r=this;var i=this.getKeys();var o=t.generateAccountId();i.forEach((function(t){var i=J.getCredentialType(t);if(i===n.NOT_DEFINED){return}var a=r.getSpecificCredential(t,i);if(!!a&&o===a.generateAccountId()){r.removeCredential(a)}}));return true};CacheManager.prototype.removeCredential=function(t){var n=t.generateCredentialKey();return this.removeItem(n,r.CacheSchemaType.CREDENTIAL)};CacheManager.prototype.removeAppMetadata=function(){var t=this;var n=this.getKeys();n.forEach((function(n){if(t.isAppMetadata(n)){t.removeItem(n,r.CacheSchemaType.APP_METADATA)}}));return true};CacheManager.prototype.readCacheRecord=function(t,r,n,i,o){var a=this.readAccountFromCache(t);var s=this.readIdTokenFromCache(r,t);var c=this.readAccessTokenFromCache(r,t,n,o);var u=this.readRefreshTokenFromCache(r,t,false);var l=this.readAppMetadataFromCache(i,r);if(a&&s){a.idTokenClaims=new te(s.secret,this.cryptoImpl).claims}return{account:a,idToken:s,accessToken:c,refreshToken:u,appMetadata:l}};CacheManager.prototype.readAccountFromCache=function(t){var r=ee.generateAccountCacheKey(t);return this.getAccount(r)};CacheManager.prototype.readIdTokenFromCache=function(t,n){var i={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:r.CredentialType.ID_TOKEN,clientId:t,realm:n.tenantId};var o=this.getCredentialsFilteredBy(i);var a=Object.keys(o.idTokens).map((function(t){return o.idTokens[t]}));var s=a.length;if(s<1){return null}else if(s>1){throw Y.createMultipleMatchingTokensInCacheError()}return a[0]};CacheManager.prototype.readAccessTokenFromCache=function(t,n,i,o){var a=o===r.AuthenticationScheme.POP?r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:r.CredentialType.ACCESS_TOKEN;var s={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:a,clientId:t,realm:n.tenantId,target:i.printScopesLowerCase()};var c=this.getCredentialsFilteredBy(s);var u=Object.keys(c.accessTokens).map((function(t){return c.accessTokens[t]}));var l=u.length;if(l<1){return null}else if(l>1){throw Y.createMultipleMatchingTokensInCacheError()}return u[0]};CacheManager.prototype.readRefreshTokenFromCache=function(t,n,i){var o=i?w:undefined;var a={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:r.CredentialType.REFRESH_TOKEN,clientId:t,familyId:o};var s=this.getCredentialsFilteredBy(a);var c=Object.keys(s.refreshTokens).map((function(t){return s.refreshTokens[t]}));var u=c.length;if(u<1){return null}return c[0]};CacheManager.prototype.readAppMetadataFromCache=function(t,r){var n={environment:t,clientId:r};var i=this.getAppMetadataFilteredBy(n);var o=Object.keys(i).map((function(t){return i[t]}));var a=o.length;if(a<1){return null}else if(a>1){throw Y.createMultipleMatchingAppMetadataInCacheError()}return o[0]};CacheManager.prototype.isAppMetadataFOCI=function(t,r){var n=this.readAppMetadataFromCache(t,r);return!!(n&&n.familyId===w)};CacheManager.prototype.matchHomeAccountId=function(t,r){return!!(t.homeAccountId&&r===t.homeAccountId)};CacheManager.prototype.matchOboAssertion=function(t,r){return!!(t.oboAssertion&&r===t.oboAssertion)};CacheManager.prototype.matchEnvironment=function(t,r){var n=this.getAuthorityMetadataByAlias(r);if(n&&n.aliases.indexOf(t.environment)>-1){return true}return false};CacheManager.prototype.matchCredentialType=function(t,r){return t.credentialType&&r.toLowerCase()===t.credentialType.toLowerCase()};CacheManager.prototype.matchClientId=function(t,r){return!!(t.clientId&&r===t.clientId)};CacheManager.prototype.matchFamilyId=function(t,r){return!!(t.familyId&&r===t.familyId)};CacheManager.prototype.matchRealm=function(t,r){return!!(t.realm&&r===t.realm)};CacheManager.prototype.matchTarget=function(t,i){var o=t.credentialType!==r.CredentialType.ACCESS_TOKEN&&t.credentialType!==r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;if(o||!t.target){return false}var a=Q.fromString(t.target);var s=Q.fromString(i);if(!s.containsOnlyOIDCScopes()){s.removeOIDCScopes()}else{s.removeScope(n.OFFLINE_ACCESS_SCOPE)}return a.containsScopeSet(s)};CacheManager.prototype.isAppMetadata=function(t){return t.indexOf(E)!==-1};CacheManager.prototype.isAuthorityMetadata=function(t){return t.indexOf(x.CACHE_KEY)!==-1};CacheManager.prototype.generateAuthorityMetadataCacheKey=function(t){return x.CACHE_KEY+"-"+this.clientId+"-"+t};CacheManager.prototype.getSpecificCredential=function(t,n){switch(n){case r.CredentialType.ID_TOKEN:{return this.getIdTokenCredential(t)}case r.CredentialType.ACCESS_TOKEN:case r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:{return this.getAccessTokenCredential(t)}case r.CredentialType.REFRESH_TOKEN:{return this.getRefreshTokenCredential(t)}default:return null}};CacheManager.toObject=function(t,r){for(var n in r){t[n]=r[n]}return t};return CacheManager}();var ne=function(t){__extends(DefaultStorageClass,t);function DefaultStorageClass(){return t!==null&&t.apply(this,arguments)||this}DefaultStorageClass.prototype.setAccount=function(){var t="Storage interface - setAccount() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAccount=function(){var t="Storage interface - getAccount() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setIdTokenCredential=function(){var t="Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getIdTokenCredential=function(){var t="Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setAccessTokenCredential=function(){var t="Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAccessTokenCredential=function(){var t="Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setRefreshTokenCredential=function(){var t="Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getRefreshTokenCredential=function(){var t="Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setAppMetadata=function(){var t="Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAppMetadata=function(){var t="Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setServerTelemetry=function(){var t="Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getServerTelemetry=function(){var t="Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setAuthorityMetadata=function(){var t="Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAuthorityMetadata=function(){var t="Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAuthorityMetadataKeys=function(){var t="Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setThrottlingCache=function(){var t="Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getThrottlingCache=function(){var t="Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.removeItem=function(){var t="Storage interface - removeItem() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.containsKey=function(){var t="Storage interface - containsKey() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getKeys=function(){var t="Storage interface - getKeys() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.clear=function(){var t="Storage interface - clear() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};return DefaultStorageClass}(re);var ie=300;var oe={tokenRenewalOffsetSeconds:ie,preventCorsPreflight:false};var ae={loggerCallback:function(){},piiLoggingEnabled:false,logLevel:r.LogLevel.Info,correlationId:""};var se={sendGetRequestAsync:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Network interface - sendGetRequestAsync() has not been implemented";throw H.createUnexpectedError(t)}))}))},sendPostRequestAsync:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Network interface - sendPostRequestAsync() has not been implemented";throw H.createUnexpectedError(t)}))}))}};var ce={sku:n.SKU,version:K,cpu:"",os:""};var ue={clientSecret:"",clientAssertion:undefined};function buildClientConfiguration(t){var r=t.authOptions,n=t.systemOptions,i=t.loggerOptions,o=t.storageInterface,a=t.networkInterface,s=t.cryptoInterface,c=t.clientCredentials,u=t.libraryInfo,l=t.serverTelemetryManager,d=t.persistencePlugin,p=t.serializableCache;return{authOptions:buildAuthOptions(r),systemOptions:__assign(__assign({},oe),n),loggerOptions:__assign(__assign({},ae),i),storageInterface:o||new ne(r.clientId,z),networkInterface:a||se,cryptoInterface:s||z,clientCredentials:c||ue,libraryInfo:__assign(__assign({},ce),u),serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:p||null}}function buildAuthOptions(t){return __assign({clientCapabilities:[]},t)}var le=function(t){__extends(ServerError,t);function ServerError(r,n,i){var o=t.call(this,r,n,i)||this;o.name="ServerError";Object.setPrototypeOf(o,ServerError.prototype);return o}return ServerError}(H);var fe=function(){function ThrottlingUtils(){}ThrottlingUtils.generateThrottlingStorageKey=function(t){return D.THROTTLING_PREFIX+"."+JSON.stringify(t)};ThrottlingUtils.preProcess=function(t,i){var o;var a=ThrottlingUtils.generateThrottlingStorageKey(i);var s=t.getThrottlingCache(a);if(s){if(s.throttleTime<Date.now()){t.removeItem(a,r.CacheSchemaType.THROTTLING);return}throw new le(((o=s.errorCodes)===null||o===void 0?void 0:o.join(" "))||n.EMPTY_STRING,s.errorMessage,s.subError)}};ThrottlingUtils.postProcess=function(t,r,n){if(ThrottlingUtils.checkResponseStatus(n)||ThrottlingUtils.checkResponseForRetryAfter(n)){var i={throttleTime:ThrottlingUtils.calculateThrottleTime(parseInt(n.headers[a.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};t.setThrottlingCache(ThrottlingUtils.generateThrottlingStorageKey(r),i)}};ThrottlingUtils.checkResponseStatus=function(t){return t.status===429||t.status>=500&&t.status<600};ThrottlingUtils.checkResponseForRetryAfter=function(t){if(t.headers){return t.headers.hasOwnProperty(a.RETRY_AFTER)&&(t.status<200||t.status>=300)}return false};ThrottlingUtils.calculateThrottleTime=function(t){var r=t<=0?0:t;var n=Date.now()/1e3;return Math.floor(Math.min(n+(r||D.DEFAULT_THROTTLE_TIME_SECONDS),n+D.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)};ThrottlingUtils.removeThrottle=function(t,n,i,o,a){var s={clientId:n,authority:i,scopes:o,homeAccountIdentifier:a};var c=this.generateThrottlingStorageKey(s);return t.removeItem(c,r.CacheSchemaType.THROTTLING)};return ThrottlingUtils}();var de=function(){function NetworkManager(t,r){this.networkClient=t;this.cacheManager=r}NetworkManager.prototype.sendPostRequest=function(t,r,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(a){switch(a.label){case 0:fe.preProcess(this.cacheManager,t);a.label=1;case 1:a.trys.push([1,3,,4]);return[4,this.networkClient.sendPostRequestAsync(r,n)];case 2:i=a.sent();return[3,4];case 3:o=a.sent();if(o instanceof H){throw o}else{throw Y.createNetworkError(r,o)}case 4:fe.postProcess(this.cacheManager,t,i);return[2,i]}}))}))};return NetworkManager}();r.CcsCredentialType=void 0;(function(t){t["HOME_ACCOUNT_ID"]="home_account_id";t["UPN"]="UPN"})(r.CcsCredentialType||(r.CcsCredentialType={}));var pe=function(){function BaseClient(t){this.config=buildClientConfiguration(t);this.logger=new W(this.config.loggerOptions,$,K);this.cryptoUtils=this.config.cryptoInterface;this.cacheManager=this.config.storageInterface;this.networkClient=this.config.networkInterface;this.networkManager=new de(this.networkClient,this.cacheManager);this.serverTelemetryManager=this.config.serverTelemetryManager;this.authority=this.config.authOptions.authority}BaseClient.prototype.createTokenRequestHeaders=function(t){var i={};i[a.CONTENT_TYPE]=n.URL_FORM_CONTENT_TYPE;if(!this.config.systemOptions.preventCorsPreflight&&t){switch(t.type){case r.CcsCredentialType.HOME_ACCOUNT_ID:try{var o=buildClientInfoFromHomeAccountId(t.credential);i[a.CCS_HEADER]="Oid:"+o.uid+"@"+o.utid}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}break;case r.CcsCredentialType.UPN:i[a.CCS_HEADER]="UPN: "+t.credential;break}}return i};BaseClient.prototype.executePostToTokenEndpoint=function(t,r,n,i){return __awaiter(this,void 0,void 0,(function(){var o;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.networkManager.sendPostRequest(i,t,{body:r,headers:n})];case 1:o=a.sent();if(this.config.serverTelemetryManager&&o.status<500&&o.status!==429){this.config.serverTelemetryManager.clearTelemetryCache()}return[2,o]}}))}))};BaseClient.prototype.updateAuthority=function(t){if(!t.discoveryComplete()){throw Y.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.")}this.authority=t};return BaseClient}();var he=function(){function RequestValidator(){}RequestValidator.validateRedirectUri=function(t){if(G.isEmpty(t)){throw X.createRedirectUriEmptyError()}};RequestValidator.validatePrompt=function(t){var r=[];for(var n in l){r.push(l[n])}if(r.indexOf(t)<0){throw X.createInvalidPromptError(t)}};RequestValidator.validateClaims=function(t){try{JSON.parse(t)}catch(t){throw X.createInvalidClaimsRequestError()}};RequestValidator.validateCodeChallengeParams=function(t,r){if(G.isEmpty(t)||G.isEmpty(r)){throw X.createInvalidCodeChallengeParamsError()}else{this.validateCodeChallengeMethod(r)}};RequestValidator.validateCodeChallengeMethod=function(t){if([p.PLAIN,p.S256].indexOf(t)<0){throw X.createInvalidCodeChallengeMethodError()}};RequestValidator.sanitizeEQParams=function(t,r){if(!t){return{}}r.forEach((function(r,n){if(t[n]){delete t[n]}}));return t};return RequestValidator}();var me=function(){function RequestParameterBuilder(){this.parameters=new Map}RequestParameterBuilder.prototype.addResponseTypeCode=function(){this.parameters.set(c.RESPONSE_TYPE,encodeURIComponent(n.CODE_RESPONSE_TYPE))};RequestParameterBuilder.prototype.addResponseMode=function(t){this.parameters.set(c.RESPONSE_MODE,encodeURIComponent(t?t:r.ResponseMode.QUERY))};RequestParameterBuilder.prototype.addScopes=function(t,r){if(r===void 0){r=true}var n=r?__spreadArrays(t||[],i):t||[];var o=new Q(n);this.parameters.set(c.SCOPE,encodeURIComponent(o.printScopes()))};RequestParameterBuilder.prototype.addClientId=function(t){this.parameters.set(c.CLIENT_ID,encodeURIComponent(t))};RequestParameterBuilder.prototype.addRedirectUri=function(t){he.validateRedirectUri(t);this.parameters.set(c.REDIRECT_URI,encodeURIComponent(t))};RequestParameterBuilder.prototype.addPostLogoutRedirectUri=function(t){he.validateRedirectUri(t);this.parameters.set(c.POST_LOGOUT_URI,encodeURIComponent(t))};RequestParameterBuilder.prototype.addIdTokenHint=function(t){this.parameters.set(c.ID_TOKEN_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addDomainHint=function(t){this.parameters.set(d.DOMAIN_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addLoginHint=function(t){this.parameters.set(d.LOGIN_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addCcsUpn=function(t){this.parameters.set(a.CCS_HEADER,encodeURIComponent("UPN:"+t))};RequestParameterBuilder.prototype.addCcsOid=function(t){this.parameters.set(a.CCS_HEADER,encodeURIComponent("Oid:"+t.uid+"@"+t.utid))};RequestParameterBuilder.prototype.addSid=function(t){this.parameters.set(d.SID,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClaims=function(t,r){var n=this.addClientCapabilitiesToClaims(t,r);he.validateClaims(n);this.parameters.set(c.CLAIMS,encodeURIComponent(n))};RequestParameterBuilder.prototype.addCorrelationId=function(t){this.parameters.set(c.CLIENT_REQUEST_ID,encodeURIComponent(t))};RequestParameterBuilder.prototype.addLibraryInfo=function(t){this.parameters.set(c.X_CLIENT_SKU,t.sku);this.parameters.set(c.X_CLIENT_VER,t.version);this.parameters.set(c.X_CLIENT_OS,t.os);this.parameters.set(c.X_CLIENT_CPU,t.cpu)};RequestParameterBuilder.prototype.addPrompt=function(t){he.validatePrompt(t);this.parameters.set(""+c.PROMPT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addState=function(t){if(!G.isEmpty(t)){this.parameters.set(c.STATE,encodeURIComponent(t))}};RequestParameterBuilder.prototype.addNonce=function(t){this.parameters.set(c.NONCE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addCodeChallengeParams=function(t,r){he.validateCodeChallengeParams(t,r);if(t&&r){this.parameters.set(c.CODE_CHALLENGE,encodeURIComponent(t));this.parameters.set(c.CODE_CHALLENGE_METHOD,encodeURIComponent(r))}else{throw X.createInvalidCodeChallengeParamsError()}};RequestParameterBuilder.prototype.addAuthorizationCode=function(t){this.parameters.set(c.CODE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addDeviceCode=function(t){this.parameters.set(c.DEVICE_CODE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addRefreshToken=function(t){this.parameters.set(c.REFRESH_TOKEN,encodeURIComponent(t))};RequestParameterBuilder.prototype.addCodeVerifier=function(t){this.parameters.set(c.CODE_VERIFIER,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientSecret=function(t){this.parameters.set(c.CLIENT_SECRET,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientAssertion=function(t){this.parameters.set(c.CLIENT_ASSERTION,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientAssertionType=function(t){this.parameters.set(c.CLIENT_ASSERTION_TYPE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addOboAssertion=function(t){this.parameters.set(c.OBO_ASSERTION,encodeURIComponent(t))};RequestParameterBuilder.prototype.addRequestTokenUse=function(t){this.parameters.set(c.REQUESTED_TOKEN_USE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addGrantType=function(t){this.parameters.set(c.GRANT_TYPE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientInfo=function(){this.parameters.set(S,"1")};RequestParameterBuilder.prototype.addExtraQueryParameters=function(t){var r=this;he.sanitizeEQParams(t,this.parameters);Object.keys(t).forEach((function(n){r.parameters.set(n,t[n])}))};RequestParameterBuilder.prototype.addClientCapabilitiesToClaims=function(t,r){var n;if(!t){n={}}else{try{n=JSON.parse(t)}catch(t){throw X.createInvalidClaimsRequestError()}}if(r&&r.length>0){if(!n.hasOwnProperty(u.ACCESS_TOKEN)){n[u.ACCESS_TOKEN]={}}n[u.ACCESS_TOKEN][u.XMS_CC]={values:r}}return JSON.stringify(n)};RequestParameterBuilder.prototype.addUsername=function(t){this.parameters.set(L.username,t)};RequestParameterBuilder.prototype.addPassword=function(t){this.parameters.set(L.password,t)};RequestParameterBuilder.prototype.addPopToken=function(t){if(!G.isEmpty(t)){this.parameters.set(c.TOKEN_TYPE,r.AuthenticationScheme.POP);this.parameters.set(c.REQ_CNF,encodeURIComponent(t))}};RequestParameterBuilder.prototype.addServerTelemetry=function(t){this.parameters.set(c.X_CLIENT_CURR_TELEM,t.generateCurrentRequestHeaderValue());this.parameters.set(c.X_CLIENT_LAST_TELEM,t.generateLastRequestHeaderValue())};RequestParameterBuilder.prototype.addThrottling=function(){this.parameters.set(c.X_MS_LIB_CAPABILITY,D.X_MS_LIB_CAPABILITY_VALUE)};RequestParameterBuilder.prototype.createQueryString=function(){var t=new Array;this.parameters.forEach((function(r,n){t.push(n+"="+r)}));return t.join("&")};return RequestParameterBuilder}();var ge=function(t){__extends(IdTokenEntity,t);function IdTokenEntity(){return t!==null&&t.apply(this,arguments)||this}IdTokenEntity.createIdTokenEntity=function(t,n,i,o,a,s){var c=new IdTokenEntity;c.credentialType=r.CredentialType.ID_TOKEN;c.homeAccountId=t;c.environment=n;c.clientId=o;c.secret=i;c.realm=a;c.oboAssertion=s;return c};IdTokenEntity.isIdTokenEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t["credentialType"]===r.CredentialType.ID_TOKEN};return IdTokenEntity}(J);var ve=function(){function TimeUtils(){}TimeUtils.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)};TimeUtils.isTokenExpired=function(t,r){var n=Number(t)||0;var i=TimeUtils.nowSeconds()+r;return i>n};TimeUtils.wasClockTurnedBack=function(t){var r=Number(t);return r>TimeUtils.nowSeconds()};TimeUtils.delay=function(t,r){return new Promise((function(n){return setTimeout((function(){return n(r)}),t)}))};return TimeUtils}();var ye=function(t){__extends(AccessTokenEntity,t);function AccessTokenEntity(){return t!==null&&t.apply(this,arguments)||this}AccessTokenEntity.createAccessTokenEntity=function(t,n,i,o,a,s,c,u,l,d,p,g){var v;var E=new AccessTokenEntity;E.homeAccountId=t;E.credentialType=r.CredentialType.ACCESS_TOKEN;E.secret=i;var S=ve.nowSeconds();E.cachedAt=S.toString();E.expiresOn=c.toString();E.extendedExpiresOn=u.toString();if(d){E.refreshOn=d.toString()}E.environment=n;E.clientId=o;E.realm=a;E.target=s;E.oboAssertion=g;E.tokenType=G.isEmpty(p)?r.AuthenticationScheme.BEARER:p;if(E.tokenType===r.AuthenticationScheme.POP){E.credentialType=r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;var w=te.extractTokenClaims(i,l);if(!((v=w===null||w===void 0?void 0:w.cnf)===null||v===void 0?void 0:v.kid)){throw Y.createTokenClaimsRequiredError()}E.keyId=w.cnf.kid}return E};AccessTokenEntity.isAccessTokenEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.hasOwnProperty("target")&&(t["credentialType"]===r.CredentialType.ACCESS_TOKEN||t["credentialType"]===r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME)};return AccessTokenEntity}(J);var _e=function(t){__extends(RefreshTokenEntity,t);function RefreshTokenEntity(){return t!==null&&t.apply(this,arguments)||this}RefreshTokenEntity.createRefreshTokenEntity=function(t,n,i,o,a,s){var c=new RefreshTokenEntity;c.clientId=o;c.credentialType=r.CredentialType.REFRESH_TOKEN;c.environment=n;c.homeAccountId=t;c.secret=i;c.oboAssertion=s;if(a)c.familyId=a;return c};RefreshTokenEntity.isRefreshTokenEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t["credentialType"]===r.CredentialType.REFRESH_TOKEN};return RefreshTokenEntity}(J);var Ee=["interaction_required","consent_required","login_required"];var be=["message_only","additional_action","basic_action","user_password_expired","consent_required"];var Se=function(t){__extends(InteractionRequiredAuthError,t);function InteractionRequiredAuthError(r,n,i){var o=t.call(this,r,n,i)||this;o.name="InteractionRequiredAuthError";Object.setPrototypeOf(o,InteractionRequiredAuthError.prototype);return o}InteractionRequiredAuthError.isInteractionRequiredError=function(t,r,n){var i=!!t&&Ee.indexOf(t)>-1;var o=!!n&&be.indexOf(n)>-1;var a=!!r&&Ee.some((function(t){return r.indexOf(t)>-1}));return i||a||o};return InteractionRequiredAuthError}(le);var Te=function(){function CacheRecord(t,r,n,i,o){this.account=t||null;this.idToken=r||null;this.accessToken=n||null;this.refreshToken=i||null;this.appMetadata=o||null}return CacheRecord}();var Ce=function(){function ProtocolUtils(){}ProtocolUtils.setRequestState=function(t,r,i){var o=ProtocolUtils.generateLibraryState(t,i);return!G.isEmpty(r)?""+o+n.RESOURCE_DELIM+r:o};ProtocolUtils.generateLibraryState=function(t,r){if(!t){throw Y.createNoCryptoObjectError("generateLibraryState")}var n={id:t.createNewGuid()};if(r){n.meta=r}var i=JSON.stringify(n);return t.base64Encode(i)};ProtocolUtils.parseRequestState=function(t,r){if(!t){throw Y.createNoCryptoObjectError("parseRequestState")}if(G.isEmpty(r)){throw Y.createInvalidStateError(r,"Null, undefined or empty state")}try{var i=r.split(n.RESOURCE_DELIM);var o=i[0];var a=i.length>1?i.slice(1).join(n.RESOURCE_DELIM):"";var s=t.base64Decode(o);var c=JSON.parse(s);return{userRequestState:!G.isEmpty(a)?a:"",libraryState:c}}catch(t){throw Y.createInvalidStateError(r,t)}};return ProtocolUtils}();var we=function(){function UrlString(t){this._urlString=t;if(G.isEmpty(this._urlString)){throw X.createUrlEmptyError()}if(G.isEmpty(this.getHash())){this._urlString=UrlString.canonicalizeUri(t)}}Object.defineProperty(UrlString.prototype,"urlString",{get:function(){return this._urlString},enumerable:false,configurable:true});UrlString.canonicalizeUri=function(t){if(t){var r=t.toLowerCase();if(G.endsWith(r,"?")){r=r.slice(0,-1)}else if(G.endsWith(r,"?/")){r=r.slice(0,-2)}if(!G.endsWith(r,"/")){r+="/"}return r}return t};UrlString.prototype.validateAsUri=function(){var t;try{t=this.getUrlComponents()}catch(t){throw X.createUrlParseError(t)}if(!t.HostNameAndPort||!t.PathSegments){throw X.createUrlParseError("Given url string: "+this.urlString)}if(!t.Protocol||t.Protocol.toLowerCase()!=="https:"){throw X.createInsecureAuthorityUriError(this.urlString)}};UrlString.prototype.urlRemoveQueryStringParameter=function(t){var r=new RegExp("(\\&"+t+"=)[^&]+");this._urlString=this.urlString.replace(r,"");r=new RegExp("("+t+"=)[^&]+&");this._urlString=this.urlString.replace(r,"");r=new RegExp("("+t+"=)[^&]+");this._urlString=this.urlString.replace(r,"");return this.urlString};UrlString.appendQueryString=function(t,r){if(G.isEmpty(r)){return t}return t.indexOf("?")<0?t+"?"+r:t+"&"+r};UrlString.removeHashFromUrl=function(t){return UrlString.canonicalizeUri(t.split("#")[0])};UrlString.prototype.replaceTenantPath=function(t){var r=this.getUrlComponents();var n=r.PathSegments;if(t&&(n.length!==0&&(n[0]===s.COMMON||n[0]===s.ORGANIZATIONS))){n[0]=t}return UrlString.constructAuthorityUriFromObject(r)};UrlString.prototype.getHash=function(){return UrlString.parseHash(this.urlString)};UrlString.prototype.getUrlComponents=function(){var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");var r=this.urlString.match(t);if(!r){throw X.createUrlParseError("Given url string: "+this.urlString)}var n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]};var i=n.AbsolutePath.split("/");i=i.filter((function(t){return t&&t.length>0}));n.PathSegments=i;if(!G.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")){n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)}return n};UrlString.getDomainFromUrl=function(t){var r=RegExp("^([^:/?#]+://)?([^/?#]*)");var n=t.match(r);if(!n){throw X.createUrlParseError("Given url string: "+t)}return n[2]};UrlString.getAbsoluteUrl=function(t,r){if(t[0]===n.FORWARD_SLASH){var i=new UrlString(r);var o=i.getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+t}return t};UrlString.parseHash=function(t){var r=t.indexOf("#");var n=t.indexOf("#/");if(n>-1){return t.substring(n+2)}else if(r>-1){return t.substring(r+1)}return""};UrlString.constructAuthorityUriFromObject=function(t){return new UrlString(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))};UrlString.getDeserializedHash=function(t){if(G.isEmpty(t)){return{}}var r=UrlString.parseHash(t);var n=G.queryStringToObject(G.isEmpty(r)?t:r);if(!n){throw Y.createHashNotDeserializedError(JSON.stringify(n))}return n};UrlString.hashContainsKnownProperties=function(t){if(G.isEmpty(t)){return false}var r=UrlString.getDeserializedHash(t);return!!(r.code||r.error_description||r.error||r.state)};return UrlString}();var Ae;(function(t){t["SW"]="sw";t["UHW"]="uhw"})(Ae||(Ae={}));var Ie=function(){function PopTokenGenerator(t){this.cryptoUtils=t}PopTokenGenerator.prototype.generateCnf=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.cryptoUtils.getPublicKeyThumbprint(t)];case 1:r=i.sent();n={kid:r,xms_ksl:Ae.SW};return[2,this.cryptoUtils.base64Encode(JSON.stringify(n))]}}))}))};PopTokenGenerator.prototype.signPopToken=function(t,r){var n;return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:i=te.extractTokenClaims(t,this.cryptoUtils);o=r.resourceRequestMethod,a=r.resourceRequestUri,s=r.shrClaims;c=a?new we(a):undefined;u=c===null||c===void 0?void 0:c.getUrlComponents();if(!((n=i===null||i===void 0?void 0:i.cnf)===null||n===void 0?void 0:n.kid)){throw Y.createTokenClaimsRequiredError()}return[4,this.cryptoUtils.signJwt({at:t,ts:ve.nowSeconds(),m:o===null||o===void 0?void 0:o.toUpperCase(),u:u===null||u===void 0?void 0:u.HostNameAndPort,nonce:this.cryptoUtils.createNewGuid(),p:u===null||u===void 0?void 0:u.AbsolutePath,q:(u===null||u===void 0?void 0:u.QueryString)?[[],u.QueryString]:undefined,client_claims:s||undefined},i.cnf.kid)];case 1:return[2,l.sent()]}}))}))};return PopTokenGenerator}();var Oe=function(){function AppMetadataEntity(){}AppMetadataEntity.prototype.generateAppMetadataKey=function(){return AppMetadataEntity.generateAppMetadataCacheKey(this.environment,this.clientId)};AppMetadataEntity.generateAppMetadataCacheKey=function(t,r){var n=[E,t,r];return n.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};AppMetadataEntity.createAppMetadataEntity=function(t,r,n){var i=new AppMetadataEntity;i.clientId=t;i.environment=r;if(n){i.familyId=n}return i};AppMetadataEntity.isAppMetadataEntity=function(t,r){if(!r){return false}return t.indexOf(E)===0&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("environment")};return AppMetadataEntity}();var Re=function(){function TokenCacheContext(t,r){this.cache=t;this.hasChanged=r}Object.defineProperty(TokenCacheContext.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:false,configurable:true});Object.defineProperty(TokenCacheContext.prototype,"tokenCache",{get:function(){return this.cache},enumerable:false,configurable:true});return TokenCacheContext}();var ke=function(){function ResponseHandler(t,r,n,i,o,a){this.clientId=t;this.cacheStorage=r;this.cryptoObj=n;this.logger=i;this.serializableCache=o;this.persistencePlugin=a}ResponseHandler.prototype.validateServerAuthorizationCodeResponse=function(t,r,i){if(!t.state||!r){throw!t.state?Y.createStateNotFoundError("Server State"):Y.createStateNotFoundError("Cached State")}if(decodeURIComponent(t.state)!==decodeURIComponent(r)){throw Y.createStateMismatchError()}if(t.error||t.error_description||t.suberror){if(Se.isInteractionRequiredError(t.error,t.error_description,t.suberror)){throw new Se(t.error||n.EMPTY_STRING,t.error_description,t.suberror)}throw new le(t.error||n.EMPTY_STRING,t.error_description,t.suberror)}if(t.client_info){buildClientInfo(t.client_info,i)}};ResponseHandler.prototype.validateTokenResponse=function(t){if(t.error||t.error_description||t.suberror){if(Se.isInteractionRequiredError(t.error,t.error_description,t.suberror)){throw new Se(t.error,t.error_description,t.suberror)}var r=t.error_codes+" - ["+t.timestamp+"]: "+t.error_description+" - Correlation ID: "+t.correlation_id+" - Trace ID: "+t.trace_id;throw new le(t.error,r,t.suberror)}};ResponseHandler.prototype.handleServerTokenResponse=function(t,r,i,o,a,s,c){return __awaiter(this,void 0,void 0,(function(){var u,l,d,p,g,v;return __generator(this,(function(E){switch(E.label){case 0:if(t.id_token){u=new te(t.id_token||n.EMPTY_STRING,this.cryptoObj);if(a&&!G.isEmpty(a.nonce)){if(u.claims.nonce!==a.nonce){throw Y.createNonceMismatchError()}}}this.homeAccountIdentifier=ee.generateHomeAccountId(t.client_info||n.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,u);if(!!a&&!!a.state){l=Ce.parseRequestState(this.cryptoObj,a.state)}d=this.generateCacheRecord(t,r,i,u,o.scopes,s,a);E.label=1;case 1:E.trys.push([1,,4,7]);if(!(this.persistencePlugin&&this.serializableCache))return[3,3];this.logger.verbose("Persistence enabled, calling beforeCacheAccess");p=new Re(this.serializableCache,true);return[4,this.persistencePlugin.beforeCacheAccess(p)];case 2:E.sent();E.label=3;case 3:if(c&&d.account){g=d.account.generateAccountKey();v=this.cacheStorage.getAccount(g);if(!v){this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache");return[2,ResponseHandler.generateAuthenticationResult(this.cryptoObj,r,d,false,o,u,l)]}}this.cacheStorage.saveCacheRecord(d);return[3,7];case 4:if(!(this.persistencePlugin&&this.serializableCache&&p))return[3,6];this.logger.verbose("Persistence enabled, calling afterCacheAccess");return[4,this.persistencePlugin.afterCacheAccess(p)];case 5:E.sent();E.label=6;case 6:return[7];case 7:return[2,ResponseHandler.generateAuthenticationResult(this.cryptoObj,r,d,false,o,u,l)]}}))}))};ResponseHandler.prototype.generateCacheRecord=function(t,r,i,o,a,s,c){var u=r.getPreferredCache();if(G.isEmpty(u)){throw Y.createInvalidCacheEnvironmentError()}var l;var d;if(!G.isEmpty(t.id_token)&&!!o){l=ge.createIdTokenEntity(this.homeAccountIdentifier,u,t.id_token||n.EMPTY_STRING,this.clientId,o.claims.tid||n.EMPTY_STRING,s);d=this.generateAccountEntity(t,o,r,s,c)}var p=null;if(!G.isEmpty(t.access_token)){var g=t.scope?Q.fromString(t.scope):new Q(a||[]);var v=(typeof t.expires_in==="string"?parseInt(t.expires_in,10):t.expires_in)||0;var E=(typeof t.ext_expires_in==="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0;var S=(typeof t.refresh_in==="string"?parseInt(t.refresh_in,10):t.refresh_in)||undefined;var w=i+v;var x=w+E;var N=S&&S>0?i+S:undefined;p=ye.createAccessTokenEntity(this.homeAccountIdentifier,u,t.access_token||n.EMPTY_STRING,this.clientId,o?o.claims.tid||n.EMPTY_STRING:r.tenant,g.printScopes(),w,x,this.cryptoObj,N,t.token_type,s)}var P=null;if(!G.isEmpty(t.refresh_token)){P=_e.createRefreshTokenEntity(this.homeAccountIdentifier,u,t.refresh_token||n.EMPTY_STRING,this.clientId,t.foci,s)}var D=null;if(!G.isEmpty(t.foci)){D=Oe.createAppMetadataEntity(this.clientId,u,t.foci)}return new Te(d,l,p,P,D)};ResponseHandler.prototype.generateAccountEntity=function(t,n,i,o,a){var s=i.authorityType;var c=a?a.cloud_graph_host_name:"";var u=a?a.msgraph_host:"";if(s===r.AuthorityType.Adfs){this.logger.verbose("Authority type is ADFS, creating ADFS account");return ee.createGenericAccount(i,this.homeAccountIdentifier,n,o,c,u)}if(G.isEmpty(t.client_info)&&i.protocolMode==="AAD"){throw Y.createClientInfoEmptyError()}return t.client_info?ee.createAccount(t.client_info,this.homeAccountIdentifier,i,n,o,c,u):ee.createGenericAccount(i,this.homeAccountIdentifier,n,o,c,u)};ResponseHandler.generateAuthenticationResult=function(t,i,o,a,s,c,u){var l,d,p;return __awaiter(this,void 0,void 0,(function(){var g,v,E,S,x,N,P,D;return __generator(this,(function(M){switch(M.label){case 0:g="";v=[];E=null;x=n.EMPTY_STRING;if(!o.accessToken)return[3,4];if(!(o.accessToken.tokenType===r.AuthenticationScheme.POP))return[3,2];N=new Ie(t);return[4,N.signPopToken(o.accessToken.secret,s)];case 1:g=M.sent();return[3,3];case 2:g=o.accessToken.secret;M.label=3;case 3:v=Q.fromString(o.accessToken.target).asArray();E=new Date(Number(o.accessToken.expiresOn)*1e3);S=new Date(Number(o.accessToken.extendedExpiresOn)*1e3);M.label=4;case 4:if(o.appMetadata){x=o.appMetadata.familyId===w?w:n.EMPTY_STRING}P=(c===null||c===void 0?void 0:c.claims.oid)||(c===null||c===void 0?void 0:c.claims.sub)||n.EMPTY_STRING;D=(c===null||c===void 0?void 0:c.claims.tid)||n.EMPTY_STRING;return[2,{authority:i.canonicalAuthority,uniqueId:P,tenantId:D,scopes:v,account:o.account?o.account.getAccountInfo():null,idToken:c?c.rawToken:n.EMPTY_STRING,idTokenClaims:c?c.claims:{},accessToken:g,fromCache:a,expiresOn:E,extExpiresOn:S,familyId:x,tokenType:((l=o.accessToken)===null||l===void 0?void 0:l.tokenType)||n.EMPTY_STRING,state:u?u.userRequestState:n.EMPTY_STRING,cloudGraphHostName:((d=o.account)===null||d===void 0?void 0:d.cloudGraphHostName)||n.EMPTY_STRING,msGraphHost:((p=o.account)===null||p===void 0?void 0:p.msGraphHost)||n.EMPTY_STRING}]}}))}))};return ResponseHandler}();var xe=function(t){__extends(AuthorizationCodeClient,t);function AuthorizationCodeClient(r){return t.call(this,r)||this}AuthorizationCodeClient.prototype.getAuthCodeUrl=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){r=this.createAuthCodeUrlQueryString(t);return[2,we.appendQueryString(this.authority.authorizationEndpoint,r)]}))}))};AuthorizationCodeClient.prototype.acquireToken=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(a){switch(a.label){case 0:this.logger.info("in acquireToken call");if(!t||G.isEmpty(t.code)){throw Y.createTokenRequestCannotBeMadeError()}n=ve.nowSeconds();return[4,this.executeTokenRequest(this.authority,t)];case 1:i=a.sent();o=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);o.validateTokenResponse(i.body);return[4,o.handleServerTokenResponse(i.body,this.authority,n,t,r)];case 2:return[2,a.sent()]}}))}))};AuthorizationCodeClient.prototype.handleFragmentResponse=function(t,r){var n=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null);var i=new we(t);var o=we.getDeserializedHash(i.getHash());n.validateServerAuthorizationCodeResponse(o,r,this.cryptoUtils);if(!o.code){throw Y.createNoAuthCodeInServerResponseError()}return __assign(__assign({},o),{code:o.code})};AuthorizationCodeClient.prototype.getLogoutUri=function(t){if(!t){throw X.createEmptyLogoutRequestError()}if(t.account){this.cacheManager.removeAccount(ee.generateAccountCacheKey(t.account))}else{this.cacheManager.clear()}var r=this.createLogoutUrlQueryString(t);return we.appendQueryString(this.authority.endSessionEndpoint,r)};AuthorizationCodeClient.prototype.executeTokenRequest=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u,l;return __generator(this,(function(d){switch(d.label){case 0:i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes};return[4,this.createTokenRequestBody(n)];case 1:o=d.sent();a=this.createTokenQueryParameters(n);s=undefined;if(n.clientInfo){try{c=buildClientInfo(n.clientInfo,this.cryptoUtils);s={credential:""+c.uid+v.CLIENT_INFO_SEPARATOR+c.utid,type:r.CcsCredentialType.HOME_ACCOUNT_ID}}catch(t){this.logger.verbose("Could not parse client info for CCS Header: "+t)}}u=this.createTokenRequestHeaders(s||n.ccsCredential);l=G.isEmpty(a)?t.tokenEndpoint:t.tokenEndpoint+"?"+a;return[2,this.executePostToTokenEndpoint(l,o,u,i)]}}))}))};AuthorizationCodeClient.prototype.createTokenQueryParameters=function(t){var r=new me;if(t.tokenQueryParameters){r.addExtraQueryParameters(t.tokenQueryParameters)}return r.createQueryString()};AuthorizationCodeClient.prototype.createTokenRequestBody=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,u,u;return __generator(this,(function(l){switch(l.label){case 0:n=new me;n.addClientId(this.config.authOptions.clientId);n.addRedirectUri(t.redirectUri);n.addScopes(t.scopes);n.addAuthorizationCode(t.code);n.addLibraryInfo(this.config.libraryInfo);n.addThrottling();if(this.serverTelemetryManager){n.addServerTelemetry(this.serverTelemetryManager)}if(t.codeVerifier){n.addCodeVerifier(t.codeVerifier)}if(this.config.clientCredentials.clientSecret){n.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){i=this.config.clientCredentials.clientAssertion;n.addClientAssertion(i.assertion);n.addClientAssertionType(i.assertionType)}n.addGrantType(g.AUTHORIZATION_CODE_GRANT);n.addClientInfo();if(!(t.authenticationScheme===r.AuthenticationScheme.POP))return[3,2];o=new Ie(this.cryptoUtils);return[4,o.generateCnf(t)];case 1:a=l.sent();n.addPopToken(a);l.label=2;case 2:s=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(s);if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}c=undefined;if(t.clientInfo){try{u=buildClientInfo(t.clientInfo,this.cryptoUtils);c={credential:""+u.uid+v.CLIENT_INFO_SEPARATOR+u.utid,type:r.CcsCredentialType.HOME_ACCOUNT_ID}}catch(t){this.logger.verbose("Could not parse client info for CCS Header: "+t)}}else{c=t.ccsCredential}if(this.config.systemOptions.preventCorsPreflight&&c){switch(c.type){case r.CcsCredentialType.HOME_ACCOUNT_ID:try{u=buildClientInfoFromHomeAccountId(c.credential);n.addCcsOid(u)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}break;case r.CcsCredentialType.UPN:n.addCcsUpn(c.credential);break}}return[2,n.createQueryString()]}}))}))};AuthorizationCodeClient.prototype.createAuthCodeUrlQueryString=function(t){var r=new me;r.addClientId(this.config.authOptions.clientId);var n=__spreadArrays(t.scopes||[],t.extraScopesToConsent||[]);r.addScopes(n);r.addRedirectUri(t.redirectUri);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(i);r.addResponseMode(t.responseMode);r.addResponseTypeCode();r.addLibraryInfo(this.config.libraryInfo);r.addClientInfo();if(t.codeChallenge&&t.codeChallengeMethod){r.addCodeChallengeParams(t.codeChallenge,t.codeChallengeMethod)}if(t.prompt){r.addPrompt(t.prompt)}if(t.domainHint){r.addDomainHint(t.domainHint)}if(t.prompt!==l.SELECT_ACCOUNT){if(t.sid&&t.prompt===l.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request");r.addSid(t.sid)}else if(t.account){var o=this.extractAccountSid(t.account);if(o&&t.prompt===l.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account");r.addSid(o);try{var a=buildClientInfoFromHomeAccountId(t.account.homeAccountId);r.addCcsOid(a)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}}else if(t.loginHint){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request");r.addLoginHint(t.loginHint);r.addCcsUpn(t.loginHint)}else if(t.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account");r.addLoginHint(t.account.username);try{var a=buildClientInfoFromHomeAccountId(t.account.homeAccountId);r.addCcsOid(a)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}}}else if(t.loginHint){this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request");r.addLoginHint(t.loginHint);r.addCcsUpn(t.loginHint)}}else{this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints")}if(t.nonce){r.addNonce(t.nonce)}if(t.state){r.addState(t.state)}if(!G.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}if(t.extraQueryParameters){r.addExtraQueryParameters(t.extraQueryParameters)}return r.createQueryString()};AuthorizationCodeClient.prototype.createLogoutUrlQueryString=function(t){var r=new me;if(t.postLogoutRedirectUri){r.addPostLogoutRedirectUri(t.postLogoutRedirectUri)}if(t.correlationId){r.addCorrelationId(t.correlationId)}if(t.idTokenHint){r.addIdTokenHint(t.idTokenHint)}return r.createQueryString()};AuthorizationCodeClient.prototype.extractAccountSid=function(t){if(t.idTokenClaims){var r=t.idTokenClaims;return r.sid||null}return null};return AuthorizationCodeClient}(pe);var Ne=function(t){__extends(DeviceCodeClient,t);function DeviceCodeClient(r){return t.call(this,r)||this}DeviceCodeClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.getDeviceCode(t)];case 1:r=a.sent();t.deviceCodeCallback(r);n=ve.nowSeconds();return[4,this.acquireTokenWithDeviceCode(t,r)];case 2:i=a.sent();o=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);o.validateTokenResponse(i);return[4,o.handleServerTokenResponse(i,this.authority,n,t)];case 3:return[2,a.sent()]}}))}))};DeviceCodeClient.prototype.getDeviceCode=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i;return __generator(this,(function(o){r=this.createQueryString(t);n=this.createTokenRequestHeaders();i={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes};return[2,this.executePostRequestToDeviceCodeEndpoint(this.authority.deviceCodeEndpoint,r,n,i)]}))}))};DeviceCodeClient.prototype.executePostRequestToDeviceCodeEndpoint=function(t,r,n,i){return __awaiter(this,void 0,void 0,(function(){var o,a,s,c,u,l,d;return __generator(this,(function(p){switch(p.label){case 0:return[4,this.networkManager.sendPostRequest(i,t,{body:r,headers:n})];case 1:o=p.sent().body,a=o.user_code,s=o.device_code,c=o.verification_uri,u=o.expires_in,l=o.interval,d=o.message;return[2,{userCode:a,deviceCode:s,verificationUri:c,expiresIn:u,interval:l,message:d}]}}))}))};DeviceCodeClient.prototype.createQueryString=function(t){var r=new me;r.addScopes(t.scopes);r.addClientId(this.config.authOptions.clientId);if(!G.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}return r.createQueryString()};DeviceCodeClient.prototype.continuePolling=function(t,r,n){if(n){this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true");throw Y.createDeviceCodeCancelledError()}else if(r&&r<t&&ve.nowSeconds()>r){this.logger.error("User defined timeout for device code polling reached. The timeout was set for "+r);throw Y.createUserTimeoutReachedError()}else if(ve.nowSeconds()>t){if(r){this.logger.verbose("User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for "+r)}this.logger.error("Device code expired. Expiration time of device code was "+t);throw Y.createDeviceCodeExpiredError()}return true};DeviceCodeClient.prototype.acquireTokenWithDeviceCode=function(t,r){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u,l;return __generator(this,(function(d){switch(d.label){case 0:i=this.createTokenRequestBody(t,r);o=this.createTokenRequestHeaders();a=t.timeout?ve.nowSeconds()+t.timeout:undefined;s=ve.nowSeconds()+r.expiresIn;c=r.interval*1e3;d.label=1;case 1:if(!this.continuePolling(s,a,t.cancel))return[3,6];u={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes};return[4,this.executePostToTokenEndpoint(this.authority.tokenEndpoint,i,o,u)];case 2:l=d.sent();if(!(l.body&&l.body.error===n.AUTHORIZATION_PENDING))return[3,4];this.logger.info(l.body.error_description||"Authorization pending. Continue polling.");return[4,ve.delay(c)];case 3:d.sent();return[3,5];case 4:this.logger.verbose("Authorization completed successfully. Polling stopped.");return[2,l.body];case 5:return[3,1];case 6:this.logger.error("Polling stopped for unknown reasons.");throw Y.createDeviceCodeUnknownError()}}))}))};DeviceCodeClient.prototype.createTokenRequestBody=function(t,r){var n=new me;n.addScopes(t.scopes);n.addClientId(this.config.authOptions.clientId);n.addGrantType(g.DEVICE_CODE_GRANT);n.addDeviceCode(r.deviceCode);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(i);n.addClientInfo();n.addLibraryInfo(this.config.libraryInfo);n.addThrottling();if(this.serverTelemetryManager){n.addServerTelemetry(this.serverTelemetryManager)}if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}return n.createQueryString()};return DeviceCodeClient}(pe);var Pe=function(t){__extends(RefreshTokenClient,t);function RefreshTokenClient(r){return t.call(this,r)||this}RefreshTokenClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i;return __generator(this,(function(o){switch(o.label){case 0:r=ve.nowSeconds();return[4,this.executeTokenRequest(t,this.authority)];case 1:n=o.sent();i=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);i.validateTokenResponse(n.body);return[2,i.handleServerTokenResponse(n.body,this.authority,r,t,undefined,undefined,true)]}}))}))};RefreshTokenClient.prototype.acquireTokenByRefreshToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i;return __generator(this,(function(o){if(!t){throw X.createEmptyTokenRequestError()}if(!t.account){throw Y.createNoAccountInSilentRequestError()}r=this.cacheManager.isAppMetadataFOCI(t.account.environment,this.config.authOptions.clientId);if(r){try{return[2,this.acquireTokenWithCachedRefreshToken(t,true)]}catch(r){n=r instanceof Y&&r.errorCode===V.noTokensFoundError.code;i=r instanceof le&&r.errorCode===M.INVALID_GRANT_ERROR&&r.subError===M.CLIENT_MISMATCH_ERROR;if(n||i){return[2,this.acquireTokenWithCachedRefreshToken(t,false)]}else{throw r}}}return[2,this.acquireTokenWithCachedRefreshToken(t,false)]}))}))};RefreshTokenClient.prototype.acquireTokenWithCachedRefreshToken=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(a){i=this.cacheManager.readRefreshTokenFromCache(this.config.authOptions.clientId,t.account,n);if(!i){throw Y.createNoTokensFoundError()}o=__assign(__assign({},t),{refreshToken:i.secret,authenticationScheme:t.authenticationScheme||r.AuthenticationScheme.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:r.CcsCredentialType.HOME_ACCOUNT_ID}});return[2,this.acquireToken(o)]}))}))};RefreshTokenClient.prototype.executeTokenRequest=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return __generator(this,(function(c){switch(c.label){case 0:return[4,this.createTokenRequestBody(t)];case 1:n=c.sent();i=this.createTokenQueryParameters(t);o=this.createTokenRequestHeaders(t.ccsCredential);a={clientId:this.config.authOptions.clientId,authority:r.canonicalAuthority,scopes:t.scopes};s=we.appendQueryString(r.tokenEndpoint,i);return[2,this.executePostToTokenEndpoint(s,n,o,a)]}}))}))};RefreshTokenClient.prototype.createTokenQueryParameters=function(t){var r=new me;if(t.tokenQueryParameters){r.addExtraQueryParameters(t.tokenQueryParameters)}return r.createQueryString()};RefreshTokenClient.prototype.createTokenRequestBody=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:n=new me;n.addClientId(this.config.authOptions.clientId);n.addScopes(t.scopes);n.addGrantType(g.REFRESH_TOKEN_GRANT);n.addClientInfo();n.addLibraryInfo(this.config.libraryInfo);n.addThrottling();if(this.serverTelemetryManager){n.addServerTelemetry(this.serverTelemetryManager)}i=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(i);n.addRefreshToken(t.refreshToken);if(this.config.clientCredentials.clientSecret){n.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion);n.addClientAssertionType(o.assertionType)}if(!(t.authenticationScheme===r.AuthenticationScheme.POP))return[3,2];a=new Ie(this.cryptoUtils);c=(s=n).addPopToken;return[4,a.generateCnf(t)];case 1:c.apply(s,[l.sent()]);l.label=2;case 2:if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}if(this.config.systemOptions.preventCorsPreflight&&t.ccsCredential){switch(t.ccsCredential.type){case r.CcsCredentialType.HOME_ACCOUNT_ID:try{u=buildClientInfoFromHomeAccountId(t.ccsCredential.credential);n.addCcsOid(u)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}break;case r.CcsCredentialType.UPN:n.addCcsUpn(t.ccsCredential.credential);break}}return[2,n.createQueryString()]}}))}))};return RefreshTokenClient}(pe);var De=function(t){__extends(ClientCredentialClient,t);function ClientCredentialClient(r){return t.call(this,r)||this}ClientCredentialClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:this.scopeSet=new Q(t.scopes||[]);if(!t.skipCache)return[3,2];return[4,this.executeTokenRequest(t,this.authority)];case 1:return[2,n.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:r=n.sent();if(!r)return[3,4];return[2,r];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,n.sent()]}}))}))};ClientCredentialClient.prototype.getCachedAuthenticationResult=function(t){var r,n;return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:i=this.readAccessTokenFromCache();if(!i){(r=this.serverTelemetryManager)===null||r===void 0?void 0:r.setCacheOutcome(F.NO_CACHED_ACCESS_TOKEN);return[2,null]}if(ve.isTokenExpired(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)){(n=this.serverTelemetryManager)===null||n===void 0?void 0:n.setCacheOutcome(F.CACHED_ACCESS_TOKEN_EXPIRED);return[2,null]}return[4,ke.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:null,idToken:null,accessToken:i,refreshToken:null,appMetadata:null},true,t)];case 1:return[2,o.sent()]}}))}))};ClientCredentialClient.prototype.readAccessTokenFromCache=function(){var t={homeAccountId:"",environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:r.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()};var n=this.cacheManager.getCredentialsFilteredBy(t);var i=Object.keys(n.accessTokens).map((function(t){return n.accessTokens[t]}));if(i.length<1){return null}else if(i.length>1){throw Y.createMultipleMatchingTokensInCacheError()}return i[0]};ClientCredentialClient.prototype.executeTokenRequest=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:n=this.createTokenRequestBody(t);i=this.createTokenRequestHeaders();o={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes};a=ve.nowSeconds();return[4,this.executePostToTokenEndpoint(r.tokenEndpoint,n,i,o)];case 1:s=l.sent();c=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);c.validateTokenResponse(s.body);return[4,c.handleServerTokenResponse(s.body,this.authority,a,t)];case 2:u=l.sent();return[2,u]}}))}))};ClientCredentialClient.prototype.createTokenRequestBody=function(t){var r=new me;r.addClientId(this.config.authOptions.clientId);r.addScopes(t.scopes,false);r.addGrantType(g.CLIENT_CREDENTIALS_GRANT);r.addLibraryInfo(this.config.libraryInfo);r.addThrottling();if(this.serverTelemetryManager){r.addServerTelemetry(this.serverTelemetryManager)}var n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n);if(this.config.clientCredentials.clientSecret){r.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){var i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(i.assertion);r.addClientAssertionType(i.assertionType)}if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}return r.createQueryString()};return ClientCredentialClient}(pe);var Me=function(t){__extends(OnBehalfOfClient,t);function OnBehalfOfClient(r){return t.call(this,r)||this}OnBehalfOfClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:this.scopeSet=new Q(t.scopes||[]);if(!t.skipCache)return[3,2];return[4,this.executeTokenRequest(t,this.authority)];case 1:return[2,n.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:r=n.sent();if(!r)return[3,4];return[2,r];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,n.sent()]}}))}))};OnBehalfOfClient.prototype.getCachedAuthenticationResult=function(t){var r;return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:i=this.readAccessTokenFromCache();if(!i||ve.isTokenExpired(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)){(r=this.serverTelemetryManager)===null||r===void 0?void 0:r.setCacheOutcome(!i?F.CACHED_ACCESS_TOKEN_EXPIRED:F.NO_CACHED_ACCESS_TOKEN);return[2,null]}o=this.readIdTokenFromCache(t);s=null;if(o){a=new te(o.secret,this.config.cryptoInterface);c=a.claims.oid?a.claims.oid:a.claims.sub;u={homeAccountId:o.homeAccountId,environment:o.environment,tenantId:o.realm,username:n.EMPTY_STRING,localAccountId:c||""};s=this.readAccountFromCache(u)}return[4,ke.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:i,idToken:o,refreshToken:null,appMetadata:null},true,t,a)];case 1:return[2,l.sent()]}}))}))};OnBehalfOfClient.prototype.readAccessTokenFromCache=function(){var t={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:r.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()};var n=this.cacheManager.getCredentialsFilteredBy(t);var i=Object.keys(n.accessTokens).map((function(t){return n.accessTokens[t]}));var o=i.length;if(o<1){return null}else if(o>1){throw Y.createMultipleMatchingTokensInCacheError()}return i[0]};OnBehalfOfClient.prototype.readIdTokenFromCache=function(t){var n={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:r.CredentialType.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,oboAssertion:t.oboAssertion};var i=this.cacheManager.getCredentialsFilteredBy(n);var o=Object.keys(i.idTokens).map((function(t){return i.idTokens[t]}));if(o.length<1){return null}return o[0]};OnBehalfOfClient.prototype.readAccountFromCache=function(t){return this.cacheManager.readAccountFromCache(t)};OnBehalfOfClient.prototype.executeTokenRequest=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:n=this.createTokenRequestBody(t);i=this.createTokenRequestHeaders();o={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes};a=ve.nowSeconds();return[4,this.executePostToTokenEndpoint(r.tokenEndpoint,n,i,o)];case 1:s=l.sent();c=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);c.validateTokenResponse(s.body);return[4,c.handleServerTokenResponse(s.body,this.authority,a,t)];case 2:u=l.sent();return[2,u]}}))}))};OnBehalfOfClient.prototype.createTokenRequestBody=function(t){var r=new me;r.addClientId(this.config.authOptions.clientId);r.addScopes(t.scopes);r.addGrantType(g.JWT_BEARER);r.addClientInfo();r.addLibraryInfo(this.config.libraryInfo);r.addThrottling();if(this.serverTelemetryManager){r.addServerTelemetry(this.serverTelemetryManager)}var n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n);r.addRequestTokenUse(c.ON_BEHALF_OF);r.addOboAssertion(t.oboAssertion);if(this.config.clientCredentials.clientSecret){r.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){var i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(i.assertion);r.addClientAssertionType(i.assertionType)}return r.createQueryString()};return OnBehalfOfClient}(pe);var Le=function(t){__extends(SilentFlowClient,t);function SilentFlowClient(r){return t.call(this,r)||this}SilentFlowClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,this.acquireCachedToken(t)];case 1:return[2,i.sent()];case 2:r=i.sent();if(r instanceof Y&&r.errorCode===V.tokenRefreshRequired.code){n=new Pe(this.config);return[2,n.acquireTokenByRefreshToken(t)]}else{throw r}case 3:return[2]}}))}))};SilentFlowClient.prototype.acquireCachedToken=function(t){var n,i,o,a;return __awaiter(this,void 0,void 0,(function(){var s,c,u,l;return __generator(this,(function(d){switch(d.label){case 0:if(!t){throw X.createEmptyTokenRequestError()}if(!t.account){throw Y.createNoAccountInSilentRequestError()}s=new Q(t.scopes||[]);c=t.authority||this.authority.getPreferredCache();u=t.authenticationScheme||r.AuthenticationScheme.BEARER;l=this.cacheManager.readCacheRecord(t.account,this.config.authOptions.clientId,s,c,u);if(t.forceRefresh){(n=this.serverTelemetryManager)===null||n===void 0?void 0:n.setCacheOutcome(F.FORCE_REFRESH);throw Y.createRefreshRequiredError()}else if(!l.accessToken){(i=this.serverTelemetryManager)===null||i===void 0?void 0:i.setCacheOutcome(F.NO_CACHED_ACCESS_TOKEN);throw Y.createRefreshRequiredError()}else if(ve.wasClockTurnedBack(l.accessToken.cachedAt)||ve.isTokenExpired(l.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)){(o=this.serverTelemetryManager)===null||o===void 0?void 0:o.setCacheOutcome(F.CACHED_ACCESS_TOKEN_EXPIRED);throw Y.createRefreshRequiredError()}else if(l.accessToken.refreshOn&&ve.isTokenExpired(l.accessToken.refreshOn,0)){(a=this.serverTelemetryManager)===null||a===void 0?void 0:a.setCacheOutcome(F.REFRESH_CACHED_ACCESS_TOKEN);throw Y.createRefreshRequiredError()}else if(!G.isEmptyObj(t.claims)){throw Y.createRefreshRequiredError()}if(this.config.serverTelemetryManager){this.config.serverTelemetryManager.incrementCacheHits()}return[4,this.generateResultFromCacheRecord(l,t)];case 1:return[2,d.sent()]}}))}))};SilentFlowClient.prototype.generateResultFromCacheRecord=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:if(t.idToken){n=new te(t.idToken.secret,this.config.cryptoInterface)}return[4,ke.generateAuthenticationResult(this.cryptoUtils,this.authority,t,true,r,n)];case 1:return[2,i.sent()]}}))}))};return SilentFlowClient}(pe);var Ue=function(t){__extends(UsernamePasswordClient,t);function UsernamePasswordClient(r){return t.call(this,r)||this}UsernamePasswordClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:this.logger.info("in acquireToken call");r=ve.nowSeconds();return[4,this.executeTokenRequest(this.authority,t)];case 1:n=a.sent();i=new ke(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);i.validateTokenResponse(n.body);o=i.handleServerTokenResponse(n.body,this.authority,r,t);return[2,o]}}))}))};UsernamePasswordClient.prototype.executeTokenRequest=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a;return __generator(this,(function(s){i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes};o=this.createTokenRequestBody(n);a=this.createTokenRequestHeaders({credential:n.username,type:r.CcsCredentialType.UPN});return[2,this.executePostToTokenEndpoint(t.tokenEndpoint,o,a,i)]}))}))};UsernamePasswordClient.prototype.createTokenRequestBody=function(t){var r=new me;r.addClientId(this.config.authOptions.clientId);r.addUsername(t.username);r.addPassword(t.password);r.addScopes(t.scopes);r.addGrantType(g.RESOURCE_OWNER_PASSWORD_GRANT);r.addClientInfo();r.addLibraryInfo(this.config.libraryInfo);r.addThrottling();if(this.serverTelemetryManager){r.addServerTelemetry(this.serverTelemetryManager)}var n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n);if(this.config.clientCredentials.clientSecret){r.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){var i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(i.assertion);r.addClientAssertionType(i.assertionType)}if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}if(this.config.systemOptions.preventCorsPreflight&&t.username){r.addCcsUpn(t.username)}return r.createQueryString()};return UsernamePasswordClient}(pe);function isOpenIdConfigResponse(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("end_session_endpoint")&&t.hasOwnProperty("issuer")}r.ProtocolMode=void 0;(function(t){t["AAD"]="AAD";t["OIDC"]="OIDC"})(r.ProtocolMode||(r.ProtocolMode={}));var qe=function(){function AuthorityMetadataEntity(){this.expiresAt=ve.nowSeconds()+x.REFRESH_TIME_SECONDS}AuthorityMetadataEntity.prototype.updateCloudDiscoveryMetadata=function(t,r){this.aliases=t.aliases;this.preferred_cache=t.preferred_cache;this.preferred_network=t.preferred_network;this.aliasesFromNetwork=r};AuthorityMetadataEntity.prototype.updateEndpointMetadata=function(t,r){this.authorization_endpoint=t.authorization_endpoint;this.token_endpoint=t.token_endpoint;this.end_session_endpoint=t.end_session_endpoint;this.issuer=t.issuer;this.endpointsFromNetwork=r};AuthorityMetadataEntity.prototype.updateCanonicalAuthority=function(t){this.canonical_authority=t};AuthorityMetadataEntity.prototype.resetExpiresAt=function(){this.expiresAt=ve.nowSeconds()+x.REFRESH_TIME_SECONDS};AuthorityMetadataEntity.prototype.isExpired=function(){return this.expiresAt<=ve.nowSeconds()};AuthorityMetadataEntity.isAuthorityMetadataEntity=function(t,r){if(!r){return false}return t.indexOf(x.CACHE_KEY)===0&&r.hasOwnProperty("aliases")&&r.hasOwnProperty("preferred_cache")&&r.hasOwnProperty("preferred_network")&&r.hasOwnProperty("canonical_authority")&&r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("end_session_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("aliasesFromNetwork")&&r.hasOwnProperty("endpointsFromNetwork")&&r.hasOwnProperty("expiresAt")};return AuthorityMetadataEntity}();function isCloudInstanceDiscoveryResponse(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}var Be=function(){function RegionDiscovery(t){this.networkInterface=t}RegionDiscovery.prototype.detectRegion=function(t,r){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s;return __generator(this,(function(c){switch(c.label){case 0:i=t;if(!!i)return[3,8];c.label=1;case 1:c.trys.push([1,6,,7]);return[4,this.getRegionFromIMDS(n.IMDS_VERSION)];case 2:o=c.sent();if(o.status===U.httpSuccess){i=o.body;r.region_source=q.IMDS}if(!(o.status===U.httpBadRequest))return[3,5];return[4,this.getCurrentVersion()];case 3:a=c.sent();if(!a){r.region_source=q.FAILED_AUTO_DETECTION;return[2,null]}return[4,this.getRegionFromIMDS(a)];case 4:s=c.sent();if(s.status===U.httpSuccess){i=s.body;r.region_source=q.IMDS}c.label=5;case 5:return[3,7];case 6:c.sent();r.region_source=q.FAILED_AUTO_DETECTION;return[2,null];case 7:return[3,9];case 8:r.region_source=q.ENVIRONMENT_VARIABLE;c.label=9;case 9:if(!i){r.region_source=q.FAILED_AUTO_DETECTION}return[2,i||null]}}))}))};RegionDiscovery.prototype.getRegionFromIMDS=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,this.networkInterface.sendGetRequestAsync(n.IMDS_ENDPOINT+"?api-version="+t+"&format=text",RegionDiscovery.IMDS_OPTIONS,n.IMDS_TIMEOUT)]}))}))};RegionDiscovery.prototype.getCurrentVersion=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,this.networkInterface.sendGetRequestAsync(n.IMDS_ENDPOINT+"?format=json",RegionDiscovery.IMDS_OPTIONS)];case 1:t=r.sent();if(t.status===U.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0){return[2,t.body["newest-versions"][0]]}return[2,null];case 2:r.sent();return[2,null];case 3:return[2]}}))}))};RegionDiscovery.IMDS_OPTIONS={headers:{Metadata:"true"}};return RegionDiscovery}();var Fe=function(){function Authority(t,r,n,i){this.canonicalAuthority=t;this._canonicalAuthority.validateAsUri();this.networkInterface=r;this.cacheManager=n;this.authorityOptions=i;this.regionDiscovery=new Be(r);this.regionDiscoveryMetadata={region_used:undefined,region_source:undefined,region_outcome:undefined}}Object.defineProperty(Authority.prototype,"authorityType",{get:function(){var t=this.canonicalAuthorityUrlComponents.PathSegments;if(t.length&&t[0].toLowerCase()===n.ADFS){return r.AuthorityType.Adfs}return r.AuthorityType.Default},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"options",{get:function(){return this.authorityOptions},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(t){this._canonicalAuthority=new we(t);this._canonicalAuthority.validateAsUri();this._canonicalAuthorityUrlComponents=null},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"canonicalAuthorityUrlComponents",{get:function(){if(!this._canonicalAuthorityUrlComponents){this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()}return this._canonicalAuthorityUrlComponents},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.authorization_endpoint);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.token_endpoint);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.end_session_endpoint);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.issuer);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Authority.prototype.replaceTenant=function(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)};Authority.prototype.replacePath=function(t){var r=t;var n=new we(this.metadata.canonical_authority);var i=n.getUrlComponents().PathSegments;var o=this.canonicalAuthorityUrlComponents.PathSegments;o.forEach((function(t,n){var o=i[n];if(t!==o){r=r.replace("/"+o+"/","/"+t+"/")}}));return r};Object.defineProperty(Authority.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){if(this.authorityType===r.AuthorityType.Adfs||this.protocolMode===r.ProtocolMode.OIDC){return this.canonicalAuthority+".well-known/openid-configuration"}return this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:false,configurable:true});Authority.prototype.discoveryComplete=function(){return!!this.metadata};Authority.prototype.resolveEndpointsAsync=function(){return __awaiter(this,void 0,void 0,(function(){var t,r,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);if(!t){t=new qe;t.updateCanonicalAuthority(this.canonicalAuthority)}return[4,this.updateCloudDiscoveryMetadata(t)];case 1:r=o.sent();this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,t.preferred_network);return[4,this.updateEndpointMetadata(t)];case 2:n=o.sent();if(r!==N.CACHE&&n!==N.CACHE){t.resetExpiresAt();t.updateCanonicalAuthority(this.canonicalAuthority)}i=this.cacheManager.generateAuthorityMetadataCacheKey(t.preferred_cache);this.cacheManager.setAuthorityMetadata(i,t);this.metadata=t;return[2]}}))}))};Authority.prototype.updateEndpointMetadata=function(t){var r;return __awaiter(this,void 0,void 0,(function(){var i,o,a;return __generator(this,(function(s){switch(s.label){case 0:i=this.getEndpointMetadataFromConfig();if(i){t.updateEndpointMetadata(i,false);return[2,N.CONFIG]}if(this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!t.isExpired()){return[2,N.CACHE]}return[4,this.getEndpointMetadataFromNetwork()];case 1:i=s.sent();if(!i)return[3,4];if(!((r=this.authorityOptions.azureRegionConfiguration)===null||r===void 0?void 0:r.azureRegion))return[3,3];return[4,this.regionDiscovery.detectRegion(this.authorityOptions.azureRegionConfiguration.environmentRegion,this.regionDiscoveryMetadata)];case 2:o=s.sent();a=this.authorityOptions.azureRegionConfiguration.azureRegion===n.AZURE_REGION_AUTO_DISCOVER_FLAG?o:this.authorityOptions.azureRegionConfiguration.azureRegion;if(this.authorityOptions.azureRegionConfiguration.azureRegion===n.AZURE_REGION_AUTO_DISCOVER_FLAG){this.regionDiscoveryMetadata.region_outcome=o?B.AUTO_DETECTION_REQUESTED_SUCCESSFUL:B.AUTO_DETECTION_REQUESTED_FAILED}else{if(o){this.regionDiscoveryMetadata.region_outcome=this.authorityOptions.azureRegionConfiguration.azureRegion===o?B.CONFIGURED_MATCHES_DETECTED:B.CONFIGURED_NOT_DETECTED}else{this.regionDiscoveryMetadata.region_outcome=B.CONFIGURED_NO_AUTO_DETECTION}}if(a){this.regionDiscoveryMetadata.region_used=a;i=Authority.replaceWithRegionalInformation(i,a)}s.label=3;case 3:t.updateEndpointMetadata(i,true);return[2,N.NETWORK];case 4:throw Y.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}}))}))};Authority.prototype.isAuthoritySameType=function(t){var r=new we(t.canonical_authority);var n=r.getUrlComponents().PathSegments;return n.length===this.canonicalAuthorityUrlComponents.PathSegments.length};Authority.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata){try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(t){throw X.createInvalidAuthorityMetadataError()}}return null};Authority.prototype.getEndpointMetadataFromNetwork=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint)];case 1:t=r.sent();return[2,isOpenIdConfigResponse(t.body)?t.body:null];case 2:r.sent();return[2,null];case 3:return[2]}}))}))};Authority.prototype.updateCloudDiscoveryMetadata=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:r=this.getCloudDiscoveryMetadataFromConfig();if(r){t.updateCloudDiscoveryMetadata(r,false);return[2,N.CONFIG]}if(this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!t.isExpired()){return[2,N.CACHE]}return[4,this.getCloudDiscoveryMetadataFromNetwork()];case 1:r=n.sent();if(r){t.updateCloudDiscoveryMetadata(r,true);return[2,N.NETWORK]}else{throw X.createUntrustedAuthorityError()}}}))}))};Authority.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityOptions.cloudDiscoveryMetadata){try{var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata);var r=Authority.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(r){return r}}catch(t){throw X.createInvalidCloudDiscoveryMetadataError()}}if(this.isInKnownAuthorities()){return Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)}return null};Authority.prototype.getCloudDiscoveryMetadataFromNetwork=function(){return __awaiter(this,void 0,void 0,(function(){var t,r,i,o;return __generator(this,(function(a){switch(a.label){case 0:t=""+n.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize";r=null;a.label=1;case 1:a.trys.push([1,3,,4]);return[4,this.networkInterface.sendGetRequestAsync(t)];case 2:i=a.sent();o=isCloudInstanceDiscoveryResponse(i.body)?i.body.metadata:[];if(o.length===0){return[2,null]}r=Authority.getCloudDiscoveryMetadataFromNetworkResponse(o,this.hostnameAndPort);return[3,4];case 3:a.sent();return[2,null];case 4:if(!r){r=Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)}return[2,r]}}))}))};Authority.prototype.isInKnownAuthorities=function(){var t=this;var r=this.authorityOptions.knownAuthorities.filter((function(r){return we.getDomainFromUrl(r).toLowerCase()===t.hostnameAndPort}));return r.length>0};Authority.createCloudDiscoveryMetadataFromHost=function(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}};Authority.getCloudDiscoveryMetadataFromNetworkResponse=function(t,r){for(var n=0;n<t.length;n++){var i=t[n];if(i.aliases.indexOf(r)>-1){return i}}return null};Authority.prototype.getPreferredCache=function(){if(this.discoveryComplete()){return this.metadata.preferred_cache}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}};Authority.prototype.isAlias=function(t){return this.metadata.aliases.indexOf(t)>-1};Authority.isPublicCloudAuthority=function(t){return n.KNOWN_PUBLIC_CLOUDS.indexOf(t)>=0};Authority.buildRegionalAuthorityString=function(t,r,i){var o=new we(t);o.validateAsUri();var a=o.getUrlComponents();var s=r+"."+a.HostNameAndPort;if(this.isPublicCloudAuthority(a.HostNameAndPort)){s=r+"."+n.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}var c=we.constructAuthorityUriFromObject(__assign(__assign({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;if(i)return c+"?"+i;return c};Authority.replaceWithRegionalInformation=function(t,r){t.authorization_endpoint=Authority.buildRegionalAuthorityString(t.authorization_endpoint,r);t.token_endpoint=Authority.buildRegionalAuthorityString(t.token_endpoint,r,"allowestsrnonmsi=true");t.end_session_endpoint=Authority.buildRegionalAuthorityString(t.end_session_endpoint,r);return t};return Authority}();var je=function(){function AuthorityFactory(){}AuthorityFactory.createDiscoveredInstance=function(t,r,n,i){return __awaiter(this,void 0,void 0,(function(){var o,a;return __generator(this,(function(s){switch(s.label){case 0:o=AuthorityFactory.createInstance(t,r,n,i);s.label=1;case 1:s.trys.push([1,3,,4]);return[4,o.resolveEndpointsAsync()];case 2:s.sent();return[2,o];case 3:a=s.sent();throw Y.createEndpointDiscoveryIncompleteError(a);case 4:return[2]}}))}))};AuthorityFactory.createInstance=function(t,r,n,i){if(G.isEmpty(t)){throw X.createUrlEmptyError()}return new Fe(t,r,n,i)};return AuthorityFactory}();var He=function(){function ServerTelemetryEntity(){this.failedRequests=[];this.errors=[];this.cacheHits=0}ServerTelemetryEntity.isServerTelemetryEntity=function(t,r){var n=t.indexOf(P.CACHE_KEY)===0;var i=true;if(r){i=r.hasOwnProperty("failedRequests")&&r.hasOwnProperty("errors")&&r.hasOwnProperty("cacheHits")}return n&&i};return ServerTelemetryEntity}();var ze=function(){function ThrottlingEntity(){}ThrottlingEntity.isThrottlingEntity=function(t,r){var n=false;if(t){n=t.indexOf(D.THROTTLING_PREFIX)===0}var i=true;if(r){i=r.hasOwnProperty("throttleTime")}return n&&i};return ThrottlingEntity}();var Ve={sendGetRequestAsync:function(){var t="Network interface - sendGetRequestAsync() has not been implemented for the Network interface.";return Promise.reject(H.createUnexpectedError(t))},sendPostRequestAsync:function(){var t="Network interface - sendPostRequestAsync() has not been implemented for the Network interface.";return Promise.reject(H.createUnexpectedError(t))}};var Ye=function(){function ServerTelemetryManager(t,r){this.cacheOutcome=F.NO_CACHE_HIT;this.cacheManager=r;this.apiId=t.apiId;this.correlationId=t.correlationId;this.wrapperSKU=t.wrapperSKU||n.EMPTY_STRING;this.wrapperVer=t.wrapperVer||n.EMPTY_STRING;this.telemetryCacheKey=P.CACHE_KEY+v.CACHE_KEY_SEPARATOR+t.clientId}ServerTelemetryManager.prototype.generateCurrentRequestHeaderValue=function(){var t=""+this.apiId+P.VALUE_SEPARATOR+this.cacheOutcome;var r=[this.wrapperSKU,this.wrapperVer].join(P.VALUE_SEPARATOR);var n=this.getRegionDiscoveryFields();var i=[t,n].join(P.VALUE_SEPARATOR);return[P.SCHEMA_VERSION,i,r].join(P.CATEGORY_SEPARATOR)};ServerTelemetryManager.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests();var r=ServerTelemetryManager.maxErrorsToSend(t);var n=t.failedRequests.slice(0,2*r).join(P.VALUE_SEPARATOR);var i=t.errors.slice(0,r).join(P.VALUE_SEPARATOR);var o=t.errors.length;var a=r<o?P.OVERFLOW_TRUE:P.OVERFLOW_FALSE;var s=[o,a].join(P.VALUE_SEPARATOR);return[P.SCHEMA_VERSION,t.cacheHits,n,i,s].join(P.CATEGORY_SEPARATOR)};ServerTelemetryManager.prototype.cacheFailedRequest=function(t){var r=this.getLastRequests();if(r.errors.length>=P.MAX_CACHED_ERRORS){r.failedRequests.shift();r.failedRequests.shift();r.errors.shift()}r.failedRequests.push(this.apiId,this.correlationId);if(!G.isEmpty(t.subError)){r.errors.push(t.subError)}else if(!G.isEmpty(t.errorCode)){r.errors.push(t.errorCode)}else if(!!t&&t.toString()){r.errors.push(t.toString())}else{r.errors.push(P.UNKNOWN_ERROR)}this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r);return};ServerTelemetryManager.prototype.incrementCacheHits=function(){var t=this.getLastRequests();t.cacheHits+=1;this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t);return t.cacheHits};ServerTelemetryManager.prototype.getLastRequests=function(){var t=new He;var r=this.cacheManager.getServerTelemetry(this.telemetryCacheKey);return r||t};ServerTelemetryManager.prototype.clearTelemetryCache=function(){var t=this.getLastRequests();var r=ServerTelemetryManager.maxErrorsToSend(t);var n=t.errors.length;if(r===n){this.cacheManager.removeItem(this.telemetryCacheKey)}else{var i=new He;i.failedRequests=t.failedRequests.slice(r*2);i.errors=t.errors.slice(r);this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i)}};ServerTelemetryManager.maxErrorsToSend=function(t){var r;var i=0;var o=0;var a=t.errors.length;for(r=0;r<a;r++){var s=t.failedRequests[2*r]||n.EMPTY_STRING;var c=t.failedRequests[2*r+1]||n.EMPTY_STRING;var u=t.errors[r]||n.EMPTY_STRING;o+=s.toString().length+c.toString().length+u.length+3;if(o<P.MAX_LAST_HEADER_BYTES){i+=1}else{break}}return i};ServerTelemetryManager.prototype.getRegionDiscoveryFields=function(){var t=[];t.push(this.regionUsed||"");t.push(this.regionSource||"");t.push(this.regionOutcome||"");return t.join(",")};ServerTelemetryManager.prototype.updateRegionDiscoveryMetadata=function(t){this.regionUsed=t.region_used;this.regionSource=t.region_source;this.regionOutcome=t.region_outcome};ServerTelemetryManager.prototype.setCacheOutcome=function(t){this.cacheOutcome=t};return ServerTelemetryManager}();r.AccessTokenEntity=ye;r.AccountEntity=ee;r.AppMetadataEntity=Oe;r.AuthError=H;r.AuthErrorMessage=j;r.AuthToken=te;r.Authority=Fe;r.AuthorityFactory=je;r.AuthorityMetadataEntity=qe;r.AuthorizationCodeClient=xe;r.CacheManager=re;r.ClientAuthError=Y;r.ClientAuthErrorMessage=V;r.ClientConfigurationError=X;r.ClientConfigurationErrorMessage=Z;r.ClientCredentialClient=De;r.Constants=n;r.CredentialEntity=J;r.DEFAULT_CRYPTO_IMPLEMENTATION=z;r.DEFAULT_SYSTEM_OPTIONS=oe;r.DefaultStorageClass=ne;r.DeviceCodeClient=Ne;r.IdToken=te;r.IdTokenEntity=ge;r.InteractionRequiredAuthError=Se;r.Logger=W;r.NetworkManager=de;r.OIDC_DEFAULT_SCOPES=i;r.OnBehalfOfClient=Me;r.PromptValue=l;r.ProtocolUtils=Ce;r.RefreshTokenClient=Pe;r.RefreshTokenEntity=_e;r.ServerError=le;r.ServerTelemetryEntity=He;r.ServerTelemetryManager=Ye;r.SilentFlowClient=Le;r.StringUtils=G;r.StubbedNetworkModule=Ve;r.ThrottlingEntity=ze;r.ThrottlingUtils=fe;r.TimeUtils=ve;r.TokenCacheContext=Re;r.UrlString=we;r.UsernamePasswordClient=Ue},12884:(t,r,n)=>{"use strict";if(process.env.NODE_ENV==="production"){t.exports=n(29802)}else{t.exports=n(55674)}},55674:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});function _interopDefault(t){return t&&typeof t==="object"&&"default"in t?t["default"]:t}var i=n(73998);var o=_interopDefault(n(96545));var a=_interopDefault(n(77219));var s=n(8786);var c=_interopDefault(n(6113));var u=n(77486);var l;(function(t){t["GET"]="get";t["POST"]="post"})(l||(l={}));const d="REGION_NAME";const p=32;const g={SHA256:"sha256"};const v={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"};const E={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"};var S;(function(t){t[t["acquireTokenSilent"]=62]="acquireTokenSilent";t[t["acquireTokenByUsernamePassword"]=371]="acquireTokenByUsernamePassword";t[t["acquireTokenByDeviceCode"]=671]="acquireTokenByDeviceCode";t[t["acquireTokenByClientCredential"]=771]="acquireTokenByClientCredential";t[t["acquireTokenByCode"]=871]="acquireTokenByCode";t[t["acquireTokenByRefreshToken"]=872]="acquireTokenByRefreshToken"})(S||(S={}));const w={ALGORITHM:"alg",RSA_256:"RS256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"};class HttpClient{async sendGetRequestAsync(t,r){const n={method:l.GET,url:t,headers:r&&r.headers,validateStatus:()=>true};if(r&&r.proxyUrl){n.proxy=false;n.httpsAgent=a(r.proxyUrl)}const i=await o(n);return{headers:i.headers,body:i.data,status:i.status}}async sendPostRequestAsync(t,r,n){const s={method:l.POST,url:t,data:r&&r.body||i.Constants.EMPTY_STRING,timeout:n,headers:r&&r.headers,validateStatus:()=>true};if(r&&r.proxyUrl){s.proxy=false;s.httpsAgent=a(r.proxyUrl)}const c=await o(s);return{headers:c.headers,body:c.data,status:c.status}}}class NetworkUtils{static getNetworkClient(){return new HttpClient}}const x={clientId:i.Constants.EMPTY_STRING,authority:i.Constants.DEFAULT_AUTHORITY,clientSecret:i.Constants.EMPTY_STRING,clientAssertion:i.Constants.EMPTY_STRING,clientCertificate:{thumbprint:i.Constants.EMPTY_STRING,privateKey:i.Constants.EMPTY_STRING,x5c:i.Constants.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:i.Constants.EMPTY_STRING,authorityMetadata:i.Constants.EMPTY_STRING,clientCapabilities:[],protocolMode:i.ProtocolMode.AAD,azureCloudOptions:{azureCloudInstance:i.AzureCloudInstance.None,tenant:i.Constants.EMPTY_STRING}};const N={};const P={loggerCallback:()=>{},piiLoggingEnabled:false,logLevel:i.LogLevel.Info};const D={loggerOptions:P,networkClient:NetworkUtils.getNetworkClient(),proxyUrl:i.Constants.EMPTY_STRING};const M={application:{appName:i.Constants.EMPTY_STRING,appVersion:i.Constants.EMPTY_STRING}};function buildAppConfiguration({auth:t,cache:r,system:n,telemetry:i}){return{auth:{...x,...t},cache:{...N,...r},system:{...D,...n},telemetry:{...M,...i}}}class GuidGenerator{generateGuid(){return s.v4()}isGuid(t){const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return r.test(t)}}class EncodingUtils{static base64Encode(t,r){return Buffer.from(t,r).toString("base64")}static base64EncodeUrl(t,r){return EncodingUtils.base64Encode(t,r).replace(/=/g,i.Constants.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(t){return Buffer.from(t,"base64").toString("utf8")}static base64DecodeUrl(t){let r=t.replace(/-/g,"+").replace(/_/g,"/");while(r.length%4){r+="="}return EncodingUtils.base64Decode(r)}}class HashUtils{sha256(t){return c.createHash(g.SHA256).update(t).digest()}}class PkceGenerator{constructor(){this.hashUtils=new HashUtils}async generatePkceCodes(){const t=this.generateCodeVerifier();const r=this.generateCodeChallengeFromVerifier(t);return{verifier:t,challenge:r}}generateCodeVerifier(){const t=[];const r=256-256%v.CV_CHARSET.length;while(t.length<=p){const n=c.randomBytes(1)[0];if(n>=r){continue}const i=n%v.CV_CHARSET.length;t.push(v.CV_CHARSET[i])}const n=t.join(i.Constants.EMPTY_STRING);return EncodingUtils.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(t){return EncodingUtils.base64EncodeUrl(this.hashUtils.sha256(t).toString("base64"),"base64")}}class CryptoProvider{constructor(){this.pkceGenerator=new PkceGenerator;this.guidGenerator=new GuidGenerator;this.hashUtils=new HashUtils}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(t){return EncodingUtils.base64Encode(t)}base64Decode(t){return EncodingUtils.base64Decode(t)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(t){return EncodingUtils.base64EncodeUrl(this.hashUtils.sha256(t).toString("base64"),"base64")}}class Deserializer{static deserializeJSONBlob(t){const r=i.StringUtils.isEmpty(t)?{}:JSON.parse(t);return r}static deserializeAccounts(t){const r={};if(t){Object.keys(t).map((function(n){const o=t[n];const a={homeAccountId:o.home_account_id,environment:o.environment,realm:o.realm,localAccountId:o.local_account_id,username:o.username,authorityType:o.authority_type,name:o.name,clientInfo:o.client_info,lastModificationTime:o.last_modification_time,lastModificationApp:o.last_modification_app};const s=new i.AccountEntity;i.CacheManager.toObject(s,a);r[n]=s}))}return r}static deserializeIdTokens(t){const r={};if(t){Object.keys(t).map((function(n){const o=t[n];const a={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm};const s=new i.IdTokenEntity;i.CacheManager.toObject(s,a);r[n]=s}))}return r}static deserializeAccessTokens(t){const r={};if(t){Object.keys(t).map((function(n){const o=t[n];const a={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm,target:o.target,cachedAt:o.cached_at,expiresOn:o.expires_on,extendedExpiresOn:o.extended_expires_on,refreshOn:o.refresh_on,keyId:o.key_id,tokenType:o.token_type,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash};const s=new i.AccessTokenEntity;i.CacheManager.toObject(s,a);r[n]=s}))}return r}static deserializeRefreshTokens(t){const r={};if(t){Object.keys(t).map((function(n){const o=t[n];const a={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,familyId:o.family_id,target:o.target,realm:o.realm};const s=new i.RefreshTokenEntity;i.CacheManager.toObject(s,a);r[n]=s}))}return r}static deserializeAppMetadata(t){const r={};if(t){Object.keys(t).map((function(n){const o=t[n];const a={clientId:o.client_id,environment:o.environment,familyId:o.family_id};const s=new i.AppMetadataEntity;i.CacheManager.toObject(s,a);r[n]=s}))}return r}static deserializeAllCache(t){return{accounts:t.Account?this.deserializeAccounts(t.Account):{},idTokens:t.IdToken?this.deserializeIdTokens(t.IdToken):{},accessTokens:t.AccessToken?this.deserializeAccessTokens(t.AccessToken):{},refreshTokens:t.RefreshToken?this.deserializeRefreshTokens(t.RefreshToken):{},appMetadata:t.AppMetadata?this.deserializeAppMetadata(t.AppMetadata):{}}}}class Serializer{static serializeJSONBlob(t){return JSON.stringify(t)}static serializeAccounts(t){const r={};Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp}}));return r}static serializeIdTokens(t){const r={};Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}));return r}static serializeAccessTokens(t){const r={};Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash}}));return r}static serializeRefreshTokens(t){const r={};Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}));return r}static serializeAppMetadata(t){const r={};Object.keys(t).map((function(n){const i=t[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}));return r}static serializeAllCache(t){return{Account:this.serializeAccounts(t.accounts),IdToken:this.serializeIdTokens(t.idTokens),AccessToken:this.serializeAccessTokens(t.accessTokens),RefreshToken:this.serializeRefreshTokens(t.refreshTokens),AppMetadata:this.serializeAppMetadata(t.appMetadata)}}}class NodeStorage extends i.CacheManager{constructor(t,r,n){super(r,n);this.cache={};this.changeEmitters=[];this.logger=t}registerChangeEmitter(t){this.changeEmitters.push(t)}emitChange(){this.changeEmitters.forEach((t=>t.call(null)))}cacheToInMemoryCache(t){const r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const n in t){if(t[n]instanceof i.AccountEntity){r.accounts[n]=t[n]}else if(t[n]instanceof i.IdTokenEntity){r.idTokens[n]=t[n]}else if(t[n]instanceof i.AccessTokenEntity){r.accessTokens[n]=t[n]}else if(t[n]instanceof i.RefreshTokenEntity){r.refreshTokens[n]=t[n]}else if(t[n]instanceof i.AppMetadataEntity){r.appMetadata[n]=t[n]}else{continue}}return r}inMemoryCacheToCache(t){let r=this.getCache();r={...r,...t.accounts,...t.idTokens,...t.accessTokens,...t.refreshTokens,...t.appMetadata};return r}getInMemoryCache(){this.logger.trace("Getting in-memory cache");const t=this.cacheToInMemoryCache(this.getCache());return t}setInMemoryCache(t){this.logger.trace("Setting in-memory cache");const r=this.inMemoryCacheToCache(t);this.setCache(r);this.emitChange()}getCache(){this.logger.trace("Getting cache key-value store");return this.cache}setCache(t){this.logger.trace("Setting cache key value store");this.cache=t;this.emitChange()}getItem(t){this.logger.tracePii(`Item key: ${t}`);const r=this.getCache();return r[t]}setItem(t,r){this.logger.tracePii(`Item key: ${t}`);const n=this.getCache();n[t]=r;this.setCache(n)}getAccount(t){const r=this.getItem(t);if(i.AccountEntity.isAccountEntity(r)){return r}return null}setAccount(t){const r=t.generateAccountKey();this.setItem(r,t)}getIdTokenCredential(t){const r=this.getItem(t);if(i.IdTokenEntity.isIdTokenEntity(r)){return r}return null}setIdTokenCredential(t){const r=t.generateCredentialKey();this.setItem(r,t)}getAccessTokenCredential(t){const r=this.getItem(t);if(i.AccessTokenEntity.isAccessTokenEntity(r)){return r}return null}setAccessTokenCredential(t){const r=t.generateCredentialKey();this.setItem(r,t)}getRefreshTokenCredential(t){const r=this.getItem(t);if(i.RefreshTokenEntity.isRefreshTokenEntity(r)){return r}return null}setRefreshTokenCredential(t){const r=t.generateCredentialKey();this.setItem(r,t)}getAppMetadata(t){const r=this.getItem(t);if(i.AppMetadataEntity.isAppMetadataEntity(t,r)){return r}return null}setAppMetadata(t){const r=t.generateAppMetadataKey();this.setItem(r,t)}getServerTelemetry(t){const r=this.getItem(t);if(r&&i.ServerTelemetryEntity.isServerTelemetryEntity(t,r)){return r}return null}setServerTelemetry(t,r){this.setItem(t,r)}getAuthorityMetadata(t){const r=this.getItem(t);if(r&&i.AuthorityMetadataEntity.isAuthorityMetadataEntity(t,r)){return r}return null}getAuthorityMetadataKeys(){return this.getKeys().filter((t=>this.isAuthorityMetadata(t)))}setAuthorityMetadata(t,r){this.setItem(t,r)}getThrottlingCache(t){const r=this.getItem(t);if(r&&i.ThrottlingEntity.isThrottlingEntity(t,r)){return r}return null}setThrottlingCache(t,r){this.setItem(t,r)}removeItem(t){this.logger.tracePii(`Item key: ${t}`);let r=false;const n=this.getCache();if(!!n[t]){delete n[t];r=true}if(r){this.setCache(n);this.emitChange()}return r}containsKey(t){return this.getKeys().includes(t)}getKeys(){this.logger.trace("Retrieving all cache keys");const t=this.getCache();return[...Object.keys(t)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL");const t=this.getKeys();t.forEach((t=>{this.removeItem(t)}));this.emitChange()}static generateInMemoryCache(t){return Deserializer.deserializeAllCache(Deserializer.deserializeJSONBlob(t))}static generateJsonCache(t){return Serializer.serializeAllCache(t)}updateCredentialCacheKey(t,r){const n=r.generateCredentialKey();if(t!==n){const i=this.getItem(t);if(i){this.removeItem(t);this.setItem(n,i);this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`);return n}else{this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}}return t}}const L={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}};class TokenCache{constructor(t,r,n){this.cacheHasChanged=false;this.storage=t;this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this));if(n){this.persistence=n}this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let t=Serializer.serializeAllCache(this.storage.getInMemoryCache());if(!i.StringUtils.isEmpty(this.cacheSnapshot)){this.logger.trace("Reading cache snapshot from disk");t=this.mergeState(JSON.parse(this.cacheSnapshot),t)}else{this.logger.trace("No cache snapshot to merge")}this.cacheHasChanged=false;return JSON.stringify(t)}deserialize(t){this.logger.trace("Deserializing JSON to in-memory cache");this.cacheSnapshot=t;if(!i.StringUtils.isEmpty(this.cacheSnapshot)){this.logger.trace("Reading cache snapshot from disk");const t=Deserializer.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(t)}else{this.logger.trace("No cache snapshot to deserialize")}}getKVStore(){return this.storage.getCache()}async getAllAccounts(){this.logger.trace("getAllAccounts called");let t;try{if(this.persistence){t=new i.TokenCacheContext(this,false);await this.persistence.beforeCacheAccess(t)}return this.storage.getAllAccounts()}finally{if(this.persistence&&t){await this.persistence.afterCacheAccess(t)}}}async getAccountByHomeId(t){const r=await this.getAllAccounts();if(!i.StringUtils.isEmpty(t)&&r&&r.length){return r.filter((r=>r.homeAccountId===t))[0]||null}else{return null}}async getAccountByLocalId(t){const r=await this.getAllAccounts();if(!i.StringUtils.isEmpty(t)&&r&&r.length){return r.filter((r=>r.localAccountId===t))[0]||null}else{return null}}async removeAccount(t){this.logger.trace("removeAccount called");let r;try{if(this.persistence){r=new i.TokenCacheContext(this,true);await this.persistence.beforeCacheAccess(r)}await this.storage.removeAccount(i.AccountEntity.generateAccountCacheKey(t))}finally{if(this.persistence&&r){await this.persistence.afterCacheAccess(r)}}}handleChangeEvent(){this.cacheHasChanged=true}mergeState(t,r){this.logger.trace("Merging in-memory cache with cache snapshot");const n=this.mergeRemovals(t,r);return this.mergeUpdates(n,r)}mergeUpdates(t,r){Object.keys(r).forEach((n=>{const i=r[n];if(!t.hasOwnProperty(n)){if(i!==null){t[n]=i}}else{const r=i!==null;const o=typeof i==="object";const a=!Array.isArray(i);const s=typeof t[n]!=="undefined"&&t[n]!==null;if(r&&o&&a&&s){this.mergeUpdates(t[n],i)}else{t[n]=i}}}));return t}mergeRemovals(t,r){this.logger.trace("Remove updated entries in cache");const n=t.Account?this.mergeRemovalsDict(t.Account,r.Account):t.Account;const i=t.AccessToken?this.mergeRemovalsDict(t.AccessToken,r.AccessToken):t.AccessToken;const o=t.RefreshToken?this.mergeRemovalsDict(t.RefreshToken,r.RefreshToken):t.RefreshToken;const a=t.IdToken?this.mergeRemovalsDict(t.IdToken,r.IdToken):t.IdToken;const s=t.AppMetadata?this.mergeRemovalsDict(t.AppMetadata,r.AppMetadata):t.AppMetadata;return{...t,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:s}}mergeRemovalsDict(t,r){const n={...t};Object.keys(t).forEach((t=>{if(!r||!r.hasOwnProperty(t)){delete n[t]}}));return n}overlayDefaults(t){this.logger.trace("Overlaying input cache with the default cache");return{Account:{...L.Account,...t.Account},IdToken:{...L.IdToken,...t.IdToken},AccessToken:{...L.AccessToken,...t.AccessToken},RefreshToken:{...L.RefreshToken,...t.RefreshToken},AppMetadata:{...L.AppMetadata,...t.AppMetadata}}}}const U="@azure/msal-node";const q="1.9.0";class ClientApplication{constructor(t){this.config=buildAppConfiguration(t);this.cryptoProvider=new CryptoProvider;this.logger=new i.Logger(this.config.system.loggerOptions,U,q);this.storage=new NodeStorage(this.logger,this.config.auth.clientId,this.cryptoProvider);this.tokenCache=new TokenCache(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(t){this.logger.info("getAuthCodeUrl called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t),responseMode:t.responseMode||i.ResponseMode.QUERY,authenticationScheme:i.AuthenticationScheme.BEARER};const n=await this.buildOauthClientConfiguration(r.authority,r.correlationId,undefined,undefined,t.azureCloudOptions);const o=new i.AuthorizationCodeClient(n);this.logger.verbose("Auth code client created",r.correlationId);return o.getAuthCodeUrl(r)}async acquireTokenByCode(t,r){this.logger.info("acquireTokenByCode called",t.correlationId);const n={...t,...await this.initializeBaseRequest(t),authenticationScheme:i.AuthenticationScheme.BEARER};const o=this.initializeServerTelemetryManager(S.acquireTokenByCode,n.correlationId);try{const a=await this.buildOauthClientConfiguration(n.authority,n.correlationId,o,undefined,t.azureCloudOptions);const s=new i.AuthorizationCodeClient(a);this.logger.verbose("Auth code client created",n.correlationId);return s.acquireToken(n,r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(n.correlationId)}o.cacheFailedRequest(t);throw t}}async acquireTokenByRefreshToken(t){this.logger.info("acquireTokenByRefreshToken called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t),authenticationScheme:i.AuthenticationScheme.BEARER};const n=this.initializeServerTelemetryManager(S.acquireTokenByRefreshToken,r.correlationId);try{const o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,undefined,t.azureCloudOptions);const a=new i.RefreshTokenClient(o);this.logger.verbose("Refresh token client created",r.correlationId);return a.acquireToken(r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(r.correlationId)}n.cacheFailedRequest(t);throw t}}async acquireTokenSilent(t){const r={...t,...await this.initializeBaseRequest(t),forceRefresh:t.forceRefresh||false};const n=this.initializeServerTelemetryManager(S.acquireTokenSilent,r.correlationId,r.forceRefresh);try{const o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,undefined,t.azureCloudOptions);const a=new i.SilentFlowClient(o);this.logger.verbose("Silent flow client created",r.correlationId);return a.acquireToken(r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(r.correlationId)}n.cacheFailedRequest(t);throw t}}async acquireTokenByUsernamePassword(t){this.logger.info("acquireTokenByUsernamePassword called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t)};const n=this.initializeServerTelemetryManager(S.acquireTokenByUsernamePassword,r.correlationId);try{const o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,undefined,t.azureCloudOptions);const a=new i.UsernamePasswordClient(o);this.logger.verbose("Username password client created",r.correlationId);return a.acquireToken(r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(r.correlationId)}n.cacheFailedRequest(t);throw t}}getTokenCache(){this.logger.info("getTokenCache called");return this.tokenCache}getLogger(){return this.logger}setLogger(t){this.logger=t}async buildOauthClientConfiguration(t,r,n,o,a){this.logger.verbose("buildOauthClientConfiguration called",r);const s=a?a:this.config.auth.azureCloudOptions;this.logger.verbose(`building oauth client configuration with the authority: ${t}`,r);const c=await this.createAuthority(t,o,r,s);n==null?void 0:n.updateRegionDiscoveryMetadata(c.regionDiscoveryMetadata);return{authOptions:{clientId:this.config.auth.clientId,authority:c,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{proxyUrl:this.config.system.proxyUrl},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:this.clientAssertion?this.getClientAssertion(c):undefined},libraryInfo:{sku:E.MSAL_SKU,version:q,cpu:process.arch||i.Constants.EMPTY_STRING,os:process.platform||i.Constants.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}getClientAssertion(t){return{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,t.tokenEndpoint),assertionType:E.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(t){this.logger.verbose("initializeRequestScopes called",t.correlationId);if(t.authenticationScheme&&t.authenticationScheme===i.AuthenticationScheme.POP){this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",t.correlationId)}t.authenticationScheme=i.AuthenticationScheme.BEARER;if(t.claims&&!i.StringUtils.isEmpty(t.claims)){t.requestedClaimsHash=await this.cryptoProvider.hashString(t.claims)}return{...t,scopes:[...t&&t.scopes||[],...i.OIDC_DEFAULT_SCOPES],correlationId:t&&t.correlationId||this.cryptoProvider.createNewGuid(),authority:t.authority||this.config.auth.authority}}initializeServerTelemetryManager(t,r,n){const o={clientId:this.config.auth.clientId,correlationId:r,apiId:t,forceRefresh:n||false};return new i.ServerTelemetryManager(o,this.storage)}async createAuthority(t,r,n,o){this.logger.verbose("createAuthority called",n);const a=i.Authority.generateAuthority(t,o);const s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:r};return await i.AuthorityFactory.createDiscoveredInstance(a,this.config.system.networkClient,this.storage,s)}clearCache(){this.storage.clear()}}class PublicClientApplication extends ClientApplication{constructor(t){super(t)}async acquireTokenByDeviceCode(t){this.logger.info("acquireTokenByDeviceCode called",t.correlationId);const r=Object.assign(t,await this.initializeBaseRequest(t));const n=this.initializeServerTelemetryManager(S.acquireTokenByDeviceCode,r.correlationId);try{const o=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,undefined,t.azureCloudOptions);const a=new i.DeviceCodeClient(o);this.logger.verbose("Device code client created",r.correlationId);return a.acquireToken(r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(r.correlationId)}n.cacheFailedRequest(t);throw t}}}class ClientAssertion{static fromAssertion(t){const r=new ClientAssertion;r.jwt=t;return r}static fromCertificate(t,r,n){const i=new ClientAssertion;i.privateKey=r;i.thumbprint=t;if(n){i.publicCertificate=this.parseCertificate(n)}return i}getJwt(t,r,n){if(this.privateKey&&this.thumbprint){if(this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience){return this.jwt}return this.createJwt(t,r,n)}if(this.jwt){return this.jwt}throw i.ClientAuthError.createInvalidAssertionError()}createJwt(t,r,n){this.issuer=r;this.jwtAudience=n;const o=i.TimeUtils.nowSeconds();this.expirationTime=o+600;const a={alg:w.RSA_256,x5t:EncodingUtils.base64EncodeUrl(this.thumbprint,"hex")};if(this.publicCertificate){Object.assign(a,{x5c:this.publicCertificate})}const s={[w.AUDIENCE]:this.jwtAudience,[w.EXPIRATION_TIME]:this.expirationTime,[w.ISSUER]:this.issuer,[w.SUBJECT]:this.issuer,[w.NOT_BEFORE]:o,[w.JWT_ID]:t.createNewGuid()};this.jwt=u.sign(s,this.privateKey,{header:a});return this.jwt}isExpired(){return this.expirationTime<i.TimeUtils.nowSeconds()}static parseCertificate(t){const r=/-----BEGIN CERTIFICATE-----\n(.+?)\n-----END CERTIFICATE-----/gs;const n=[];let o;while((o=r.exec(t))!==null){n.push(o[1].replace(/\n/,i.Constants.EMPTY_STRING))}return n}}class ConfidentialClientApplication extends ClientApplication{constructor(t){super(t);this.setClientCredential(this.config)}async acquireTokenByClientCredential(t){this.logger.info("acquireTokenByClientCredential called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t)};const n={azureRegion:r.azureRegion,environmentRegion:process.env[d]};const o=this.initializeServerTelemetryManager(S.acquireTokenByClientCredential,r.correlationId,r.skipCache);try{const a=await this.buildOauthClientConfiguration(r.authority,r.correlationId,o,n,t.azureCloudOptions);const s=new i.ClientCredentialClient(a);this.logger.verbose("Client credential client created",r.correlationId);return s.acquireToken(r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(r.correlationId)}o.cacheFailedRequest(t);throw t}}async acquireTokenOnBehalfOf(t){this.logger.info("acquireTokenOnBehalfOf called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t)};try{const n=await this.buildOauthClientConfiguration(r.authority,r.correlationId,undefined,undefined,t.azureCloudOptions);const o=new i.OnBehalfOfClient(n);this.logger.verbose("On behalf of client created",r.correlationId);return o.acquireToken(r)}catch(t){if(t instanceof i.AuthError){t.setCorrelationId(r.correlationId)}throw t}}setClientCredential(t){const r=!i.StringUtils.isEmpty(t.auth.clientSecret);const n=!i.StringUtils.isEmpty(t.auth.clientAssertion);const o=t.auth.clientCertificate||{thumbprint:i.Constants.EMPTY_STRING,privateKey:i.Constants.EMPTY_STRING};const a=!i.StringUtils.isEmpty(o.thumbprint)||!i.StringUtils.isEmpty(o.privateKey);if(r&&n||n&&a||r&&a){throw i.ClientAuthError.createInvalidCredentialError()}if(t.auth.clientSecret){this.clientSecret=t.auth.clientSecret;return}if(t.auth.clientAssertion){this.clientAssertion=ClientAssertion.fromAssertion(t.auth.clientAssertion);return}if(!a){throw i.ClientAuthError.createInvalidCredentialError()}else{var s;this.clientAssertion=ClientAssertion.fromCertificate(o.thumbprint,o.privateKey,(s=t.auth.clientCertificate)==null?void 0:s.x5c)}}}class DistributedCachePlugin{constructor(t,r){this.client=t;this.partitionManager=r}async beforeCacheAccess(t){const r=await this.partitionManager.getKey();const n=await this.client.get(r);t.tokenCache.deserialize(n)}async afterCacheAccess(t){if(t.cacheHasChanged){const r=t.tokenCache.getKVStore();const n=Object.values(r).filter((t=>i.AccountEntity.isAccountEntity(t)));if(n.length>0){const r=n[0];const i=await this.partitionManager.extractKey(r);await this.client.set(i,t.tokenCache.serialize())}}}}Object.defineProperty(r,"AuthError",{enumerable:true,get:function(){return i.AuthError}});Object.defineProperty(r,"AuthErrorMessage",{enumerable:true,get:function(){return i.AuthErrorMessage}});Object.defineProperty(r,"AzureCloudInstance",{enumerable:true,get:function(){return i.AzureCloudInstance}});Object.defineProperty(r,"ClientAuthError",{enumerable:true,get:function(){return i.ClientAuthError}});Object.defineProperty(r,"ClientAuthErrorMessage",{enumerable:true,get:function(){return i.ClientAuthErrorMessage}});Object.defineProperty(r,"ClientConfigurationError",{enumerable:true,get:function(){return i.ClientConfigurationError}});Object.defineProperty(r,"ClientConfigurationErrorMessage",{enumerable:true,get:function(){return i.ClientConfigurationErrorMessage}});Object.defineProperty(r,"InteractionRequiredAuthError",{enumerable:true,get:function(){return i.InteractionRequiredAuthError}});Object.defineProperty(r,"InteractionRequiredAuthErrorMessage",{enumerable:true,get:function(){return i.InteractionRequiredAuthErrorMessage}});Object.defineProperty(r,"LogLevel",{enumerable:true,get:function(){return i.LogLevel}});Object.defineProperty(r,"Logger",{enumerable:true,get:function(){return i.Logger}});Object.defineProperty(r,"PromptValue",{enumerable:true,get:function(){return i.PromptValue}});Object.defineProperty(r,"ProtocolMode",{enumerable:true,get:function(){return i.ProtocolMode}});Object.defineProperty(r,"ResponseMode",{enumerable:true,get:function(){return i.ResponseMode}});Object.defineProperty(r,"ServerError",{enumerable:true,get:function(){return i.ServerError}});Object.defineProperty(r,"TokenCacheContext",{enumerable:true,get:function(){return i.TokenCacheContext}});r.ClientApplication=ClientApplication;r.ClientAssertion=ClientAssertion;r.ConfidentialClientApplication=ConfidentialClientApplication;r.CryptoProvider=CryptoProvider;r.DistributedCachePlugin=DistributedCachePlugin;r.NodeStorage=NodeStorage;r.PublicClientApplication=PublicClientApplication;r.TokenCache=TokenCache;r.buildAppConfiguration=buildAppConfiguration;r.version=q},29802:(t,r,n)=>{"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(r,"__esModule",{value:!0});var i,o=n(73998),a=e(n(96545)),s=e(n(77219)),c=n(8786),u=e(n(6113)),l=n(77486);!function(t){t.GET="get",t.POST="post"}(i||(i={}));const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";var p;!function(t){t[t.acquireTokenSilent=62]="acquireTokenSilent",t[t.acquireTokenByUsernamePassword=371]="acquireTokenByUsernamePassword",t[t.acquireTokenByDeviceCode=671]="acquireTokenByDeviceCode",t[t.acquireTokenByClientCredential=771]="acquireTokenByClientCredential",t[t.acquireTokenByCode=871]="acquireTokenByCode",t[t.acquireTokenByRefreshToken=872]="acquireTokenByRefreshToken"}(p||(p={}));class h{async sendGetRequestAsync(t,r){const n={method:i.GET,url:t,headers:r&&r.headers,validateStatus:()=>!0};r&&r.proxyUrl&&(n.proxy=!1,n.httpsAgent=s(r.proxyUrl));const o=await a(n);return{headers:o.headers,body:o.data,status:o.status}}async sendPostRequestAsync(t,r,n){const c={method:i.POST,url:t,data:r&&r.body||o.Constants.EMPTY_STRING,timeout:n,headers:r&&r.headers,validateStatus:()=>!0};r&&r.proxyUrl&&(c.proxy=!1,c.httpsAgent=s(r.proxyUrl));const u=await a(c);return{headers:u.headers,body:u.data,status:u.status}}}const g={clientId:o.Constants.EMPTY_STRING,authority:o.Constants.DEFAULT_AUTHORITY,clientSecret:o.Constants.EMPTY_STRING,clientAssertion:o.Constants.EMPTY_STRING,clientCertificate:{thumbprint:o.Constants.EMPTY_STRING,privateKey:o.Constants.EMPTY_STRING,x5c:o.Constants.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:o.Constants.EMPTY_STRING,authorityMetadata:o.Constants.EMPTY_STRING,clientCapabilities:[],protocolMode:o.ProtocolMode.AAD,azureCloudOptions:{azureCloudInstance:o.AzureCloudInstance.None,tenant:o.Constants.EMPTY_STRING}},v={},E={loggerOptions:{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:o.LogLevel.Info},networkClient:class{static getNetworkClient(){return new h}}.getNetworkClient(),proxyUrl:o.Constants.EMPTY_STRING},S={application:{appName:o.Constants.EMPTY_STRING,appVersion:o.Constants.EMPTY_STRING}};function y({auth:t,cache:r,system:n,telemetry:i}){return{auth:{...g,...t},cache:{...v,...r},system:{...E,...n},telemetry:{...S,...i}}}class m{generateGuid(){return c.v4()}isGuid(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}}class f{static base64Encode(t,r){return Buffer.from(t,r).toString("base64")}static base64EncodeUrl(t,r){return f.base64Encode(t,r).replace(/=/g,o.Constants.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(t){return Buffer.from(t,"base64").toString("utf8")}static base64DecodeUrl(t){let r=t.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return f.base64Decode(r)}}class C{sha256(t){return u.createHash("sha256").update(t).digest()}}class T{constructor(){this.hashUtils=new C}async generatePkceCodes(){const t=this.generateCodeVerifier();return{verifier:t,challenge:this.generateCodeChallengeFromVerifier(t)}}generateCodeVerifier(){const t=[],r=256-256%d.length;for(;t.length<=32;){const n=u.randomBytes(1)[0];n>=r||t.push(d[n%d.length])}const n=t.join(o.Constants.EMPTY_STRING);return f.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(t){return f.base64EncodeUrl(this.hashUtils.sha256(t).toString("base64"),"base64")}}class A{constructor(){this.pkceGenerator=new T,this.guidGenerator=new m,this.hashUtils=new C}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(t){return f.base64Encode(t)}base64Decode(t){return f.base64Decode(t)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(t){return f.base64EncodeUrl(this.hashUtils.sha256(t).toString("base64"),"base64")}}class k{static deserializeJSONBlob(t){return o.StringUtils.isEmpty(t)?{}:JSON.parse(t)}static deserializeAccounts(t){const r={};return t&&Object.keys(t).map((function(n){const i=t[n],a={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app},s=new o.AccountEntity;o.CacheManager.toObject(s,a),r[n]=s})),r}static deserializeIdTokens(t){const r={};return t&&Object.keys(t).map((function(n){const i=t[n],a={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm},s=new o.IdTokenEntity;o.CacheManager.toObject(s,a),r[n]=s})),r}static deserializeAccessTokens(t){const r={};return t&&Object.keys(t).map((function(n){const i=t[n],a={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash},s=new o.AccessTokenEntity;o.CacheManager.toObject(s,a),r[n]=s})),r}static deserializeRefreshTokens(t){const r={};return t&&Object.keys(t).map((function(n){const i=t[n],a={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm},s=new o.RefreshTokenEntity;o.CacheManager.toObject(s,a),r[n]=s})),r}static deserializeAppMetadata(t){const r={};return t&&Object.keys(t).map((function(n){const i=t[n],a={clientId:i.client_id,environment:i.environment,familyId:i.family_id},s=new o.AppMetadataEntity;o.CacheManager.toObject(s,a),r[n]=s})),r}static deserializeAllCache(t){return{accounts:t.Account?this.deserializeAccounts(t.Account):{},idTokens:t.IdToken?this.deserializeIdTokens(t.IdToken):{},accessTokens:t.AccessToken?this.deserializeAccessTokens(t.AccessToken):{},refreshTokens:t.RefreshToken?this.deserializeRefreshTokens(t.RefreshToken):{},appMetadata:t.AppMetadata?this.deserializeAppMetadata(t.AppMetadata):{}}}}class I{static serializeJSONBlob(t){return JSON.stringify(t)}static serializeAccounts(t){const r={};return Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp}})),r}static serializeIdTokens(t){const r={};return Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}})),r}static serializeAccessTokens(t){const r={};return Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash}})),r}static serializeRefreshTokens(t){const r={};return Object.keys(t).map((function(n){const i=t[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}})),r}static serializeAppMetadata(t){const r={};return Object.keys(t).map((function(n){const i=t[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}})),r}static serializeAllCache(t){return{Account:this.serializeAccounts(t.accounts),IdToken:this.serializeIdTokens(t.idTokens),AccessToken:this.serializeAccessTokens(t.accessTokens),RefreshToken:this.serializeRefreshTokens(t.refreshTokens),AppMetadata:this.serializeAppMetadata(t.appMetadata)}}}class b extends o.CacheManager{constructor(t,r,n){super(r,n),this.cache={},this.changeEmitters=[],this.logger=t}registerChangeEmitter(t){this.changeEmitters.push(t)}emitChange(){this.changeEmitters.forEach((t=>t.call(null)))}cacheToInMemoryCache(t){const r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const n in t)if(t[n]instanceof o.AccountEntity)r.accounts[n]=t[n];else if(t[n]instanceof o.IdTokenEntity)r.idTokens[n]=t[n];else if(t[n]instanceof o.AccessTokenEntity)r.accessTokens[n]=t[n];else if(t[n]instanceof o.RefreshTokenEntity)r.refreshTokens[n]=t[n];else{if(!(t[n]instanceof o.AppMetadataEntity))continue;r.appMetadata[n]=t[n]}return r}inMemoryCacheToCache(t){let r=this.getCache();return r={...r,...t.accounts,...t.idTokens,...t.accessTokens,...t.refreshTokens,...t.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(t){this.logger.trace("Setting in-memory cache");const r=this.inMemoryCacheToCache(t);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(t){this.logger.trace("Setting cache key value store"),this.cache=t,this.emitChange()}getItem(t){return this.logger.tracePii("Item key: "+t),this.getCache()[t]}setItem(t,r){this.logger.tracePii("Item key: "+t);const n=this.getCache();n[t]=r,this.setCache(n)}getAccount(t){const r=this.getItem(t);return o.AccountEntity.isAccountEntity(r)?r:null}setAccount(t){const r=t.generateAccountKey();this.setItem(r,t)}getIdTokenCredential(t){const r=this.getItem(t);return o.IdTokenEntity.isIdTokenEntity(r)?r:null}setIdTokenCredential(t){const r=t.generateCredentialKey();this.setItem(r,t)}getAccessTokenCredential(t){const r=this.getItem(t);return o.AccessTokenEntity.isAccessTokenEntity(r)?r:null}setAccessTokenCredential(t){const r=t.generateCredentialKey();this.setItem(r,t)}getRefreshTokenCredential(t){const r=this.getItem(t);return o.RefreshTokenEntity.isRefreshTokenEntity(r)?r:null}setRefreshTokenCredential(t){const r=t.generateCredentialKey();this.setItem(r,t)}getAppMetadata(t){const r=this.getItem(t);return o.AppMetadataEntity.isAppMetadataEntity(t,r)?r:null}setAppMetadata(t){const r=t.generateAppMetadataKey();this.setItem(r,t)}getServerTelemetry(t){const r=this.getItem(t);return r&&o.ServerTelemetryEntity.isServerTelemetryEntity(t,r)?r:null}setServerTelemetry(t,r){this.setItem(t,r)}getAuthorityMetadata(t){const r=this.getItem(t);return r&&o.AuthorityMetadataEntity.isAuthorityMetadataEntity(t,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter((t=>this.isAuthorityMetadata(t)))}setAuthorityMetadata(t,r){this.setItem(t,r)}getThrottlingCache(t){const r=this.getItem(t);return r&&o.ThrottlingEntity.isThrottlingEntity(t,r)?r:null}setThrottlingCache(t,r){this.setItem(t,r)}removeItem(t){this.logger.tracePii("Item key: "+t);let r=!1;const n=this.getCache();return n[t]&&(delete n[t],r=!0),r&&(this.setCache(n),this.emitChange()),r}containsKey(t){return this.getKeys().includes(t)}getKeys(){this.logger.trace("Retrieving all cache keys");const t=this.getCache();return[...Object.keys(t)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach((t=>{this.removeItem(t)})),this.emitChange()}static generateInMemoryCache(t){return k.deserializeAllCache(k.deserializeJSONBlob(t))}static generateJsonCache(t){return I.serializeAllCache(t)}updateCredentialCacheKey(t,r){const n=r.generateCredentialKey();if(t!==n){const i=this.getItem(t);if(i)return this.removeItem(t),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return t}}const w={},x={},N={},P={},D={};class R{constructor(t,r,n){this.cacheHasChanged=!1,this.storage=t,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let t=I.serializeAllCache(this.storage.getInMemoryCache());return o.StringUtils.isEmpty(this.cacheSnapshot)?this.logger.trace("No cache snapshot to merge"):(this.logger.trace("Reading cache snapshot from disk"),t=this.mergeState(JSON.parse(this.cacheSnapshot),t)),this.cacheHasChanged=!1,JSON.stringify(t)}deserialize(t){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=t,o.StringUtils.isEmpty(this.cacheSnapshot))this.logger.trace("No cache snapshot to deserialize");else{this.logger.trace("Reading cache snapshot from disk");const t=k.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(t)}}getKVStore(){return this.storage.getCache()}async getAllAccounts(){let t;this.logger.trace("getAllAccounts called");try{return this.persistence&&(t=new o.TokenCacheContext(this,!1),await this.persistence.beforeCacheAccess(t)),this.storage.getAllAccounts()}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}async getAccountByHomeId(t){const r=await this.getAllAccounts();return!o.StringUtils.isEmpty(t)&&r&&r.length&&r.filter((r=>r.homeAccountId===t))[0]||null}async getAccountByLocalId(t){const r=await this.getAllAccounts();return!o.StringUtils.isEmpty(t)&&r&&r.length&&r.filter((r=>r.localAccountId===t))[0]||null}async removeAccount(t){let r;this.logger.trace("removeAccount called");try{this.persistence&&(r=new o.TokenCacheContext(this,!0),await this.persistence.beforeCacheAccess(r)),await this.storage.removeAccount(o.AccountEntity.generateAccountCacheKey(t))}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(t,r){this.logger.trace("Merging in-memory cache with cache snapshot");const n=this.mergeRemovals(t,r);return this.mergeUpdates(n,r)}mergeUpdates(t,r){return Object.keys(r).forEach((n=>{const i=r[n];if(t.hasOwnProperty(n)){const r=null!==i,o="object"==typeof i,a=!Array.isArray(i),s=null!=t[n];r&&o&&a&&s?this.mergeUpdates(t[n],i):t[n]=i}else null!==i&&(t[n]=i)})),t}mergeRemovals(t,r){this.logger.trace("Remove updated entries in cache");const n=t.Account?this.mergeRemovalsDict(t.Account,r.Account):t.Account,i=t.AccessToken?this.mergeRemovalsDict(t.AccessToken,r.AccessToken):t.AccessToken,o=t.RefreshToken?this.mergeRemovalsDict(t.RefreshToken,r.RefreshToken):t.RefreshToken,a=t.IdToken?this.mergeRemovalsDict(t.IdToken,r.IdToken):t.IdToken,s=t.AppMetadata?this.mergeRemovalsDict(t.AppMetadata,r.AppMetadata):t.AppMetadata;return{...t,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:s}}mergeRemovalsDict(t,r){const n={...t};return Object.keys(t).forEach((t=>{r&&r.hasOwnProperty(t)||delete n[t]})),n}overlayDefaults(t){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...w,...t.Account},IdToken:{...x,...t.IdToken},AccessToken:{...N,...t.AccessToken},RefreshToken:{...P,...t.RefreshToken},AppMetadata:{...D,...t.AppMetadata}}}}class O{constructor(t){this.config=y(t),this.cryptoProvider=new A,this.logger=new o.Logger(this.config.system.loggerOptions,"@azure/msal-node","1.9.0"),this.storage=new b(this.logger,this.config.auth.clientId,this.cryptoProvider),this.tokenCache=new R(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(t){this.logger.info("getAuthCodeUrl called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t),responseMode:t.responseMode||o.ResponseMode.QUERY,authenticationScheme:o.AuthenticationScheme.BEARER},n=await this.buildOauthClientConfiguration(r.authority,r.correlationId,void 0,void 0,t.azureCloudOptions),i=new o.AuthorizationCodeClient(n);return this.logger.verbose("Auth code client created",r.correlationId),i.getAuthCodeUrl(r)}async acquireTokenByCode(t,r){this.logger.info("acquireTokenByCode called",t.correlationId);const n={...t,...await this.initializeBaseRequest(t),authenticationScheme:o.AuthenticationScheme.BEARER},i=this.initializeServerTelemetryManager(p.acquireTokenByCode,n.correlationId);try{const a=await this.buildOauthClientConfiguration(n.authority,n.correlationId,i,void 0,t.azureCloudOptions),s=new o.AuthorizationCodeClient(a);return this.logger.verbose("Auth code client created",n.correlationId),s.acquireToken(n,r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(n.correlationId),i.cacheFailedRequest(t),t}}async acquireTokenByRefreshToken(t){this.logger.info("acquireTokenByRefreshToken called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t),authenticationScheme:o.AuthenticationScheme.BEARER},n=this.initializeServerTelemetryManager(p.acquireTokenByRefreshToken,r.correlationId);try{const i=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,t.azureCloudOptions),a=new o.RefreshTokenClient(i);return this.logger.verbose("Refresh token client created",r.correlationId),a.acquireToken(r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(r.correlationId),n.cacheFailedRequest(t),t}}async acquireTokenSilent(t){const r={...t,...await this.initializeBaseRequest(t),forceRefresh:t.forceRefresh||!1},n=this.initializeServerTelemetryManager(p.acquireTokenSilent,r.correlationId,r.forceRefresh);try{const i=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,t.azureCloudOptions),a=new o.SilentFlowClient(i);return this.logger.verbose("Silent flow client created",r.correlationId),a.acquireToken(r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(r.correlationId),n.cacheFailedRequest(t),t}}async acquireTokenByUsernamePassword(t){this.logger.info("acquireTokenByUsernamePassword called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t)},n=this.initializeServerTelemetryManager(p.acquireTokenByUsernamePassword,r.correlationId);try{const i=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,t.azureCloudOptions),a=new o.UsernamePasswordClient(i);return this.logger.verbose("Username password client created",r.correlationId),a.acquireToken(r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(r.correlationId),n.cacheFailedRequest(t),t}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}getLogger(){return this.logger}setLogger(t){this.logger=t}async buildOauthClientConfiguration(t,r,n,i,a){this.logger.verbose("buildOauthClientConfiguration called",r);const s=a||this.config.auth.azureCloudOptions;this.logger.verbose("building oauth client configuration with the authority: "+t,r);const c=await this.createAuthority(t,i,r,s);return null==n||n.updateRegionDiscoveryMetadata(c.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:c,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{proxyUrl:this.config.system.proxyUrl},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:this.clientAssertion?this.getClientAssertion(c):void 0},libraryInfo:{sku:"msal.js.node",version:"1.9.0",cpu:process.arch||o.Constants.EMPTY_STRING,os:process.platform||o.Constants.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}getClientAssertion(t){return{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,t.tokenEndpoint),assertionType:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}async initializeBaseRequest(t){return this.logger.verbose("initializeRequestScopes called",t.correlationId),t.authenticationScheme&&t.authenticationScheme===o.AuthenticationScheme.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",t.correlationId),t.authenticationScheme=o.AuthenticationScheme.BEARER,t.claims&&!o.StringUtils.isEmpty(t.claims)&&(t.requestedClaimsHash=await this.cryptoProvider.hashString(t.claims)),{...t,scopes:[...t&&t.scopes||[],...o.OIDC_DEFAULT_SCOPES],correlationId:t&&t.correlationId||this.cryptoProvider.createNewGuid(),authority:t.authority||this.config.auth.authority}}initializeServerTelemetryManager(t,r,n){return new o.ServerTelemetryManager({clientId:this.config.auth.clientId,correlationId:r,apiId:t,forceRefresh:n||!1},this.storage)}async createAuthority(t,r,n,i){this.logger.verbose("createAuthority called",n);const a=o.Authority.generateAuthority(t,i),s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:r};return await o.AuthorityFactory.createDiscoveredInstance(a,this.config.system.networkClient,this.storage,s)}clearCache(){this.storage.clear()}}class _{static fromAssertion(t){const r=new _;return r.jwt=t,r}static fromCertificate(t,r,n){const i=new _;return i.privateKey=r,i.thumbprint=t,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(t,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(t,r,n);if(this.jwt)return this.jwt;throw o.ClientAuthError.createInvalidAssertionError()}createJwt(t,r,n){this.issuer=r,this.jwtAudience=n;const i=o.TimeUtils.nowSeconds();this.expirationTime=i+600;const a={alg:"RS256",x5t:f.base64EncodeUrl(this.thumbprint,"hex")};this.publicCertificate&&Object.assign(a,{x5c:this.publicCertificate});const s={aud:this.jwtAudience,exp:this.expirationTime,iss:this.issuer,sub:this.issuer,nbf:i,jti:t.createNewGuid()};return this.jwt=l.sign(s,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<o.TimeUtils.nowSeconds()}static parseCertificate(t){const r=/-----BEGIN CERTIFICATE-----\n(.+?)\n-----END CERTIFICATE-----/gs,n=[];let i;for(;null!==(i=r.exec(t));)n.push(i[1].replace(/\n/,o.Constants.EMPTY_STRING));return n}}Object.defineProperty(r,"AuthError",{enumerable:!0,get:function(){return o.AuthError}}),Object.defineProperty(r,"AuthErrorMessage",{enumerable:!0,get:function(){return o.AuthErrorMessage}}),Object.defineProperty(r,"AzureCloudInstance",{enumerable:!0,get:function(){return o.AzureCloudInstance}}),Object.defineProperty(r,"ClientAuthError",{enumerable:!0,get:function(){return o.ClientAuthError}}),Object.defineProperty(r,"ClientAuthErrorMessage",{enumerable:!0,get:function(){return o.ClientAuthErrorMessage}}),Object.defineProperty(r,"ClientConfigurationError",{enumerable:!0,get:function(){return o.ClientConfigurationError}}),Object.defineProperty(r,"ClientConfigurationErrorMessage",{enumerable:!0,get:function(){return o.ClientConfigurationErrorMessage}}),Object.defineProperty(r,"InteractionRequiredAuthError",{enumerable:!0,get:function(){return o.InteractionRequiredAuthError}}),Object.defineProperty(r,"InteractionRequiredAuthErrorMessage",{enumerable:!0,get:function(){return o.InteractionRequiredAuthErrorMessage}}),Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return o.LogLevel}}),Object.defineProperty(r,"Logger",{enumerable:!0,get:function(){return o.Logger}}),Object.defineProperty(r,"PromptValue",{enumerable:!0,get:function(){return o.PromptValue}}),Object.defineProperty(r,"ProtocolMode",{enumerable:!0,get:function(){return o.ProtocolMode}}),Object.defineProperty(r,"ResponseMode",{enumerable:!0,get:function(){return o.ResponseMode}}),Object.defineProperty(r,"ServerError",{enumerable:!0,get:function(){return o.ServerError}}),Object.defineProperty(r,"TokenCacheContext",{enumerable:!0,get:function(){return o.TokenCacheContext}}),r.ClientApplication=O,r.ClientAssertion=_,r.ConfidentialClientApplication=class extends O{constructor(t){super(t),this.setClientCredential(this.config)}async acquireTokenByClientCredential(t){this.logger.info("acquireTokenByClientCredential called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t)},n={azureRegion:r.azureRegion,environmentRegion:process.env.REGION_NAME},i=this.initializeServerTelemetryManager(p.acquireTokenByClientCredential,r.correlationId,r.skipCache);try{const a=await this.buildOauthClientConfiguration(r.authority,r.correlationId,i,n,t.azureCloudOptions),s=new o.ClientCredentialClient(a);return this.logger.verbose("Client credential client created",r.correlationId),s.acquireToken(r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(r.correlationId),i.cacheFailedRequest(t),t}}async acquireTokenOnBehalfOf(t){this.logger.info("acquireTokenOnBehalfOf called",t.correlationId);const r={...t,...await this.initializeBaseRequest(t)};try{const n=await this.buildOauthClientConfiguration(r.authority,r.correlationId,void 0,void 0,t.azureCloudOptions),i=new o.OnBehalfOfClient(n);return this.logger.verbose("On behalf of client created",r.correlationId),i.acquireToken(r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(r.correlationId),t}}setClientCredential(t){const r=!o.StringUtils.isEmpty(t.auth.clientSecret),n=!o.StringUtils.isEmpty(t.auth.clientAssertion),i=t.auth.clientCertificate||{thumbprint:o.Constants.EMPTY_STRING,privateKey:o.Constants.EMPTY_STRING},a=!o.StringUtils.isEmpty(i.thumbprint)||!o.StringUtils.isEmpty(i.privateKey);if(r&&n||n&&a||r&&a)throw o.ClientAuthError.createInvalidCredentialError();if(t.auth.clientSecret)this.clientSecret=t.auth.clientSecret;else if(t.auth.clientAssertion)this.clientAssertion=_.fromAssertion(t.auth.clientAssertion);else{if(!a)throw o.ClientAuthError.createInvalidCredentialError();var s;this.clientAssertion=_.fromCertificate(i.thumbprint,i.privateKey,null==(s=t.auth.clientCertificate)?void 0:s.x5c)}}},r.CryptoProvider=A,r.DistributedCachePlugin=class{constructor(t,r){this.client=t,this.partitionManager=r}async beforeCacheAccess(t){const r=await this.partitionManager.getKey(),n=await this.client.get(r);t.tokenCache.deserialize(n)}async afterCacheAccess(t){if(t.cacheHasChanged){const r=t.tokenCache.getKVStore(),n=Object.values(r).filter((t=>o.AccountEntity.isAccountEntity(t)));if(n.length>0){const r=n[0],i=await this.partitionManager.extractKey(r);await this.client.set(i,t.tokenCache.serialize())}}}},r.NodeStorage=b,r.PublicClientApplication=class extends O{constructor(t){super(t)}async acquireTokenByDeviceCode(t){this.logger.info("acquireTokenByDeviceCode called",t.correlationId);const r=Object.assign(t,await this.initializeBaseRequest(t)),n=this.initializeServerTelemetryManager(p.acquireTokenByDeviceCode,r.correlationId);try{const i=await this.buildOauthClientConfiguration(r.authority,r.correlationId,n,void 0,t.azureCloudOptions),a=new o.DeviceCodeClient(i);return this.logger.verbose("Device code client created",r.correlationId),a.acquireToken(r)}catch(t){throw t instanceof o.AuthError&&t.setCorrelationId(r.correlationId),n.cacheFailedRequest(t),t}}},r.TokenCache=R,r.buildAppConfiguration=y,r.version="1.9.0"},73998:(t,r)=>{"use strict";
/*! @azure/msal-common v6.3.0 2022-05-02 */"use strict";Object.defineProperty(r,"__esModule",{value:true});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,r){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n))t[n]=r[n]};return extendStatics(t,r)};function __extends(t,r){extendStatics(t,r);function __(){this.constructor=t}t.prototype=r===null?Object.create(r):(__.prototype=r.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o))t[o]=r[o]}return t};return __assign.apply(this,arguments)};function __awaiter(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))}function __generator(t,r){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,s;return s={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function verb(t){return function(r){return step([t,r])}}function step(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(a=s[0]&2?o["return"]:s[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;if(o=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1];a=s;break}if(a&&n.label<a[2]){n.label=a[2];n.ops.push(s);break}if(a[2])n.ops.pop();n.trys.pop();continue}s=r.call(t,n)}catch(t){s=[6,t];o=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}}function __spreadArrays(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var i=Array(t),o=0,r=0;r<n;r++)for(var a=arguments[r],s=0,c=a.length;s<c;s++,o++)i[o]=a[s];return i}var n={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token"};var i=[n.OPENID_SCOPE,n.PROFILE_SCOPE,n.OFFLINE_ACCESS_SCOPE];var o=__spreadArrays(i,[n.EMAIL_SCOPE]);var a;(function(t){t["CONTENT_TYPE"]="Content-Type";t["RETRY_AFTER"]="Retry-After";t["CCS_HEADER"]="X-AnchorMailbox";t["WWWAuthenticate"]="WWW-Authenticate";t["AuthenticationInfo"]="Authentication-Info"})(a||(a={}));r.PersistentCacheKeys=void 0;(function(t){t["ID_TOKEN"]="idtoken";t["CLIENT_INFO"]="client.info";t["ADAL_ID_TOKEN"]="adal.idtoken";t["ERROR"]="error";t["ERROR_DESC"]="error.description";t["ACTIVE_ACCOUNT"]="active-account"})(r.PersistentCacheKeys||(r.PersistentCacheKeys={}));var s;(function(t){t["COMMON"]="common";t["ORGANIZATIONS"]="organizations";t["CONSUMERS"]="consumers"})(s||(s={}));var c;(function(t){t["CLIENT_ID"]="client_id";t["REDIRECT_URI"]="redirect_uri";t["RESPONSE_TYPE"]="response_type";t["RESPONSE_MODE"]="response_mode";t["GRANT_TYPE"]="grant_type";t["CLAIMS"]="claims";t["SCOPE"]="scope";t["ERROR"]="error";t["ERROR_DESCRIPTION"]="error_description";t["ACCESS_TOKEN"]="access_token";t["ID_TOKEN"]="id_token";t["REFRESH_TOKEN"]="refresh_token";t["EXPIRES_IN"]="expires_in";t["STATE"]="state";t["NONCE"]="nonce";t["PROMPT"]="prompt";t["SESSION_STATE"]="session_state";t["CLIENT_INFO"]="client_info";t["CODE"]="code";t["CODE_CHALLENGE"]="code_challenge";t["CODE_CHALLENGE_METHOD"]="code_challenge_method";t["CODE_VERIFIER"]="code_verifier";t["CLIENT_REQUEST_ID"]="client-request-id";t["X_CLIENT_SKU"]="x-client-SKU";t["X_CLIENT_VER"]="x-client-VER";t["X_CLIENT_OS"]="x-client-OS";t["X_CLIENT_CPU"]="x-client-CPU";t["X_CLIENT_CURR_TELEM"]="x-client-current-telemetry";t["X_CLIENT_LAST_TELEM"]="x-client-last-telemetry";t["X_MS_LIB_CAPABILITY"]="x-ms-lib-capability";t["X_APP_NAME"]="x-app-name";t["X_APP_VER"]="x-app-ver";t["POST_LOGOUT_URI"]="post_logout_redirect_uri";t["ID_TOKEN_HINT"]="id_token_hint";t["DEVICE_CODE"]="device_code";t["CLIENT_SECRET"]="client_secret";t["CLIENT_ASSERTION"]="client_assertion";t["CLIENT_ASSERTION_TYPE"]="client_assertion_type";t["TOKEN_TYPE"]="token_type";t["REQ_CNF"]="req_cnf";t["OBO_ASSERTION"]="assertion";t["REQUESTED_TOKEN_USE"]="requested_token_use";t["ON_BEHALF_OF"]="on_behalf_of";t["FOCI"]="foci";t["CCS_HEADER"]="X-AnchorMailbox";t["RETURN_SPA_CODE"]="return_spa_code";t["NATIVE_BROKER"]="nativebroker";t["LOGOUT_HINT"]="logout_hint"})(c||(c={}));var u;(function(t){t["ACCESS_TOKEN"]="access_token";t["XMS_CC"]="xms_cc"})(u||(u={}));var l={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create"};var d;(function(t){t["ACCOUNT"]="account";t["SID"]="sid";t["LOGIN_HINT"]="login_hint";t["ID_TOKEN"]="id_token";t["DOMAIN_HINT"]="domain_hint";t["ORGANIZATIONS"]="organizations";t["CONSUMERS"]="consumers";t["ACCOUNT_ID"]="accountIdentifier";t["HOMEACCOUNT_ID"]="homeAccountIdentifier"})(d||(d={}));[d.SID,d.LOGIN_HINT];var p={PLAIN:"plain",S256:"S256"};r.ResponseMode=void 0;(function(t){t["QUERY"]="query";t["FRAGMENT"]="fragment";t["FORM_POST"]="form_post"})(r.ResponseMode||(r.ResponseMode={}));var g;(function(t){t["IMPLICIT_GRANT"]="implicit";t["AUTHORIZATION_CODE_GRANT"]="authorization_code";t["CLIENT_CREDENTIALS_GRANT"]="client_credentials";t["RESOURCE_OWNER_PASSWORD_GRANT"]="password";t["REFRESH_TOKEN_GRANT"]="refresh_token";t["DEVICE_CODE_GRANT"]="device_code";t["JWT_BEARER"]="urn:ietf:params:oauth:grant-type:jwt-bearer"})(g||(g={}));r.CacheAccountType=void 0;(function(t){t["MSSTS_ACCOUNT_TYPE"]="MSSTS";t["ADFS_ACCOUNT_TYPE"]="ADFS";t["MSAV1_ACCOUNT_TYPE"]="MSA";t["GENERIC_ACCOUNT_TYPE"]="Generic"})(r.CacheAccountType||(r.CacheAccountType={}));var v;(function(t){t["CACHE_KEY_SEPARATOR"]="-";t["CLIENT_INFO_SEPARATOR"]="."})(v||(v={}));r.CredentialType=void 0;(function(t){t["ID_TOKEN"]="IdToken";t["ACCESS_TOKEN"]="AccessToken";t["ACCESS_TOKEN_WITH_AUTH_SCHEME"]="AccessToken_With_AuthScheme";t["REFRESH_TOKEN"]="RefreshToken"})(r.CredentialType||(r.CredentialType={}));r.CacheSchemaType=void 0;(function(t){t["ACCOUNT"]="Account";t["CREDENTIAL"]="Credential";t["ID_TOKEN"]="IdToken";t["ACCESS_TOKEN"]="AccessToken";t["REFRESH_TOKEN"]="RefreshToken";t["APP_METADATA"]="AppMetadata";t["TEMPORARY"]="TempCache";t["TELEMETRY"]="Telemetry";t["UNDEFINED"]="Undefined";t["THROTTLING"]="Throttling"})(r.CacheSchemaType||(r.CacheSchemaType={}));r.CacheType=void 0;(function(t){t[t["ADFS"]=1001]="ADFS";t[t["MSA"]=1002]="MSA";t[t["MSSTS"]=1003]="MSSTS";t[t["GENERIC"]=1004]="GENERIC";t[t["ACCESS_TOKEN"]=2001]="ACCESS_TOKEN";t[t["REFRESH_TOKEN"]=2002]="REFRESH_TOKEN";t[t["ID_TOKEN"]=2003]="ID_TOKEN";t[t["APP_METADATA"]=3001]="APP_METADATA";t[t["UNDEFINED"]=9999]="UNDEFINED"})(r.CacheType||(r.CacheType={}));var E="appmetadata";var S="client_info";var w="1";var x={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24};var N;(function(t){t["CONFIG"]="config";t["CACHE"]="cache";t["NETWORK"]="network"})(N||(N={}));var P={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};r.AuthenticationScheme=void 0;(function(t){t["BEARER"]="Bearer";t["POP"]="pop";t["SSH"]="ssh-cert"})(r.AuthenticationScheme||(r.AuthenticationScheme={}));var D={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"};var M={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"};var L;(function(t){t["username"]="username";t["password"]="password"})(L||(L={}));var U;(function(t){t[t["httpSuccess"]=200]="httpSuccess";t[t["httpBadRequest"]=400]="httpBadRequest"})(U||(U={}));var q;(function(t){t["FAILED_AUTO_DETECTION"]="1";t["INTERNAL_CACHE"]="2";t["ENVIRONMENT_VARIABLE"]="3";t["IMDS"]="4"})(q||(q={}));var B;(function(t){t["CONFIGURED_MATCHES_DETECTED"]="1";t["CONFIGURED_NO_AUTO_DETECTION"]="2";t["CONFIGURED_NOT_DETECTED"]="3";t["AUTO_DETECTION_REQUESTED_SUCCESSFUL"]="4";t["AUTO_DETECTION_REQUESTED_FAILED"]="5"})(B||(B={}));var F;(function(t){t["NO_CACHE_HIT"]="0";t["FORCE_REFRESH"]="1";t["NO_CACHED_ACCESS_TOKEN"]="2";t["CACHED_ACCESS_TOKEN_EXPIRED"]="3";t["REFRESH_CACHED_ACCESS_TOKEN"]="4"})(F||(F={}));var j={unexpectedError:{code:"unexpected_error",desc:"Unexpected error in authentication."}};var H=function(t){__extends(AuthError,t);function AuthError(r,i,o){var a=this;var s=i?r+": "+i:r;a=t.call(this,s)||this;Object.setPrototypeOf(a,AuthError.prototype);a.errorCode=r||n.EMPTY_STRING;a.errorMessage=i||n.EMPTY_STRING;a.subError=o||n.EMPTY_STRING;a.name="AuthError";return a}AuthError.prototype.setCorrelationId=function(t){this.correlationId=t};AuthError.createUnexpectedError=function(t){return new AuthError(j.unexpectedError.code,j.unexpectedError.desc+": "+t)};return AuthError}(Error);var z={createNewGuid:function(){var t="Crypto interface - createNewGuid() has not been implemented";throw H.createUnexpectedError(t)},base64Decode:function(){var t="Crypto interface - base64Decode() has not been implemented";throw H.createUnexpectedError(t)},base64Encode:function(){var t="Crypto interface - base64Encode() has not been implemented";throw H.createUnexpectedError(t)},generatePkceCodes:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - generatePkceCodes() has not been implemented";throw H.createUnexpectedError(t)}))}))},getPublicKeyThumbprint:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - getPublicKeyThumbprint() has not been implemented";throw H.createUnexpectedError(t)}))}))},removeTokenBindingKey:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - removeTokenBindingKey() has not been implemented";throw H.createUnexpectedError(t)}))}))},clearKeystore:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - clearKeystore() has not been implemented";throw H.createUnexpectedError(t)}))}))},signJwt:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - signJwt() has not been implemented";throw H.createUnexpectedError(t)}))}))},hashString:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Crypto interface - hashString() has not been implemented";throw H.createUnexpectedError(t)}))}))}};var V={clientInfoDecodingError:{code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},clientInfoEmptyError:{code:"client_info_empty_error",desc:"The client info was empty. Please review the trace to determine the root cause."},tokenParsingError:{code:"token_parsing_error",desc:"Token cannot be parsed. Please review stack trace to determine root cause."},nullOrEmptyToken:{code:"null_or_empty_token",desc:"The token is null or empty. Please review the trace to determine the root cause."},endpointResolutionError:{code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},networkError:{code:"network_error",desc:"Network request failed. Please check network trace to determine root cause."},unableToGetOpenidConfigError:{code:"openid_config_error",desc:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints."},hashNotDeserialized:{code:"hash_not_deserialized",desc:"The hash parameters could not be deserialized. Please review the trace to determine the root cause."},blankGuidGenerated:{code:"blank_guid_generated",desc:"The guid generated was blank. Please review the trace to determine the root cause."},invalidStateError:{code:"invalid_state",desc:"State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState()."},stateMismatchError:{code:"state_mismatch",desc:"State mismatch error. Please check your network. Continued requests may cause cache overflow."},stateNotFoundError:{code:"state_not_found",desc:"State not found"},nonceMismatchError:{code:"nonce_mismatch",desc:"Nonce mismatch error. This may be caused by a race condition in concurrent requests."},nonceNotFoundError:{code:"nonce_not_found",desc:"nonce not found"},noTokensFoundError:{code:"no_tokens_found",desc:"No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken()."},multipleMatchingTokens:{code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. "+"Call AcquireToken again providing more requirements such as authority or account."},multipleMatchingAccounts:{code:"multiple_matching_accounts",desc:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account"},multipleMatchingAppMetadata:{code:"multiple_matching_appMetadata",desc:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata"},tokenRequestCannotBeMade:{code:"request_cannot_be_made",desc:"Token request cannot be made without authorization code or refresh token."},appendEmptyScopeError:{code:"cannot_append_empty_scope",desc:"Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info."},removeEmptyScopeError:{code:"cannot_remove_empty_scope",desc:"Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info."},appendScopeSetError:{code:"cannot_append_scopeset",desc:"Cannot append ScopeSet due to error."},emptyInputScopeSetError:{code:"empty_input_scopeset",desc:"Empty input ScopeSet cannot be processed."},DeviceCodePollingCancelled:{code:"device_code_polling_cancelled",desc:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true."},DeviceCodeExpired:{code:"device_code_expired",desc:"Device code is expired."},DeviceCodeUnknownError:{code:"device_code_unknown_error",desc:"Device code stopped polling for unknown reasons."},NoAccountInSilentRequest:{code:"no_account_in_silent_request",desc:"Please pass an account object, silent flow is not supported without account information"},invalidCacheRecord:{code:"invalid_cache_record",desc:"Cache record object was null or undefined."},invalidCacheEnvironment:{code:"invalid_cache_environment",desc:"Invalid environment when attempting to create cache entry"},noAccountFound:{code:"no_account_found",desc:"No account found in cache for given key."},CachePluginError:{code:"no cache plugin set on CacheManager",desc:"ICachePlugin needs to be set before using readFromStorage or writeFromStorage"},noCryptoObj:{code:"no_crypto_object",desc:"No crypto object detected. This is required for the following operation: "},invalidCacheType:{code:"invalid_cache_type",desc:"Invalid cache type"},unexpectedAccountType:{code:"unexpected_account_type",desc:"Unexpected account type."},unexpectedCredentialType:{code:"unexpected_credential_type",desc:"Unexpected credential type."},invalidAssertion:{code:"invalid_assertion",desc:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515"},invalidClientCredential:{code:"invalid_client_credential",desc:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential"},tokenRefreshRequired:{code:"token_refresh_required",desc:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired."},userTimeoutReached:{code:"user_timeout_reached",desc:"User defined timeout for device code polling reached"},tokenClaimsRequired:{code:"token_claims_cnf_required_for_signedjwt",desc:"Cannot generate a POP jwt if the token_claims are not populated"},noAuthorizationCodeFromServer:{code:"authorization_code_missing_from_server_response",desc:"Server response does not contain an authorization code to proceed"},noAzureRegionDetected:{code:"no_azure_region_detected",desc:"No azure region was detected and no fallback was made available"},accessTokenEntityNullError:{code:"access_token_entity_null",desc:"Access token entity is null, please check logs and cache to ensure a valid access token is present."},bindingKeyNotRemovedError:{code:"binding_key_not_removed",desc:"Could not remove the credential's binding key from storage."},logoutNotSupported:{code:"end_session_endpoint_not_supported",desc:"Provided authority does not support logout."}};var Y=function(t){__extends(ClientAuthError,t);function ClientAuthError(r,n){var i=t.call(this,r,n)||this;i.name="ClientAuthError";Object.setPrototypeOf(i,ClientAuthError.prototype);return i}ClientAuthError.createClientInfoDecodingError=function(t){return new ClientAuthError(V.clientInfoDecodingError.code,V.clientInfoDecodingError.desc+" Failed with error: "+t)};ClientAuthError.createClientInfoEmptyError=function(){return new ClientAuthError(V.clientInfoEmptyError.code,""+V.clientInfoEmptyError.desc)};ClientAuthError.createTokenParsingError=function(t){return new ClientAuthError(V.tokenParsingError.code,V.tokenParsingError.desc+" Failed with error: "+t)};ClientAuthError.createTokenNullOrEmptyError=function(t){return new ClientAuthError(V.nullOrEmptyToken.code,V.nullOrEmptyToken.desc+" Raw Token Value: "+t)};ClientAuthError.createEndpointDiscoveryIncompleteError=function(t){return new ClientAuthError(V.endpointResolutionError.code,V.endpointResolutionError.desc+" Detail: "+t)};ClientAuthError.createNetworkError=function(t,r){return new ClientAuthError(V.networkError.code,V.networkError.desc+" | Fetch client threw: "+r+" | Attempted to reach: "+t.split("?")[0])};ClientAuthError.createUnableToGetOpenidConfigError=function(t){return new ClientAuthError(V.unableToGetOpenidConfigError.code,V.unableToGetOpenidConfigError.desc+" Attempted to retrieve endpoints from: "+t)};ClientAuthError.createHashNotDeserializedError=function(t){return new ClientAuthError(V.hashNotDeserialized.code,V.hashNotDeserialized.desc+" Given Object: "+t)};ClientAuthError.createInvalidStateError=function(t,r){return new ClientAuthError(V.invalidStateError.code,V.invalidStateError.desc+" Invalid State: "+t+", Root Err: "+r)};ClientAuthError.createStateMismatchError=function(){return new ClientAuthError(V.stateMismatchError.code,V.stateMismatchError.desc)};ClientAuthError.createStateNotFoundError=function(t){return new ClientAuthError(V.stateNotFoundError.code,V.stateNotFoundError.desc+":  "+t)};ClientAuthError.createNonceMismatchError=function(){return new ClientAuthError(V.nonceMismatchError.code,V.nonceMismatchError.desc)};ClientAuthError.createNonceNotFoundError=function(t){return new ClientAuthError(V.nonceNotFoundError.code,V.nonceNotFoundError.desc+":  "+t)};ClientAuthError.createMultipleMatchingTokensInCacheError=function(){return new ClientAuthError(V.multipleMatchingTokens.code,V.multipleMatchingTokens.desc+".")};ClientAuthError.createMultipleMatchingAccountsInCacheError=function(){return new ClientAuthError(V.multipleMatchingAccounts.code,V.multipleMatchingAccounts.desc)};ClientAuthError.createMultipleMatchingAppMetadataInCacheError=function(){return new ClientAuthError(V.multipleMatchingAppMetadata.code,V.multipleMatchingAppMetadata.desc)};ClientAuthError.createTokenRequestCannotBeMadeError=function(){return new ClientAuthError(V.tokenRequestCannotBeMade.code,V.tokenRequestCannotBeMade.desc)};ClientAuthError.createAppendEmptyScopeToSetError=function(t){return new ClientAuthError(V.appendEmptyScopeError.code,V.appendEmptyScopeError.desc+" Given Scope: "+t)};ClientAuthError.createRemoveEmptyScopeFromSetError=function(t){return new ClientAuthError(V.removeEmptyScopeError.code,V.removeEmptyScopeError.desc+" Given Scope: "+t)};ClientAuthError.createAppendScopeSetError=function(t){return new ClientAuthError(V.appendScopeSetError.code,V.appendScopeSetError.desc+" Detail Error: "+t)};ClientAuthError.createEmptyInputScopeSetError=function(){return new ClientAuthError(V.emptyInputScopeSetError.code,""+V.emptyInputScopeSetError.desc)};ClientAuthError.createDeviceCodeCancelledError=function(){return new ClientAuthError(V.DeviceCodePollingCancelled.code,""+V.DeviceCodePollingCancelled.desc)};ClientAuthError.createDeviceCodeExpiredError=function(){return new ClientAuthError(V.DeviceCodeExpired.code,""+V.DeviceCodeExpired.desc)};ClientAuthError.createDeviceCodeUnknownError=function(){return new ClientAuthError(V.DeviceCodeUnknownError.code,""+V.DeviceCodeUnknownError.desc)};ClientAuthError.createNoAccountInSilentRequestError=function(){return new ClientAuthError(V.NoAccountInSilentRequest.code,""+V.NoAccountInSilentRequest.desc)};ClientAuthError.createNullOrUndefinedCacheRecord=function(){return new ClientAuthError(V.invalidCacheRecord.code,V.invalidCacheRecord.desc)};ClientAuthError.createInvalidCacheEnvironmentError=function(){return new ClientAuthError(V.invalidCacheEnvironment.code,V.invalidCacheEnvironment.desc)};ClientAuthError.createNoAccountFoundError=function(){return new ClientAuthError(V.noAccountFound.code,V.noAccountFound.desc)};ClientAuthError.createCachePluginError=function(){return new ClientAuthError(V.CachePluginError.code,""+V.CachePluginError.desc)};ClientAuthError.createNoCryptoObjectError=function(t){return new ClientAuthError(V.noCryptoObj.code,""+V.noCryptoObj.desc+t)};ClientAuthError.createInvalidCacheTypeError=function(){return new ClientAuthError(V.invalidCacheType.code,""+V.invalidCacheType.desc)};ClientAuthError.createUnexpectedAccountTypeError=function(){return new ClientAuthError(V.unexpectedAccountType.code,""+V.unexpectedAccountType.desc)};ClientAuthError.createUnexpectedCredentialTypeError=function(){return new ClientAuthError(V.unexpectedCredentialType.code,""+V.unexpectedCredentialType.desc)};ClientAuthError.createInvalidAssertionError=function(){return new ClientAuthError(V.invalidAssertion.code,""+V.invalidAssertion.desc)};ClientAuthError.createInvalidCredentialError=function(){return new ClientAuthError(V.invalidClientCredential.code,""+V.invalidClientCredential.desc)};ClientAuthError.createRefreshRequiredError=function(){return new ClientAuthError(V.tokenRefreshRequired.code,V.tokenRefreshRequired.desc)};ClientAuthError.createUserTimeoutReachedError=function(){return new ClientAuthError(V.userTimeoutReached.code,V.userTimeoutReached.desc)};ClientAuthError.createTokenClaimsRequiredError=function(){return new ClientAuthError(V.tokenClaimsRequired.code,V.tokenClaimsRequired.desc)};ClientAuthError.createNoAuthCodeInServerResponseError=function(){return new ClientAuthError(V.noAuthorizationCodeFromServer.code,V.noAuthorizationCodeFromServer.desc)};ClientAuthError.createBindingKeyNotRemovedError=function(){return new ClientAuthError(V.bindingKeyNotRemovedError.code,V.bindingKeyNotRemovedError.desc)};ClientAuthError.createLogoutNotSupportedError=function(){return new ClientAuthError(V.logoutNotSupported.code,V.logoutNotSupported.desc)};return ClientAuthError}(H);var G=function(){function StringUtils(){}StringUtils.decodeAuthToken=function(t){if(StringUtils.isEmpty(t)){throw Y.createTokenNullOrEmptyError(t)}var r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/;var n=r.exec(t);if(!n||n.length<4){throw Y.createTokenParsingError("Given token is malformed: "+JSON.stringify(t))}var i={header:n[1],JWSPayload:n[2],JWSSig:n[3]};return i};StringUtils.isEmpty=function(t){return typeof t==="undefined"||!t||0===t.length};StringUtils.isEmptyObj=function(t){if(t&&!StringUtils.isEmpty(t)){try{var r=JSON.parse(t);return Object.keys(r).length===0}catch(t){}}return true};StringUtils.startsWith=function(t,r){return t.indexOf(r)===0};StringUtils.endsWith=function(t,r){return t.length>=r.length&&t.lastIndexOf(r)===t.length-r.length};StringUtils.queryStringToObject=function(t){var r={};var n=t.split("&");var decode=function(t){return decodeURIComponent(t.replace(/\+/g," "))};n.forEach((function(t){if(t.trim()){var n=t.split(/=(.+)/g,2),i=n[0],o=n[1];if(i&&o){r[decode(i)]=decode(o)}}}));return r};StringUtils.trimArrayEntries=function(t){return t.map((function(t){return t.trim()}))};StringUtils.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!StringUtils.isEmpty(t)}))};StringUtils.jsonParseHelper=function(t){try{return JSON.parse(t)}catch(t){return null}};StringUtils.matchPattern=function(t,r){var n=new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?"));return n.test(r)};return StringUtils}();r.LogLevel=void 0;(function(t){t[t["Error"]=0]="Error";t[t["Warning"]=1]="Warning";t[t["Info"]=2]="Info";t[t["Verbose"]=3]="Verbose";t[t["Trace"]=4]="Trace"})(r.LogLevel||(r.LogLevel={}));var W=function(){function Logger(t,i,o){this.level=r.LogLevel.Info;var defaultLoggerCallback=function(){return};this.localCallback=t.loggerCallback||defaultLoggerCallback;this.piiLoggingEnabled=t.piiLoggingEnabled||false;this.level=typeof t.logLevel==="number"?t.logLevel:r.LogLevel.Info;this.correlationId=t.correlationId||n.EMPTY_STRING;this.packageName=i||n.EMPTY_STRING;this.packageVersion=o||n.EMPTY_STRING}Logger.prototype.clone=function(t,r,n){return new Logger({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},t,r)};Logger.prototype.logMessage=function(t,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii){return}var i=(new Date).toUTCString();var o;if(!G.isEmpty(n.correlationId)){o="["+i+"] : ["+n.correlationId+"]"}else if(!G.isEmpty(this.correlationId)){o="["+i+"] : ["+this.correlationId+"]"}else{o="["+i+"]"}var a=o+" : "+this.packageName+"@"+this.packageVersion+" : "+r.LogLevel[n.logLevel]+" - "+t;this.executeCallback(n.logLevel,a,n.containsPii||false)};Logger.prototype.executeCallback=function(t,r,n){if(this.localCallback){this.localCallback(t,r,n)}};Logger.prototype.error=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Error,containsPii:false,correlationId:i||n.EMPTY_STRING})};Logger.prototype.errorPii=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Error,containsPii:true,correlationId:i||n.EMPTY_STRING})};Logger.prototype.warning=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Warning,containsPii:false,correlationId:i||n.EMPTY_STRING})};Logger.prototype.warningPii=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Warning,containsPii:true,correlationId:i||n.EMPTY_STRING})};Logger.prototype.info=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Info,containsPii:false,correlationId:i||n.EMPTY_STRING})};Logger.prototype.infoPii=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Info,containsPii:true,correlationId:i||n.EMPTY_STRING})};Logger.prototype.verbose=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Verbose,containsPii:false,correlationId:i||n.EMPTY_STRING})};Logger.prototype.verbosePii=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Verbose,containsPii:true,correlationId:i||n.EMPTY_STRING})};Logger.prototype.trace=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Trace,containsPii:false,correlationId:i||n.EMPTY_STRING})};Logger.prototype.tracePii=function(t,i){this.logMessage(t,{logLevel:r.LogLevel.Trace,containsPii:true,correlationId:i||n.EMPTY_STRING})};Logger.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||false};return Logger}();var $="@azure/msal-common";var K="6.3.0";r.AzureCloudInstance=void 0;(function(t){t[t["None"]=0]="None";t["AzurePublic"]="https://login.microsoftonline.com";t["AzurePpe"]="https://login.windows-ppe.net";t["AzureChina"]="https://login.chinacloudapi.cn";t["AzureGermany"]="https://login.microsoftonline.de";t["AzureUsGovernment"]="https://login.microsoftonline.us"})(r.AzureCloudInstance||(r.AzureCloudInstance={}));var J=function(){function CredentialEntity(){}CredentialEntity.prototype.generateAccountId=function(){return CredentialEntity.generateAccountIdForCacheKey(this.homeAccountId,this.environment)};CredentialEntity.prototype.generateCredentialId=function(){return CredentialEntity.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)};CredentialEntity.prototype.generateTarget=function(){return CredentialEntity.generateTargetForCacheKey(this.target)};CredentialEntity.prototype.generateCredentialKey=function(){return CredentialEntity.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)};CredentialEntity.prototype.generateType=function(){switch(this.credentialType){case r.CredentialType.ID_TOKEN:return r.CacheType.ID_TOKEN;case r.CredentialType.ACCESS_TOKEN:case r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:return r.CacheType.ACCESS_TOKEN;case r.CredentialType.REFRESH_TOKEN:return r.CacheType.REFRESH_TOKEN;default:{throw Y.createUnexpectedCredentialTypeError()}}};CredentialEntity.getCredentialType=function(t){if(t.indexOf(r.CredentialType.ACCESS_TOKEN.toLowerCase())!==-1){if(t.indexOf(r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())!==-1){return r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME}return r.CredentialType.ACCESS_TOKEN}else if(t.indexOf(r.CredentialType.ID_TOKEN.toLowerCase())!==-1){return r.CredentialType.ID_TOKEN}else if(t.indexOf(r.CredentialType.REFRESH_TOKEN.toLowerCase())!==-1){return r.CredentialType.REFRESH_TOKEN}return n.NOT_DEFINED};CredentialEntity.generateCredentialCacheKey=function(t,r,n,i,o,a,s,c,u){var l=[this.generateAccountIdForCacheKey(t,r),this.generateCredentialIdForCacheKey(n,i,o,s),this.generateTargetForCacheKey(a),this.generateClaimsHashForCacheKey(u),this.generateSchemeForCacheKey(c)];return l.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};CredentialEntity.generateAccountIdForCacheKey=function(t,r){var n=[t,r];return n.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};CredentialEntity.generateCredentialIdForCacheKey=function(t,i,o,a){var s=t===r.CredentialType.REFRESH_TOKEN?a||i:i;var c=[t,s,o||n.EMPTY_STRING];return c.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};CredentialEntity.generateTargetForCacheKey=function(t){return(t||n.EMPTY_STRING).toLowerCase()};CredentialEntity.generateClaimsHashForCacheKey=function(t){return(t||n.EMPTY_STRING).toLowerCase()};CredentialEntity.generateSchemeForCacheKey=function(t){return t&&t.toLowerCase()!==r.AuthenticationScheme.BEARER.toLowerCase()?t.toLowerCase():n.EMPTY_STRING};return CredentialEntity}();var Z={redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},urlParseError:{code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},urlEmptyError:{code:"empty_url_error",desc:"URL was empty or null."},emptyScopesError:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},nonArrayScopesError:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientIdSingleScopeError:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create' and 'none'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},invalidClaimsRequest:{code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},tokenRequestEmptyError:{code:"token_request_empty",desc:"Token request was empty and not found in cache."},logoutRequestEmptyError:{code:"logout_request_empty",desc:"The logout request was null or undefined."},invalidCodeChallengeMethod:{code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},invalidCodeChallengeParams:{code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},invalidCloudDiscoveryMetadata:{code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields"},invalidAuthorityMetadata:{code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields."},untrustedAuthority:{code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."},invalidAzureCloudInstance:{code:"invalid_azure_cloud_instance",desc:"Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values"},missingSshJwk:{code:"missing_ssh_jwk",desc:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme."},missingSshKid:{code:"missing_ssh_kid",desc:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme."},missingNonceAuthenticationHeader:{code:"missing_nonce_authentication_header",desc:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce."},invalidAuthenticationHeader:{code:"invalid_authentication_header",desc:"Invalid authentication header provided"}};var X=function(t){__extends(ClientConfigurationError,t);function ClientConfigurationError(r,n){var i=t.call(this,r,n)||this;i.name="ClientConfigurationError";Object.setPrototypeOf(i,ClientConfigurationError.prototype);return i}ClientConfigurationError.createRedirectUriEmptyError=function(){return new ClientConfigurationError(Z.redirectUriNotSet.code,Z.redirectUriNotSet.desc)};ClientConfigurationError.createPostLogoutRedirectUriEmptyError=function(){return new ClientConfigurationError(Z.postLogoutUriNotSet.code,Z.postLogoutUriNotSet.desc)};ClientConfigurationError.createClaimsRequestParsingError=function(t){return new ClientConfigurationError(Z.claimsRequestParsingError.code,Z.claimsRequestParsingError.desc+" Given value: "+t)};ClientConfigurationError.createInsecureAuthorityUriError=function(t){return new ClientConfigurationError(Z.authorityUriInsecure.code,Z.authorityUriInsecure.desc+" Given URI: "+t)};ClientConfigurationError.createUrlParseError=function(t){return new ClientConfigurationError(Z.urlParseError.code,Z.urlParseError.desc+" Given Error: "+t)};ClientConfigurationError.createUrlEmptyError=function(){return new ClientConfigurationError(Z.urlEmptyError.code,Z.urlEmptyError.desc)};ClientConfigurationError.createEmptyScopesArrayError=function(){return new ClientConfigurationError(Z.emptyScopesError.code,""+Z.emptyScopesError.desc)};ClientConfigurationError.createClientIdSingleScopeError=function(t){return new ClientConfigurationError(Z.clientIdSingleScopeError.code,Z.clientIdSingleScopeError.desc+" Given Scopes: "+t)};ClientConfigurationError.createInvalidPromptError=function(t){return new ClientConfigurationError(Z.invalidPrompt.code,Z.invalidPrompt.desc+" Given value: "+t)};ClientConfigurationError.createInvalidClaimsRequestError=function(){return new ClientConfigurationError(Z.invalidClaimsRequest.code,Z.invalidClaimsRequest.desc)};ClientConfigurationError.createEmptyLogoutRequestError=function(){return new ClientConfigurationError(Z.logoutRequestEmptyError.code,Z.logoutRequestEmptyError.desc)};ClientConfigurationError.createEmptyTokenRequestError=function(){return new ClientConfigurationError(Z.tokenRequestEmptyError.code,Z.tokenRequestEmptyError.desc)};ClientConfigurationError.createInvalidCodeChallengeMethodError=function(){return new ClientConfigurationError(Z.invalidCodeChallengeMethod.code,Z.invalidCodeChallengeMethod.desc)};ClientConfigurationError.createInvalidCodeChallengeParamsError=function(){return new ClientConfigurationError(Z.invalidCodeChallengeParams.code,Z.invalidCodeChallengeParams.desc)};ClientConfigurationError.createInvalidCloudDiscoveryMetadataError=function(){return new ClientConfigurationError(Z.invalidCloudDiscoveryMetadata.code,Z.invalidCloudDiscoveryMetadata.desc)};ClientConfigurationError.createInvalidAuthorityMetadataError=function(){return new ClientConfigurationError(Z.invalidAuthorityMetadata.code,Z.invalidAuthorityMetadata.desc)};ClientConfigurationError.createUntrustedAuthorityError=function(){return new ClientConfigurationError(Z.untrustedAuthority.code,Z.untrustedAuthority.desc)};ClientConfigurationError.createInvalidAzureCloudInstanceError=function(){return new ClientConfigurationError(Z.invalidAzureCloudInstance.code,Z.invalidAzureCloudInstance.desc)};ClientConfigurationError.createMissingSshJwkError=function(){return new ClientConfigurationError(Z.missingSshJwk.code,Z.missingSshJwk.desc)};ClientConfigurationError.createMissingSshKidError=function(){return new ClientConfigurationError(Z.missingSshKid.code,Z.missingSshKid.desc)};ClientConfigurationError.createMissingNonceAuthenticationHeadersError=function(){return new ClientConfigurationError(Z.missingNonceAuthenticationHeader.code,Z.missingNonceAuthenticationHeader.desc)};ClientConfigurationError.createInvalidAuthenticationHeaderError=function(t,r){return new ClientConfigurationError(Z.invalidAuthenticationHeader.code,Z.invalidAuthenticationHeader.desc+". Invalid header: "+t+". Details: "+r)};return ClientConfigurationError}(Y);var Q=function(){function ScopeSet(t){var r=this;var n=t?G.trimArrayEntries(__spreadArrays(t)):[];var i=n?G.removeEmptyStringsFromArray(n):[];this.validateInputScopes(i);this.scopes=new Set;i.forEach((function(t){return r.scopes.add(t)}))}ScopeSet.fromString=function(t){var r=t||n.EMPTY_STRING;var i=r.split(" ");return new ScopeSet(i)};ScopeSet.prototype.validateInputScopes=function(t){if(!t||t.length<1){throw X.createEmptyScopesArrayError()}};ScopeSet.prototype.containsScope=function(t){var r=this.printScopesLowerCase().split(" ");var n=new ScopeSet(r);return!G.isEmpty(t)?n.scopes.has(t.toLowerCase()):false};ScopeSet.prototype.containsScopeSet=function(t){var r=this;if(!t||t.scopes.size<=0){return false}return this.scopes.size>=t.scopes.size&&t.asArray().every((function(t){return r.containsScope(t)}))};ScopeSet.prototype.containsOnlyOIDCScopes=function(){var t=this;var r=0;o.forEach((function(n){if(t.containsScope(n)){r+=1}}));return this.scopes.size===r};ScopeSet.prototype.appendScope=function(t){if(!G.isEmpty(t)){this.scopes.add(t.trim())}};ScopeSet.prototype.appendScopes=function(t){var r=this;try{t.forEach((function(t){return r.appendScope(t)}))}catch(t){throw Y.createAppendScopeSetError(t)}};ScopeSet.prototype.removeScope=function(t){if(G.isEmpty(t)){throw Y.createRemoveEmptyScopeFromSetError(t)}this.scopes.delete(t.trim())};ScopeSet.prototype.removeOIDCScopes=function(){var t=this;o.forEach((function(r){t.scopes.delete(r)}))};ScopeSet.prototype.unionScopeSets=function(t){if(!t){throw Y.createEmptyInputScopeSetError()}var r=new Set;t.scopes.forEach((function(t){return r.add(t.toLowerCase())}));this.scopes.forEach((function(t){return r.add(t.toLowerCase())}));return r};ScopeSet.prototype.intersectingScopeSets=function(t){if(!t){throw Y.createEmptyInputScopeSetError()}if(!t.containsOnlyOIDCScopes()){t.removeOIDCScopes()}var r=this.unionScopeSets(t);var n=t.getScopeCount();var i=this.getScopeCount();var o=r.size;return o<i+n};ScopeSet.prototype.getScopeCount=function(){return this.scopes.size};ScopeSet.prototype.asArray=function(){var t=[];this.scopes.forEach((function(r){return t.push(r)}));return t};ScopeSet.prototype.printScopes=function(){if(this.scopes){var t=this.asArray();return t.join(" ")}return n.EMPTY_STRING};ScopeSet.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()};return ScopeSet}();function buildClientInfo(t,r){if(G.isEmpty(t)){throw Y.createClientInfoEmptyError()}try{var n=r.base64Decode(t);return JSON.parse(n)}catch(t){throw Y.createClientInfoDecodingError(t)}}function buildClientInfoFromHomeAccountId(t){if(G.isEmpty(t)){throw Y.createClientInfoDecodingError("Home account ID was empty.")}var r=t.split(v.CLIENT_INFO_SEPARATOR,2);return{uid:r[0],utid:r.length<2?n.EMPTY_STRING:r[1]}}r.AuthorityType=void 0;(function(t){t[t["Default"]=0]="Default";t[t["Adfs"]=1]="Adfs"})(r.AuthorityType||(r.AuthorityType={}));var ee=function(){function AccountEntity(){}AccountEntity.prototype.generateAccountId=function(){var t=[this.homeAccountId,this.environment];return t.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};AccountEntity.prototype.generateAccountKey=function(){return AccountEntity.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})};AccountEntity.prototype.generateType=function(){switch(this.authorityType){case r.CacheAccountType.ADFS_ACCOUNT_TYPE:return r.CacheType.ADFS;case r.CacheAccountType.MSAV1_ACCOUNT_TYPE:return r.CacheType.MSA;case r.CacheAccountType.MSSTS_ACCOUNT_TYPE:return r.CacheType.MSSTS;case r.CacheAccountType.GENERIC_ACCOUNT_TYPE:return r.CacheType.GENERIC;default:{throw Y.createUnexpectedAccountTypeError()}}};AccountEntity.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}};AccountEntity.generateAccountCacheKey=function(t){var r=[t.homeAccountId,t.environment||n.EMPTY_STRING,t.tenantId||n.EMPTY_STRING];return r.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};AccountEntity.createAccount=function(t,i,o,a,s,c,u,l,d){var p,g,v,E,S,w;var x=new AccountEntity;x.authorityType=r.CacheAccountType.MSSTS_ACCOUNT_TYPE;x.clientInfo=t;x.homeAccountId=i;x.nativeAccountId=d;var N=l||a&&a.getPreferredCache();if(!N){throw Y.createInvalidCacheEnvironmentError()}x.environment=N;x.realm=((p=o===null||o===void 0?void 0:o.claims)===null||p===void 0?void 0:p.tid)||n.EMPTY_STRING;x.oboAssertion=s;if(o){x.idTokenClaims=o.claims;x.localAccountId=((g=o===null||o===void 0?void 0:o.claims)===null||g===void 0?void 0:g.oid)||((v=o===null||o===void 0?void 0:o.claims)===null||v===void 0?void 0:v.sub)||n.EMPTY_STRING;x.username=((E=o===null||o===void 0?void 0:o.claims)===null||E===void 0?void 0:E.preferred_username)||(((S=o===null||o===void 0?void 0:o.claims)===null||S===void 0?void 0:S.emails)?o.claims.emails[0]:n.EMPTY_STRING);x.name=(w=o===null||o===void 0?void 0:o.claims)===null||w===void 0?void 0:w.name}x.cloudGraphHostName=c;x.msGraphHost=u;return x};AccountEntity.createGenericAccount=function(t,i,o,a,s,c,u){var l,d,p,g;var v=new AccountEntity;v.authorityType=o&&o.authorityType===r.AuthorityType.Adfs?r.CacheAccountType.ADFS_ACCOUNT_TYPE:r.CacheAccountType.GENERIC_ACCOUNT_TYPE;v.homeAccountId=t;v.realm=n.EMPTY_STRING;v.oboAssertion=a;var E=u||o&&o.getPreferredCache();if(!E){throw Y.createInvalidCacheEnvironmentError()}if(i){v.localAccountId=((l=i===null||i===void 0?void 0:i.claims)===null||l===void 0?void 0:l.oid)||((d=i===null||i===void 0?void 0:i.claims)===null||d===void 0?void 0:d.sub)||n.EMPTY_STRING;v.username=((p=i===null||i===void 0?void 0:i.claims)===null||p===void 0?void 0:p.upn)||n.EMPTY_STRING;v.name=((g=i===null||i===void 0?void 0:i.claims)===null||g===void 0?void 0:g.name)||n.EMPTY_STRING;v.idTokenClaims=i===null||i===void 0?void 0:i.claims}v.environment=E;v.cloudGraphHostName=s;v.msGraphHost=c;return v};AccountEntity.generateHomeAccountId=function(t,i,o,a,s){var c;var u=((c=s===null||s===void 0?void 0:s.claims)===null||c===void 0?void 0:c.sub)?s.claims.sub:n.EMPTY_STRING;if(i===r.AuthorityType.Adfs){return u}if(t){try{var l=buildClientInfo(t,a);if(!G.isEmpty(l.uid)&&!G.isEmpty(l.utid)){return""+l.uid+v.CLIENT_INFO_SEPARATOR+l.utid}}catch(t){}}o.verbose("No client info in response");return u};AccountEntity.isAccountEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType")};AccountEntity.accountInfoIsEqual=function(t,r,n){if(!t||!r){return false}var i=true;if(n){var o=t.idTokenClaims||{};var a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return t.homeAccountId===r.homeAccountId&&t.localAccountId===r.localAccountId&&t.username===r.username&&t.tenantId===r.tenantId&&t.environment===r.environment&&t.nativeAccountId===r.nativeAccountId&&i};return AccountEntity}();var te=function(){function AuthToken(t,r){if(G.isEmpty(t)){throw Y.createTokenNullOrEmptyError(t)}this.rawToken=t;this.claims=AuthToken.extractTokenClaims(t,r)}AuthToken.extractTokenClaims=function(t,r){var n=G.decodeAuthToken(t);try{var i=n.JWSPayload;var o=r.base64Decode(i);return JSON.parse(o)}catch(t){throw Y.createTokenParsingError(t)}};return AuthToken}();var re=function(){function CacheManager(t,r){this.clientId=t;this.cryptoImpl=r}CacheManager.prototype.getAllAccounts=function(){var t=this;var r=this.getAccountsFilteredBy();var n=Object.keys(r).map((function(t){return r[t]}));var i=n.length;if(i<1){return[]}else{var o=n.map((function(r){var n=CacheManager.toObject(new ee,r);var i=n.getAccountInfo();var o=t.readIdTokenFromCache(t.clientId,i);if(o&&!i.idTokenClaims){i.idTokenClaims=new te(o.secret,t.cryptoImpl).claims}return i}));return o}};CacheManager.prototype.saveCacheRecord=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){switch(r.label){case 0:if(!t){throw Y.createNullOrUndefinedCacheRecord()}if(!!t.account){this.setAccount(t.account)}if(!!t.idToken){this.setIdTokenCredential(t.idToken)}if(!!!t.accessToken)return[3,2];return[4,this.saveAccessToken(t.accessToken)];case 1:r.sent();r.label=2;case 2:if(!!t.refreshToken){this.setRefreshTokenCredential(t.refreshToken)}if(!!t.appMetadata){this.setAppMetadata(t.appMetadata)}return[2]}}))}))};CacheManager.prototype.saveAccessToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i,o;var a=this;return __generator(this,(function(s){switch(s.label){case 0:r=this.getCredentialsFilteredBy({clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash});n=Q.fromString(t.target);i=Object.keys(r.accessTokens).map((function(t){return r.accessTokens[t]}));if(!i)return[3,2];o=[];i.forEach((function(t){var r=Q.fromString(t.target);if(r.intersectingScopeSets(n)){o.push(a.removeCredential(t))}}));return[4,Promise.all(o)];case 1:s.sent();s.label=2;case 2:this.setAccessTokenCredential(t);return[2]}}))}))};CacheManager.prototype.getAccountsFilteredBy=function(t){return this.getAccountsFilteredByInternal(t?t.homeAccountId:n.EMPTY_STRING,t?t.environment:n.EMPTY_STRING,t?t.realm:n.EMPTY_STRING)};CacheManager.prototype.getAccountsFilteredByInternal=function(t,r,n){var i=this;var o=this.getKeys();var a={};o.forEach((function(o){var s=i.getAccount(o);if(!s){return}if(!!t&&!i.matchHomeAccountId(s,t)){return}if(!!r&&!i.matchEnvironment(s,r)){return}if(!!n&&!i.matchRealm(s,n)){return}a[o]=s}));return a};CacheManager.prototype.getCredentialsFilteredBy=function(t){return this.getCredentialsFilteredByInternal(t.homeAccountId,t.environment,t.credentialType,t.clientId,t.familyId,t.realm,t.target,t.oboAssertion,t.tokenType,t.keyId,t.requestedClaimsHash)};CacheManager.prototype.getCredentialsFilteredByInternal=function(t,i,o,a,s,c,u,l,d,p,g){var v=this;var E=this.getKeys();var S={idTokens:{},accessTokens:{},refreshTokens:{}};E.forEach((function(E){var w=J.getCredentialType(E);if(w===n.NOT_DEFINED){return}var x=v.getSpecificCredential(E,w);if(!x){return}if(!!l&&!v.matchOboAssertion(x,l)){return}if(!!t&&!v.matchHomeAccountId(x,t)){return}if(!!i&&!v.matchEnvironment(x,i)){return}if(!!c&&!v.matchRealm(x,c)){return}if(!!o&&!v.matchCredentialType(x,o)){return}if(!!a&&!v.matchClientId(x,a)){return}if(!!s&&!v.matchFamilyId(x,s)){return}if(!!u&&!v.matchTarget(x,u)){return}if(g||x.requestedClaimsHash){if(x.requestedClaimsHash!==g){return}}if(o===r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(!!d&&!v.matchTokenType(x,d)){return}if(d===r.AuthenticationScheme.SSH){if(p&&!v.matchKeyId(x,p)){return}}}var N=v.updateCredentialCacheKey(E,x);switch(w){case r.CredentialType.ID_TOKEN:S.idTokens[N]=x;break;case r.CredentialType.ACCESS_TOKEN:case r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:S.accessTokens[N]=x;break;case r.CredentialType.REFRESH_TOKEN:S.refreshTokens[N]=x;break}}));return S};CacheManager.prototype.getAppMetadataFilteredBy=function(t){return this.getAppMetadataFilteredByInternal(t.environment,t.clientId)};CacheManager.prototype.getAppMetadataFilteredByInternal=function(t,r){var n=this;var i=this.getKeys();var o={};i.forEach((function(i){if(!n.isAppMetadata(i)){return}var a=n.getAppMetadata(i);if(!a){return}if(!!t&&!n.matchEnvironment(a,t)){return}if(!!r&&!n.matchClientId(a,r)){return}o[i]=a}));return o};CacheManager.prototype.getAuthorityMetadataByAlias=function(t){var r=this;var n=this.getAuthorityMetadataKeys();var i=null;n.forEach((function(n){if(!r.isAuthorityMetadata(n)||n.indexOf(r.clientId)===-1){return}var o=r.getAuthorityMetadata(n);if(!o){return}if(o.aliases.indexOf(t)===-1){return}i=o}));return i};CacheManager.prototype.removeAllAccounts=function(){return __awaiter(this,void 0,void 0,(function(){var t,r;var n=this;return __generator(this,(function(i){switch(i.label){case 0:t=this.getKeys();r=[];t.forEach((function(t){var i=n.getAccount(t);if(!i){return}r.push(n.removeAccount(t))}));return[4,Promise.all(r)];case 1:i.sent();return[2,true]}}))}))};CacheManager.prototype.removeAccount=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:n=this.getAccount(t);if(!n){throw Y.createNoAccountFoundError()}return[4,this.removeAccountContext(n)];case 1:return[2,i.sent()&&this.removeItem(t,r.CacheSchemaType.ACCOUNT)]}}))}))};CacheManager.prototype.removeAccountContext=function(t){return __awaiter(this,void 0,void 0,(function(){var r,i,o;var a=this;return __generator(this,(function(s){switch(s.label){case 0:r=this.getKeys();i=t.generateAccountId();o=[];r.forEach((function(t){var r=J.getCredentialType(t);if(r===n.NOT_DEFINED){return}var s=a.getSpecificCredential(t,r);if(!!s&&i===s.generateAccountId()){o.push(a.removeCredential(s))}}));return[4,Promise.all(o)];case 1:s.sent();return[2,true]}}))}))};CacheManager.prototype.removeCredential=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(a){switch(a.label){case 0:n=t.generateCredentialKey();if(!(t.credentialType.toLowerCase()===r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()))return[3,4];if(!(t.tokenType===r.AuthenticationScheme.POP))return[3,4];i=t;o=i.keyId;if(!o)return[3,4];a.label=1;case 1:a.trys.push([1,3,,4]);return[4,this.cryptoImpl.removeTokenBindingKey(o)];case 2:a.sent();return[3,4];case 3:a.sent();throw Y.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(n,r.CacheSchemaType.CREDENTIAL)]}}))}))};CacheManager.prototype.removeAppMetadata=function(){var t=this;var n=this.getKeys();n.forEach((function(n){if(t.isAppMetadata(n)){t.removeItem(n,r.CacheSchemaType.APP_METADATA)}}));return true};CacheManager.prototype.readCacheRecord=function(t,r,n,i){var o=this.readAccountFromCache(t);var a=this.readIdTokenFromCache(r,t);var s=this.readAccessTokenFromCache(r,t,n);var c=this.readRefreshTokenFromCache(r,t,false);var u=this.readAppMetadataFromCache(i,r);if(o&&a){o.idTokenClaims=new te(a.secret,this.cryptoImpl).claims}return{account:o,idToken:a,accessToken:s,refreshToken:c,appMetadata:u}};CacheManager.prototype.readAccountFromCache=function(t){var r=ee.generateAccountCacheKey(t);return this.getAccount(r)};CacheManager.prototype.readIdTokenFromCache=function(t,n){var i={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:r.CredentialType.ID_TOKEN,clientId:t,realm:n.tenantId};var o=this.getCredentialsFilteredBy(i);var a=Object.keys(o.idTokens).map((function(t){return o.idTokens[t]}));var s=a.length;if(s<1){return null}else if(s>1){throw Y.createMultipleMatchingTokensInCacheError()}return a[0]};CacheManager.prototype.readAccessTokenFromCache=function(t,n,i){var o=new Q(i.scopes||[]);var a=i.authenticationScheme||r.AuthenticationScheme.BEARER;var s=a&&a.toLowerCase()!==r.AuthenticationScheme.BEARER.toLowerCase()?r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:r.CredentialType.ACCESS_TOKEN;var c={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:s,clientId:t,realm:n.tenantId,target:o.printScopesLowerCase(),tokenType:a,keyId:i.sshKid,requestedClaimsHash:i.requestedClaimsHash};var u=this.getCredentialsFilteredBy(c);var l=Object.keys(u.accessTokens).map((function(t){return u.accessTokens[t]}));var d=l.length;if(d<1){return null}else if(d>1){throw Y.createMultipleMatchingTokensInCacheError()}return l[0]};CacheManager.prototype.readRefreshTokenFromCache=function(t,n,i){var o=i?w:undefined;var a={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:r.CredentialType.REFRESH_TOKEN,clientId:t,familyId:o};var s=this.getCredentialsFilteredBy(a);var c=Object.keys(s.refreshTokens).map((function(t){return s.refreshTokens[t]}));var u=c.length;if(u<1){return null}return c[0]};CacheManager.prototype.readAppMetadataFromCache=function(t,r){var n={environment:t,clientId:r};var i=this.getAppMetadataFilteredBy(n);var o=Object.keys(i).map((function(t){return i[t]}));var a=o.length;if(a<1){return null}else if(a>1){throw Y.createMultipleMatchingAppMetadataInCacheError()}return o[0]};CacheManager.prototype.isAppMetadataFOCI=function(t,r){var n=this.readAppMetadataFromCache(t,r);return!!(n&&n.familyId===w)};CacheManager.prototype.matchHomeAccountId=function(t,r){return!!(t.homeAccountId&&r===t.homeAccountId)};CacheManager.prototype.matchOboAssertion=function(t,r){return!!(t.oboAssertion&&r===t.oboAssertion)};CacheManager.prototype.matchEnvironment=function(t,r){var n=this.getAuthorityMetadataByAlias(r);if(n&&n.aliases.indexOf(t.environment)>-1){return true}return false};CacheManager.prototype.matchCredentialType=function(t,r){return t.credentialType&&r.toLowerCase()===t.credentialType.toLowerCase()};CacheManager.prototype.matchClientId=function(t,r){return!!(t.clientId&&r===t.clientId)};CacheManager.prototype.matchFamilyId=function(t,r){return!!(t.familyId&&r===t.familyId)};CacheManager.prototype.matchRealm=function(t,r){return!!(t.realm&&r===t.realm)};CacheManager.prototype.matchTarget=function(t,i){var o=t.credentialType!==r.CredentialType.ACCESS_TOKEN&&t.credentialType!==r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;if(o||!t.target){return false}var a=Q.fromString(t.target);var s=Q.fromString(i);if(!s.containsOnlyOIDCScopes()){s.removeOIDCScopes()}else{s.removeScope(n.OFFLINE_ACCESS_SCOPE)}return a.containsScopeSet(s)};CacheManager.prototype.matchTokenType=function(t,r){return!!(t.tokenType&&t.tokenType===r)};CacheManager.prototype.matchKeyId=function(t,r){return!!(t.keyId&&t.keyId===r)};CacheManager.prototype.isAppMetadata=function(t){return t.indexOf(E)!==-1};CacheManager.prototype.isAuthorityMetadata=function(t){return t.indexOf(x.CACHE_KEY)!==-1};CacheManager.prototype.generateAuthorityMetadataCacheKey=function(t){return x.CACHE_KEY+"-"+this.clientId+"-"+t};CacheManager.prototype.getSpecificCredential=function(t,n){switch(n){case r.CredentialType.ID_TOKEN:{return this.getIdTokenCredential(t)}case r.CredentialType.ACCESS_TOKEN:case r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:{return this.getAccessTokenCredential(t)}case r.CredentialType.REFRESH_TOKEN:{return this.getRefreshTokenCredential(t)}default:return null}};CacheManager.toObject=function(t,r){for(var n in r){t[n]=r[n]}return t};return CacheManager}();var ne=function(t){__extends(DefaultStorageClass,t);function DefaultStorageClass(){return t!==null&&t.apply(this,arguments)||this}DefaultStorageClass.prototype.setAccount=function(){var t="Storage interface - setAccount() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAccount=function(){var t="Storage interface - getAccount() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setIdTokenCredential=function(){var t="Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getIdTokenCredential=function(){var t="Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setAccessTokenCredential=function(){var t="Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAccessTokenCredential=function(){var t="Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setRefreshTokenCredential=function(){var t="Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getRefreshTokenCredential=function(){var t="Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setAppMetadata=function(){var t="Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAppMetadata=function(){var t="Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setServerTelemetry=function(){var t="Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getServerTelemetry=function(){var t="Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setAuthorityMetadata=function(){var t="Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAuthorityMetadata=function(){var t="Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getAuthorityMetadataKeys=function(){var t="Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.setThrottlingCache=function(){var t="Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getThrottlingCache=function(){var t="Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.removeItem=function(){var t="Storage interface - removeItem() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.containsKey=function(){var t="Storage interface - containsKey() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.getKeys=function(){var t="Storage interface - getKeys() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};DefaultStorageClass.prototype.clear=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Storage interface - clear() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)}))}))};DefaultStorageClass.prototype.updateCredentialCacheKey=function(){var t="Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.";throw H.createUnexpectedError(t)};return DefaultStorageClass}(re);var ie=300;var oe={tokenRenewalOffsetSeconds:ie,preventCorsPreflight:false,proxyUrl:n.EMPTY_STRING};var ae={loggerCallback:function(){},piiLoggingEnabled:false,logLevel:r.LogLevel.Info,correlationId:n.EMPTY_STRING};var se={sendGetRequestAsync:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Network interface - sendGetRequestAsync() has not been implemented";throw H.createUnexpectedError(t)}))}))},sendPostRequestAsync:function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){t="Network interface - sendPostRequestAsync() has not been implemented";throw H.createUnexpectedError(t)}))}))}};var ce={sku:n.SKU,version:K,cpu:n.EMPTY_STRING,os:n.EMPTY_STRING};var ue={clientSecret:n.EMPTY_STRING,clientAssertion:undefined};var le={azureCloudInstance:r.AzureCloudInstance.None,tenant:""+n.DEFAULT_COMMON_TENANT};var fe={application:{appName:"",appVersion:""}};function buildClientConfiguration(t){var r=t.authOptions,n=t.systemOptions,i=t.loggerOptions,o=t.storageInterface,a=t.networkInterface,s=t.cryptoInterface,c=t.clientCredentials,u=t.libraryInfo,l=t.telemetry,d=t.serverTelemetryManager,p=t.persistencePlugin,g=t.serializableCache;var v=__assign(__assign({},ae),i);return{authOptions:buildAuthOptions(r),systemOptions:__assign(__assign({},oe),n),loggerOptions:v,storageInterface:o||new ne(r.clientId,z),networkInterface:a||se,cryptoInterface:s||z,clientCredentials:c||ue,libraryInfo:__assign(__assign({},ce),u),telemetry:__assign(__assign({},fe),l),serverTelemetryManager:d||null,persistencePlugin:p||null,serializableCache:g||null}}function buildAuthOptions(t){return __assign({clientCapabilities:[],azureCloudOptions:le},t)}var de=function(t){__extends(ServerError,t);function ServerError(r,n,i){var o=t.call(this,r,n,i)||this;o.name="ServerError";Object.setPrototypeOf(o,ServerError.prototype);return o}return ServerError}(H);var pe=function(){function ThrottlingUtils(){}ThrottlingUtils.generateThrottlingStorageKey=function(t){return D.THROTTLING_PREFIX+"."+JSON.stringify(t)};ThrottlingUtils.preProcess=function(t,i){var o;var a=ThrottlingUtils.generateThrottlingStorageKey(i);var s=t.getThrottlingCache(a);if(s){if(s.throttleTime<Date.now()){t.removeItem(a,r.CacheSchemaType.THROTTLING);return}throw new de(((o=s.errorCodes)===null||o===void 0?void 0:o.join(" "))||n.EMPTY_STRING,s.errorMessage,s.subError)}};ThrottlingUtils.postProcess=function(t,r,n){if(ThrottlingUtils.checkResponseStatus(n)||ThrottlingUtils.checkResponseForRetryAfter(n)){var i={throttleTime:ThrottlingUtils.calculateThrottleTime(parseInt(n.headers[a.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};t.setThrottlingCache(ThrottlingUtils.generateThrottlingStorageKey(r),i)}};ThrottlingUtils.checkResponseStatus=function(t){return t.status===429||t.status>=500&&t.status<600};ThrottlingUtils.checkResponseForRetryAfter=function(t){if(t.headers){return t.headers.hasOwnProperty(a.RETRY_AFTER)&&(t.status<200||t.status>=300)}return false};ThrottlingUtils.calculateThrottleTime=function(t){var r=t<=0?0:t;var n=Date.now()/1e3;return Math.floor(Math.min(n+(r||D.DEFAULT_THROTTLE_TIME_SECONDS),n+D.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)};ThrottlingUtils.removeThrottle=function(t,n,i,o){var a={clientId:n,authority:i.authority,scopes:i.scopes,homeAccountIdentifier:o,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid};var s=this.generateThrottlingStorageKey(a);return t.removeItem(s,r.CacheSchemaType.THROTTLING)};return ThrottlingUtils}();var he=function(){function NetworkManager(t,r){this.networkClient=t;this.cacheManager=r}NetworkManager.prototype.sendPostRequest=function(t,r,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(a){switch(a.label){case 0:pe.preProcess(this.cacheManager,t);a.label=1;case 1:a.trys.push([1,3,,4]);return[4,this.networkClient.sendPostRequestAsync(r,n)];case 2:i=a.sent();return[3,4];case 3:o=a.sent();if(o instanceof H){throw o}else{throw Y.createNetworkError(r,o)}case 4:pe.postProcess(this.cacheManager,t,i);return[2,i]}}))}))};return NetworkManager}();r.CcsCredentialType=void 0;(function(t){t["HOME_ACCOUNT_ID"]="home_account_id";t["UPN"]="UPN"})(r.CcsCredentialType||(r.CcsCredentialType={}));var me=function(){function BaseClient(t){this.config=buildClientConfiguration(t);this.logger=new W(this.config.loggerOptions,$,K);this.cryptoUtils=this.config.cryptoInterface;this.cacheManager=this.config.storageInterface;this.networkClient=this.config.networkInterface;this.networkManager=new he(this.networkClient,this.cacheManager);this.serverTelemetryManager=this.config.serverTelemetryManager;this.authority=this.config.authOptions.authority}BaseClient.prototype.createTokenRequestHeaders=function(t){var i={};i[a.CONTENT_TYPE]=n.URL_FORM_CONTENT_TYPE;if(!this.config.systemOptions.preventCorsPreflight&&t){switch(t.type){case r.CcsCredentialType.HOME_ACCOUNT_ID:try{var o=buildClientInfoFromHomeAccountId(t.credential);i[a.CCS_HEADER]="Oid:"+o.uid+"@"+o.utid}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}break;case r.CcsCredentialType.UPN:i[a.CCS_HEADER]="UPN: "+t.credential;break}}return i};BaseClient.prototype.executePostToTokenEndpoint=function(t,r,n,i){return __awaiter(this,void 0,void 0,(function(){var o;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.networkManager.sendPostRequest(i,t,{body:r,headers:n,proxyUrl:this.config.systemOptions.proxyUrl})];case 1:o=a.sent();if(this.config.serverTelemetryManager&&o.status<500&&o.status!==429){this.config.serverTelemetryManager.clearTelemetryCache()}return[2,o]}}))}))};BaseClient.prototype.updateAuthority=function(t){if(!t.discoveryComplete()){throw Y.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.")}this.authority=t};return BaseClient}();var ge=function(){function RequestValidator(){}RequestValidator.validateRedirectUri=function(t){if(G.isEmpty(t)){throw X.createRedirectUriEmptyError()}};RequestValidator.validatePrompt=function(t){var r=[];for(var n in l){r.push(l[n])}if(r.indexOf(t)<0){throw X.createInvalidPromptError(t)}};RequestValidator.validateClaims=function(t){try{JSON.parse(t)}catch(t){throw X.createInvalidClaimsRequestError()}};RequestValidator.validateCodeChallengeParams=function(t,r){if(G.isEmpty(t)||G.isEmpty(r)){throw X.createInvalidCodeChallengeParamsError()}else{this.validateCodeChallengeMethod(r)}};RequestValidator.validateCodeChallengeMethod=function(t){if([p.PLAIN,p.S256].indexOf(t)<0){throw X.createInvalidCodeChallengeMethodError()}};RequestValidator.sanitizeEQParams=function(t,r){if(!t){return{}}r.forEach((function(r,n){if(t[n]){delete t[n]}}));return t};return RequestValidator}();var ve=function(){function RequestParameterBuilder(){this.parameters=new Map}RequestParameterBuilder.prototype.addResponseTypeCode=function(){this.parameters.set(c.RESPONSE_TYPE,encodeURIComponent(n.CODE_RESPONSE_TYPE))};RequestParameterBuilder.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(c.RESPONSE_TYPE,encodeURIComponent(n.TOKEN_RESPONSE_TYPE+" "+n.ID_TOKEN_RESPONSE_TYPE))};RequestParameterBuilder.prototype.addResponseMode=function(t){this.parameters.set(c.RESPONSE_MODE,encodeURIComponent(t?t:r.ResponseMode.QUERY))};RequestParameterBuilder.prototype.addNativeBroker=function(){this.parameters.set(c.NATIVE_BROKER,encodeURIComponent("1"))};RequestParameterBuilder.prototype.addScopes=function(t,r){if(r===void 0){r=true}var n=r?__spreadArrays(t||[],i):t||[];var o=new Q(n);this.parameters.set(c.SCOPE,encodeURIComponent(o.printScopes()))};RequestParameterBuilder.prototype.addClientId=function(t){this.parameters.set(c.CLIENT_ID,encodeURIComponent(t))};RequestParameterBuilder.prototype.addRedirectUri=function(t){ge.validateRedirectUri(t);this.parameters.set(c.REDIRECT_URI,encodeURIComponent(t))};RequestParameterBuilder.prototype.addPostLogoutRedirectUri=function(t){ge.validateRedirectUri(t);this.parameters.set(c.POST_LOGOUT_URI,encodeURIComponent(t))};RequestParameterBuilder.prototype.addIdTokenHint=function(t){this.parameters.set(c.ID_TOKEN_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addDomainHint=function(t){this.parameters.set(d.DOMAIN_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addLoginHint=function(t){this.parameters.set(d.LOGIN_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addCcsUpn=function(t){this.parameters.set(a.CCS_HEADER,encodeURIComponent("UPN:"+t))};RequestParameterBuilder.prototype.addCcsOid=function(t){this.parameters.set(a.CCS_HEADER,encodeURIComponent("Oid:"+t.uid+"@"+t.utid))};RequestParameterBuilder.prototype.addSid=function(t){this.parameters.set(d.SID,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClaims=function(t,r){var n=this.addClientCapabilitiesToClaims(t,r);ge.validateClaims(n);this.parameters.set(c.CLAIMS,encodeURIComponent(n))};RequestParameterBuilder.prototype.addCorrelationId=function(t){this.parameters.set(c.CLIENT_REQUEST_ID,encodeURIComponent(t))};RequestParameterBuilder.prototype.addLibraryInfo=function(t){this.parameters.set(c.X_CLIENT_SKU,t.sku);this.parameters.set(c.X_CLIENT_VER,t.version);if(t.os){this.parameters.set(c.X_CLIENT_OS,t.os)}if(t.cpu){this.parameters.set(c.X_CLIENT_CPU,t.cpu)}};RequestParameterBuilder.prototype.addApplicationTelemetry=function(t){if(t===null||t===void 0?void 0:t.appName){this.parameters.set(c.X_APP_NAME,t.appName)}if(t===null||t===void 0?void 0:t.appVersion){this.parameters.set(c.X_APP_VER,t.appVersion)}};RequestParameterBuilder.prototype.addPrompt=function(t){ge.validatePrompt(t);this.parameters.set(""+c.PROMPT,encodeURIComponent(t))};RequestParameterBuilder.prototype.addState=function(t){if(!G.isEmpty(t)){this.parameters.set(c.STATE,encodeURIComponent(t))}};RequestParameterBuilder.prototype.addNonce=function(t){this.parameters.set(c.NONCE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addCodeChallengeParams=function(t,r){ge.validateCodeChallengeParams(t,r);if(t&&r){this.parameters.set(c.CODE_CHALLENGE,encodeURIComponent(t));this.parameters.set(c.CODE_CHALLENGE_METHOD,encodeURIComponent(r))}else{throw X.createInvalidCodeChallengeParamsError()}};RequestParameterBuilder.prototype.addAuthorizationCode=function(t){this.parameters.set(c.CODE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addDeviceCode=function(t){this.parameters.set(c.DEVICE_CODE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addRefreshToken=function(t){this.parameters.set(c.REFRESH_TOKEN,encodeURIComponent(t))};RequestParameterBuilder.prototype.addCodeVerifier=function(t){this.parameters.set(c.CODE_VERIFIER,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientSecret=function(t){this.parameters.set(c.CLIENT_SECRET,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientAssertion=function(t){this.parameters.set(c.CLIENT_ASSERTION,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientAssertionType=function(t){this.parameters.set(c.CLIENT_ASSERTION_TYPE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addOboAssertion=function(t){this.parameters.set(c.OBO_ASSERTION,encodeURIComponent(t))};RequestParameterBuilder.prototype.addRequestTokenUse=function(t){this.parameters.set(c.REQUESTED_TOKEN_USE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addGrantType=function(t){this.parameters.set(c.GRANT_TYPE,encodeURIComponent(t))};RequestParameterBuilder.prototype.addClientInfo=function(){this.parameters.set(S,"1")};RequestParameterBuilder.prototype.addExtraQueryParameters=function(t){var r=this;ge.sanitizeEQParams(t,this.parameters);Object.keys(t).forEach((function(n){r.parameters.set(n,t[n])}))};RequestParameterBuilder.prototype.addClientCapabilitiesToClaims=function(t,r){var n;if(!t){n={}}else{try{n=JSON.parse(t)}catch(t){throw X.createInvalidClaimsRequestError()}}if(r&&r.length>0){if(!n.hasOwnProperty(u.ACCESS_TOKEN)){n[u.ACCESS_TOKEN]={}}n[u.ACCESS_TOKEN][u.XMS_CC]={values:r}}return JSON.stringify(n)};RequestParameterBuilder.prototype.addUsername=function(t){this.parameters.set(L.username,t)};RequestParameterBuilder.prototype.addPassword=function(t){this.parameters.set(L.password,t)};RequestParameterBuilder.prototype.addPopToken=function(t){if(!G.isEmpty(t)){this.parameters.set(c.TOKEN_TYPE,r.AuthenticationScheme.POP);this.parameters.set(c.REQ_CNF,encodeURIComponent(t))}};RequestParameterBuilder.prototype.addSshJwk=function(t){if(!G.isEmpty(t)){this.parameters.set(c.TOKEN_TYPE,r.AuthenticationScheme.SSH);this.parameters.set(c.REQ_CNF,encodeURIComponent(t))}};RequestParameterBuilder.prototype.addServerTelemetry=function(t){this.parameters.set(c.X_CLIENT_CURR_TELEM,t.generateCurrentRequestHeaderValue());this.parameters.set(c.X_CLIENT_LAST_TELEM,t.generateLastRequestHeaderValue())};RequestParameterBuilder.prototype.addThrottling=function(){this.parameters.set(c.X_MS_LIB_CAPABILITY,D.X_MS_LIB_CAPABILITY_VALUE)};RequestParameterBuilder.prototype.addLogoutHint=function(t){this.parameters.set(c.LOGOUT_HINT,encodeURIComponent(t))};RequestParameterBuilder.prototype.createQueryString=function(){var t=new Array;this.parameters.forEach((function(r,n){t.push(n+"="+r)}));return t.join("&")};return RequestParameterBuilder}();var ye=function(t){__extends(IdTokenEntity,t);function IdTokenEntity(){return t!==null&&t.apply(this,arguments)||this}IdTokenEntity.createIdTokenEntity=function(t,n,i,o,a,s){var c=new IdTokenEntity;c.credentialType=r.CredentialType.ID_TOKEN;c.homeAccountId=t;c.environment=n;c.clientId=o;c.secret=i;c.realm=a;c.oboAssertion=s;return c};IdTokenEntity.isIdTokenEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t["credentialType"]===r.CredentialType.ID_TOKEN};return IdTokenEntity}(J);var _e=function(){function TimeUtils(){}TimeUtils.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)};TimeUtils.isTokenExpired=function(t,r){var n=Number(t)||0;var i=TimeUtils.nowSeconds()+r;return i>n};TimeUtils.wasClockTurnedBack=function(t){var r=Number(t);return r>TimeUtils.nowSeconds()};TimeUtils.delay=function(t,r){return new Promise((function(n){return setTimeout((function(){return n(r)}),t)}))};return TimeUtils}();var Ee=function(t){__extends(AccessTokenEntity,t);function AccessTokenEntity(){return t!==null&&t.apply(this,arguments)||this}AccessTokenEntity.createAccessTokenEntity=function(t,n,i,o,a,s,c,u,l,d,p,g,v,E,S){var w,x;var N=new AccessTokenEntity;N.homeAccountId=t;N.credentialType=r.CredentialType.ACCESS_TOKEN;N.secret=i;var P=_e.nowSeconds();N.cachedAt=P.toString();N.expiresOn=c.toString();N.extendedExpiresOn=u.toString();if(d){N.refreshOn=d.toString()}N.environment=n;N.clientId=o;N.realm=a;N.target=s;N.oboAssertion=g;N.tokenType=G.isEmpty(p)?r.AuthenticationScheme.BEARER:p;if(E){N.requestedClaims=E;N.requestedClaimsHash=S}if(((w=N.tokenType)===null||w===void 0?void 0:w.toLowerCase())!==r.AuthenticationScheme.BEARER.toLowerCase()){N.credentialType=r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;switch(N.tokenType){case r.AuthenticationScheme.POP:var D=te.extractTokenClaims(i,l);if(!((x=D===null||D===void 0?void 0:D.cnf)===null||x===void 0?void 0:x.kid)){throw Y.createTokenClaimsRequiredError()}N.keyId=D.cnf.kid;break;case r.AuthenticationScheme.SSH:N.keyId=v}}return N};AccessTokenEntity.isAccessTokenEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.hasOwnProperty("target")&&(t["credentialType"]===r.CredentialType.ACCESS_TOKEN||t["credentialType"]===r.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME)};return AccessTokenEntity}(J);var be=function(t){__extends(RefreshTokenEntity,t);function RefreshTokenEntity(){return t!==null&&t.apply(this,arguments)||this}RefreshTokenEntity.createRefreshTokenEntity=function(t,n,i,o,a,s){var c=new RefreshTokenEntity;c.clientId=o;c.credentialType=r.CredentialType.REFRESH_TOKEN;c.environment=n;c.homeAccountId=t;c.secret=i;c.oboAssertion=s;if(a)c.familyId=a;return c};RefreshTokenEntity.isRefreshTokenEntity=function(t){if(!t){return false}return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t["credentialType"]===r.CredentialType.REFRESH_TOKEN};return RefreshTokenEntity}(J);var Se=["interaction_required","consent_required","login_required"];var Te=["message_only","additional_action","basic_action","user_password_expired","consent_required"];var Ce={noTokensFoundError:{code:"no_tokens_found",desc:"No refresh token found in the cache. Please sign-in."}};var we=function(t){__extends(InteractionRequiredAuthError,t);function InteractionRequiredAuthError(r,n,i){var o=t.call(this,r,n,i)||this;o.name="InteractionRequiredAuthError";Object.setPrototypeOf(o,InteractionRequiredAuthError.prototype);return o}InteractionRequiredAuthError.isInteractionRequiredError=function(t,r,n){var i=!!t&&Se.indexOf(t)>-1;var o=!!n&&Te.indexOf(n)>-1;var a=!!r&&Se.some((function(t){return r.indexOf(t)>-1}));return i||a||o};InteractionRequiredAuthError.createNoTokensFoundError=function(){return new InteractionRequiredAuthError(Ce.noTokensFoundError.code,Ce.noTokensFoundError.desc)};return InteractionRequiredAuthError}(H);var Ae=function(){function CacheRecord(t,r,n,i,o){this.account=t||null;this.idToken=r||null;this.accessToken=n||null;this.refreshToken=i||null;this.appMetadata=o||null}return CacheRecord}();var Ie=function(){function ProtocolUtils(){}ProtocolUtils.setRequestState=function(t,r,i){var o=ProtocolUtils.generateLibraryState(t,i);return!G.isEmpty(r)?""+o+n.RESOURCE_DELIM+r:o};ProtocolUtils.generateLibraryState=function(t,r){if(!t){throw Y.createNoCryptoObjectError("generateLibraryState")}var n={id:t.createNewGuid()};if(r){n.meta=r}var i=JSON.stringify(n);return t.base64Encode(i)};ProtocolUtils.parseRequestState=function(t,r){if(!t){throw Y.createNoCryptoObjectError("parseRequestState")}if(G.isEmpty(r)){throw Y.createInvalidStateError(r,"Null, undefined or empty state")}try{var i=r.split(n.RESOURCE_DELIM);var o=i[0];var a=i.length>1?i.slice(1).join(n.RESOURCE_DELIM):n.EMPTY_STRING;var s=t.base64Decode(o);var c=JSON.parse(s);return{userRequestState:!G.isEmpty(a)?a:n.EMPTY_STRING,libraryState:c}}catch(t){throw Y.createInvalidStateError(r,t)}};return ProtocolUtils}();var Oe=function(){function UrlString(t){this._urlString=t;if(G.isEmpty(this._urlString)){throw X.createUrlEmptyError()}if(G.isEmpty(this.getHash())){this._urlString=UrlString.canonicalizeUri(t)}}Object.defineProperty(UrlString.prototype,"urlString",{get:function(){return this._urlString},enumerable:false,configurable:true});UrlString.canonicalizeUri=function(t){if(t){var r=t.toLowerCase();if(G.endsWith(r,"?")){r=r.slice(0,-1)}else if(G.endsWith(r,"?/")){r=r.slice(0,-2)}if(!G.endsWith(r,"/")){r+="/"}return r}return t};UrlString.prototype.validateAsUri=function(){var t;try{t=this.getUrlComponents()}catch(t){throw X.createUrlParseError(t)}if(!t.HostNameAndPort||!t.PathSegments){throw X.createUrlParseError("Given url string: "+this.urlString)}if(!t.Protocol||t.Protocol.toLowerCase()!=="https:"){throw X.createInsecureAuthorityUriError(this.urlString)}};UrlString.appendQueryString=function(t,r){if(G.isEmpty(r)){return t}return t.indexOf("?")<0?t+"?"+r:t+"&"+r};UrlString.removeHashFromUrl=function(t){return UrlString.canonicalizeUri(t.split("#")[0])};UrlString.prototype.replaceTenantPath=function(t){var r=this.getUrlComponents();var n=r.PathSegments;if(t&&(n.length!==0&&(n[0]===s.COMMON||n[0]===s.ORGANIZATIONS))){n[0]=t}return UrlString.constructAuthorityUriFromObject(r)};UrlString.prototype.getHash=function(){return UrlString.parseHash(this.urlString)};UrlString.prototype.getUrlComponents=function(){var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");var r=this.urlString.match(t);if(!r){throw X.createUrlParseError("Given url string: "+this.urlString)}var n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]};var i=n.AbsolutePath.split("/");i=i.filter((function(t){return t&&t.length>0}));n.PathSegments=i;if(!G.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")){n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)}return n};UrlString.getDomainFromUrl=function(t){var r=RegExp("^([^:/?#]+://)?([^/?#]*)");var n=t.match(r);if(!n){throw X.createUrlParseError("Given url string: "+t)}return n[2]};UrlString.getAbsoluteUrl=function(t,r){if(t[0]===n.FORWARD_SLASH){var i=new UrlString(r);var o=i.getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+t}return t};UrlString.parseHash=function(t){var r=t.indexOf("#");var i=t.indexOf("#/");if(i>-1){return t.substring(i+2)}else if(r>-1){return t.substring(r+1)}return n.EMPTY_STRING};UrlString.constructAuthorityUriFromObject=function(t){return new UrlString(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))};UrlString.getDeserializedHash=function(t){if(G.isEmpty(t)){return{}}var r=UrlString.parseHash(t);var n=G.queryStringToObject(G.isEmpty(r)?t:r);if(!n){throw Y.createHashNotDeserializedError(JSON.stringify(n))}return n};UrlString.hashContainsKnownProperties=function(t){if(G.isEmpty(t)||t.indexOf("=")<0){return false}var r=UrlString.getDeserializedHash(t);return!!(r.code||r.error_description||r.error||r.state)};return UrlString}();var Re;(function(t){t["SW"]="sw";t["UHW"]="uhw"})(Re||(Re={}));var ke=function(){function PopTokenGenerator(t){this.cryptoUtils=t}PopTokenGenerator.prototype.generateCnf=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.generateKid(t)];case 1:r=n.sent();return[2,this.cryptoUtils.base64Encode(JSON.stringify(r))]}}))}))};PopTokenGenerator.prototype.generateCnfHash=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,this.cryptoUtils.hashString(t)]}))}))};PopTokenGenerator.prototype.generateKid=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.cryptoUtils.getPublicKeyThumbprint(t)];case 1:r=n.sent();return[2,{kid:r,xms_ksl:Re.SW}]}}))}))};PopTokenGenerator.prototype.signPopToken=function(t,r){var n;return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){i=te.extractTokenClaims(t,this.cryptoUtils);if(!((n=i===null||i===void 0?void 0:i.cnf)===null||n===void 0?void 0:n.kid)){throw Y.createTokenClaimsRequiredError()}return[2,this.signPayload(t,i.cnf.kid,r)]}))}))};PopTokenGenerator.prototype.signPayload=function(t,r,n,i){return __awaiter(this,void 0,void 0,(function(){var o,a,s,c,u,l;return __generator(this,(function(d){switch(d.label){case 0:o=n.resourceRequestMethod,a=n.resourceRequestUri,s=n.shrClaims,c=n.shrNonce;u=a?new Oe(a):undefined;l=u===null||u===void 0?void 0:u.getUrlComponents();return[4,this.cryptoUtils.signJwt(__assign({at:t,ts:_e.nowSeconds(),m:o===null||o===void 0?void 0:o.toUpperCase(),u:l===null||l===void 0?void 0:l.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:l===null||l===void 0?void 0:l.AbsolutePath,q:(l===null||l===void 0?void 0:l.QueryString)?[[],l.QueryString]:undefined,client_claims:s||undefined},i),r,n.correlationId)];case 1:return[2,d.sent()]}}))}))};return PopTokenGenerator}();var xe=function(){function AppMetadataEntity(){}AppMetadataEntity.prototype.generateAppMetadataKey=function(){return AppMetadataEntity.generateAppMetadataCacheKey(this.environment,this.clientId)};AppMetadataEntity.generateAppMetadataCacheKey=function(t,r){var n=[E,t,r];return n.join(v.CACHE_KEY_SEPARATOR).toLowerCase()};AppMetadataEntity.createAppMetadataEntity=function(t,r,n){var i=new AppMetadataEntity;i.clientId=t;i.environment=r;if(n){i.familyId=n}return i};AppMetadataEntity.isAppMetadataEntity=function(t,r){if(!r){return false}return t.indexOf(E)===0&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("environment")};return AppMetadataEntity}();var Ne=function(){function TokenCacheContext(t,r){this.cache=t;this.hasChanged=r}Object.defineProperty(TokenCacheContext.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:false,configurable:true});Object.defineProperty(TokenCacheContext.prototype,"tokenCache",{get:function(){return this.cache},enumerable:false,configurable:true});return TokenCacheContext}();var Pe=function(){function ResponseHandler(t,r,n,i,o,a){this.clientId=t;this.cacheStorage=r;this.cryptoObj=n;this.logger=i;this.serializableCache=o;this.persistencePlugin=a}ResponseHandler.prototype.validateServerAuthorizationCodeResponse=function(t,r,i){if(!t.state||!r){throw!t.state?Y.createStateNotFoundError("Server State"):Y.createStateNotFoundError("Cached State")}if(decodeURIComponent(t.state)!==decodeURIComponent(r)){throw Y.createStateMismatchError()}if(t.error||t.error_description||t.suberror){if(we.isInteractionRequiredError(t.error,t.error_description,t.suberror)){throw new we(t.error||n.EMPTY_STRING,t.error_description,t.suberror)}throw new de(t.error||n.EMPTY_STRING,t.error_description,t.suberror)}if(t.client_info){buildClientInfo(t.client_info,i)}};ResponseHandler.prototype.validateTokenResponse=function(t){if(t.error||t.error_description||t.suberror){if(we.isInteractionRequiredError(t.error,t.error_description,t.suberror)){throw new we(t.error,t.error_description,t.suberror)}var r=t.error_codes+" - ["+t.timestamp+"]: "+t.error_description+" - Correlation ID: "+t.correlation_id+" - Trace ID: "+t.trace_id;throw new de(t.error,r,t.suberror)}};ResponseHandler.prototype.handleServerTokenResponse=function(t,r,i,o,a,s,c){return __awaiter(this,void 0,void 0,(function(){var u,l,d,p,g,v;return __generator(this,(function(E){switch(E.label){case 0:if(t.id_token){u=new te(t.id_token||n.EMPTY_STRING,this.cryptoObj);if(a&&!G.isEmpty(a.nonce)){if(u.claims.nonce!==a.nonce){throw Y.createNonceMismatchError()}}}this.homeAccountIdentifier=ee.generateHomeAccountId(t.client_info||n.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,u);if(!!a&&!!a.state){l=Ie.parseRequestState(this.cryptoObj,a.state)}t.key_id=t.key_id||o.sshKid||undefined;d=this.generateCacheRecord(t,r,i,o,u,s,a);E.label=1;case 1:E.trys.push([1,,5,8]);if(!(this.persistencePlugin&&this.serializableCache))return[3,3];this.logger.verbose("Persistence enabled, calling beforeCacheAccess");p=new Ne(this.serializableCache,true);return[4,this.persistencePlugin.beforeCacheAccess(p)];case 2:E.sent();E.label=3;case 3:if(c&&d.account){g=d.account.generateAccountKey();v=this.cacheStorage.getAccount(g);if(!v){this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache");return[2,ResponseHandler.generateAuthenticationResult(this.cryptoObj,r,d,false,o,u,l)]}}return[4,this.cacheStorage.saveCacheRecord(d)];case 4:E.sent();return[3,8];case 5:if(!(this.persistencePlugin&&this.serializableCache&&p))return[3,7];this.logger.verbose("Persistence enabled, calling afterCacheAccess");return[4,this.persistencePlugin.afterCacheAccess(p)];case 6:E.sent();E.label=7;case 7:return[7];case 8:return[2,ResponseHandler.generateAuthenticationResult(this.cryptoObj,r,d,false,o,u,l,t.spa_code)]}}))}))};ResponseHandler.prototype.generateCacheRecord=function(t,r,i,o,a,s,c){var u=r.getPreferredCache();if(G.isEmpty(u)){throw Y.createInvalidCacheEnvironmentError()}var l;var d;if(!G.isEmpty(t.id_token)&&!!a){l=ye.createIdTokenEntity(this.homeAccountIdentifier,u,t.id_token||n.EMPTY_STRING,this.clientId,a.claims.tid||n.EMPTY_STRING,s);d=this.generateAccountEntity(t,a,r,s,c)}var p=null;if(!G.isEmpty(t.access_token)){var g=t.scope?Q.fromString(t.scope):new Q(o.scopes||[]);var v=(typeof t.expires_in==="string"?parseInt(t.expires_in,10):t.expires_in)||0;var E=(typeof t.ext_expires_in==="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0;var S=(typeof t.refresh_in==="string"?parseInt(t.refresh_in,10):t.refresh_in)||undefined;var w=i+v;var x=w+E;var N=S&&S>0?i+S:undefined;p=Ee.createAccessTokenEntity(this.homeAccountIdentifier,u,t.access_token||n.EMPTY_STRING,this.clientId,a?a.claims.tid||n.EMPTY_STRING:r.tenant,g.printScopes(),w,x,this.cryptoObj,N,t.token_type,s,t.key_id,o.claims,o.requestedClaimsHash)}var P=null;if(!G.isEmpty(t.refresh_token)){P=be.createRefreshTokenEntity(this.homeAccountIdentifier,u,t.refresh_token||n.EMPTY_STRING,this.clientId,t.foci,s)}var D=null;if(!G.isEmpty(t.foci)){D=xe.createAppMetadataEntity(this.clientId,u,t.foci)}return new Ae(d,l,p,P,D)};ResponseHandler.prototype.generateAccountEntity=function(t,i,o,a,s){var c=o.authorityType;var u=s?s.cloud_graph_host_name:n.EMPTY_STRING;var l=s?s.msgraph_host:n.EMPTY_STRING;if(c===r.AuthorityType.Adfs){this.logger.verbose("Authority type is ADFS, creating ADFS account");return ee.createGenericAccount(this.homeAccountIdentifier,i,o,a,u,l)}if(G.isEmpty(t.client_info)&&o.protocolMode==="AAD"){throw Y.createClientInfoEmptyError()}return t.client_info?ee.createAccount(t.client_info,this.homeAccountIdentifier,i,o,a,u,l):ee.createGenericAccount(this.homeAccountIdentifier,i,o,a,u,l)};ResponseHandler.generateAuthenticationResult=function(t,i,o,a,s,c,u,l){var d,p,g;return __awaiter(this,void 0,void 0,(function(){var v,E,S,x,N,P,D,M;return __generator(this,(function(L){switch(L.label){case 0:v=n.EMPTY_STRING;E=[];S=null;N=n.EMPTY_STRING;if(!o.accessToken)return[3,4];if(!(o.accessToken.tokenType===r.AuthenticationScheme.POP))return[3,2];P=new ke(t);return[4,P.signPopToken(o.accessToken.secret,s)];case 1:v=L.sent();return[3,3];case 2:v=o.accessToken.secret;L.label=3;case 3:E=Q.fromString(o.accessToken.target).asArray();S=new Date(Number(o.accessToken.expiresOn)*1e3);x=new Date(Number(o.accessToken.extendedExpiresOn)*1e3);L.label=4;case 4:if(o.appMetadata){N=o.appMetadata.familyId===w?w:n.EMPTY_STRING}D=(c===null||c===void 0?void 0:c.claims.oid)||(c===null||c===void 0?void 0:c.claims.sub)||n.EMPTY_STRING;M=(c===null||c===void 0?void 0:c.claims.tid)||n.EMPTY_STRING;return[2,{authority:i.canonicalAuthority,uniqueId:D,tenantId:M,scopes:E,account:o.account?o.account.getAccountInfo():null,idToken:c?c.rawToken:n.EMPTY_STRING,idTokenClaims:c?c.claims:{},accessToken:v,fromCache:a,expiresOn:S,correlationId:s.correlationId,extExpiresOn:x,familyId:N,tokenType:((d=o.accessToken)===null||d===void 0?void 0:d.tokenType)||n.EMPTY_STRING,state:u?u.userRequestState:n.EMPTY_STRING,cloudGraphHostName:((p=o.account)===null||p===void 0?void 0:p.cloudGraphHostName)||n.EMPTY_STRING,msGraphHost:((g=o.account)===null||g===void 0?void 0:g.msGraphHost)||n.EMPTY_STRING,code:l,fromNativeBroker:false}]}}))}))};return ResponseHandler}();var De=function(t){__extends(AuthorizationCodeClient,t);function AuthorizationCodeClient(r){var n=t.call(this,r)||this;n.includeRedirectUri=true;return n}AuthorizationCodeClient.prototype.getAuthCodeUrl=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.createAuthCodeUrlQueryString(t)];case 1:r=n.sent();return[2,Oe.appendQueryString(this.authority.authorizationEndpoint,r)]}}))}))};AuthorizationCodeClient.prototype.acquireToken=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(a){switch(a.label){case 0:this.logger.info("in acquireToken call");if(!t||G.isEmpty(t.code)){throw Y.createTokenRequestCannotBeMadeError()}n=_e.nowSeconds();return[4,this.executeTokenRequest(this.authority,t)];case 1:i=a.sent();o=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);o.validateTokenResponse(i.body);return[4,o.handleServerTokenResponse(i.body,this.authority,n,t,r)];case 2:return[2,a.sent()]}}))}))};AuthorizationCodeClient.prototype.handleFragmentResponse=function(t,r){var n=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null);var i=new Oe(t);var o=Oe.getDeserializedHash(i.getHash());n.validateServerAuthorizationCodeResponse(o,r,this.cryptoUtils);if(!o.code){throw Y.createNoAuthCodeInServerResponseError()}return __assign(__assign({},o),{code:o.code})};AuthorizationCodeClient.prototype.getLogoutUri=function(t){if(!t){throw X.createEmptyLogoutRequestError()}var r=this.createLogoutUrlQueryString(t);return Oe.appendQueryString(this.authority.endSessionEndpoint,r)};AuthorizationCodeClient.prototype.executeTokenRequest=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u,l;return __generator(this,(function(d){switch(d.label){case 0:i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return[4,this.createTokenRequestBody(n)];case 1:o=d.sent();a=this.createTokenQueryParameters(n);s=undefined;if(n.clientInfo){try{c=buildClientInfo(n.clientInfo,this.cryptoUtils);s={credential:""+c.uid+v.CLIENT_INFO_SEPARATOR+c.utid,type:r.CcsCredentialType.HOME_ACCOUNT_ID}}catch(t){this.logger.verbose("Could not parse client info for CCS Header: "+t)}}u=this.createTokenRequestHeaders(s||n.ccsCredential);l=G.isEmpty(a)?t.tokenEndpoint:t.tokenEndpoint+"?"+a;return[2,this.executePostToTokenEndpoint(l,o,u,i)]}}))}))};AuthorizationCodeClient.prototype.createTokenQueryParameters=function(t){var r=new ve;if(t.tokenQueryParameters){r.addExtraQueryParameters(t.tokenQueryParameters)}return r.createQueryString()};AuthorizationCodeClient.prototype.createTokenRequestBody=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,l;var d;return __generator(this,(function(p){switch(p.label){case 0:n=new ve;n.addClientId(this.config.authOptions.clientId);if(!this.includeRedirectUri){ge.validateRedirectUri(t.redirectUri)}else{n.addRedirectUri(t.redirectUri)}n.addScopes(t.scopes);n.addAuthorizationCode(t.code);n.addLibraryInfo(this.config.libraryInfo);n.addApplicationTelemetry(this.config.telemetry.application);n.addThrottling();if(this.serverTelemetryManager){n.addServerTelemetry(this.serverTelemetryManager)}if(t.codeVerifier){n.addCodeVerifier(t.codeVerifier)}if(this.config.clientCredentials.clientSecret){n.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){i=this.config.clientCredentials.clientAssertion;n.addClientAssertion(i.assertion);n.addClientAssertionType(i.assertionType)}n.addGrantType(g.AUTHORIZATION_CODE_GRANT);n.addClientInfo();if(!(t.authenticationScheme===r.AuthenticationScheme.POP))return[3,2];o=new ke(this.cryptoUtils);return[4,o.generateCnf(t)];case 1:a=p.sent();n.addPopToken(a);return[3,3];case 2:if(t.authenticationScheme===r.AuthenticationScheme.SSH){if(t.sshJwk){n.addSshJwk(t.sshJwk)}else{throw X.createMissingSshJwkError()}}p.label=3;case 3:s=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(s);if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}u=undefined;if(t.clientInfo){try{l=buildClientInfo(t.clientInfo,this.cryptoUtils);u={credential:""+l.uid+v.CLIENT_INFO_SEPARATOR+l.utid,type:r.CcsCredentialType.HOME_ACCOUNT_ID}}catch(t){this.logger.verbose("Could not parse client info for CCS Header: "+t)}}else{u=t.ccsCredential}if(this.config.systemOptions.preventCorsPreflight&&u){switch(u.type){case r.CcsCredentialType.HOME_ACCOUNT_ID:try{l=buildClientInfoFromHomeAccountId(u.credential);n.addCcsOid(l)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}break;case r.CcsCredentialType.UPN:n.addCcsUpn(u.credential);break}}if(t.tokenBodyParameters){n.addExtraQueryParameters(t.tokenBodyParameters)}if(t.enableSpaAuthorizationCode&&(!t.tokenBodyParameters||!t.tokenBodyParameters[c.RETURN_SPA_CODE])){n.addExtraQueryParameters((d={},d[c.RETURN_SPA_CODE]="1",d))}return[2,n.createQueryString()]}}))}))};AuthorizationCodeClient.prototype.createAuthCodeUrlQueryString=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,s,c,u,d;return __generator(this,(function(p){switch(p.label){case 0:n=new ve;n.addClientId(this.config.authOptions.clientId);i=__spreadArrays(t.scopes||[],t.extraScopesToConsent||[]);n.addScopes(i);n.addRedirectUri(t.redirectUri);o=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(o);n.addResponseMode(t.responseMode);n.addResponseTypeCode();n.addLibraryInfo(this.config.libraryInfo);n.addApplicationTelemetry(this.config.telemetry.application);n.addClientInfo();if(t.codeChallenge&&t.codeChallengeMethod){n.addCodeChallengeParams(t.codeChallenge,t.codeChallengeMethod)}if(t.prompt){n.addPrompt(t.prompt)}if(t.domainHint){n.addDomainHint(t.domainHint)}if(t.prompt!==l.SELECT_ACCOUNT){if(t.sid&&t.prompt===l.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request");n.addSid(t.sid)}else if(t.account){a=this.extractAccountSid(t.account);if(a&&t.prompt===l.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account");n.addSid(a);try{s=buildClientInfoFromHomeAccountId(t.account.homeAccountId);n.addCcsOid(s)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}}else if(t.loginHint){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request");n.addLoginHint(t.loginHint);n.addCcsUpn(t.loginHint)}else if(t.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account");n.addLoginHint(t.account.username);try{s=buildClientInfoFromHomeAccountId(t.account.homeAccountId);n.addCcsOid(s)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}}}else if(t.loginHint){this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request");n.addLoginHint(t.loginHint);n.addCcsUpn(t.loginHint)}}else{this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints")}if(t.nonce){n.addNonce(t.nonce)}if(t.state){n.addState(t.state)}if(!G.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}if(t.extraQueryParameters){n.addExtraQueryParameters(t.extraQueryParameters)}if(!t.nativeBroker)return[3,3];n.addNativeBroker();if(!(t.authenticationScheme===r.AuthenticationScheme.POP))return[3,3];c=new ke(this.cryptoUtils);return[4,c.generateCnf(t)];case 1:u=p.sent();return[4,c.generateCnfHash(u)];case 2:d=p.sent();n.addPopToken(d);p.label=3;case 3:return[2,n.createQueryString()]}}))}))};AuthorizationCodeClient.prototype.createLogoutUrlQueryString=function(t){var r=new ve;if(t.postLogoutRedirectUri){r.addPostLogoutRedirectUri(t.postLogoutRedirectUri)}if(t.correlationId){r.addCorrelationId(t.correlationId)}if(t.idTokenHint){r.addIdTokenHint(t.idTokenHint)}if(t.state){r.addState(t.state)}if(t.logoutHint){r.addLogoutHint(t.logoutHint)}if(t.extraQueryParameters){r.addExtraQueryParameters(t.extraQueryParameters)}return r.createQueryString()};AuthorizationCodeClient.prototype.extractAccountSid=function(t){if(t.idTokenClaims){var r=t.idTokenClaims;return r.sid||null}return null};return AuthorizationCodeClient}(me);var Me=function(t){__extends(DeviceCodeClient,t);function DeviceCodeClient(r){return t.call(this,r)||this}DeviceCodeClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.getDeviceCode(t)];case 1:r=a.sent();t.deviceCodeCallback(r);n=_e.nowSeconds();return[4,this.acquireTokenWithDeviceCode(t,r)];case 2:i=a.sent();o=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);o.validateTokenResponse(i);return[4,o.handleServerTokenResponse(i,this.authority,n,t)];case 3:return[2,a.sent()]}}))}))};DeviceCodeClient.prototype.getDeviceCode=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i;return __generator(this,(function(o){r=this.createQueryString(t);n=this.createTokenRequestHeaders();i={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return[2,this.executePostRequestToDeviceCodeEndpoint(this.authority.deviceCodeEndpoint,r,n,i)]}))}))};DeviceCodeClient.prototype.executePostRequestToDeviceCodeEndpoint=function(t,r,n,i){return __awaiter(this,void 0,void 0,(function(){var o,a,s,c,u,l,d;return __generator(this,(function(p){switch(p.label){case 0:return[4,this.networkManager.sendPostRequest(i,t,{body:r,headers:n,proxyUrl:this.config.systemOptions.proxyUrl})];case 1:o=p.sent().body,a=o.user_code,s=o.device_code,c=o.verification_uri,u=o.expires_in,l=o.interval,d=o.message;return[2,{userCode:a,deviceCode:s,verificationUri:c,expiresIn:u,interval:l,message:d}]}}))}))};DeviceCodeClient.prototype.createQueryString=function(t){var r=new ve;r.addScopes(t.scopes);r.addClientId(this.config.authOptions.clientId);if(!G.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}return r.createQueryString()};DeviceCodeClient.prototype.continuePolling=function(t,r,n){if(n){this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true");throw Y.createDeviceCodeCancelledError()}else if(r&&r<t&&_e.nowSeconds()>r){this.logger.error("User defined timeout for device code polling reached. The timeout was set for "+r);throw Y.createUserTimeoutReachedError()}else if(_e.nowSeconds()>t){if(r){this.logger.verbose("User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for "+r)}this.logger.error("Device code expired. Expiration time of device code was "+t);throw Y.createDeviceCodeExpiredError()}return true};DeviceCodeClient.prototype.acquireTokenWithDeviceCode=function(t,r){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u,l;return __generator(this,(function(d){switch(d.label){case 0:i=this.createTokenRequestBody(t,r);o=this.createTokenRequestHeaders();a=t.timeout?_e.nowSeconds()+t.timeout:undefined;s=_e.nowSeconds()+r.expiresIn;c=r.interval*1e3;d.label=1;case 1:if(!this.continuePolling(s,a,t.cancel))return[3,6];u={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return[4,this.executePostToTokenEndpoint(this.authority.tokenEndpoint,i,o,u)];case 2:l=d.sent();if(!(l.body&&l.body.error===n.AUTHORIZATION_PENDING))return[3,4];this.logger.info(l.body.error_description||"Authorization pending. Continue polling.");return[4,_e.delay(c)];case 3:d.sent();return[3,5];case 4:this.logger.verbose("Authorization completed successfully. Polling stopped.");return[2,l.body];case 5:return[3,1];case 6:this.logger.error("Polling stopped for unknown reasons.");throw Y.createDeviceCodeUnknownError()}}))}))};DeviceCodeClient.prototype.createTokenRequestBody=function(t,r){var n=new ve;n.addScopes(t.scopes);n.addClientId(this.config.authOptions.clientId);n.addGrantType(g.DEVICE_CODE_GRANT);n.addDeviceCode(r.deviceCode);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(i);n.addClientInfo();n.addLibraryInfo(this.config.libraryInfo);n.addApplicationTelemetry(this.config.telemetry.application);n.addThrottling();if(this.serverTelemetryManager){n.addServerTelemetry(this.serverTelemetryManager)}if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}return n.createQueryString()};return DeviceCodeClient}(me);var Le=function(t){__extends(RefreshTokenClient,t);function RefreshTokenClient(r){return t.call(this,r)||this}RefreshTokenClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i;return __generator(this,(function(o){switch(o.label){case 0:r=_e.nowSeconds();return[4,this.executeTokenRequest(t,this.authority)];case 1:n=o.sent();i=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);i.validateTokenResponse(n.body);return[2,i.handleServerTokenResponse(n.body,this.authority,r,t,undefined,undefined,true)]}}))}))};RefreshTokenClient.prototype.acquireTokenByRefreshToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i;return __generator(this,(function(o){if(!t){throw X.createEmptyTokenRequestError()}if(!t.account){throw Y.createNoAccountInSilentRequestError()}r=this.cacheManager.isAppMetadataFOCI(t.account.environment,this.config.authOptions.clientId);if(r){try{return[2,this.acquireTokenWithCachedRefreshToken(t,true)]}catch(r){n=r instanceof we&&r.errorCode===Ce.noTokensFoundError.code;i=r instanceof de&&r.errorCode===M.INVALID_GRANT_ERROR&&r.subError===M.CLIENT_MISMATCH_ERROR;if(n||i){return[2,this.acquireTokenWithCachedRefreshToken(t,false)]}else{throw r}}}return[2,this.acquireTokenWithCachedRefreshToken(t,false)]}))}))};RefreshTokenClient.prototype.acquireTokenWithCachedRefreshToken=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(a){i=this.cacheManager.readRefreshTokenFromCache(this.config.authOptions.clientId,t.account,n);if(!i){throw we.createNoTokensFoundError()}o=__assign(__assign({},t),{refreshToken:i.secret,authenticationScheme:t.authenticationScheme||r.AuthenticationScheme.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:r.CcsCredentialType.HOME_ACCOUNT_ID}});return[2,this.acquireToken(o)]}))}))};RefreshTokenClient.prototype.executeTokenRequest=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return __generator(this,(function(c){switch(c.label){case 0:return[4,this.createTokenRequestBody(t)];case 1:n=c.sent();i=this.createTokenQueryParameters(t);o=this.createTokenRequestHeaders(t.ccsCredential);a={clientId:this.config.authOptions.clientId,authority:r.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};s=Oe.appendQueryString(r.tokenEndpoint,i);return[2,this.executePostToTokenEndpoint(s,n,o,a)]}}))}))};RefreshTokenClient.prototype.createTokenQueryParameters=function(t){var r=new ve;if(t.tokenQueryParameters){r.addExtraQueryParameters(t.tokenQueryParameters)}return r.createQueryString()};RefreshTokenClient.prototype.createTokenRequestBody=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c;return __generator(this,(function(u){switch(u.label){case 0:n=new ve;n.addClientId(this.config.authOptions.clientId);n.addScopes(t.scopes);n.addGrantType(g.REFRESH_TOKEN_GRANT);n.addClientInfo();n.addLibraryInfo(this.config.libraryInfo);n.addApplicationTelemetry(this.config.telemetry.application);n.addThrottling();if(this.serverTelemetryManager){n.addServerTelemetry(this.serverTelemetryManager)}i=t.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(i);n.addRefreshToken(t.refreshToken);if(this.config.clientCredentials.clientSecret){n.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion);n.addClientAssertionType(o.assertionType)}if(!(t.authenticationScheme===r.AuthenticationScheme.POP))return[3,2];a=new ke(this.cryptoUtils);return[4,a.generateCnf(t)];case 1:s=u.sent();n.addPopToken(s);return[3,3];case 2:if(t.authenticationScheme===r.AuthenticationScheme.SSH){if(t.sshJwk){n.addSshJwk(t.sshJwk)}else{throw X.createMissingSshJwkError()}}u.label=3;case 3:if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){n.addClaims(t.claims,this.config.authOptions.clientCapabilities)}if(this.config.systemOptions.preventCorsPreflight&&t.ccsCredential){switch(t.ccsCredential.type){case r.CcsCredentialType.HOME_ACCOUNT_ID:try{c=buildClientInfoFromHomeAccountId(t.ccsCredential.credential);n.addCcsOid(c)}catch(t){this.logger.verbose("Could not parse home account ID for CCS Header: "+t)}break;case r.CcsCredentialType.UPN:n.addCcsUpn(t.ccsCredential.credential);break}}return[2,n.createQueryString()]}}))}))};return RefreshTokenClient}(me);var Ue=function(t){__extends(ClientCredentialClient,t);function ClientCredentialClient(r){return t.call(this,r)||this}ClientCredentialClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:this.scopeSet=new Q(t.scopes||[]);if(!t.skipCache)return[3,2];return[4,this.executeTokenRequest(t,this.authority)];case 1:return[2,n.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:r=n.sent();if(!r)return[3,4];return[2,r];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,n.sent()]}}))}))};ClientCredentialClient.prototype.getCachedAuthenticationResult=function(t){var r,n;return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:i=this.readAccessTokenFromCache();if(!i){(r=this.serverTelemetryManager)===null||r===void 0?void 0:r.setCacheOutcome(F.NO_CACHED_ACCESS_TOKEN);return[2,null]}if(_e.isTokenExpired(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)){(n=this.serverTelemetryManager)===null||n===void 0?void 0:n.setCacheOutcome(F.CACHED_ACCESS_TOKEN_EXPIRED);return[2,null]}return[4,Pe.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:null,idToken:null,accessToken:i,refreshToken:null,appMetadata:null},true,t)];case 1:return[2,o.sent()]}}))}))};ClientCredentialClient.prototype.readAccessTokenFromCache=function(){var t={homeAccountId:n.EMPTY_STRING,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:r.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()};var i=this.cacheManager.getCredentialsFilteredBy(t);var o=Object.keys(i.accessTokens).map((function(t){return i.accessTokens[t]}));if(o.length<1){return null}else if(o.length>1){throw Y.createMultipleMatchingTokensInCacheError()}return o[0]};ClientCredentialClient.prototype.executeTokenRequest=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:n=this.createTokenRequestBody(t);i=this.createTokenRequestHeaders();o={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};a=_e.nowSeconds();return[4,this.executePostToTokenEndpoint(r.tokenEndpoint,n,i,o)];case 1:s=l.sent();c=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);c.validateTokenResponse(s.body);return[4,c.handleServerTokenResponse(s.body,this.authority,a,t)];case 2:u=l.sent();return[2,u]}}))}))};ClientCredentialClient.prototype.createTokenRequestBody=function(t){var r=new ve;r.addClientId(this.config.authOptions.clientId);r.addScopes(t.scopes,false);r.addGrantType(g.CLIENT_CREDENTIALS_GRANT);r.addLibraryInfo(this.config.libraryInfo);r.addApplicationTelemetry(this.config.telemetry.application);r.addThrottling();if(this.serverTelemetryManager){r.addServerTelemetry(this.serverTelemetryManager)}var n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n);if(this.config.clientCredentials.clientSecret){r.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){var i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(i.assertion);r.addClientAssertionType(i.assertionType)}if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}return r.createQueryString()};return ClientCredentialClient}(me);var qe=function(t){__extends(OnBehalfOfClient,t);function OnBehalfOfClient(r){return t.call(this,r)||this}OnBehalfOfClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:this.scopeSet=new Q(t.scopes||[]);if(!t.skipCache)return[3,2];return[4,this.executeTokenRequest(t,this.authority)];case 1:return[2,n.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:r=n.sent();if(!r)return[3,4];return[2,r];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,n.sent()]}}))}))};OnBehalfOfClient.prototype.getCachedAuthenticationResult=function(t){var r;return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:i=this.readAccessTokenFromCache();if(!i||_e.isTokenExpired(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)){(r=this.serverTelemetryManager)===null||r===void 0?void 0:r.setCacheOutcome(!i?F.CACHED_ACCESS_TOKEN_EXPIRED:F.NO_CACHED_ACCESS_TOKEN);return[2,null]}o=this.readIdTokenFromCache(t);s=null;if(o){a=new te(o.secret,this.config.cryptoInterface);c=a.claims.oid?a.claims.oid:a.claims.sub;u={homeAccountId:o.homeAccountId,environment:o.environment,tenantId:o.realm,username:n.EMPTY_STRING,localAccountId:c||n.EMPTY_STRING};s=this.readAccountFromCache(u)}return[4,Pe.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:i,idToken:o,refreshToken:null,appMetadata:null},true,t,a)];case 1:return[2,l.sent()]}}))}))};OnBehalfOfClient.prototype.readAccessTokenFromCache=function(){var t={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:r.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()};var n=this.cacheManager.getCredentialsFilteredBy(t);var i=Object.keys(n.accessTokens).map((function(t){return n.accessTokens[t]}));var o=i.length;if(o<1){return null}else if(o>1){throw Y.createMultipleMatchingTokensInCacheError()}return i[0]};OnBehalfOfClient.prototype.readIdTokenFromCache=function(t){var n={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:r.CredentialType.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,oboAssertion:t.oboAssertion};var i=this.cacheManager.getCredentialsFilteredBy(n);var o=Object.keys(i.idTokens).map((function(t){return i.idTokens[t]}));if(o.length<1){return null}return o[0]};OnBehalfOfClient.prototype.readAccountFromCache=function(t){return this.cacheManager.readAccountFromCache(t)};OnBehalfOfClient.prototype.executeTokenRequest=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:n=this.createTokenRequestBody(t);i=this.createTokenRequestHeaders();o={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};a=_e.nowSeconds();return[4,this.executePostToTokenEndpoint(r.tokenEndpoint,n,i,o)];case 1:s=l.sent();c=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);c.validateTokenResponse(s.body);return[4,c.handleServerTokenResponse(s.body,this.authority,a,t)];case 2:u=l.sent();return[2,u]}}))}))};OnBehalfOfClient.prototype.createTokenRequestBody=function(t){var r=new ve;r.addClientId(this.config.authOptions.clientId);r.addScopes(t.scopes);r.addGrantType(g.JWT_BEARER);r.addClientInfo();r.addLibraryInfo(this.config.libraryInfo);r.addApplicationTelemetry(this.config.telemetry.application);r.addThrottling();if(this.serverTelemetryManager){r.addServerTelemetry(this.serverTelemetryManager)}var n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n);r.addRequestTokenUse(c.ON_BEHALF_OF);r.addOboAssertion(t.oboAssertion);if(this.config.clientCredentials.clientSecret){r.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){var i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(i.assertion);r.addClientAssertionType(i.assertionType)}return r.createQueryString()};return OnBehalfOfClient}(me);var Be=function(t){__extends(SilentFlowClient,t);function SilentFlowClient(r){return t.call(this,r)||this}SilentFlowClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,this.acquireCachedToken(t)];case 1:return[2,i.sent()];case 2:r=i.sent();if(r instanceof Y&&r.errorCode===V.tokenRefreshRequired.code){n=new Le(this.config);return[2,n.acquireTokenByRefreshToken(t)]}else{throw r}case 3:return[2]}}))}))};SilentFlowClient.prototype.acquireCachedToken=function(t){var r,n,i,o;return __awaiter(this,void 0,void 0,(function(){var a,s;return __generator(this,(function(c){switch(c.label){case 0:if(!t){throw X.createEmptyTokenRequestError()}if(t.forceRefresh){(r=this.serverTelemetryManager)===null||r===void 0?void 0:r.setCacheOutcome(F.FORCE_REFRESH);this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true.");throw Y.createRefreshRequiredError()}if(!t.account){throw Y.createNoAccountInSilentRequestError()}a=t.authority||this.authority.getPreferredCache();s=this.cacheManager.readCacheRecord(t.account,this.config.authOptions.clientId,t,a);if(!s.accessToken){(n=this.serverTelemetryManager)===null||n===void 0?void 0:n.setCacheOutcome(F.NO_CACHED_ACCESS_TOKEN);this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties.");throw Y.createRefreshRequiredError()}else if(_e.wasClockTurnedBack(s.accessToken.cachedAt)||_e.isTokenExpired(s.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)){(i=this.serverTelemetryManager)===null||i===void 0?void 0:i.setCacheOutcome(F.CACHED_ACCESS_TOKEN_EXPIRED);this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds.");throw Y.createRefreshRequiredError()}else if(s.accessToken.refreshOn&&_e.isTokenExpired(s.accessToken.refreshOn,0)){(o=this.serverTelemetryManager)===null||o===void 0?void 0:o.setCacheOutcome(F.REFRESH_CACHED_ACCESS_TOKEN);this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'.");throw Y.createRefreshRequiredError()}if(this.config.serverTelemetryManager){this.config.serverTelemetryManager.incrementCacheHits()}return[4,this.generateResultFromCacheRecord(s,t)];case 1:return[2,c.sent()]}}))}))};SilentFlowClient.prototype.generateResultFromCacheRecord=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:if(t.idToken){n=new te(t.idToken.secret,this.config.cryptoInterface)}return[4,Pe.generateAuthenticationResult(this.cryptoUtils,this.authority,t,true,r,n)];case 1:return[2,i.sent()]}}))}))};return SilentFlowClient}(me);var Fe=function(t){__extends(UsernamePasswordClient,t);function UsernamePasswordClient(r){return t.call(this,r)||this}UsernamePasswordClient.prototype.acquireToken=function(t){return __awaiter(this,void 0,void 0,(function(){var r,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:this.logger.info("in acquireToken call");r=_e.nowSeconds();return[4,this.executeTokenRequest(this.authority,t)];case 1:n=a.sent();i=new Pe(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);i.validateTokenResponse(n.body);o=i.handleServerTokenResponse(n.body,this.authority,r,t);return[2,o]}}))}))};UsernamePasswordClient.prototype.executeTokenRequest=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a;return __generator(this,(function(s){i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};o=this.createTokenRequestBody(n);a=this.createTokenRequestHeaders({credential:n.username,type:r.CcsCredentialType.UPN});return[2,this.executePostToTokenEndpoint(t.tokenEndpoint,o,a,i)]}))}))};UsernamePasswordClient.prototype.createTokenRequestBody=function(t){var r=new ve;r.addClientId(this.config.authOptions.clientId);r.addUsername(t.username);r.addPassword(t.password);r.addScopes(t.scopes);r.addResponseTypeForTokenAndIdToken();r.addGrantType(g.RESOURCE_OWNER_PASSWORD_GRANT);r.addClientInfo();r.addLibraryInfo(this.config.libraryInfo);r.addApplicationTelemetry(this.config.telemetry.application);r.addThrottling();if(this.serverTelemetryManager){r.addServerTelemetry(this.serverTelemetryManager)}var n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n);if(this.config.clientCredentials.clientSecret){r.addClientSecret(this.config.clientCredentials.clientSecret)}if(this.config.clientCredentials.clientAssertion){var i=this.config.clientCredentials.clientAssertion;r.addClientAssertion(i.assertion);r.addClientAssertionType(i.assertionType)}if(!G.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0){r.addClaims(t.claims,this.config.authOptions.clientCapabilities)}if(this.config.systemOptions.preventCorsPreflight&&t.username){r.addCcsUpn(t.username)}return r.createQueryString()};return UsernamePasswordClient}(me);function isOpenIdConfigResponse(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")}r.ProtocolMode=void 0;(function(t){t["AAD"]="AAD";t["OIDC"]="OIDC"})(r.ProtocolMode||(r.ProtocolMode={}));var je=function(){function AuthorityMetadataEntity(){this.expiresAt=_e.nowSeconds()+x.REFRESH_TIME_SECONDS}AuthorityMetadataEntity.prototype.updateCloudDiscoveryMetadata=function(t,r){this.aliases=t.aliases;this.preferred_cache=t.preferred_cache;this.preferred_network=t.preferred_network;this.aliasesFromNetwork=r};AuthorityMetadataEntity.prototype.updateEndpointMetadata=function(t,r){this.authorization_endpoint=t.authorization_endpoint;this.token_endpoint=t.token_endpoint;this.end_session_endpoint=t.end_session_endpoint;this.issuer=t.issuer;this.endpointsFromNetwork=r};AuthorityMetadataEntity.prototype.updateCanonicalAuthority=function(t){this.canonical_authority=t};AuthorityMetadataEntity.prototype.resetExpiresAt=function(){this.expiresAt=_e.nowSeconds()+x.REFRESH_TIME_SECONDS};AuthorityMetadataEntity.prototype.isExpired=function(){return this.expiresAt<=_e.nowSeconds()};AuthorityMetadataEntity.isAuthorityMetadataEntity=function(t,r){if(!r){return false}return t.indexOf(x.CACHE_KEY)===0&&r.hasOwnProperty("aliases")&&r.hasOwnProperty("preferred_cache")&&r.hasOwnProperty("preferred_network")&&r.hasOwnProperty("canonical_authority")&&r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("aliasesFromNetwork")&&r.hasOwnProperty("endpointsFromNetwork")&&r.hasOwnProperty("expiresAt")};return AuthorityMetadataEntity}();function isCloudInstanceDiscoveryResponse(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}var He=function(){function RegionDiscovery(t){this.networkInterface=t}RegionDiscovery.prototype.detectRegion=function(t,r,i){return __awaiter(this,void 0,void 0,(function(){var o,a,s,c,u;return __generator(this,(function(l){switch(l.label){case 0:o=t;if(!!o)return[3,8];a=RegionDiscovery.IMDS_OPTIONS;if(i){a.proxyUrl=i}l.label=1;case 1:l.trys.push([1,6,,7]);return[4,this.getRegionFromIMDS(n.IMDS_VERSION,a)];case 2:s=l.sent();if(s.status===U.httpSuccess){o=s.body;r.region_source=q.IMDS}if(!(s.status===U.httpBadRequest))return[3,5];return[4,this.getCurrentVersion(a)];case 3:c=l.sent();if(!c){r.region_source=q.FAILED_AUTO_DETECTION;return[2,null]}return[4,this.getRegionFromIMDS(c,a)];case 4:u=l.sent();if(u.status===U.httpSuccess){o=u.body;r.region_source=q.IMDS}l.label=5;case 5:return[3,7];case 6:l.sent();r.region_source=q.FAILED_AUTO_DETECTION;return[2,null];case 7:return[3,9];case 8:r.region_source=q.ENVIRONMENT_VARIABLE;l.label=9;case 9:if(!o){r.region_source=q.FAILED_AUTO_DETECTION}return[2,o||null]}}))}))};RegionDiscovery.prototype.getRegionFromIMDS=function(t,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return[2,this.networkInterface.sendGetRequestAsync(n.IMDS_ENDPOINT+"?api-version="+t+"&format=text",r,n.IMDS_TIMEOUT)]}))}))};RegionDiscovery.prototype.getCurrentVersion=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,this.networkInterface.sendGetRequestAsync(n.IMDS_ENDPOINT+"?format=json",t)];case 1:r=i.sent();if(r.status===U.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0){return[2,r.body["newest-versions"][0]]}return[2,null];case 2:i.sent();return[2,null];case 3:return[2]}}))}))};RegionDiscovery.IMDS_OPTIONS={headers:{Metadata:"true"}};return RegionDiscovery}();var ze=function(){function Authority(t,r,i,o,a){this.canonicalAuthority=t;this._canonicalAuthority.validateAsUri();this.networkInterface=r;this.cacheManager=i;this.authorityOptions=o;this.regionDiscovery=new He(r);this.regionDiscoveryMetadata={region_used:undefined,region_source:undefined,region_outcome:undefined};this.proxyUrl=a||n.EMPTY_STRING}Object.defineProperty(Authority.prototype,"authorityType",{get:function(){var t=this.canonicalAuthorityUrlComponents.PathSegments;if(t.length&&t[0].toLowerCase()===n.ADFS){return r.AuthorityType.Adfs}return r.AuthorityType.Default},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"options",{get:function(){return this.authorityOptions},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(t){this._canonicalAuthority=new Oe(t);this._canonicalAuthority.validateAsUri();this._canonicalAuthorityUrlComponents=null},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"canonicalAuthorityUrlComponents",{get:function(){if(!this._canonicalAuthorityUrlComponents){this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()}return this._canonicalAuthorityUrlComponents},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.authorization_endpoint);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.token_endpoint);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint){throw Y.createLogoutNotSupportedError()}var t=this.replacePath(this.metadata.end_session_endpoint);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Object.defineProperty(Authority.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete()){var t=this.replacePath(this.metadata.issuer);return this.replaceTenant(t)}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}},enumerable:false,configurable:true});Authority.prototype.replaceTenant=function(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)};Authority.prototype.replacePath=function(t){var r=t;var n=new Oe(this.metadata.canonical_authority);var i=n.getUrlComponents().PathSegments;var o=this.canonicalAuthorityUrlComponents.PathSegments;o.forEach((function(t,n){var o=i[n];if(t!==o){r=r.replace("/"+o+"/","/"+t+"/")}}));return r};Object.defineProperty(Authority.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){if(this.authorityType===r.AuthorityType.Adfs||this.protocolMode===r.ProtocolMode.OIDC){return this.canonicalAuthority+".well-known/openid-configuration"}return this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:false,configurable:true});Authority.prototype.discoveryComplete=function(){return!!this.metadata};Authority.prototype.resolveEndpointsAsync=function(){return __awaiter(this,void 0,void 0,(function(){var t,r,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);if(!t){t=new je;t.updateCanonicalAuthority(this.canonicalAuthority)}return[4,this.updateCloudDiscoveryMetadata(t)];case 1:r=o.sent();this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,t.preferred_network);return[4,this.updateEndpointMetadata(t)];case 2:n=o.sent();if(r!==N.CACHE&&n!==N.CACHE){t.resetExpiresAt();t.updateCanonicalAuthority(this.canonicalAuthority)}i=this.cacheManager.generateAuthorityMetadataCacheKey(t.preferred_cache);this.cacheManager.setAuthorityMetadata(i,t);this.metadata=t;return[2]}}))}))};Authority.prototype.updateEndpointMetadata=function(t){var r;return __awaiter(this,void 0,void 0,(function(){var i,o,a;return __generator(this,(function(s){switch(s.label){case 0:i=this.getEndpointMetadataFromConfig();if(i){t.updateEndpointMetadata(i,false);return[2,N.CONFIG]}if(this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!t.isExpired()){return[2,N.CACHE]}return[4,this.getEndpointMetadataFromNetwork()];case 1:i=s.sent();if(!i)return[3,4];if(!((r=this.authorityOptions.azureRegionConfiguration)===null||r===void 0?void 0:r.azureRegion))return[3,3];return[4,this.regionDiscovery.detectRegion(this.authorityOptions.azureRegionConfiguration.environmentRegion,this.regionDiscoveryMetadata,this.proxyUrl)];case 2:o=s.sent();a=this.authorityOptions.azureRegionConfiguration.azureRegion===n.AZURE_REGION_AUTO_DISCOVER_FLAG?o:this.authorityOptions.azureRegionConfiguration.azureRegion;if(this.authorityOptions.azureRegionConfiguration.azureRegion===n.AZURE_REGION_AUTO_DISCOVER_FLAG){this.regionDiscoveryMetadata.region_outcome=o?B.AUTO_DETECTION_REQUESTED_SUCCESSFUL:B.AUTO_DETECTION_REQUESTED_FAILED}else{if(o){this.regionDiscoveryMetadata.region_outcome=this.authorityOptions.azureRegionConfiguration.azureRegion===o?B.CONFIGURED_MATCHES_DETECTED:B.CONFIGURED_NOT_DETECTED}else{this.regionDiscoveryMetadata.region_outcome=B.CONFIGURED_NO_AUTO_DETECTION}}if(a){this.regionDiscoveryMetadata.region_used=a;i=Authority.replaceWithRegionalInformation(i,a)}s.label=3;case 3:t.updateEndpointMetadata(i,true);return[2,N.NETWORK];case 4:throw Y.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}}))}))};Authority.prototype.isAuthoritySameType=function(t){var r=new Oe(t.canonical_authority);var n=r.getUrlComponents().PathSegments;return n.length===this.canonicalAuthorityUrlComponents.PathSegments.length};Authority.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata){try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(t){throw X.createInvalidAuthorityMetadataError()}}return null};Authority.prototype.getEndpointMetadataFromNetwork=function(){return __awaiter(this,void 0,void 0,(function(){var t,r;return __generator(this,(function(n){switch(n.label){case 0:t={};if(this.proxyUrl){t.proxyUrl=this.proxyUrl}n.label=1;case 1:n.trys.push([1,3,,4]);return[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,t)];case 2:r=n.sent();return[2,isOpenIdConfigResponse(r.body)?r.body:null];case 3:n.sent();return[2,null];case 4:return[2]}}))}))};Authority.prototype.updateCloudDiscoveryMetadata=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:r=this.getCloudDiscoveryMetadataFromConfig();if(r){t.updateCloudDiscoveryMetadata(r,false);return[2,N.CONFIG]}if(this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!t.isExpired()){return[2,N.CACHE]}return[4,this.getCloudDiscoveryMetadataFromNetwork()];case 1:r=n.sent();if(r){t.updateCloudDiscoveryMetadata(r,true);return[2,N.NETWORK]}else{throw X.createUntrustedAuthorityError()}}}))}))};Authority.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityOptions.cloudDiscoveryMetadata){try{var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata);var r=Authority.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(r){return r}}catch(t){throw X.createInvalidCloudDiscoveryMetadataError()}}if(this.isInKnownAuthorities()){return Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)}return null};Authority.prototype.getCloudDiscoveryMetadataFromNetwork=function(){return __awaiter(this,void 0,void 0,(function(){var t,r,i,o,a;return __generator(this,(function(s){switch(s.label){case 0:t=""+n.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize";r={};if(this.proxyUrl){r.proxyUrl=this.proxyUrl}i=null;s.label=1;case 1:s.trys.push([1,3,,4]);return[4,this.networkInterface.sendGetRequestAsync(t,r)];case 2:o=s.sent();a=isCloudInstanceDiscoveryResponse(o.body)?o.body.metadata:[];if(a.length===0){return[2,null]}i=Authority.getCloudDiscoveryMetadataFromNetworkResponse(a,this.hostnameAndPort);return[3,4];case 3:s.sent();return[2,null];case 4:if(!i){i=Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)}return[2,i]}}))}))};Authority.prototype.isInKnownAuthorities=function(){var t=this;var r=this.authorityOptions.knownAuthorities.filter((function(r){return Oe.getDomainFromUrl(r).toLowerCase()===t.hostnameAndPort}));return r.length>0};Authority.generateAuthority=function(t,i){var o;if(i&&i.azureCloudInstance!==r.AzureCloudInstance.None){var a=i.tenant?i.tenant:n.DEFAULT_COMMON_TENANT;o=i.azureCloudInstance+"/"+a+"/"}return o?o:t};Authority.createCloudDiscoveryMetadataFromHost=function(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}};Authority.getCloudDiscoveryMetadataFromNetworkResponse=function(t,r){for(var n=0;n<t.length;n++){var i=t[n];if(i.aliases.indexOf(r)>-1){return i}}return null};Authority.prototype.getPreferredCache=function(){if(this.discoveryComplete()){return this.metadata.preferred_cache}else{throw Y.createEndpointDiscoveryIncompleteError("Discovery incomplete.")}};Authority.prototype.isAlias=function(t){return this.metadata.aliases.indexOf(t)>-1};Authority.isPublicCloudAuthority=function(t){return n.KNOWN_PUBLIC_CLOUDS.indexOf(t)>=0};Authority.buildRegionalAuthorityString=function(t,r,i){var o=new Oe(t);o.validateAsUri();var a=o.getUrlComponents();var s=r+"."+a.HostNameAndPort;if(this.isPublicCloudAuthority(a.HostNameAndPort)){s=r+"."+n.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}var c=Oe.constructAuthorityUriFromObject(__assign(__assign({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;if(i)return c+"?"+i;return c};Authority.replaceWithRegionalInformation=function(t,r){t.authorization_endpoint=Authority.buildRegionalAuthorityString(t.authorization_endpoint,r);t.token_endpoint=Authority.buildRegionalAuthorityString(t.token_endpoint,r,"allowestsrnonmsi=true");if(t.end_session_endpoint){t.end_session_endpoint=Authority.buildRegionalAuthorityString(t.end_session_endpoint,r)}return t};return Authority}();var Ve=function(){function AuthorityFactory(){}AuthorityFactory.createDiscoveredInstance=function(t,r,n,i,o){return __awaiter(this,void 0,void 0,(function(){var a,s;return __generator(this,(function(c){switch(c.label){case 0:a=AuthorityFactory.createInstance(t,r,n,i,o);c.label=1;case 1:c.trys.push([1,3,,4]);return[4,a.resolveEndpointsAsync()];case 2:c.sent();return[2,a];case 3:s=c.sent();throw Y.createEndpointDiscoveryIncompleteError(s);case 4:return[2]}}))}))};AuthorityFactory.createInstance=function(t,r,n,i,o){if(G.isEmpty(t)){throw X.createUrlEmptyError()}return new ze(t,r,n,i,o)};return AuthorityFactory}();var Ye=function(){function ServerTelemetryEntity(){this.failedRequests=[];this.errors=[];this.cacheHits=0}ServerTelemetryEntity.isServerTelemetryEntity=function(t,r){var n=t.indexOf(P.CACHE_KEY)===0;var i=true;if(r){i=r.hasOwnProperty("failedRequests")&&r.hasOwnProperty("errors")&&r.hasOwnProperty("cacheHits")}return n&&i};return ServerTelemetryEntity}();var Ge=function(){function ThrottlingEntity(){}ThrottlingEntity.isThrottlingEntity=function(t,r){var n=false;if(t){n=t.indexOf(D.THROTTLING_PREFIX)===0}var i=true;if(r){i=r.hasOwnProperty("throttleTime")}return n&&i};return ThrottlingEntity}();var We={sendGetRequestAsync:function(){var t="Network interface - sendGetRequestAsync() has not been implemented for the Network interface.";return Promise.reject(H.createUnexpectedError(t))},sendPostRequestAsync:function(){var t="Network interface - sendPostRequestAsync() has not been implemented for the Network interface.";return Promise.reject(H.createUnexpectedError(t))}};var $e=function(){function AuthenticationHeaderParser(t){this.headers=t}AuthenticationHeaderParser.prototype.getShrNonce=function(){var t=this.headers[a.AuthenticationInfo];if(t){var r=this.parseChallenges(t);if(r.nextnonce){return r.nextnonce}throw X.createInvalidAuthenticationHeaderError(a.AuthenticationInfo,"nextnonce challenge is missing.")}var n=this.headers[a.WWWAuthenticate];if(n){var i=this.parseChallenges(n);if(i.nonce){return i.nonce}throw X.createInvalidAuthenticationHeaderError(a.WWWAuthenticate,"nonce challenge is missing.")}throw X.createMissingNonceAuthenticationHeadersError()};AuthenticationHeaderParser.prototype.parseChallenges=function(t){var r=t.indexOf(" ");var i=t.substr(r+1).split(",");var o={};i.forEach((function(t){var r=t.split("="),i=r[0],a=r[1];o[i]=unescape(a.replace(/['"]+/g,n.EMPTY_STRING))}));return o};return AuthenticationHeaderParser}();var Ke=function(){function ServerTelemetryManager(t,r){this.cacheOutcome=F.NO_CACHE_HIT;this.cacheManager=r;this.apiId=t.apiId;this.correlationId=t.correlationId;this.wrapperSKU=t.wrapperSKU||n.EMPTY_STRING;this.wrapperVer=t.wrapperVer||n.EMPTY_STRING;this.telemetryCacheKey=P.CACHE_KEY+v.CACHE_KEY_SEPARATOR+t.clientId}ServerTelemetryManager.prototype.generateCurrentRequestHeaderValue=function(){var t=""+this.apiId+P.VALUE_SEPARATOR+this.cacheOutcome;var r=[this.wrapperSKU,this.wrapperVer].join(P.VALUE_SEPARATOR);var n=this.getRegionDiscoveryFields();var i=[t,n].join(P.VALUE_SEPARATOR);return[P.SCHEMA_VERSION,i,r].join(P.CATEGORY_SEPARATOR)};ServerTelemetryManager.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests();var r=ServerTelemetryManager.maxErrorsToSend(t);var n=t.failedRequests.slice(0,2*r).join(P.VALUE_SEPARATOR);var i=t.errors.slice(0,r).join(P.VALUE_SEPARATOR);var o=t.errors.length;var a=r<o?P.OVERFLOW_TRUE:P.OVERFLOW_FALSE;var s=[o,a].join(P.VALUE_SEPARATOR);return[P.SCHEMA_VERSION,t.cacheHits,n,i,s].join(P.CATEGORY_SEPARATOR)};ServerTelemetryManager.prototype.cacheFailedRequest=function(t){var r=this.getLastRequests();if(r.errors.length>=P.MAX_CACHED_ERRORS){r.failedRequests.shift();r.failedRequests.shift();r.errors.shift()}r.failedRequests.push(this.apiId,this.correlationId);if(!G.isEmpty(t.subError)){r.errors.push(t.subError)}else if(!G.isEmpty(t.errorCode)){r.errors.push(t.errorCode)}else if(!!t&&t.toString()){r.errors.push(t.toString())}else{r.errors.push(P.UNKNOWN_ERROR)}this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r);return};ServerTelemetryManager.prototype.incrementCacheHits=function(){var t=this.getLastRequests();t.cacheHits+=1;this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t);return t.cacheHits};ServerTelemetryManager.prototype.getLastRequests=function(){var t=new Ye;var r=this.cacheManager.getServerTelemetry(this.telemetryCacheKey);return r||t};ServerTelemetryManager.prototype.clearTelemetryCache=function(){var t=this.getLastRequests();var r=ServerTelemetryManager.maxErrorsToSend(t);var n=t.errors.length;if(r===n){this.cacheManager.removeItem(this.telemetryCacheKey)}else{var i=new Ye;i.failedRequests=t.failedRequests.slice(r*2);i.errors=t.errors.slice(r);this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i)}};ServerTelemetryManager.maxErrorsToSend=function(t){var r;var i=0;var o=0;var a=t.errors.length;for(r=0;r<a;r++){var s=t.failedRequests[2*r]||n.EMPTY_STRING;var c=t.failedRequests[2*r+1]||n.EMPTY_STRING;var u=t.errors[r]||n.EMPTY_STRING;o+=s.toString().length+c.toString().length+u.length+3;if(o<P.MAX_LAST_HEADER_BYTES){i+=1}else{break}}return i};ServerTelemetryManager.prototype.getRegionDiscoveryFields=function(){var t=[];t.push(this.regionUsed||n.EMPTY_STRING);t.push(this.regionSource||n.EMPTY_STRING);t.push(this.regionOutcome||n.EMPTY_STRING);return t.join(",")};ServerTelemetryManager.prototype.updateRegionDiscoveryMetadata=function(t){this.regionUsed=t.region_used;this.regionSource=t.region_source;this.regionOutcome=t.region_outcome};ServerTelemetryManager.prototype.setCacheOutcome=function(t){this.cacheOutcome=t};return ServerTelemetryManager}();r.PerformanceEvents=void 0;(function(t){t["AcquireTokenByCode"]="acquireTokenByCode";t["AcquireTokenByRefreshToken"]="acquireTokenByRefreshToken";t["AcquireTokenSilent"]="acquireTokenSilent";t["AcquireTokenSilentAsync"]="acquireTokenSilentAsync";t["AcquireTokenPopup"]="acquireTokenPopup";t["CryptoOptsGetPublicKeyThumbprint"]="cryptoOptsGetPublicKeyThumbprint";t["CryptoOptsSignJwt"]="cryptoOptsSignJwt";t["SilentCacheClientAcquireToken"]="silentCacheClientAcquireToken";t["SilentIframeClientAcquireToken"]="silentIframeClientAcquireToken";t["SilentRefreshClientAcquireToken"]="silentRefreshClientAcquireToken";t["SsoSilent"]="ssoSilent";t["StandardInteractionClientGetDiscoveredAuthority"]="standardInteractionClientGetDiscoveredAuthority";t["FetchAccountIdWithNativeBroker"]="fetchAccountIdWithNativeBroker";t["NativeInteractionClientAcquireToken"]="nativeInteractionClientAcquireToken"})(r.PerformanceEvents||(r.PerformanceEvents={}));r.PerformanceEventStatus=void 0;(function(t){t[t["NotStarted"]=0]="NotStarted";t[t["InProgress"]=1]="InProgress";t[t["Completed"]=2]="Completed"})(r.PerformanceEventStatus||(r.PerformanceEventStatus={}));var Je=function(){function PerformanceClient(t,r,n,i,o,a){this.authority=r;this.libraryName=i;this.libraryVersion=o;this.applicationTelemetry=a;this.clientId=t;this.logger=n;this.callbacks=new Map;this.eventsByCorrelationId=new Map;this.measurementsById=new Map}PerformanceClient.prototype.startMeasurement=function(t,n){var i=this;var o,a;var s=n||this.generateId();if(!n){this.logger.info("PerformanceClient: No correlation id provided for "+t+", generating",s)}this.logger.trace("PerformanceClient: Performance measurement started for "+t,s);var c=this.startPerformanceMeasuremeant(t,s);c.startMeasurement();var u={eventId:this.generateId(),status:r.PerformanceEventStatus.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,appName:(o=this.applicationTelemetry)===null||o===void 0?void 0:o.appName,appVersion:(a=this.applicationTelemetry)===null||a===void 0?void 0:a.appVersion,clientId:this.clientId,name:t,startTimeMs:Date.now(),correlationId:s};this.cacheEventByCorrelationId(u);this.cacheMeasurement(u,c);return{endMeasurement:function(t){var r=i.endMeasurement(__assign(__assign({},u),t));if(r){i.cacheEventByCorrelationId(r)}return r},flushMeasurement:function(){return i.flushMeasurements(u.name,u.correlationId)},discardMeasurement:function(){return i.discardMeasurements(u.correlationId)},measurement:c,event:u}};PerformanceClient.prototype.endMeasurement=function(t){var n=this.measurementsById.get(t.eventId);if(n){this.measurementsById.delete(t.eventId);n.endMeasurement();var i=n.flushMeasurement();if(i!==null){this.logger.trace("PerformanceClient: Performance measurement ended for "+t.name+": "+i+" ms",t.correlationId);var o=__assign(__assign({durationMs:Math.round(i)},t),{status:r.PerformanceEventStatus.Completed});return o}else{this.logger.trace("PerformanceClient: Performance measurement not taken",t.correlationId)}}else{this.logger.trace("PerformanceClient: Measurement not found for "+t.eventId,t.correlationId)}return null};PerformanceClient.prototype.cacheEventByCorrelationId=function(t){var r=this.eventsByCorrelationId.get(t.correlationId);if(r){this.logger.trace("PerformanceClient: Performance measurement for "+t.name+" added/updated",t.correlationId);r.set(t.eventId,t)}else{this.logger.trace("PerformanceClient: Performance measurement for "+t.name+" started",t.correlationId);this.eventsByCorrelationId.set(t.correlationId,(new Map).set(t.eventId,t))}};PerformanceClient.prototype.cacheMeasurement=function(t,r){this.measurementsById.set(t.eventId,r)};PerformanceClient.prototype.flushMeasurements=function(t,n){var i=this;this.logger.trace("PerformanceClient: Performance measurements flushed for "+t,n);var o=this.eventsByCorrelationId.get(n);if(o){this.discardMeasurements(n);var a=[];o.forEach((function(o){if(o.name!==t&&o.status!==r.PerformanceEventStatus.Completed){i.logger.trace("PerformanceClient: Incomplete submeasurement "+o.name+" found for "+t,n);var s=i.endMeasurement(o);if(s){a.push(s)}}a.push(o)}));var s=a.sort((function(t,r){return t.startTimeMs-r.startTimeMs}));var c=s.filter((function(n){return n.name===t&&n.status===r.PerformanceEventStatus.Completed}));if(c.length>0){if(c.length>1){this.logger.verbose("PerformanceClient: Multiple distinct top-level performance events found, using the first",n)}var u=c[0];this.logger.verbose("PerformanceClient: Measurement found for "+t,n);var l=s.reduce((function(r,o){if(o.name!==t){i.logger.trace("PerformanceClient: Complete submeasurement found for "+o.name,n);var a=o.name+"DurationMs";if(!r[a]){r[a]=o.durationMs}else{i.logger.verbose("PerformanceClient: Submeasurement for "+t+" already exists for "+o.name+", ignoring",n)}}return r}),u);this.emitEvents([l],l.correlationId)}else{this.logger.verbose("PerformanceClient: No completed top-level measurements found for "+t,n)}}else{this.logger.verbose("PerformanceClient: No measurements found",n)}};PerformanceClient.prototype.discardMeasurements=function(t){this.logger.trace("PerformanceClient: Performance measurements discarded",t);this.eventsByCorrelationId.delete(t)};PerformanceClient.prototype.addPerformanceCallback=function(t){var r=this.generateId();this.callbacks.set(r,t);this.logger.verbose("PerformanceClient: Performance callback registered with id: "+r);return r};PerformanceClient.prototype.removePerformanceCallback=function(t){var r=this.callbacks.delete(t);if(r){this.logger.verbose("PerformanceClient: Performance callback "+t+" removed.")}else{this.logger.verbose("PerformanceClient: Performance callback "+t+" not removed.")}return r};PerformanceClient.prototype.emitEvents=function(t,r){var n=this;this.logger.verbose("PerformanceClient: Emitting performance events",r);this.callbacks.forEach((function(i,o){n.logger.trace("PerformanceClient: Emitting event to callback "+o,r);i.apply(null,[t])}))};return PerformanceClient}();var Ze=function(){function StubPerformanceMeasurement(){}StubPerformanceMeasurement.prototype.startMeasurement=function(){};StubPerformanceMeasurement.prototype.endMeasurement=function(){};StubPerformanceMeasurement.prototype.flushMeasurement=function(){return null};return StubPerformanceMeasurement}();var Xe=function(t){__extends(StubPerformanceClient,t);function StubPerformanceClient(){return t!==null&&t.apply(this,arguments)||this}StubPerformanceClient.prototype.generateId=function(){return"callback-id"};StubPerformanceClient.prototype.startPerformanceMeasuremeant=function(){return new Ze};return StubPerformanceClient}(Je);r.AccessTokenEntity=Ee;r.AccountEntity=ee;r.AppMetadataEntity=xe;r.AuthError=H;r.AuthErrorMessage=j;r.AuthToken=te;r.AuthenticationHeaderParser=$e;r.Authority=ze;r.AuthorityFactory=Ve;r.AuthorityMetadataEntity=je;r.AuthorizationCodeClient=De;r.CacheManager=re;r.ClientAuthError=Y;r.ClientAuthErrorMessage=V;r.ClientConfigurationError=X;r.ClientConfigurationErrorMessage=Z;r.ClientCredentialClient=Ue;r.Constants=n;r.CredentialEntity=J;r.DEFAULT_CRYPTO_IMPLEMENTATION=z;r.DEFAULT_SYSTEM_OPTIONS=oe;r.DefaultStorageClass=ne;r.DeviceCodeClient=Me;r.IdToken=te;r.IdTokenEntity=ye;r.InteractionRequiredAuthError=we;r.InteractionRequiredAuthErrorMessage=Ce;r.Logger=W;r.NetworkManager=he;r.OIDC_DEFAULT_SCOPES=i;r.OnBehalfOfClient=qe;r.PerformanceClient=Je;r.PopTokenGenerator=ke;r.PromptValue=l;r.ProtocolUtils=Ie;r.RefreshTokenClient=Le;r.RefreshTokenEntity=be;r.ScopeSet=Q;r.ServerError=de;r.ServerTelemetryEntity=Ye;r.ServerTelemetryManager=Ke;r.SilentFlowClient=Be;r.StringUtils=G;r.StubPerformanceClient=Xe;r.StubbedNetworkModule=We;r.ThrottlingEntity=Ge;r.ThrottlingUtils=pe;r.TimeUtils=_e;r.TokenCacheContext=Ne;r.UrlString=Oe;r.UsernamePasswordClient=Fe;r.version=K},8786:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});Object.defineProperty(r,"v1",{enumerable:true,get:function(){return i.default}});Object.defineProperty(r,"v3",{enumerable:true,get:function(){return o.default}});Object.defineProperty(r,"v4",{enumerable:true,get:function(){return a.default}});Object.defineProperty(r,"v5",{enumerable:true,get:function(){return s.default}});Object.defineProperty(r,"NIL",{enumerable:true,get:function(){return c.default}});Object.defineProperty(r,"version",{enumerable:true,get:function(){return u.default}});Object.defineProperty(r,"validate",{enumerable:true,get:function(){return l.default}});Object.defineProperty(r,"stringify",{enumerable:true,get:function(){return d.default}});Object.defineProperty(r,"parse",{enumerable:true,get:function(){return p.default}});var i=_interopRequireDefault(n(12040));var o=_interopRequireDefault(n(86856));var a=_interopRequireDefault(n(3661));var s=_interopRequireDefault(n(45233));var c=_interopRequireDefault(n(56619));var u=_interopRequireDefault(n(84721));var l=_interopRequireDefault(n(8392));var d=_interopRequireDefault(n(82127));var p=_interopRequireDefault(n(20115));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}},99057:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function md5(t){if(Array.isArray(t)){t=Buffer.from(t)}else if(typeof t==="string"){t=Buffer.from(t,"utf8")}return i.default.createHash("md5").update(t).digest()}var o=md5;r["default"]=o},56619:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var n="00000000-0000-0000-0000-000000000000";r["default"]=n},20115:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(8392));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function parse(t){if(!(0,i.default)(t)){throw TypeError("Invalid UUID")}let r;const n=new Uint8Array(16);n[0]=(r=parseInt(t.slice(0,8),16))>>>24;n[1]=r>>>16&255;n[2]=r>>>8&255;n[3]=r&255;n[4]=(r=parseInt(t.slice(9,13),16))>>>8;n[5]=r&255;n[6]=(r=parseInt(t.slice(14,18),16))>>>8;n[7]=r&255;n[8]=(r=parseInt(t.slice(19,23),16))>>>8;n[9]=r&255;n[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255;n[11]=r/4294967296&255;n[12]=r>>>24&255;n[13]=r>>>16&255;n[14]=r>>>8&255;n[15]=r&255;return n}var o=parse;r["default"]=o},61134:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;r["default"]=n},58634:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=rng;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=new Uint8Array(256);let a=o.length;function rng(){if(a>o.length-16){i.default.randomFillSync(o);a=0}return o.slice(a,a+=16)}},4764:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function sha1(t){if(Array.isArray(t)){t=Buffer.from(t)}else if(typeof t==="string"){t=Buffer.from(t,"utf8")}return i.default.createHash("sha1").update(t).digest()}var o=sha1;r["default"]=o},82127:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(8392));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=[];for(let t=0;t<256;++t){o.push((t+256).toString(16).substr(1))}function stringify(t,r=0){const n=(o[t[r+0]]+o[t[r+1]]+o[t[r+2]]+o[t[r+3]]+"-"+o[t[r+4]]+o[t[r+5]]+"-"+o[t[r+6]]+o[t[r+7]]+"-"+o[t[r+8]]+o[t[r+9]]+"-"+o[t[r+10]]+o[t[r+11]]+o[t[r+12]]+o[t[r+13]]+o[t[r+14]]+o[t[r+15]]).toLowerCase();if(!(0,i.default)(n)){throw TypeError("Stringified UUID is invalid")}return n}var a=stringify;r["default"]=a},12040:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(58634));var o=_interopRequireDefault(n(82127));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}let a;let s;let c=0;let u=0;function v1(t,r,n){let l=r&&n||0;const d=r||new Array(16);t=t||{};let p=t.node||a;let g=t.clockseq!==undefined?t.clockseq:s;if(p==null||g==null){const r=t.random||(t.rng||i.default)();if(p==null){p=a=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]}if(g==null){g=s=(r[6]<<8|r[7])&16383}}let v=t.msecs!==undefined?t.msecs:Date.now();let E=t.nsecs!==undefined?t.nsecs:u+1;const S=v-c+(E-u)/1e4;if(S<0&&t.clockseq===undefined){g=g+1&16383}if((S<0||v>c)&&t.nsecs===undefined){E=0}if(E>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}c=v;u=E;s=g;v+=122192928e5;const w=((v&268435455)*1e4+E)%4294967296;d[l++]=w>>>24&255;d[l++]=w>>>16&255;d[l++]=w>>>8&255;d[l++]=w&255;const x=v/4294967296*1e4&268435455;d[l++]=x>>>8&255;d[l++]=x&255;d[l++]=x>>>24&15|16;d[l++]=x>>>16&255;d[l++]=g>>>8|128;d[l++]=g&255;for(let t=0;t<6;++t){d[l+t]=p[t]}return r||(0,o.default)(d)}var l=v1;r["default"]=l},86856:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(40432));var o=_interopRequireDefault(n(99057));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=(0,i.default)("v3",48,o.default);var s=a;r["default"]=s},40432:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=_default;r.URL=r.DNS=void 0;var i=_interopRequireDefault(n(82127));var o=_interopRequireDefault(n(20115));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function stringToBytes(t){t=unescape(encodeURIComponent(t));const r=[];for(let n=0;n<t.length;++n){r.push(t.charCodeAt(n))}return r}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=s;function _default(t,r,n){function generateUUID(t,a,s,c){if(typeof t==="string"){t=stringToBytes(t)}if(typeof a==="string"){a=(0,o.default)(a)}if(a.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let u=new Uint8Array(16+t.length);u.set(a);u.set(t,a.length);u=n(u);u[6]=u[6]&15|r;u[8]=u[8]&63|128;if(s){c=c||0;for(let t=0;t<16;++t){s[c+t]=u[t]}return s}return(0,i.default)(u)}try{generateUUID.name=t}catch(t){}generateUUID.DNS=a;generateUUID.URL=s;return generateUUID}},3661:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(58634));var o=_interopRequireDefault(n(82127));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function v4(t,r,n){t=t||{};const a=t.random||(t.rng||i.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(r){n=n||0;for(let t=0;t<16;++t){r[n+t]=a[t]}return r}return(0,o.default)(a)}var a=v4;r["default"]=a},45233:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(40432));var o=_interopRequireDefault(n(4764));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=(0,i.default)("v5",80,o.default);var s=a;r["default"]=s},8392:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(61134));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function validate(t){return typeof t==="string"&&i.default.test(t)}var o=validate;r["default"]=o},84721:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(8392));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function version(t){if(!(0,i.default)(t)){throw TypeError("Invalid UUID")}return parseInt(t.substr(14,1),16)}var o=version;r["default"]=o},22709:function(t,r){
//! @version @js-joda/core - 4.3.1
//! @copyright (c) 2015-present, Philipp Thrwchter, Pattrick Hper & js-joda contributors
//! @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
//! @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
(function(t,n){true?n(r):0})(this,(function(t){"use strict";
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */function createErrorType(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Error;function JsJodaException(t){if(!Error.captureStackTrace){this.stack=(new Error).stack}else{Error.captureStackTrace(this,this.constructor)}this.message=t;r&&r.apply(this,arguments);this.toString=function(){return"".concat(this.name,": ").concat(this.message)}}JsJodaException.prototype=Object.create(n.prototype);JsJodaException.prototype.name=t;JsJodaException.prototype.constructor=JsJodaException;return JsJodaException}var r=createErrorType("DateTimeException",messageWithCause);var n=createErrorType("DateTimeParseException",messageForDateTimeParseException);var i=createErrorType("UnsupportedTemporalTypeException",null,r);var o=createErrorType("ArithmeticException");var a=createErrorType("IllegalArgumentException");var s=createErrorType("IllegalStateException");var c=createErrorType("NullPointerException");function messageWithCause(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t||this.name;if(r!==null&&r instanceof Error){n+="\n-------\nCaused by: ".concat(r.stack,"\n-------\n")}this.message=n}function messageForDateTimeParseException(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var o=t||this.name;o+=": ".concat(r,", at index: ").concat(n);if(i!==null&&i instanceof Error){o+="\n-------\nCaused by: ".concat(i.stack,"\n-------\n")}this.message=o;this.parsedString=function(){return r};this.errorIndex=function(){return n}}function _typeof(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(t){return typeof t}}else{_typeof=function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function _createClass(t,r,n){if(r)_defineProperties(t.prototype,r);if(n)_defineProperties(t,n);return t}function _inherits(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:true,configurable:true}});if(r)_setPrototypeOf(t,r)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(t){return false}}function _assertThisInitialized(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function _possibleConstructorReturn(t,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(t)}function _createSuper(t){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var n=_getPrototypeOf(t),i;if(r){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(n,arguments,o)}else{i=n.apply(this,arguments)}return _possibleConstructorReturn(this,i)}}function _superPropBase(t,r){while(!Object.prototype.hasOwnProperty.call(t,r)){t=_getPrototypeOf(t);if(t===null)break}return t}function _get(t,r,n){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(t,r,n){var i=_superPropBase(t,r);if(!i)return;var o=Object.getOwnPropertyDescriptor(i,r);if(o.get){return o.get.call(n)}return o.value}}return _get(t,r,n||t)}
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */function assert(t,r,n){if(!t){if(n){throw new n(r)}else{throw new Error(r)}}}function requireNonNull(t,r){if(t==null){throw new c("".concat(r," must not be null"))}return t}function requireInstance(t,r,n){if(!(t instanceof r)){throw new a("".concat(n," must be an instance of ").concat(r.name?r.name:r).concat(t&&t.constructor&&t.constructor.name?", but is ".concat(t.constructor.name):""))}return t}function abstractMethodFail(t){throw new TypeError('abstract method "'.concat(t,'" is not implemented'))}var u=Object.freeze({__proto__:null,assert:assert,requireNonNull:requireNonNull,requireInstance:requireInstance,abstractMethodFail:abstractMethodFail});var l=9007199254740991;var d=-9007199254740991;var p=function(){function MathUtil(){_classCallCheck(this,MathUtil)}_createClass(MathUtil,null,[{key:"intDiv",value:function intDiv(t,r){var n=t/r;n=MathUtil.roundDown(n);return MathUtil.safeZero(n)}},{key:"intMod",value:function intMod(t,r){var n=t-MathUtil.intDiv(t,r)*r;n=MathUtil.roundDown(n);return MathUtil.safeZero(n)}},{key:"roundDown",value:function roundDown(t){if(t<0){return Math.ceil(t)}else{return Math.floor(t)}}},{key:"floorDiv",value:function floorDiv(t,r){var n=Math.floor(t/r);return MathUtil.safeZero(n)}},{key:"floorMod",value:function floorMod(t,r){var n=t-MathUtil.floorDiv(t,r)*r;return MathUtil.safeZero(n)}},{key:"safeAdd",value:function safeAdd(t,r){MathUtil.verifyInt(t);MathUtil.verifyInt(r);if(t===0){return MathUtil.safeZero(r)}if(r===0){return MathUtil.safeZero(t)}var n=MathUtil.safeToInt(t+r);if(n===t||n===r){throw new o("Invalid addition beyond MAX_SAFE_INTEGER!")}return n}},{key:"safeSubtract",value:function safeSubtract(t,r){MathUtil.verifyInt(t);MathUtil.verifyInt(r);if(t===0&&r===0){return 0}else if(t===0){return MathUtil.safeZero(-1*r)}else if(r===0){return MathUtil.safeZero(t)}return MathUtil.safeToInt(t-r)}},{key:"safeMultiply",value:function safeMultiply(t,r){MathUtil.verifyInt(t);MathUtil.verifyInt(r);if(t===1){return MathUtil.safeZero(r)}if(r===1){return MathUtil.safeZero(t)}if(t===0||r===0){return 0}var n=MathUtil.safeToInt(t*r);if(n/r!==t||t===d&&r===-1||r===d&&t===-1){throw new o("Multiplication overflows: ".concat(t," * ").concat(r))}return n}},{key:"parseInt",value:function(t){function parseInt(r){return t.apply(this,arguments)}parseInt.toString=function(){return t.toString()};return parseInt}((function(t){var r=parseInt(t);return MathUtil.safeToInt(r)}))},{key:"safeToInt",value:function safeToInt(t){MathUtil.verifyInt(t);return MathUtil.safeZero(t)}},{key:"verifyInt",value:function verifyInt(t){if(t==null){throw new o("Invalid value: '".concat(t,"', using null or undefined as argument"))}if(isNaN(t)){throw new o("Invalid int value, using NaN as argument")}if(t%1!==0){throw new o("Invalid value: '".concat(t,"' is a float"))}if(t>l||t<d){throw new o("Calculation overflows an int: ".concat(t))}}},{key:"safeZero",value:function safeZero(t){return t===0?0:+t}},{key:"compareNumbers",value:function compareNumbers(t,r){if(t<r){return-1}if(t>r){return 1}return 0}},{key:"smi",value:function smi(t){return t>>>1&1073741824|t&3221225471}},{key:"hash",value:function hash(t){if(t!==t||t===Infinity){return 0}var r=t;while(t>4294967295){t/=4294967295;r^=t}return MathUtil.smi(r)}},{key:"hashCode",value:function hashCode(){var t=17;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}for(var o=0,a=n;o<a.length;o++){var s=a[o];t=(t<<5)-t+MathUtil.hash(s)}return MathUtil.hash(t)}}]);return MathUtil}();p.MAX_SAFE_INTEGER=l;p.MIN_SAFE_INTEGER=d;
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var g=function(){function Enum(t){_classCallCheck(this,Enum);this._name=t}_createClass(Enum,[{key:"equals",value:function equals(t){return this===t}},{key:"toString",value:function toString(){return this._name}},{key:"toJSON",value:function toJSON(){return this.toString()}}]);return Enum}();var v=function(){function TemporalAmount(){_classCallCheck(this,TemporalAmount)}_createClass(TemporalAmount,[{key:"get",value:function get(t){abstractMethodFail("get")}},{key:"units",value:function units(){abstractMethodFail("units")}},{key:"addTo",value:function addTo(t){abstractMethodFail("addTo")}},{key:"subtractFrom",value:function subtractFrom(t){abstractMethodFail("subtractFrom")}}]);return TemporalAmount}();var E=function(){function TemporalUnit(){_classCallCheck(this,TemporalUnit)}_createClass(TemporalUnit,[{key:"duration",value:function duration(){abstractMethodFail("duration")}},{key:"isDurationEstimated",value:function isDurationEstimated(){abstractMethodFail("isDurationEstimated")}},{key:"isDateBased",value:function isDateBased(){abstractMethodFail("isDateBased")}},{key:"isTimeBased",value:function isTimeBased(){abstractMethodFail("isTimeBased")}},{key:"isSupportedBy",value:function isSupportedBy(t){abstractMethodFail("isSupportedBy")}},{key:"addTo",value:function addTo(t,r){abstractMethodFail("addTo")}},{key:"between",value:function between(t,r){abstractMethodFail("between")}}]);return TemporalUnit}();var S=function(t){_inherits(Duration,t);var r=_createSuper(Duration);function Duration(t,n){var i;_classCallCheck(this,Duration);i=r.call(this);i._seconds=p.safeToInt(t);i._nanos=p.safeToInt(n);return i}_createClass(Duration,[{key:"get",value:function get(t){if(t===x.SECONDS){return this._seconds}else if(t===x.NANOS){return this._nanos}else{throw new i("Unsupported unit: ".concat(t))}}},{key:"units",value:function units(){return[x.SECONDS,x.NANOS]}},{key:"isZero",value:function isZero(){return this._seconds===0&&this._nanos===0}},{key:"isNegative",value:function isNegative(){return this._seconds<0}},{key:"seconds",value:function seconds(){return this._seconds}},{key:"nano",value:function nano(){return this._nanos}},{key:"withSeconds",value:function withSeconds(t){return Duration._create(t,this._nanos)}},{key:"withNanos",value:function withNanos(t){D.NANO_OF_SECOND.checkValidIntValue(t);return Duration._create(this._seconds,t)}},{key:"plusDuration",value:function plusDuration(t){requireNonNull(t,"duration");return this.plus(t.seconds(),t.nano())}},{key:"plus",value:function plus(t,r){if(arguments.length===1){return this.plusDuration(t)}else if(arguments.length===2&&r instanceof E){return this.plusAmountUnit(t,r)}else{return this.plusSecondsNanos(t,r)}}},{key:"plusAmountUnit",value:function plusAmountUnit(t,r){requireNonNull(t,"amountToAdd");requireNonNull(r,"unit");if(r===x.DAYS){return this.plusSecondsNanos(p.safeMultiply(t,vt.SECONDS_PER_DAY),0)}if(r.isDurationEstimated()){throw new i("Unit must not have an estimated duration")}if(t===0){return this}if(r instanceof x){switch(r){case x.NANOS:return this.plusNanos(t);case x.MICROS:return this.plusSecondsNanos(p.intDiv(t,1e6*1e3)*1e3,p.intMod(t,1e6*1e3)*1e3);case x.MILLIS:return this.plusMillis(t);case x.SECONDS:return this.plusSeconds(t)}return this.plusSecondsNanos(p.safeMultiply(r.duration().seconds(),t),0)}var n=r.duration().multipliedBy(t);return this.plusSecondsNanos(n.seconds(),n.nano())}},{key:"plusDays",value:function plusDays(t){return this.plusSecondsNanos(p.safeMultiply(t,vt.SECONDS_PER_DAY),0)}},{key:"plusHours",value:function plusHours(t){return this.plusSecondsNanos(p.safeMultiply(t,vt.SECONDS_PER_HOUR),0)}},{key:"plusMinutes",value:function plusMinutes(t){return this.plusSecondsNanos(p.safeMultiply(t,vt.SECONDS_PER_MINUTE),0)}},{key:"plusSeconds",value:function plusSeconds(t){return this.plusSecondsNanos(t,0)}},{key:"plusMillis",value:function plusMillis(t){return this.plusSecondsNanos(p.intDiv(t,1e3),p.intMod(t,1e3)*1e6)}},{key:"plusNanos",value:function plusNanos(t){return this.plusSecondsNanos(0,t)}},{key:"plusSecondsNanos",value:function plusSecondsNanos(t,r){requireNonNull(t,"secondsToAdd");requireNonNull(r,"nanosToAdd");if(t===0&&r===0){return this}var n=p.safeAdd(this._seconds,t);n=p.safeAdd(n,p.intDiv(r,vt.NANOS_PER_SECOND));r=p.intMod(r,vt.NANOS_PER_SECOND);var i=p.safeAdd(this._nanos,r);return Duration.ofSeconds(n,i)}},{key:"minus",value:function minus(t,r){if(arguments.length===1){return this.minusDuration(t)}else{return this.minusAmountUnit(t,r)}}},{key:"minusDuration",value:function minusDuration(t){requireNonNull(t,"duration");var r=t.seconds();var n=t.nano();if(r===d){return this.plus(l,-n)}return this.plus(-r,-n)}},{key:"minusAmountUnit",value:function minusAmountUnit(t,r){requireNonNull(t,"amountToSubtract");requireNonNull(r,"unit");return t===d?this.plusAmountUnit(l,r):this.plusAmountUnit(-t,r)}},{key:"minusDays",value:function minusDays(t){return t===d?this.plusDays(l):this.plusDays(-t)}},{key:"minusHours",value:function minusHours(t){return t===d?this.plusHours(l):this.plusHours(-t)}},{key:"minusMinutes",value:function minusMinutes(t){return t===d?this.plusMinutes(l):this.plusMinutes(-t)}},{key:"minusSeconds",value:function minusSeconds(t){return t===d?this.plusSeconds(l):this.plusSeconds(-t)}},{key:"minusMillis",value:function minusMillis(t){return t===d?this.plusMillis(l):this.plusMillis(-t)}},{key:"minusNanos",value:function minusNanos(t){return t===d?this.plusNanos(l):this.plusNanos(-t)}},{key:"multipliedBy",value:function multipliedBy(t){if(t===0){return Duration.ZERO}if(t===1){return this}var r=p.safeMultiply(this._seconds,t);var n=p.safeMultiply(this._nanos,t);r=r+p.intDiv(n,vt.NANOS_PER_SECOND);n=p.intMod(n,vt.NANOS_PER_SECOND);return Duration.ofSeconds(r,n)}},{key:"dividedBy",value:function dividedBy(t){if(t===0){throw new o("Cannot divide by zero")}if(t===1){return this}var r=p.intDiv(this._seconds,t);var n=p.roundDown((this._seconds/t-r)*vt.NANOS_PER_SECOND);var i=p.intDiv(this._nanos,t);i=n+i;return Duration.ofSeconds(r,i)}},{key:"negated",value:function negated(){return this.multipliedBy(-1)}},{key:"abs",value:function abs(){return this.isNegative()?this.negated():this}},{key:"addTo",value:function addTo(t){requireNonNull(t,"temporal");if(this._seconds!==0){t=t.plus(this._seconds,x.SECONDS)}if(this._nanos!==0){t=t.plus(this._nanos,x.NANOS)}return t}},{key:"subtractFrom",value:function subtractFrom(t){requireNonNull(t,"temporal");if(this._seconds!==0){t=t.minus(this._seconds,x.SECONDS)}if(this._nanos!==0){t=t.minus(this._nanos,x.NANOS)}return t}},{key:"toDays",value:function toDays(){return p.intDiv(this._seconds,vt.SECONDS_PER_DAY)}},{key:"toHours",value:function toHours(){return p.intDiv(this._seconds,vt.SECONDS_PER_HOUR)}},{key:"toMinutes",value:function toMinutes(){return p.intDiv(this._seconds,vt.SECONDS_PER_MINUTE)}},{key:"toMillis",value:function toMillis(){var t=Math.round(p.safeMultiply(this._seconds,1e3));t=p.safeAdd(t,p.intDiv(this._nanos,1e6));return t}},{key:"toNanos",value:function toNanos(){var t=p.safeMultiply(this._seconds,vt.NANOS_PER_SECOND);t=p.safeAdd(t,this._nanos);return t}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"otherDuration");requireInstance(t,Duration,"otherDuration");var r=p.compareNumbers(this._seconds,t.seconds());if(r!==0){return r}return this._nanos-t.nano()}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof Duration){return this.seconds()===t.seconds()&&this.nano()===t.nano()}return false}},{key:"toString",value:function toString(){if(this===Duration.ZERO){return"PT0S"}var t=p.intDiv(this._seconds,vt.SECONDS_PER_HOUR);var r=p.intDiv(p.intMod(this._seconds,vt.SECONDS_PER_HOUR),vt.SECONDS_PER_MINUTE);var n=p.intMod(this._seconds,vt.SECONDS_PER_MINUTE);var i="PT";if(t!==0){i+="".concat(t,"H")}if(r!==0){i+="".concat(r,"M")}if(n===0&&this._nanos===0&&i.length>2){return i}if(n<0&&this._nanos>0){if(n===-1){i+="-0"}else{i+=n+1}}else{i+=n}if(this._nanos>0){i+=".";var o;if(n<0){o="".concat(2*vt.NANOS_PER_SECOND-this._nanos)}else{o="".concat(vt.NANOS_PER_SECOND+this._nanos)}o=o.slice(1,o.length);i+=o;while(i.charAt(i.length-1)==="0"){i=i.slice(0,i.length-1)}}i+="S";return i}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"ofDays",value:function ofDays(t){return Duration._create(p.safeMultiply(t,vt.SECONDS_PER_DAY),0)}},{key:"ofHours",value:function ofHours(t){return Duration._create(p.safeMultiply(t,vt.SECONDS_PER_HOUR),0)}},{key:"ofMinutes",value:function ofMinutes(t){return Duration._create(p.safeMultiply(t,vt.SECONDS_PER_MINUTE),0)}},{key:"ofSeconds",value:function ofSeconds(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=p.safeAdd(t,p.floorDiv(r,vt.NANOS_PER_SECOND));var i=p.floorMod(r,vt.NANOS_PER_SECOND);return Duration._create(n,i)}},{key:"ofMillis",value:function ofMillis(t){var r=p.intDiv(t,1e3);var n=p.intMod(t,1e3);if(n<0){n+=1e3;r--}return Duration._create(r,n*1e6)}},{key:"ofNanos",value:function ofNanos(t){var r=p.intDiv(t,vt.NANOS_PER_SECOND);var n=p.intMod(t,vt.NANOS_PER_SECOND);if(n<0){n+=vt.NANOS_PER_SECOND;r--}return this._create(r,n)}},{key:"of",value:function of(t,r){return Duration.ZERO.plus(t,r)}},{key:"from",value:function from(t){requireNonNull(t,"amount");requireInstance(t,v);var r=Duration.ZERO;t.units().forEach((function(n){r=r.plus(t.get(n),n)}));return r}},{key:"between",value:function between(t,r){requireNonNull(t,"startInclusive");requireNonNull(r,"endExclusive");var n=t.until(r,x.SECONDS);var i=0;if(t.isSupported(D.NANO_OF_SECOND)&&r.isSupported(D.NANO_OF_SECOND)){try{var o=t.getLong(D.NANO_OF_SECOND);i=r.getLong(D.NANO_OF_SECOND)-o;if(n>0&&i<0){i+=vt.NANOS_PER_SECOND}else if(n<0&&i>0){i-=vt.NANOS_PER_SECOND}else if(n===0&&i!==0){var a=r.with(D.NANO_OF_SECOND,o);n=t.until(a,x.SECONDS)}}catch(t){}}return this.ofSeconds(n,i)}},{key:"parse",value:function parse(t){requireNonNull(t,"text");var r=new RegExp("([-+]?)P(?:([-+]?[0-9]+)D)?(T(?:([-+]?[0-9]+)H)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)(?:[.,]([0-9]{0,9}))?S)?)?","i");var i=r.exec(t);if(i!==null){if("T"===i[3]===false){var o="-"===i[1];var a=i[2];var s=i[4];var c=i[5];var u=i[6];var l=i[7];if(a!=null||s!=null||c!=null||u!=null){var d=Duration._parseNumber(t,a,vt.SECONDS_PER_DAY,"days");var p=Duration._parseNumber(t,s,vt.SECONDS_PER_HOUR,"hours");var g=Duration._parseNumber(t,c,vt.SECONDS_PER_MINUTE,"minutes");var v=Duration._parseNumber(t,u,1,"seconds");var E=u!=null&&u.charAt(0)==="-";var S=Duration._parseFraction(t,l,E?-1:1);try{return Duration._create(o,d,p,g,v,S)}catch(r){throw new n("Text cannot be parsed to a Duration: overflow",t,0,r)}}}}throw new n("Text cannot be parsed to a Duration",t,0)}},{key:"_parseNumber",value:function _parseNumber(t,r,i,o){if(r==null){return 0}try{if(r[0]==="+"){r=r.substring(1)}return p.safeMultiply(parseFloat(r),i)}catch(r){throw new n("Text cannot be parsed to a Duration: ".concat(o),t,0,r)}}},{key:"_parseFraction",value:function _parseFraction(t,r,n){if(r==null||r.length===0){return 0}r="".concat(r,"000000000").substring(0,9);return parseFloat(r)*n}},{key:"_create",value:function _create(){if(arguments.length<=2){return Duration._createSecondsNanos(arguments[0],arguments[1])}else{return Duration._createNegateDaysHoursMinutesSecondsNanos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}}},{key:"_createNegateDaysHoursMinutesSecondsNanos",value:function _createNegateDaysHoursMinutesSecondsNanos(t,r,n,i,o,a){var s=p.safeAdd(r,p.safeAdd(n,p.safeAdd(i,o)));if(t){return Duration.ofSeconds(s,a).negated()}return Duration.ofSeconds(s,a)}},{key:"_createSecondsNanos",value:function _createSecondsNanos(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(t===0&&r===0){return Duration.ZERO}return new Duration(t,r)}}]);return Duration}(v);function _init(){S.ZERO=new S(0,0)}
/*
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE.md in the root directory of this source tree)
     */var w=function YearConstants(){_classCallCheck(this,YearConstants)};function _init$1(){w.MIN_VALUE=-999999;w.MAX_VALUE=999999}var x=function(t){_inherits(ChronoUnit,t);var r=_createSuper(ChronoUnit);function ChronoUnit(t,n){var i;_classCallCheck(this,ChronoUnit);i=r.call(this);i._name=t;i._duration=n;return i}_createClass(ChronoUnit,[{key:"duration",value:function duration(){return this._duration}},{key:"isDurationEstimated",value:function isDurationEstimated(){return this.isDateBased()||this===ChronoUnit.FOREVER}},{key:"isDateBased",value:function isDateBased(){return this.compareTo(ChronoUnit.DAYS)>=0&&this!==ChronoUnit.FOREVER}},{key:"isTimeBased",value:function isTimeBased(){return this.compareTo(ChronoUnit.DAYS)<0}},{key:"isSupportedBy",value:function isSupportedBy(t){if(this===ChronoUnit.FOREVER){return false}try{t.plus(1,this);return true}catch(r){try{t.plus(-1,this);return true}catch(t){return false}}}},{key:"addTo",value:function addTo(t,r){return t.plus(r,this)}},{key:"between",value:function between(t,r){return t.until(r,this)}},{key:"toString",value:function toString(){return this._name}},{key:"compareTo",value:function compareTo(t){return this.duration().compareTo(t.duration())}}]);return ChronoUnit}(E);function _init$2(){x.NANOS=new x("Nanos",S.ofNanos(1));x.MICROS=new x("Micros",S.ofNanos(1e3));x.MILLIS=new x("Millis",S.ofNanos(1e6));x.SECONDS=new x("Seconds",S.ofSeconds(1));x.MINUTES=new x("Minutes",S.ofSeconds(60));x.HOURS=new x("Hours",S.ofSeconds(3600));x.HALF_DAYS=new x("HalfDays",S.ofSeconds(43200));x.DAYS=new x("Days",S.ofSeconds(86400));x.WEEKS=new x("Weeks",S.ofSeconds(7*86400));x.MONTHS=new x("Months",S.ofSeconds(31556952/12));x.YEARS=new x("Years",S.ofSeconds(31556952));x.DECADES=new x("Decades",S.ofSeconds(31556952*10));x.CENTURIES=new x("Centuries",S.ofSeconds(31556952*100));x.MILLENNIA=new x("Millennia",S.ofSeconds(31556952*1e3));x.ERAS=new x("Eras",S.ofSeconds(31556952*(w.MAX_VALUE+1)));x.FOREVER=new x("Forever",S.ofSeconds(p.MAX_SAFE_INTEGER,999999999))}
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var N=function(){function TemporalField(){_classCallCheck(this,TemporalField)}_createClass(TemporalField,[{key:"isDateBased",value:function isDateBased(){abstractMethodFail("isDateBased")}},{key:"isTimeBased",value:function isTimeBased(){abstractMethodFail("isTimeBased")}},{key:"baseUnit",value:function baseUnit(){abstractMethodFail("baseUnit")}},{key:"rangeUnit",value:function rangeUnit(){abstractMethodFail("rangeUnit")}},{key:"range",value:function range(){abstractMethodFail("range")}},{key:"rangeRefinedBy",value:function rangeRefinedBy(t){abstractMethodFail("rangeRefinedBy")}},{key:"getFrom",value:function getFrom(t){abstractMethodFail("getFrom")}},{key:"adjustInto",value:function adjustInto(t,r){abstractMethodFail("adjustInto")}},{key:"isSupportedBy",value:function isSupportedBy(t){abstractMethodFail("isSupportedBy")}},{key:"displayName",value:function displayName(){abstractMethodFail("displayName")}},{key:"equals",value:function equals(t){abstractMethodFail("equals")}},{key:"name",value:function name(){abstractMethodFail("name")}}]);return TemporalField}();var P=function(){function ValueRange(t,r,n,i){_classCallCheck(this,ValueRange);assert(!(t>r),"Smallest minimum value '".concat(t,"' must be less than largest minimum value '").concat(r,"'"),a);assert(!(n>i),"Smallest maximum value '".concat(n,"' must be less than largest maximum value '").concat(i,"'"),a);assert(!(r>i),"Minimum value '".concat(r,"' must be less than maximum value '").concat(i,"'"),a);this._minSmallest=t;this._minLargest=r;this._maxLargest=i;this._maxSmallest=n}_createClass(ValueRange,[{key:"isFixed",value:function isFixed(){return this._minSmallest===this._minLargest&&this._maxSmallest===this._maxLargest}},{key:"minimum",value:function minimum(){return this._minSmallest}},{key:"largestMinimum",value:function largestMinimum(){return this._minLargest}},{key:"maximum",value:function maximum(){return this._maxLargest}},{key:"smallestMaximum",value:function smallestMaximum(){return this._maxSmallest}},{key:"isValidValue",value:function isValidValue(t){return this.minimum()<=t&&t<=this.maximum()}},{key:"checkValidValue",value:function checkValidValue(t,n){var i;if(!this.isValidValue(t)){if(n!=null){i="Invalid value for ".concat(n," (valid values ").concat(this.toString(),"): ").concat(t)}else{i="Invalid value (valid values ".concat(this.toString(),"): ").concat(t)}return assert(false,i,r)}return t}},{key:"checkValidIntValue",value:function checkValidIntValue(t,n){if(this.isValidIntValue(t)===false){throw new r("Invalid int value for ".concat(n,": ").concat(t))}return t}},{key:"isValidIntValue",value:function isValidIntValue(t){return this.isIntValue()&&this.isValidValue(t)}},{key:"isIntValue",value:function isIntValue(){return this.minimum()>=p.MIN_SAFE_INTEGER&&this.maximum()<=p.MAX_SAFE_INTEGER}},{key:"equals",value:function equals(t){if(t===this){return true}if(t instanceof ValueRange){return this._minSmallest===t._minSmallest&&this._minLargest===t._minLargest&&this._maxSmallest===t._maxSmallest&&this._maxLargest===t._maxLargest}return false}},{key:"hashCode",value:function hashCode(){return p.hashCode(this._minSmallest,this._minLargest,this._maxSmallest,this._maxLargest)}},{key:"toString",value:function toString(){var t=this.minimum()+(this.minimum()!==this.largestMinimum()?"/".concat(this.largestMinimum()):"");t+=" - ";t+=this.smallestMaximum()+(this.smallestMaximum()!==this.maximum()?"/".concat(this.maximum()):"");return t}}],[{key:"of",value:function of(){if(arguments.length===2){return new ValueRange(arguments[0],arguments[0],arguments[1],arguments[1])}else if(arguments.length===3){return new ValueRange(arguments[0],arguments[0],arguments[1],arguments[2])}else if(arguments.length===4){return new ValueRange(arguments[0],arguments[1],arguments[2],arguments[3])}else{return assert(false,"Invalid number of arguments ".concat(arguments.length),a)}}}]);return ValueRange}();var D=function(t){_inherits(ChronoField,t);var r=_createSuper(ChronoField);function ChronoField(t,n,i,o){var a;_classCallCheck(this,ChronoField);a=r.call(this);a._name=t;a._baseUnit=n;a._rangeUnit=i;a._range=o;return a}_createClass(ChronoField,[{key:"name",value:function name(){return this._name}},{key:"baseUnit",value:function baseUnit(){return this._baseUnit}},{key:"rangeUnit",value:function rangeUnit(){return this._rangeUnit}},{key:"range",value:function range(){return this._range}},{key:"displayName",value:function displayName(){return this.toString()}},{key:"checkValidValue",value:function checkValidValue(t){return this.range().checkValidValue(t,this)}},{key:"checkValidIntValue",value:function checkValidIntValue(t){return this.range().checkValidIntValue(t,this)}},{key:"isDateBased",value:function isDateBased(){var t=this===ChronoField.DAY_OF_WEEK||this===ChronoField.ALIGNED_DAY_OF_WEEK_IN_MONTH||this===ChronoField.ALIGNED_DAY_OF_WEEK_IN_YEAR||this===ChronoField.DAY_OF_MONTH||this===ChronoField.DAY_OF_YEAR||this===ChronoField.EPOCH_DAY||this===ChronoField.ALIGNED_WEEK_OF_MONTH||this===ChronoField.ALIGNED_WEEK_OF_YEAR||this===ChronoField.MONTH_OF_YEAR||this===ChronoField.YEAR_OF_ERA||this===ChronoField.YEAR||this===ChronoField.ERA;return t}},{key:"isTimeBased",value:function isTimeBased(){var t=this===ChronoField.NANO_OF_SECOND||this===ChronoField.NANO_OF_DAY||this===ChronoField.MICRO_OF_SECOND||this===ChronoField.MICRO_OF_DAY||this===ChronoField.MILLI_OF_SECOND||this===ChronoField.MILLI_OF_DAY||this===ChronoField.SECOND_OF_MINUTE||this===ChronoField.SECOND_OF_DAY||this===ChronoField.MINUTE_OF_HOUR||this===ChronoField.MINUTE_OF_DAY||this===ChronoField.HOUR_OF_AMPM||this===ChronoField.CLOCK_HOUR_OF_AMPM||this===ChronoField.HOUR_OF_DAY||this===ChronoField.CLOCK_HOUR_OF_DAY||this===ChronoField.AMPM_OF_DAY;return t}},{key:"rangeRefinedBy",value:function rangeRefinedBy(t){return t.range(this)}},{key:"getFrom",value:function getFrom(t){return t.getLong(this)}},{key:"toString",value:function toString(){return this.name()}},{key:"equals",value:function equals(t){return this===t}},{key:"adjustInto",value:function adjustInto(t,r){return t.with(this,r)}},{key:"isSupportedBy",value:function isSupportedBy(t){return t.isSupported(this)}}],[{key:"byName",value:function byName(t){for(var r in ChronoField){if(ChronoField[r]){if(ChronoField[r]instanceof ChronoField&&ChronoField[r].name()===t){return ChronoField[r]}}}}}]);return ChronoField}(N);function _init$3(){D.NANO_OF_SECOND=new D("NanoOfSecond",x.NANOS,x.SECONDS,P.of(0,999999999));D.NANO_OF_DAY=new D("NanoOfDay",x.NANOS,x.DAYS,P.of(0,86400*1e9-1));D.MICRO_OF_SECOND=new D("MicroOfSecond",x.MICROS,x.SECONDS,P.of(0,999999));D.MICRO_OF_DAY=new D("MicroOfDay",x.MICROS,x.DAYS,P.of(0,86400*1e6-1));D.MILLI_OF_SECOND=new D("MilliOfSecond",x.MILLIS,x.SECONDS,P.of(0,999));D.MILLI_OF_DAY=new D("MilliOfDay",x.MILLIS,x.DAYS,P.of(0,86400*1e3-1));D.SECOND_OF_MINUTE=new D("SecondOfMinute",x.SECONDS,x.MINUTES,P.of(0,59));D.SECOND_OF_DAY=new D("SecondOfDay",x.SECONDS,x.DAYS,P.of(0,86400-1));D.MINUTE_OF_HOUR=new D("MinuteOfHour",x.MINUTES,x.HOURS,P.of(0,59));D.MINUTE_OF_DAY=new D("MinuteOfDay",x.MINUTES,x.DAYS,P.of(0,24*60-1));D.HOUR_OF_AMPM=new D("HourOfAmPm",x.HOURS,x.HALF_DAYS,P.of(0,11));D.CLOCK_HOUR_OF_AMPM=new D("ClockHourOfAmPm",x.HOURS,x.HALF_DAYS,P.of(1,12));D.HOUR_OF_DAY=new D("HourOfDay",x.HOURS,x.DAYS,P.of(0,23));D.CLOCK_HOUR_OF_DAY=new D("ClockHourOfDay",x.HOURS,x.DAYS,P.of(1,24));D.AMPM_OF_DAY=new D("AmPmOfDay",x.HALF_DAYS,x.DAYS,P.of(0,1));D.DAY_OF_WEEK=new D("DayOfWeek",x.DAYS,x.WEEKS,P.of(1,7));D.ALIGNED_DAY_OF_WEEK_IN_MONTH=new D("AlignedDayOfWeekInMonth",x.DAYS,x.WEEKS,P.of(1,7));D.ALIGNED_DAY_OF_WEEK_IN_YEAR=new D("AlignedDayOfWeekInYear",x.DAYS,x.WEEKS,P.of(1,7));D.DAY_OF_MONTH=new D("DayOfMonth",x.DAYS,x.MONTHS,P.of(1,28,31),"day");D.DAY_OF_YEAR=new D("DayOfYear",x.DAYS,x.YEARS,P.of(1,365,366));D.EPOCH_DAY=new D("EpochDay",x.DAYS,x.FOREVER,P.of(Math.floor(w.MIN_VALUE*365.25),Math.floor(w.MAX_VALUE*365.25)));D.ALIGNED_WEEK_OF_MONTH=new D("AlignedWeekOfMonth",x.WEEKS,x.MONTHS,P.of(1,4,5));D.ALIGNED_WEEK_OF_YEAR=new D("AlignedWeekOfYear",x.WEEKS,x.YEARS,P.of(1,53));D.MONTH_OF_YEAR=new D("MonthOfYear",x.MONTHS,x.YEARS,P.of(1,12),"month");D.PROLEPTIC_MONTH=new D("ProlepticMonth",x.MONTHS,x.FOREVER,P.of(w.MIN_VALUE*12,w.MAX_VALUE*12+11));D.YEAR_OF_ERA=new D("YearOfEra",x.YEARS,x.FOREVER,P.of(1,w.MAX_VALUE,w.MAX_VALUE+1));D.YEAR=new D("Year",x.YEARS,x.FOREVER,P.of(w.MIN_VALUE,w.MAX_VALUE),"year");D.ERA=new D("Era",x.ERAS,x.FOREVER,P.of(0,1));D.INSTANT_SECONDS=new D("InstantSeconds",x.SECONDS,x.FOREVER,P.of(d,l));D.OFFSET_SECONDS=new D("OffsetSeconds",x.SECONDS,x.FOREVER,P.of(-18*3600,18*3600))}
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var M=function(){function TemporalQueries(){_classCallCheck(this,TemporalQueries)}_createClass(TemporalQueries,null,[{key:"zoneId",value:function zoneId(){return TemporalQueries.ZONE_ID}},{key:"chronology",value:function chronology(){return TemporalQueries.CHRONO}},{key:"precision",value:function precision(){return TemporalQueries.PRECISION}},{key:"zone",value:function zone(){return TemporalQueries.ZONE}},{key:"offset",value:function offset(){return TemporalQueries.OFFSET}},{key:"localDate",value:function localDate(){return TemporalQueries.LOCAL_DATE}},{key:"localTime",value:function localTime(){return TemporalQueries.LOCAL_TIME}}]);return TemporalQueries}();var L=function(){function TemporalAccessor(){_classCallCheck(this,TemporalAccessor)}_createClass(TemporalAccessor,[{key:"query",value:function query(t){if(t===M.zoneId()||t===M.chronology()||t===M.precision()){return null}return t.queryFrom(this)}},{key:"get",value:function get(t){return this.range(t).checkValidIntValue(this.getLong(t),t)}},{key:"getLong",value:function getLong(t){abstractMethodFail("getLong")}},{key:"range",value:function range(t){if(t instanceof D){if(this.isSupported(t)){return t.range()}throw new i("Unsupported field: ".concat(t))}return t.rangeRefinedBy(this)}},{key:"isSupported",value:function isSupported(t){abstractMethodFail("isSupported")}}]);return TemporalAccessor}();var U=function(t){_inherits(TemporalQuery,t);var r=_createSuper(TemporalQuery);function TemporalQuery(){_classCallCheck(this,TemporalQuery);return r.apply(this,arguments)}_createClass(TemporalQuery,[{key:"queryFrom",value:function queryFrom(t){abstractMethodFail("queryFrom")}}]);return TemporalQuery}(g);function createTemporalQuery(t,r){var n=function(t){_inherits(ExtendedTemporalQuery,t);var r=_createSuper(ExtendedTemporalQuery);function ExtendedTemporalQuery(){_classCallCheck(this,ExtendedTemporalQuery);return r.apply(this,arguments)}return ExtendedTemporalQuery}(U);n.prototype.queryFrom=r;return new n(t)}var q=function(t){_inherits(DayOfWeek,t);var n=_createSuper(DayOfWeek);function DayOfWeek(t,r){var i;_classCallCheck(this,DayOfWeek);i=n.call(this);i._ordinal=t;i._name=r;return i}_createClass(DayOfWeek,[{key:"ordinal",value:function ordinal(){return this._ordinal}},{key:"name",value:function name(){return this._name}},{key:"value",value:function value(){return this._ordinal+1}},{key:"displayName",value:function displayName(t,r){throw new a("Pattern using (localized) text not implemented yet!")}},{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t===D.DAY_OF_WEEK}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(t===D.DAY_OF_WEEK){return t.range()}else if(t instanceof D){throw new i("Unsupported field: ".concat(t))}return t.rangeRefinedBy(this)}},{key:"get",value:function get(t){if(t===D.DAY_OF_WEEK){return this.value()}return this.range(t).checkValidIntValue(this.getLong(t),t)}},{key:"getLong",value:function getLong(t){if(t===D.DAY_OF_WEEK){return this.value()}else if(t instanceof D){throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"plus",value:function plus(t){var r=p.floorMod(t,7);return B[p.floorMod(this._ordinal+(r+7),7)]}},{key:"minus",value:function minus(t){return this.plus(-1*p.floorMod(t,7))}},{key:"query",value:function query(t){if(t===M.precision()){return x.DAYS}else if(t===M.localDate()||t===M.localTime()||t===M.chronology()||t===M.zone()||t===M.zoneId()||t===M.offset()){return null}assert(t!=null,"query",c);return t.queryFrom(this)}},{key:"adjustInto",value:function adjustInto(t){requireNonNull(t,"temporal");return t.with(D.DAY_OF_WEEK,this.value())}},{key:"equals",value:function equals(t){return this===t}},{key:"toString",value:function toString(){return this._name}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,DayOfWeek,"other");return this._ordinal-t._ordinal}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"values",value:function values(){return B.slice()}},{key:"valueOf",value:function valueOf(t){var r=0;for(r;r<B.length;r++){if(B[r].name()===t){break}}return DayOfWeek.of(r+1)}},{key:"of",value:function of(t){if(t<1||t>7){throw new r("Invalid value for DayOfWeek: ".concat(t))}return B[t-1]}},{key:"from",value:function from(t){assert(t!=null,"temporal",c);if(t instanceof DayOfWeek){return t}try{return DayOfWeek.of(t.get(D.DAY_OF_WEEK))}catch(n){if(n instanceof r){throw new r("Unable to obtain DayOfWeek from TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""),n)}else{throw n}}}}]);return DayOfWeek}(L);var B;function _init$4(){q.MONDAY=new q(0,"MONDAY");q.TUESDAY=new q(1,"TUESDAY");q.WEDNESDAY=new q(2,"WEDNESDAY");q.THURSDAY=new q(3,"THURSDAY");q.FRIDAY=new q(4,"FRIDAY");q.SATURDAY=new q(5,"SATURDAY");q.SUNDAY=new q(6,"SUNDAY");q.FROM=createTemporalQuery("DayOfWeek.FROM",(function(t){return q.from(t)}));B=[q.MONDAY,q.TUESDAY,q.WEDNESDAY,q.THURSDAY,q.FRIDAY,q.SATURDAY,q.SUNDAY]}var F=function(t){_inherits(Month,t);var n=_createSuper(Month);function Month(t,r){var i;_classCallCheck(this,Month);i=n.call(this);i._value=p.safeToInt(t);i._name=r;return i}_createClass(Month,[{key:"value",value:function value(){return this._value}},{key:"ordinal",value:function ordinal(){return this._value-1}},{key:"name",value:function name(){return this._name}},{key:"displayName",value:function displayName(t,r){throw new a("Pattern using (localized) text not implemented yet!")}},{key:"isSupported",value:function isSupported(t){if(null===t){return false}if(t instanceof D){return t===D.MONTH_OF_YEAR}return t!=null&&t.isSupportedBy(this)}},{key:"get",value:function get(t){if(t===D.MONTH_OF_YEAR){return this.value()}return this.range(t).checkValidIntValue(this.getLong(t),t)}},{key:"getLong",value:function getLong(t){if(t===D.MONTH_OF_YEAR){return this.value()}else if(t instanceof D){throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"plus",value:function plus(t){var r=p.intMod(t,12)+12;var n=p.intMod(this.value()+r,12);n=n===0?12:n;return Month.of(n)}},{key:"minus",value:function minus(t){return this.plus(-1*p.intMod(t,12))}},{key:"length",value:function length(t){switch(this){case Month.FEBRUARY:return t?29:28;case Month.APRIL:case Month.JUNE:case Month.SEPTEMBER:case Month.NOVEMBER:return 30;default:return 31}}},{key:"minLength",value:function minLength(){switch(this){case Month.FEBRUARY:return 28;case Month.APRIL:case Month.JUNE:case Month.SEPTEMBER:case Month.NOVEMBER:return 30;default:return 31}}},{key:"maxLength",value:function maxLength(){switch(this){case Month.FEBRUARY:return 29;case Month.APRIL:case Month.JUNE:case Month.SEPTEMBER:case Month.NOVEMBER:return 30;default:return 31}}},{key:"firstDayOfYear",value:function firstDayOfYear(t){var r=t?1:0;switch(this){case Month.JANUARY:return 1;case Month.FEBRUARY:return 32;case Month.MARCH:return 60+r;case Month.APRIL:return 91+r;case Month.MAY:return 121+r;case Month.JUNE:return 152+r;case Month.JULY:return 182+r;case Month.AUGUST:return 213+r;case Month.SEPTEMBER:return 244+r;case Month.OCTOBER:return 274+r;case Month.NOVEMBER:return 305+r;case Month.DECEMBER:default:return 335+r}}},{key:"firstMonthOfQuarter",value:function firstMonthOfQuarter(){switch(this){case Month.JANUARY:case Month.FEBRUARY:case Month.MARCH:return Month.JANUARY;case Month.APRIL:case Month.MAY:case Month.JUNE:return Month.APRIL;case Month.JULY:case Month.AUGUST:case Month.SEPTEMBER:return Month.JULY;case Month.OCTOBER:case Month.NOVEMBER:case Month.DECEMBER:default:return Month.OCTOBER}}},{key:"query",value:function query(t){assert(t!=null,"query() parameter must not be null",r);if(t===M.chronology()){return ot.INSTANCE}else if(t===M.precision()){return x.MONTHS}return _get(_getPrototypeOf(Month.prototype),"query",this).call(this,t)}},{key:"toString",value:function toString(){switch(this){case Month.JANUARY:return"JANUARY";case Month.FEBRUARY:return"FEBRUARY";case Month.MARCH:return"MARCH";case Month.APRIL:return"APRIL";case Month.MAY:return"MAY";case Month.JUNE:return"JUNE";case Month.JULY:return"JULY";case Month.AUGUST:return"AUGUST";case Month.SEPTEMBER:return"SEPTEMBER";case Month.OCTOBER:return"OCTOBER";case Month.NOVEMBER:return"NOVEMBER";case Month.DECEMBER:return"DECEMBER";default:return"unknown Month, value: ".concat(this.value())}}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"adjustInto",value:function adjustInto(t){return t.with(D.MONTH_OF_YEAR,this.value())}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,Month,"other");return this._value-t._value}},{key:"equals",value:function equals(t){return this===t}}],[{key:"valueOf",value:function valueOf(t){var r=0;for(r;r<j.length;r++){if(j[r].name()===t){break}}return Month.of(r+1)}},{key:"values",value:function values(){return j.slice()}},{key:"of",value:function of(t){if(t<1||t>12){assert(false,"Invalid value for MonthOfYear: ".concat(t),r)}return j[t-1]}},{key:"from",value:function from(t){if(t instanceof Month){return t}try{return Month.of(t.get(D.MONTH_OF_YEAR))}catch(n){throw new r("Unable to obtain Month from TemporalAccessor: ".concat(t," of type ").concat(t&&t.constructor!=null?t.constructor.name:""),n)}}}]);return Month}(L);var j;function _init$5(){F.JANUARY=new F(1,"JANUARY");F.FEBRUARY=new F(2,"FEBRUARY");F.MARCH=new F(3,"MARCH");F.APRIL=new F(4,"APRIL");F.MAY=new F(5,"MAY");F.JUNE=new F(6,"JUNE");F.JULY=new F(7,"JULY");F.AUGUST=new F(8,"AUGUST");F.SEPTEMBER=new F(9,"SEPTEMBER");F.OCTOBER=new F(10,"OCTOBER");F.NOVEMBER=new F(11,"NOVEMBER");F.DECEMBER=new F(12,"DECEMBER");j=[F.JANUARY,F.FEBRUARY,F.MARCH,F.APRIL,F.MAY,F.JUNE,F.JULY,F.AUGUST,F.SEPTEMBER,F.OCTOBER,F.NOVEMBER,F.DECEMBER]}var H=/([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?/;var z=function(t){_inherits(Period,t);var a=_createSuper(Period);function Period(t,r,n){var i;_classCallCheck(this,Period);i=a.call(this);var o=p.safeToInt(t);var s=p.safeToInt(r);var c=p.safeToInt(n);if(o===0&&s===0&&c===0){if(!Period.ZERO){i._years=o;i._months=s;i._days=c;Period.ZERO=_assertThisInitialized(i)}return _possibleConstructorReturn(i,Period.ZERO)}i._years=o;i._months=s;i._days=c;return i}_createClass(Period,[{key:"units",value:function units(){return[x.YEARS,x.MONTHS,x.DAYS]}},{key:"chronology",value:function chronology(){return ot.INSTANCE}},{key:"get",value:function get(t){if(t===x.YEARS){return this._years}if(t===x.MONTHS){return this._months}if(t===x.DAYS){return this._days}throw new i("Unsupported unit: ".concat(t))}},{key:"isZero",value:function isZero(){return this===Period.ZERO}},{key:"isNegative",value:function isNegative(){return this._years<0||this._months<0||this._days<0}},{key:"years",value:function years(){return this._years}},{key:"months",value:function months(){return this._months}},{key:"days",value:function days(){return this._days}},{key:"withYears",value:function withYears(t){if(t===this._years){return this}return Period.create(t,this._months,this._days)}},{key:"withMonths",value:function withMonths(t){if(t===this._months){return this}return Period.create(this._years,t,this._days)}},{key:"withDays",value:function withDays(t){if(t===this._days){return this}return Period.create(this._years,this._months,t)}},{key:"plus",value:function plus(t){var r=Period.from(t);return Period.create(p.safeAdd(this._years,r._years),p.safeAdd(this._months,r._months),p.safeAdd(this._days,r._days))}},{key:"plusYears",value:function plusYears(t){if(t===0){return this}return Period.create(p.safeToInt(p.safeAdd(this._years,t)),this._months,this._days)}},{key:"plusMonths",value:function plusMonths(t){if(t===0){return this}return Period.create(this._years,p.safeToInt(p.safeAdd(this._months,t)),this._days)}},{key:"plusDays",value:function plusDays(t){if(t===0){return this}return Period.create(this._years,this._months,p.safeToInt(p.safeAdd(this._days,t)))}},{key:"minus",value:function minus(t){var r=Period.from(t);return Period.create(p.safeSubtract(this._years,r._years),p.safeSubtract(this._months,r._months),p.safeSubtract(this._days,r._days))}},{key:"minusYears",value:function minusYears(t){return this.plusYears(-1*t)}},{key:"minusMonths",value:function minusMonths(t){return this.plusMonths(-1*t)}},{key:"minusDays",value:function minusDays(t){return this.plusDays(-1*t)}},{key:"multipliedBy",value:function multipliedBy(t){if(this===Period.ZERO||t===1){return this}return Period.create(p.safeMultiply(this._years,t),p.safeMultiply(this._months,t),p.safeMultiply(this._days,t))}},{key:"negated",value:function negated(){return this.multipliedBy(-1)}},{key:"normalized",value:function normalized(){var t=this.toTotalMonths();var r=p.intDiv(t,12);var n=p.intMod(t,12);if(r===this._years&&n===this._months){return this}return Period.create(p.safeToInt(r),n,this._days)}},{key:"toTotalMonths",value:function toTotalMonths(){return this._years*12+this._months}},{key:"addTo",value:function addTo(t){requireNonNull(t,"temporal");if(this._years!==0){if(this._months!==0){t=t.plus(this.toTotalMonths(),x.MONTHS)}else{t=t.plus(this._years,x.YEARS)}}else if(this._months!==0){t=t.plus(this._months,x.MONTHS)}if(this._days!==0){t=t.plus(this._days,x.DAYS)}return t}},{key:"subtractFrom",value:function subtractFrom(t){requireNonNull(t,"temporal");if(this._years!==0){if(this._months!==0){t=t.minus(this.toTotalMonths(),x.MONTHS)}else{t=t.minus(this._years,x.YEARS)}}else if(this._months!==0){t=t.minus(this._months,x.MONTHS)}if(this._days!==0){t=t.minus(this._days,x.DAYS)}return t}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof Period){var r=t;return this._years===r._years&&this._months===r._months&&this._days===r._days}return false}},{key:"hashCode",value:function hashCode(){return p.hashCode(this._years,this._months,this._days)}},{key:"toString",value:function toString(){if(this===Period.ZERO){return"P0D"}else{var t="P";if(this._years!==0){t+="".concat(this._years,"Y")}if(this._months!==0){t+="".concat(this._months,"M")}if(this._days!==0){t+="".concat(this._days,"D")}return t}}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"ofYears",value:function ofYears(t){return Period.create(t,0,0)}},{key:"ofMonths",value:function ofMonths(t){return Period.create(0,t,0)}},{key:"ofWeeks",value:function ofWeeks(t){return Period.create(0,0,p.safeMultiply(t,7))}},{key:"ofDays",value:function ofDays(t){return Period.create(0,0,t)}},{key:"of",value:function of(t,r,n){return Period.create(t,r,n)}},{key:"from",value:function from(t){if(t instanceof Period){return t}requireNonNull(t,"amount");var n=0;var i=0;var o=0;var a=t.units();for(var s=0;s<a.length;s++){var c=a[s];var u=t.get(c);if(c===x.YEARS){n=p.safeToInt(u)}else if(c===x.MONTHS){i=p.safeToInt(u)}else if(c===x.DAYS){o=p.safeToInt(u)}else{throw new r("Unit must be Years, Months or Days, but was ".concat(c))}}return Period.create(n,i,o)}},{key:"between",value:function between(t,r){requireNonNull(t,"startDate");requireNonNull(r,"endDate");requireInstance(t,pt,"startDate");requireInstance(r,pt,"endDate");return t.until(r)}},{key:"parse",value:function parse(t){requireNonNull(t,"text");try{return Period._parse(t)}catch(r){if(r instanceof o){throw new n("Text cannot be parsed to a Period",t,0,r)}else{throw r}}}},{key:"_parse",value:function _parse(t){var r=H.exec(t);if(r!=null){var i="-"===r[1]?-1:1;var o=r[2];var a=r[3];var s=r[4];var c=r[5];if(o!=null||a!=null||s!=null||c!=null){var u=Period._parseNumber(t,o,i);var l=Period._parseNumber(t,a,i);var d=Period._parseNumber(t,s,i);var g=Period._parseNumber(t,c,i);g=p.safeAdd(g,p.safeMultiply(d,7));return Period.create(u,l,g)}}throw new n("Text cannot be parsed to a Period",t,0)}},{key:"_parseNumber",value:function _parseNumber(t,r,n){if(r==null){return 0}var i=p.parseInt(r);return p.safeMultiply(i,n)}},{key:"create",value:function create(t,r,n){return new Period(t,r,n)}}]);return Period}(v);function _init$6(){z.ofDays(0)}
/*
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var V=function(){function ParsePosition(t){_classCallCheck(this,ParsePosition);this._index=t;this._errorIndex=-1}_createClass(ParsePosition,[{key:"getIndex",value:function getIndex(){return this._index}},{key:"setIndex",value:function setIndex(t){this._index=t}},{key:"getErrorIndex",value:function getErrorIndex(){return this._errorIndex}},{key:"setErrorIndex",value:function setErrorIndex(t){this._errorIndex=t}}]);return ParsePosition}();
/*
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var Y=function(){function EnumMap(){_classCallCheck(this,EnumMap);this._map={}}_createClass(EnumMap,[{key:"putAll",value:function putAll(t){for(var r in t._map){this._map[r]=t._map[r]}return this}},{key:"containsKey",value:function containsKey(t){return this._map.hasOwnProperty(t.name())&&this.get(t)!==undefined}},{key:"get",value:function get(t){return this._map[t.name()]}},{key:"put",value:function put(t,r){return this.set(t,r)}},{key:"set",value:function set(t,r){this._map[t.name()]=r;return this}},{key:"retainAll",value:function retainAll(t){var r={};for(var n=0;n<t.length;n++){var i=t[n].name();r[i]=this._map[i]}this._map=r;return this}},{key:"remove",value:function remove(t){var r=t.name();var n=this._map[r];this._map[r]=undefined;return n}},{key:"keySet",value:function keySet(){return this._map}},{key:"clear",value:function clear(){this._map={}}}]);return EnumMap}();var G=function(t){_inherits(ResolverStyle,t);var r=_createSuper(ResolverStyle);function ResolverStyle(){_classCallCheck(this,ResolverStyle);return r.apply(this,arguments)}return ResolverStyle}(g);G.STRICT=new G("STRICT");G.SMART=new G("SMART");G.LENIENT=new G("LENIENT");var W=function(t){_inherits(Temporal,t);var r=_createSuper(Temporal);function Temporal(){_classCallCheck(this,Temporal);return r.apply(this,arguments)}_createClass(Temporal,[{key:"isSupported",value:function isSupported(t){abstractMethodFail("isSupported")}},{key:"minus",value:function minus(t,r){if(arguments.length<2){return this._minusAmount(t)}else{return this._minusUnit(t,r)}}},{key:"_minusAmount",value:function _minusAmount(t){requireNonNull(t,"amount");requireInstance(t,v,"amount");return t.subtractFrom(this)}},{key:"_minusUnit",value:function _minusUnit(t,r){requireNonNull(t,"amountToSubtract");requireNonNull(r,"unit");requireInstance(r,E,"unit");return this._plusUnit(-t,r)}},{key:"plus",value:function plus(t,r){if(arguments.length<2){return this._plusAmount(t)}else{return this._plusUnit(t,r)}}},{key:"_plusAmount",value:function _plusAmount(t){requireNonNull(t,"amount");requireInstance(t,v,"amount");return t.addTo(this)}},{key:"_plusUnit",value:function _plusUnit(t,r){abstractMethodFail("_plusUnit")}},{key:"until",value:function until(t,r){abstractMethodFail("until")}},{key:"with",value:function _with(t,r){if(arguments.length<2){return this._withAdjuster(t)}else{return this._withField(t,r)}}},{key:"_withAdjuster",value:function _withAdjuster(t){requireNonNull(t,"adjuster");assert(typeof t.adjustInto==="function","adjuster must be a TemporalAdjuster",a);return t.adjustInto(this)}},{key:"_withField",value:function _withField(t,r){abstractMethodFail("_withField")}}]);return Temporal}(L);var $=function(t){_inherits(ChronoLocalDate,t);var r=_createSuper(ChronoLocalDate);function ChronoLocalDate(){_classCallCheck(this,ChronoLocalDate);return r.apply(this,arguments)}_createClass(ChronoLocalDate,[{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t.isDateBased()}else if(t instanceof x){return t.isDateBased()}return t!=null&&t.isSupportedBy(this)}},{key:"query",value:function query(t){if(t===M.chronology()){return this.chronology()}else if(t===M.precision()){return x.DAYS}else if(t===M.localDate()){return pt.ofEpochDay(this.toEpochDay())}else if(t===M.localTime()||t===M.zone()||t===M.zoneId()||t===M.offset()){return null}return _get(_getPrototypeOf(ChronoLocalDate.prototype),"query",this).call(this,t)}},{key:"adjustInto",value:function adjustInto(t){return t.with(D.EPOCH_DAY,this.toEpochDay())}},{key:"format",value:function format(t){requireNonNull(t,"formatter");requireInstance(t,We,"formatter");return t.format(this)}}]);return ChronoLocalDate}(W);var K=function(){function StringUtil(){_classCallCheck(this,StringUtil)}_createClass(StringUtil,null,[{key:"startsWith",value:function startsWith(t,r){return t.indexOf(r)===0}},{key:"hashCode",value:function hashCode(t){var r=t.length;if(r===0){return 0}var n=0;for(var i=0;i<r;i++){var o=t.charCodeAt(i);n=(n<<5)-n+o;n|=0}return p.smi(n)}}]);return StringUtil}();var J=function(){function ZoneId(){_classCallCheck(this,ZoneId)}_createClass(ZoneId,[{key:"id",value:function id(){abstractMethodFail("ZoneId.id")}},{key:"rules",value:function rules(){abstractMethodFail("ZoneId.rules")}},{key:"normalized",value:function normalized(){var t=this.rules();if(t.isFixedOffset()){return t.offset(_t.EPOCH)}return this}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof ZoneId){return this.id()===t.id()}return false}},{key:"hashCode",value:function hashCode(){return K.hashCode(this.id())}},{key:"toString",value:function toString(){return this.id()}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"systemDefault",value:function systemDefault(){throw new r("not supported operation")}},{key:"getAvailableZoneIds",value:function getAvailableZoneIds(){throw new r("not supported operation")}},{key:"of",value:function of(t){throw new r("not supported operation".concat(t))}},{key:"ofOffset",value:function ofOffset(t,n){throw new r("not supported operation".concat(t).concat(n))}},{key:"from",value:function from(t){throw new r("not supported operation".concat(t))}}]);return ZoneId}();var Z=function(){function ZoneRules(){_classCallCheck(this,ZoneRules)}_createClass(ZoneRules,[{key:"isFixedOffset",value:function isFixedOffset(){abstractMethodFail("ZoneRules.isFixedOffset")}},{key:"offset",value:function offset(t){if(t instanceof _t){return this.offsetOfInstant(t)}else{return this.offsetOfLocalDateTime(t)}}},{key:"offsetOfInstant",value:function offsetOfInstant(t){abstractMethodFail("ZoneRules.offsetInstant")}},{key:"offsetOfEpochMilli",value:function offsetOfEpochMilli(t){abstractMethodFail("ZoneRules.offsetOfEpochMilli")}},{key:"offsetOfLocalDateTime",value:function offsetOfLocalDateTime(t){abstractMethodFail("ZoneRules.offsetLocalDateTime")}},{key:"validOffsets",value:function validOffsets(t){abstractMethodFail("ZoneRules.validOffsets")}},{key:"transition",value:function transition(t){abstractMethodFail("ZoneRules.transition")}},{key:"standardOffset",value:function standardOffset(t){abstractMethodFail("ZoneRules.standardOffset")}},{key:"daylightSavings",value:function daylightSavings(t){abstractMethodFail("ZoneRules.daylightSavings")}},{key:"isDaylightSavings",value:function isDaylightSavings(t){abstractMethodFail("ZoneRules.isDaylightSavings")}},{key:"isValidOffset",value:function isValidOffset(t,r){abstractMethodFail("ZoneRules.isValidOffset")}},{key:"nextTransition",value:function nextTransition(t){abstractMethodFail("ZoneRules.nextTransition")}},{key:"previousTransition",value:function previousTransition(t){abstractMethodFail("ZoneRules.previousTransition")}},{key:"transitions",value:function transitions(){abstractMethodFail("ZoneRules.transitions")}},{key:"transitionRules",value:function transitionRules(){abstractMethodFail("ZoneRules.transitionRules")}},{key:"toString",value:function toString(){abstractMethodFail("ZoneRules.toString")}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"of",value:function of(t){requireNonNull(t,"offset");return new X(t)}}]);return ZoneRules}();var X=function(t){_inherits(Fixed,t);var r=_createSuper(Fixed);function Fixed(t){var n;_classCallCheck(this,Fixed);n=r.call(this);n._offset=t;return n}_createClass(Fixed,[{key:"isFixedOffset",value:function isFixedOffset(){return true}},{key:"offsetOfInstant",value:function offsetOfInstant(){return this._offset}},{key:"offsetOfEpochMilli",value:function offsetOfEpochMilli(){return this._offset}},{key:"offsetOfLocalDateTime",value:function offsetOfLocalDateTime(){return this._offset}},{key:"validOffsets",value:function validOffsets(){return[this._offset]}},{key:"transition",value:function transition(){return null}},{key:"standardOffset",value:function standardOffset(){return this._offset}},{key:"daylightSavings",value:function daylightSavings(){return S.ZERO}},{key:"isDaylightSavings",value:function isDaylightSavings(){return false}},{key:"isValidOffset",value:function isValidOffset(t,r){return this._offset.equals(r)}},{key:"nextTransition",value:function nextTransition(){return null}},{key:"previousTransition",value:function previousTransition(){return null}},{key:"transitions",value:function transitions(){return[]}},{key:"transitionRules",value:function transitionRules(){return[]}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof Fixed){return this._offset.equals(t._offset)}return false}},{key:"toString",value:function toString(){return"FixedRules:".concat(this._offset.toString())}}]);return Fixed}(Z);var Q={};var ee={};var te=function(t){_inherits(ZoneOffset,t);var n=_createSuper(ZoneOffset);function ZoneOffset(t){var r;_classCallCheck(this,ZoneOffset);r=n.call(this);ZoneOffset._validateTotalSeconds(t);r._totalSeconds=p.safeToInt(t);r._rules=Z.of(_assertThisInitialized(r));r._id=ZoneOffset._buildId(t);return r}_createClass(ZoneOffset,[{key:"totalSeconds",value:function totalSeconds(){return this._totalSeconds}},{key:"id",value:function id(){return this._id}},{key:"rules",value:function rules(){return this._rules}},{key:"get",value:function get(t){return this.getLong(t)}},{key:"getLong",value:function getLong(t){if(t===D.OFFSET_SECONDS){return this._totalSeconds}else if(t instanceof D){throw new r("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.offset()||t===M.zone()){return this}else if(t===M.localDate()||t===M.localTime()||t===M.precision()||t===M.chronology()||t===M.zoneId()){return null}return t.queryFrom(this)}},{key:"adjustInto",value:function adjustInto(t){return t.with(D.OFFSET_SECONDS,this._totalSeconds)}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");return t._totalSeconds-this._totalSeconds}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof ZoneOffset){return this._totalSeconds===t._totalSeconds}return false}},{key:"hashCode",value:function hashCode(){return this._totalSeconds}},{key:"toString",value:function toString(){return this._id}}],[{key:"_buildId",value:function _buildId(t){if(t===0){return"Z"}else{var r=Math.abs(t);var n=p.intDiv(r,vt.SECONDS_PER_HOUR);var i=p.intMod(p.intDiv(r,vt.SECONDS_PER_MINUTE),vt.MINUTES_PER_HOUR);var o="".concat(t<0?"-":"+").concat(n<10?"0":"").concat(n).concat(i<10?":0":":").concat(i);var a=p.intMod(r,vt.SECONDS_PER_MINUTE);if(a!==0){o+=(a<10?":0":":")+a}return o}}},{key:"_validateTotalSeconds",value:function _validateTotalSeconds(t){if(Math.abs(t)>ZoneOffset.MAX_SECONDS){throw new r("Zone offset not in valid range: -18:00 to +18:00")}}},{key:"_validate",value:function _validate(t,n,i){if(t<-18||t>18){throw new r("Zone offset hours not in valid range: value ".concat(t," is not in the range -18 to 18"))}if(t>0){if(n<0||i<0){throw new r("Zone offset minutes and seconds must be positive because hours is positive")}}else if(t<0){if(n>0||i>0){throw new r("Zone offset minutes and seconds must be negative because hours is negative")}}else if(n>0&&i<0||n<0&&i>0){throw new r("Zone offset minutes and seconds must have the same sign")}if(Math.abs(n)>59){throw new r("Zone offset minutes not in valid range: abs(value) ".concat(Math.abs(n)," is not in the range 0 to 59"))}if(Math.abs(i)>59){throw new r("Zone offset seconds not in valid range: abs(value) ".concat(Math.abs(i)," is not in the range 0 to 59"))}if(Math.abs(t)===18&&(Math.abs(n)>0||Math.abs(i)>0)){throw new r("Zone offset not in valid range: -18:00 to +18:00")}}},{key:"of",value:function of(t){requireNonNull(t,"offsetId");var n=ee[t];if(n!=null){return n}var i,o,a;switch(t.length){case 2:t="".concat(t[0],"0").concat(t[1]);case 3:i=ZoneOffset._parseNumber(t,1,false);o=0;a=0;break;case 5:i=ZoneOffset._parseNumber(t,1,false);o=ZoneOffset._parseNumber(t,3,false);a=0;break;case 6:i=ZoneOffset._parseNumber(t,1,false);o=ZoneOffset._parseNumber(t,4,true);a=0;break;case 7:i=ZoneOffset._parseNumber(t,1,false);o=ZoneOffset._parseNumber(t,3,false);a=ZoneOffset._parseNumber(t,5,false);break;case 9:i=ZoneOffset._parseNumber(t,1,false);o=ZoneOffset._parseNumber(t,4,true);a=ZoneOffset._parseNumber(t,7,true);break;default:throw new r("Invalid ID for ZoneOffset, invalid format: ".concat(t))}var s=t[0];if(s!=="+"&&s!=="-"){throw new r("Invalid ID for ZoneOffset, plus/minus not found when expected: ".concat(t))}if(s==="-"){return ZoneOffset.ofHoursMinutesSeconds(-i,-o,-a)}else{return ZoneOffset.ofHoursMinutesSeconds(i,o,a)}}},{key:"_parseNumber",value:function _parseNumber(t,n,i){if(i&&t[n-1]!==":"){throw new r("Invalid ID for ZoneOffset, colon not found when expected: ".concat(t))}var o=t[n];var a=t[n+1];if(o<"0"||o>"9"||a<"0"||a>"9"){throw new r("Invalid ID for ZoneOffset, non numeric characters found: ".concat(t))}return(o.charCodeAt(0)-48)*10+(a.charCodeAt(0)-48)}},{key:"ofHours",value:function ofHours(t){return ZoneOffset.ofHoursMinutesSeconds(t,0,0)}},{key:"ofHoursMinutes",value:function ofHoursMinutes(t,r){return ZoneOffset.ofHoursMinutesSeconds(t,r,0)}},{key:"ofHoursMinutesSeconds",value:function ofHoursMinutesSeconds(t,r,n){ZoneOffset._validate(t,r,n);var i=t*vt.SECONDS_PER_HOUR+r*vt.SECONDS_PER_MINUTE+n;return ZoneOffset.ofTotalSeconds(i)}},{key:"ofTotalMinutes",value:function ofTotalMinutes(t){var r=t*vt.SECONDS_PER_MINUTE;return ZoneOffset.ofTotalSeconds(r)}},{key:"ofTotalSeconds",value:function ofTotalSeconds(t){if(t%(15*vt.SECONDS_PER_MINUTE)===0){var r=t;var n=Q[r];if(n==null){n=new ZoneOffset(t);Q[r]=n;ee[n.id()]=n}return n}else{return new ZoneOffset(t)}}}]);return ZoneOffset}(J);function _init$7(){te.MAX_SECONDS=18*vt.SECONDS_PER_HOUR;te.UTC=te.ofTotalSeconds(0);te.MIN=te.ofTotalSeconds(-te.MAX_SECONDS);te.MAX=te.ofTotalSeconds(te.MAX_SECONDS)}var re=function(t){_inherits(DateTimeBuilder,t);var n=_createSuper(DateTimeBuilder);function DateTimeBuilder(){var t;_classCallCheck(this,DateTimeBuilder);t=n.call(this);t.fieldValues=new Y;t.chrono=null;t.zone=null;t.date=null;t.time=null;t.leapSecond=false;t.excessDays=null;return t}_createClass(DateTimeBuilder,[{key:"getFieldValue0",value:function getFieldValue0(t){return this.fieldValues.get(t)}},{key:"_addFieldValue",value:function _addFieldValue(t,n){requireNonNull(t,"field");var i=this.getFieldValue0(t);if(i!=null&&i!==n){throw new r("Conflict found: ".concat(t," ").concat(i," differs from ").concat(t," ").concat(n,": ").concat(this))}return this._putFieldValue0(t,n)}},{key:"_putFieldValue0",value:function _putFieldValue0(t,r){this.fieldValues.put(t,r);return this}},{key:"resolve",value:function resolve(t,r){if(r!=null){this.fieldValues.retainAll(r)}this._mergeDate(t);this._mergeTime(t);this._resolveTimeInferZeroes(t);if(this.excessDays!=null&&this.excessDays.isZero()===false&&this.date!=null&&this.time!=null){this.date=this.date.plus(this.excessDays);this.excessDays=z.ZERO}this._resolveInstant();return this}},{key:"_mergeDate",value:function _mergeDate(t){this._checkDate(ot.INSTANCE.resolveDate(this.fieldValues,t))}},{key:"_checkDate",value:function _checkDate(t){if(t!=null){this._addObject(t);for(var n in this.fieldValues.keySet()){var i=D.byName(n);if(i){if(this.fieldValues.get(i)!==undefined){if(i.isDateBased()){var o=void 0;try{o=t.getLong(i)}catch(t){if(t instanceof r){continue}else{throw t}}var a=this.fieldValues.get(i);if(o!==a){throw new r("Conflict found: Field ".concat(i," ").concat(o," differs from ").concat(i," ").concat(a," derived from ").concat(t))}}}}}}}},{key:"_mergeTime",value:function _mergeTime(t){if(this.fieldValues.containsKey(D.CLOCK_HOUR_OF_DAY)){var r=this.fieldValues.remove(D.CLOCK_HOUR_OF_DAY);if(t!==G.LENIENT){if(t===G.SMART&&r===0);else{D.CLOCK_HOUR_OF_DAY.checkValidValue(r)}}this._addFieldValue(D.HOUR_OF_DAY,r===24?0:r)}if(this.fieldValues.containsKey(D.CLOCK_HOUR_OF_AMPM)){var n=this.fieldValues.remove(D.CLOCK_HOUR_OF_AMPM);if(t!==G.LENIENT){if(t===G.SMART&&n===0);else{D.CLOCK_HOUR_OF_AMPM.checkValidValue(n)}}this._addFieldValue(D.HOUR_OF_AMPM,n===12?0:n)}if(t!==G.LENIENT){if(this.fieldValues.containsKey(D.AMPM_OF_DAY)){D.AMPM_OF_DAY.checkValidValue(this.fieldValues.get(D.AMPM_OF_DAY))}if(this.fieldValues.containsKey(D.HOUR_OF_AMPM)){D.HOUR_OF_AMPM.checkValidValue(this.fieldValues.get(D.HOUR_OF_AMPM))}}if(this.fieldValues.containsKey(D.AMPM_OF_DAY)&&this.fieldValues.containsKey(D.HOUR_OF_AMPM)){var i=this.fieldValues.remove(D.AMPM_OF_DAY);var o=this.fieldValues.remove(D.HOUR_OF_AMPM);this._addFieldValue(D.HOUR_OF_DAY,i*12+o)}if(this.fieldValues.containsKey(D.NANO_OF_DAY)){var a=this.fieldValues.remove(D.NANO_OF_DAY);if(t!==G.LENIENT){D.NANO_OF_DAY.checkValidValue(a)}this._addFieldValue(D.SECOND_OF_DAY,p.intDiv(a,1e9));this._addFieldValue(D.NANO_OF_SECOND,p.intMod(a,1e9))}if(this.fieldValues.containsKey(D.MICRO_OF_DAY)){var s=this.fieldValues.remove(D.MICRO_OF_DAY);if(t!==G.LENIENT){D.MICRO_OF_DAY.checkValidValue(s)}this._addFieldValue(D.SECOND_OF_DAY,p.intDiv(s,1e6));this._addFieldValue(D.MICRO_OF_SECOND,p.intMod(s,1e6))}if(this.fieldValues.containsKey(D.MILLI_OF_DAY)){var c=this.fieldValues.remove(D.MILLI_OF_DAY);if(t!==G.LENIENT){D.MILLI_OF_DAY.checkValidValue(c)}this._addFieldValue(D.SECOND_OF_DAY,p.intDiv(c,1e3));this._addFieldValue(D.MILLI_OF_SECOND,p.intMod(c,1e3))}if(this.fieldValues.containsKey(D.SECOND_OF_DAY)){var u=this.fieldValues.remove(D.SECOND_OF_DAY);if(t!==G.LENIENT){D.SECOND_OF_DAY.checkValidValue(u)}this._addFieldValue(D.HOUR_OF_DAY,p.intDiv(u,3600));this._addFieldValue(D.MINUTE_OF_HOUR,p.intMod(p.intDiv(u,60),60));this._addFieldValue(D.SECOND_OF_MINUTE,p.intMod(u,60))}if(this.fieldValues.containsKey(D.MINUTE_OF_DAY)){var l=this.fieldValues.remove(D.MINUTE_OF_DAY);if(t!==G.LENIENT){D.MINUTE_OF_DAY.checkValidValue(l)}this._addFieldValue(D.HOUR_OF_DAY,p.intDiv(l,60));this._addFieldValue(D.MINUTE_OF_HOUR,p.intMod(l,60))}if(t!==G.LENIENT){if(this.fieldValues.containsKey(D.MILLI_OF_SECOND)){D.MILLI_OF_SECOND.checkValidValue(this.fieldValues.get(D.MILLI_OF_SECOND))}if(this.fieldValues.containsKey(D.MICRO_OF_SECOND)){D.MICRO_OF_SECOND.checkValidValue(this.fieldValues.get(D.MICRO_OF_SECOND))}}if(this.fieldValues.containsKey(D.MILLI_OF_SECOND)&&this.fieldValues.containsKey(D.MICRO_OF_SECOND)){var d=this.fieldValues.remove(D.MILLI_OF_SECOND);var g=this.fieldValues.get(D.MICRO_OF_SECOND);this._putFieldValue0(D.MICRO_OF_SECOND,d*1e3+p.intMod(g,1e3))}if(this.fieldValues.containsKey(D.MICRO_OF_SECOND)&&this.fieldValues.containsKey(D.NANO_OF_SECOND)){var v=this.fieldValues.get(D.NANO_OF_SECOND);this._putFieldValue0(D.MICRO_OF_SECOND,p.intDiv(v,1e3));this.fieldValues.remove(D.MICRO_OF_SECOND)}if(this.fieldValues.containsKey(D.MILLI_OF_SECOND)&&this.fieldValues.containsKey(D.NANO_OF_SECOND)){var E=this.fieldValues.get(D.NANO_OF_SECOND);this._putFieldValue0(D.MILLI_OF_SECOND,p.intDiv(E,1e6));this.fieldValues.remove(D.MILLI_OF_SECOND)}if(this.fieldValues.containsKey(D.MICRO_OF_SECOND)){var S=this.fieldValues.remove(D.MICRO_OF_SECOND);this._putFieldValue0(D.NANO_OF_SECOND,S*1e3)}else if(this.fieldValues.containsKey(D.MILLI_OF_SECOND)){var w=this.fieldValues.remove(D.MILLI_OF_SECOND);this._putFieldValue0(D.NANO_OF_SECOND,w*1e6)}}},{key:"_resolveTimeInferZeroes",value:function _resolveTimeInferZeroes(t){var r=this.fieldValues.get(D.HOUR_OF_DAY);var n=this.fieldValues.get(D.MINUTE_OF_HOUR);var i=this.fieldValues.get(D.SECOND_OF_MINUTE);var o=this.fieldValues.get(D.NANO_OF_SECOND);if(r==null){return}if(n==null&&(i!=null||o!=null)){return}if(n!=null&&i==null&&o!=null){return}if(t!==G.LENIENT){if(r!=null){if(t===G.SMART&&r===24&&(n==null||n===0)&&(i==null||i===0)&&(o==null||o===0)){r=0;this.excessDays=z.ofDays(1)}var a=D.HOUR_OF_DAY.checkValidIntValue(r);if(n!=null){var s=D.MINUTE_OF_HOUR.checkValidIntValue(n);if(i!=null){var c=D.SECOND_OF_MINUTE.checkValidIntValue(i);if(o!=null){var u=D.NANO_OF_SECOND.checkValidIntValue(o);this._addObject(vt.of(a,s,c,u))}else{this._addObject(vt.of(a,s,c))}}else{if(o==null){this._addObject(vt.of(a,s))}}}else{if(i==null&&o==null){this._addObject(vt.of(a,0))}}}}else{if(r!=null){var l=r;if(n!=null){if(i!=null){if(o==null){o=0}var d=p.safeMultiply(l,36e11);d=p.safeAdd(d,p.safeMultiply(n,6e10));d=p.safeAdd(d,p.safeMultiply(i,1e9));d=p.safeAdd(d,o);var g=p.floorDiv(d,864e11);var v=p.floorMod(d,864e11);this._addObject(vt.ofNanoOfDay(v));this.excessDays=z.ofDays(g)}else{var E=p.safeMultiply(l,3600);E=p.safeAdd(E,p.safeMultiply(n,60));var S=p.floorDiv(E,86400);var w=p.floorMod(E,86400);this._addObject(vt.ofSecondOfDay(w));this.excessDays=z.ofDays(S)}}else{var x=p.safeToInt(p.floorDiv(l,24));l=p.floorMod(l,24);this._addObject(vt.of(l,0));this.excessDays=z.ofDays(x)}}}this.fieldValues.remove(D.HOUR_OF_DAY);this.fieldValues.remove(D.MINUTE_OF_HOUR);this.fieldValues.remove(D.SECOND_OF_MINUTE);this.fieldValues.remove(D.NANO_OF_SECOND)}},{key:"_addObject",value:function _addObject(t){if(t instanceof $){this.date=t}else if(t instanceof vt){this.time=t}}},{key:"_resolveInstant",value:function _resolveInstant(){if(this.date!=null&&this.time!=null){var t=this.fieldValues.get(D.OFFSET_SECONDS);if(t!=null){var r=te.ofTotalSeconds(t);var n=this.date.atTime(this.time).atZone(r).getLong(D.INSTANT_SECONDS);this.fieldValues.put(D.INSTANT_SECONDS,n)}else if(this.zone!=null){var i=this.date.atTime(this.time).atZone(this.zone).getLong(D.INSTANT_SECONDS);this.fieldValues.put(D.INSTANT_SECONDS,i)}}}},{key:"build",value:function build(t){return t.queryFrom(this)}},{key:"isSupported",value:function isSupported(t){if(t==null){return false}return this.fieldValues.containsKey(t)&&this.fieldValues.get(t)!==undefined||this.date!=null&&this.date.isSupported(t)||this.time!=null&&this.time.isSupported(t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");var n=this.getFieldValue0(t);if(n==null){if(this.date!=null&&this.date.isSupported(t)){return this.date.getLong(t)}if(this.time!=null&&this.time.isSupported(t)){return this.time.getLong(t)}throw new r("Field not found: ".concat(t))}return n}},{key:"query",value:function query(t){if(t===M.zoneId()){return this.zone}else if(t===M.chronology()){return this.chrono}else if(t===M.localDate()){return this.date!=null?pt.from(this.date):null}else if(t===M.localTime()){return this.time}else if(t===M.zone()||t===M.offset()){return t.queryFrom(this)}else if(t===M.precision()){return null}return t.queryFrom(this)}}],[{key:"create",value:function create(t,r){var n=new DateTimeBuilder;n._addFieldValue(t,r);return n}}]);return DateTimeBuilder}(L);var ne=function(){function DateTimeParseContext(){_classCallCheck(this,DateTimeParseContext);if(arguments.length===1){if(arguments[0]instanceof DateTimeParseContext){this._constructorSelf.apply(this,arguments);return}else{this._constructorFormatter.apply(this,arguments)}}else{this._constructorParam.apply(this,arguments)}this._caseSensitive=true;this._strict=true;this._parsed=[new ie(this)]}_createClass(DateTimeParseContext,[{key:"_constructorParam",value:function _constructorParam(t,r,n){this._locale=t;this._symbols=r;this._overrideChronology=n}},{key:"_constructorFormatter",value:function _constructorFormatter(t){this._locale=t.locale();this._symbols=t.decimalStyle();this._overrideChronology=t.chronology()}},{key:"_constructorSelf",value:function _constructorSelf(t){this._locale=t._locale;this._symbols=t._symbols;this._overrideChronology=t._overrideChronology;this._overrideZone=t._overrideZone;this._caseSensitive=t._caseSensitive;this._strict=t._strict;this._parsed=[new ie(this)]}},{key:"copy",value:function copy(){return new DateTimeParseContext(this)}},{key:"symbols",value:function symbols(){return this._symbols}},{key:"isStrict",value:function isStrict(){return this._strict}},{key:"setStrict",value:function setStrict(t){this._strict=t}},{key:"locale",value:function locale(){return this._locale}},{key:"setLocale",value:function setLocale(t){this._locale=t}},{key:"startOptional",value:function startOptional(){this._parsed.push(this.currentParsed().copy())}},{key:"endOptional",value:function endOptional(t){if(t){this._parsed.splice(this._parsed.length-2,1)}else{this._parsed.splice(this._parsed.length-1,1)}}},{key:"isCaseSensitive",value:function isCaseSensitive(){return this._caseSensitive}},{key:"setCaseSensitive",value:function setCaseSensitive(t){this._caseSensitive=t}},{key:"subSequenceEquals",value:function subSequenceEquals(t,r,n,i,o){if(r+o>t.length||i+o>n.length){return false}if(!this.isCaseSensitive()){t=t.toLowerCase();n=n.toLowerCase()}for(var a=0;a<o;a++){var s=t[r+a];var c=n[i+a];if(s!==c){return false}}return true}},{key:"charEquals",value:function charEquals(t,r){if(this.isCaseSensitive()){return t===r}return this.charEqualsIgnoreCase(t,r)}},{key:"charEqualsIgnoreCase",value:function charEqualsIgnoreCase(t,r){return t===r||t.toLowerCase()===r.toLowerCase()}},{key:"setParsedField",value:function setParsedField(t,r,n,i){var o=this.currentParsed().fieldValues;var a=o.get(t);o.set(t,r);return a!=null&&a!==r?~n:i}},{key:"setParsedZone",value:function setParsedZone(t){requireNonNull(t,"zone");this.currentParsed().zone=t}},{key:"getParsed",value:function getParsed(t){return this.currentParsed().fieldValues.get(t)}},{key:"toParsed",value:function toParsed(){return this.currentParsed()}},{key:"currentParsed",value:function currentParsed(){return this._parsed[this._parsed.length-1]}},{key:"setParsedLeapSecond",value:function setParsedLeapSecond(){this.currentParsed().leapSecond=true}},{key:"getEffectiveChronology",value:function getEffectiveChronology(){var t=this.currentParsed().chrono;if(t==null){t=this._overrideChronology;if(t==null){t=ot.INSTANCE}}return t}}]);return DateTimeParseContext}();var ie=function(t){_inherits(Parsed,t);var r=_createSuper(Parsed);function Parsed(t){var n;_classCallCheck(this,Parsed);n=r.call(this);n.chrono=null;n.zone=null;n.fieldValues=new Y;n.leapSecond=false;n.dateTimeParseContext=t;return n}_createClass(Parsed,[{key:"copy",value:function copy(){var t=new Parsed;t.chrono=this.chrono;t.zone=this.zone;t.fieldValues.putAll(this.fieldValues);t.leapSecond=this.leapSecond;t.dateTimeParseContext=this.dateTimeParseContext;return t}},{key:"toString",value:function toString(){return"".concat(this.fieldValues,", ").concat(this.chrono,", ").concat(this.zone)}},{key:"isSupported",value:function isSupported(t){return this.fieldValues.containsKey(t)}},{key:"get",value:function get(t){var r=this.fieldValues.get(t);assert(r!=null);return r}},{key:"query",value:function query(t){if(t===M.chronology()){return this.chrono}if(t===M.zoneId()||t===M.zone()){return this.zone}return _get(_getPrototypeOf(Parsed.prototype),"query",this).call(this,t)}},{key:"toBuilder",value:function toBuilder(){var t=new re;t.fieldValues.putAll(this.fieldValues);t.chrono=this.dateTimeParseContext.getEffectiveChronology();if(this.zone!=null){t.zone=this.zone}else{t.zone=this.overrideZone}t.leapSecond=this.leapSecond;t.excessDays=this.excessDays;return t}}]);return Parsed}(W);var oe=function(){function DateTimePrintContext(t,r,n){_classCallCheck(this,DateTimePrintContext);if(arguments.length===2&&arguments[1]instanceof We){this._temporal=DateTimePrintContext.adjust(t,r);this._locale=r.locale();this._symbols=r.decimalStyle()}else{this._temporal=t;this._locale=r;this._symbols=n}this._optional=0}_createClass(DateTimePrintContext,[{key:"symbols",value:function symbols(){return this._symbols}},{key:"startOptional",value:function startOptional(){this._optional++}},{key:"endOptional",value:function endOptional(){this._optional--}},{key:"getValueQuery",value:function getValueQuery(t){var n=this._temporal.query(t);if(n==null&&this._optional===0){throw new r("Unable to extract value: ".concat(this._temporal))}return n}},{key:"getValue",value:function getValue(t){try{return this._temporal.getLong(t)}catch(t){if(t instanceof r&&this._optional>0){return null}throw t}}},{key:"temporal",value:function temporal(){return this._temporal}},{key:"locale",value:function locale(){return this._locale}},{key:"setDateTime",value:function setDateTime(t){this._temporal=t}},{key:"setLocale",value:function setLocale(t){this._locale=t}}],[{key:"adjust",value:function adjust(t,r){return t}}]);return DateTimePrintContext}();var ae={};var se=[0,90,181,273,0,91,182,274];var ce=function(t){_inherits(Field,t);var r=_createSuper(Field);function Field(){_classCallCheck(this,Field);return r.apply(this,arguments)}_createClass(Field,[{key:"isDateBased",value:function isDateBased(){return true}},{key:"isTimeBased",value:function isTimeBased(){return false}},{key:"_isIso",value:function _isIso(){return true}},{key:"displayName",value:function displayName(){return this.toString()}},{key:"resolve",value:function resolve(){return null}},{key:"name",value:function name(){return this.toString()}}],[{key:"_getWeekRangeByLocalDate",value:function _getWeekRangeByLocalDate(t){var r=Field._getWeekBasedYear(t);return P.of(1,Field._getWeekRangeByYear(r))}},{key:"_getWeekRangeByYear",value:function _getWeekRangeByYear(t){var r=pt.of(t,1,1);if(r.dayOfWeek()===q.THURSDAY||r.dayOfWeek()===q.WEDNESDAY&&r.isLeapYear()){return 53}return 52}},{key:"_getWeek",value:function _getWeek(t){var r=t.dayOfWeek().ordinal();var n=t.dayOfYear()-1;var i=n+(3-r);var o=p.intDiv(i,7);var a=i-o*7;var s=a-3;if(s<-3){s+=7}if(n<s){return Field._getWeekRangeByLocalDate(t.withDayOfYear(180).minusYears(1)).maximum()}var c=p.intDiv(n-s,7)+1;if(c===53){if((s===-3||s===-2&&t.isLeapYear())===false){c=1}}return c}},{key:"_getWeekBasedYear",value:function _getWeekBasedYear(t){var r=t.year();var n=t.dayOfYear();if(n<=3){var i=t.dayOfWeek().ordinal();if(n-i<-2){r--}}else if(n>=363){var o=t.dayOfWeek().ordinal();n=n-363-(t.isLeapYear()?1:0);if(n-o>=0){r++}}return r}}]);return Field}(N);var ue=function(t){_inherits(DAY_OF_QUARTER_FIELD,t);var r=_createSuper(DAY_OF_QUARTER_FIELD);function DAY_OF_QUARTER_FIELD(){_classCallCheck(this,DAY_OF_QUARTER_FIELD);return r.apply(this,arguments)}_createClass(DAY_OF_QUARTER_FIELD,[{key:"toString",value:function toString(){return"DayOfQuarter"}},{key:"baseUnit",value:function baseUnit(){return x.DAYS}},{key:"rangeUnit",value:function rangeUnit(){return _e}},{key:"range",value:function range(){return P.of(1,90,92)}},{key:"isSupportedBy",value:function isSupportedBy(t){return t.isSupported(D.DAY_OF_YEAR)&&t.isSupported(D.MONTH_OF_YEAR)&&t.isSupported(D.YEAR)&&this._isIso(t)}},{key:"rangeRefinedBy",value:function rangeRefinedBy(t){if(t.isSupported(this)===false){throw new i("Unsupported field: DayOfQuarter")}var r=t.getLong(me);if(r===1){var n=t.getLong(D.YEAR);return ot.isLeapYear(n)?P.of(1,91):P.of(1,90)}else if(r===2){return P.of(1,91)}else if(r===3||r===4){return P.of(1,92)}return this.range()}},{key:"getFrom",value:function getFrom(t){if(t.isSupported(this)===false){throw new i("Unsupported field: DayOfQuarter")}var r=t.get(D.DAY_OF_YEAR);var n=t.get(D.MONTH_OF_YEAR);var o=t.getLong(D.YEAR);return r-se[p.intDiv(n-1,3)+(ot.isLeapYear(o)?4:0)]}},{key:"adjustInto",value:function adjustInto(t,r){var n=this.getFrom(t);this.range().checkValidValue(r,this);return t.with(D.DAY_OF_YEAR,t.getLong(D.DAY_OF_YEAR)+(r-n))}},{key:"resolve",value:function resolve(t,r,n){var i=t.get(D.YEAR);var o=t.get(me);if(i==null||o==null){return null}var a=D.YEAR.checkValidIntValue(i);var s=t.get(he);var c;if(n===G.LENIENT){var u=o;c=pt.of(a,1,1);c=c.plusMonths(p.safeMultiply(p.safeSubtract(u,1),3));c=c.plusDays(p.safeSubtract(s,1))}else{var l=me.range().checkValidIntValue(o,me);if(n===G.STRICT){var d=92;if(l===1){d=ot.isLeapYear(a)?91:90}else if(l===2){d=91}P.of(1,d).checkValidValue(s,this)}else{this.range().checkValidValue(s,this)}c=pt.of(a,(l-1)*3+1,1).plusDays(s-1)}t.remove(this);t.remove(D.YEAR);t.remove(me);return c}}]);return DAY_OF_QUARTER_FIELD}(ce);var le=function(t){_inherits(QUARTER_OF_YEAR_FIELD,t);var r=_createSuper(QUARTER_OF_YEAR_FIELD);function QUARTER_OF_YEAR_FIELD(){_classCallCheck(this,QUARTER_OF_YEAR_FIELD);return r.apply(this,arguments)}_createClass(QUARTER_OF_YEAR_FIELD,[{key:"toString",value:function toString(){return"QuarterOfYear"}},{key:"baseUnit",value:function baseUnit(){return _e}},{key:"rangeUnit",value:function rangeUnit(){return x.YEARS}},{key:"range",value:function range(){return P.of(1,4)}},{key:"isSupportedBy",value:function isSupportedBy(t){return t.isSupported(D.MONTH_OF_YEAR)&&this._isIso(t)}},{key:"rangeRefinedBy",value:function rangeRefinedBy(t){return this.range()}},{key:"getFrom",value:function getFrom(t){if(t.isSupported(this)===false){throw new i("Unsupported field: QuarterOfYear")}var r=t.getLong(D.MONTH_OF_YEAR);return p.intDiv(r+2,3)}},{key:"adjustInto",value:function adjustInto(t,r){var n=this.getFrom(t);this.range().checkValidValue(r,this);return t.with(D.MONTH_OF_YEAR,t.getLong(D.MONTH_OF_YEAR)+(r-n)*3)}}]);return QUARTER_OF_YEAR_FIELD}(ce);var fe=function(t){_inherits(WEEK_OF_WEEK_BASED_YEAR_FIELD,t);var r=_createSuper(WEEK_OF_WEEK_BASED_YEAR_FIELD);function WEEK_OF_WEEK_BASED_YEAR_FIELD(){_classCallCheck(this,WEEK_OF_WEEK_BASED_YEAR_FIELD);return r.apply(this,arguments)}_createClass(WEEK_OF_WEEK_BASED_YEAR_FIELD,[{key:"toString",value:function toString(){return"WeekOfWeekBasedYear"}},{key:"baseUnit",value:function baseUnit(){return x.WEEKS}},{key:"rangeUnit",value:function rangeUnit(){return ye}},{key:"range",value:function range(){return P.of(1,52,53)}},{key:"isSupportedBy",value:function isSupportedBy(t){return t.isSupported(D.EPOCH_DAY)&&this._isIso(t)}},{key:"rangeRefinedBy",value:function rangeRefinedBy(t){if(t.isSupported(this)===false){throw new i("Unsupported field: WeekOfWeekBasedYear")}return ce._getWeekRangeByLocalDate(pt.from(t))}},{key:"getFrom",value:function getFrom(t){if(t.isSupported(this)===false){throw new i("Unsupported field: WeekOfWeekBasedYear")}return ce._getWeek(pt.from(t))}},{key:"adjustInto",value:function adjustInto(t,r){this.range().checkValidValue(r,this);return t.plus(p.safeSubtract(r,this.getFrom(t)),x.WEEKS)}},{key:"resolve",value:function resolve(t,r,n){var i=t.get(ve);var o=t.get(D.DAY_OF_WEEK);if(i==null||o==null){return null}var a=ve.range().checkValidIntValue(i,ve);var s=t.get(ge);var c;if(n===G.LENIENT){var u=o;var l=0;if(u>7){l=p.intDiv(u-1,7);u=p.intMod(u-1,7)+1}else if(u<1){l=p.intDiv(u,7)-1;u=p.intMod(u,7)+7}c=pt.of(a,1,4).plusWeeks(s-1).plusWeeks(l).with(D.DAY_OF_WEEK,u)}else{var d=D.DAY_OF_WEEK.checkValidIntValue(o);if(n===G.STRICT){var g=pt.of(a,1,4);var v=ce._getWeekRangeByLocalDate(g);v.checkValidValue(s,this)}else{this.range().checkValidValue(s,this)}c=pt.of(a,1,4).plusWeeks(s-1).with(D.DAY_OF_WEEK,d)}t.remove(this);t.remove(ve);t.remove(D.DAY_OF_WEEK);return c}},{key:"displayName",value:function displayName(){return"Week"}}]);return WEEK_OF_WEEK_BASED_YEAR_FIELD}(ce);var de=function(t){_inherits(WEEK_BASED_YEAR_FIELD,t);var r=_createSuper(WEEK_BASED_YEAR_FIELD);function WEEK_BASED_YEAR_FIELD(){_classCallCheck(this,WEEK_BASED_YEAR_FIELD);return r.apply(this,arguments)}_createClass(WEEK_BASED_YEAR_FIELD,[{key:"toString",value:function toString(){return"WeekBasedYear"}},{key:"baseUnit",value:function baseUnit(){return ye}},{key:"rangeUnit",value:function rangeUnit(){return x.FOREVER}},{key:"range",value:function range(){return D.YEAR.range()}},{key:"isSupportedBy",value:function isSupportedBy(t){return t.isSupported(D.EPOCH_DAY)&&this._isIso(t)}},{key:"rangeRefinedBy",value:function rangeRefinedBy(t){return D.YEAR.range()}},{key:"getFrom",value:function getFrom(t){if(t.isSupported(this)===false){throw new i("Unsupported field: WeekBasedYear")}return ce._getWeekBasedYear(pt.from(t))}},{key:"adjustInto",value:function adjustInto(t,r){if(this.isSupportedBy(t)===false){throw new i("Unsupported field: WeekBasedYear")}var n=this.range().checkValidIntValue(r,ve);var o=pt.from(t);var a=o.get(D.DAY_OF_WEEK);var s=ce._getWeek(o);if(s===53&&ce._getWeekRangeByYear(n)===52){s=52}var c=pt.of(n,1,4);var u=a-c.get(D.DAY_OF_WEEK)+(s-1)*7;c=c.plusDays(u);return t.with(c)}}]);return WEEK_BASED_YEAR_FIELD}(ce);var pe=function(t){_inherits(Unit,t);var r=_createSuper(Unit);function Unit(t,n){var i;_classCallCheck(this,Unit);i=r.call(this);i._name=t;i._duration=n;return i}_createClass(Unit,[{key:"duration",value:function duration(){return this._duration}},{key:"isDurationEstimated",value:function isDurationEstimated(){return true}},{key:"isDateBased",value:function isDateBased(){return true}},{key:"isTimeBased",value:function isTimeBased(){return false}},{key:"isSupportedBy",value:function isSupportedBy(t){return t.isSupported(D.EPOCH_DAY)}},{key:"addTo",value:function addTo(t,r){switch(this){case ye:{var n=p.safeAdd(t.get(ve),r);return t.with(ve,n)}case _e:return t.plus(p.intDiv(r,256),x.YEARS).plus(p.intMod(r,256)*3,x.MONTHS);default:throw new s("Unreachable")}}},{key:"between",value:function between(t,r){switch(this){case ye:return p.safeSubtract(r.getLong(ve),t.getLong(ve));case _e:return p.intDiv(t.until(r,x.MONTHS),3);default:throw new s("Unreachable")}}},{key:"toString",value:function toString(){return name}}]);return Unit}(E);var he=null;var me=null;var ge=null;var ve=null;var ye=null;var _e=null;function _init$8(){he=new ue;me=new le;ge=new fe;ve=new de;ye=new pe("WeekBasedYears",S.ofSeconds(31556952));_e=new pe("QuarterYears",S.ofSeconds(31556952/4));ae.DAY_OF_QUARTER=he;ae.QUARTER_OF_YEAR=me;ae.WEEK_OF_WEEK_BASED_YEAR=ge;ae.WEEK_BASED_YEAR=ve;ae.WEEK_BASED_YEARS=ye;ae.QUARTER_YEARS=_e;pt.prototype.isoWeekOfWeekyear=function(){return this.get(ae.WEEK_OF_WEEK_BASED_YEAR)};pt.prototype.isoWeekyear=function(){return this.get(ae.WEEK_BASED_YEAR)}}
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var Ee=function(){function DecimalStyle(t,r,n,i){_classCallCheck(this,DecimalStyle);this._zeroDigit=t;this._zeroDigitCharCode=t.charCodeAt(0);this._positiveSign=r;this._negativeSign=n;this._decimalSeparator=i}_createClass(DecimalStyle,[{key:"positiveSign",value:function positiveSign(){return this._positiveSign}},{key:"withPositiveSign",value:function withPositiveSign(t){if(t===this._positiveSign){return this}return new DecimalStyle(this._zeroDigit,t,this._negativeSign,this._decimalSeparator)}},{key:"negativeSign",value:function negativeSign(){return this._negativeSign}},{key:"withNegativeSign",value:function withNegativeSign(t){if(t===this._negativeSign){return this}return new DecimalStyle(this._zeroDigit,this._positiveSign,t,this._decimalSeparator)}},{key:"zeroDigit",value:function zeroDigit(){return this._zeroDigit}},{key:"withZeroDigit",value:function withZeroDigit(t){if(t===this._zeroDigit){return this}return new DecimalStyle(t,this._positiveSign,this._negativeSign,this._decimalSeparator)}},{key:"decimalSeparator",value:function decimalSeparator(){return this._decimalSeparator}},{key:"withDecimalSeparator",value:function withDecimalSeparator(t){if(t===this._decimalSeparator){return this}return new DecimalStyle(this._zeroDigit,this._positiveSign,this._negativeSign,t)}},{key:"convertToDigit",value:function convertToDigit(t){var r=t.charCodeAt(0)-this._zeroDigitCharCode;return r>=0&&r<=9?r:-1}},{key:"convertNumberToI18N",value:function convertNumberToI18N(t){if(this._zeroDigit==="0"){return t}var r=this._zeroDigitCharCode-"0".charCodeAt(0);var n="";for(var i=0;i<t.length;i++){n+=String.fromCharCode(t.charCodeAt(i)+r)}return n}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof DecimalStyle){return this._zeroDigit===t._zeroDigit&&this._positiveSign===t._positiveSign&&this._negativeSign===t._negativeSign&&this._decimalSeparator===t._decimalSeparator}return false}},{key:"hashCode",value:function hashCode(){return this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator}},{key:"toString",value:function toString(){return"DecimalStyle[".concat(this._zeroDigit).concat(this._positiveSign).concat(this._negativeSign).concat(this._decimalSeparator,"]")}}],[{key:"of",value:function of(){throw new Error("not yet supported")}},{key:"availableLocales",value:function availableLocales(){throw new Error("not yet supported")}}]);return DecimalStyle}();Ee.STANDARD=new Ee("0","+","-",".");var be=function(t){_inherits(SignStyle,t);var r=_createSuper(SignStyle);function SignStyle(){_classCallCheck(this,SignStyle);return r.apply(this,arguments)}_createClass(SignStyle,[{key:"parse",value:function parse(t,r,n){switch(this){case SignStyle.NORMAL:return!t||!r;case SignStyle.ALWAYS:case SignStyle.EXCEEDS_PAD:return true;default:return!r&&!n}}}]);return SignStyle}(g);be.NORMAL=new be("NORMAL");be.NEVER=new be("NEVER");be.ALWAYS=new be("ALWAYS");be.EXCEEDS_PAD=new be("EXCEEDS_PAD");be.NOT_NEGATIVE=new be("NOT_NEGATIVE");var Se=function(t){_inherits(TextStyle,t);var r=_createSuper(TextStyle);function TextStyle(){_classCallCheck(this,TextStyle);return r.apply(this,arguments)}_createClass(TextStyle,[{key:"isStandalone",value:function isStandalone(){switch(this){case TextStyle.FULL_STANDALONE:case TextStyle.SHORT_STANDALONE:case TextStyle.NARROW_STANDALONE:return true;default:return false}}},{key:"asStandalone",value:function asStandalone(){switch(this){case TextStyle.FULL:return TextStyle.FULL_STANDALONE;case TextStyle.SHORT:return TextStyle.SHORT_STANDALONE;case TextStyle.NARROW:return TextStyle.NARROW_STANDALONE;default:return this}}},{key:"asNormal",value:function asNormal(){switch(this){case TextStyle.FULL_STANDALONE:return TextStyle.FULL;case TextStyle.SHORT_STANDALONE:return TextStyle.SHORT;case TextStyle.NARROW_STANDALONE:return TextStyle.NARROW;default:return this}}}]);return TextStyle}(g);Se.FULL=new Se("FULL");Se.FULL_STANDALONE=new Se("FULL_STANDALONE");Se.SHORT=new Se("SHORT");Se.SHORT_STANDALONE=new Se("SHORT_STANDALONE");Se.NARROW=new Se("NARROW");Se.NARROW_STANDALONE=new Se("NARROW_STANDALONE");var Te=function(){function CharLiteralPrinterParser(t){_classCallCheck(this,CharLiteralPrinterParser);if(t.length>1){throw new a('invalid literal, too long: "'.concat(t,'"'))}this._literal=t}_createClass(CharLiteralPrinterParser,[{key:"print",value:function print(t,r){r.append(this._literal);return true}},{key:"parse",value:function parse(t,r,n){var i=r.length;if(n===i){return~n}var o=r.charAt(n);if(t.charEquals(this._literal,o)===false){return~n}return n+this._literal.length}},{key:"toString",value:function toString(){if(this._literal==="'"){return"''"}return"'".concat(this._literal,"'")}}]);return CharLiteralPrinterParser}();
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var Ce=function(){function CompositePrinterParser(t,r){_classCallCheck(this,CompositePrinterParser);this._printerParsers=t;this._optional=r}_createClass(CompositePrinterParser,[{key:"withOptional",value:function withOptional(t){if(t===this._optional){return this}return new CompositePrinterParser(this._printerParsers,t)}},{key:"print",value:function print(t,r){var n=r.length();if(this._optional){t.startOptional()}try{for(var i=0;i<this._printerParsers.length;i++){var o=this._printerParsers[i];if(o.print(t,r)===false){r.setLength(n);return true}}}finally{if(this._optional){t.endOptional()}}return true}},{key:"parse",value:function parse(t,r,n){if(this._optional){t.startOptional();var i=n;for(var o=0;o<this._printerParsers.length;o++){var a=this._printerParsers[o];i=a.parse(t,r,i);if(i<0){t.endOptional(false);return n}}t.endOptional(true);return i}else{for(var s=0;s<this._printerParsers.length;s++){var c=this._printerParsers[s];n=c.parse(t,r,n);if(n<0){break}}return n}}},{key:"toString",value:function toString(){var t="";if(this._printerParsers!=null){t+=this._optional?"[":"(";for(var r=0;r<this._printerParsers.length;r++){var n=this._printerParsers[r];t+=n.toString()}t+=this._optional?"]":")"}return t}}]);return CompositePrinterParser}();var we=function(){function FractionPrinterParser(t,r,n,i){_classCallCheck(this,FractionPrinterParser);requireNonNull(t,"field");if(t.range().isFixed()===false){throw new a("Field must have a fixed set of values: ".concat(t))}if(r<0||r>9){throw new a("Minimum width must be from 0 to 9 inclusive but was ".concat(r))}if(n<1||n>9){throw new a("Maximum width must be from 1 to 9 inclusive but was ".concat(n))}if(n<r){throw new a("Maximum width must exceed or equal the minimum width but ".concat(n," < ").concat(r))}this.field=t;this.minWidth=r;this.maxWidth=n;this.decimalPoint=i}_createClass(FractionPrinterParser,[{key:"print",value:function print(t,r){var n=t.getValue(this.field);if(n===null){return false}var i=t.symbols();if(n===0){if(this.minWidth>0){if(this.decimalPoint){r.append(i.decimalSeparator())}for(var o=0;o<this.minWidth;o++){r.append(i.zeroDigit())}}}else{var a=this.convertToFraction(n,i.zeroDigit());var s=Math.min(Math.max(a.length,this.minWidth),this.maxWidth);a=a.substr(0,s);if(a*1>0){while(a.length>this.minWidth&&a[a.length-1]==="0"){a=a.substr(0,a.length-1)}}var c=a;c=i.convertNumberToI18N(c);if(this.decimalPoint){r.append(i.decimalSeparator())}r.append(c)}return true}},{key:"parse",value:function parse(t,r,n){var i=t.isStrict()?this.minWidth:0;var o=t.isStrict()?this.maxWidth:9;var a=r.length;if(n===a){return i>0?~n:n}if(this.decimalPoint){if(r[n]!==t.symbols().decimalSeparator()){return i>0?~n:n}n++}var s=n+i;if(s>a){return~n}var c=Math.min(n+o,a);var u=0;var l=n;while(l<c){var d=r.charAt(l++);var p=t.symbols().convertToDigit(d);if(p<0){if(l<s){return~n}l--;break}u=u*10+p}var g=l-n;var v=Math.pow(10,g);var E=this.convertFromFraction(u,v);return t.setParsedField(this.field,E,n,l)}},{key:"convertToFraction",value:function convertToFraction(t,r){var n=this.field.range();n.checkValidValue(t,this.field);var i=n.minimum();var o=n.maximum()-i+1;var a=t-i;var s=p.intDiv(a*1e9,o);var c="".concat(s);while(c.length<9){c=r+c}return c}},{key:"convertFromFraction",value:function convertFromFraction(t,r){var n=this.field.range();var i=n.minimum();var o=n.maximum()-i+1;var a=p.intDiv(t*o,r);return a}},{key:"toString",value:function toString(){var t=this.decimalPoint?",DecimalPoint":"";return"Fraction(".concat(this.field,",").concat(this.minWidth,",").concat(this.maxWidth).concat(t,")")}}]);return FractionPrinterParser}();var Ae=15;var Ie=[0,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];var Oe=function(){function NumberPrinterParser(t,r,n,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;_classCallCheck(this,NumberPrinterParser);this._field=t;this._minWidth=r;this._maxWidth=n;this._signStyle=i;this._subsequentWidth=o}_createClass(NumberPrinterParser,[{key:"field",value:function field(){return this._field}},{key:"minWidth",value:function minWidth(){return this._minWidth}},{key:"maxWidth",value:function maxWidth(){return this._maxWidth}},{key:"signStyle",value:function signStyle(){return this._signStyle}},{key:"withFixedWidth",value:function withFixedWidth(){if(this._subsequentWidth===-1){return this}return new NumberPrinterParser(this._field,this._minWidth,this._maxWidth,this._signStyle,-1)}},{key:"withSubsequentWidth",value:function withSubsequentWidth(t){return new NumberPrinterParser(this._field,this._minWidth,this._maxWidth,this._signStyle,this._subsequentWidth+t)}},{key:"_isFixedWidth",value:function _isFixedWidth(){return this._subsequentWidth===-1||this._subsequentWidth>0&&this._minWidth===this._maxWidth&&this._signStyle===be.NOT_NEGATIVE}},{key:"print",value:function print(t,n){var i=t.getValue(this._field);if(i==null){return false}var o=this._getValue(t,i);var a=t.symbols();var s="".concat(Math.abs(o));if(s.length>this._maxWidth){throw new r("Field ".concat(this._field," cannot be printed as the value ").concat(o," exceeds the maximum print width of ").concat(this._maxWidth))}s=a.convertNumberToI18N(s);if(o>=0){switch(this._signStyle){case be.EXCEEDS_PAD:if(this._minWidth<Ae&&o>=Ie[this._minWidth]){n.append(a.positiveSign())}break;case be.ALWAYS:n.append(a.positiveSign());break}}else{switch(this._signStyle){case be.NORMAL:case be.EXCEEDS_PAD:case be.ALWAYS:n.append(a.negativeSign());break;case be.NOT_NEGATIVE:throw new r("Field ".concat(this._field," cannot be printed as the value ").concat(o," cannot be negative according to the SignStyle"))}}for(var c=0;c<this._minWidth-s.length;c++){n.append(a.zeroDigit())}n.append(s);return true}},{key:"parse",value:function parse(t,r,n){var i=r.length;if(n===i){return~n}assert(n>=0&&n<i);var a=r.charAt(n);var s=false;var c=false;if(a===t.symbols().positiveSign()){if(this._signStyle.parse(true,t.isStrict(),this._minWidth===this._maxWidth)===false){return~n}c=true;n++}else if(a===t.symbols().negativeSign()){if(this._signStyle.parse(false,t.isStrict(),this._minWidth===this._maxWidth)===false){return~n}s=true;n++}else{if(this._signStyle===be.ALWAYS&&t.isStrict()){return~n}}var u=t.isStrict()||this._isFixedWidth()?this._minWidth:1;var l=n+u;if(l>i){return~n}var d=(t.isStrict()||this._isFixedWidth()?this._maxWidth:9)+Math.max(this._subsequentWidth,0);var p=0;var g=n;for(var v=0;v<2;v++){var E=Math.min(g+d,i);while(g<E){var S=r.charAt(g++);var w=t.symbols().convertToDigit(S);if(w<0){g--;if(g<l){return~n}break}if(g-n>Ae){throw new o("number text exceeds length")}else{p=p*10+w}}if(this._subsequentWidth>0&&v===0){var x=g-n;d=Math.max(u,x-this._subsequentWidth);g=n;p=0}else{break}}if(s){if(p===0&&t.isStrict()){return~(n-1)}if(p!==0){p=-p}}else if(this._signStyle===be.EXCEEDS_PAD&&t.isStrict()){var N=g-n;if(c){if(N<=this._minWidth){return~(n-1)}}else{if(N>this._minWidth){return~n}}}return this._setValue(t,p,n,g)}},{key:"_getValue",value:function _getValue(t,r){return r}},{key:"_setValue",value:function _setValue(t,r,n,i){return t.setParsedField(this._field,r,n,i)}},{key:"toString",value:function toString(){if(this._minWidth===1&&this._maxWidth===Ae&&this._signStyle===be.NORMAL){return"Value(".concat(this._field,")")}if(this._minWidth===this._maxWidth&&this._signStyle===be.NOT_NEGATIVE){return"Value(".concat(this._field,",").concat(this._minWidth,")")}return"Value(".concat(this._field,",").concat(this._minWidth,",").concat(this._maxWidth,",").concat(this._signStyle,")")}}]);return NumberPrinterParser}();var Re=function(t){_inherits(ReducedPrinterParser,t);var n=_createSuper(ReducedPrinterParser);function ReducedPrinterParser(t,i,o,s,c){var u;_classCallCheck(this,ReducedPrinterParser);u=n.call(this,t,i,o,be.NOT_NEGATIVE);if(i<1||i>10){throw new a("The width must be from 1 to 10 inclusive but was ".concat(i))}if(o<1||o>10){throw new a("The maxWidth must be from 1 to 10 inclusive but was ".concat(o))}if(o<i){throw new a("The maxWidth must be greater than the width")}if(c===null){if(t.range().isValidValue(s)===false){throw new a("The base value must be within the range of the field")}if(s+Ie[i]>p.MAX_SAFE_INTEGER){throw new r("Unable to add printer-parser as the range exceeds the capacity of an int")}}u._baseValue=s;u._baseDate=c;return u}_createClass(ReducedPrinterParser,[{key:"_getValue",value:function _getValue(t,r){var n=Math.abs(r);var i=this._baseValue;if(this._baseDate!==null){t.temporal();var o=ot.INSTANCE;i=o.date(this._baseDate).get(this._field)}if(r>=i&&r<i+Ie[this._minWidth]){return n%Ie[this._minWidth]}return n%Ie[this._maxWidth]}},{key:"_setValue",value:function _setValue(t,r,n,i){var o=this._baseValue;if(this._baseDate!=null){var a=t.getEffectiveChronology();o=a.date(this._baseDate).get(this._field)}var s=i-n;if(s===this._minWidth&&r>=0){var c=Ie[this._minWidth];var u=o%c;var l=o-u;if(o>0){r=l+r}else{r=l-r}if(r<o){r+=c}}return t.setParsedField(this._field,r,n,i)}},{key:"withFixedWidth",value:function withFixedWidth(){if(this._subsequentWidth===-1){return this}return new ReducedPrinterParser(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,-1)}},{key:"withSubsequentWidth",value:function withSubsequentWidth(t){return new ReducedPrinterParser(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,this._subsequentWidth+t)}},{key:"isFixedWidth",value:function isFixedWidth(t){if(t.isStrict()===false){return false}return _get(_getPrototypeOf(ReducedPrinterParser.prototype),"isFixedWidth",this).call(this,t)}},{key:"toString",value:function toString(){return"ReducedValue(".concat(this._field,",").concat(this._minWidth,",").concat(this._maxWidth,",").concat(this._baseDate!=null?this._baseDate:this._baseValue,")")}}]);return ReducedPrinterParser}(Oe);var ke=["+HH","+HHmm","+HH:mm","+HHMM","+HH:MM","+HHMMss","+HH:MM:ss","+HHMMSS","+HH:MM:SS"];var xe=function(){function OffsetIdPrinterParser(t,r){_classCallCheck(this,OffsetIdPrinterParser);requireNonNull(t,"noOffsetText");requireNonNull(r,"pattern");this.noOffsetText=t;this.type=this._checkPattern(r)}_createClass(OffsetIdPrinterParser,[{key:"_checkPattern",value:function _checkPattern(t){for(var r=0;r<ke.length;r++){if(ke[r]===t){return r}}throw new a("Invalid zone offset pattern: ".concat(t))}},{key:"print",value:function print(t,r){var n=t.getValue(D.OFFSET_SECONDS);if(n==null){return false}var i=p.safeToInt(n);if(i===0){r.append(this.noOffsetText)}else{var o=Math.abs(p.intMod(p.intDiv(i,3600),100));var a=Math.abs(p.intMod(p.intDiv(i,60),60));var s=Math.abs(p.intMod(i,60));var c=r.length();var u=o;r.append(i<0?"-":"+").appendChar("".concat(p.intDiv(o,10),"0")).appendChar("".concat(p.intMod(o,10),"0"));if(this.type>=3||this.type>=1&&a>0){r.append(this.type%2===0?":":"").appendChar("".concat(p.intDiv(a,10),"0")).appendChar("".concat(a%10,"0"));u+=a;if(this.type>=7||this.type>=5&&s>0){r.append(this.type%2===0?":":"").appendChar("".concat(p.intDiv(s,10),"0")).appendChar("".concat(s%10,"0"));u+=s}}if(u===0){r.setLength(c);r.append(this.noOffsetText)}}return true}},{key:"parse",value:function parse(t,r,n){var i=r.length;var o=this.noOffsetText.length;if(o===0){if(n===i){return t.setParsedField(D.OFFSET_SECONDS,0,n,n)}}else{if(n===i){return~n}if(t.subSequenceEquals(r,n,this.noOffsetText,0,o)){return t.setParsedField(D.OFFSET_SECONDS,0,n,n+o)}}var a=r[n];if(a==="+"||a==="-"){var s=a==="-"?-1:1;var c=[0,0,0,0];c[0]=n+1;if((this._parseNumber(c,1,r,true)||this._parseNumber(c,2,r,this.type>=3)||this._parseNumber(c,3,r,false))===false){var u=p.safeZero(s*(c[1]*3600+c[2]*60+c[3]));return t.setParsedField(D.OFFSET_SECONDS,u,n,c[0])}}if(o===0){return t.setParsedField(D.OFFSET_SECONDS,0,n,n+o)}return~n}},{key:"_parseNumber",value:function _parseNumber(t,r,n,i){if((this.type+3)/2<r){return false}var o=t[0];if(this.type%2===0&&r>1){if(o+1>n.length||n[o]!==":"){return i}o++}if(o+2>n.length){return i}var a=n[o++];var s=n[o++];if(a<"0"||a>"9"||s<"0"||s>"9"){return i}var c=(a.charCodeAt(0)-48)*10+(s.charCodeAt(0)-48);if(c<0||c>59){return i}t[r]=c;t[0]=o;return false}},{key:"toString",value:function toString(){var t=this.noOffsetText.replace("'","''");return"Offset(".concat(ke[this.type],",'").concat(t,"')")}}]);return OffsetIdPrinterParser}();xe.INSTANCE_ID=new xe("Z","+HH:MM:ss");xe.PATTERNS=ke;var Ne=function(){function PadPrinterParserDecorator(t,r,n){_classCallCheck(this,PadPrinterParserDecorator);this._printerParser=t;this._padWidth=r;this._padChar=n}_createClass(PadPrinterParserDecorator,[{key:"print",value:function print(t,n){var i=n.length();if(this._printerParser.print(t,n)===false){return false}var o=n.length()-i;if(o>this._padWidth){throw new r("Cannot print as output of ".concat(o," characters exceeds pad width of ").concat(this._padWidth))}for(var a=0;a<this._padWidth-o;a++){n.insert(i,this._padChar)}return true}},{key:"parse",value:function parse(t,r,n){var i=t.isStrict();var o=t.isCaseSensitive();assert(!(n>r.length));assert(n>=0);if(n===r.length){return~n}var a=n+this._padWidth;if(a>r.length){if(i){return~n}a=r.length}var s=n;while(s<a&&(o?r[s]===this._padChar:t.charEquals(r[s],this._padChar))){s++}r=r.substring(0,a);var c=this._printerParser.parse(t,r,s);if(c!==a&&i){return~(n+s)}return c}},{key:"toString",value:function toString(){return"Pad(".concat(this._printerParser,",").concat(this._padWidth).concat(this._padChar===" "?")":",'".concat(this._padChar,"')"))}}]);return PadPrinterParserDecorator}();var Pe=function(t){_inherits(SettingsParser,t);var r=_createSuper(SettingsParser);function SettingsParser(){_classCallCheck(this,SettingsParser);return r.apply(this,arguments)}_createClass(SettingsParser,[{key:"print",value:function print(){return true}},{key:"parse",value:function parse(t,r,n){switch(this){case SettingsParser.SENSITIVE:t.setCaseSensitive(true);break;case SettingsParser.INSENSITIVE:t.setCaseSensitive(false);break;case SettingsParser.STRICT:t.setStrict(true);break;case SettingsParser.LENIENT:t.setStrict(false);break}return n}},{key:"toString",value:function toString(){switch(this){case SettingsParser.SENSITIVE:return"ParseCaseSensitive(true)";case SettingsParser.INSENSITIVE:return"ParseCaseSensitive(false)";case SettingsParser.STRICT:return"ParseStrict(true)";case SettingsParser.LENIENT:return"ParseStrict(false)"}}}]);return SettingsParser}(g);Pe.SENSITIVE=new Pe("SENSITIVE");Pe.INSENSITIVE=new Pe("INSENSITIVE");Pe.STRICT=new Pe("STRICT");Pe.LENIENT=new Pe("LENIENT");var De=function(){function StringLiteralPrinterParser(t){_classCallCheck(this,StringLiteralPrinterParser);this._literal=t}_createClass(StringLiteralPrinterParser,[{key:"print",value:function print(t,r){r.append(this._literal);return true}},{key:"parse",value:function parse(t,r,n){var i=r.length;assert(!(n>i||n<0));if(t.subSequenceEquals(r,n,this._literal,0,this._literal.length)===false){return~n}return n+this._literal.length}},{key:"toString",value:function toString(){var t=this._literal.replace("'","''");return"'".concat(t,"'")}}]);return StringLiteralPrinterParser}();var Me=function(){function ZoneRulesProvider(){_classCallCheck(this,ZoneRulesProvider)}_createClass(ZoneRulesProvider,null,[{key:"getRules",value:function getRules(t){throw new r("unsupported ZoneId:".concat(t))}},{key:"getAvailableZoneIds",value:function getAvailableZoneIds(){return[]}}]);return ZoneRulesProvider}();var Le=function(t){_inherits(ZoneRegion,t);var r=_createSuper(ZoneRegion);function ZoneRegion(t,n){var i;_classCallCheck(this,ZoneRegion);i=r.call(this);i._id=t;i._rules=n;return i}_createClass(ZoneRegion,[{key:"id",value:function id(){return this._id}},{key:"rules",value:function rules(){return this._rules}}],[{key:"ofId",value:function ofId(t){var r=Me.getRules(t);return new ZoneRegion(t,r)}}]);return ZoneRegion}(J);var Ue=function(){function ZoneIdPrinterParser(t,r){_classCallCheck(this,ZoneIdPrinterParser);this.query=t;this.description=r}_createClass(ZoneIdPrinterParser,[{key:"print",value:function print(t,r){var n=t.getValueQuery(this.query);if(n==null){return false}r.append(n.id());return true}},{key:"parse",value:function parse(t,r,n){var i=r.length;if(n>i){return~n}if(n===i){return~n}var o=r.charAt(n);if(o==="+"||o==="-"){var a=t.copy();var s=xe.INSTANCE_ID.parse(a,r,n);if(s<0){return s}var c=a.getParsed(D.OFFSET_SECONDS);var u=te.ofTotalSeconds(c);t.setParsedZone(u);return s}else if(i>=n+2){var l=r.charAt(n+1);if(t.charEquals(o,"U")&&t.charEquals(l,"T")){if(i>=n+3&&t.charEquals(r.charAt(n+2),"C")){return this._parsePrefixedOffset(t,r,n,n+3)}return this._parsePrefixedOffset(t,r,n,n+2)}else if(t.charEquals(o,"G")&&i>=n+3&&t.charEquals(l,"M")&&t.charEquals(r.charAt(n+2),"T")){return this._parsePrefixedOffset(t,r,n,n+3)}}if(r.substr(n,6)==="SYSTEM"){t.setParsedZone(J.systemDefault());return n+6}if(t.charEquals(o,"Z")){t.setParsedZone(te.UTC);return n+1}var d=Me.getAvailableZoneIds();if(Fe.size!==d.length){Fe=qe.createTreeMap(d)}var p=i-n;var g=Fe.treeMap;var v=null;var E=0;while(g!=null){var S=r.substr(n,Math.min(g.length,p));g=g.get(S);if(g!=null&&g.isLeaf){v=S;E=g.length}}if(v!=null){t.setParsedZone(Le.ofId(v));return n+E}return~n}},{key:"_parsePrefixedOffset",value:function _parsePrefixedOffset(t,r,n,i){var o=r.substring(n,i).toUpperCase();var a=t.copy();if(i<r.length&&t.charEquals(r.charAt(i),"Z")){t.setParsedZone(J.ofOffset(o,te.UTC));return i}var s=xe.INSTANCE_ID.parse(a,r,i);if(s<0){t.setParsedZone(J.ofOffset(o,te.UTC));return i}var c=a.getParsed(D.OFFSET_SECONDS);var u=te.ofTotalSeconds(c);t.setParsedZone(J.ofOffset(o,u));return s}},{key:"toString",value:function toString(){return this.description}}]);return ZoneIdPrinterParser}();var qe=function(){function ZoneIdTree(t,r){_classCallCheck(this,ZoneIdTree);this.size=t;this.treeMap=r}_createClass(ZoneIdTree,null,[{key:"createTreeMap",value:function createTreeMap(t){var r=t.sort((function(t,r){return t.length-r.length}));var n=new Be(r[0].length,false);for(var i=0;i<r.length;i++){n.add(r[i])}return new ZoneIdTree(r.length,n)}}]);return ZoneIdTree}();var Be=function(){function ZoneIdTreeMap(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_classCallCheck(this,ZoneIdTreeMap);this.length=t;this.isLeaf=r;this._treeMap={}}_createClass(ZoneIdTreeMap,[{key:"add",value:function add(t){var r=t.length;if(r===this.length){this._treeMap[t]=new ZoneIdTreeMap(r,true)}else if(r>this.length){var n=t.substr(0,this.length);var i=this._treeMap[n];if(i==null){i=new ZoneIdTreeMap(r,false);this._treeMap[n]=i}i.add(t)}}},{key:"get",value:function get(t){return this._treeMap[t]}}]);return ZoneIdTreeMap}();var Fe=new qe([]);var je=15;var He=function(){function DateTimeFormatterBuilder(){_classCallCheck(this,DateTimeFormatterBuilder);this._active=this;this._parent=null;this._printerParsers=[];this._optional=false;this._padNextWidth=0;this._padNextChar=null;this._valueParserIndex=-1}_createClass(DateTimeFormatterBuilder,[{key:"parseCaseSensitive",value:function parseCaseSensitive(){this._appendInternalPrinterParser(Pe.SENSITIVE);return this}},{key:"parseCaseInsensitive",value:function parseCaseInsensitive(){this._appendInternalPrinterParser(Pe.INSENSITIVE);return this}},{key:"parseStrict",value:function parseStrict(){this._appendInternalPrinterParser(Pe.STRICT);return this}},{key:"parseLenient",value:function parseLenient(){this._appendInternalPrinterParser(Pe.LENIENT);return this}},{key:"appendValue",value:function appendValue(){if(arguments.length===1){return this._appendValue1.apply(this,arguments)}else if(arguments.length===2){return this._appendValue2.apply(this,arguments)}else{return this._appendValue4.apply(this,arguments)}}},{key:"_appendValue1",value:function _appendValue1(t){requireNonNull(t);this._appendValuePrinterParser(new Oe(t,1,je,be.NORMAL));return this}},{key:"_appendValue2",value:function _appendValue2(t,r){requireNonNull(t);if(r<1||r>je){throw new a("The width must be from 1 to ".concat(je," inclusive but was ").concat(r))}var n=new Oe(t,r,r,be.NOT_NEGATIVE);this._appendValuePrinterParser(n);return this}},{key:"_appendValue4",value:function _appendValue4(t,r,n,i){requireNonNull(t);requireNonNull(i);if(r===n&&i===be.NOT_NEGATIVE){return this._appendValue2(t,n)}if(r<1||r>je){throw new a("The minimum width must be from 1 to ".concat(je," inclusive but was ").concat(r))}if(n<1||n>je){throw new a("The minimum width must be from 1 to ".concat(je," inclusive but was ").concat(n))}if(n<r){throw new a("The maximum width must exceed or equal the minimum width but ".concat(n," < ").concat(r))}var o=new Oe(t,r,n,i);this._appendValuePrinterParser(o);return this}},{key:"appendValueReduced",value:function appendValueReduced(){if(arguments.length===4&&arguments[3]instanceof $){return this._appendValueReducedFieldWidthMaxWidthBaseDate.apply(this,arguments)}else{return this._appendValueReducedFieldWidthMaxWidthBaseValue.apply(this,arguments)}}},{key:"_appendValueReducedFieldWidthMaxWidthBaseValue",value:function _appendValueReducedFieldWidthMaxWidthBaseValue(t,r,n,i){requireNonNull(t,"field");var o=new Re(t,r,n,i,null);this._appendValuePrinterParser(o);return this}},{key:"_appendValueReducedFieldWidthMaxWidthBaseDate",value:function _appendValueReducedFieldWidthMaxWidthBaseDate(t,r,n,i){requireNonNull(t,"field");requireNonNull(i,"baseDate");requireInstance(i,$,"baseDate");var o=new Re(t,r,n,0,i);this._appendValuePrinterParser(o);return this}},{key:"_appendValuePrinterParser",value:function _appendValuePrinterParser(t){assert(t!=null);if(this._active._valueParserIndex>=0&&this._active._printerParsers[this._active._valueParserIndex]instanceof Oe){var r=this._active._valueParserIndex;var n=this._active._printerParsers[r];if(t.minWidth()===t.maxWidth()&&t.signStyle()===be.NOT_NEGATIVE){n=n.withSubsequentWidth(t.maxWidth());this._appendInternal(t.withFixedWidth());this._active._valueParserIndex=r}else{n=n.withFixedWidth();this._active._valueParserIndex=this._appendInternal(t)}this._active._printerParsers[r]=n}else{this._active._valueParserIndex=this._appendInternal(t)}return this}},{key:"appendFraction",value:function appendFraction(t,r,n,i){this._appendInternal(new we(t,r,n,i));return this}},{key:"appendInstant",value:function appendInstant(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-2;if(t<-2||t>9){throw new a("Invalid fractional digits: ".concat(t))}this._appendInternal(new Ye(t));return this}},{key:"appendOffsetId",value:function appendOffsetId(){this._appendInternal(xe.INSTANCE_ID);return this}},{key:"appendOffset",value:function appendOffset(t,r){this._appendInternalPrinterParser(new xe(r,t));return this}},{key:"appendZoneId",value:function appendZoneId(){this._appendInternal(new Ue(M.zoneId(),"ZoneId()"));return this}},{key:"appendPattern",value:function appendPattern(t){requireNonNull(t,"pattern");this._parsePattern(t);return this}},{key:"appendZoneText",value:function appendZoneText(){throw new a("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")}},{key:"appendText",value:function appendText(){throw new a("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")}},{key:"appendLocalizedOffset",value:function appendLocalizedOffset(){throw new a("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")}},{key:"appendWeekField",value:function appendWeekField(){throw new a("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")}},{key:"_parsePattern",value:function _parsePattern(t){var r={G:D.ERA,y:D.YEAR_OF_ERA,u:D.YEAR,Q:ae.QUARTER_OF_YEAR,q:ae.QUARTER_OF_YEAR,M:D.MONTH_OF_YEAR,L:D.MONTH_OF_YEAR,D:D.DAY_OF_YEAR,d:D.DAY_OF_MONTH,F:D.ALIGNED_DAY_OF_WEEK_IN_MONTH,E:D.DAY_OF_WEEK,c:D.DAY_OF_WEEK,e:D.DAY_OF_WEEK,a:D.AMPM_OF_DAY,H:D.HOUR_OF_DAY,k:D.CLOCK_HOUR_OF_DAY,K:D.HOUR_OF_AMPM,h:D.CLOCK_HOUR_OF_AMPM,m:D.MINUTE_OF_HOUR,s:D.SECOND_OF_MINUTE,S:D.NANO_OF_SECOND,A:D.MILLI_OF_DAY,n:D.NANO_OF_SECOND,N:D.NANO_OF_DAY};for(var n=0;n<t.length;n++){var i=t.charAt(n);if(i>="A"&&i<="Z"||i>="a"&&i<="z"){var o=n++;for(;n<t.length&&t.charAt(n)===i;n++){}var s=n-o;if(i==="p"){var c=0;if(n<t.length){i=t.charAt(n);if(i>="A"&&i<="Z"||i>="a"&&i<="z"){c=s;o=n++;for(;n<t.length&&t.charAt(n)===i;n++){}s=n-o}}if(c===0){throw new a("Pad letter 'p' must be followed by valid pad pattern: ".concat(t))}this.padNext(c)}var u=r[i];if(u!=null){this._parseField(i,s,u)}else if(i==="z"){if(s>4){throw new a("Too many pattern letters: ".concat(i))}else if(s===4){this.appendZoneText(Se.FULL)}else{this.appendZoneText(Se.SHORT)}}else if(i==="V"){if(s!==2){throw new a("Pattern letter count must be 2: ".concat(i))}this.appendZoneId()}else if(i==="Z"){if(s<4){this.appendOffset("+HHMM","+0000")}else if(s===4){this.appendLocalizedOffset(Se.FULL)}else if(s===5){this.appendOffset("+HH:MM:ss","Z")}else{throw new a("Too many pattern letters: ".concat(i))}}else if(i==="O"){if(s===1){this.appendLocalizedOffset(Se.SHORT)}else if(s===4){this.appendLocalizedOffset(Se.FULL)}else{throw new a("Pattern letter count must be 1 or 4: ".concat(i))}}else if(i==="X"){if(s>5){throw new a("Too many pattern letters: ".concat(i))}this.appendOffset(xe.PATTERNS[s+(s===1?0:1)],"Z")}else if(i==="x"){if(s>5){throw new a("Too many pattern letters: ".concat(i))}var l=s===1?"+00":s%2===0?"+0000":"+00:00";this.appendOffset(xe.PATTERNS[s+(s===1?0:1)],l)}else if(i==="W"){if(s>1){throw new a("Too many pattern letters: ".concat(i))}this.appendWeekField("W",s)}else if(i==="w"){if(s>2){throw new a("Too many pattern letters: ".concat(i))}this.appendWeekField("w",s)}else if(i==="Y"){this.appendWeekField("Y",s)}else{throw new a("Unknown pattern letter: ".concat(i))}n--}else if(i==="'"){var d=n++;for(;n<t.length;n++){if(t.charAt(n)==="'"){if(n+1<t.length&&t.charAt(n+1)==="'"){n++}else{break}}}if(n>=t.length){throw new a("Pattern ends with an incomplete string literal: ".concat(t))}var p=t.substring(d+1,n);if(p.length===0){this.appendLiteral("'")}else{this.appendLiteral(p.replace("''","'"))}}else if(i==="["){this.optionalStart()}else if(i==="]"){if(this._active._parent===null){throw new a("Pattern invalid as it contains ] without previous [")}this.optionalEnd()}else if(i==="{"||i==="}"||i==="#"){throw new a("Pattern includes reserved character: '".concat(i,"'"))}else{this.appendLiteral(i)}}}},{key:"_parseField",value:function _parseField(t,r,n){switch(t){case"u":case"y":if(r===2){this.appendValueReduced(n,2,2,Re.BASE_DATE)}else if(r<4){this.appendValue(n,r,je,be.NORMAL)}else{this.appendValue(n,r,je,be.EXCEEDS_PAD)}break;case"M":case"Q":switch(r){case 1:this.appendValue(n);break;case 2:this.appendValue(n,2);break;case 3:this.appendText(n,Se.SHORT);break;case 4:this.appendText(n,Se.FULL);break;case 5:this.appendText(n,Se.NARROW);break;default:throw new a("Too many pattern letters: ".concat(t))}break;case"L":case"q":switch(r){case 1:this.appendValue(n);break;case 2:this.appendValue(n,2);break;case 3:this.appendText(n,Se.SHORT_STANDALONE);break;case 4:this.appendText(n,Se.FULL_STANDALONE);break;case 5:this.appendText(n,Se.NARROW_STANDALONE);break;default:throw new a("Too many pattern letters: ".concat(t))}break;case"e":switch(r){case 1:case 2:this.appendWeekField("e",r);break;case 3:this.appendText(n,Se.SHORT);break;case 4:this.appendText(n,Se.FULL);break;case 5:this.appendText(n,Se.NARROW);break;default:throw new a("Too many pattern letters: ".concat(t))}break;case"c":switch(r){case 1:this.appendWeekField("c",r);break;case 2:throw new a("Invalid number of pattern letters: ".concat(t));case 3:this.appendText(n,Se.SHORT_STANDALONE);break;case 4:this.appendText(n,Se.FULL_STANDALONE);break;case 5:this.appendText(n,Se.NARROW_STANDALONE);break;default:throw new a("Too many pattern letters: ".concat(t))}break;case"a":if(r===1){this.appendText(n,Se.SHORT)}else{throw new a("Too many pattern letters: ".concat(t))}break;case"E":case"G":switch(r){case 1:case 2:case 3:this.appendText(n,Se.SHORT);break;case 4:this.appendText(n,Se.FULL);break;case 5:this.appendText(n,Se.NARROW);break;default:throw new a("Too many pattern letters: ".concat(t))}break;case"S":this.appendFraction(D.NANO_OF_SECOND,r,r,false);break;case"F":if(r===1){this.appendValue(n)}else{throw new a("Too many pattern letters: ".concat(t))}break;case"d":case"h":case"H":case"k":case"K":case"m":case"s":if(r===1){this.appendValue(n)}else if(r===2){this.appendValue(n,r)}else{throw new a("Too many pattern letters: ".concat(t))}break;case"D":if(r===1){this.appendValue(n)}else if(r<=3){this.appendValue(n,r)}else{throw new a("Too many pattern letters: ".concat(t))}break;default:if(r===1){this.appendValue(n)}else{this.appendValue(n,r)}break}}},{key:"padNext",value:function padNext(){if(arguments.length===1){return this._padNext1.apply(this,arguments)}else{return this._padNext2.apply(this,arguments)}}},{key:"_padNext1",value:function _padNext1(t){return this._padNext2(t," ")}},{key:"_padNext2",value:function _padNext2(t,r){if(t<1){throw new a("The pad width must be at least one but was ".concat(t))}this._active._padNextWidth=t;this._active._padNextChar=r;this._active._valueParserIndex=-1;return this}},{key:"optionalStart",value:function optionalStart(){this._active._valueParserIndex=-1;this._active=DateTimeFormatterBuilder._of(this._active,true);return this}},{key:"optionalEnd",value:function optionalEnd(){if(this._active._parent==null){throw new s("Cannot call optionalEnd() as there was no previous call to optionalStart()")}if(this._active._printerParsers.length>0){var t=new Ce(this._active._printerParsers,this._active._optional);this._active=this._active._parent;this._appendInternal(t)}else{this._active=this._active._parent}return this}},{key:"_appendInternal",value:function _appendInternal(t){assert(t!=null);if(this._active._padNextWidth>0){if(t!=null){t=new Ne(t,this._active._padNextWidth,this._active._padNextChar)}this._active._padNextWidth=0;this._active._padNextChar=0}this._active._printerParsers.push(t);this._active._valueParserIndex=-1;return this._active._printerParsers.length-1}},{key:"appendLiteral",value:function appendLiteral(t){assert(t!=null);if(t.length>0){if(t.length===1){this._appendInternalPrinterParser(new Te(t.charAt(0)))}else{this._appendInternalPrinterParser(new De(t))}}return this}},{key:"_appendInternalPrinterParser",value:function _appendInternalPrinterParser(t){assert(t!=null);if(this._active._padNextWidth>0){if(t!=null){t=new Ne(t,this._active._padNextWidth,this._active._padNextChar)}this._active._padNextWidth=0;this._active._padNextChar=0}this._active._printerParsers.push(t);this._active._valueParserIndex=-1;return this._active._printerParsers.length-1}},{key:"append",value:function append(t){requireNonNull(t,"formatter");this._appendInternal(t._toPrinterParser(false));return this}},{key:"toFormatter",value:function toFormatter(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:G.SMART;while(this._active._parent!=null){this.optionalEnd()}var r=new Ce(this._printerParsers,false);return new We(r,null,Ee.STANDARD,t,null,null,null)}}],[{key:"_of",value:function _of(t,r){requireNonNull(t,"parent");requireNonNull(r,"optional");var n=new DateTimeFormatterBuilder;n._parent=t;n._optional=r;return n}}]);return DateTimeFormatterBuilder}();var ze=146097*25*86400;var Ve=(146097*5-(30*365+7))*86400;var Ye=function(){function InstantPrinterParser(t){_classCallCheck(this,InstantPrinterParser);this.fractionalDigits=t}_createClass(InstantPrinterParser,[{key:"print",value:function print(t,r){var n=t.getValue(D.INSTANT_SECONDS);var i=0;if(t.temporal().isSupported(D.NANO_OF_SECOND)){i=t.temporal().getLong(D.NANO_OF_SECOND)}if(n==null){return false}var o=n;var a=D.NANO_OF_SECOND.checkValidIntValue(i);if(o>=-Ve){var s=o-ze+Ve;var c=p.floorDiv(s,ze)+1;var u=p.floorMod(s,ze);var l=mt.ofEpochSecond(u-Ve,0,te.UTC);if(c>0){r.append("+").append(c)}r.append(l);if(l.second()===0){r.append(":00")}}else{var d=o+Ve;var g=p.intDiv(d,ze);var v=p.intMod(d,ze);var E=mt.ofEpochSecond(v-Ve,0,te.UTC);var S=r.length();r.append(E);if(E.second()===0){r.append(":00")}if(g<0){if(E.year()===-1e4){r.replace(S,S+2,"".concat(g-1))}else if(v===0){r.insert(S,g)}else{r.insert(S+1,Math.abs(g))}}}if(this.fractionalDigits===-2){if(a!==0){r.append(".");if(p.intMod(a,1e6)===0){r.append("".concat(p.intDiv(a,1e6)+1e3).substring(1))}else if(p.intMod(a,1e3)===0){r.append("".concat(p.intDiv(a,1e3)+1e6).substring(1))}else{r.append("".concat(a+1e9).substring(1))}}}else if(this.fractionalDigits>0||this.fractionalDigits===-1&&a>0){r.append(".");var w=1e8;for(var x=0;this.fractionalDigits===-1&&a>0||x<this.fractionalDigits;x++){var N=p.intDiv(a,w);r.append(N);a=a-N*w;w=p.intDiv(w,10)}}r.append("Z");return true}},{key:"parse",value:function parse(t,r,n){var i=t.copy();var o=this.fractionalDigits<0?0:this.fractionalDigits;var a=this.fractionalDigits<0?9:this.fractionalDigits;var s=(new He).append(We.ISO_LOCAL_DATE).appendLiteral("T").appendValue(D.HOUR_OF_DAY,2).appendLiteral(":").appendValue(D.MINUTE_OF_HOUR,2).appendLiteral(":").appendValue(D.SECOND_OF_MINUTE,2).appendFraction(D.NANO_OF_SECOND,o,a,true).appendLiteral("Z").toFormatter()._toPrinterParser(false);var c=s.parse(i,r,n);if(c<0){return c}var u=i.getParsed(D.YEAR);var l=i.getParsed(D.MONTH_OF_YEAR);var d=i.getParsed(D.DAY_OF_MONTH);var g=i.getParsed(D.HOUR_OF_DAY);var v=i.getParsed(D.MINUTE_OF_HOUR);var E=i.getParsed(D.SECOND_OF_MINUTE);var S=i.getParsed(D.NANO_OF_SECOND);var w=E!=null?E:0;var x=S!=null?S:0;var N=p.intMod(u,1e4);var P=0;if(g===24&&v===0&&w===0&&x===0){g=0;P=1}else if(g===23&&v===59&&w===60){t.setParsedLeapSecond();w=59}var M;try{var L=mt.of(N,l,d,g,v,w,0).plusDays(P);M=L.toEpochSecond(te.UTC);M+=p.safeMultiply(p.intDiv(u,1e4),ze)}catch(t){return~n}var U=c;U=t.setParsedField(D.INSTANT_SECONDS,M,n,U);return t.setParsedField(D.NANO_OF_SECOND,x,n,U)}},{key:"toString",value:function toString(){return"Instant()"}}]);return InstantPrinterParser}();function _init$9(){Re.BASE_DATE=pt.of(2e3,1,1);He.CompositePrinterParser=Ce;He.PadPrinterParserDecorator=Ne;He.SettingsParser=Pe;He.CharLiteralPrinterParser=De;He.StringLiteralPrinterParser=De;He.CharLiteralPrinterParser=Te;He.NumberPrinterParser=Oe;He.ReducedPrinterParser=Re;He.FractionPrinterParser=we;He.OffsetIdPrinterParser=xe;He.ZoneIdPrinterParser=Ue}
/*
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var Ge=function(){function StringBuilder(){_classCallCheck(this,StringBuilder);this._str=""}_createClass(StringBuilder,[{key:"append",value:function append(t){this._str+=t;return this}},{key:"appendChar",value:function appendChar(t){this._str+=t[0];return this}},{key:"insert",value:function insert(t,r){this._str=this._str.slice(0,t)+r+this._str.slice(t);return this}},{key:"replace",value:function replace(t,r,n){this._str=this._str.slice(0,t)+n+this._str.slice(r);return this}},{key:"length",value:function length(){return this._str.length}},{key:"setLength",value:function setLength(t){this._str=this._str.slice(0,t);return this}},{key:"toString",value:function toString(){return this._str}}]);return StringBuilder}();var We=function(){function DateTimeFormatter(t,r,n,i,o){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:ot.INSTANCE;var s=arguments.length>6?arguments[6]:undefined;_classCallCheck(this,DateTimeFormatter);assert(t!=null);assert(n!=null);assert(i!=null);this._printerParser=t;this._locale=r;this._decimalStyle=n;this._resolverStyle=i;this._resolverFields=o;this._chrono=a;this._zone=s}_createClass(DateTimeFormatter,[{key:"locale",value:function locale(){return this._locale}},{key:"decimalStyle",value:function decimalStyle(){return this._decimalStyle}},{key:"chronology",value:function chronology(){return this._chrono}},{key:"withChronology",value:function withChronology(t){if(this._chrono!=null&&this._chrono.equals(t)){return this}return new DateTimeFormatter(this._printerParser,this._locale,this._decimalStyle,this._resolverStyle,this._resolverFields,t,this._zone)}},{key:"withLocale",value:function withLocale(){return this}},{key:"withResolverStyle",value:function withResolverStyle(t){requireNonNull(t,"resolverStyle");if(t.equals(this._resolverStyle)){return this}return new DateTimeFormatter(this._printerParser,this._locale,this._decimalStyle,t,this._resolverFields,this._chrono,this._zone)}},{key:"format",value:function format(t){var r=new Ge(32);this._formatTo(t,r);return r.toString()}},{key:"_formatTo",value:function _formatTo(t,r){requireNonNull(t,"temporal");requireNonNull(r,"appendable");var n=new oe(t,this);this._printerParser.print(n,r)}},{key:"parse",value:function parse(t,r){if(arguments.length===1){return this.parse1(t)}else{return this.parse2(t,r)}}},{key:"parse1",value:function parse1(t){requireNonNull(t,"text");try{return this._parseToBuilder(t,null).resolve(this._resolverStyle,this._resolverFields)}catch(r){if(r instanceof n){throw r}else{throw this._createError(t,r)}}}},{key:"parse2",value:function parse2(t,r){requireNonNull(t,"text");requireNonNull(r,"type");try{var i=this._parseToBuilder(t,null).resolve(this._resolverStyle,this._resolverFields);return i.build(r)}catch(r){if(r instanceof n){throw r}else{throw this._createError(t,r)}}}},{key:"_createError",value:function _createError(t,r){var i="";if(t.length>64){i="".concat(t.substring(0,64),"...")}else{i=t}return new n("Text '".concat(i,"' could not be parsed: ").concat(r.message),t,0,r)}},{key:"_parseToBuilder",value:function _parseToBuilder(t,r){var i=r!=null?r:new V(0);var o=this._parseUnresolved0(t,i);if(o==null||i.getErrorIndex()>=0||r==null&&i.getIndex()<t.length){var a="";if(t.length>64){a="".concat(t.substr(0,64).toString(),"...")}else{a=t}if(i.getErrorIndex()>=0){throw new n("Text '".concat(a,"' could not be parsed at index ").concat(i.getErrorIndex()),t,i.getErrorIndex())}else{throw new n("Text '".concat(a,"' could not be parsed, unparsed text found at index ").concat(i.getIndex()),t,i.getIndex())}}return o.toBuilder()}},{key:"parseUnresolved",value:function parseUnresolved(t,r){return this._parseUnresolved0(t,r)}},{key:"_parseUnresolved0",value:function _parseUnresolved0(t,r){assert(t!=null,"text",c);assert(r!=null,"position",c);var n=new ne(this);var i=r.getIndex();i=this._printerParser.parse(n,t,i);if(i<0){r.setErrorIndex(~i);return null}r.setIndex(i);return n.toParsed()}},{key:"_toPrinterParser",value:function _toPrinterParser(t){return this._printerParser.withOptional(t)}},{key:"toString",value:function toString(){var t=this._printerParser.toString();return t.indexOf("[")===0?t:t.substring(1,t.length-1)}}],[{key:"parsedExcessDays",value:function parsedExcessDays(){return DateTimeFormatter.PARSED_EXCESS_DAYS}},{key:"parsedLeapSecond",value:function parsedLeapSecond(){return DateTimeFormatter.PARSED_LEAP_SECOND}},{key:"ofPattern",value:function ofPattern(t){return(new He).appendPattern(t).toFormatter()}}]);return DateTimeFormatter}();function _init$a(){We.ISO_LOCAL_DATE=(new He).appendValue(D.YEAR,4,10,be.EXCEEDS_PAD).appendLiteral("-").appendValue(D.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(D.DAY_OF_MONTH,2).toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_LOCAL_TIME=(new He).appendValue(D.HOUR_OF_DAY,2).appendLiteral(":").appendValue(D.MINUTE_OF_HOUR,2).optionalStart().appendLiteral(":").appendValue(D.SECOND_OF_MINUTE,2).optionalStart().appendFraction(D.NANO_OF_SECOND,0,9,true).toFormatter(G.STRICT);We.ISO_LOCAL_DATE_TIME=(new He).parseCaseInsensitive().append(We.ISO_LOCAL_DATE).appendLiteral("T").append(We.ISO_LOCAL_TIME).toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_INSTANT=(new He).parseCaseInsensitive().appendInstant().toFormatter(G.STRICT);We.ISO_OFFSET_DATE_TIME=(new He).parseCaseInsensitive().append(We.ISO_LOCAL_DATE_TIME).appendOffsetId().toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_ZONED_DATE_TIME=(new He).append(We.ISO_OFFSET_DATE_TIME).optionalStart().appendLiteral("[").parseCaseSensitive().appendZoneId().appendLiteral("]").toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.BASIC_ISO_DATE=(new He).appendValue(D.YEAR,4,10,be.EXCEEDS_PAD).appendValue(D.MONTH_OF_YEAR,2).appendValue(D.DAY_OF_MONTH,2).toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_OFFSET_DATE=(new He).parseCaseInsensitive().append(We.ISO_LOCAL_DATE).appendOffsetId().toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_OFFSET_TIME=(new He).parseCaseInsensitive().append(We.ISO_LOCAL_TIME).appendOffsetId().toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_ORDINAL_DATE=(new He).appendValue(D.YEAR,4,10,be.EXCEEDS_PAD).appendLiteral("-").appendValue(D.DAY_OF_YEAR).toFormatter(G.STRICT);We.ISO_WEEK_DATE=(new He).appendValue(D.YEAR,4,10,be.EXCEEDS_PAD).appendLiteral("-W").appendValue(D.ALIGNED_WEEK_OF_YEAR).appendLiteral("-").appendValue(D.DAY_OF_WEEK).toFormatter(G.STRICT);We.ISO_DATE=(new He).parseCaseInsensitive().append(We.ISO_LOCAL_DATE).optionalStart().appendOffsetId().optionalEnd().toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.ISO_TIME=(new He).parseCaseInsensitive().append(We.ISO_LOCAL_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(G.STRICT);We.ISO_DATE_TIME=(new He).append(We.ISO_LOCAL_DATE_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(G.STRICT).withChronology(ot.INSTANCE);We.PARSED_EXCESS_DAYS=createTemporalQuery("PARSED_EXCESS_DAYS",(function(t){if(t instanceof re){return t.excessDays}else{return z.ZERO}}));We.PARSED_LEAP_SECOND=createTemporalQuery("PARSED_LEAP_SECOND",(function(t){if(t instanceof re){return t.leapSecond}else{return false}}))}var $e=function(t){_inherits(MonthDay,t);var n=_createSuper(MonthDay);function MonthDay(t,r){var i;_classCallCheck(this,MonthDay);i=n.call(this);i._month=p.safeToInt(t);i._day=p.safeToInt(r);return i}_createClass(MonthDay,[{key:"monthValue",value:function monthValue(){return this._month}},{key:"month",value:function month(){return F.of(this._month)}},{key:"dayOfMonth",value:function dayOfMonth(){return this._day}},{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t===D.MONTH_OF_YEAR||t===D.DAY_OF_MONTH}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(t===D.MONTH_OF_YEAR){return t.range()}else if(t===D.DAY_OF_MONTH){return P.of(1,this.month().minLength(),this.month().maxLength())}return _get(_getPrototypeOf(MonthDay.prototype),"range",this).call(this,t)}},{key:"get",value:function get(t){return this.range(t).checkValidIntValue(this.getLong(t),t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");if(t instanceof D){switch(t){case D.DAY_OF_MONTH:return this._day;case D.MONTH_OF_YEAR:return this._month}throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"isValidYear",value:function isValidYear(t){return(this._day===29&&this._month===2&&Xe.isLeap(t)===false)===false}},{key:"withMonth",value:function withMonth(t){return this.with(F.of(t))}},{key:"with",value:function _with(t){requireNonNull(t,"month");if(t.value()===this._month){return this}var r=Math.min(this._day,t.maxLength());return new MonthDay(t.value(),r)}},{key:"withDayOfMonth",value:function withDayOfMonth(t){if(t===this._day){return this}return MonthDay.of(this._month,t)}},{key:"query",value:function query(t){requireNonNull(t,"query");requireInstance(t,U,"query");if(t===M.chronology()){return ot.INSTANCE}return _get(_getPrototypeOf(MonthDay.prototype),"query",this).call(this,t)}},{key:"adjustInto",value:function adjustInto(t){requireNonNull(t,"temporal");t=t.with(D.MONTH_OF_YEAR,this._month);return t.with(D.DAY_OF_MONTH,Math.min(t.range(D.DAY_OF_MONTH).maximum(),this._day))}},{key:"atYear",value:function atYear(t){return pt.of(t,this._month,this.isValidYear(t)?this._day:28)}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,MonthDay,"other");var r=this._month-t.monthValue();if(r===0){r=this._day-t.dayOfMonth()}return r}},{key:"isAfter",value:function isAfter(t){requireNonNull(t,"other");requireInstance(t,MonthDay,"other");return this.compareTo(t)>0}},{key:"isBefore",value:function isBefore(t){requireNonNull(t,"other");requireInstance(t,MonthDay,"other");return this.compareTo(t)<0}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof MonthDay){var r=t;return this.monthValue()===r.monthValue()&&this.dayOfMonth()===r.dayOfMonth()}return false}},{key:"toString",value:function toString(){return"--".concat(this._month<10?"0":"").concat(this._month).concat(this._day<10?"-0":"-").concat(this._day)}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){requireNonNull(t,"formatter");requireInstance(t,We,"formatter");return t.format(this)}}],[{key:"now",value:function now(t){if(arguments.length===0){return MonthDay.now0()}else if(arguments.length===1&&t instanceof J){return MonthDay.nowZoneId(t)}else{return MonthDay.nowClock(t)}}},{key:"now0",value:function now0(){return this.nowClock(Et.systemDefaultZone())}},{key:"nowZoneId",value:function nowZoneId(t){requireNonNull(t,"zone");return this.nowClock(Et.system(t))}},{key:"nowClock",value:function nowClock(t){requireNonNull(t,"clock");var r=pt.now(t);return MonthDay.of(r.month(),r.dayOfMonth())}},{key:"of",value:function of(t,r){if(arguments.length===2&&t instanceof F){return MonthDay.ofMonthNumber(t,r)}else{return MonthDay.ofNumberNumber(t,r)}}},{key:"ofMonthNumber",value:function ofMonthNumber(t,n){requireNonNull(t,"month");D.DAY_OF_MONTH.checkValidValue(n);if(n>t.maxLength()){throw new r("Illegal value for DayOfMonth field, value ".concat(n," is not valid for month ").concat(t.toString()))}return new MonthDay(t.value(),n)}},{key:"ofNumberNumber",value:function ofNumberNumber(t,r){requireNonNull(t,"month");requireNonNull(r,"dayOfMonth");return MonthDay.of(F.of(t),r)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");requireInstance(t,L,"temporal");if(t instanceof MonthDay){return t}try{return MonthDay.of(t.get(D.MONTH_OF_YEAR),t.get(D.DAY_OF_MONTH))}catch(n){throw new r("Unable to obtain MonthDay from TemporalAccessor: ".concat(t,", type ").concat(t&&t.constructor!=null?t.constructor.name:""))}}},{key:"parse",value:function parse(t,r){if(arguments.length===1){return MonthDay.parseString(t)}else{return MonthDay.parseStringFormatter(t,r)}}},{key:"parseString",value:function parseString(t){return MonthDay.parseStringFormatter(t,Ke)}},{key:"parseStringFormatter",value:function parseStringFormatter(t,r){requireNonNull(t,"text");requireNonNull(r,"formatter");requireInstance(r,We,"formatter");return r.parse(t,MonthDay.FROM)}}]);return MonthDay}(L);var Ke;function _init$b(){Ke=(new He).appendLiteral("--").appendValue(D.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(D.DAY_OF_MONTH,2).toFormatter();$e.FROM=createTemporalQuery("MonthDay.FROM",(function(t){return $e.from(t)}))}var Je=function(t){_inherits(YearMonth,t);var n=_createSuper(YearMonth);function YearMonth(t,r){var i;_classCallCheck(this,YearMonth);i=n.call(this);i._year=p.safeToInt(t);i._month=p.safeToInt(r);return i}_createClass(YearMonth,[{key:"isSupported",value:function isSupported(t){if(arguments.length===1&&t instanceof N){return this.isSupportedField(t)}else{return this.isSupportedUnit(t)}}},{key:"isSupportedField",value:function isSupportedField(t){if(t instanceof D){return t===D.YEAR||t===D.MONTH_OF_YEAR||t===D.PROLEPTIC_MONTH||t===D.YEAR_OF_ERA||t===D.ERA}return t!=null&&t.isSupportedBy(this)}},{key:"isSupportedUnit",value:function isSupportedUnit(t){if(t instanceof x){return t===x.MONTHS||t===x.YEARS||t===x.DECADES||t===x.CENTURIES||t===x.MILLENNIA||t===x.ERAS}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(t===D.YEAR_OF_ERA){return this.year()<=0?P.of(1,Xe.MAX_VALUE+1):P.of(1,Xe.MAX_VALUE)}return _get(_getPrototypeOf(YearMonth.prototype),"range",this).call(this,t)}},{key:"get",value:function get(t){requireNonNull(t,"field");requireInstance(t,N,"field");return this.range(t).checkValidIntValue(this.getLong(t),t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");requireInstance(t,N,"field");if(t instanceof D){switch(t){case D.MONTH_OF_YEAR:return this._month;case D.PROLEPTIC_MONTH:return this._getProlepticMonth();case D.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case D.YEAR:return this._year;case D.ERA:return this._year<1?0:1}throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"_getProlepticMonth",value:function _getProlepticMonth(){return p.safeAdd(p.safeMultiply(this._year,12),this._month-1)}},{key:"year",value:function year(){return this._year}},{key:"monthValue",value:function monthValue(){return this._month}},{key:"month",value:function month(){return F.of(this._month)}},{key:"isLeapYear",value:function isLeapYear(){return ot.isLeapYear(this._year)}},{key:"isValidDay",value:function isValidDay(t){return t>=1&&t<=this.lengthOfMonth()}},{key:"lengthOfMonth",value:function lengthOfMonth(){return this.month().length(this.isLeapYear())}},{key:"lengthOfYear",value:function lengthOfYear(){return this.isLeapYear()?366:365}},{key:"with",value:function _with(t,r){if(arguments.length===1){return this._withAdjuster(t)}else{return this._withField(t,r)}}},{key:"_withField",value:function _withField(t,r){requireNonNull(t,"field");requireInstance(t,N,"field");if(t instanceof D){var n=t;n.checkValidValue(r);switch(n){case D.MONTH_OF_YEAR:return this.withMonth(r);case D.PROLEPTIC_MONTH:return this.plusMonths(r-this.getLong(D.PROLEPTIC_MONTH));case D.YEAR_OF_ERA:return this.withYear(this._year<1?1-r:r);case D.YEAR:return this.withYear(r);case D.ERA:return this.getLong(D.ERA)===r?this:this.withYear(1-this._year)}throw new i("Unsupported field: ".concat(t))}return t.adjustInto(this,r)}},{key:"withYear",value:function withYear(t){D.YEAR.checkValidValue(t);return new YearMonth(t,this._month)}},{key:"withMonth",value:function withMonth(t){D.MONTH_OF_YEAR.checkValidValue(t);return new YearMonth(this._year,t)}},{key:"_plusUnit",value:function _plusUnit(t,r){requireNonNull(r,"unit");requireInstance(r,E,"unit");if(r instanceof x){switch(r){case x.MONTHS:return this.plusMonths(t);case x.YEARS:return this.plusYears(t);case x.DECADES:return this.plusYears(p.safeMultiply(t,10));case x.CENTURIES:return this.plusYears(p.safeMultiply(t,100));case x.MILLENNIA:return this.plusYears(p.safeMultiply(t,1e3));case x.ERAS:return this.with(D.ERA,p.safeAdd(this.getLong(D.ERA),t))}throw new i("Unsupported unit: ".concat(r))}return r.addTo(this,t)}},{key:"plusYears",value:function plusYears(t){if(t===0){return this}var r=D.YEAR.checkValidIntValue(this._year+t);return this.withYear(r)}},{key:"plusMonths",value:function plusMonths(t){if(t===0){return this}var r=this._year*12+(this._month-1);var n=r+t;var i=D.YEAR.checkValidIntValue(p.floorDiv(n,12));var o=p.floorMod(n,12)+1;return new YearMonth(i,o)}},{key:"minusYears",value:function minusYears(t){return t===p.MIN_SAFE_INTEGER?this.plusYears(p.MIN_SAFE_INTEGER).plusYears(1):this.plusYears(-t)}},{key:"minusMonths",value:function minusMonths(t){return t===p.MIN_SAFE_INTEGER?this.plusMonths(Math.MAX_SAFE_INTEGER).plusMonths(1):this.plusMonths(-t)}},{key:"query",value:function query(t){requireNonNull(t,"query");requireInstance(t,U,"query");if(t===M.chronology()){return ot.INSTANCE}else if(t===M.precision()){return x.MONTHS}else if(t===M.localDate()||t===M.localTime()||t===M.zone()||t===M.zoneId()||t===M.offset()){return null}return _get(_getPrototypeOf(YearMonth.prototype),"query",this).call(this,t)}},{key:"adjustInto",value:function adjustInto(t){requireNonNull(t,"temporal");requireInstance(t,W,"temporal");return t.with(D.PROLEPTIC_MONTH,this._getProlepticMonth())}},{key:"until",value:function until(t,r){requireNonNull(t,"endExclusive");requireNonNull(r,"unit");requireInstance(t,W,"endExclusive");requireInstance(r,E,"unit");var n=YearMonth.from(t);if(r instanceof x){var o=n._getProlepticMonth()-this._getProlepticMonth();switch(r){case x.MONTHS:return o;case x.YEARS:return o/12;case x.DECADES:return o/120;case x.CENTURIES:return o/1200;case x.MILLENNIA:return o/12e3;case x.ERAS:return n.getLong(D.ERA)-this.getLong(D.ERA)}throw new i("Unsupported unit: ".concat(r))}return r.between(this,n)}},{key:"atDay",value:function atDay(t){return pt.of(this._year,this._month,t)}},{key:"atEndOfMonth",value:function atEndOfMonth(){return pt.of(this._year,this._month,this.lengthOfMonth())}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,YearMonth,"other");var r=this._year-t.year();if(r===0){r=this._month-t.monthValue()}return r}},{key:"isAfter",value:function isAfter(t){return this.compareTo(t)>0}},{key:"isBefore",value:function isBefore(t){return this.compareTo(t)<0}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof YearMonth){var r=t;return this.year()===r.year()&&this.monthValue()===r.monthValue()}return false}},{key:"toString",value:function toString(){return Ze.format(this)}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){requireNonNull(t,"formatter");return t.format(this)}}],[{key:"now",value:function now(t){if(arguments.length===0){return YearMonth.now0()}else if(arguments.length===1&&t instanceof J){return YearMonth.nowZoneId(t)}else{return YearMonth.nowClock(t)}}},{key:"now0",value:function now0(){return YearMonth.nowClock(Et.systemDefaultZone())}},{key:"nowZoneId",value:function nowZoneId(t){return YearMonth.nowClock(Et.system(t))}},{key:"nowClock",value:function nowClock(t){var r=pt.now(t);return YearMonth.of(r.year(),r.month())}},{key:"of",value:function of(t,r){if(arguments.length===2&&r instanceof F){return YearMonth.ofNumberMonth(t,r)}else{return YearMonth.ofNumberNumber(t,r)}}},{key:"ofNumberMonth",value:function ofNumberMonth(t,r){requireNonNull(r,"month");requireInstance(r,F,"month");return YearMonth.ofNumberNumber(t,r.value())}},{key:"ofNumberNumber",value:function ofNumberNumber(t,r){requireNonNull(t,"year");requireNonNull(r,"month");D.YEAR.checkValidValue(t);D.MONTH_OF_YEAR.checkValidValue(r);return new YearMonth(t,r)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");if(t instanceof YearMonth){return t}try{return YearMonth.of(t.get(D.YEAR),t.get(D.MONTH_OF_YEAR))}catch(n){throw new r("Unable to obtain YearMonth from TemporalAccessor: ".concat(t,", type ").concat(t&&t.constructor!=null?t.constructor.name:""))}}},{key:"parse",value:function parse(t,r){if(arguments.length===1){return YearMonth.parseString(t)}else{return YearMonth.parseStringFormatter(t,r)}}},{key:"parseString",value:function parseString(t){return YearMonth.parseStringFormatter(t,Ze)}},{key:"parseStringFormatter",value:function parseStringFormatter(t,r){requireNonNull(r,"formatter");return r.parse(t,YearMonth.FROM)}}]);return YearMonth}(W);var Ze;function _init$c(){Ze=(new He).appendValue(D.YEAR,4,10,be.EXCEEDS_PAD).appendLiteral("-").appendValue(D.MONTH_OF_YEAR,2).toFormatter();Je.FROM=createTemporalQuery("YearMonth.FROM",(function(t){return Je.from(t)}))}var Xe=function(t){_inherits(Year,t);var n=_createSuper(Year);function Year(t){var r;_classCallCheck(this,Year);r=n.call(this);r._year=p.safeToInt(t);return r}_createClass(Year,[{key:"value",value:function value(){return this._year}},{key:"isSupported",value:function isSupported(t){if(arguments.length===1&&t instanceof N){return this.isSupportedField(t)}else{return this.isSupportedUnit(t)}}},{key:"isSupportedField",value:function isSupportedField(t){if(t instanceof D){return t===D.YEAR||t===D.YEAR_OF_ERA||t===D.ERA}return t!=null&&t.isSupportedBy(this)}},{key:"isSupportedUnit",value:function isSupportedUnit(t){if(t instanceof x){return t===x.YEARS||t===x.DECADES||t===x.CENTURIES||t===x.MILLENNIA||t===x.ERAS}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(this.isSupported(t)){return t.range()}else if(t instanceof D){throw new i("Unsupported field: ".concat(t))}return _get(_getPrototypeOf(Year.prototype),"range",this).call(this,t)}},{key:"get",value:function get(t){return this.range(t).checkValidIntValue(this.getLong(t),t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");if(t instanceof D){switch(t){case D.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case D.YEAR:return this._year;case D.ERA:return this._year<1?0:1}throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"isLeap",value:function isLeap(){return Year.isLeap(this._year)}},{key:"_withField",value:function _withField(t,r){requireNonNull(t,"field");requireInstance(t,N,"field");if(t instanceof D){t.checkValidValue(r);switch(t){case D.YEAR_OF_ERA:return Year.of(this._year<1?1-r:r);case D.YEAR:return Year.of(r);case D.ERA:return this.getLong(D.ERA)===r?this:Year.of(1-this._year)}throw new i("Unsupported field: ".concat(t))}return t.adjustInto(this,r)}},{key:"_plusUnit",value:function _plusUnit(t,r){requireNonNull(t,"amountToAdd");requireNonNull(r,"unit");requireInstance(r,E,"unit");if(r instanceof x){switch(r){case x.YEARS:return this.plusYears(t);case x.DECADES:return this.plusYears(p.safeMultiply(t,10));case x.CENTURIES:return this.plusYears(p.safeMultiply(t,100));case x.MILLENNIA:return this.plusYears(p.safeMultiply(t,1e3));case x.ERAS:return this.with(D.ERA,p.safeAdd(this.getLong(D.ERA),t))}throw new i("Unsupported unit: ".concat(r))}return r.addTo(this,t)}},{key:"plusYears",value:function plusYears(t){if(t===0){return this}return Year.of(D.YEAR.checkValidIntValue(p.safeAdd(this._year,t)))}},{key:"minusYears",value:function minusYears(t){return t===p.MIN_SAFE_INTEGER?this.plusYears(p.MAX_SAFE_INTEGER).plusYears(1):this.plusYears(-t)}},{key:"adjustInto",value:function adjustInto(t){requireNonNull(t,"temporal");return t.with(D.YEAR,this._year)}},{key:"isValidMonthDay",value:function isValidMonthDay(t){return t!=null&&t.isValidYear(this._year)}},{key:"length",value:function length(){return this.isLeap()?366:365}},{key:"atDay",value:function atDay(t){return pt.ofYearDay(this._year,t)}},{key:"atMonth",value:function atMonth(t){if(arguments.length===1&&t instanceof F){return this.atMonthMonth(t)}else{return this.atMonthNumber(t)}}},{key:"atMonthMonth",value:function atMonthMonth(t){requireNonNull(t,"month");requireInstance(t,F,"month");return Je.of(this._year,t)}},{key:"atMonthNumber",value:function atMonthNumber(t){requireNonNull(t,"month");return Je.of(this._year,t)}},{key:"atMonthDay",value:function atMonthDay(t){requireNonNull(t,"monthDay");requireInstance(t,$e,"monthDay");return t.atYear(this._year)}},{key:"query",value:function query(t){requireNonNull(t,"query()");requireInstance(t,U,"query()");if(t===M.chronology()){return ot.INSTANCE}else if(t===M.precision()){return x.YEARS}else if(t===M.localDate()||t===M.localTime()||t===M.zone()||t===M.zoneId()||t===M.offset()){return null}return _get(_getPrototypeOf(Year.prototype),"query",this).call(this,t)}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,Year,"other");return this._year-t._year}},{key:"isAfter",value:function isAfter(t){requireNonNull(t,"other");requireInstance(t,Year,"other");return this._year>t._year}},{key:"isBefore",value:function isBefore(t){requireNonNull(t,"other");requireInstance(t,Year,"other");return this._year<t._year}},{key:"format",value:function format(t){requireNonNull(t,"formatter");requireInstance(t,We,"formatter");return t.format(this)}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof Year){return this.value()===t.value()}return false}},{key:"toString",value:function toString(){return"".concat(this._year)}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"until",value:function until(t,r){var n=Year.from(t);if(r instanceof x){var o=n.value()-this.value();switch(r){case x.YEARS:return o;case x.DECADES:return p.intDiv(o,10);case x.CENTURIES:return p.intDiv(o,100);case x.MILLENNIA:return p.intDiv(o,1e3);case x.ERAS:return n.getLong(D.ERA)-this.getLong(D.ERA)}throw new i("Unsupported unit: ".concat(r))}return r.between(this,n)}}],[{key:"now",value:function now(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;if(t===undefined){return Year.now0()}else if(t instanceof J){return Year.nowZoneId(t)}else{return Year.nowClock(t)}}},{key:"now0",value:function now0(){return Year.nowClock(Et.systemDefaultZone())}},{key:"nowZoneId",value:function nowZoneId(t){requireNonNull(t,"zone");requireInstance(t,J,"zone");return Year.nowClock(Et.system(t))}},{key:"nowClock",value:function nowClock(t){requireNonNull(t,"clock");requireInstance(t,Et,"clock");var r=pt.now(t);return Year.of(r.year())}},{key:"of",value:function of(t){requireNonNull(t,"isoYear");D.YEAR.checkValidValue(t);return new Year(t)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");requireInstance(t,L,"temporal");if(t instanceof Year){return t}try{return Year.of(t.get(D.YEAR))}catch(n){throw new r("Unable to obtain Year from TemporalAccessor: ".concat(t,", type ").concat(t&&t.constructor!=null?t.constructor.name:""))}}},{key:"parse",value:function parse(t,r){if(arguments.length<=1){return Year.parseText(t)}else{return Year.parseTextFormatter(t,r)}}},{key:"parseText",value:function parseText(t){requireNonNull(t,"text");return Year.parse(t,Qe)}},{key:"parseTextFormatter",value:function parseTextFormatter(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Qe;requireNonNull(t,"text");requireNonNull(r,"formatter");requireInstance(r,We,"formatter");return r.parse(t,Year.FROM)}},{key:"isLeap",value:function isLeap(t){return p.intMod(t,4)===0&&(p.intMod(t,100)!==0||p.intMod(t,400)===0)}}]);return Year}(W);var Qe;function _init$d(){Xe.MIN_VALUE=w.MIN_VALUE;Xe.MAX_VALUE=w.MAX_VALUE;Qe=(new He).appendValue(D.YEAR,4,10,be.EXCEEDS_PAD).toFormatter();Xe.FROM=createTemporalQuery("Year.FROM",(function(t){return Xe.from(t)}))}var et=function(){function TemporalAdjuster(){_classCallCheck(this,TemporalAdjuster)}_createClass(TemporalAdjuster,[{key:"adjustInto",value:function adjustInto(t){abstractMethodFail("adjustInto")}}]);return TemporalAdjuster}();var tt=function(){function TemporalAdjusters(){_classCallCheck(this,TemporalAdjusters)}_createClass(TemporalAdjusters,null,[{key:"firstDayOfMonth",value:function firstDayOfMonth(){return rt.FIRST_DAY_OF_MONTH}},{key:"lastDayOfMonth",value:function lastDayOfMonth(){return rt.LAST_DAY_OF_MONTH}},{key:"firstDayOfNextMonth",value:function firstDayOfNextMonth(){return rt.FIRST_DAY_OF_NEXT_MONTH}},{key:"firstDayOfYear",value:function firstDayOfYear(){return rt.FIRST_DAY_OF_YEAR}},{key:"lastDayOfYear",value:function lastDayOfYear(){return rt.LAST_DAY_OF_YEAR}},{key:"firstDayOfNextYear",value:function firstDayOfNextYear(){return rt.FIRST_DAY_OF_NEXT_YEAR}},{key:"firstInMonth",value:function firstInMonth(t){requireNonNull(t,"dayOfWeek");return new nt(1,t)}},{key:"lastInMonth",value:function lastInMonth(t){requireNonNull(t,"dayOfWeek");return new nt(-1,t)}},{key:"dayOfWeekInMonth",value:function dayOfWeekInMonth(t,r){requireNonNull(r,"dayOfWeek");return new nt(t,r)}},{key:"next",value:function next(t){return new it(2,t)}},{key:"nextOrSame",value:function nextOrSame(t){return new it(0,t)}},{key:"previous",value:function previous(t){return new it(3,t)}},{key:"previousOrSame",value:function previousOrSame(t){return new it(1,t)}}]);return TemporalAdjusters}();var rt=function(t){_inherits(Impl,t);var r=_createSuper(Impl);function Impl(t){var n;_classCallCheck(this,Impl);n=r.call(this);n._ordinal=t;return n}_createClass(Impl,[{key:"adjustInto",value:function adjustInto(t){switch(this._ordinal){case 0:return t.with(D.DAY_OF_MONTH,1);case 1:return t.with(D.DAY_OF_MONTH,t.range(D.DAY_OF_MONTH).maximum());case 2:return t.with(D.DAY_OF_MONTH,1).plus(1,x.MONTHS);case 3:return t.with(D.DAY_OF_YEAR,1);case 4:return t.with(D.DAY_OF_YEAR,t.range(D.DAY_OF_YEAR).maximum());case 5:return t.with(D.DAY_OF_YEAR,1).plus(1,x.YEARS)}throw new s("Unreachable")}}]);return Impl}(et);rt.FIRST_DAY_OF_MONTH=new rt(0);rt.LAST_DAY_OF_MONTH=new rt(1);rt.FIRST_DAY_OF_NEXT_MONTH=new rt(2);rt.FIRST_DAY_OF_YEAR=new rt(3);rt.LAST_DAY_OF_YEAR=new rt(4);rt.FIRST_DAY_OF_NEXT_YEAR=new rt(5);var nt=function(t){_inherits(DayOfWeekInMonth,t);var r=_createSuper(DayOfWeekInMonth);function DayOfWeekInMonth(t,n){var i;_classCallCheck(this,DayOfWeekInMonth);i=r.call(this);i._ordinal=t;i._dowValue=n.value();return i}_createClass(DayOfWeekInMonth,[{key:"adjustInto",value:function adjustInto(t){if(this._ordinal>=0){var r=t.with(D.DAY_OF_MONTH,1);var n=r.get(D.DAY_OF_WEEK);var i=p.intMod(this._dowValue-n+7,7);i+=(this._ordinal-1)*7;return r.plus(i,x.DAYS)}else{var o=t.with(D.DAY_OF_MONTH,t.range(D.DAY_OF_MONTH).maximum());var a=o.get(D.DAY_OF_WEEK);var s=this._dowValue-a;s=s===0?0:s>0?s-7:s;s-=(-this._ordinal-1)*7;return o.plus(s,x.DAYS)}}}]);return DayOfWeekInMonth}(et);var it=function(t){_inherits(RelativeDayOfWeek,t);var r=_createSuper(RelativeDayOfWeek);function RelativeDayOfWeek(t,n){var i;_classCallCheck(this,RelativeDayOfWeek);i=r.call(this);requireNonNull(n,"dayOfWeek");i._relative=t;i._dowValue=n.value();return i}_createClass(RelativeDayOfWeek,[{key:"adjustInto",value:function adjustInto(t){var r=t.get(D.DAY_OF_WEEK);if(this._relative<2&&r===this._dowValue){return t}if((this._relative&1)===0){var n=r-this._dowValue;return t.plus(n>=0?7-n:-n,x.DAYS)}else{var i=this._dowValue-r;return t.minus(i>=0?7-i:-i,x.DAYS)}}}]);return RelativeDayOfWeek}(et);var ot=function(t){_inherits(IsoChronology,t);var n=_createSuper(IsoChronology);function IsoChronology(){_classCallCheck(this,IsoChronology);return n.apply(this,arguments)}_createClass(IsoChronology,[{key:"_updateResolveMap",value:function _updateResolveMap(t,n,i){requireNonNull(t,"fieldValues");requireNonNull(n,"field");var o=t.get(n);if(o!=null&&o!==i){throw new r("Invalid state, field: ".concat(n," ").concat(o," conflicts with ").concat(n," ").concat(i))}t.put(n,i)}},{key:"resolveDate",value:function resolveDate(t,n){if(t.containsKey(D.EPOCH_DAY)){return pt.ofEpochDay(t.remove(D.EPOCH_DAY))}var i=t.remove(D.PROLEPTIC_MONTH);if(i!=null){if(n!==G.LENIENT){D.PROLEPTIC_MONTH.checkValidValue(i)}this._updateResolveMap(t,D.MONTH_OF_YEAR,p.floorMod(i,12)+1);this._updateResolveMap(t,D.YEAR,p.floorDiv(i,12))}var o=t.remove(D.YEAR_OF_ERA);if(o!=null){if(n!==G.LENIENT){D.YEAR_OF_ERA.checkValidValue(o)}var a=t.remove(D.ERA);if(a==null){var s=t.get(D.YEAR);if(n===G.STRICT){if(s!=null){this._updateResolveMap(t,D.YEAR,s>0?o:p.safeSubtract(1,o))}else{t.put(D.YEAR_OF_ERA,o)}}else{this._updateResolveMap(t,D.YEAR,s==null||s>0?o:p.safeSubtract(1,o))}}else if(a===1){this._updateResolveMap(t,D.YEAR,o)}else if(a===0){this._updateResolveMap(t,D.YEAR,p.safeSubtract(1,o))}else{throw new r("Invalid value for era: ".concat(a))}}else if(t.containsKey(D.ERA)){D.ERA.checkValidValue(t.get(D.ERA))}if(t.containsKey(D.YEAR)){if(t.containsKey(D.MONTH_OF_YEAR)){if(t.containsKey(D.DAY_OF_MONTH)){var c=D.YEAR.checkValidIntValue(t.remove(D.YEAR));var u=t.remove(D.MONTH_OF_YEAR);var l=t.remove(D.DAY_OF_MONTH);if(n===G.LENIENT){var d=u-1;var g=l-1;return pt.of(c,1,1).plusMonths(d).plusDays(g)}else if(n===G.SMART){D.DAY_OF_MONTH.checkValidValue(l);if(u===4||u===6||u===9||u===11){l=Math.min(l,30)}else if(u===2){l=Math.min(l,F.FEBRUARY.length(Xe.isLeap(c)))}return pt.of(c,u,l)}else{return pt.of(c,u,l)}}}if(t.containsKey(D.DAY_OF_YEAR)){var v=D.YEAR.checkValidIntValue(t.remove(D.YEAR));if(n===G.LENIENT){var E=p.safeSubtract(t.remove(D.DAY_OF_YEAR),1);return pt.ofYearDay(v,1).plusDays(E)}var S=D.DAY_OF_YEAR.checkValidIntValue(t.remove(D.DAY_OF_YEAR));return pt.ofYearDay(v,S)}if(t.containsKey(D.ALIGNED_WEEK_OF_YEAR)){if(t.containsKey(D.ALIGNED_DAY_OF_WEEK_IN_YEAR)){var w=D.YEAR.checkValidIntValue(t.remove(D.YEAR));if(n===G.LENIENT){var x=p.safeSubtract(t.remove(D.ALIGNED_WEEK_OF_YEAR),1);var N=p.safeSubtract(t.remove(D.ALIGNED_DAY_OF_WEEK_IN_YEAR),1);return pt.of(w,1,1).plusWeeks(x).plusDays(N)}var P=D.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(t.remove(D.ALIGNED_WEEK_OF_YEAR));var M=D.ALIGNED_DAY_OF_WEEK_IN_YEAR.checkValidIntValue(t.remove(D.ALIGNED_DAY_OF_WEEK_IN_YEAR));var L=pt.of(w,1,1).plusDays((P-1)*7+(M-1));if(n===G.STRICT&&L.get(D.YEAR)!==w){throw new r("Strict mode rejected date parsed to a different year")}return L}if(t.containsKey(D.DAY_OF_WEEK)){var U=D.YEAR.checkValidIntValue(t.remove(D.YEAR));if(n===G.LENIENT){var B=p.safeSubtract(t.remove(D.ALIGNED_WEEK_OF_YEAR),1);var j=p.safeSubtract(t.remove(D.DAY_OF_WEEK),1);return pt.of(U,1,1).plusWeeks(B).plusDays(j)}var H=D.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(t.remove(D.ALIGNED_WEEK_OF_YEAR));var z=D.DAY_OF_WEEK.checkValidIntValue(t.remove(D.DAY_OF_WEEK));var V=pt.of(U,1,1).plusWeeks(H-1).with(tt.nextOrSame(q.of(z)));if(n===G.STRICT&&V.get(D.YEAR)!==U){throw new r("Strict mode rejected date parsed to a different month")}return V}}}return null}},{key:"date",value:function date(t){return pt.from(t)}}],[{key:"isLeapYear",value:function isLeapYear(t){return(t&3)===0&&(t%100!==0||t%400===0)}}]);return IsoChronology}(g);function _init$e(){ot.INSTANCE=new ot("IsoChronology")}var at=function(t){_inherits(OffsetTime,t);var n=_createSuper(OffsetTime);function OffsetTime(t,r){var i;_classCallCheck(this,OffsetTime);i=n.call(this);requireNonNull(t,"time");requireInstance(t,vt,"time");requireNonNull(r,"offset");requireInstance(r,te,"offset");i._time=t;i._offset=r;return i}_createClass(OffsetTime,[{key:"adjustInto",value:function adjustInto(t){return t.with(D.NANO_OF_DAY,this._time.toNanoOfDay()).with(D.OFFSET_SECONDS,this.offset().totalSeconds())}},{key:"atDate",value:function atDate(t){return ut.of(t,this._time,this._offset)}},{key:"format",value:function format(t){requireNonNull(t,"formatter");return t.format(this,OffsetTime.FROM)}},{key:"get",value:function get(t){return _get(_getPrototypeOf(OffsetTime.prototype),"get",this).call(this,t)}},{key:"getLong",value:function getLong(t){if(t instanceof D){if(t===D.OFFSET_SECONDS){return this._offset.totalSeconds()}return this._time.getLong(t)}return t.getFrom(this)}},{key:"hour",value:function hour(){return this._time.hour()}},{key:"minute",value:function minute(){return this._time.minute()}},{key:"second",value:function second(){return this._time.second()}},{key:"nano",value:function nano(){return this._time.nano()}},{key:"offset",value:function offset(){return this._offset}},{key:"isAfter",value:function isAfter(t){requireNonNull(t,"other");return this._toEpochNano()>t._toEpochNano()}},{key:"isBefore",value:function isBefore(t){requireNonNull(t,"other");return this._toEpochNano()<t._toEpochNano()}},{key:"isEqual",value:function isEqual(t){requireNonNull(t,"other");return this._toEpochNano()===t._toEpochNano()}},{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t.isTimeBased()||t===D.OFFSET_SECONDS}else if(t instanceof x){return t.isTimeBased()}return t!=null&&t.isSupportedBy(this)}},{key:"minusHours",value:function minusHours(t){return this._withLocalTimeOffset(this._time.minusHours(t),this._offset)}},{key:"minusMinutes",value:function minusMinutes(t){return this._withLocalTimeOffset(this._time.minusMinutes(t),this._offset)}},{key:"minusSeconds",value:function minusSeconds(t){return this._withLocalTimeOffset(this._time.minusSeconds(t),this._offset)}},{key:"minusNanos",value:function minusNanos(t){return this._withLocalTimeOffset(this._time.minusNanos(t),this._offset)}},{key:"_minusAmount",value:function _minusAmount(t){requireNonNull(t);return t.subtractFrom(this)}},{key:"_minusUnit",value:function _minusUnit(t,r){return this.plus(-1*t,r)}},{key:"_plusAmount",value:function _plusAmount(t){requireNonNull(t);return t.addTo(this)}},{key:"_plusUnit",value:function _plusUnit(t,r){if(r instanceof x){return this._withLocalTimeOffset(this._time.plus(t,r),this._offset)}return r.addTo(this,t)}},{key:"plusHours",value:function plusHours(t){return this._withLocalTimeOffset(this._time.plusHours(t),this._offset)}},{key:"plusMinutes",value:function plusMinutes(t){return this._withLocalTimeOffset(this._time.plusMinutes(t),this._offset)}},{key:"plusSeconds",value:function plusSeconds(t){return this._withLocalTimeOffset(this._time.plusSeconds(t),this._offset)}},{key:"plusNanos",value:function plusNanos(t){return this._withLocalTimeOffset(this._time.plusNanos(t),this._offset)}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.precision()){return x.NANOS}else if(t===M.offset()||t===M.zone()){return this.offset()}else if(t===M.localTime()){return this._time}else if(t===M.chronology()||t===M.localDate()||t===M.zoneId()){return null}return _get(_getPrototypeOf(OffsetTime.prototype),"query",this).call(this,t)}},{key:"range",value:function range(t){if(t instanceof D){if(t===D.OFFSET_SECONDS){return t.range()}return this._time.range(t)}return t.rangeRefinedBy(this)}},{key:"toLocalTime",value:function toLocalTime(){return this._time}},{key:"truncatedTo",value:function truncatedTo(t){return this._withLocalTimeOffset(this._time.truncatedTo(t),this._offset)}},{key:"until",value:function until(t,r){requireNonNull(t,"endExclusive");requireNonNull(r,"unit");var n=OffsetTime.from(t);if(r instanceof x){var o=n._toEpochNano()-this._toEpochNano();switch(r){case x.NANOS:return o;case x.MICROS:return Math.floor(o/1e3);case x.MILLIS:return Math.floor(o/1e6);case x.SECONDS:return Math.floor(o/vt.NANOS_PER_SECOND);case x.MINUTES:return Math.floor(o/vt.NANOS_PER_MINUTE);case x.HOURS:return Math.floor(o/vt.NANOS_PER_HOUR);case x.HALF_DAYS:return Math.floor(o/(12*vt.NANOS_PER_HOUR))}throw new i("Unsupported unit: ".concat(r))}return r.between(this,n)}},{key:"withHour",value:function withHour(t){return this._withLocalTimeOffset(this._time.withHour(t),this._offset)}},{key:"withMinute",value:function withMinute(t){return this._withLocalTimeOffset(this._time.withMinute(t),this._offset)}},{key:"withSecond",value:function withSecond(t){return this._withLocalTimeOffset(this._time.withSecond(t),this._offset)}},{key:"withNano",value:function withNano(t){return this._withLocalTimeOffset(this._time.withNano(t),this._offset)}},{key:"withOffsetSameInstant",value:function withOffsetSameInstant(t){requireNonNull(t,"offset");if(t.equals(this._offset)){return this}var r=t.totalSeconds()-this._offset.totalSeconds();var n=this._time.plusSeconds(r);return new OffsetTime(n,t)}},{key:"withOffsetSameLocal",value:function withOffsetSameLocal(t){return t!=null&&t.equals(this._offset)?this:new OffsetTime(this._time,t)}},{key:"_toEpochNano",value:function _toEpochNano(){var t=this._time.toNanoOfDay();var r=this._offset.totalSeconds()*vt.NANOS_PER_SECOND;return t-r}},{key:"_withAdjuster",value:function _withAdjuster(t){requireNonNull(t,"adjuster");if(t instanceof vt){return this._withLocalTimeOffset(t,this._offset)}else if(t instanceof te){return this._withLocalTimeOffset(this._time,t)}else if(t instanceof OffsetTime){return t}return t.adjustInto(this)}},{key:"_withField",value:function _withField(t,r){requireNonNull(t,"field");if(t instanceof D){if(t===D.OFFSET_SECONDS){return this._withLocalTimeOffset(this._time,te.ofTotalSeconds(t.checkValidIntValue(r)))}return this._withLocalTimeOffset(this._time.with(t,r),this._offset)}return t.adjustInto(this,r)}},{key:"_withLocalTimeOffset",value:function _withLocalTimeOffset(t,r){if(this._time===t&&this._offset.equals(r)){return this}return new OffsetTime(t,r)}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,OffsetTime,"other");if(this._offset.equals(t._offset)){return this._time.compareTo(t._time)}var r=p.compareNumbers(this._toEpochNano(),t._toEpochNano());if(r===0){return this._time.compareTo(t._time)}return r}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof OffsetTime){return this._time.equals(t._time)&&this._offset.equals(t._offset)}return false}},{key:"hashCode",value:function hashCode(){return this._time.hashCode()^this._offset.hashCode()}},{key:"toString",value:function toString(){return this._time.toString()+this._offset.toString()}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"from",value:function from(t){requireNonNull(t,"temporal");if(t instanceof OffsetTime){return t}else if(t instanceof ut){return t.toOffsetTime()}try{var n=vt.from(t);var i=te.from(t);return new OffsetTime(n,i)}catch(n){throw new r("Unable to obtain OffsetTime TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""))}}},{key:"now",value:function now(t){if(arguments.length===0){return OffsetTime._now(Et.systemDefaultZone())}else if(t instanceof Et){return OffsetTime._now(t)}else{return OffsetTime._now(Et.system(t))}}},{key:"_now",value:function _now(t){requireNonNull(t,"clock");var r=t.instant();return OffsetTime.ofInstant(r,t.zone().rules().offset(r))}},{key:"of",value:function of(){if(arguments.length<=2){return OffsetTime.ofTimeAndOffset.apply(this,arguments)}else{return OffsetTime.ofNumbers.apply(this,arguments)}}},{key:"ofNumbers",value:function ofNumbers(t,r,n,i,o){var a=vt.of(t,r,n,i);return new OffsetTime(a,o)}},{key:"ofTimeAndOffset",value:function ofTimeAndOffset(t,r){return new OffsetTime(t,r)}},{key:"ofInstant",value:function ofInstant(t,r){requireNonNull(t,"instant");requireInstance(t,_t,"instant");requireNonNull(r,"zone");requireInstance(r,J,"zone");var n=r.rules();var i=n.offset(t);var o=t.epochSecond()%vt.SECONDS_PER_DAY;o=(o+i.totalSeconds())%vt.SECONDS_PER_DAY;if(o<0){o+=vt.SECONDS_PER_DAY}var a=vt.ofSecondOfDay(o,t.nano());return new OffsetTime(a,i)}},{key:"parse",value:function parse(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:We.ISO_OFFSET_TIME;requireNonNull(r,"formatter");return r.parse(t,OffsetTime.FROM)}}]);return OffsetTime}(W);function _init$f(){at.MIN=at.ofNumbers(0,0,0,0,te.MAX);at.MAX=at.ofNumbers(23,59,59,999999999,te.MIN);at.FROM=createTemporalQuery("OffsetTime.FROM",(function(t){return at.from(t)}))}var st=function(t){_inherits(ChronoZonedDateTime,t);var r=_createSuper(ChronoZonedDateTime);function ChronoZonedDateTime(){_classCallCheck(this,ChronoZonedDateTime);return r.apply(this,arguments)}_createClass(ChronoZonedDateTime,[{key:"query",value:function query(t){if(t===M.zoneId()||t===M.zone()){return this.zone()}else if(t===M.chronology()){return this.toLocalDate().chronology()}else if(t===M.precision()){return x.NANOS}else if(t===M.offset()){return this.offset()}else if(t===M.localDate()){return pt.ofEpochDay(this.toLocalDate().toEpochDay())}else if(t===M.localTime()){return this.toLocalTime()}return _get(_getPrototypeOf(ChronoZonedDateTime.prototype),"query",this).call(this,t)}},{key:"format",value:function format(t){requireNonNull(t,"formatter");return t.format(this)}},{key:"toInstant",value:function toInstant(){return _t.ofEpochSecond(this.toEpochSecond(),this.toLocalTime().nano())}},{key:"toEpochSecond",value:function toEpochSecond(){var t=this.toLocalDate().toEpochDay();var r=t*86400+this.toLocalTime().toSecondOfDay();r-=this.offset().totalSeconds();return r}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");var r=p.compareNumbers(this.toEpochSecond(),t.toEpochSecond());if(r===0){r=this.toLocalTime().nano()-t.toLocalTime().nano();if(r===0){r=this.toLocalDateTime().compareTo(t.toLocalDateTime());if(r===0){r=strcmp(this.zone().id(),t.zone().id())}}}return r}},{key:"isAfter",value:function isAfter(t){requireNonNull(t,"other");var r=this.toEpochSecond();var n=t.toEpochSecond();return r>n||r===n&&this.toLocalTime().nano()>t.toLocalTime().nano()}},{key:"isBefore",value:function isBefore(t){requireNonNull(t,"other");var r=this.toEpochSecond();var n=t.toEpochSecond();return r<n||r===n&&this.toLocalTime().nano()<t.toLocalTime().nano()}},{key:"isEqual",value:function isEqual(t){requireNonNull(t,"other");return this.toEpochSecond()===t.toEpochSecond()&&this.toLocalTime().nano()===t.toLocalTime().nano()}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof ChronoZonedDateTime){return this.compareTo(t)===0}return false}}]);return ChronoZonedDateTime}(W);function strcmp(t,r){if(t<r){return-1}if(t>r){return 1}return 0}var ct=function(t){_inherits(ZonedDateTime,t);var n=_createSuper(ZonedDateTime);function ZonedDateTime(t,r,i){var o;_classCallCheck(this,ZonedDateTime);requireNonNull(t,"dateTime");requireNonNull(r,"offset");requireNonNull(i,"zone");o=n.call(this);o._dateTime=t;o._offset=r;o._zone=i;return o}_createClass(ZonedDateTime,[{key:"_resolveLocal",value:function _resolveLocal(t){requireNonNull(t,"newDateTime");return ZonedDateTime.ofLocal(t,this._zone,this._offset)}},{key:"_resolveInstant",value:function _resolveInstant(t){return ZonedDateTime.ofInstant3(t,this._offset,this._zone)}},{key:"_resolveOffset",value:function _resolveOffset(t){if(t.equals(this._offset)===false&&this._zone.rules().isValidOffset(this._dateTime,t)){return new ZonedDateTime(this._dateTime,t,this._zone)}return this}},{key:"isSupported",value:function isSupported(t){if(t instanceof D){return true}else if(t instanceof x){return t.isDateBased()||t.isTimeBased()}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(t instanceof D){if(t===D.INSTANT_SECONDS||t===D.OFFSET_SECONDS){return t.range()}return this._dateTime.range(t)}return t.rangeRefinedBy(this)}},{key:"get",value:function get(t){return this.getLong(t)}},{key:"getLong",value:function getLong(t){if(t instanceof D){switch(t){case D.INSTANT_SECONDS:return this.toEpochSecond();case D.OFFSET_SECONDS:return this._offset.totalSeconds()}return this._dateTime.getLong(t)}requireNonNull(t,"field");return t.getFrom(this)}},{key:"offset",value:function offset(){return this._offset}},{key:"withEarlierOffsetAtOverlap",value:function withEarlierOffsetAtOverlap(){var t=this._zone.rules().transition(this._dateTime);if(t!=null&&t.isOverlap()){var r=t.offsetBefore();if(r.equals(this._offset)===false){return new ZonedDateTime(this._dateTime,r,this._zone)}}return this}},{key:"withLaterOffsetAtOverlap",value:function withLaterOffsetAtOverlap(){var t=this._zone.rules().transition(this.toLocalDateTime());if(t!=null){var r=t.offsetAfter();if(r.equals(this._offset)===false){return new ZonedDateTime(this._dateTime,r,this._zone)}}return this}},{key:"zone",value:function zone(){return this._zone}},{key:"withZoneSameLocal",value:function withZoneSameLocal(t){requireNonNull(t,"zone");return this._zone.equals(t)?this:ZonedDateTime.ofLocal(this._dateTime,t,this._offset)}},{key:"withZoneSameInstant",value:function withZoneSameInstant(t){requireNonNull(t,"zone");return this._zone.equals(t)?this:ZonedDateTime._create(this._dateTime.toEpochSecond(this._offset),this._dateTime.nano(),t)}},{key:"withFixedOffsetZone",value:function withFixedOffsetZone(){return this._zone.equals(this._offset)?this:new ZonedDateTime(this._dateTime,this._offset,this._offset)}},{key:"year",value:function year(){return this._dateTime.year()}},{key:"monthValue",value:function monthValue(){return this._dateTime.monthValue()}},{key:"month",value:function month(){return this._dateTime.month()}},{key:"dayOfMonth",value:function dayOfMonth(){return this._dateTime.dayOfMonth()}},{key:"dayOfYear",value:function dayOfYear(){return this._dateTime.dayOfYear()}},{key:"dayOfWeek",value:function dayOfWeek(){return this._dateTime.dayOfWeek()}},{key:"hour",value:function hour(){return this._dateTime.hour()}},{key:"minute",value:function minute(){return this._dateTime.minute()}},{key:"second",value:function second(){return this._dateTime.second()}},{key:"nano",value:function nano(){return this._dateTime.nano()}},{key:"_withAdjuster",value:function _withAdjuster(t){if(t instanceof pt){return this._resolveLocal(mt.of(t,this._dateTime.toLocalTime()))}else if(t instanceof vt){return this._resolveLocal(mt.of(this._dateTime.toLocalDate(),t))}else if(t instanceof mt){return this._resolveLocal(t)}else if(t instanceof _t){var r=t;return ZonedDateTime._create(r.epochSecond(),r.nano(),this._zone)}else if(t instanceof te){return this._resolveOffset(t)}return _get(_getPrototypeOf(ZonedDateTime.prototype),"_withAdjuster",this).call(this,t)}},{key:"_withField",value:function _withField(t,r){if(t instanceof D){switch(t){case D.INSTANT_SECONDS:return ZonedDateTime._create(r,this.nano(),this._zone);case D.OFFSET_SECONDS:{var n=te.ofTotalSeconds(t.checkValidIntValue(r));return this._resolveOffset(n)}}return this._resolveLocal(this._dateTime.with(t,r))}return t.adjustInto(this,r)}},{key:"withYear",value:function withYear(t){return this._resolveLocal(this._dateTime.withYear(t))}},{key:"withMonth",value:function withMonth(t){return this._resolveLocal(this._dateTime.withMonth(t))}},{key:"withDayOfMonth",value:function withDayOfMonth(t){return this._resolveLocal(this._dateTime.withDayOfMonth(t))}},{key:"withDayOfYear",value:function withDayOfYear(t){return this._resolveLocal(this._dateTime.withDayOfYear(t))}},{key:"withHour",value:function withHour(t){return this._resolveLocal(this._dateTime.withHour(t))}},{key:"withMinute",value:function withMinute(t){return this._resolveLocal(this._dateTime.withMinute(t))}},{key:"withSecond",value:function withSecond(t){return this._resolveLocal(this._dateTime.withSecond(t))}},{key:"withNano",value:function withNano(t){return this._resolveLocal(this._dateTime.withNano(t))}},{key:"truncatedTo",value:function truncatedTo(t){return this._resolveLocal(this._dateTime.truncatedTo(t))}},{key:"_plusUnit",value:function _plusUnit(t,r){if(r instanceof x){if(r.isDateBased()){return this._resolveLocal(this._dateTime.plus(t,r))}else{return this._resolveInstant(this._dateTime.plus(t,r))}}requireNonNull(r,"unit");return r.addTo(this,t)}},{key:"plusYears",value:function plusYears(t){return this._resolveLocal(this._dateTime.plusYears(t))}},{key:"plusMonths",value:function plusMonths(t){return this._resolveLocal(this._dateTime.plusMonths(t))}},{key:"plusWeeks",value:function plusWeeks(t){return this._resolveLocal(this._dateTime.plusWeeks(t))}},{key:"plusDays",value:function plusDays(t){return this._resolveLocal(this._dateTime.plusDays(t))}},{key:"plusHours",value:function plusHours(t){return this._resolveInstant(this._dateTime.plusHours(t))}},{key:"plusMinutes",value:function plusMinutes(t){return this._resolveInstant(this._dateTime.plusMinutes(t))}},{key:"plusSeconds",value:function plusSeconds(t){return this._resolveInstant(this._dateTime.plusSeconds(t))}},{key:"plusNanos",value:function plusNanos(t){return this._resolveInstant(this._dateTime.plusNanos(t))}},{key:"_minusUnit",value:function _minusUnit(t,r){return this._plusUnit(-1*t,r)}},{key:"minusYears",value:function minusYears(t){return this.plusYears(-1*t)}},{key:"minusMonths",value:function minusMonths(t){return this.plusMonths(-1*t)}},{key:"minusWeeks",value:function minusWeeks(t){return this.plusWeeks(-1*t)}},{key:"minusDays",value:function minusDays(t){return this.plusDays(-1*t)}},{key:"minusHours",value:function minusHours(t){return this.plusHours(-1*t)}},{key:"minusMinutes",value:function minusMinutes(t){return this.plusMinutes(-1*t)}},{key:"minusSeconds",value:function minusSeconds(t){return this.plusSeconds(-1*t)}},{key:"minusNanos",value:function minusNanos(t){return this.plusNanos(-1*t)}},{key:"query",value:function query(t){if(t===M.localDate()){return this.toLocalDate()}requireNonNull(t,"query");return _get(_getPrototypeOf(ZonedDateTime.prototype),"query",this).call(this,t)}},{key:"until",value:function until(t,r){var n=ZonedDateTime.from(t);if(r instanceof x){n=n.withZoneSameInstant(this._zone);if(r.isDateBased()){return this._dateTime.until(n._dateTime,r)}else{var i=this._offset.totalSeconds()-n._offset.totalSeconds();var o=n._dateTime.plusSeconds(i);return this._dateTime.until(o,r)}}return r.between(this,n)}},{key:"toLocalDateTime",value:function toLocalDateTime(){return this._dateTime}},{key:"toLocalDate",value:function toLocalDate(){return this._dateTime.toLocalDate()}},{key:"toLocalTime",value:function toLocalTime(){return this._dateTime.toLocalTime()}},{key:"toOffsetDateTime",value:function toOffsetDateTime(){return ut.of(this._dateTime,this._offset)}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof ZonedDateTime){return this._dateTime.equals(t._dateTime)&&this._offset.equals(t._offset)&&this._zone.equals(t._zone)}return false}},{key:"hashCode",value:function hashCode(){return p.hashCode(this._dateTime.hashCode(),this._offset.hashCode(),this._zone.hashCode())}},{key:"toString",value:function toString(){var t=this._dateTime.toString()+this._offset.toString();if(this._offset!==this._zone){t+="[".concat(this._zone.toString(),"]")}return t}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){return _get(_getPrototypeOf(ZonedDateTime.prototype),"format",this).call(this,t)}}],[{key:"now",value:function now(t){var r;if(t instanceof J){r=Et.system(t)}else{r=t==null?Et.systemDefaultZone():t}return ZonedDateTime.ofInstant(r.instant(),r.zone())}},{key:"of",value:function of(){if(arguments.length<=2){return ZonedDateTime.of2.apply(this,arguments)}else if(arguments.length===3&&arguments[0]instanceof pt){return ZonedDateTime.of3.apply(this,arguments)}else{return ZonedDateTime.of8.apply(this,arguments)}}},{key:"of3",value:function of3(t,r,n){return ZonedDateTime.of2(mt.of(t,r),n)}},{key:"of2",value:function of2(t,r){return ZonedDateTime.ofLocal(t,r,null)}},{key:"of8",value:function of8(t,r,n,i,o,a,s,c){var u=mt.of(t,r,n,i,o,a,s);return ZonedDateTime.ofLocal(u,c,null)}},{key:"ofLocal",value:function ofLocal(t,r,n){requireNonNull(t,"localDateTime");requireNonNull(r,"zone");if(r instanceof te){return new ZonedDateTime(t,r,r)}var i=null;var o=r.rules();var a=o.validOffsets(t);if(a.length===1){i=a[0]}else if(a.length===0){var s=o.transition(t);t=t.plusSeconds(s.duration().seconds());i=s.offsetAfter()}else{if(n!=null&&a.some((function(t){return t.equals(n)}))){i=n}else{i=requireNonNull(a[0],"offset")}}return new ZonedDateTime(t,i,r)}},{key:"ofInstant",value:function ofInstant(){if(arguments.length===2){return ZonedDateTime.ofInstant2.apply(this,arguments)}else{return ZonedDateTime.ofInstant3.apply(this,arguments)}}},{key:"ofInstant2",value:function ofInstant2(t,r){requireNonNull(t,"instant");requireNonNull(r,"zone");return ZonedDateTime._create(t.epochSecond(),t.nano(),r)}},{key:"ofInstant3",value:function ofInstant3(t,r,n){requireNonNull(t,"localDateTime");requireNonNull(r,"offset");requireNonNull(n,"zone");return ZonedDateTime._create(t.toEpochSecond(r),t.nano(),n)}},{key:"_create",value:function _create(t,r,n){var i=n.rules();var o=_t.ofEpochSecond(t,r);var a=i.offset(o);var s=mt.ofEpochSecond(t,r,a);return new ZonedDateTime(s,a,n)}},{key:"ofStrict",value:function ofStrict(t,n,i){requireNonNull(t,"localDateTime");requireNonNull(n,"offset");requireNonNull(i,"zone");var o=i.rules();if(o.isValidOffset(t,n)===false){var a=o.transition(t);if(a!=null&&a.isGap()){throw new r("LocalDateTime ".concat(t," does not exist in zone ").concat(i," due to a gap in the local time-line, typically caused by daylight savings"))}throw new r('ZoneOffset "'.concat(n,'" is not valid for LocalDateTime "').concat(t,'" in zone "').concat(i,'"'))}return new ZonedDateTime(t,n,i)}},{key:"ofLenient",value:function ofLenient(t,r,n){requireNonNull(t,"localDateTime");requireNonNull(r,"offset");requireNonNull(n,"zone");if(n instanceof te&&r.equals(n)===false){throw new a("ZoneId must match ZoneOffset")}return new ZonedDateTime(t,r,n)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");if(t instanceof ZonedDateTime){return t}var r=J.from(t);if(t.isSupported(D.INSTANT_SECONDS)){var n=ZonedDateTime._from(t,r);if(n!=null)return n}var i=mt.from(t);return ZonedDateTime.of2(i,r)}},{key:"_from",value:function _from(t,n){try{return ZonedDateTime.__from(t,n)}catch(t){if(!(t instanceof r))throw t}}},{key:"__from",value:function __from(t,r){var n=t.getLong(D.INSTANT_SECONDS);var i=t.get(D.NANO_OF_SECOND);return ZonedDateTime._create(n,i,r)}},{key:"parse",value:function parse(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:We.ISO_ZONED_DATE_TIME;requireNonNull(r,"formatter");return r.parse(t,ZonedDateTime.FROM)}}]);return ZonedDateTime}(st);function _init$g(){ct.FROM=createTemporalQuery("ZonedDateTime.FROM",(function(t){return ct.from(t)}))}var ut=function(t){_inherits(OffsetDateTime,t);var n=_createSuper(OffsetDateTime);function OffsetDateTime(t,r){var i;_classCallCheck(this,OffsetDateTime);i=n.call(this);requireNonNull(t,"dateTime");requireInstance(t,mt,"dateTime");requireNonNull(r,"offset");requireInstance(r,te,"offset");i._dateTime=t;i._offset=r;return i}_createClass(OffsetDateTime,[{key:"adjustInto",value:function adjustInto(t){return t.with(D.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(D.NANO_OF_DAY,this.toLocalTime().toNanoOfDay()).with(D.OFFSET_SECONDS,this.offset().totalSeconds())}},{key:"until",value:function until(t,r){var n=OffsetDateTime.from(t);if(r instanceof x){n=n.withOffsetSameInstant(this._offset);return this._dateTime.until(n._dateTime,r)}return r.between(this,n)}},{key:"atZoneSameInstant",value:function atZoneSameInstant(t){return ct.ofInstant(this._dateTime,this._offset,t)}},{key:"atZoneSimilarLocal",value:function atZoneSimilarLocal(t){return ct.ofLocal(this._dateTime,t,this._offset)}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.chronology()){return ot.INSTANCE}else if(t===M.precision()){return x.NANOS}else if(t===M.offset()||t===M.zone()){return this.offset()}else if(t===M.localDate()){return this.toLocalDate()}else if(t===M.localTime()){return this.toLocalTime()}else if(t===M.zoneId()){return null}return _get(_getPrototypeOf(OffsetDateTime.prototype),"query",this).call(this,t)}},{key:"get",value:function get(t){if(t instanceof D){switch(t){case D.INSTANT_SECONDS:throw new r("Field too large for an int: ".concat(t));case D.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.get(t)}return _get(_getPrototypeOf(OffsetDateTime.prototype),"get",this).call(this,t)}},{key:"getLong",value:function getLong(t){if(t instanceof D){switch(t){case D.INSTANT_SECONDS:return this.toEpochSecond();case D.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.getLong(t)}return t.getFrom(this)}},{key:"offset",value:function offset(){return this._offset}},{key:"year",value:function year(){return this._dateTime.year()}},{key:"monthValue",value:function monthValue(){return this._dateTime.monthValue()}},{key:"month",value:function month(){return this._dateTime.month()}},{key:"dayOfMonth",value:function dayOfMonth(){return this._dateTime.dayOfMonth()}},{key:"dayOfYear",value:function dayOfYear(){return this._dateTime.dayOfYear()}},{key:"dayOfWeek",value:function dayOfWeek(){return this._dateTime.dayOfWeek()}},{key:"hour",value:function hour(){return this._dateTime.hour()}},{key:"minute",value:function minute(){return this._dateTime.minute()}},{key:"second",value:function second(){return this._dateTime.second()}},{key:"nano",value:function nano(){return this._dateTime.nano()}},{key:"toLocalDateTime",value:function toLocalDateTime(){return this._dateTime}},{key:"toLocalDate",value:function toLocalDate(){return this._dateTime.toLocalDate()}},{key:"toLocalTime",value:function toLocalTime(){return this._dateTime.toLocalTime()}},{key:"toOffsetTime",value:function toOffsetTime(){return at.of(this._dateTime.toLocalTime(),this._offset)}},{key:"toZonedDateTime",value:function toZonedDateTime(){return ct.of(this._dateTime,this._offset)}},{key:"toInstant",value:function toInstant(){return this._dateTime.toInstant(this._offset)}},{key:"toEpochSecond",value:function toEpochSecond(){return this._dateTime.toEpochSecond(this._offset)}},{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t.isDateBased()||t.isTimeBased()}if(t instanceof x){return t.isDateBased()||t.isTimeBased()}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(t instanceof D){if(t===D.INSTANT_SECONDS||t===D.OFFSET_SECONDS){return t.range()}return this._dateTime.range(t)}return t.rangeRefinedBy(this)}},{key:"_withAdjuster",value:function _withAdjuster(t){requireNonNull(t);if(t instanceof pt||t instanceof vt||t instanceof mt){return this._withDateTimeOffset(this._dateTime.with(t),this._offset)}else if(t instanceof _t){return OffsetDateTime.ofInstant(t,this._offset)}else if(t instanceof te){return this._withDateTimeOffset(this._dateTime,t)}else if(t instanceof OffsetDateTime){return t}return t.adjustInto(this)}},{key:"_withField",value:function _withField(t,r){requireNonNull(t);if(t instanceof D){var n=t;switch(n){case D.INSTANT_SECONDS:return OffsetDateTime.ofInstant(_t.ofEpochSecond(r,this.nano()),this._offset);case D.OFFSET_SECONDS:{return this._withDateTimeOffset(this._dateTime,te.ofTotalSeconds(n.checkValidIntValue(r)))}}return this._withDateTimeOffset(this._dateTime.with(t,r),this._offset)}return t.adjustInto(this,r)}},{key:"_withDateTimeOffset",value:function _withDateTimeOffset(t,r){if(this._dateTime===t&&this._offset.equals(r)){return this}return new OffsetDateTime(t,r)}},{key:"withYear",value:function withYear(t){return this._withDateTimeOffset(this._dateTime.withYear(t),this._offset)}},{key:"withMonth",value:function withMonth(t){return this._withDateTimeOffset(this._dateTime.withMonth(t),this._offset)}},{key:"withDayOfMonth",value:function withDayOfMonth(t){return this._withDateTimeOffset(this._dateTime.withDayOfMonth(t),this._offset)}},{key:"withDayOfYear",value:function withDayOfYear(t){return this._withDateTimeOffset(this._dateTime.withDayOfYear(t),this._offset)}},{key:"withHour",value:function withHour(t){return this._withDateTimeOffset(this._dateTime.withHour(t),this._offset)}},{key:"withMinute",value:function withMinute(t){return this._withDateTimeOffset(this._dateTime.withMinute(t),this._offset)}},{key:"withSecond",value:function withSecond(t){return this._withDateTimeOffset(this._dateTime.withSecond(t),this._offset)}},{key:"withNano",value:function withNano(t){return this._withDateTimeOffset(this._dateTime.withNano(t),this._offset)}},{key:"withOffsetSameLocal",value:function withOffsetSameLocal(t){requireNonNull(t,"offset");return this._withDateTimeOffset(this._dateTime,t)}},{key:"withOffsetSameInstant",value:function withOffsetSameInstant(t){requireNonNull(t,"offset");if(t.equals(this._offset)){return this}var r=t.totalSeconds()-this._offset.totalSeconds();var n=this._dateTime.plusSeconds(r);return new OffsetDateTime(n,t)}},{key:"truncatedTo",value:function truncatedTo(t){return this._withDateTimeOffset(this._dateTime.truncatedTo(t),this._offset)}},{key:"_plusAmount",value:function _plusAmount(t){requireNonNull(t,"amount");return t.addTo(this)}},{key:"_plusUnit",value:function _plusUnit(t,r){if(r instanceof x){return this._withDateTimeOffset(this._dateTime.plus(t,r),this._offset)}return r.addTo(this,t)}},{key:"plusYears",value:function plusYears(t){return this._withDateTimeOffset(this._dateTime.plusYears(t),this._offset)}},{key:"plusMonths",value:function plusMonths(t){return this._withDateTimeOffset(this._dateTime.plusMonths(t),this._offset)}},{key:"plusWeeks",value:function plusWeeks(t){return this._withDateTimeOffset(this._dateTime.plusWeeks(t),this._offset)}},{key:"plusDays",value:function plusDays(t){return this._withDateTimeOffset(this._dateTime.plusDays(t),this._offset)}},{key:"plusHours",value:function plusHours(t){return this._withDateTimeOffset(this._dateTime.plusHours(t),this._offset)}},{key:"plusMinutes",value:function plusMinutes(t){return this._withDateTimeOffset(this._dateTime.plusMinutes(t),this._offset)}},{key:"plusSeconds",value:function plusSeconds(t){return this._withDateTimeOffset(this._dateTime.plusSeconds(t),this._offset)}},{key:"plusNanos",value:function plusNanos(t){return this._withDateTimeOffset(this._dateTime.plusNanos(t),this._offset)}},{key:"_minusAmount",value:function _minusAmount(t){requireNonNull(t);return t.subtractFrom(this)}},{key:"_minusUnit",value:function _minusUnit(t,r){return this.plus(-1*t,r)}},{key:"minusYears",value:function minusYears(t){return this._withDateTimeOffset(this._dateTime.minusYears(t),this._offset)}},{key:"minusMonths",value:function minusMonths(t){return this._withDateTimeOffset(this._dateTime.minusMonths(t),this._offset)}},{key:"minusWeeks",value:function minusWeeks(t){return this._withDateTimeOffset(this._dateTime.minusWeeks(t),this._offset)}},{key:"minusDays",value:function minusDays(t){return this._withDateTimeOffset(this._dateTime.minusDays(t),this._offset)}},{key:"minusHours",value:function minusHours(t){return this._withDateTimeOffset(this._dateTime.minusHours(t),this._offset)}},{key:"minusMinutes",value:function minusMinutes(t){return this._withDateTimeOffset(this._dateTime.minusMinutes(t),this._offset)}},{key:"minusSeconds",value:function minusSeconds(t){return this._withDateTimeOffset(this._dateTime.minusSeconds(t),this._offset)}},{key:"minusNanos",value:function minusNanos(t){return this._withDateTimeOffset(this._dateTime.minusNanos(t),this._offset)}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,OffsetDateTime,"other");if(this.offset().equals(t.offset())){return this.toLocalDateTime().compareTo(t.toLocalDateTime())}var r=p.compareNumbers(this.toEpochSecond(),t.toEpochSecond());if(r===0){r=this.toLocalTime().nano()-t.toLocalTime().nano();if(r===0){r=this.toLocalDateTime().compareTo(t.toLocalDateTime())}}return r}},{key:"isAfter",value:function isAfter(t){requireNonNull(t,"other");var r=this.toEpochSecond();var n=t.toEpochSecond();return r>n||r===n&&this.toLocalTime().nano()>t.toLocalTime().nano()}},{key:"isBefore",value:function isBefore(t){requireNonNull(t,"other");var r=this.toEpochSecond();var n=t.toEpochSecond();return r<n||r===n&&this.toLocalTime().nano()<t.toLocalTime().nano()}},{key:"isEqual",value:function isEqual(t){requireNonNull(t,"other");return this.toEpochSecond()===t.toEpochSecond()&&this.toLocalTime().nano()===t.toLocalTime().nano()}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof OffsetDateTime){return this._dateTime.equals(t._dateTime)&&this._offset.equals(t._offset)}return false}},{key:"hashCode",value:function hashCode(){return this._dateTime.hashCode()^this._offset.hashCode()}},{key:"toString",value:function toString(){return this._dateTime.toString()+this._offset.toString()}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){requireNonNull(t,"formatter");return t.format(this)}}],[{key:"from",value:function from(t){requireNonNull(t,"temporal");if(t instanceof OffsetDateTime){return t}try{var n=te.from(t);try{var i=mt.from(t);return OffsetDateTime.of(i,n)}catch(r){var o=_t.from(t);return OffsetDateTime.ofInstant(o,n)}}catch(n){throw new r("Unable to obtain OffsetDateTime TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""))}}},{key:"now",value:function now(t){if(arguments.length===0){return OffsetDateTime.now(Et.systemDefaultZone())}else{requireNonNull(t,"clockOrZone");if(t instanceof J){return OffsetDateTime.now(Et.system(t))}else if(t instanceof Et){var now=t.instant();return OffsetDateTime.ofInstant(now,t.zone().rules().offset(now))}else{throw new a("clockOrZone must be an instance of ZoneId or Clock")}}}},{key:"of",value:function of(){if(arguments.length<=2){return OffsetDateTime.ofDateTime.apply(this,arguments)}else if(arguments.length===3){return OffsetDateTime.ofDateAndTime.apply(this,arguments)}else{return OffsetDateTime.ofNumbers.apply(this,arguments)}}},{key:"ofDateTime",value:function ofDateTime(t,r){return new OffsetDateTime(t,r)}},{key:"ofDateAndTime",value:function ofDateAndTime(t,r,n){var i=mt.of(t,r);return new OffsetDateTime(i,n)}},{key:"ofNumbers",value:function ofNumbers(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var s=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var c=arguments.length>7?arguments[7]:undefined;var u=mt.of(t,r,n,i,o,a,s);return new OffsetDateTime(u,c)}},{key:"ofInstant",value:function ofInstant(t,r){requireNonNull(t,"instant");requireNonNull(r,"zone");var n=r.rules();var i=n.offset(t);var o=mt.ofEpochSecond(t.epochSecond(),t.nano(),i);return new OffsetDateTime(o,i)}},{key:"parse",value:function parse(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:We.ISO_OFFSET_DATE_TIME;requireNonNull(r,"formatter");return r.parse(t,OffsetDateTime.FROM)}}]);return OffsetDateTime}(W);function _init$h(){ut.MIN=mt.MIN.atOffset(te.MAX);ut.MAX=mt.MAX.atOffset(te.MIN);ut.FROM=createTemporalQuery("OffsetDateTime.FROM",(function(t){return ut.from(t)}))}var ft=146097;var dt=ft*5-(30*365+7);var pt=function(t){_inherits(LocalDate,t);var n=_createSuper(LocalDate);function LocalDate(t,r,i){var o;_classCallCheck(this,LocalDate);o=n.call(this);requireNonNull(t,"year");requireNonNull(r,"month");requireNonNull(i,"dayOfMonth");if(r instanceof F){r=r.value()}o._year=p.safeToInt(t);o._month=p.safeToInt(r);o._day=p.safeToInt(i);LocalDate._validate(o._year,o._month,o._day);return o}_createClass(LocalDate,[{key:"isSupported",value:function isSupported(t){return _get(_getPrototypeOf(LocalDate.prototype),"isSupported",this).call(this,t)}},{key:"range",value:function range(t){if(t instanceof D){if(t.isDateBased()){switch(t){case D.DAY_OF_MONTH:return P.of(1,this.lengthOfMonth());case D.DAY_OF_YEAR:return P.of(1,this.lengthOfYear());case D.ALIGNED_WEEK_OF_MONTH:return P.of(1,this.month()===F.FEBRUARY&&this.isLeapYear()===false?4:5);case D.YEAR_OF_ERA:return this._year<=0?P.of(1,Xe.MAX_VALUE+1):P.of(1,Xe.MAX_VALUE)}return t.range()}throw new i("Unsupported field: ".concat(t))}return t.rangeRefinedBy(this)}},{key:"get",value:function get(t){return this.getLong(t)}},{key:"getLong",value:function getLong(t){assert(t!=null,"",c);if(t instanceof D){return this._get0(t)}return t.getFrom(this)}},{key:"_get0",value:function _get0(t){switch(t){case D.DAY_OF_WEEK:return this.dayOfWeek().value();case D.ALIGNED_DAY_OF_WEEK_IN_MONTH:return p.intMod(this._day-1,7)+1;case D.ALIGNED_DAY_OF_WEEK_IN_YEAR:return p.intMod(this.dayOfYear()-1,7)+1;case D.DAY_OF_MONTH:return this._day;case D.DAY_OF_YEAR:return this.dayOfYear();case D.EPOCH_DAY:return this.toEpochDay();case D.ALIGNED_WEEK_OF_MONTH:return p.intDiv(this._day-1,7)+1;case D.ALIGNED_WEEK_OF_YEAR:return p.intDiv(this.dayOfYear()-1,7)+1;case D.MONTH_OF_YEAR:return this._month;case D.PROLEPTIC_MONTH:return this._prolepticMonth();case D.YEAR_OF_ERA:return this._year>=1?this._year:1-this._year;case D.YEAR:return this._year;case D.ERA:return this._year>=1?1:0}throw new i("Unsupported field: ".concat(t))}},{key:"_prolepticMonth",value:function _prolepticMonth(){return this._year*12+(this._month-1)}},{key:"chronology",value:function chronology(){return ot.INSTANCE}},{key:"year",value:function year(){return this._year}},{key:"monthValue",value:function monthValue(){return this._month}},{key:"month",value:function month(){return F.of(this._month)}},{key:"dayOfMonth",value:function dayOfMonth(){return this._day}},{key:"dayOfYear",value:function dayOfYear(){return this.month().firstDayOfYear(this.isLeapYear())+this._day-1}},{key:"dayOfWeek",value:function dayOfWeek(){var t=p.floorMod(this.toEpochDay()+3,7);return q.of(t+1)}},{key:"isLeapYear",value:function isLeapYear(){return ot.isLeapYear(this._year)}},{key:"lengthOfMonth",value:function lengthOfMonth(){switch(this._month){case 2:return this.isLeapYear()?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}}},{key:"lengthOfYear",value:function lengthOfYear(){return this.isLeapYear()?366:365}},{key:"_withAdjuster",value:function _withAdjuster(t){requireNonNull(t,"adjuster");if(t instanceof LocalDate){return t}return _get(_getPrototypeOf(LocalDate.prototype),"_withAdjuster",this).call(this,t)}},{key:"_withField",value:function _withField(t,r){assert(t!=null,"field",c);if(t instanceof D){var n=t;n.checkValidValue(r);switch(n){case D.DAY_OF_WEEK:return this.plusDays(r-this.dayOfWeek().value());case D.ALIGNED_DAY_OF_WEEK_IN_MONTH:return this.plusDays(r-this.getLong(D.ALIGNED_DAY_OF_WEEK_IN_MONTH));case D.ALIGNED_DAY_OF_WEEK_IN_YEAR:return this.plusDays(r-this.getLong(D.ALIGNED_DAY_OF_WEEK_IN_YEAR));case D.DAY_OF_MONTH:return this.withDayOfMonth(r);case D.DAY_OF_YEAR:return this.withDayOfYear(r);case D.EPOCH_DAY:return LocalDate.ofEpochDay(r);case D.ALIGNED_WEEK_OF_MONTH:return this.plusWeeks(r-this.getLong(D.ALIGNED_WEEK_OF_MONTH));case D.ALIGNED_WEEK_OF_YEAR:return this.plusWeeks(r-this.getLong(D.ALIGNED_WEEK_OF_YEAR));case D.MONTH_OF_YEAR:return this.withMonth(r);case D.PROLEPTIC_MONTH:return this.plusMonths(r-this.getLong(D.PROLEPTIC_MONTH));case D.YEAR_OF_ERA:return this.withYear(this._year>=1?r:1-r);case D.YEAR:return this.withYear(r);case D.ERA:return this.getLong(D.ERA)===r?this:this.withYear(1-this._year)}throw new i("Unsupported field: ".concat(t))}return t.adjustInto(this,r)}},{key:"withYear",value:function withYear(t){if(this._year===t){return this}D.YEAR.checkValidValue(t);return LocalDate._resolvePreviousValid(t,this._month,this._day)}},{key:"withMonth",value:function withMonth(t){var r=t instanceof F?t.value():t;if(this._month===r){return this}D.MONTH_OF_YEAR.checkValidValue(r);return LocalDate._resolvePreviousValid(this._year,r,this._day)}},{key:"withDayOfMonth",value:function withDayOfMonth(t){if(this._day===t){return this}return LocalDate.of(this._year,this._month,t)}},{key:"withDayOfYear",value:function withDayOfYear(t){if(this.dayOfYear()===t){return this}return LocalDate.ofYearDay(this._year,t)}},{key:"_plusUnit",value:function _plusUnit(t,r){requireNonNull(t,"amountToAdd");requireNonNull(r,"unit");if(r instanceof x){switch(r){case x.DAYS:return this.plusDays(t);case x.WEEKS:return this.plusWeeks(t);case x.MONTHS:return this.plusMonths(t);case x.YEARS:return this.plusYears(t);case x.DECADES:return this.plusYears(p.safeMultiply(t,10));case x.CENTURIES:return this.plusYears(p.safeMultiply(t,100));case x.MILLENNIA:return this.plusYears(p.safeMultiply(t,1e3));case x.ERAS:return this.with(D.ERA,p.safeAdd(this.getLong(D.ERA),t))}throw new i("Unsupported unit: ".concat(r))}return r.addTo(this,t)}},{key:"plusYears",value:function plusYears(t){if(t===0){return this}var r=D.YEAR.checkValidIntValue(this._year+t);return LocalDate._resolvePreviousValid(r,this._month,this._day)}},{key:"plusMonths",value:function plusMonths(t){if(t===0){return this}var r=this._year*12+(this._month-1);var n=r+t;var i=D.YEAR.checkValidIntValue(p.floorDiv(n,12));var o=p.floorMod(n,12)+1;return LocalDate._resolvePreviousValid(i,o,this._day)}},{key:"plusWeeks",value:function plusWeeks(t){return this.plusDays(p.safeMultiply(t,7))}},{key:"plusDays",value:function plusDays(t){if(t===0){return this}var r=p.safeAdd(this.toEpochDay(),t);return LocalDate.ofEpochDay(r)}},{key:"_minusUnit",value:function _minusUnit(t,r){requireNonNull(t,"amountToSubtract");requireNonNull(r,"unit");return this._plusUnit(-1*t,r)}},{key:"minusYears",value:function minusYears(t){return this.plusYears(t*-1)}},{key:"minusMonths",value:function minusMonths(t){return this.plusMonths(t*-1)}},{key:"minusWeeks",value:function minusWeeks(t){return this.plusWeeks(t*-1)}},{key:"minusDays",value:function minusDays(t){return this.plusDays(t*-1)}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.localDate()){return this}return _get(_getPrototypeOf(LocalDate.prototype),"query",this).call(this,t)}},{key:"adjustInto",value:function adjustInto(t){return _get(_getPrototypeOf(LocalDate.prototype),"adjustInto",this).call(this,t)}},{key:"until",value:function until(t,r){if(arguments.length<2){return this.until1(t)}else{return this.until2(t,r)}}},{key:"until2",value:function until2(t,r){var n=LocalDate.from(t);if(r instanceof x){switch(r){case x.DAYS:return this.daysUntil(n);case x.WEEKS:return p.intDiv(this.daysUntil(n),7);case x.MONTHS:return this._monthsUntil(n);case x.YEARS:return p.intDiv(this._monthsUntil(n),12);case x.DECADES:return p.intDiv(this._monthsUntil(n),120);case x.CENTURIES:return p.intDiv(this._monthsUntil(n),1200);case x.MILLENNIA:return p.intDiv(this._monthsUntil(n),12e3);case x.ERAS:return n.getLong(D.ERA)-this.getLong(D.ERA)}throw new i("Unsupported unit: ".concat(r))}return r.between(this,n)}},{key:"daysUntil",value:function daysUntil(t){return t.toEpochDay()-this.toEpochDay()}},{key:"_monthsUntil",value:function _monthsUntil(t){var r=this._prolepticMonth()*32+this.dayOfMonth();var n=t._prolepticMonth()*32+t.dayOfMonth();return p.intDiv(n-r,32)}},{key:"until1",value:function until1(t){var r=LocalDate.from(t);var n=r._prolepticMonth()-this._prolepticMonth();var i=r._day-this._day;if(n>0&&i<0){n--;var o=this.plusMonths(n);i=r.toEpochDay()-o.toEpochDay()}else if(n<0&&i>0){n++;i-=r.lengthOfMonth()}var a=p.intDiv(n,12);var s=p.intMod(n,12);return z.of(a,s,i)}},{key:"atTime",value:function atTime(){if(arguments.length===1){return this.atTime1.apply(this,arguments)}else{return this.atTime4.apply(this,arguments)}}},{key:"atTime1",value:function atTime1(t){requireNonNull(t,"time");if(t instanceof vt){return mt.of(this,t)}else if(t instanceof at){return this._atTimeOffsetTime(t)}else{throw new a("time must be an instance of LocalTime or OffsetTime".concat(t&&t.constructor&&t.constructor.name?", but is ".concat(t.constructor.name):""))}}},{key:"atTime4",value:function atTime4(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;return this.atTime1(vt.of(t,r,n,i))}},{key:"_atTimeOffsetTime",value:function _atTimeOffsetTime(t){return ut.of(mt.of(this,t.toLocalTime()),t.offset())}},{key:"atStartOfDay",value:function atStartOfDay(t){if(t!=null){return this._atStartOfDayWithZone(t)}else{return mt.of(this,vt.MIDNIGHT)}}},{key:"_atStartOfDayWithZone",value:function _atStartOfDayWithZone(t){requireNonNull(t,"zone");var r=this.atTime(vt.MIDNIGHT);if(t instanceof te===false){var n=t.rules().transition(r);if(n!=null&&n.isGap()){r=n.dateTimeAfter()}}return ct.of(r,t)}},{key:"toEpochDay",value:function toEpochDay(){var t=this._year;var r=this._month;var n=0;n+=365*t;if(t>=0){n+=p.intDiv(t+3,4)-p.intDiv(t+99,100)+p.intDiv(t+399,400)}else{n-=p.intDiv(t,-4)-p.intDiv(t,-100)+p.intDiv(t,-400)}n+=p.intDiv(367*r-362,12);n+=this.dayOfMonth()-1;if(r>2){n--;if(!ot.isLeapYear(t)){n--}}return n-dt}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,LocalDate,"other");return this._compareTo0(t)}},{key:"_compareTo0",value:function _compareTo0(t){var r=this._year-t._year;if(r===0){r=this._month-t._month;if(r===0){r=this._day-t._day}}return r}},{key:"isAfter",value:function isAfter(t){return this.compareTo(t)>0}},{key:"isBefore",value:function isBefore(t){return this.compareTo(t)<0}},{key:"isEqual",value:function isEqual(t){return this.compareTo(t)===0}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof LocalDate){return this._compareTo0(t)===0}return false}},{key:"hashCode",value:function hashCode(){var t=this._year;var r=this._month;var n=this._day;return p.hash(t&4294965248^(t<<11)+(r<<6)+n)}},{key:"toString",value:function toString(){var t,r,n;var i=this._year;var o=this._month;var a=this._day;var s=Math.abs(i);if(s<1e3){if(i<0){n="-".concat("".concat(i-1e4).slice(-4))}else{n="".concat(i+1e4).slice(-4)}}else{if(i>9999){n="+".concat(i)}else{n="".concat(i)}}if(o<10){r="-0".concat(o)}else{r="-".concat(o)}if(a<10){t="-0".concat(a)}else{t="-".concat(a)}return n+r+t}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){requireNonNull(t,"formatter");requireInstance(t,We,"formatter");return _get(_getPrototypeOf(LocalDate.prototype),"format",this).call(this,t)}}],[{key:"now",value:function now(t){var r;if(t==null){r=Et.systemDefaultZone()}else if(t instanceof J){r=Et.system(t)}else{r=t}return LocalDate.ofInstant(r.instant(),r.zone())}},{key:"ofInstant",value:function ofInstant(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:J.systemDefault();requireNonNull(t,"instant");var n=r.rules().offset(t);var i=t.epochSecond()+n.totalSeconds();var o=p.floorDiv(i,vt.SECONDS_PER_DAY);return LocalDate.ofEpochDay(o)}},{key:"of",value:function of(t,r,n){return new LocalDate(t,r,n)}},{key:"ofYearDay",value:function ofYearDay(t,n){D.YEAR.checkValidValue(t);var i=ot.isLeapYear(t);if(n===366&&i===false){assert(false,"Invalid date 'DayOfYear 366' as '".concat(t,"' is not a leap year"),r)}var o=F.of(Math.floor((n-1)/31+1));var a=o.firstDayOfYear(i)+o.length(i)-1;if(n>a){o=o.plus(1)}var s=n-o.firstDayOfYear(i)+1;return new LocalDate(t,o.value(),s)}},{key:"ofEpochDay",value:function ofEpochDay(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r,n,i,o,a;a=t+dt;a-=60;r=0;if(a<0){n=p.intDiv(a+1,ft)-1;r=n*400;a+=-n*ft}o=p.intDiv(400*a+591,ft);i=a-(365*o+p.intDiv(o,4)-p.intDiv(o,100)+p.intDiv(o,400));if(i<0){o--;i=a-(365*o+p.intDiv(o,4)-p.intDiv(o,100)+p.intDiv(o,400))}o+=r;var s=i;var c=p.intDiv(s*5+2,153);var u=(c+2)%12+1;var l=s-p.intDiv(c*306+5,10)+1;o+=p.intDiv(c,10);var d=o;return new LocalDate(d,u,l)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");var n=t.query(M.localDate());if(n==null){throw new r("Unable to obtain LocalDate from TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""))}return n}},{key:"parse",value:function parse(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:We.ISO_LOCAL_DATE;assert(r!=null,"formatter",c);return r.parse(t,LocalDate.FROM)}},{key:"_resolvePreviousValid",value:function _resolvePreviousValid(t,r,n){switch(r){case 2:n=Math.min(n,ot.isLeapYear(t)?29:28);break;case 4:case 6:case 9:case 11:n=Math.min(n,30);break}return LocalDate.of(t,r,n)}},{key:"_validate",value:function _validate(t,n,i){var o;D.YEAR.checkValidValue(t);D.MONTH_OF_YEAR.checkValidValue(n);D.DAY_OF_MONTH.checkValidValue(i);if(i>28){o=31;switch(n){case 2:o=ot.isLeapYear(t)?29:28;break;case 4:case 6:case 9:case 11:o=30}if(i>o){if(i===29){assert(false,"Invalid date 'February 29' as '".concat(t,"' is not a leap year"),r)}else{assert(false,"Invalid date '".concat(t,"' '").concat(n,"' '").concat(i,"'"),r)}}}}}]);return LocalDate}($);function _init$i(){pt.MIN=pt.of(w.MIN_VALUE,1,1);pt.MAX=pt.of(w.MAX_VALUE,12,31);pt.EPOCH_0=pt.ofEpochDay(0);pt.FROM=createTemporalQuery("LocalDate.FROM",(function(t){return pt.from(t)}))}var ht=function(t){_inherits(ChronoLocalDateTime,t);var r=_createSuper(ChronoLocalDateTime);function ChronoLocalDateTime(){_classCallCheck(this,ChronoLocalDateTime);return r.apply(this,arguments)}_createClass(ChronoLocalDateTime,[{key:"chronology",value:function chronology(){return this.toLocalDate().chronology()}},{key:"query",value:function query(t){if(t===M.chronology()){return this.chronology()}else if(t===M.precision()){return x.NANOS}else if(t===M.localDate()){return pt.ofEpochDay(this.toLocalDate().toEpochDay())}else if(t===M.localTime()){return this.toLocalTime()}else if(t===M.zone()||t===M.zoneId()||t===M.offset()){return null}return _get(_getPrototypeOf(ChronoLocalDateTime.prototype),"query",this).call(this,t)}},{key:"adjustInto",value:function adjustInto(t){return t.with(D.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(D.NANO_OF_DAY,this.toLocalTime().toNanoOfDay())}},{key:"toInstant",value:function toInstant(t){requireInstance(t,te,"zoneId");return _t.ofEpochSecond(this.toEpochSecond(t),this.toLocalTime().nano())}},{key:"toEpochSecond",value:function toEpochSecond(t){requireNonNull(t,"offset");var r=this.toLocalDate().toEpochDay();var n=r*86400+this.toLocalTime().toSecondOfDay();n-=t.totalSeconds();return p.safeToInt(n)}}]);return ChronoLocalDateTime}(W);var mt=function(t){_inherits(LocalDateTime,t);var n=_createSuper(LocalDateTime);function LocalDateTime(t,r){var i;_classCallCheck(this,LocalDateTime);i=n.call(this);requireInstance(t,pt,"date");requireInstance(r,vt,"time");i._date=t;i._time=r;return i}_createClass(LocalDateTime,[{key:"_withDateTime",value:function _withDateTime(t,r){if(this._date.equals(t)&&this._time.equals(r)){return this}return new LocalDateTime(t,r)}},{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t.isDateBased()||t.isTimeBased()}else if(t instanceof x){return t.isDateBased()||t.isTimeBased()}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){if(t instanceof D){return t.isTimeBased()?this._time.range(t):this._date.range(t)}return t.rangeRefinedBy(this)}},{key:"get",value:function get(t){if(t instanceof D){return t.isTimeBased()?this._time.get(t):this._date.get(t)}return _get(_getPrototypeOf(LocalDateTime.prototype),"get",this).call(this,t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");if(t instanceof D){return t.isTimeBased()?this._time.getLong(t):this._date.getLong(t)}return t.getFrom(this)}},{key:"year",value:function year(){return this._date.year()}},{key:"monthValue",value:function monthValue(){return this._date.monthValue()}},{key:"month",value:function month(){return this._date.month()}},{key:"dayOfMonth",value:function dayOfMonth(){return this._date.dayOfMonth()}},{key:"dayOfYear",value:function dayOfYear(){return this._date.dayOfYear()}},{key:"dayOfWeek",value:function dayOfWeek(){return this._date.dayOfWeek()}},{key:"hour",value:function hour(){return this._time.hour()}},{key:"minute",value:function minute(){return this._time.minute()}},{key:"second",value:function second(){return this._time.second()}},{key:"nano",value:function nano(){return this._time.nano()}},{key:"_withAdjuster",value:function _withAdjuster(t){requireNonNull(t,"adjuster");if(t instanceof pt){return this._withDateTime(t,this._time)}else if(t instanceof vt){return this._withDateTime(this._date,t)}else if(t instanceof LocalDateTime){return t}return _get(_getPrototypeOf(LocalDateTime.prototype),"_withAdjuster",this).call(this,t)}},{key:"_withField",value:function _withField(t,r){requireNonNull(t,"field");if(t instanceof D){if(t.isTimeBased()){return this._withDateTime(this._date,this._time.with(t,r))}else{return this._withDateTime(this._date.with(t,r),this._time)}}return t.adjustInto(this,r)}},{key:"withYear",value:function withYear(t){return this._withDateTime(this._date.withYear(t),this._time)}},{key:"withMonth",value:function withMonth(t){return this._withDateTime(this._date.withMonth(t),this._time)}},{key:"withDayOfMonth",value:function withDayOfMonth(t){return this._withDateTime(this._date.withDayOfMonth(t),this._time)}},{key:"withDayOfYear",value:function withDayOfYear(t){return this._withDateTime(this._date.withDayOfYear(t),this._time)}},{key:"withHour",value:function withHour(t){var r=this._time.withHour(t);return this._withDateTime(this._date,r)}},{key:"withMinute",value:function withMinute(t){var r=this._time.withMinute(t);return this._withDateTime(this._date,r)}},{key:"withSecond",value:function withSecond(t){var r=this._time.withSecond(t);return this._withDateTime(this._date,r)}},{key:"withNano",value:function withNano(t){var r=this._time.withNano(t);return this._withDateTime(this._date,r)}},{key:"truncatedTo",value:function truncatedTo(t){return this._withDateTime(this._date,this._time.truncatedTo(t))}},{key:"_plusUnit",value:function _plusUnit(t,r){requireNonNull(r,"unit");if(r instanceof x){switch(r){case x.NANOS:return this.plusNanos(t);case x.MICROS:return this.plusDays(p.intDiv(t,vt.MICROS_PER_DAY)).plusNanos(p.intMod(t,vt.MICROS_PER_DAY)*1e3);case x.MILLIS:return this.plusDays(p.intDiv(t,vt.MILLIS_PER_DAY)).plusNanos(p.intMod(t,vt.MILLIS_PER_DAY)*1e6);case x.SECONDS:return this.plusSeconds(t);case x.MINUTES:return this.plusMinutes(t);case x.HOURS:return this.plusHours(t);case x.HALF_DAYS:return this.plusDays(p.intDiv(t,256)).plusHours(p.intMod(t,256)*12)}return this._withDateTime(this._date.plus(t,r),this._time)}return r.addTo(this,t)}},{key:"plusYears",value:function plusYears(t){var r=this._date.plusYears(t);return this._withDateTime(r,this._time)}},{key:"plusMonths",value:function plusMonths(t){var r=this._date.plusMonths(t);return this._withDateTime(r,this._time)}},{key:"plusWeeks",value:function plusWeeks(t){var r=this._date.plusWeeks(t);return this._withDateTime(r,this._time)}},{key:"plusDays",value:function plusDays(t){var r=this._date.plusDays(t);return this._withDateTime(r,this._time)}},{key:"plusHours",value:function plusHours(t){return this._plusWithOverflow(this._date,t,0,0,0,1)}},{key:"plusMinutes",value:function plusMinutes(t){return this._plusWithOverflow(this._date,0,t,0,0,1)}},{key:"plusSeconds",value:function plusSeconds(t){return this._plusWithOverflow(this._date,0,0,t,0,1)}},{key:"plusNanos",value:function plusNanos(t){return this._plusWithOverflow(this._date,0,0,0,t,1)}},{key:"_minusUnit",value:function _minusUnit(t,r){requireNonNull(r,"unit");return this._plusUnit(-1*t,r)}},{key:"minusYears",value:function minusYears(t){return this.plusYears(-1*t)}},{key:"minusMonths",value:function minusMonths(t){return this.plusMonths(-1*t)}},{key:"minusWeeks",value:function minusWeeks(t){return this.plusWeeks(-1*t)}},{key:"minusDays",value:function minusDays(t){return this.plusDays(-1*t)}},{key:"minusHours",value:function minusHours(t){return this._plusWithOverflow(this._date,t,0,0,0,-1)}},{key:"minusMinutes",value:function minusMinutes(t){return this._plusWithOverflow(this._date,0,t,0,0,-1)}},{key:"minusSeconds",value:function minusSeconds(t){return this._plusWithOverflow(this._date,0,0,t,0,-1)}},{key:"minusNanos",value:function minusNanos(t){return this._plusWithOverflow(this._date,0,0,0,t,-1)}},{key:"_plusWithOverflow",value:function _plusWithOverflow(t,r,n,i,o,a){if(r===0&&n===0&&i===0&&o===0){return this._withDateTime(t,this._time)}var s=p.intDiv(o,vt.NANOS_PER_DAY)+p.intDiv(i,vt.SECONDS_PER_DAY)+p.intDiv(n,vt.MINUTES_PER_DAY)+p.intDiv(r,vt.HOURS_PER_DAY);s*=a;var c=p.intMod(o,vt.NANOS_PER_DAY)+p.intMod(i,vt.SECONDS_PER_DAY)*vt.NANOS_PER_SECOND+p.intMod(n,vt.MINUTES_PER_DAY)*vt.NANOS_PER_MINUTE+p.intMod(r,vt.HOURS_PER_DAY)*vt.NANOS_PER_HOUR;var u=this._time.toNanoOfDay();c=c*a+u;s+=p.floorDiv(c,vt.NANOS_PER_DAY);var l=p.floorMod(c,vt.NANOS_PER_DAY);var d=l===u?this._time:vt.ofNanoOfDay(l);return this._withDateTime(t.plusDays(s),d)}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.localDate()){return this.toLocalDate()}return _get(_getPrototypeOf(LocalDateTime.prototype),"query",this).call(this,t)}},{key:"adjustInto",value:function adjustInto(t){return _get(_getPrototypeOf(LocalDateTime.prototype),"adjustInto",this).call(this,t)}},{key:"until",value:function until(t,r){requireNonNull(t,"endExclusive");requireNonNull(r,"unit");var n=LocalDateTime.from(t);if(r instanceof x){if(r.isTimeBased()){var o=this._date.daysUntil(n._date);var a=n._time.toNanoOfDay()-this._time.toNanoOfDay();if(o>0&&a<0){o--;a+=vt.NANOS_PER_DAY}else if(o<0&&a>0){o++;a-=vt.NANOS_PER_DAY}var s=o;switch(r){case x.NANOS:s=p.safeMultiply(s,vt.NANOS_PER_DAY);return p.safeAdd(s,a);case x.MICROS:s=p.safeMultiply(s,vt.MICROS_PER_DAY);return p.safeAdd(s,p.intDiv(a,1e3));case x.MILLIS:s=p.safeMultiply(s,vt.MILLIS_PER_DAY);return p.safeAdd(s,p.intDiv(a,1e6));case x.SECONDS:s=p.safeMultiply(s,vt.SECONDS_PER_DAY);return p.safeAdd(s,p.intDiv(a,vt.NANOS_PER_SECOND));case x.MINUTES:s=p.safeMultiply(s,vt.MINUTES_PER_DAY);return p.safeAdd(s,p.intDiv(a,vt.NANOS_PER_MINUTE));case x.HOURS:s=p.safeMultiply(s,vt.HOURS_PER_DAY);return p.safeAdd(s,p.intDiv(a,vt.NANOS_PER_HOUR));case x.HALF_DAYS:s=p.safeMultiply(s,2);return p.safeAdd(s,p.intDiv(a,vt.NANOS_PER_HOUR*12))}throw new i("Unsupported unit: ".concat(r))}var c=n._date;var u=n._time;if(c.isAfter(this._date)&&u.isBefore(this._time)){c=c.minusDays(1)}else if(c.isBefore(this._date)&&u.isAfter(this._time)){c=c.plusDays(1)}return this._date.until(c,r)}return r.between(this,n)}},{key:"atOffset",value:function atOffset(t){return ut.of(this,t)}},{key:"atZone",value:function atZone(t){return ct.of(this,t)}},{key:"toLocalDate",value:function toLocalDate(){return this._date}},{key:"toLocalTime",value:function toLocalTime(){return this._time}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,LocalDateTime,"other");return this._compareTo0(t)}},{key:"_compareTo0",value:function _compareTo0(t){var r=this._date.compareTo(t.toLocalDate());if(r===0){r=this._time.compareTo(t.toLocalTime())}return r}},{key:"isAfter",value:function isAfter(t){return this.compareTo(t)>0}},{key:"isBefore",value:function isBefore(t){return this.compareTo(t)<0}},{key:"isEqual",value:function isEqual(t){return this.compareTo(t)===0}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof LocalDateTime){return this._date.equals(t._date)&&this._time.equals(t._time)}return false}},{key:"hashCode",value:function hashCode(){return this._date.hashCode()^this._time.hashCode()}},{key:"toString",value:function toString(){return"".concat(this._date.toString(),"T").concat(this._time.toString())}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){requireNonNull(t,"formatter");return t.format(this)}}],[{key:"now",value:function now(t){if(t==null){return LocalDateTime._now(Et.systemDefaultZone())}else if(t instanceof Et){return LocalDateTime._now(t)}else{return LocalDateTime._now(Et.system(t))}}},{key:"_now",value:function _now(t){requireNonNull(t,"clock");return LocalDateTime.ofInstant(t.instant(),t.zone())}},{key:"_ofEpochMillis",value:function _ofEpochMillis(t,r){var n=p.floorDiv(t,1e3)+r.totalSeconds();var i=p.floorDiv(n,vt.SECONDS_PER_DAY);var o=p.floorMod(n,vt.SECONDS_PER_DAY);var a=p.floorMod(t,1e3)*1e6;var s=pt.ofEpochDay(i);var c=vt.ofSecondOfDay(o,a);return new LocalDateTime(s,c)}},{key:"of",value:function of(){if(arguments.length<=2){return LocalDateTime.ofDateAndTime.apply(this,arguments)}else{return LocalDateTime.ofNumbers.apply(this,arguments)}}},{key:"ofNumbers",value:function ofNumbers(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var s=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var c=pt.of(t,r,n);var u=vt.of(i,o,a,s);return new LocalDateTime(c,u)}},{key:"ofDateAndTime",value:function ofDateAndTime(t,r){requireNonNull(t,"date");requireNonNull(r,"time");return new LocalDateTime(t,r)}},{key:"ofInstant",value:function ofInstant(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:J.systemDefault();requireNonNull(t,"instant");requireInstance(t,_t,"instant");requireNonNull(r,"zone");var n=r.rules().offset(t);return LocalDateTime.ofEpochSecond(t.epochSecond(),t.nano(),n)}},{key:"ofEpochSecond",value:function ofEpochSecond(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2?arguments[2]:undefined;if(arguments.length===2&&r instanceof te){n=r;r=0}requireNonNull(n,"offset");var i=t+n.totalSeconds();var o=p.floorDiv(i,vt.SECONDS_PER_DAY);var a=p.floorMod(i,vt.SECONDS_PER_DAY);var s=pt.ofEpochDay(o);var c=vt.ofSecondOfDay(a,r);return new LocalDateTime(s,c)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");if(t instanceof LocalDateTime){return t}else if(t instanceof ct){return t.toLocalDateTime()}try{var n=pt.from(t);var i=vt.from(t);return new LocalDateTime(n,i)}catch(n){throw new r("Unable to obtain LocalDateTime TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""))}}},{key:"parse",value:function parse(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:We.ISO_LOCAL_DATE_TIME;requireNonNull(r,"formatter");return r.parse(t,LocalDateTime.FROM)}}]);return LocalDateTime}(ht);function _init$j(){mt.MIN=mt.of(pt.MIN,vt.MIN);mt.MAX=mt.of(pt.MAX,vt.MAX);mt.FROM=createTemporalQuery("LocalDateTime.FROM",(function(t){return mt.from(t)}))}var vt=function(t){_inherits(LocalTime,t);var n=_createSuper(LocalTime);function LocalTime(){var t;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,LocalTime);t=n.call(this);var s=p.safeToInt(r);var c=p.safeToInt(i);var u=p.safeToInt(o);var l=p.safeToInt(a);LocalTime._validate(s,c,u,l);if(c===0&&u===0&&l===0){if(!LocalTime.HOURS[s]){t._hour=s;t._minute=c;t._second=u;t._nano=l;LocalTime.HOURS[s]=_assertThisInitialized(t)}return _possibleConstructorReturn(t,LocalTime.HOURS[s])}t._hour=s;t._minute=c;t._second=u;t._nano=l;return t}_createClass(LocalTime,[{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t.isTimeBased()}else if(t instanceof x){return t.isTimeBased()}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){requireNonNull(t);return _get(_getPrototypeOf(LocalTime.prototype),"range",this).call(this,t)}},{key:"get",value:function get(t){return this.getLong(t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");if(t instanceof D){return this._get0(t)}return t.getFrom(this)}},{key:"_get0",value:function _get0(t){switch(t){case D.NANO_OF_SECOND:return this._nano;case D.NANO_OF_DAY:return this.toNanoOfDay();case D.MICRO_OF_SECOND:return p.intDiv(this._nano,1e3);case D.MICRO_OF_DAY:return p.intDiv(this.toNanoOfDay(),1e3);case D.MILLI_OF_SECOND:return p.intDiv(this._nano,1e6);case D.MILLI_OF_DAY:return p.intDiv(this.toNanoOfDay(),1e6);case D.SECOND_OF_MINUTE:return this._second;case D.SECOND_OF_DAY:return this.toSecondOfDay();case D.MINUTE_OF_HOUR:return this._minute;case D.MINUTE_OF_DAY:return this._hour*60+this._minute;case D.HOUR_OF_AMPM:return p.intMod(this._hour,12);case D.CLOCK_HOUR_OF_AMPM:{var r=p.intMod(this._hour,12);return r%12===0?12:r}case D.HOUR_OF_DAY:return this._hour;case D.CLOCK_HOUR_OF_DAY:return this._hour===0?24:this._hour;case D.AMPM_OF_DAY:return p.intDiv(this._hour,12)}throw new i("Unsupported field: ".concat(t))}},{key:"hour",value:function hour(){return this._hour}},{key:"minute",value:function minute(){return this._minute}},{key:"second",value:function second(){return this._second}},{key:"nano",value:function nano(){return this._nano}},{key:"_withAdjuster",value:function _withAdjuster(t){requireNonNull(t,"adjuster");if(t instanceof LocalTime){return t}return _get(_getPrototypeOf(LocalTime.prototype),"_withAdjuster",this).call(this,t)}},{key:"_withField",value:function _withField(t,r){requireNonNull(t,"field");requireInstance(t,N,"field");if(t instanceof D){t.checkValidValue(r);switch(t){case D.NANO_OF_SECOND:return this.withNano(r);case D.NANO_OF_DAY:return LocalTime.ofNanoOfDay(r);case D.MICRO_OF_SECOND:return this.withNano(r*1e3);case D.MICRO_OF_DAY:return LocalTime.ofNanoOfDay(r*1e3);case D.MILLI_OF_SECOND:return this.withNano(r*1e6);case D.MILLI_OF_DAY:return LocalTime.ofNanoOfDay(r*1e6);case D.SECOND_OF_MINUTE:return this.withSecond(r);case D.SECOND_OF_DAY:return this.plusSeconds(r-this.toSecondOfDay());case D.MINUTE_OF_HOUR:return this.withMinute(r);case D.MINUTE_OF_DAY:return this.plusMinutes(r-(this._hour*60+this._minute));case D.HOUR_OF_AMPM:return this.plusHours(r-p.intMod(this._hour,12));case D.CLOCK_HOUR_OF_AMPM:return this.plusHours((r===12?0:r)-p.intMod(this._hour,12));case D.HOUR_OF_DAY:return this.withHour(r);case D.CLOCK_HOUR_OF_DAY:return this.withHour(r===24?0:r);case D.AMPM_OF_DAY:return this.plusHours((r-p.intDiv(this._hour,12))*12)}throw new i("Unsupported field: ".concat(t))}return t.adjustInto(this,r)}},{key:"withHour",value:function withHour(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this._hour===t){return this}return new LocalTime(t,this._minute,this._second,this._nano)}},{key:"withMinute",value:function withMinute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this._minute===t){return this}return new LocalTime(this._hour,t,this._second,this._nano)}},{key:"withSecond",value:function withSecond(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this._second===t){return this}return new LocalTime(this._hour,this._minute,t,this._nano)}},{key:"withNano",value:function withNano(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this._nano===t){return this}return new LocalTime(this._hour,this._minute,this._second,t)}},{key:"truncatedTo",value:function truncatedTo(t){requireNonNull(t,"unit");if(t===x.NANOS){return this}var n=t.duration();if(n.seconds()>LocalTime.SECONDS_PER_DAY){throw new r("Unit is too large to be used for truncation")}var i=n.toNanos();if(p.intMod(LocalTime.NANOS_PER_DAY,i)!==0){throw new r("Unit must divide into a standard day without remainder")}var o=this.toNanoOfDay();return LocalTime.ofNanoOfDay(p.intDiv(o,i)*i)}},{key:"_plusUnit",value:function _plusUnit(t,r){requireNonNull(r,"unit");if(r instanceof x){switch(r){case x.NANOS:return this.plusNanos(t);case x.MICROS:return this.plusNanos(p.intMod(t,LocalTime.MICROS_PER_DAY)*1e3);case x.MILLIS:return this.plusNanos(p.intMod(t,LocalTime.MILLIS_PER_DAY)*1e6);case x.SECONDS:return this.plusSeconds(t);case x.MINUTES:return this.plusMinutes(t);case x.HOURS:return this.plusHours(t);case x.HALF_DAYS:return this.plusHours(p.intMod(t,2)*12)}throw new i("Unsupported unit: ".concat(r))}return r.addTo(this,t)}},{key:"plusHours",value:function plusHours(t){if(t===0){return this}var r=p.intMod(p.intMod(t,LocalTime.HOURS_PER_DAY)+this._hour+LocalTime.HOURS_PER_DAY,LocalTime.HOURS_PER_DAY);return new LocalTime(r,this._minute,this._second,this._nano)}},{key:"plusMinutes",value:function plusMinutes(t){if(t===0){return this}var r=this._hour*LocalTime.MINUTES_PER_HOUR+this._minute;var n=p.intMod(p.intMod(t,LocalTime.MINUTES_PER_DAY)+r+LocalTime.MINUTES_PER_DAY,LocalTime.MINUTES_PER_DAY);if(r===n){return this}var i=p.intDiv(n,LocalTime.MINUTES_PER_HOUR);var o=p.intMod(n,LocalTime.MINUTES_PER_HOUR);return new LocalTime(i,o,this._second,this._nano)}},{key:"plusSeconds",value:function plusSeconds(t){if(t===0){return this}var r=this._hour*LocalTime.SECONDS_PER_HOUR+this._minute*LocalTime.SECONDS_PER_MINUTE+this._second;var n=p.intMod(p.intMod(t,LocalTime.SECONDS_PER_DAY)+r+LocalTime.SECONDS_PER_DAY,LocalTime.SECONDS_PER_DAY);if(r===n){return this}var i=p.intDiv(n,LocalTime.SECONDS_PER_HOUR);var o=p.intMod(p.intDiv(n,LocalTime.SECONDS_PER_MINUTE),LocalTime.MINUTES_PER_HOUR);var a=p.intMod(n,LocalTime.SECONDS_PER_MINUTE);return new LocalTime(i,o,a,this._nano)}},{key:"plusNanos",value:function plusNanos(t){if(t===0){return this}var r=this.toNanoOfDay();var n=p.intMod(p.intMod(t,LocalTime.NANOS_PER_DAY)+r+LocalTime.NANOS_PER_DAY,LocalTime.NANOS_PER_DAY);if(r===n){return this}var i=p.intDiv(n,LocalTime.NANOS_PER_HOUR);var o=p.intMod(p.intDiv(n,LocalTime.NANOS_PER_MINUTE),LocalTime.MINUTES_PER_HOUR);var a=p.intMod(p.intDiv(n,LocalTime.NANOS_PER_SECOND),LocalTime.SECONDS_PER_MINUTE);var s=p.intMod(n,LocalTime.NANOS_PER_SECOND);return new LocalTime(i,o,a,s)}},{key:"_minusUnit",value:function _minusUnit(t,r){requireNonNull(r,"unit");return this._plusUnit(-1*t,r)}},{key:"minusHours",value:function minusHours(t){return this.plusHours(-1*p.intMod(t,LocalTime.HOURS_PER_DAY))}},{key:"minusMinutes",value:function minusMinutes(t){return this.plusMinutes(-1*p.intMod(t,LocalTime.MINUTES_PER_DAY))}},{key:"minusSeconds",value:function minusSeconds(t){return this.plusSeconds(-1*p.intMod(t,LocalTime.SECONDS_PER_DAY))}},{key:"minusNanos",value:function minusNanos(t){return this.plusNanos(-1*p.intMod(t,LocalTime.NANOS_PER_DAY))}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.precision()){return x.NANOS}else if(t===M.localTime()){return this}if(t===M.chronology()||t===M.zoneId()||t===M.zone()||t===M.offset()||t===M.localDate()){return null}return t.queryFrom(this)}},{key:"adjustInto",value:function adjustInto(t){return t.with(LocalTime.NANO_OF_DAY,this.toNanoOfDay())}},{key:"until",value:function until(t,r){requireNonNull(t,"endExclusive");requireNonNull(r,"unit");var n=LocalTime.from(t);if(r instanceof x){var o=n.toNanoOfDay()-this.toNanoOfDay();switch(r){case x.NANOS:return o;case x.MICROS:return p.intDiv(o,1e3);case x.MILLIS:return p.intDiv(o,1e6);case x.SECONDS:return p.intDiv(o,LocalTime.NANOS_PER_SECOND);case x.MINUTES:return p.intDiv(o,LocalTime.NANOS_PER_MINUTE);case x.HOURS:return p.intDiv(o,LocalTime.NANOS_PER_HOUR);case x.HALF_DAYS:return p.intDiv(o,12*LocalTime.NANOS_PER_HOUR)}throw new i("Unsupported unit: ".concat(r))}return r.between(this,n)}},{key:"atDate",value:function atDate(t){return mt.of(t,this)}},{key:"atOffset",value:function atOffset(t){return at.of(this,t)}},{key:"toSecondOfDay",value:function toSecondOfDay(){var t=this._hour*LocalTime.SECONDS_PER_HOUR;t+=this._minute*LocalTime.SECONDS_PER_MINUTE;t+=this._second;return t}},{key:"toNanoOfDay",value:function toNanoOfDay(){var t=this._hour*LocalTime.NANOS_PER_HOUR;t+=this._minute*LocalTime.NANOS_PER_MINUTE;t+=this._second*LocalTime.NANOS_PER_SECOND;t+=this._nano;return t}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"other");requireInstance(t,LocalTime,"other");var r=p.compareNumbers(this._hour,t._hour);if(r===0){r=p.compareNumbers(this._minute,t._minute);if(r===0){r=p.compareNumbers(this._second,t._second);if(r===0){r=p.compareNumbers(this._nano,t._nano)}}}return r}},{key:"isAfter",value:function isAfter(t){return this.compareTo(t)>0}},{key:"isBefore",value:function isBefore(t){return this.compareTo(t)<0}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof LocalTime){return this._hour===t._hour&&this._minute===t._minute&&this._second===t._second&&this._nano===t._nano}return false}},{key:"hashCode",value:function hashCode(){var t=this.toNanoOfDay();return p.hash(t)}},{key:"toString",value:function toString(){var t="";var r=this._hour;var n=this._minute;var i=this._second;var o=this._nano;t+=r<10?"0":"";t+=r;t+=n<10?":0":":";t+=n;if(i>0||o>0){t+=i<10?":0":":";t+=i;if(o>0){t+=".";if(p.intMod(o,1e6)===0){t+="".concat(p.intDiv(o,1e6)+1e3).substring(1)}else if(p.intMod(o,1e3)===0){t+="".concat(p.intDiv(o,1e3)+1e6).substring(1)}else{t+="".concat(o+1e9).substring(1)}}}return t}},{key:"toJSON",value:function toJSON(){return this.toString()}},{key:"format",value:function format(t){requireNonNull(t,"formatter");return t.format(this)}}],[{key:"now",value:function now(t){if(t==null){return LocalTime._now(Et.systemDefaultZone())}else if(t instanceof Et){return LocalTime._now(t)}else{return LocalTime._now(Et.system(t))}}},{key:"_now",value:function _now(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Et.systemDefaultZone();requireNonNull(t,"clock");return LocalTime.ofInstant(t.instant(),t.zone())}},{key:"ofInstant",value:function ofInstant(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:J.systemDefault();var n=r.rules().offset(t);var i=p.intMod(t.epochSecond(),LocalTime.SECONDS_PER_DAY);i=p.intMod(i+n.totalSeconds(),LocalTime.SECONDS_PER_DAY);if(i<0){i+=LocalTime.SECONDS_PER_DAY}return LocalTime.ofSecondOfDay(i,t.nano())}},{key:"of",value:function of(t,r,n,i){return new LocalTime(t,r,n,i)}},{key:"ofSecondOfDay",value:function ofSecondOfDay(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;D.SECOND_OF_DAY.checkValidValue(t);D.NANO_OF_SECOND.checkValidValue(r);var n=p.intDiv(t,LocalTime.SECONDS_PER_HOUR);t-=n*LocalTime.SECONDS_PER_HOUR;var i=p.intDiv(t,LocalTime.SECONDS_PER_MINUTE);t-=i*LocalTime.SECONDS_PER_MINUTE;return new LocalTime(n,i,t,r)}},{key:"ofNanoOfDay",value:function ofNanoOfDay(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;D.NANO_OF_DAY.checkValidValue(t);var r=p.intDiv(t,LocalTime.NANOS_PER_HOUR);t-=r*LocalTime.NANOS_PER_HOUR;var n=p.intDiv(t,LocalTime.NANOS_PER_MINUTE);t-=n*LocalTime.NANOS_PER_MINUTE;var i=p.intDiv(t,LocalTime.NANOS_PER_SECOND);t-=i*LocalTime.NANOS_PER_SECOND;return new LocalTime(r,n,i,t)}},{key:"from",value:function from(t){requireNonNull(t,"temporal");var n=t.query(M.localTime());if(n==null){throw new r("Unable to obtain LocalTime TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""))}return n}},{key:"parse",value:function parse(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:We.ISO_LOCAL_TIME;requireNonNull(r,"formatter");return r.parse(t,LocalTime.FROM)}},{key:"_validate",value:function _validate(t,r,n,i){D.HOUR_OF_DAY.checkValidValue(t);D.MINUTE_OF_HOUR.checkValidValue(r);D.SECOND_OF_MINUTE.checkValidValue(n);D.NANO_OF_SECOND.checkValidValue(i)}}]);return LocalTime}(W);function _init$k(){vt.HOURS=[];for(var t=0;t<24;t++){vt.of(t,0,0,0)}vt.MIN=vt.HOURS[0];vt.MAX=new vt(23,59,59,999999999);vt.MIDNIGHT=vt.HOURS[0];vt.NOON=vt.HOURS[12];vt.FROM=createTemporalQuery("LocalTime.FROM",(function(t){return vt.from(t)}))}vt.HOURS_PER_DAY=24;vt.MINUTES_PER_HOUR=60;vt.MINUTES_PER_DAY=vt.MINUTES_PER_HOUR*vt.HOURS_PER_DAY;vt.SECONDS_PER_MINUTE=60;vt.SECONDS_PER_HOUR=vt.SECONDS_PER_MINUTE*vt.MINUTES_PER_HOUR;vt.SECONDS_PER_DAY=vt.SECONDS_PER_HOUR*vt.HOURS_PER_DAY;vt.MILLIS_PER_DAY=vt.SECONDS_PER_DAY*1e3;vt.MICROS_PER_DAY=vt.SECONDS_PER_DAY*1e6;vt.NANOS_PER_SECOND=1e9;vt.NANOS_PER_MINUTE=vt.NANOS_PER_SECOND*vt.SECONDS_PER_MINUTE;vt.NANOS_PER_HOUR=vt.NANOS_PER_MINUTE*vt.MINUTES_PER_HOUR;vt.NANOS_PER_DAY=vt.NANOS_PER_HOUR*vt.HOURS_PER_DAY;var yt=1e6;var _t=function(t){_inherits(Instant,t);var n=_createSuper(Instant);function Instant(t,r){var i;_classCallCheck(this,Instant);i=n.call(this);Instant._validate(t,r);i._seconds=p.safeToInt(t);i._nanos=p.safeToInt(r);return i}_createClass(Instant,[{key:"isSupported",value:function isSupported(t){if(t instanceof D){return t===D.INSTANT_SECONDS||t===D.NANO_OF_SECOND||t===D.MICRO_OF_SECOND||t===D.MILLI_OF_SECOND}if(t instanceof x){return t.isTimeBased()||t===x.DAYS}return t!=null&&t.isSupportedBy(this)}},{key:"range",value:function range(t){return _get(_getPrototypeOf(Instant.prototype),"range",this).call(this,t)}},{key:"get",value:function get(t){return this.getLong(t)}},{key:"getLong",value:function getLong(t){if(t instanceof D){switch(t){case D.NANO_OF_SECOND:return this._nanos;case D.MICRO_OF_SECOND:return p.intDiv(this._nanos,1e3);case D.MILLI_OF_SECOND:return p.intDiv(this._nanos,yt);case D.INSTANT_SECONDS:return this._seconds}throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"epochSecond",value:function epochSecond(){return this._seconds}},{key:"nano",value:function nano(){return this._nanos}},{key:"_withField",value:function _withField(t,r){requireNonNull(t,"field");if(t instanceof D){t.checkValidValue(r);switch(t){case D.MILLI_OF_SECOND:{var n=r*yt;return n!==this._nanos?Instant._create(this._seconds,n):this}case D.MICRO_OF_SECOND:{var o=r*1e3;return o!==this._nanos?Instant._create(this._seconds,o):this}case D.NANO_OF_SECOND:return r!==this._nanos?Instant._create(this._seconds,r):this;case D.INSTANT_SECONDS:return r!==this._seconds?Instant._create(r,this._nanos):this}throw new i("Unsupported field: ".concat(t))}return t.adjustInto(this,r)}},{key:"truncatedTo",value:function truncatedTo(t){requireNonNull(t,"unit");if(t===x.NANOS){return this}var n=t.duration();if(n.seconds()>vt.SECONDS_PER_DAY){throw new r("Unit is too large to be used for truncation")}var i=n.toNanos();if(p.intMod(vt.NANOS_PER_DAY,i)!==0){throw new r("Unit must divide into a standard day without remainder")}var o=p.intMod(this._seconds,vt.SECONDS_PER_DAY)*vt.NANOS_PER_SECOND+this._nanos;var a=p.intDiv(o,i)*i;return this.plusNanos(a-o)}},{key:"_plusUnit",value:function _plusUnit(t,r){requireNonNull(t,"amountToAdd");requireNonNull(r,"unit");requireInstance(r,E);if(r instanceof x){switch(r){case x.NANOS:return this.plusNanos(t);case x.MICROS:return this._plus(p.intDiv(t,1e6),p.intMod(t,1e6)*1e3);case x.MILLIS:return this.plusMillis(t);case x.SECONDS:return this.plusSeconds(t);case x.MINUTES:return this.plusSeconds(p.safeMultiply(t,vt.SECONDS_PER_MINUTE));case x.HOURS:return this.plusSeconds(p.safeMultiply(t,vt.SECONDS_PER_HOUR));case x.HALF_DAYS:return this.plusSeconds(p.safeMultiply(t,vt.SECONDS_PER_DAY/2));case x.DAYS:return this.plusSeconds(p.safeMultiply(t,vt.SECONDS_PER_DAY))}throw new i("Unsupported unit: ".concat(r))}return r.addTo(this,t)}},{key:"plusSeconds",value:function plusSeconds(t){return this._plus(t,0)}},{key:"plusMillis",value:function plusMillis(t){return this._plus(p.intDiv(t,1e3),p.intMod(t,1e3)*yt)}},{key:"plusNanos",value:function plusNanos(t){return this._plus(0,t)}},{key:"_plus",value:function _plus(t,r){if(t===0&&r===0){return this}var n=this._seconds+t;n=n+p.intDiv(r,vt.NANOS_PER_SECOND);var i=this._nanos+r%vt.NANOS_PER_SECOND;return Instant.ofEpochSecond(n,i)}},{key:"_minusUnit",value:function _minusUnit(t,r){return this._plusUnit(-1*t,r)}},{key:"minusSeconds",value:function minusSeconds(t){return this.plusSeconds(t*-1)}},{key:"minusMillis",value:function minusMillis(t){return this.plusMillis(-1*t)}},{key:"minusNanos",value:function minusNanos(t){return this.plusNanos(-1*t)}},{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.precision()){return x.NANOS}if(t===M.localDate()||t===M.localTime()||t===M.chronology()||t===M.zoneId()||t===M.zone()||t===M.offset()){return null}return t.queryFrom(this)}},{key:"adjustInto",value:function adjustInto(t){requireNonNull(t,"temporal");return t.with(D.INSTANT_SECONDS,this._seconds).with(D.NANO_OF_SECOND,this._nanos)}},{key:"until",value:function until(t,r){requireNonNull(t,"endExclusive");requireNonNull(r,"unit");var n=Instant.from(t);if(r instanceof x){switch(r){case x.NANOS:return this._nanosUntil(n);case x.MICROS:return this._microsUntil(n);case x.MILLIS:return p.safeSubtract(n.toEpochMilli(),this.toEpochMilli());case x.SECONDS:return this._secondsUntil(n);case x.MINUTES:return p.intDiv(this._secondsUntil(n),vt.SECONDS_PER_MINUTE);case x.HOURS:return p.intDiv(this._secondsUntil(n),vt.SECONDS_PER_HOUR);case x.HALF_DAYS:return p.intDiv(this._secondsUntil(n),12*vt.SECONDS_PER_HOUR);case x.DAYS:return p.intDiv(this._secondsUntil(n),vt.SECONDS_PER_DAY)}throw new i("Unsupported unit: ".concat(r))}return r.between(this,n)}},{key:"_microsUntil",value:function _microsUntil(t){var r=p.safeSubtract(t.epochSecond(),this.epochSecond());var n=p.safeMultiply(r,1e6);return p.safeAdd(n,p.intDiv(t.nano()-this.nano(),1e3))}},{key:"_nanosUntil",value:function _nanosUntil(t){var r=p.safeSubtract(t.epochSecond(),this.epochSecond());var n=p.safeMultiply(r,vt.NANOS_PER_SECOND);return p.safeAdd(n,t.nano()-this.nano())}},{key:"_secondsUntil",value:function _secondsUntil(t){var r=p.safeSubtract(t.epochSecond(),this.epochSecond());var n=t.nano()-this.nano();if(r>0&&n<0){r--}else if(r<0&&n>0){r++}return r}},{key:"atOffset",value:function atOffset(t){return ut.ofInstant(this,t)}},{key:"atZone",value:function atZone(t){return ct.ofInstant(this,t)}},{key:"toEpochMilli",value:function toEpochMilli(){var t=p.safeMultiply(this._seconds,1e3);return t+p.intDiv(this._nanos,yt)}},{key:"compareTo",value:function compareTo(t){requireNonNull(t,"otherInstant");requireInstance(t,Instant,"otherInstant");var r=p.compareNumbers(this._seconds,t._seconds);if(r!==0){return r}return this._nanos-t._nanos}},{key:"isAfter",value:function isAfter(t){return this.compareTo(t)>0}},{key:"isBefore",value:function isBefore(t){return this.compareTo(t)<0}},{key:"equals",value:function equals(t){if(this===t){return true}if(t instanceof Instant){return this.epochSecond()===t.epochSecond()&&this.nano()===t.nano()}return false}},{key:"hashCode",value:function hashCode(){return p.hashCode(this._seconds,this._nanos)}},{key:"toString",value:function toString(){return We.ISO_INSTANT.format(this)}},{key:"toJSON",value:function toJSON(){return this.toString()}}],[{key:"now",value:function now(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Et.systemUTC();return t.instant()}},{key:"ofEpochSecond",value:function ofEpochSecond(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=t+p.floorDiv(r,vt.NANOS_PER_SECOND);var i=p.floorMod(r,vt.NANOS_PER_SECOND);return Instant._create(n,i)}},{key:"ofEpochMilli",value:function ofEpochMilli(t){var r=p.floorDiv(t,1e3);var n=p.floorMod(t,1e3);return Instant._create(r,n*1e6)}},{key:"from",value:function from(t){try{var n=t.getLong(D.INSTANT_SECONDS);var i=t.get(D.NANO_OF_SECOND);return Instant.ofEpochSecond(n,i)}catch(n){throw new r("Unable to obtain Instant from TemporalAccessor: ".concat(t,", type ").concat(_typeof(t)),n)}}},{key:"parse",value:function parse(t){return We.ISO_INSTANT.parse(t,Instant.FROM)}},{key:"_create",value:function _create(t,r){if(t===0&&r===0){return Instant.EPOCH}return new Instant(t,r)}},{key:"_validate",value:function _validate(t,n){if(t<Instant.MIN_SECONDS||t>Instant.MAX_SECONDS){throw new r("Instant exceeds minimum or maximum instant")}if(n<0||n>vt.NANOS_PER_SECOND){throw new r("Instant exceeds minimum or maximum instant")}}}]);return Instant}(W);function _init$l(){_t.MIN_SECONDS=-31619119219200;_t.MAX_SECONDS=31494816403199;_t.EPOCH=new _t(0,0);_t.MIN=_t.ofEpochSecond(_t.MIN_SECONDS,0);_t.MAX=_t.ofEpochSecond(_t.MAX_SECONDS,999999999);_t.FROM=createTemporalQuery("Instant.FROM",(function(t){return _t.from(t)}))}var Et=function(){function Clock(){_classCallCheck(this,Clock)}_createClass(Clock,[{key:"millis",value:function millis(){abstractMethodFail("Clock.millis")}},{key:"instant",value:function instant(){abstractMethodFail("Clock.instant")}},{key:"zone",value:function zone(){abstractMethodFail("Clock.zone")}},{key:"withZone",value:function withZone(){abstractMethodFail("Clock.withZone")}}],[{key:"systemUTC",value:function systemUTC(){return new bt(te.UTC)}},{key:"systemDefaultZone",value:function systemDefaultZone(){return new bt(J.systemDefault())}},{key:"system",value:function system(t){return new bt(t)}},{key:"fixed",value:function fixed(t,r){return new St(t,r)}},{key:"offset",value:function offset(t,r){return new Tt(t,r)}}]);return Clock}();var bt=function(t){_inherits(SystemClock,t);var r=_createSuper(SystemClock);function SystemClock(t){var n;_classCallCheck(this,SystemClock);requireNonNull(t,"zone");n=r.call(this);n._zone=t;return n}_createClass(SystemClock,[{key:"zone",value:function zone(){return this._zone}},{key:"millis",value:function millis(){return(new Date).getTime()}},{key:"instant",value:function instant(){return _t.ofEpochMilli(this.millis())}},{key:"equals",value:function equals(t){if(t instanceof SystemClock){return this._zone.equals(t._zone)}return false}},{key:"withZone",value:function withZone(t){if(t.equals(this._zone)){return this}return new SystemClock(t)}},{key:"toString",value:function toString(){return"SystemClock[".concat(this._zone.toString(),"]")}}]);return SystemClock}(Et);var St=function(t){_inherits(FixedClock,t);var r=_createSuper(FixedClock);function FixedClock(t,n){var i;_classCallCheck(this,FixedClock);i=r.call(this);i._instant=t;i._zoneId=n;return i}_createClass(FixedClock,[{key:"instant",value:function instant(){return this._instant}},{key:"millis",value:function millis(){return this._instant.toEpochMilli()}},{key:"zone",value:function zone(){return this._zoneId}},{key:"toString",value:function toString(){return"FixedClock[]"}},{key:"equals",value:function equals(t){if(t instanceof FixedClock){return this._instant.equals(t._instant)&&this._zoneId.equals(t._zoneId)}return false}},{key:"withZone",value:function withZone(t){if(t.equals(this._zoneId)){return this}return new FixedClock(this._instant,t)}}]);return FixedClock}(Et);var Tt=function(t){_inherits(OffsetClock,t);var r=_createSuper(OffsetClock);function OffsetClock(t,n){var i;_classCallCheck(this,OffsetClock);i=r.call(this);i._baseClock=t;i._offset=n;return i}_createClass(OffsetClock,[{key:"zone",value:function zone(){return this._baseClock.zone()}},{key:"withZone",value:function withZone(t){if(t.equals(this._baseClock.zone())){return this}return new OffsetClock(this._baseClock.withZone(t),this._offset)}},{key:"millis",value:function millis(){return this._baseClock.millis()+this._offset.toMillis()}},{key:"instant",value:function instant(){return this._baseClock.instant().plus(this._offset)}},{key:"equals",value:function equals(t){if(t instanceof OffsetClock){return this._baseClock.equals(t._baseClock)&&this._offset.equals(t._offset)}return false}},{key:"toString",value:function toString(){return"OffsetClock[".concat(this._baseClock,",").concat(this._offset,"]")}}]);return OffsetClock}(Et);var Ct=function(){function ZoneOffsetTransition(t,r,n){_classCallCheck(this,ZoneOffsetTransition);requireNonNull(t,"transition");requireNonNull(r,"offsetBefore");requireNonNull(n,"offsetAfter");if(r.equals(n)){throw new a("Offsets must not be equal")}if(t.nano()!==0){throw new a("Nano-of-second must be zero")}if(t instanceof mt){this._transition=t}else{this._transition=mt.ofEpochSecond(t,0,r)}this._offsetBefore=r;this._offsetAfter=n}_createClass(ZoneOffsetTransition,[{key:"instant",value:function instant(){return this._transition.toInstant(this._offsetBefore)}},{key:"toEpochSecond",value:function toEpochSecond(){return this._transition.toEpochSecond(this._offsetBefore)}},{key:"dateTimeBefore",value:function dateTimeBefore(){return this._transition}},{key:"dateTimeAfter",value:function dateTimeAfter(){return this._transition.plusSeconds(this.durationSeconds())}},{key:"offsetBefore",value:function offsetBefore(){return this._offsetBefore}},{key:"offsetAfter",value:function offsetAfter(){return this._offsetAfter}},{key:"duration",value:function duration(){return S.ofSeconds(this.durationSeconds())}},{key:"durationSeconds",value:function durationSeconds(){return this._offsetAfter.totalSeconds()-this._offsetBefore.totalSeconds()}},{key:"isGap",value:function isGap(){return this._offsetAfter.totalSeconds()>this._offsetBefore.totalSeconds()}},{key:"isOverlap",value:function isOverlap(){return this._offsetAfter.totalSeconds()<this._offsetBefore.totalSeconds()}},{key:"isValidOffset",value:function isValidOffset(t){return this.isGap()?false:this._offsetBefore.equals(t)||this._offsetAfter.equals(t)}},{key:"validOffsets",value:function validOffsets(){if(this.isGap()){return[]}else{return[this._offsetBefore,this._offsetAfter]}}},{key:"compareTo",value:function compareTo(t){return this.instant().compareTo(t.instant())}},{key:"equals",value:function equals(t){if(t===this){return true}if(t instanceof ZoneOffsetTransition){var r=t;return this._transition.equals(r._transition)&&this._offsetBefore.equals(r.offsetBefore())&&this._offsetAfter.equals(r.offsetAfter())}return false}},{key:"hashCode",value:function hashCode(){return this._transition.hashCode()^this._offsetBefore.hashCode()^this._offsetAfter.hashCode()>>>16}},{key:"toString",value:function toString(){return"Transition[".concat(this.isGap()?"Gap":"Overlap"," at ").concat(this._transition.toString()).concat(this._offsetBefore.toString()," to ").concat(this._offsetAfter,"]")}}],[{key:"of",value:function of(t,r,n){return new ZoneOffsetTransition(t,r,n)}}]);return ZoneOffsetTransition}();
/*
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */function _init$m(){M.ZONE_ID=createTemporalQuery("ZONE_ID",(function(t){return t.query(M.ZONE_ID)}));M.CHRONO=createTemporalQuery("CHRONO",(function(t){return t.query(M.CHRONO)}));M.PRECISION=createTemporalQuery("PRECISION",(function(t){return t.query(M.PRECISION)}));M.OFFSET=createTemporalQuery("OFFSET",(function(t){if(t.isSupported(D.OFFSET_SECONDS)){return te.ofTotalSeconds(t.get(D.OFFSET_SECONDS))}return null}));M.ZONE=createTemporalQuery("ZONE",(function(t){var r=t.query(M.ZONE_ID);return r!=null?r:t.query(M.OFFSET)}));M.LOCAL_DATE=createTemporalQuery("LOCAL_DATE",(function(t){if(t.isSupported(D.EPOCH_DAY)){return pt.ofEpochDay(t.getLong(D.EPOCH_DAY))}return null}));M.LOCAL_TIME=createTemporalQuery("LOCAL_TIME",(function(t){if(t.isSupported(D.NANO_OF_DAY)){return vt.ofNanoOfDay(t.getLong(D.NANO_OF_DAY))}return null}))}var wt=function(t){_inherits(SystemDefaultZoneRules,t);var n=_createSuper(SystemDefaultZoneRules);function SystemDefaultZoneRules(){_classCallCheck(this,SystemDefaultZoneRules);return n.apply(this,arguments)}_createClass(SystemDefaultZoneRules,[{key:"isFixedOffset",value:function isFixedOffset(){return false}},{key:"offsetOfInstant",value:function offsetOfInstant(t){var r=new Date(t.toEpochMilli()).getTimezoneOffset();return te.ofTotalMinutes(r*-1)}},{key:"offsetOfEpochMilli",value:function offsetOfEpochMilli(t){var r=new Date(t).getTimezoneOffset();return te.ofTotalMinutes(r*-1)}},{key:"offsetOfLocalDateTime",value:function offsetOfLocalDateTime(t){var r=t.toEpochSecond(te.UTC)*1e3;var n=new Date(r).getTimezoneOffset();var i=r+n*6e4;var o=new Date(i).getTimezoneOffset();return te.ofTotalMinutes(o*-1)}},{key:"validOffsets",value:function validOffsets(t){return[this.offsetOfLocalDateTime(t)]}},{key:"transition",value:function transition(){return null}},{key:"standardOffset",value:function standardOffset(t){return this.offsetOfInstant(t)}},{key:"daylightSavings",value:function daylightSavings(){this._throwNotSupported()}},{key:"isDaylightSavings",value:function isDaylightSavings(){this._throwNotSupported()}},{key:"isValidOffset",value:function isValidOffset(t,r){return this.offsetOfLocalDateTime(t).equals(r)}},{key:"nextTransition",value:function nextTransition(){this._throwNotSupported()}},{key:"previousTransition",value:function previousTransition(){this._throwNotSupported()}},{key:"transitions",value:function transitions(){this._throwNotSupported()}},{key:"transitionRules",value:function transitionRules(){this._throwNotSupported()}},{key:"_throwNotSupported",value:function _throwNotSupported(){throw new r("not supported operation")}},{key:"equals",value:function equals(t){if(this===t||t instanceof SystemDefaultZoneRules){return true}else{return false}}},{key:"toString",value:function toString(){return"SYSTEM"}}]);return SystemDefaultZoneRules}(Z);var At=function(t){_inherits(SystemDefaultZoneId,t);var r=_createSuper(SystemDefaultZoneId);function SystemDefaultZoneId(){var t;_classCallCheck(this,SystemDefaultZoneId);t=r.call(this);t._rules=new wt;return t}_createClass(SystemDefaultZoneId,[{key:"rules",value:function rules(){return this._rules}},{key:"equals",value:function equals(t){if(this===t){return true}return false}},{key:"id",value:function id(){return"SYSTEM"}}]);return SystemDefaultZoneId}(J);var It=function(){function ZoneIdFactory(){_classCallCheck(this,ZoneIdFactory)}_createClass(ZoneIdFactory,null,[{key:"systemDefault",value:function systemDefault(){return Ot}},{key:"getAvailableZoneIds",value:function getAvailableZoneIds(){return Me.getAvailableZoneIds()}},{key:"of",value:function of(t){requireNonNull(t,"zoneId");if(t==="Z"){return te.UTC}if(t.length===1){throw new r("Invalid zone: ".concat(t))}if(K.startsWith(t,"+")||K.startsWith(t,"-")){return te.of(t)}if(t==="UTC"||t==="GMT"||t==="GMT0"||t==="UT"){return new Le(t,te.UTC.rules())}if(K.startsWith(t,"UTC+")||K.startsWith(t,"GMT+")||K.startsWith(t,"UTC-")||K.startsWith(t,"GMT-")){var n=te.of(t.substring(3));if(n.totalSeconds()===0){return new Le(t.substring(0,3),n.rules())}return new Le(t.substring(0,3)+n.id(),n.rules())}if(K.startsWith(t,"UT+")||K.startsWith(t,"UT-")){var i=te.of(t.substring(2));if(i.totalSeconds()===0){return new Le("UT",i.rules())}return new Le("UT".concat(i.id()),i.rules())}if(t==="SYSTEM"){return J.systemDefault()}return Le.ofId(t)}},{key:"ofOffset",value:function ofOffset(t,r){requireNonNull(t,"prefix");requireNonNull(r,"offset");if(t.length===0){return r}if(t==="GMT"||t==="UTC"||t==="UT"){if(r.totalSeconds()===0){return new Le(t,r.rules())}return new Le(t+r.id(),r.rules())}throw new a("Invalid prefix, must be GMT, UTC or UT: ".concat(t))}},{key:"from",value:function from(t){requireNonNull(t,"temporal");var n=t.query(M.zone());if(n==null){throw new r("Unable to obtain ZoneId from TemporalAccessor: ".concat(t,", type ").concat(t.constructor!=null?t.constructor.name:""))}return n}}]);return ZoneIdFactory}();var Ot=null;function _init$n(){Ot=new At;J.systemDefault=It.systemDefault;J.getAvailableZoneIds=It.getAvailableZoneIds;J.of=It.of;J.ofOffset=It.ofOffset;J.from=It.from;te.from=It.from;J.SYSTEM=Ot;J.UTC=te.ofTotalSeconds(0)}
/*
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var Rt=false;function init(){if(Rt){return}Rt=true;_init$1();_init();_init$2();_init$3();_init$k();_init$8();_init$m();_init$4();_init$l();_init$i();_init$j();_init$d();_init$5();_init$c();_init$b();_init$6();_init$7();_init$g();_init$n();_init$e();_init$a();_init$9();_init$h();_init$f()}init();var kt=function(){function ToNativeJsConverter(t,r){_classCallCheck(this,ToNativeJsConverter);var n;if(t instanceof _t){this.instant=t;return}else if(t instanceof pt){r=r==null?J.systemDefault():r;n=t.atStartOfDay(r)}else if(t instanceof mt){r=r==null?J.systemDefault():r;n=t.atZone(r)}else if(t instanceof ct){if(r==null){n=t}else{n=t.withZoneSameInstant(r)}}else{throw new a("unsupported instance for convert operation:".concat(t))}this.instant=n.toInstant()}_createClass(ToNativeJsConverter,[{key:"toDate",value:function toDate(){return new Date(this.instant.toEpochMilli())}},{key:"toEpochMilli",value:function toEpochMilli(){return this.instant.toEpochMilli()}}]);return ToNativeJsConverter}();function convert(t,r){return new kt(t,r)}var xt=function(t){_inherits(NativeJsTemporal,t);var r=_createSuper(NativeJsTemporal);function NativeJsTemporal(t){var n;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:J.systemDefault();_classCallCheck(this,NativeJsTemporal);n=r.call(this);n._zone=i;if(t instanceof Date){n._epochMilli=t.getTime();return _possibleConstructorReturn(n)}else if(typeof t.toDate==="function"&&t.toDate()instanceof Date){n._epochMilli=t.toDate().getTime();return _possibleConstructorReturn(n)}assert(false,"date must be either a javascript date or a moment");return n}_createClass(NativeJsTemporal,[{key:"query",value:function query(t){requireNonNull(t,"query");if(t===M.localDate()){return pt.ofInstant(_t.ofEpochMilli(this._epochMilli),this._zone)}else if(t===M.localTime()){return vt.ofInstant(_t.ofEpochMilli(this._epochMilli),this._zone)}else if(t===M.zone()){return this._zone}return _get(_getPrototypeOf(NativeJsTemporal.prototype),"query",this).call(this,t)}},{key:"get",value:function get(t){return this.getLong(t)}},{key:"getLong",value:function getLong(t){requireNonNull(t,"field");if(t instanceof D){switch(t){case D.NANO_OF_SECOND:return p.floorMod(this._epochMilli,1e3)*1e6;case D.INSTANT_SECONDS:return p.floorDiv(this._epochMilli,1e3)}throw new i("Unsupported field: ".concat(t))}return t.getFrom(this)}},{key:"isSupported",value:function isSupported(t){return t===D.INSTANT_SECONDS||t===D.NANO_OF_SECOND}}]);return NativeJsTemporal}(L);function nativeJs(t,r){return new xt(t,r)}function bindUse(t){var r=[];return function use(n){if(!~r.indexOf(n)){n(t);r.push(n)}return t}}
/**
     * @copyright (c) 2016, Philipp Thrwchter & Pattrick Hper
     * @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
     */var Nt={assert:u,DateTimeBuilder:re,DateTimeParseContext:ne,DateTimePrintContext:oe,MathUtil:p,StringUtil:K,StringBuilder:Ge};var Pt={_:Nt,convert:convert,nativeJs:nativeJs,ArithmeticException:o,DateTimeException:r,DateTimeParseException:n,IllegalArgumentException:a,IllegalStateException:s,UnsupportedTemporalTypeException:i,NullPointerException:c,Clock:Et,DayOfWeek:q,Duration:S,Instant:_t,LocalDate:pt,LocalTime:vt,LocalDateTime:mt,OffsetTime:at,OffsetDateTime:ut,Month:F,MonthDay:$e,Period:z,Year:Xe,YearConstants:w,YearMonth:Je,ZonedDateTime:ct,ZoneOffset:te,ZoneId:J,ZoneRegion:Le,ZoneOffsetTransition:Ct,ZoneRules:Z,ZoneRulesProvider:Me,ChronoLocalDate:$,ChronoLocalDateTime:ht,ChronoZonedDateTime:st,IsoChronology:ot,ChronoField:D,ChronoUnit:x,IsoFields:ae,Temporal:W,TemporalAccessor:L,TemporalAdjuster:et,TemporalAdjusters:tt,TemporalAmount:v,TemporalField:N,TemporalQueries:M,TemporalQuery:U,TemporalUnit:E,ValueRange:P,DateTimeFormatter:We,DateTimeFormatterBuilder:He,DecimalStyle:Ee,ResolverStyle:G,SignStyle:be,TextStyle:Se};var Dt=bindUse(Pt);Pt.use=Dt;t.ArithmeticException=o;t.ChronoField=D;t.ChronoLocalDate=$;t.ChronoLocalDateTime=ht;t.ChronoUnit=x;t.ChronoZonedDateTime=st;t.Clock=Et;t.DateTimeException=r;t.DateTimeFormatter=We;t.DateTimeFormatterBuilder=He;t.DateTimeParseException=n;t.DayOfWeek=q;t.DecimalStyle=Ee;t.Duration=S;t.IllegalArgumentException=a;t.IllegalStateException=s;t.Instant=_t;t.IsoChronology=ot;t.IsoFields=ae;t.LocalDate=pt;t.LocalDateTime=mt;t.LocalTime=vt;t.Month=F;t.MonthDay=$e;t.NullPointerException=c;t.OffsetDateTime=ut;t.OffsetTime=at;t.Period=z;t.ResolverStyle=G;t.SignStyle=be;t.Temporal=W;t.TemporalAccessor=L;t.TemporalAdjuster=et;t.TemporalAdjusters=tt;t.TemporalAmount=v;t.TemporalField=N;t.TemporalQueries=M;t.TemporalQuery=U;t.TemporalUnit=E;t.TextStyle=Se;t.UnsupportedTemporalTypeException=i;t.ValueRange=P;t.Year=Xe;t.YearConstants=w;t.YearMonth=Je;t.ZoneId=J;t.ZoneOffset=te;t.ZoneOffsetTransition=Ct;t.ZoneRegion=Le;t.ZoneRules=Z;t.ZoneRulesProvider=Me;t.ZonedDateTime=ct;t._=Nt;t.convert=convert;t.nativeJs=nativeJs;t.use=Dt;Object.defineProperty(t,"__esModule",{value:true})}))},57171:function(t,r,n){"use strict";var i=this&&this.__spreadArray||function(t,r){for(var n=0,i=r.length,o=t.length;n<i;n++,o++)t[o]=r[n];return t};Object.defineProperty(r,"__esModule",{value:true});r.ContextAPI=void 0;var o=n(54118);var a=n(85135);var s=n(11877);var c="context";var u=new o.NoopContextManager;var l=function(){function ContextAPI(){}ContextAPI.getInstance=function(){if(!this._instance){this._instance=new ContextAPI}return this._instance};ContextAPI.prototype.setGlobalContextManager=function(t){return a.registerGlobal(c,t,s.DiagAPI.instance())};ContextAPI.prototype.active=function(){return this._getContextManager().active()};ContextAPI.prototype.with=function(t,r,n){var o;var a=[];for(var s=3;s<arguments.length;s++){a[s-3]=arguments[s]}return(o=this._getContextManager()).with.apply(o,i([t,r,n],a))};ContextAPI.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)};ContextAPI.prototype._getContextManager=function(){return a.getGlobal(c)||u};ContextAPI.prototype.disable=function(){this._getContextManager().disable();a.unregisterGlobal(c,s.DiagAPI.instance())};return ContextAPI}();r.ContextAPI=l},11877:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DiagAPI=void 0;var i=n(17978);var o=n(99639);var a=n(78077);var s=n(85135);var c="diag";var u=function(){function DiagAPI(){function _logProxy(t){return function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}var i=s.getGlobal("diag");if(!i)return;return i[t].apply(i,r)}}var t=this;t.setLogger=function(r,n){var i,c;if(n===void 0){n=a.DiagLogLevel.INFO}if(r===t){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");t.error((i=u.stack)!==null&&i!==void 0?i:u.message);return false}var l=s.getGlobal("diag");var d=o.createLogLevelDiagLogger(n,r);if(l){var p=(c=(new Error).stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p);d.warn("Current logger will overwrite one already registered from "+p)}return s.registerGlobal("diag",d,t,true)};t.disable=function(){s.unregisterGlobal(c,t)};t.createComponentLogger=function(t){return new i.DiagComponentLogger(t)};t.verbose=_logProxy("verbose");t.debug=_logProxy("debug");t.info=_logProxy("info");t.warn=_logProxy("warn");t.error=_logProxy("error")}DiagAPI.instance=function(){if(!this._instance){this._instance=new DiagAPI}return this._instance};return DiagAPI}();r.DiagAPI=u},89909:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.PropagationAPI=void 0;var i=n(85135);var o=n(72368);var a=n(80865);var s=n(37682);var c=n(28136);var u=n(11877);var l="propagation";var d=new o.NoopTextMapPropagator;var p=function(){function PropagationAPI(){this.createBaggage=c.createBaggage;this.getBaggage=s.getBaggage;this.setBaggage=s.setBaggage;this.deleteBaggage=s.deleteBaggage}PropagationAPI.getInstance=function(){if(!this._instance){this._instance=new PropagationAPI}return this._instance};PropagationAPI.prototype.setGlobalPropagator=function(t){return i.registerGlobal(l,t,u.DiagAPI.instance())};PropagationAPI.prototype.inject=function(t,r,n){if(n===void 0){n=a.defaultTextMapSetter}return this._getGlobalPropagator().inject(t,r,n)};PropagationAPI.prototype.extract=function(t,r,n){if(n===void 0){n=a.defaultTextMapGetter}return this._getGlobalPropagator().extract(t,r,n)};PropagationAPI.prototype.fields=function(){return this._getGlobalPropagator().fields()};PropagationAPI.prototype.disable=function(){i.unregisterGlobal(l,u.DiagAPI.instance())};PropagationAPI.prototype._getGlobalPropagator=function(){return i.getGlobal(l)||d};return PropagationAPI}();r.PropagationAPI=p},81539:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TraceAPI=void 0;var i=n(85135);var o=n(2285);var a=n(49745);var s=n(23326);var c=n(11877);var u="trace";var l=function(){function TraceAPI(){this._proxyTracerProvider=new o.ProxyTracerProvider;this.wrapSpanContext=a.wrapSpanContext;this.isSpanContextValid=a.isSpanContextValid;this.deleteSpan=s.deleteSpan;this.getSpan=s.getSpan;this.getSpanContext=s.getSpanContext;this.setSpan=s.setSpan;this.setSpanContext=s.setSpanContext}TraceAPI.getInstance=function(){if(!this._instance){this._instance=new TraceAPI}return this._instance};TraceAPI.prototype.setGlobalTracerProvider=function(t){var r=i.registerGlobal(u,this._proxyTracerProvider,c.DiagAPI.instance());if(r){this._proxyTracerProvider.setDelegate(t)}return r};TraceAPI.prototype.getTracerProvider=function(){return i.getGlobal(u)||this._proxyTracerProvider};TraceAPI.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)};TraceAPI.prototype.disable=function(){i.unregisterGlobal(u,c.DiagAPI.instance());this._proxyTracerProvider=new o.ProxyTracerProvider};return TraceAPI}();r.TraceAPI=l},37682:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.deleteBaggage=r.setBaggage=r.getBaggage=void 0;var i=n(78242);var o=i.createContextKey("OpenTelemetry Baggage Key");function getBaggage(t){return t.getValue(o)||undefined}r.getBaggage=getBaggage;function setBaggage(t,r){return t.setValue(o,r)}r.setBaggage=setBaggage;function deleteBaggage(t){return t.deleteValue(o)}r.deleteBaggage=deleteBaggage},84811:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.BaggageImpl=void 0;var n=function(){function BaggageImpl(t){this._entries=t?new Map(t):new Map}BaggageImpl.prototype.getEntry=function(t){var r=this._entries.get(t);if(!r){return undefined}return Object.assign({},r)};BaggageImpl.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(t){var r=t[0],n=t[1];return[r,n]}))};BaggageImpl.prototype.setEntry=function(t,r){var n=new BaggageImpl(this._entries);n._entries.set(t,r);return n};BaggageImpl.prototype.removeEntry=function(t){var r=new BaggageImpl(this._entries);r._entries.delete(t);return r};BaggageImpl.prototype.removeEntries=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}var n=new BaggageImpl(this._entries);for(var i=0,o=t;i<o.length;i++){var a=o[i];n._entries.delete(a)}return n};BaggageImpl.prototype.clear=function(){return new BaggageImpl};return BaggageImpl}();r.BaggageImpl=n},23542:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.baggageEntryMetadataSymbol=void 0;r.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},91508:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},28136:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.baggageEntryMetadataFromString=r.createBaggage=void 0;var i=n(11877);var o=n(84811);var a=n(23542);var s=i.DiagAPI.instance();function createBaggage(t){if(t===void 0){t={}}return new o.BaggageImpl(new Map(Object.entries(t)))}r.createBaggage=createBaggage;function baggageEntryMetadataFromString(t){if(typeof t!=="string"){s.error("Cannot create baggage metadata from unknown type: "+typeof t);t=""}return{__TYPE__:a.baggageEntryMetadataSymbol,toString:function(){return t}}}r.baggageEntryMetadataFromString=baggageEntryMetadataFromString},1109:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},14447:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},92358:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},54118:function(t,r,n){"use strict";var i=this&&this.__spreadArray||function(t,r){for(var n=0,i=r.length,o=t.length;n<i;n++,o++)t[o]=r[n];return t};Object.defineProperty(r,"__esModule",{value:true});r.NoopContextManager=void 0;var o=n(78242);var a=function(){function NoopContextManager(){}NoopContextManager.prototype.active=function(){return o.ROOT_CONTEXT};NoopContextManager.prototype.with=function(t,r,n){var o=[];for(var a=3;a<arguments.length;a++){o[a-3]=arguments[a]}return r.call.apply(r,i([n],o))};NoopContextManager.prototype.bind=function(t,r){return r};NoopContextManager.prototype.enable=function(){return this};NoopContextManager.prototype.disable=function(){return this};return NoopContextManager}();r.NoopContextManager=a},78242:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ROOT_CONTEXT=r.createContextKey=void 0;function createContextKey(t){return Symbol.for(t)}r.createContextKey=createContextKey;var n=function(){function BaseContext(t){var r=this;r._currentContext=t?new Map(t):new Map;r.getValue=function(t){return r._currentContext.get(t)};r.setValue=function(t,n){var i=new BaseContext(r._currentContext);i._currentContext.set(t,n);return i};r.deleteValue=function(t){var n=new BaseContext(r._currentContext);n._currentContext.delete(t);return n}}return BaseContext}();r.ROOT_CONTEXT=new n},36504:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},17978:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DiagComponentLogger=void 0;var i=n(85135);var o=function(){function DiagComponentLogger(t){this._namespace=t.namespace||"DiagComponentLogger"}DiagComponentLogger.prototype.debug=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return logProxy("debug",this._namespace,t)};DiagComponentLogger.prototype.error=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return logProxy("error",this._namespace,t)};DiagComponentLogger.prototype.info=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return logProxy("info",this._namespace,t)};DiagComponentLogger.prototype.warn=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return logProxy("warn",this._namespace,t)};DiagComponentLogger.prototype.verbose=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return logProxy("verbose",this._namespace,t)};return DiagComponentLogger}();r.DiagComponentLogger=o;function logProxy(t,r,n){var o=i.getGlobal("diag");if(!o){return}n.unshift(r);return o[t].apply(o,n)}},3041:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DiagConsoleLogger=void 0;var n=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];var i=function(){function DiagConsoleLogger(){function _consoleFunc(t){return function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}if(console){var i=console[t];if(typeof i!=="function"){i=console.log}if(typeof i==="function"){return i.apply(console,r)}}}}for(var t=0;t<n.length;t++){this[n[t].n]=_consoleFunc(n[t].c)}}return DiagConsoleLogger}();r.DiagConsoleLogger=i},31634:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__exportStar||function(t,r){for(var n in t)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n))i(r,t,n)};Object.defineProperty(r,"__esModule",{value:true});o(n(3041),r);o(n(78077),r)},99639:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.createLogLevelDiagLogger=void 0;var i=n(78077);function createLogLevelDiagLogger(t,r){if(t<i.DiagLogLevel.NONE){t=i.DiagLogLevel.NONE}else if(t>i.DiagLogLevel.ALL){t=i.DiagLogLevel.ALL}r=r||{};function _filterFunc(n,i){var o=r[n];if(typeof o==="function"&&t>=i){return o.bind(r)}return function(){}}return{error:_filterFunc("error",i.DiagLogLevel.ERROR),warn:_filterFunc("warn",i.DiagLogLevel.WARN),info:_filterFunc("info",i.DiagLogLevel.INFO),debug:_filterFunc("debug",i.DiagLogLevel.DEBUG),verbose:_filterFunc("verbose",i.DiagLogLevel.VERBOSE)}}r.createLogLevelDiagLogger=createLogLevelDiagLogger},78077:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DiagLogLevel=void 0;var n;(function(t){t[t["NONE"]=0]="NONE";t[t["ERROR"]=30]="ERROR";t[t["WARN"]=50]="WARN";t[t["INFO"]=60]="INFO";t[t["DEBUG"]=70]="DEBUG";t[t["VERBOSE"]=80]="VERBOSE";t[t["ALL"]=9999]="ALL"})(n=r.DiagLogLevel||(r.DiagLogLevel={}))},65163:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__exportStar||function(t,r){for(var n in t)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n))i(r,t,n)};Object.defineProperty(r,"__esModule",{value:true});r.diag=r.propagation=r.trace=r.context=r.INVALID_SPAN_CONTEXT=r.INVALID_TRACEID=r.INVALID_SPANID=r.isValidSpanId=r.isValidTraceId=r.isSpanContextValid=r.createTraceState=r.baggageEntryMetadataFromString=void 0;o(n(91508),r);var a=n(28136);Object.defineProperty(r,"baggageEntryMetadataFromString",{enumerable:true,get:function(){return a.baggageEntryMetadataFromString}});o(n(14447),r);o(n(92358),r);o(n(1109),r);o(n(31634),r);o(n(80865),r);o(n(57492),r);o(n(44023),r);o(n(43503),r);o(n(2285),r);o(n(19671),r);o(n(33209),r);o(n(15769),r);o(n(31424),r);o(n(4416),r);o(n(20955),r);o(n(48845),r);o(n(26905),r);o(n(88384),r);var s=n(32615);Object.defineProperty(r,"createTraceState",{enumerable:true,get:function(){return s.createTraceState}});o(n(30891),r);o(n(33168),r);o(n(91823),r);var c=n(49745);Object.defineProperty(r,"isSpanContextValid",{enumerable:true,get:function(){return c.isSpanContextValid}});Object.defineProperty(r,"isValidTraceId",{enumerable:true,get:function(){return c.isValidTraceId}});Object.defineProperty(r,"isValidSpanId",{enumerable:true,get:function(){return c.isValidSpanId}});var u=n(91760);Object.defineProperty(r,"INVALID_SPANID",{enumerable:true,get:function(){return u.INVALID_SPANID}});Object.defineProperty(r,"INVALID_TRACEID",{enumerable:true,get:function(){return u.INVALID_TRACEID}});Object.defineProperty(r,"INVALID_SPAN_CONTEXT",{enumerable:true,get:function(){return u.INVALID_SPAN_CONTEXT}});o(n(78242),r);o(n(36504),r);var l=n(57171);r.context=l.ContextAPI.getInstance();var d=n(81539);r.trace=d.TraceAPI.getInstance();var p=n(89909);r.propagation=p.PropagationAPI.getInstance();var g=n(11877);r.diag=g.DiagAPI.instance();r["default"]={trace:r.trace,context:r.context,propagation:r.propagation,diag:r.diag}},85135:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.unregisterGlobal=r.getGlobal=r.registerGlobal=void 0;var i=n(99957);var o=n(98996);var a=n(81522);var s=o.VERSION.split(".")[0];var c=Symbol.for("opentelemetry.js.api."+s);var u=i._globalThis;function registerGlobal(t,r,n,i){var a;if(i===void 0){i=false}var s=u[c]=(a=u[c])!==null&&a!==void 0?a:{version:o.VERSION};if(!i&&s[t]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);n.error(l.stack||l.message);return false}if(s.version!==o.VERSION){var l=new Error("@opentelemetry/api: All API registration versions must match");n.error(l.stack||l.message);return false}s[t]=r;n.debug("@opentelemetry/api: Registered a global for "+t+" v"+o.VERSION+".");return true}r.registerGlobal=registerGlobal;function getGlobal(t){var r,n;var i=(r=u[c])===null||r===void 0?void 0:r.version;if(!i||!a.isCompatible(i)){return}return(n=u[c])===null||n===void 0?void 0:n[t]}r.getGlobal=getGlobal;function unregisterGlobal(t,r){r.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+o.VERSION+".");var n=u[c];if(n){delete n[t]}}r.unregisterGlobal=unregisterGlobal},81522:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.isCompatible=r._makeCompatibilityCheck=void 0;var i=n(98996);var o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(t){var r=new Set([t]);var n=new Set;var i=t.match(o);if(!i){return function(){return false}}var a={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(a.prerelease!=null){return function isExactmatch(r){return r===t}}function _reject(t){n.add(t);return false}function _accept(t){r.add(t);return true}return function isCompatible(t){if(r.has(t)){return true}if(n.has(t)){return false}var i=t.match(o);if(!i){return _reject(t)}var s={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(s.prerelease!=null){return _reject(t)}if(a.major!==s.major){return _reject(t)}if(a.major===0){if(a.minor===s.minor&&a.patch<=s.patch){return _accept(t)}return _reject(t)}if(a.minor<=s.minor){return _accept(t)}return _reject(t)}}r._makeCompatibilityCheck=_makeCompatibilityCheck;r.isCompatible=_makeCompatibilityCheck(i.VERSION)},99957:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__exportStar||function(t,r){for(var n in t)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n))i(r,t,n)};Object.defineProperty(r,"__esModule",{value:true});o(n(87200),r)},89406:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r._globalThis=void 0;r._globalThis=typeof globalThis==="object"?globalThis:global},87200:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__exportStar||function(t,r){for(var n in t)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n))i(r,t,n)};Object.defineProperty(r,"__esModule",{value:true});o(n(89406),r)},72368:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.NoopTextMapPropagator=void 0;var n=function(){function NoopTextMapPropagator(){}NoopTextMapPropagator.prototype.inject=function(t,r){};NoopTextMapPropagator.prototype.extract=function(t,r){return t};NoopTextMapPropagator.prototype.fields=function(){return[]};return NoopTextMapPropagator}();r.NoopTextMapPropagator=n},80865:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.defaultTextMapSetter=r.defaultTextMapGetter=void 0;r.defaultTextMapGetter={get:function(t,r){if(t==null){return undefined}return t[r]},keys:function(t){if(t==null){return[]}return Object.keys(t)}};r.defaultTextMapSetter={set:function(t,r,n){if(t==null){return}t[r]=n}}},81462:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.NonRecordingSpan=void 0;var i=n(91760);var o=function(){function NonRecordingSpan(t){if(t===void 0){t=i.INVALID_SPAN_CONTEXT}this._spanContext=t}NonRecordingSpan.prototype.spanContext=function(){return this._spanContext};NonRecordingSpan.prototype.setAttribute=function(t,r){return this};NonRecordingSpan.prototype.setAttributes=function(t){return this};NonRecordingSpan.prototype.addEvent=function(t,r){return this};NonRecordingSpan.prototype.setStatus=function(t){return this};NonRecordingSpan.prototype.updateName=function(t){return this};NonRecordingSpan.prototype.end=function(t){};NonRecordingSpan.prototype.isRecording=function(){return false};NonRecordingSpan.prototype.recordException=function(t,r){};return NonRecordingSpan}();r.NonRecordingSpan=o},17606:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.NoopTracer=void 0;var i=n(57171);var o=n(23326);var a=n(81462);var s=n(49745);var c=i.ContextAPI.getInstance();var u=function(){function NoopTracer(){}NoopTracer.prototype.startSpan=function(t,r,n){var i=Boolean(r===null||r===void 0?void 0:r.root);if(i){return new a.NonRecordingSpan}var c=n&&o.getSpanContext(n);if(isSpanContext(c)&&s.isSpanContextValid(c)){return new a.NonRecordingSpan(c)}else{return new a.NonRecordingSpan}};NoopTracer.prototype.startActiveSpan=function(t,r,n,i){var a;var s;var u;if(arguments.length<2){return}else if(arguments.length===2){u=r}else if(arguments.length===3){a=r;u=n}else{a=r;s=n;u=i}var l=s!==null&&s!==void 0?s:c.active();var d=this.startSpan(t,a,l);var p=o.setSpan(l,d);return c.with(p,u,undefined,d)};return NoopTracer}();r.NoopTracer=u;function isSpanContext(t){return typeof t==="object"&&typeof t["spanId"]==="string"&&typeof t["traceId"]==="string"&&typeof t["traceFlags"]==="number"}},23259:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.NoopTracerProvider=void 0;var i=n(17606);var o=function(){function NoopTracerProvider(){}NoopTracerProvider.prototype.getTracer=function(t,r,n){return new i.NoopTracer};return NoopTracerProvider}();r.NoopTracerProvider=o},43503:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ProxyTracer=void 0;var i=n(17606);var o=new i.NoopTracer;var a=function(){function ProxyTracer(t,r,n,i){this._provider=t;this.name=r;this.version=n;this.options=i}ProxyTracer.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)};ProxyTracer.prototype.startActiveSpan=function(t,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)};ProxyTracer.prototype._getTracer=function(){if(this._delegate){return this._delegate}var t=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!t){return o}this._delegate=t;return this._delegate};return ProxyTracer}();r.ProxyTracer=a},2285:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ProxyTracerProvider=void 0;var i=n(43503);var o=n(23259);var a=new o.NoopTracerProvider;var s=function(){function ProxyTracerProvider(){}ProxyTracerProvider.prototype.getTracer=function(t,r,n){var o;return(o=this.getDelegateTracer(t,r,n))!==null&&o!==void 0?o:new i.ProxyTracer(this,t,r,n)};ProxyTracerProvider.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:a};ProxyTracerProvider.prototype.setDelegate=function(t){this._delegate=t};ProxyTracerProvider.prototype.getDelegateTracer=function(t,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,r,n)};return ProxyTracerProvider}();r.ProxyTracerProvider=s},19671:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},33209:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SamplingDecision=void 0;var n;(function(t){t[t["NOT_RECORD"]=0]="NOT_RECORD";t[t["RECORD"]=1]="RECORD";t[t["RECORD_AND_SAMPLED"]=2]="RECORD_AND_SAMPLED"})(n=r.SamplingDecision||(r.SamplingDecision={}))},20955:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},57492:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},23326:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.getSpanContext=r.setSpanContext=r.deleteSpan=r.setSpan=r.getSpan=void 0;var i=n(78242);var o=n(81462);var a=i.createContextKey("OpenTelemetry Context Key SPAN");function getSpan(t){return t.getValue(a)||undefined}r.getSpan=getSpan;function setSpan(t,r){return t.setValue(a,r)}r.setSpan=setSpan;function deleteSpan(t){return t.deleteValue(a)}r.deleteSpan=deleteSpan;function setSpanContext(t,r){return setSpan(t,new o.NonRecordingSpan(r))}r.setSpanContext=setSpanContext;function getSpanContext(t){var r;return(r=getSpan(t))===null||r===void 0?void 0:r.spanContext()}r.getSpanContext=getSpanContext},62110:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TraceStateImpl=void 0;var i=n(54864);var o=32;var a=512;var s=",";var c="=";var u=function(){function TraceStateImpl(t){this._internalState=new Map;if(t)this._parse(t)}TraceStateImpl.prototype.set=function(t,r){var n=this._clone();if(n._internalState.has(t)){n._internalState.delete(t)}n._internalState.set(t,r);return n};TraceStateImpl.prototype.unset=function(t){var r=this._clone();r._internalState.delete(t);return r};TraceStateImpl.prototype.get=function(t){return this._internalState.get(t)};TraceStateImpl.prototype.serialize=function(){var t=this;return this._keys().reduce((function(r,n){r.push(n+c+t.get(n));return r}),[]).join(s)};TraceStateImpl.prototype._parse=function(t){if(t.length>a)return;this._internalState=t.split(s).reverse().reduce((function(t,r){var n=r.trim();var o=n.indexOf(c);if(o!==-1){var a=n.slice(0,o);var s=n.slice(o+1,r.length);if(i.validateKey(a)&&i.validateValue(s)){t.set(a,s)}else{}}return t}),new Map);if(this._internalState.size>o){this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,o))}};TraceStateImpl.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()};TraceStateImpl.prototype._clone=function(){var t=new TraceStateImpl;t._internalState=new Map(this._internalState);return t};return TraceStateImpl}();r.TraceStateImpl=u},54864:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.validateValue=r.validateKey=void 0;var n="[_0-9a-z-*/]";var i="[a-z]"+n+"{0,255}";var o="[a-z0-9]"+n+"{0,240}@[a-z]"+n+"{0,13}";var a=new RegExp("^(?:"+i+"|"+o+")$");var s=/^[ -~]{0,255}[!-~]$/;var c=/,|=/;function validateKey(t){return a.test(t)}r.validateKey=validateKey;function validateValue(t){return s.test(t)&&!c.test(t)}r.validateValue=validateValue},32615:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.createTraceState=void 0;var i=n(62110);function createTraceState(t){return new i.TraceStateImpl(t)}r.createTraceState=createTraceState},91760:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.INVALID_SPAN_CONTEXT=r.INVALID_TRACEID=r.INVALID_SPANID=void 0;var i=n(26905);r.INVALID_SPANID="0000000000000000";r.INVALID_TRACEID="00000000000000000000000000000000";r.INVALID_SPAN_CONTEXT={traceId:r.INVALID_TRACEID,spanId:r.INVALID_SPANID,traceFlags:i.TraceFlags.NONE}},44023:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},4416:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},15769:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},31424:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SpanKind=void 0;var n;(function(t){t[t["INTERNAL"]=0]="INTERNAL";t[t["SERVER"]=1]="SERVER";t[t["CLIENT"]=2]="CLIENT";t[t["PRODUCER"]=3]="PRODUCER";t[t["CONSUMER"]=4]="CONSUMER"})(n=r.SpanKind||(r.SpanKind={}))},49745:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.wrapSpanContext=r.isSpanContextValid=r.isValidSpanId=r.isValidTraceId=void 0;var i=n(91760);var o=n(81462);var a=/^([0-9a-f]{32})$/i;var s=/^[0-9a-f]{16}$/i;function isValidTraceId(t){return a.test(t)&&t!==i.INVALID_TRACEID}r.isValidTraceId=isValidTraceId;function isValidSpanId(t){return s.test(t)&&t!==i.INVALID_SPANID}r.isValidSpanId=isValidSpanId;function isSpanContextValid(t){return isValidTraceId(t.traceId)&&isValidSpanId(t.spanId)}r.isSpanContextValid=isSpanContextValid;function wrapSpanContext(t){return new o.NonRecordingSpan(t)}r.wrapSpanContext=wrapSpanContext},48845:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SpanStatusCode=void 0;var n;(function(t){t[t["UNSET"]=0]="UNSET";t[t["OK"]=1]="OK";t[t["ERROR"]=2]="ERROR"})(n=r.SpanStatusCode||(r.SpanStatusCode={}))},26905:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TraceFlags=void 0;var n;(function(t){t[t["NONE"]=0]="NONE";t[t["SAMPLED"]=1]="SAMPLED"})(n=r.TraceFlags||(r.TraceFlags={}))},88384:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},33168:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},91823:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},30891:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true})},98996:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.VERSION=void 0;r.VERSION="1.1.0"},31736:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.parseSqlConnectionString=r.parseConnectionString=void 0;const i=n(51226);r.parseConnectionString=i.default;const o=n(25055);r.parseSqlConnectionString=o.default},51226:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});var n;(function(t){t[t["key"]=0]="key";t[t["value"]=1]="value"})(n||(n={}));const i=Object.freeze({key:{terminator:"=",quotes:{}},value:{terminator:";",quotes:{'"':'"',"'":"'","{":"}"}}});function connectionStringParser(t,r=i){const o={};let a=n.key;let s=false;let c=false;let u=false;let l="";let d="";let p="";let g=0;function start(){s=true}function finish(){c=true}function reset(){s=false;c=false;u=false;l="";d=""}function config(){return a===n.key?r.key:r.value}function isTerminator(t){return config().terminator===t}function isStartQuote(t){return Object.keys(config().quotes).some((r=>t===r))}function isEndQuote(t){return u&&t===config().quotes[l]}function push(t){d+=t}function collect(){if(!u){d=d.trim()}switch(a){case n.key:p=d.toLowerCase();a=n.value;break;case n.value:a=n.key;o[p]=d;p="";break}reset()}while(g<t.length){const r=t.charAt(g);if(!c){if(!s){if(r.trim()){start();if(isStartQuote(r)){u=true;l=r}else{push(r)}}}else{if(u&&isEndQuote(r)){const n=t.charAt(g+1);if(r===n){push(r);g++}else{finish()}}else if(!u&&isTerminator(r)){const n=t.charAt(g+1);if(r===n){push(r);g++}else{collect()}}else{push(r)}}}else if(isTerminator(r)){collect()}else if(r.trim()){throw new Error("Malformed connection string")}g++}if(u&&!c){throw new Error("Connection string terminated unexpectedly")}else{collect()}return o}r["default"]=connectionStringParser},25055:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SCHEMA=r.SchemaTypes=void 0;const i=n(51226);var o;(function(t){t[t["BOOL"]=0]="BOOL";t[t["STRING"]=1]="STRING";t[t["NUMBER"]=2]="NUMBER"})(o=r.SchemaTypes||(r.SchemaTypes={}));r.SCHEMA={"Application Name":{type:o.STRING,aliases:["App"],validator(t){return t.length<=128}},ApplicationIntent:{type:o.STRING,allowedValues:["ReadOnly","ReadWrite"],default:"ReadWrite"},"Asynchronous Processing":{type:o.BOOL,default:false,aliases:["Async"]},AttachDBFilename:{type:o.STRING,aliases:["Extended Properties","Initial File Name"]},Authentication:{type:o.STRING,allowedValues:["Active Directory Integrated","Active Directory Password","Sql Password"]},"Column Encryption Setting":{type:o.STRING},"Connection Timeout":{type:o.NUMBER,aliases:["Connect Timeout","Timeout"],default:15},"Connection Lifetime":{type:o.NUMBER,aliases:["Load Balance Timeout"],default:0},ConnectRetryCount:{type:o.NUMBER,default:1,validator(t){return t>0&&t<=255}},ConnectRetryInterval:{type:o.NUMBER,default:10},"Context Connection":{type:o.BOOL,default:false},"Current Language":{aliases:["Language"],type:o.STRING,validator(t){return t.length<=128}},"Data Source":{aliases:["Addr","Address","Server","Network Address"],type:o.STRING},Encrypt:{type:o.BOOL,default:false},Enlist:{type:o.BOOL,default:true},"Failover Partner":{type:o.STRING},"Initial Catalog":{type:o.STRING,aliases:["Database"],validator(t){return t.length<=128}},"Integrated Security":{type:o.BOOL,aliases:["Trusted_Connection"],coerce(t){return t==="sspi"||null}},"Max Pool Size":{type:o.NUMBER,default:100,validator(t){return t>=1}},"Min Pool Size":{type:o.NUMBER,default:0,validator(t){return t>=0}},MultipleActiveResultSets:{type:o.BOOL,default:false},MultiSubnetFailover:{type:o.BOOL,default:false},"Network Library":{type:o.STRING,aliases:["Network","Net"],allowedValues:["dbnmpntw","dbmsrpcn","dbmsadsn","dbmsgnet","dbmslpcn","dbmsspxn","dbmssocn","Dbmsvinn"]},"Packet Size":{type:o.NUMBER,default:8e3,validator(t){return t>=512&&t<=32768}},Password:{type:o.STRING,aliases:["PWD"],validator(t){return t.length<=128}},"Persist Security Info":{type:o.BOOL,aliases:["PersistSecurityInfo"],default:false},PoolBlockingPeriod:{type:o.NUMBER,default:0,coerce(t){switch(t.toLowerCase()){case"alwaysblock":return 1;case"auto":return 0;case"neverblock":return 2}return null}},Pooling:{type:o.BOOL,default:true},Replication:{type:o.BOOL,default:false},"Transaction Binding":{type:o.STRING,allowedValues:["Implicit Unbind","Explicit Unbind"],default:"Implicit Unbind"},TransparentNetworkIPResolution:{type:o.BOOL,default:true},TrustServerCertificate:{type:o.BOOL,default:false},"Type System Version":{type:o.STRING,allowedValues:["SQL Server 2012","SQL Server 2008","SQL Server 2005","Latest"]},"User ID":{type:o.STRING,aliases:["UID"],validator(t){return t.length<=128}},"User Instance":{type:o.BOOL,default:false},"Workstation ID":{type:o.STRING,aliases:["WSID"],validator(t){return t.length<=128}}};function guessType(t){if(t.trim()===""){return o.STRING}if(!Number.isNaN(parseInt(t,10))){return o.NUMBER}if(["true","false","yes","no"].includes(t.toLowerCase())){return o.BOOL}return o.STRING}function coerce(t,r,n){if(n){const r=n(t);if(r!==null){return r}}switch(r){case o.BOOL:if(["true","yes","1"].includes(t.toLowerCase())){return true}if(["false","no","0"].includes(t.toLowerCase())){return false}return t;case o.NUMBER:return parseInt(t,10)}return t}function validate(t,r,n){let i=true;if(n){i=n(t)}if(i){i=(r===null||r===void 0?void 0:r.includes(t))||false}return i}function parseSqlConnectionString(t,n=false,o=false,a=false,s=r.SCHEMA){const c=Object.entries(s).reduce(((t,[r,n])=>{var i;Object.assign(t,{[r.toLowerCase()]:n});return((i=n.aliases)===null||i===void 0?void 0:i.reduce(((t,i)=>Object.assign(t,{[i.toLowerCase()]:{...n,canonical:r.toLowerCase()}})),t))||t}),{});return Object.entries(i.default(t)).reduce(((t,[r,i])=>{if(!Object.prototype.hasOwnProperty.call(c,r)){return Object.assign(t,{[r]:coerce(i,guessType(i))})}let o=coerce(i,c[r].type,c[r].coerce);if(a&&!validate(o,c[r].allowedValues,c[r].validator)){o=c[r].default}const s=n?c[r].canonical||r:r;return Object.assign(t,{[s]:o})}),{})}r["default"]=parseSqlConnectionString},81040:t=>{"use strict";function noop(){}function once(t,r){const n=once.spread(t,r);const i=n.then((t=>t[0]));i.cancel=n.cancel;return i}(function(t){function spread(t,r){let n=null;const i=new Promise(((o,a)=>{function cancel(){t.removeListener(r,onEvent);t.removeListener("error",onError);i.cancel=noop}function onEvent(...t){cancel();o(t)}function onError(t){cancel();a(t)}n=cancel;t.on(r,onEvent);t.on("error",onError)}));if(!n){throw new TypeError("Could not get `cancel()` function")}i.cancel=n;return i}t.spread=spread})(once||(once={}));t.exports=once},49690:function(t,r,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const o=n(82361);const a=i(n(38237));const s=i(n(66570));const c=a.default("agent-base");function isAgent(t){return Boolean(t)&&typeof t.addRequest==="function"}function isSecureEndpoint(){const{stack:t}=new Error;if(typeof t!=="string")return false;return t.split("\n").some((t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1))}function createAgent(t,r){return new createAgent.Agent(t,r)}(function(t){class Agent extends o.EventEmitter{constructor(t,r){super();let n=r;if(typeof t==="function"){this.callback=t}else if(t){n=t}this.timeout=null;if(n&&typeof n.timeout==="number"){this.timeout=n.timeout}this.maxFreeSockets=1;this.maxSockets=1;this.maxTotalSockets=Infinity;this.sockets={};this.freeSockets={};this.requests={};this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number"){return this.explicitDefaultPort}return isSecureEndpoint()?443:80}set defaultPort(t){this.explicitDefaultPort=t}get protocol(){if(typeof this.explicitProtocol==="string"){return this.explicitProtocol}return isSecureEndpoint()?"https:":"http:"}set protocol(t){this.explicitProtocol=t}callback(t,r,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(t,r){const n=Object.assign({},r);if(typeof n.secureEndpoint!=="boolean"){n.secureEndpoint=isSecureEndpoint()}if(n.host==null){n.host="localhost"}if(n.port==null){n.port=n.secureEndpoint?443:80}if(n.protocol==null){n.protocol=n.secureEndpoint?"https:":"http:"}if(n.host&&n.path){delete n.path}delete n.agent;delete n.hostname;delete n._defaultAgent;delete n.defaultPort;delete n.createConnection;t._last=true;t.shouldKeepAlive=false;let i=false;let o=null;const a=n.timeout||this.timeout;const onerror=r=>{if(t._hadError)return;t.emit("error",r);t._hadError=true};const ontimeout=()=>{o=null;i=true;const t=new Error(`A "socket" was not created for HTTP request before ${a}ms`);t.code="ETIMEOUT";onerror(t)};const callbackError=t=>{if(i)return;if(o!==null){clearTimeout(o);o=null}onerror(t)};const onsocket=r=>{if(i)return;if(o!=null){clearTimeout(o);o=null}if(isAgent(r)){c("Callback returned another Agent instance %o",r.constructor.name);r.addRequest(t,n);return}if(r){r.once("free",(()=>{this.freeSocket(r,n)}));t.onSocket(r);return}const a=new Error(`no Duplex stream was returned to agent-base for \`${t.method} ${t.path}\``);onerror(a)};if(typeof this.callback!=="function"){onerror(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback){if(this.callback.length>=3){c("Converting legacy callback function to promise");this.promisifiedCallback=s.default(this.callback)}else{this.promisifiedCallback=this.callback}}if(typeof a==="number"&&a>0){o=setTimeout(ontimeout,a)}if("port"in n&&typeof n.port!=="number"){n.port=Number(n.port)}try{c("Resolving socket for %o request: %o",n.protocol,`${t.method} ${t.path}`);Promise.resolve(this.promisifiedCallback(t,n)).then(onsocket,callbackError)}catch(t){Promise.reject(t).catch(callbackError)}}freeSocket(t,r){c("Freeing socket %o %o",t.constructor.name,r);t.destroy()}destroy(){c("Destroying agent %o",this.constructor.name)}}t.Agent=Agent;t.prototype=t.Agent.prototype})(createAgent||(createAgent={}));t.exports=createAgent},66570:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});function promisify(t){return function(r,n){return new Promise(((i,o)=>{t.call(this,r,n,((t,r)=>{if(t){o(t)}else{i(r)}}))}))}}r["default"]=promisify},14812:(t,r,n)=>{t.exports={parallel:n(8210),serial:n(50445),serialOrdered:n(3578)}},1700:t=>{t.exports=abort;function abort(t){Object.keys(t.jobs).forEach(clean.bind(t));t.jobs={}}function clean(t){if(typeof this.jobs[t]=="function"){this.jobs[t]()}}},72794:(t,r,n)=>{var i=n(15295);t.exports=async;function async(t){var r=false;i((function(){r=true}));return function async_callback(n,o){if(r){t(n,o)}else{i((function nextTick_callback(){t(n,o)}))}}}},15295:t=>{t.exports=defer;function defer(t){var r=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;if(r){r(t)}else{setTimeout(t,0)}}},9023:(t,r,n)=>{var i=n(72794),o=n(1700);t.exports=iterate;function iterate(t,r,n,i){var a=n["keyedList"]?n["keyedList"][n.index]:n.index;n.jobs[a]=runJob(r,a,t[a],(function(t,r){if(!(a in n.jobs)){return}delete n.jobs[a];if(t){o(n)}else{n.results[a]=r}i(t,n.results)}))}function runJob(t,r,n,o){var a;if(t.length==2){a=t(n,i(o))}else{a=t(n,r,i(o))}return a}},42474:t=>{t.exports=state;function state(t,r){var n=!Array.isArray(t),i={index:0,keyedList:n||r?Object.keys(t):null,jobs:{},results:n?{}:[],size:n?Object.keys(t).length:t.length};if(r){i.keyedList.sort(n?r:function(n,i){return r(t[n],t[i])})}return i}},37942:(t,r,n)=>{var i=n(1700),o=n(72794);t.exports=terminator;function terminator(t){if(!Object.keys(this.jobs).length){return}this.index=this.size;i(this);o(t)(null,this.results)}},8210:(t,r,n)=>{var i=n(9023),o=n(42474),a=n(37942);t.exports=parallel;function parallel(t,r,n){var s=o(t);while(s.index<(s["keyedList"]||t).length){i(t,r,s,(function(t,r){if(t){n(t,r);return}if(Object.keys(s.jobs).length===0){n(null,s.results);return}}));s.index++}return a.bind(s,n)}},50445:(t,r,n)=>{var i=n(3578);t.exports=serial;function serial(t,r,n){return i(t,r,null,n)}},3578:(t,r,n)=>{var i=n(9023),o=n(42474),a=n(37942);t.exports=serialOrdered;t.exports.ascending=ascending;t.exports.descending=descending;function serialOrdered(t,r,n,s){var c=o(t,n);i(t,r,c,(function iteratorHandler(n,o){if(n){s(n,o);return}c.index++;if(c.index<(c["keyedList"]||t).length){i(t,r,c,iteratorHandler);return}s(null,c.results)}));return a.bind(c,s)}function ascending(t,r){return t<r?-1:t>r?1:0}function descending(t,r){return-1*ascending(t,r)}},96545:(t,r,n)=>{t.exports=n(52618)},68104:(t,r,n)=>{"use strict";var i=n(20328);var o=n(13211);var a=n(41934);var s=n(30646);var c=n(13685);var u=n(95687);var l=n(67707).http;var d=n(67707).https;var p=n(57310);var g=n(59796);var v=n(88593);var E=n(15226);var S=n(21516);var w=/https:?/;function setProxy(t,r,n){t.hostname=r.host;t.host=r.host;t.port=r.port;t.path=n;if(r.auth){var i=Buffer.from(r.auth.username+":"+r.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+i}t.beforeRedirect=function beforeRedirect(t){t.headers.host=t.host;setProxy(t,r,t.href)}}t.exports=function httpAdapter(t){return new Promise((function dispatchHttpRequest(r,n){var x=function resolve(t){r(t)};var N=function reject(t){n(t)};var P=t.data;var D=t.headers;if("User-Agent"in D||"user-agent"in D){if(!D["User-Agent"]&&!D["user-agent"]){delete D["User-Agent"];delete D["user-agent"]}}else{D["User-Agent"]="axios/"+v.version}if(P&&!i.isStream(P)){if(Buffer.isBuffer(P)){}else if(i.isArrayBuffer(P)){P=Buffer.from(new Uint8Array(P))}else if(i.isString(P)){P=Buffer.from(P,"utf-8")}else{return N(E("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t))}D["Content-Length"]=P.length}var M=undefined;if(t.auth){var L=t.auth.username||"";var U=t.auth.password||"";M=L+":"+U}var q=a(t.baseURL,t.url);var B=p.parse(q);var F=B.protocol||"http:";if(!M&&B.auth){var j=B.auth.split(":");var H=j[0]||"";var z=j[1]||"";M=H+":"+z}if(M){delete D.Authorization}var V=w.test(F);var Y=V?t.httpsAgent:t.httpAgent;var G={path:s(B.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:D,agent:Y,agents:{http:t.httpAgent,https:t.httpsAgent},auth:M};if(t.socketPath){G.socketPath=t.socketPath}else{G.hostname=B.hostname;G.port=B.port}var W=t.proxy;if(!W&&W!==false){var $=F.slice(0,-1)+"_proxy";var K=process.env[$]||process.env[$.toUpperCase()];if(K){var J=p.parse(K);var Z=process.env.no_proxy||process.env.NO_PROXY;var X=true;if(Z){var Q=Z.split(",").map((function trim(t){return t.trim()}));X=!Q.some((function proxyMatch(t){if(!t){return false}if(t==="*"){return true}if(t[0]==="."&&B.hostname.substr(B.hostname.length-t.length)===t){return true}return B.hostname===t}))}if(X){W={host:J.hostname,port:J.port,protocol:J.protocol};if(J.auth){var ee=J.auth.split(":");W.auth={username:ee[0],password:ee[1]}}}}}if(W){G.headers.host=B.hostname+(B.port?":"+B.port:"");setProxy(G,W,F+"//"+B.hostname+(B.port?":"+B.port:"")+G.path)}var te;var re=V&&(W?w.test(W.protocol):true);if(t.transport){te=t.transport}else if(t.maxRedirects===0){te=re?u:c}else{if(t.maxRedirects){G.maxRedirects=t.maxRedirects}te=re?d:l}if(t.maxBodyLength>-1){G.maxBodyLength=t.maxBodyLength}var ne=te.request(G,(function handleResponse(r){if(ne.aborted)return;var n=r;var a=r.req||ne;if(r.statusCode!==204&&a.method!=="HEAD"&&t.decompress!==false){switch(r.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(g.createUnzip());delete r.headers["content-encoding"];break}}var s={status:r.statusCode,statusText:r.statusMessage,headers:r.headers,config:t,request:a};if(t.responseType==="stream"){s.data=n;o(x,N,s)}else{var c=[];var u=0;n.on("data",(function handleStreamData(r){c.push(r);u+=r.length;if(t.maxContentLength>-1&&u>t.maxContentLength){n.destroy();N(E("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,a))}}));n.on("error",(function handleStreamError(r){if(ne.aborted)return;N(S(r,t,null,a))}));n.on("end",(function handleStreamEnd(){var r=Buffer.concat(c);if(t.responseType!=="arraybuffer"){r=r.toString(t.responseEncoding);if(!t.responseEncoding||t.responseEncoding==="utf8"){r=i.stripBOM(r)}}s.data=r;o(x,N,s)}))}}));ne.on("error",(function handleRequestError(r){if(ne.aborted&&r.code!=="ERR_FR_TOO_MANY_REDIRECTS")return;N(S(r,t,null,ne))}));if(t.timeout){var ie=parseInt(t.timeout,10);if(isNaN(ie)){N(E("error trying to parse `config.timeout` to int",t,"ERR_PARSE_TIMEOUT",ne));return}ne.setTimeout(ie,(function handleRequestTimeout(){ne.abort();N(E("timeout of "+ie+"ms exceeded",t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ne))}))}if(t.cancelToken){t.cancelToken.promise.then((function onCanceled(t){if(ne.aborted)return;ne.abort();N(t)}))}if(i.isStream(P)){P.on("error",(function handleStreamError(r){N(S(r,t,null,ne))})).pipe(ne)}else{ne.end(P)}}))}},3454:(t,r,n)=>{"use strict";var i=n(20328);var o=n(13211);var a=n(21545);var s=n(30646);var c=n(41934);var u=n(86455);var l=n(33608);var d=n(15226);t.exports=function xhrAdapter(t){return new Promise((function dispatchXhrRequest(r,n){var p=t.data;var g=t.headers;var v=t.responseType;if(i.isFormData(p)){delete g["Content-Type"]}var E=new XMLHttpRequest;if(t.auth){var S=t.auth.username||"";var w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(S+":"+w)}var x=c(t.baseURL,t.url);E.open(t.method.toUpperCase(),s(x,t.params,t.paramsSerializer),true);E.timeout=t.timeout;function onloadend(){if(!E){return}var i="getAllResponseHeaders"in E?u(E.getAllResponseHeaders()):null;var a=!v||v==="text"||v==="json"?E.responseText:E.response;var s={data:a,status:E.status,statusText:E.statusText,headers:i,config:t,request:E};o(r,n,s);E=null}if("onloadend"in E){E.onloadend=onloadend}else{E.onreadystatechange=function handleLoad(){if(!E||E.readyState!==4){return}if(E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)){return}setTimeout(onloadend)}}E.onabort=function handleAbort(){if(!E){return}n(d("Request aborted",t,"ECONNABORTED",E));E=null};E.onerror=function handleError(){n(d("Network Error",t,null,E));E=null};E.ontimeout=function handleTimeout(){var r="timeout of "+t.timeout+"ms exceeded";if(t.timeoutErrorMessage){r=t.timeoutErrorMessage}n(d(r,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E));E=null};if(i.isStandardBrowserEnv()){var N=(t.withCredentials||l(x))&&t.xsrfCookieName?a.read(t.xsrfCookieName):undefined;if(N){g[t.xsrfHeaderName]=N}}if("setRequestHeader"in E){i.forEach(g,(function setRequestHeader(t,r){if(typeof p==="undefined"&&r.toLowerCase()==="content-type"){delete g[r]}else{E.setRequestHeader(r,t)}}))}if(!i.isUndefined(t.withCredentials)){E.withCredentials=!!t.withCredentials}if(v&&v!=="json"){E.responseType=t.responseType}if(typeof t.onDownloadProgress==="function"){E.addEventListener("progress",t.onDownloadProgress)}if(typeof t.onUploadProgress==="function"&&E.upload){E.upload.addEventListener("progress",t.onUploadProgress)}if(t.cancelToken){t.cancelToken.promise.then((function onCanceled(t){if(!E){return}E.abort();n(t);E=null}))}if(!p){p=null}E.send(p)}))}},52618:(t,r,n)=>{"use strict";var i=n(20328);var o=n(77065);var a=n(98178);var s=n(74831);var c=n(98190);function createInstance(t){var r=new a(t);var n=o(a.prototype.request,r);i.extend(n,a.prototype,r);i.extend(n,r);return n}var u=createInstance(c);u.Axios=a;u.create=function create(t){return createInstance(s(u.defaults,t))};u.Cancel=n(98875);u.CancelToken=n(71587);u.isCancel=n(64057);u.all=function all(t){return Promise.all(t)};u.spread=n(74850);u.isAxiosError=n(60650);t.exports=u;t.exports["default"]=u},98875:t=>{"use strict";function Cancel(t){this.message=t}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")};Cancel.prototype.__CANCEL__=true;t.exports=Cancel},71587:(t,r,n)=>{"use strict";var i=n(98875);function CancelToken(t){if(typeof t!=="function"){throw new TypeError("executor must be a function.")}var r;this.promise=new Promise((function promiseExecutor(t){r=t}));var n=this;t((function cancel(t){if(n.reason){return}n.reason=new i(t);r(n.reason)}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason){throw this.reason}};CancelToken.source=function source(){var t;var r=new CancelToken((function executor(r){t=r}));return{token:r,cancel:t}};t.exports=CancelToken},64057:t=>{"use strict";t.exports=function isCancel(t){return!!(t&&t.__CANCEL__)}},98178:(t,r,n)=>{"use strict";var i=n(20328);var o=n(30646);var a=n(3214);var s=n(85062);var c=n(74831);var u=n(51632);var l=u.validators;function Axios(t){this.defaults=t;this.interceptors={request:new a,response:new a}}Axios.prototype.request=function request(t){if(typeof t==="string"){t=arguments[1]||{};t.url=arguments[0]}else{t=t||{}}t=c(this.defaults,t);if(t.method){t.method=t.method.toLowerCase()}else if(this.defaults.method){t.method=this.defaults.method.toLowerCase()}else{t.method="get"}var r=t.transitional;if(r!==undefined){u.assertOptions(r,{silentJSONParsing:l.transitional(l.boolean,"1.0.0"),forcedJSONParsing:l.transitional(l.boolean,"1.0.0"),clarifyTimeoutError:l.transitional(l.boolean,"1.0.0")},false)}var n=[];var i=true;this.interceptors.request.forEach((function unshiftRequestInterceptors(r){if(typeof r.runWhen==="function"&&r.runWhen(t)===false){return}i=i&&r.synchronous;n.unshift(r.fulfilled,r.rejected)}));var o=[];this.interceptors.response.forEach((function pushResponseInterceptors(t){o.push(t.fulfilled,t.rejected)}));var a;if(!i){var d=[s,undefined];Array.prototype.unshift.apply(d,n);d=d.concat(o);a=Promise.resolve(t);while(d.length){a=a.then(d.shift(),d.shift())}return a}var p=t;while(n.length){var g=n.shift();var v=n.shift();try{p=g(p)}catch(t){v(t);break}}try{a=s(p)}catch(t){return Promise.reject(t)}while(o.length){a=a.then(o.shift(),o.shift())}return a};Axios.prototype.getUri=function getUri(t){t=c(this.defaults,t);return o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};i.forEach(["delete","get","head","options"],(function forEachMethodNoData(t){Axios.prototype[t]=function(r,n){return this.request(c(n||{},{method:t,url:r,data:(n||{}).data}))}}));i.forEach(["post","put","patch"],(function forEachMethodWithData(t){Axios.prototype[t]=function(r,n,i){return this.request(c(i||{},{method:t,url:r,data:n}))}}));t.exports=Axios},3214:(t,r,n)=>{"use strict";var i=n(20328);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(t,r,n){this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:false,runWhen:n?n.runWhen:null});return this.handlers.length-1};InterceptorManager.prototype.eject=function eject(t){if(this.handlers[t]){this.handlers[t]=null}};InterceptorManager.prototype.forEach=function forEach(t){i.forEach(this.handlers,(function forEachHandler(r){if(r!==null){t(r)}}))};t.exports=InterceptorManager},41934:(t,r,n)=>{"use strict";var i=n(41301);var o=n(57189);t.exports=function buildFullPath(t,r){if(t&&!i(r)){return o(t,r)}return r}},15226:(t,r,n)=>{"use strict";var i=n(21516);t.exports=function createError(t,r,n,o,a){var s=new Error(t);return i(s,r,n,o,a)}},85062:(t,r,n)=>{"use strict";var i=n(20328);var o=n(19812);var a=n(64057);var s=n(98190);function throwIfCancellationRequested(t){if(t.cancelToken){t.cancelToken.throwIfRequested()}}t.exports=function dispatchRequest(t){throwIfCancellationRequested(t);t.headers=t.headers||{};t.data=o.call(t,t.data,t.headers,t.transformRequest);t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers);i.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(r){delete t.headers[r]}));var r=t.adapter||s.adapter;return r(t).then((function onAdapterResolution(r){throwIfCancellationRequested(t);r.data=o.call(t,r.data,r.headers,t.transformResponse);return r}),(function onAdapterRejection(r){if(!a(r)){throwIfCancellationRequested(t);if(r&&r.response){r.response.data=o.call(t,r.response.data,r.response.headers,t.transformResponse)}}return Promise.reject(r)}))}},21516:t=>{"use strict";t.exports=function enhanceError(t,r,n,i,o){t.config=r;if(n){t.code=n}t.request=i;t.response=o;t.isAxiosError=true;t.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}};return t}},74831:(t,r,n)=>{"use strict";var i=n(20328);t.exports=function mergeConfig(t,r){r=r||{};var n={};var o=["url","method","data"];var a=["headers","auth","proxy","params"];var s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"];var c=["validateStatus"];function getMergedValue(t,r){if(i.isPlainObject(t)&&i.isPlainObject(r)){return i.merge(t,r)}else if(i.isPlainObject(r)){return i.merge({},r)}else if(i.isArray(r)){return r.slice()}return r}function mergeDeepProperties(o){if(!i.isUndefined(r[o])){n[o]=getMergedValue(t[o],r[o])}else if(!i.isUndefined(t[o])){n[o]=getMergedValue(undefined,t[o])}}i.forEach(o,(function valueFromConfig2(t){if(!i.isUndefined(r[t])){n[t]=getMergedValue(undefined,r[t])}}));i.forEach(a,mergeDeepProperties);i.forEach(s,(function defaultToConfig2(o){if(!i.isUndefined(r[o])){n[o]=getMergedValue(undefined,r[o])}else if(!i.isUndefined(t[o])){n[o]=getMergedValue(undefined,t[o])}}));i.forEach(c,(function merge(i){if(i in r){n[i]=getMergedValue(t[i],r[i])}else if(i in t){n[i]=getMergedValue(undefined,t[i])}}));var u=o.concat(a).concat(s).concat(c);var l=Object.keys(t).concat(Object.keys(r)).filter((function filterAxiosKeys(t){return u.indexOf(t)===-1}));i.forEach(l,mergeDeepProperties);return n}},13211:(t,r,n)=>{"use strict";var i=n(15226);t.exports=function settle(t,r,n){var o=n.config.validateStatus;if(!n.status||!o||o(n.status)){t(n)}else{r(i("Request failed with status code "+n.status,n.config,null,n.request,n))}}},19812:(t,r,n)=>{"use strict";var i=n(20328);var o=n(98190);t.exports=function transformData(t,r,n){var a=this||o;i.forEach(n,(function transform(n){t=n.call(a,t,r)}));return t}},98190:(t,r,n)=>{"use strict";var i=n(20328);var o=n(36240);var a=n(21516);var s={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,r){if(!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])){t["Content-Type"]=r}}function getDefaultAdapter(){var t;if(typeof XMLHttpRequest!=="undefined"){t=n(3454)}else if(typeof process!=="undefined"&&Object.prototype.toString.call(process)==="[object process]"){t=n(68104)}return t}function stringifySafely(t,r,n){if(i.isString(t)){try{(r||JSON.parse)(t);return i.trim(t)}catch(t){if(t.name!=="SyntaxError"){throw t}}}return(n||JSON.stringify)(t)}var c={transitional:{silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false},adapter:getDefaultAdapter(),transformRequest:[function transformRequest(t,r){o(r,"Accept");o(r,"Content-Type");if(i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)){return t}if(i.isArrayBufferView(t)){return t.buffer}if(i.isURLSearchParams(t)){setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8");return t.toString()}if(i.isObject(t)||r&&r["Content-Type"]==="application/json"){setContentTypeIfUnset(r,"application/json");return stringifySafely(t)}return t}],transformResponse:[function transformResponse(t){var r=this.transitional;var n=r&&r.silentJSONParsing;var o=r&&r.forcedJSONParsing;var s=!n&&this.responseType==="json";if(s||o&&i.isString(t)&&t.length){try{return JSON.parse(t)}catch(t){if(s){if(t.name==="SyntaxError"){throw a(t,this,"E_JSON_PARSE")}throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(t){return t>=200&&t<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}};i.forEach(["delete","get","head"],(function forEachMethodNoData(t){c.headers[t]={}}));i.forEach(["post","put","patch"],(function forEachMethodWithData(t){c.headers[t]=i.merge(s)}));t.exports=c},77065:t=>{"use strict";t.exports=function bind(t,r){return function wrap(){var n=new Array(arguments.length);for(var i=0;i<n.length;i++){n[i]=arguments[i]}return t.apply(r,n)}}},30646:(t,r,n)=>{"use strict";var i=n(20328);function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function buildURL(t,r,n){if(!r){return t}var o;if(n){o=n(r)}else if(i.isURLSearchParams(r)){o=r.toString()}else{var a=[];i.forEach(r,(function serialize(t,r){if(t===null||typeof t==="undefined"){return}if(i.isArray(t)){r=r+"[]"}else{t=[t]}i.forEach(t,(function parseValue(t){if(i.isDate(t)){t=t.toISOString()}else if(i.isObject(t)){t=JSON.stringify(t)}a.push(encode(r)+"="+encode(t))}))}));o=a.join("&")}if(o){var s=t.indexOf("#");if(s!==-1){t=t.slice(0,s)}t+=(t.indexOf("?")===-1?"?":"&")+o}return t}},57189:t=>{"use strict";t.exports=function combineURLs(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}},21545:(t,r,n)=>{"use strict";var i=n(20328);t.exports=i.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(t,r,n,o,a,s){var c=[];c.push(t+"="+encodeURIComponent(r));if(i.isNumber(n)){c.push("expires="+new Date(n).toGMTString())}if(i.isString(o)){c.push("path="+o)}if(i.isString(a)){c.push("domain="+a)}if(s===true){c.push("secure")}document.cookie=c.join("; ")},read:function read(t){var r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function remove(t){this.write(t,"",Date.now()-864e5)}}}():function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null},remove:function remove(){}}}()},41301:t=>{"use strict";t.exports=function isAbsoluteURL(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},60650:t=>{"use strict";t.exports=function isAxiosError(t){return typeof t==="object"&&t.isAxiosError===true}},33608:(t,r,n)=>{"use strict";var i=n(20328);t.exports=i.isStandardBrowserEnv()?function standardBrowserEnv(){var t=/(msie|trident)/i.test(navigator.userAgent);var r=document.createElement("a");var n;function resolveURL(n){var i=n;if(t){r.setAttribute("href",i);i=r.href}r.setAttribute("href",i);return{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}n=resolveURL(window.location.href);return function isURLSameOrigin(t){var r=i.isString(t)?resolveURL(t):t;return r.protocol===n.protocol&&r.host===n.host}}():function nonStandardBrowserEnv(){return function isURLSameOrigin(){return true}}()},36240:(t,r,n)=>{"use strict";var i=n(20328);t.exports=function normalizeHeaderName(t,r){i.forEach(t,(function processHeader(n,i){if(i!==r&&i.toUpperCase()===r.toUpperCase()){t[r]=n;delete t[i]}}))}},86455:(t,r,n)=>{"use strict";var i=n(20328);var o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function parseHeaders(t){var r={};var n;var a;var s;if(!t){return r}i.forEach(t.split("\n"),(function parser(t){s=t.indexOf(":");n=i.trim(t.substr(0,s)).toLowerCase();a=i.trim(t.substr(s+1));if(n){if(r[n]&&o.indexOf(n)>=0){return}if(n==="set-cookie"){r[n]=(r[n]?r[n]:[]).concat([a])}else{r[n]=r[n]?r[n]+", "+a:a}}}));return r}},74850:t=>{"use strict";t.exports=function spread(t){return function wrap(r){return t.apply(null,r)}}},51632:(t,r,n)=>{"use strict";var i=n(88593);var o={};["object","boolean","number","function","string","symbol"].forEach((function(t,r){o[t]=function validator(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}}));var a={};var s=i.version.split(".");function isOlderVersion(t,r){var n=r?r.split("."):s;var i=t.split(".");for(var o=0;o<3;o++){if(n[o]>i[o]){return true}else if(n[o]<i[o]){return false}}return false}o.transitional=function transitional(t,r,n){var o=r&&isOlderVersion(r);function formatMessage(t,r){return"[Axios v"+i.version+"] Transitional option '"+t+"'"+r+(n?". "+n:"")}return function(n,i,s){if(t===false){throw new Error(formatMessage(i," has been removed in "+r))}if(o&&!a[i]){a[i]=true;console.warn(formatMessage(i," has been deprecated since v"+r+" and will be removed in the near future"))}return t?t(n,i,s):true}};function assertOptions(t,r,n){if(typeof t!=="object"){throw new TypeError("options must be an object")}var i=Object.keys(t);var o=i.length;while(o-- >0){var a=i[o];var s=r[a];if(s){var c=t[a];var u=c===undefined||s(c,a,t);if(u!==true){throw new TypeError("option "+a+" must be "+u)}continue}if(n!==true){throw Error("Unknown option "+a)}}}t.exports={isOlderVersion:isOlderVersion,assertOptions:assertOptions,validators:o}},20328:(t,r,n)=>{"use strict";var i=n(77065);var o=Object.prototype.toString;function isArray(t){return o.call(t)==="[object Array]"}function isUndefined(t){return typeof t==="undefined"}function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&typeof t.constructor.isBuffer==="function"&&t.constructor.isBuffer(t)}function isArrayBuffer(t){return o.call(t)==="[object ArrayBuffer]"}function isFormData(t){return typeof FormData!=="undefined"&&t instanceof FormData}function isArrayBufferView(t){var r;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){r=ArrayBuffer.isView(t)}else{r=t&&t.buffer&&t.buffer instanceof ArrayBuffer}return r}function isString(t){return typeof t==="string"}function isNumber(t){return typeof t==="number"}function isObject(t){return t!==null&&typeof t==="object"}function isPlainObject(t){if(o.call(t)!=="[object Object]"){return false}var r=Object.getPrototypeOf(t);return r===null||r===Object.prototype}function isDate(t){return o.call(t)==="[object Date]"}function isFile(t){return o.call(t)==="[object File]"}function isBlob(t){return o.call(t)==="[object Blob]"}function isFunction(t){return o.call(t)==="[object Function]"}function isStream(t){return isObject(t)&&isFunction(t.pipe)}function isURLSearchParams(t){return typeof URLSearchParams!=="undefined"&&t instanceof URLSearchParams}function trim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){if(typeof navigator!=="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")){return false}return typeof window!=="undefined"&&typeof document!=="undefined"}function forEach(t,r){if(t===null||typeof t==="undefined"){return}if(typeof t!=="object"){t=[t]}if(isArray(t)){for(var n=0,i=t.length;n<i;n++){r.call(null,t[n],n,t)}}else{for(var o in t){if(Object.prototype.hasOwnProperty.call(t,o)){r.call(null,t[o],o,t)}}}}function merge(){var t={};function assignValue(r,n){if(isPlainObject(t[n])&&isPlainObject(r)){t[n]=merge(t[n],r)}else if(isPlainObject(r)){t[n]=merge({},r)}else if(isArray(r)){t[n]=r.slice()}else{t[n]=r}}for(var r=0,n=arguments.length;r<n;r++){forEach(arguments[r],assignValue)}return t}function extend(t,r,n){forEach(r,(function assignValue(r,o){if(n&&typeof r==="function"){t[o]=i(r,n)}else{t[o]=r}}));return t}function stripBOM(t){if(t.charCodeAt(0)===65279){t=t.slice(1)}return t}t.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM}},88510:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(42186);const a=n(21850);class AuthorizerFactory{static getAuthorizer(){return i(this,void 0,void 0,(function*(){o.debug("try-get AzureCLIAuthorizer");try{return yield a.AzureCLIAuthorizer.getAuthorizer()}catch(t){o.debug(t);throw new Error("No credentials found. Add an Azure login action before this action. For more details refer https://github.com/azure/login")}}))}}r.AuthorizerFactory=AuthorizerFactory},21850:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(42186);const a=n(71514);const s=n(47351);class AzureCLIAuthorizer{constructor(){this._token="";this._subscriptionId="";this._cloudSuffixes={};this._cloudEndpoints={}}static getAuthorizer(){return i(this,void 0,void 0,(function*(){if(!this._authorizer){this._authorizer=new AzureCLIAuthorizer;yield this._authorizer._initialize()}return this._authorizer}))}get subscriptionID(){return this._subscriptionId}get baseUrl(){return this._cloudEndpoints["resourceManager"]||"https://management.azure.com/"}getCloudSuffixUrl(t){return this._cloudSuffixes[t]}getCloudEndpointUrl(t){return this._cloudEndpoints[t]}getToken(t,r){return i(this,void 0,void 0,(function*(){if(!this._token||t){try{let t=JSON.parse(yield AzureCLIAuthorizer.executeAzCliCommand("account get-access-token",!!r?r:[]));o.setSecret(t);this._token=t["accessToken"]}catch(t){console.log("Failed to fetch Azure access token");throw t}}return this._token}))}static executeAzCliCommand(t,r){return i(this,void 0,void 0,(function*(){let n=yield AzureCLIAuthorizer._getAzCliPath();let i="";let s="";try{o.debug(`"${n}" ${t}`);yield a.exec(`"${n}" ${t}`,r,{silent:true,listeners:{stdout:t=>{i+=t.toString()},stderr:t=>{s+=t.toString()}}})}catch(t){throw new Error(s)}return i}))}static _getAzCliPath(){return i(this,void 0,void 0,(function*(){if(!this._azCliPath){this._azCliPath=yield s.which("az",true)}return this._azCliPath}))}_initialize(){return i(this,void 0,void 0,(function*(){let t=JSON.parse(yield AzureCLIAuthorizer.executeAzCliCommand("account show"));let r=JSON.parse(yield AzureCLIAuthorizer.executeAzCliCommand("cloud show"));this._subscriptionId=t["id"];this._cloudSuffixes=r["suffixes"];this._cloudEndpoints=r["endpoints"]}))}}r.AzureCLIAuthorizer=AzureCLIAuthorizer},15570:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(42186);const a=n(60162);class ApiResult{constructor(t,r,n,i){this.error=t;this.result=r;this.request=n;this.response=i}}r.ApiResult=ApiResult;class AzureError{}r.AzureError=AzureError;function ToError(t){let r=new AzureError;r.statusCode=t.statusCode;r.message=t.body;if(t.body&&t.body.error){r.code=t.body.error.code;r.message=t.body.error.message;r.details=t.body.error.details;o.error(r.message)}return r}r.ToError=ToError;class ServiceClient{constructor(t,r){this._webClient=new a.WebClient;this._authorizer=t;this.subscriptionId=this._authorizer.subscriptionID;this.baseUrl=this._authorizer.baseUrl;this.longRunningOperationRetryTimeout=!!r?r:0}getRequestUri(t,r,n,i){return this.getRequestUriForbaseUrl(this.baseUrl,t,r,n,i)}getRequestUriForbaseUrl(t,r,n,i,o){let a=t+r;a=a.replace("{subscriptionId}",encodeURIComponent(this.subscriptionId));for(let t in n){a=a.replace(t,encodeURIComponent(n[t]))}let s=/([^:]\/)\/+/gi;a=a.replace(s,"$1");i=i||[];if(!!o){i.push("api-version="+encodeURIComponent(o))}if(i.length>0){a+="?"+i.join("&")}return a}beginRequest(t,r){return i(this,void 0,void 0,(function*(){let n=yield this._authorizer.getToken(false,r);t.headers=t.headers||{};t.headers["Authorization"]=`Bearer ${n}`;t.headers["Content-Type"]="application/json; charset=utf-8";let i=null;try{i=yield this._webClient.sendRequest(t);if(i.statusCode===401&&i.body&&i.body.error&&i.body.error.code==="ExpiredAuthenticationToken"){n=yield this._authorizer.getToken(true,r);t.headers["Authorization"]=`Bearer ${n}`;i=yield this._webClient.sendRequest(t)}}catch(t){let r=t.toString();if(r.indexOf("Hostname/IP doesn't match certificates's altnames")!=-1||r.indexOf("unable to verify the first certificate")!=-1||r.indexOf("unable to get local issuer certificate")!=-1){o.warning("You're probably using a self-signed certificate in the SSL certificate validation chain. To resolve them you need to export a variable named ACTIONS_AZURE_REST_IGNORE_SSL_ERRORS to the value true.");throw t}}return i}))}accumulateResultFromPagedResult(t){return i(this,void 0,void 0,(function*(){let r=[];while(!!t){let n={method:"GET",uri:t};let i=yield this.beginRequest(n);if(i.statusCode==200&&i.body){if(i.body.value){r=r.concat(i.body.value)}t=i.body.nextLink}else{return new ApiResult(ToError(i))}}return new ApiResult(null,r)}))}getLongRunningOperationResult(t){return i(this,void 0,void 0,(function*(){let r=2;let n=(new Date).getTime()+r*60*1e3;let i={method:"GET",uri:t.headers["azure-asyncoperation"]||t.headers["location"]};if(!i.uri){throw new Error("Unable to find the Azure-Async operation polling URI.")}while(true){t=yield this.beginRequest(i);o.debug(`POLL URL RESULT: ${JSON.stringify(t)}`);if(t.statusCode===202||t.body&&(t.body.status=="Accepted"||t.body.status=="Running"||t.body.status=="InProgress")){if(n<(new Date).getTime()){throw new Error(`Async polling request timed out. URI: ${i.uri}`)}let r=t.headers["retry-after"]&&parseInt(t.headers["retry-after"])||15;yield this._sleep(r)}else if(t.statusCode===200){break}else{throw ToError(t)}}return t}))}getAccessToken(){return this._authorizer.getToken()}_sleep(t){return new Promise((r=>{setTimeout(r,t*1e3)}))}}r.ServiceClient=ServiceClient},5967:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const i=n(15538);class RequestClient{constructor(){RequestClient._options={};let t=`${process.env.ACTIONS_AZURE_REST_IGNORE_SSL_ERRORS}`;RequestClient._options.ignoreSslError=!!t&&t.toLowerCase()==="true";RequestClient._instance=new i.HttpClient(`${process.env.AZURE_HTTP_USER_AGENT}`,undefined,RequestClient._options)}static GetInstance(){if(RequestClient._instance===undefined){new RequestClient}return RequestClient._instance}static SetOptions(t){RequestClient._options=t}}r.RequestClient=RequestClient},60162:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(42186);const a=n(57147);const s=n(5967);const c=["ETIMEDOUT","ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EA_AGAIN"];const u=[408,409,500,502,503,504];const l=5;const d=2;class WebClient{constructor(){this._httpClient=s.RequestClient.GetInstance()}sendRequest(t,r){return i(this,void 0,void 0,(function*(){let n=0;let i=r&&r.retryCount?r.retryCount:l;let s=r&&r.retryIntervalInSeconds?r.retryIntervalInSeconds:d;let p=r&&r.retriableErrorCodes?r.retriableErrorCodes:c;let g=r&&r.retriableStatusCodes?r.retriableStatusCodes:u;let v=s;while(true){try{if(t.body&&typeof t.body!=="string"&&!t.body["readable"]){t.body=a.createReadStream(t.body["path"])}let r=yield this._sendRequestInternal(t);if(g.indexOf(r.statusCode)!=-1&&++n<i){o.debug(`Encountered a retriable status code: ${r.statusCode}. Message: '${r.statusMessage}'.`);yield this._sleep(v);v=v*s+s;continue}return r}catch(t){if(p.indexOf(t.code)!=-1&&++n<i){o.debug(`Encountered a retriable error:${t.code}. Message: ${t.message}.`);yield this._sleep(v);v=v*s+s}else{if(t.code){o.error(t.code)}throw t}}}}))}_sendRequestInternal(t){return i(this,void 0,void 0,(function*(){o.debug(`[${t.method}] ${t.uri}`);let r=yield this._httpClient.request(t.method,t.uri,t.body||"",t.headers);if(!r){throw new Error(`Unexpected end of request. Http request: [${t.method}] ${t.uri} returned a null Http response.`)}return yield this._toWebResponse(r)}))}_toWebResponse(t){return i(this,void 0,void 0,(function*(){let r;let n=yield t.readBody();if(!!n){try{r=JSON.parse(n)}catch(t){o.debug(`Could not parse response body.`);o.debug(JSON.stringify(t))}}return{statusCode:t.message.statusCode,statusMessage:t.message.statusMessage,headers:t.message.headers,body:r||n}}))}_sleep(t){return new Promise((r=>{setTimeout(r,t*1e3)}))}}r.WebClient=WebClient},9417:t=>{"use strict";t.exports=balanced;function balanced(t,r,n){if(t instanceof RegExp)t=maybeMatch(t,n);if(r instanceof RegExp)r=maybeMatch(r,n);var i=range(t,r,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+t.length,i[1]),post:n.slice(i[1]+r.length)}}function maybeMatch(t,r){var n=r.match(t);return n?n[0]:null}balanced.range=range;function range(t,r,n){var i,o,a,s,c;var u=n.indexOf(t);var l=n.indexOf(r,u+1);var d=u;if(u>=0&&l>0){i=[];a=n.length;while(d>=0&&!c){if(d==u){i.push(d);u=n.indexOf(t,d+1)}else if(i.length==1){c=[i.pop(),l]}else{o=i.pop();if(o<a){a=o;s=l}l=n.indexOf(r,d+1)}d=u<l&&u>=0?u:l}if(i.length){c=[a,s]}}return c}},23664:(t,r,n)=>{"use strict";const{Buffer:i}=n(14300);const o=Symbol.for("BufferList");function BufferList(t){if(!(this instanceof BufferList)){return new BufferList(t)}BufferList._init.call(this,t)}BufferList._init=function _init(t){Object.defineProperty(this,o,{value:true});this._bufs=[];this.length=0;if(t){this.append(t)}};BufferList.prototype._new=function _new(t){return new BufferList(t)};BufferList.prototype._offset=function _offset(t){if(t===0){return[0,0]}let r=0;for(let n=0;n<this._bufs.length;n++){const i=r+this._bufs[n].length;if(t<i||n===this._bufs.length-1){return[n,t-r]}r=i}};BufferList.prototype._reverseOffset=function(t){const r=t[0];let n=t[1];for(let t=0;t<r;t++){n+=this._bufs[t].length}return n};BufferList.prototype.get=function get(t){if(t>this.length||t<0){return undefined}const r=this._offset(t);return this._bufs[r[0]][r[1]]};BufferList.prototype.slice=function slice(t,r){if(typeof t==="number"&&t<0){t+=this.length}if(typeof r==="number"&&r<0){r+=this.length}return this.copy(null,0,t,r)};BufferList.prototype.copy=function copy(t,r,n,o){if(typeof n!=="number"||n<0){n=0}if(typeof o!=="number"||o>this.length){o=this.length}if(n>=this.length){return t||i.alloc(0)}if(o<=0){return t||i.alloc(0)}const copy=!!t;const a=this._offset(n);const s=o-n;let c=s;let u=copy&&r||0;let l=a[1];if(n===0&&o===this.length){if(!copy){return this._bufs.length===1?this._bufs[0]:i.concat(this._bufs,this.length)}for(let r=0;r<this._bufs.length;r++){this._bufs[r].copy(t,u);u+=this._bufs[r].length}return t}if(c<=this._bufs[a[0]].length-l){return copy?this._bufs[a[0]].copy(t,r,l,l+c):this._bufs[a[0]].slice(l,l+c)}if(!copy){t=i.allocUnsafe(s)}for(let r=a[0];r<this._bufs.length;r++){const n=this._bufs[r].length-l;if(c>n){this._bufs[r].copy(t,u,l);u+=n}else{this._bufs[r].copy(t,u,l,l+c);u+=n;break}c-=n;if(l){l=0}}if(t.length>u)return t.slice(0,u);return t};BufferList.prototype.shallowSlice=function shallowSlice(t,r){t=t||0;r=typeof r!=="number"?this.length:r;if(t<0){t+=this.length}if(r<0){r+=this.length}if(t===r){return this._new()}const n=this._offset(t);const i=this._offset(r);const o=this._bufs.slice(n[0],i[0]+1);if(i[1]===0){o.pop()}else{o[o.length-1]=o[o.length-1].slice(0,i[1])}if(n[1]!==0){o[0]=o[0].slice(n[1])}return this._new(o)};BufferList.prototype.toString=function toString(t,r,n){return this.slice(r,n).toString(t)};BufferList.prototype.consume=function consume(t){t=Math.trunc(t);if(Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(t>=this._bufs[0].length){t-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(t);this.length-=t;break}}return this};BufferList.prototype.duplicate=function duplicate(){const t=this._new();for(let r=0;r<this._bufs.length;r++){t.append(this._bufs[r])}return t};BufferList.prototype.append=function append(t){if(t==null){return this}if(t.buffer){this._appendBuffer(i.from(t.buffer,t.byteOffset,t.byteLength))}else if(Array.isArray(t)){for(let r=0;r<t.length;r++){this.append(t[r])}}else if(this._isBufferList(t)){for(let r=0;r<t._bufs.length;r++){this.append(t._bufs[r])}}else{if(typeof t==="number"){t=t.toString()}this._appendBuffer(i.from(t))}return this};BufferList.prototype._appendBuffer=function appendBuffer(t){this._bufs.push(t);this.length+=t.length};BufferList.prototype.indexOf=function(t,r,n){if(n===undefined&&typeof r==="string"){n=r;r=undefined}if(typeof t==="function"||Array.isArray(t)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof t==="number"){t=i.from([t])}else if(typeof t==="string"){t=i.from(t,n)}else if(this._isBufferList(t)){t=t.slice()}else if(Array.isArray(t.buffer)){t=i.from(t.buffer,t.byteOffset,t.byteLength)}else if(!i.isBuffer(t)){t=i.from(t)}r=Number(r||0);if(isNaN(r)){r=0}if(r<0){r=this.length+r}if(r<0){r=0}if(t.length===0){return r>this.length?this.length:r}const o=this._offset(r);let a=o[0];let s=o[1];for(;a<this._bufs.length;a++){const r=this._bufs[a];while(s<r.length){const n=r.length-s;if(n>=t.length){const n=r.indexOf(t,s);if(n!==-1){return this._reverseOffset([a,n])}s=r.length-t.length+1}else{const r=this._reverseOffset([a,s]);if(this._match(r,t)){return r}s++}}s=0}return-1};BufferList.prototype._match=function(t,r){if(this.length-t<r.length){return false}for(let n=0;n<r.length;n++){if(this.get(t+n)!==r[n]){return false}}return true};(function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const r in t){(function(r){if(t[r]===null){BufferList.prototype[r]=function(t,n){return this.slice(t,t+n)[r](0,n)}}else{BufferList.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}}})(r)}})();BufferList.prototype._isBufferList=function _isBufferList(t){return t instanceof BufferList||BufferList.isBufferList(t)};BufferList.isBufferList=function isBufferList(t){return t!=null&&t[o]};t.exports=BufferList},20336:(t,r,n)=>{"use strict";const i=n(85519).Duplex;const o=n(44124);const a=n(23664);function BufferListStream(t){if(!(this instanceof BufferListStream)){return new BufferListStream(t)}if(typeof t==="function"){this._callback=t;const r=function piper(t){if(this._callback){this._callback(t);this._callback=null}}.bind(this);this.on("pipe",(function onPipe(t){t.on("error",r)}));this.on("unpipe",(function onUnpipe(t){t.removeListener("error",r)}));t=null}a._init.call(this,t);i.call(this)}o(BufferListStream,i);Object.assign(BufferListStream.prototype,a.prototype);BufferListStream.prototype._new=function _new(t){return new BufferListStream(t)};BufferListStream.prototype._write=function _write(t,r,n){this._appendBuffer(t);if(typeof n==="function"){n()}};BufferListStream.prototype._read=function _read(t){if(!this.length){return this.push(null)}t=Math.min(t,this.length);this.push(this.slice(0,t));this.consume(t)};BufferListStream.prototype.end=function end(t){i.prototype.end.call(this,t);if(this._callback){this._callback(null,this.slice());this._callback=null}};BufferListStream.prototype._destroy=function _destroy(t,r){this._bufs.length=0;this.length=0;r(t)};BufferListStream.prototype._isBufferList=function _isBufferList(t){return t instanceof BufferListStream||t instanceof a||BufferListStream.isBufferList(t)};BufferListStream.isBufferList=a.isBufferList;t.exports=BufferListStream;t.exports.BufferListStream=BufferListStream;t.exports.BufferList=a},97713:t=>{"use strict";const r={};function createErrorType(t,n,i){if(!i){i=Error}function getMessage(t,r,i){if(typeof n==="string"){return n}else{return n(t,r,i)}}class NodeError extends i{constructor(t,r,n){super(getMessage(t,r,n))}}NodeError.prototype.name=i.name;NodeError.prototype.code=t;r[t]=NodeError}function oneOf(t,r){if(Array.isArray(t)){const n=t.length;t=t.map((t=>String(t)));if(n>2){return`one of ${r} ${t.slice(0,n-1).join(", ")}, or `+t[n-1]}else if(n===2){return`one of ${r} ${t[0]} or ${t[1]}`}else{return`of ${r} ${t[0]}`}}else{return`of ${r} ${String(t)}`}}function startsWith(t,r,n){return t.substr(!n||n<0?0:+n,r.length)===r}function endsWith(t,r,n){if(n===undefined||n>t.length){n=t.length}return t.substring(n-r.length,n)===r}function includes(t,r,n){if(typeof n!=="number"){n=0}if(n+r.length>t.length){return false}else{return t.indexOf(r,n)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",(function(t,r){return'The value "'+r+'" is invalid for option "'+t+'"'}),TypeError);createErrorType("ERR_INVALID_ARG_TYPE",(function(t,r,n){let i;if(typeof r==="string"&&startsWith(r,"not ")){i="must not be";r=r.replace(/^not /,"")}else{i="must be"}let o;if(endsWith(t," argument")){o=`The ${t} ${i} ${oneOf(r,"type")}`}else{const n=includes(t,".")?"property":"argument";o=`The "${t}" ${n} ${i} ${oneOf(r,"type")}`}o+=`. Received type ${typeof n}`;return o}),TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"}));createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"}));createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");t.exports.q=r},13928:(t,r,n)=>{"use strict";var i=Object.keys||function(t){var r=[];for(var n in t){r.push(n)}return r};t.exports=Duplex;var o=n(85209);var a=n(58729);n(44124)(Duplex,o);{var s=i(a.prototype);for(var c=0;c<s.length;c++){var u=s[c];if(!Duplex.prototype[u])Duplex.prototype[u]=a.prototype[u]}}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);o.call(this,t);a.call(this,t);this.allowHalfOpen=true;if(t){if(t.readable===false)this.readable=false;if(t.writable===false)this.writable=false;if(t.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(t){t.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(t){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=t;this._writableState.destroyed=t}})},4991:(t,r,n)=>{"use strict";t.exports=PassThrough;var i=n(26753);n(44124)(PassThrough,i);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);i.call(this,t)}PassThrough.prototype._transform=function(t,r,n){n(null,t)}},85209:(t,r,n)=>{"use strict";t.exports=Readable;var i;Readable.ReadableState=ReadableState;var o=n(82361).EventEmitter;var a=function EElistenerCount(t,r){return t.listeners(r).length};var s=n(36238);var c=n(14300).Buffer;var u=global.Uint8Array||function(){};function _uint8ArrayToBuffer(t){return c.from(t)}function _isUint8Array(t){return c.isBuffer(t)||t instanceof u}var l=n(73837);var d;if(l&&l.debuglog){d=l.debuglog("stream")}else{d=function debug(){}}var p=n(70662);var g=n(36994);var v=n(3533),E=v.getHighWaterMark;var S=n(97713).q,w=S.ERR_INVALID_ARG_TYPE,x=S.ERR_STREAM_PUSH_AFTER_EOF,N=S.ERR_METHOD_NOT_IMPLEMENTED,P=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var D;var M;var L;n(44124)(Readable,s);var U=g.errorOrDestroy;var q=["error","close","destroy","pause","resume"];function prependListener(t,r,n){if(typeof t.prependListener==="function")return t.prependListener(r,n);if(!t._events||!t._events[r])t.on(r,n);else if(Array.isArray(t._events[r]))t._events[r].unshift(n);else t._events[r]=[n,t._events[r]]}function ReadableState(t,r,o){i=i||n(13928);t=t||{};if(typeof o!=="boolean")o=r instanceof i;this.objectMode=!!t.objectMode;if(o)this.objectMode=this.objectMode||!!t.readableObjectMode;this.highWaterMark=E(this,t,"readableHighWaterMark",o);this.buffer=new p;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=t.emitClose!==false;this.autoDestroy=!!t.autoDestroy;this.destroyed=false;this.defaultEncoding=t.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!D)D=n(94841).s;this.decoder=new D(t.encoding);this.encoding=t.encoding}}function Readable(t){i=i||n(13928);if(!(this instanceof Readable))return new Readable(t);var r=this instanceof i;this._readableState=new ReadableState(t,this,r);this.readable=true;if(t){if(typeof t.read==="function")this._read=t.read;if(typeof t.destroy==="function")this._destroy=t.destroy}s.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(t){if(!this._readableState){return}this._readableState.destroyed=t}});Readable.prototype.destroy=g.destroy;Readable.prototype._undestroy=g.undestroy;Readable.prototype._destroy=function(t,r){r(t)};Readable.prototype.push=function(t,r){var n=this._readableState;var i;if(!n.objectMode){if(typeof t==="string"){r=r||n.defaultEncoding;if(r!==n.encoding){t=c.from(t,r);r=""}i=true}}else{i=true}return readableAddChunk(this,t,r,false,i)};Readable.prototype.unshift=function(t){return readableAddChunk(this,t,null,true,false)};function readableAddChunk(t,r,n,i,o){d("readableAddChunk",r);var a=t._readableState;if(r===null){a.reading=false;onEofChunk(t,a)}else{var s;if(!o)s=chunkInvalid(a,r);if(s){U(t,s)}else if(a.objectMode||r&&r.length>0){if(typeof r!=="string"&&!a.objectMode&&Object.getPrototypeOf(r)!==c.prototype){r=_uint8ArrayToBuffer(r)}if(i){if(a.endEmitted)U(t,new P);else addChunk(t,a,r,true)}else if(a.ended){U(t,new x)}else if(a.destroyed){return false}else{a.reading=false;if(a.decoder&&!n){r=a.decoder.write(r);if(a.objectMode||r.length!==0)addChunk(t,a,r,false);else maybeReadMore(t,a)}else{addChunk(t,a,r,false)}}}else if(!i){a.reading=false;maybeReadMore(t,a)}}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function addChunk(t,r,n,i){if(r.flowing&&r.length===0&&!r.sync){r.awaitDrain=0;t.emit("data",n)}else{r.length+=r.objectMode?1:n.length;if(i)r.buffer.unshift(n);else r.buffer.push(n);if(r.needReadable)emitReadable(t)}maybeReadMore(t,r)}function chunkInvalid(t,r){var n;if(!_isUint8Array(r)&&typeof r!=="string"&&r!==undefined&&!t.objectMode){n=new w("chunk",["string","Buffer","Uint8Array"],r)}return n}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(t){if(!D)D=n(94841).s;var r=new D(t);this._readableState.decoder=r;this._readableState.encoding=this._readableState.decoder.encoding;var i=this._readableState.buffer.head;var o="";while(i!==null){o+=r.write(i.data);i=i.next}this._readableState.buffer.clear();if(o!=="")this._readableState.buffer.push(o);this._readableState.length=o.length;return this};var B=1073741824;function computeNewHighWaterMark(t){if(t>=B){t=B}else{t--;t|=t>>>1;t|=t>>>2;t|=t>>>4;t|=t>>>8;t|=t>>>16;t++}return t}function howMuchToRead(t,r){if(t<=0||r.length===0&&r.ended)return 0;if(r.objectMode)return 1;if(t!==t){if(r.flowing&&r.length)return r.buffer.head.data.length;else return r.length}if(t>r.highWaterMark)r.highWaterMark=computeNewHighWaterMark(t);if(t<=r.length)return t;if(!r.ended){r.needReadable=true;return 0}return r.length}Readable.prototype.read=function(t){d("read",t);t=parseInt(t,10);var r=this._readableState;var n=t;if(t!==0)r.emittedReadable=false;if(t===0&&r.needReadable&&((r.highWaterMark!==0?r.length>=r.highWaterMark:r.length>0)||r.ended)){d("read: emitReadable",r.length,r.ended);if(r.length===0&&r.ended)endReadable(this);else emitReadable(this);return null}t=howMuchToRead(t,r);if(t===0&&r.ended){if(r.length===0)endReadable(this);return null}var i=r.needReadable;d("need readable",i);if(r.length===0||r.length-t<r.highWaterMark){i=true;d("length less than watermark",i)}if(r.ended||r.reading){i=false;d("reading or ended",i)}else if(i){d("do read");r.reading=true;r.sync=true;if(r.length===0)r.needReadable=true;this._read(r.highWaterMark);r.sync=false;if(!r.reading)t=howMuchToRead(n,r)}var o;if(t>0)o=fromList(t,r);else o=null;if(o===null){r.needReadable=r.length<=r.highWaterMark;t=0}else{r.length-=t;r.awaitDrain=0}if(r.length===0){if(!r.ended)r.needReadable=true;if(n!==t&&r.ended)endReadable(this)}if(o!==null)this.emit("data",o);return o};function onEofChunk(t,r){d("onEofChunk");if(r.ended)return;if(r.decoder){var n=r.decoder.end();if(n&&n.length){r.buffer.push(n);r.length+=r.objectMode?1:n.length}}r.ended=true;if(r.sync){emitReadable(t)}else{r.needReadable=false;if(!r.emittedReadable){r.emittedReadable=true;emitReadable_(t)}}}function emitReadable(t){var r=t._readableState;d("emitReadable",r.needReadable,r.emittedReadable);r.needReadable=false;if(!r.emittedReadable){d("emitReadable",r.flowing);r.emittedReadable=true;process.nextTick(emitReadable_,t)}}function emitReadable_(t){var r=t._readableState;d("emitReadable_",r.destroyed,r.length,r.ended);if(!r.destroyed&&(r.length||r.ended)){t.emit("readable");r.emittedReadable=false}r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark;flow(t)}function maybeReadMore(t,r){if(!r.readingMore){r.readingMore=true;process.nextTick(maybeReadMore_,t,r)}}function maybeReadMore_(t,r){while(!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&r.length===0)){var n=r.length;d("maybeReadMore read 0");t.read(0);if(n===r.length)break}r.readingMore=false}Readable.prototype._read=function(t){U(this,new N("_read()"))};Readable.prototype.pipe=function(t,r){var n=this;var i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1;d("pipe count=%d opts=%j",i.pipesCount,r);var o=(!r||r.end!==false)&&t!==process.stdout&&t!==process.stderr;var s=o?onend:unpipe;if(i.endEmitted)process.nextTick(s);else n.once("end",s);t.on("unpipe",onunpipe);function onunpipe(t,r){d("onunpipe");if(t===n){if(r&&r.hasUnpiped===false){r.hasUnpiped=true;cleanup()}}}function onend(){d("onend");t.end()}var c=pipeOnDrain(n);t.on("drain",c);var u=false;function cleanup(){d("cleanup");t.removeListener("close",onclose);t.removeListener("finish",onfinish);t.removeListener("drain",c);t.removeListener("error",onerror);t.removeListener("unpipe",onunpipe);n.removeListener("end",onend);n.removeListener("end",unpipe);n.removeListener("data",ondata);u=true;if(i.awaitDrain&&(!t._writableState||t._writableState.needDrain))c()}n.on("data",ondata);function ondata(r){d("ondata");var o=t.write(r);d("dest.write",o);if(o===false){if((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&indexOf(i.pipes,t)!==-1)&&!u){d("false write response, pause",i.awaitDrain);i.awaitDrain++}n.pause()}}function onerror(r){d("onerror",r);unpipe();t.removeListener("error",onerror);if(a(t,"error")===0)U(t,r)}prependListener(t,"error",onerror);function onclose(){t.removeListener("finish",onfinish);unpipe()}t.once("close",onclose);function onfinish(){d("onfinish");t.removeListener("close",onclose);unpipe()}t.once("finish",onfinish);function unpipe(){d("unpipe");n.unpipe(t)}t.emit("pipe",n);if(!i.flowing){d("pipe resume");n.resume()}return t};function pipeOnDrain(t){return function pipeOnDrainFunctionResult(){var r=t._readableState;d("pipeOnDrain",r.awaitDrain);if(r.awaitDrain)r.awaitDrain--;if(r.awaitDrain===0&&a(t,"data")){r.flowing=true;flow(t)}}}Readable.prototype.unpipe=function(t){var r=this._readableState;var n={hasUnpiped:false};if(r.pipesCount===0)return this;if(r.pipesCount===1){if(t&&t!==r.pipes)return this;if(!t)t=r.pipes;r.pipes=null;r.pipesCount=0;r.flowing=false;if(t)t.emit("unpipe",this,n);return this}if(!t){var i=r.pipes;var o=r.pipesCount;r.pipes=null;r.pipesCount=0;r.flowing=false;for(var a=0;a<o;a++){i[a].emit("unpipe",this,{hasUnpiped:false})}return this}var s=indexOf(r.pipes,t);if(s===-1)return this;r.pipes.splice(s,1);r.pipesCount-=1;if(r.pipesCount===1)r.pipes=r.pipes[0];t.emit("unpipe",this,n);return this};Readable.prototype.on=function(t,r){var n=s.prototype.on.call(this,t,r);var i=this._readableState;if(t==="data"){i.readableListening=this.listenerCount("readable")>0;if(i.flowing!==false)this.resume()}else if(t==="readable"){if(!i.endEmitted&&!i.readableListening){i.readableListening=i.needReadable=true;i.flowing=false;i.emittedReadable=false;d("on readable",i.length,i.reading);if(i.length){emitReadable(this)}else if(!i.reading){process.nextTick(nReadingNextTick,this)}}}return n};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(t,r){var n=s.prototype.removeListener.call(this,t,r);if(t==="readable"){process.nextTick(updateReadableListening,this)}return n};Readable.prototype.removeAllListeners=function(t){var r=s.prototype.removeAllListeners.apply(this,arguments);if(t==="readable"||t===undefined){process.nextTick(updateReadableListening,this)}return r};function updateReadableListening(t){var r=t._readableState;r.readableListening=t.listenerCount("readable")>0;if(r.resumeScheduled&&!r.paused){r.flowing=true}else if(t.listenerCount("data")>0){t.resume()}}function nReadingNextTick(t){d("readable nexttick read 0");t.read(0)}Readable.prototype.resume=function(){var t=this._readableState;if(!t.flowing){d("resume");t.flowing=!t.readableListening;resume(this,t)}t.paused=false;return this};function resume(t,r){if(!r.resumeScheduled){r.resumeScheduled=true;process.nextTick(resume_,t,r)}}function resume_(t,r){d("resume",r.reading);if(!r.reading){t.read(0)}r.resumeScheduled=false;t.emit("resume");flow(t);if(r.flowing&&!r.reading)t.read(0)}Readable.prototype.pause=function(){d("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){d("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(t){var r=t._readableState;d("flow",r.flowing);while(r.flowing&&t.read()!==null){}}Readable.prototype.wrap=function(t){var r=this;var n=this._readableState;var i=false;t.on("end",(function(){d("wrapped end");if(n.decoder&&!n.ended){var t=n.decoder.end();if(t&&t.length)r.push(t)}r.push(null)}));t.on("data",(function(o){d("wrapped data");if(n.decoder)o=n.decoder.write(o);if(n.objectMode&&(o===null||o===undefined))return;else if(!n.objectMode&&(!o||!o.length))return;var a=r.push(o);if(!a){i=true;t.pause()}}));for(var o in t){if(this[o]===undefined&&typeof t[o]==="function"){this[o]=function methodWrap(r){return function methodWrapReturnFunction(){return t[r].apply(t,arguments)}}(o)}}for(var a=0;a<q.length;a++){t.on(q[a],this.emit.bind(this,q[a]))}this._read=function(r){d("wrapped _read",r);if(i){i=false;t.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(M===undefined){M=n(37558)}return M(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(t){if(this._readableState){this._readableState.flowing=t}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(t,r){if(r.length===0)return null;var n;if(r.objectMode)n=r.buffer.shift();else if(!t||t>=r.length){if(r.decoder)n=r.buffer.join("");else if(r.buffer.length===1)n=r.buffer.first();else n=r.buffer.concat(r.length);r.buffer.clear()}else{n=r.buffer.consume(t,r.decoder)}return n}function endReadable(t){var r=t._readableState;d("endReadable",r.endEmitted);if(!r.endEmitted){r.ended=true;process.nextTick(endReadableNT,r,t)}}function endReadableNT(t,r){d("endReadableNT",t.endEmitted,t.length);if(!t.endEmitted&&t.length===0){t.endEmitted=true;r.readable=false;r.emit("end");if(t.autoDestroy){var n=r._writableState;if(!n||n.autoDestroy&&n.finished){r.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(t,r){if(L===undefined){L=n(57039)}return L(Readable,t,r)}}function indexOf(t,r){for(var n=0,i=t.length;n<i;n++){if(t[n]===r)return n}return-1}},26753:(t,r,n)=>{"use strict";t.exports=Transform;var i=n(97713).q,o=i.ERR_METHOD_NOT_IMPLEMENTED,a=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=i.ERR_TRANSFORM_WITH_LENGTH_0;var u=n(13928);n(44124)(Transform,u);function afterTransform(t,r){var n=this._transformState;n.transforming=false;var i=n.writecb;if(i===null){return this.emit("error",new a)}n.writechunk=null;n.writecb=null;if(r!=null)this.push(r);i(t);var o=this._readableState;o.reading=false;if(o.needReadable||o.length<o.highWaterMark){this._read(o.highWaterMark)}}function Transform(t){if(!(this instanceof Transform))return new Transform(t);u.call(this,t);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(t){if(typeof t.transform==="function")this._transform=t.transform;if(typeof t.flush==="function")this._flush=t.flush}this.on("prefinish",prefinish)}function prefinish(){var t=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush((function(r,n){done(t,r,n)}))}else{done(this,null,null)}}Transform.prototype.push=function(t,r){this._transformState.needTransform=false;return u.prototype.push.call(this,t,r)};Transform.prototype._transform=function(t,r,n){n(new o("_transform()"))};Transform.prototype._write=function(t,r,n){var i=this._transformState;i.writecb=n;i.writechunk=t;i.writeencoding=r;if(!i.transforming){var o=this._readableState;if(i.needTransform||o.needReadable||o.length<o.highWaterMark)this._read(o.highWaterMark)}};Transform.prototype._read=function(t){var r=this._transformState;if(r.writechunk!==null&&!r.transforming){r.transforming=true;this._transform(r.writechunk,r.writeencoding,r.afterTransform)}else{r.needTransform=true}};Transform.prototype._destroy=function(t,r){u.prototype._destroy.call(this,t,(function(t){r(t)}))};function done(t,r,n){if(r)return t.emit("error",r);if(n!=null)t.push(n);if(t._writableState.length)throw new c;if(t._transformState.transforming)throw new s;return t.push(null)}},58729:(t,r,n)=>{"use strict";t.exports=Writable;function WriteReq(t,r,n){this.chunk=t;this.encoding=r;this.callback=n;this.next=null}function CorkedRequest(t){var r=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(r,t)}}var i;Writable.WritableState=WritableState;var o={deprecate:n(65278)};var a=n(36238);var s=n(14300).Buffer;var c=global.Uint8Array||function(){};function _uint8ArrayToBuffer(t){return s.from(t)}function _isUint8Array(t){return s.isBuffer(t)||t instanceof c}var u=n(36994);var l=n(3533),d=l.getHighWaterMark;var p=n(97713).q,g=p.ERR_INVALID_ARG_TYPE,v=p.ERR_METHOD_NOT_IMPLEMENTED,E=p.ERR_MULTIPLE_CALLBACK,S=p.ERR_STREAM_CANNOT_PIPE,w=p.ERR_STREAM_DESTROYED,x=p.ERR_STREAM_NULL_VALUES,N=p.ERR_STREAM_WRITE_AFTER_END,P=p.ERR_UNKNOWN_ENCODING;var D=u.errorOrDestroy;n(44124)(Writable,a);function nop(){}function WritableState(t,r,o){i=i||n(13928);t=t||{};if(typeof o!=="boolean")o=r instanceof i;this.objectMode=!!t.objectMode;if(o)this.objectMode=this.objectMode||!!t.writableObjectMode;this.highWaterMark=d(this,t,"writableHighWaterMark",o);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var a=t.decodeStrings===false;this.decodeStrings=!a;this.defaultEncoding=t.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(t){onwrite(r,t)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=t.emitClose!==false;this.autoDestroy=!!t.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next}return r};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:o.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(t){}})();var M;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){M=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(t){if(M.call(this,t))return true;if(this!==Writable)return false;return t&&t._writableState instanceof WritableState}})}else{M=function realHasInstance(t){return t instanceof this}}function Writable(t){i=i||n(13928);var r=this instanceof i;if(!r&&!M.call(Writable,this))return new Writable(t);this._writableState=new WritableState(t,this,r);this.writable=true;if(t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev;if(typeof t.destroy==="function")this._destroy=t.destroy;if(typeof t.final==="function")this._final=t.final}a.call(this)}Writable.prototype.pipe=function(){D(this,new S)};function writeAfterEnd(t,r){var n=new N;D(t,n);process.nextTick(r,n)}function validChunk(t,r,n,i){var o;if(n===null){o=new x}else if(typeof n!=="string"&&!r.objectMode){o=new g("chunk",["string","Buffer"],n)}if(o){D(t,o);process.nextTick(i,o);return false}return true}Writable.prototype.write=function(t,r,n){var i=this._writableState;var o=false;var a=!i.objectMode&&_isUint8Array(t);if(a&&!s.isBuffer(t)){t=_uint8ArrayToBuffer(t)}if(typeof r==="function"){n=r;r=null}if(a)r="buffer";else if(!r)r=i.defaultEncoding;if(typeof n!=="function")n=nop;if(i.ending)writeAfterEnd(this,n);else if(a||validChunk(this,i,t,n)){i.pendingcb++;o=writeOrBuffer(this,i,a,t,r,n)}return o};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var t=this._writableState;if(t.corked){t.corked--;if(!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest)clearBuffer(this,t)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new P(t);this._writableState.defaultEncoding=t;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(t,r,n){if(!t.objectMode&&t.decodeStrings!==false&&typeof r==="string"){r=s.from(r,n)}return r}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(t,r,n,i,o,a){if(!n){var s=decodeChunk(r,i,o);if(i!==s){n=true;o="buffer";i=s}}var c=r.objectMode?1:i.length;r.length+=c;var u=r.length<r.highWaterMark;if(!u)r.needDrain=true;if(r.writing||r.corked){var l=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:o,isBuf:n,callback:a,next:null};if(l){l.next=r.lastBufferedRequest}else{r.bufferedRequest=r.lastBufferedRequest}r.bufferedRequestCount+=1}else{doWrite(t,r,false,c,i,o,a)}return u}function doWrite(t,r,n,i,o,a,s){r.writelen=i;r.writecb=s;r.writing=true;r.sync=true;if(r.destroyed)r.onwrite(new w("write"));else if(n)t._writev(o,r.onwrite);else t._write(o,a,r.onwrite);r.sync=false}function onwriteError(t,r,n,i,o){--r.pendingcb;if(n){process.nextTick(o,i);process.nextTick(finishMaybe,t,r);t._writableState.errorEmitted=true;D(t,i)}else{o(i);t._writableState.errorEmitted=true;D(t,i);finishMaybe(t,r)}}function onwriteStateUpdate(t){t.writing=false;t.writecb=null;t.length-=t.writelen;t.writelen=0}function onwrite(t,r){var n=t._writableState;var i=n.sync;var o=n.writecb;if(typeof o!=="function")throw new E;onwriteStateUpdate(n);if(r)onwriteError(t,n,i,r,o);else{var a=needFinish(n)||t.destroyed;if(!a&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest){clearBuffer(t,n)}if(i){process.nextTick(afterWrite,t,n,a,o)}else{afterWrite(t,n,a,o)}}}function afterWrite(t,r,n,i){if(!n)onwriteDrain(t,r);r.pendingcb--;i();finishMaybe(t,r)}function onwriteDrain(t,r){if(r.length===0&&r.needDrain){r.needDrain=false;t.emit("drain")}}function clearBuffer(t,r){r.bufferProcessing=true;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount;var o=new Array(i);var a=r.corkedRequestsFree;a.entry=n;var s=0;var c=true;while(n){o[s]=n;if(!n.isBuf)c=false;n=n.next;s+=1}o.allBuffers=c;doWrite(t,r,true,r.length,o,"",a.finish);r.pendingcb++;r.lastBufferedRequest=null;if(a.next){r.corkedRequestsFree=a.next;a.next=null}else{r.corkedRequestsFree=new CorkedRequest(r)}r.bufferedRequestCount=0}else{while(n){var u=n.chunk;var l=n.encoding;var d=n.callback;var p=r.objectMode?1:u.length;doWrite(t,r,false,p,u,l,d);n=n.next;r.bufferedRequestCount--;if(r.writing){break}}if(n===null)r.lastBufferedRequest=null}r.bufferedRequest=n;r.bufferProcessing=false}Writable.prototype._write=function(t,r,n){n(new v("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(t,r,n){var i=this._writableState;if(typeof t==="function"){n=t;t=null;r=null}else if(typeof r==="function"){n=r;r=null}if(t!==null&&t!==undefined)this.write(t,r);if(i.corked){i.corked=1;this.uncork()}if(!i.ending)endWritable(this,i,n);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function callFinal(t,r){t._final((function(n){r.pendingcb--;if(n){D(t,n)}r.prefinished=true;t.emit("prefinish");finishMaybe(t,r)}))}function prefinish(t,r){if(!r.prefinished&&!r.finalCalled){if(typeof t._final==="function"&&!r.destroyed){r.pendingcb++;r.finalCalled=true;process.nextTick(callFinal,t,r)}else{r.prefinished=true;t.emit("prefinish")}}}function finishMaybe(t,r){var n=needFinish(r);if(n){prefinish(t,r);if(r.pendingcb===0){r.finished=true;t.emit("finish");if(r.autoDestroy){var i=t._readableState;if(!i||i.autoDestroy&&i.endEmitted){t.destroy()}}}}return n}function endWritable(t,r,n){r.ending=true;finishMaybe(t,r);if(n){if(r.finished)process.nextTick(n);else t.once("finish",n)}r.ended=true;t.writable=false}function onCorkedFinish(t,r,n){var i=t.entry;t.entry=null;while(i){var o=i.callback;r.pendingcb--;o(n);i=i.next}r.corkedRequestsFree.next=t}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(t){if(!this._writableState){return}this._writableState.destroyed=t}});Writable.prototype.destroy=u.destroy;Writable.prototype._undestroy=u.undestroy;Writable.prototype._destroy=function(t,r){r(t)}},37558:(t,r,n)=>{"use strict";var i;function _defineProperty(t,r,n){if(r in t){Object.defineProperty(t,r,{value:n,enumerable:true,configurable:true,writable:true})}else{t[r]=n}return t}var o=n(12659);var a=Symbol("lastResolve");var s=Symbol("lastReject");var c=Symbol("error");var u=Symbol("ended");var l=Symbol("lastPromise");var d=Symbol("handlePromise");var p=Symbol("stream");function createIterResult(t,r){return{value:t,done:r}}function readAndResolve(t){var r=t[a];if(r!==null){var n=t[p].read();if(n!==null){t[l]=null;t[a]=null;t[s]=null;r(createIterResult(n,false))}}}function onReadable(t){process.nextTick(readAndResolve,t)}function wrapForNext(t,r){return function(n,i){t.then((function(){if(r[u]){n(createIterResult(undefined,true));return}r[d](n,i)}),i)}}var g=Object.getPrototypeOf((function(){}));var v=Object.setPrototypeOf((i={get stream(){return this[p]},next:function next(){var t=this;var r=this[c];if(r!==null){return Promise.reject(r)}if(this[u]){return Promise.resolve(createIterResult(undefined,true))}if(this[p].destroyed){return new Promise((function(r,n){process.nextTick((function(){if(t[c]){n(t[c])}else{r(createIterResult(undefined,true))}}))}))}var n=this[l];var i;if(n){i=new Promise(wrapForNext(n,this))}else{var o=this[p].read();if(o!==null){return Promise.resolve(createIterResult(o,false))}i=new Promise(this[d])}this[l]=i;return i}},_defineProperty(i,Symbol.asyncIterator,(function(){return this})),_defineProperty(i,"return",(function _return(){var t=this;return new Promise((function(r,n){t[p].destroy(null,(function(t){if(t){n(t);return}r(createIterResult(undefined,true))}))}))})),i),g);var E=function createReadableStreamAsyncIterator(t){var r;var n=Object.create(v,(r={},_defineProperty(r,p,{value:t,writable:true}),_defineProperty(r,a,{value:null,writable:true}),_defineProperty(r,s,{value:null,writable:true}),_defineProperty(r,c,{value:null,writable:true}),_defineProperty(r,u,{value:t._readableState.endEmitted,writable:true}),_defineProperty(r,d,{value:function value(t,r){var i=n[p].read();if(i){n[l]=null;n[a]=null;n[s]=null;t(createIterResult(i,false))}else{n[a]=t;n[s]=r}},writable:true}),r));n[l]=null;o(t,(function(t){if(t&&t.code!=="ERR_STREAM_PREMATURE_CLOSE"){var r=n[s];if(r!==null){n[l]=null;n[a]=null;n[s]=null;r(t)}n[c]=t;return}var i=n[a];if(i!==null){n[l]=null;n[a]=null;n[s]=null;i(createIterResult(undefined,true))}n[u]=true}));t.on("readable",onReadable.bind(null,n));return n};t.exports=E},70662:(t,r,n)=>{"use strict";function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);if(r)i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}));n.push.apply(n,i)}return n}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};if(r%2){ownKeys(Object(n),true).forEach((function(r){_defineProperty(t,r,n[r])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))}else{ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}}return t}function _defineProperty(t,r,n){if(r in t){Object.defineProperty(t,r,{value:n,enumerable:true,configurable:true,writable:true})}else{t[r]=n}return t}function _classCallCheck(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function _createClass(t,r,n){if(r)_defineProperties(t.prototype,r);if(n)_defineProperties(t,n);return t}var i=n(14300),o=i.Buffer;var a=n(73837),s=a.inspect;var c=s&&s.custom||"inspect";function copyBuffer(t,r,n){o.prototype.copy.call(t,r,n)}t.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(t){var r={data:t,next:null};if(this.length>0)this.tail.next=r;else this.head=r;this.tail=r;++this.length}},{key:"unshift",value:function unshift(t){var r={data:t,next:this.head};if(this.length===0)this.tail=r;this.head=r;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var t=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return t}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(t){if(this.length===0)return"";var r=this.head;var n=""+r.data;while(r=r.next){n+=t+r.data}return n}},{key:"concat",value:function concat(t){if(this.length===0)return o.alloc(0);var r=o.allocUnsafe(t>>>0);var n=this.head;var i=0;while(n){copyBuffer(n.data,r,i);i+=n.data.length;n=n.next}return r}},{key:"consume",value:function consume(t,r){var n;if(t<this.head.data.length){n=this.head.data.slice(0,t);this.head.data=this.head.data.slice(t)}else if(t===this.head.data.length){n=this.shift()}else{n=r?this._getString(t):this._getBuffer(t)}return n}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(t){var r=this.head;var n=1;var i=r.data;t-=i.length;while(r=r.next){var o=r.data;var a=t>o.length?o.length:t;if(a===o.length)i+=o;else i+=o.slice(0,t);t-=a;if(t===0){if(a===o.length){++n;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=o.slice(a)}break}++n}this.length-=n;return i}},{key:"_getBuffer",value:function _getBuffer(t){var r=o.allocUnsafe(t);var n=this.head;var i=1;n.data.copy(r);t-=n.data.length;while(n=n.next){var a=n.data;var s=t>a.length?a.length:t;a.copy(r,r.length-t,0,s);t-=s;if(t===0){if(s===a.length){++i;if(n.next)this.head=n.next;else this.head=this.tail=null}else{this.head=n;n.data=a.slice(s)}break}++i}this.length-=i;return r}},{key:c,value:function value(t,r){return s(this,_objectSpread({},r,{depth:0,customInspect:false}))}}]);return BufferList}()},36994:t=>{"use strict";function destroy(t,r){var n=this;var i=this._readableState&&this._readableState.destroyed;var o=this._writableState&&this._writableState.destroyed;if(i||o){if(r){r(t)}else if(t){if(!this._writableState){process.nextTick(emitErrorNT,this,t)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,t)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(t||null,(function(t){if(!r&&t){if(!n._writableState){process.nextTick(emitErrorAndCloseNT,n,t)}else if(!n._writableState.errorEmitted){n._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,n,t)}else{process.nextTick(emitCloseNT,n)}}else if(r){process.nextTick(emitCloseNT,n);r(t)}else{process.nextTick(emitCloseNT,n)}}));return this}function emitErrorAndCloseNT(t,r){emitErrorNT(t,r);emitCloseNT(t)}function emitCloseNT(t){if(t._writableState&&!t._writableState.emitClose)return;if(t._readableState&&!t._readableState.emitClose)return;t.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(t,r){t.emit("error",r)}function errorOrDestroy(t,r){var n=t._readableState;var i=t._writableState;if(n&&n.autoDestroy||i&&i.autoDestroy)t.destroy(r);else t.emit("error",r)}t.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},12659:(t,r,n)=>{"use strict";var i=n(97713).q.ERR_STREAM_PREMATURE_CLOSE;function once(t){var r=false;return function(){if(r)return;r=true;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++){i[o]=arguments[o]}t.apply(this,i)}}function noop(){}function isRequest(t){return t.setHeader&&typeof t.abort==="function"}function eos(t,r,n){if(typeof r==="function")return eos(t,null,r);if(!r)r={};n=once(n||noop);var o=r.readable||r.readable!==false&&t.readable;var a=r.writable||r.writable!==false&&t.writable;var s=function onlegacyfinish(){if(!t.writable)u()};var c=t._writableState&&t._writableState.finished;var u=function onfinish(){a=false;c=true;if(!o)n.call(t)};var l=t._readableState&&t._readableState.endEmitted;var d=function onend(){o=false;l=true;if(!a)n.call(t)};var p=function onerror(r){n.call(t,r)};var g=function onclose(){var r;if(o&&!l){if(!t._readableState||!t._readableState.ended)r=new i;return n.call(t,r)}if(a&&!c){if(!t._writableState||!t._writableState.ended)r=new i;return n.call(t,r)}};var v=function onrequest(){t.req.on("finish",u)};if(isRequest(t)){t.on("complete",u);t.on("abort",g);if(t.req)v();else t.on("request",v)}else if(a&&!t._writableState){t.on("end",s);t.on("close",s)}t.on("end",d);t.on("finish",u);if(r.error!==false)t.on("error",p);t.on("close",g);return function(){t.removeListener("complete",u);t.removeListener("abort",g);t.removeListener("request",v);if(t.req)t.req.removeListener("finish",u);t.removeListener("end",s);t.removeListener("close",s);t.removeListener("finish",u);t.removeListener("end",d);t.removeListener("error",p);t.removeListener("close",g)}}t.exports=eos},57039:(t,r,n)=>{"use strict";function asyncGeneratorStep(t,r,n,i,o,a,s){try{var c=t[a](s);var u=c.value}catch(t){n(t);return}if(c.done){r(u)}else{Promise.resolve(u).then(i,o)}}function _asyncToGenerator(t){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=t.apply(r,n);function _next(t){asyncGeneratorStep(a,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(a,i,o,_next,_throw,"throw",t)}_next(undefined)}))}}function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);if(r)i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}));n.push.apply(n,i)}return n}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};if(r%2){ownKeys(Object(n),true).forEach((function(r){_defineProperty(t,r,n[r])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))}else{ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}}return t}function _defineProperty(t,r,n){if(r in t){Object.defineProperty(t,r,{value:n,enumerable:true,configurable:true,writable:true})}else{t[r]=n}return t}var i=n(97713).q.ERR_INVALID_ARG_TYPE;function from(t,r,n){var o;if(r&&typeof r.next==="function"){o=r}else if(r&&r[Symbol.asyncIterator])o=r[Symbol.asyncIterator]();else if(r&&r[Symbol.iterator])o=r[Symbol.iterator]();else throw new i("iterable",["Iterable"],r);var a=new t(_objectSpread({objectMode:true},n));var s=false;a._read=function(){if(!s){s=true;next()}};function next(){return _next2.apply(this,arguments)}function _next2(){_next2=_asyncToGenerator((function*(){try{var t=yield o.next(),r=t.value,n=t.done;if(n){a.push(null)}else if(a.push(yield r)){next()}else{s=false}}catch(t){a.destroy(t)}}));return _next2.apply(this,arguments)}return a}t.exports=from},20740:(t,r,n)=>{"use strict";var i;function once(t){var r=false;return function(){if(r)return;r=true;t.apply(void 0,arguments)}}var o=n(97713).q,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function noop(t){if(t)throw t}function isRequest(t){return t.setHeader&&typeof t.abort==="function"}function destroyer(t,r,o,a){a=once(a);var c=false;t.on("close",(function(){c=true}));if(i===undefined)i=n(12659);i(t,{readable:r,writable:o},(function(t){if(t)return a(t);c=true;a()}));var u=false;return function(r){if(c)return;if(u)return;u=true;if(isRequest(t))return t.abort();if(typeof t.destroy==="function")return t.destroy();a(r||new s("pipe"))}}function call(t){t()}function pipe(t,r){return t.pipe(r)}function popCallback(t){if(!t.length)return noop;if(typeof t[t.length-1]!=="function")return noop;return t.pop()}function pipeline(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=popCallback(r);if(Array.isArray(r[0]))r=r[0];if(r.length<2){throw new a("streams")}var o;var s=r.map((function(t,n){var a=n<r.length-1;var c=n>0;return destroyer(t,a,c,(function(t){if(!o)o=t;if(t)s.forEach(call);if(a)return;s.forEach(call);i(o)}))}));return r.reduce(pipe)}t.exports=pipeline},3533:(t,r,n)=>{"use strict";var i=n(97713).q.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(t,r,n){return t.highWaterMark!=null?t.highWaterMark:r?t[n]:null}function getHighWaterMark(t,r,n,o){var a=highWaterMarkFrom(r,o,n);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var s=o?n:"highWaterMark";throw new i(s,a)}return Math.floor(a)}return t.objectMode?16:16*1024}t.exports={getHighWaterMark:getHighWaterMark}},36238:(t,r,n)=>{t.exports=n(12781)},85519:(t,r,n)=>{var i=n(12781);if(process.env.READABLE_STREAM==="disable"&&i){t.exports=i.Readable;Object.assign(t.exports,i);t.exports.Stream=i}else{r=t.exports=n(85209);r.Stream=i||r;r.Readable=r;r.Writable=n(58729);r.Duplex=n(13928);r.Transform=n(26753);r.PassThrough=n(4991);r.finished=n(12659);r.pipeline=n(20740)}},9239:(t,r,n)=>{"use strict";var i=n(14300).Buffer;var o=n(14300).SlowBuffer;t.exports=bufferEq;function bufferEq(t,r){if(!i.isBuffer(t)||!i.isBuffer(r)){return false}if(t.length!==r.length){return false}var n=0;for(var o=0;o<t.length;o++){n|=t[o]^r[o]}return n===0}bufferEq.install=function(){i.prototype.equal=o.prototype.equal=function equal(t){return bufferEq(this,t)}};var a=i.prototype.equal;var s=o.prototype.equal;bufferEq.restore=function(){i.prototype.equal=a;o.prototype.equal=s}},28803:(t,r,n)=>{"use strict";var i=n(74538);var o=n(62977);var a=o(i("String.prototype.indexOf"));t.exports=function callBoundIntrinsic(t,r){var n=i(t,!!r);if(typeof n==="function"&&a(t,".prototype.")>-1){return o(n)}return n}},62977:(t,r,n)=>{"use strict";var i=n(88334);var o=n(74538);var a=o("%Function.prototype.apply%");var s=o("%Function.prototype.call%");var c=o("%Reflect.apply%",true)||i.call(s,a);var u=o("%Object.getOwnPropertyDescriptor%",true);var l=o("%Object.defineProperty%",true);var d=o("%Math.max%");if(l){try{l({},"a",{value:1})}catch(t){l=null}}t.exports=function callBind(t){var r=c(i,s,arguments);if(u&&l){var n=u(r,"length");if(n.configurable){l(r,"length",{value:1+d(0,t.length-(arguments.length-1))})}}return r};var p=function applyBind(){return c(i,a,arguments)};if(l){l(t.exports,"apply",{value:p})}else{t.exports.apply=p}},85443:(t,r,n)=>{var i=n(73837);var o=n(12781).Stream;var a=n(18611);t.exports=CombinedStream;function CombinedStream(){this.writable=false;this.readable=true;this.dataSize=0;this.maxDataSize=2*1024*1024;this.pauseStreams=true;this._released=false;this._streams=[];this._currentStream=null;this._insideLoop=false;this._pendingNext=false}i.inherits(CombinedStream,o);CombinedStream.create=function(t){var r=new this;t=t||{};for(var n in t){r[n]=t[n]}return r};CombinedStream.isStreamLike=function(t){return typeof t!=="function"&&typeof t!=="string"&&typeof t!=="boolean"&&typeof t!=="number"&&!Buffer.isBuffer(t)};CombinedStream.prototype.append=function(t){var r=CombinedStream.isStreamLike(t);if(r){if(!(t instanceof a)){var n=a.create(t,{maxDataSize:Infinity,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this));t=n}this._handleErrors(t);if(this.pauseStreams){t.pause()}}this._streams.push(t);return this};CombinedStream.prototype.pipe=function(t,r){o.prototype.pipe.call(this,t,r);this.resume();return t};CombinedStream.prototype._getNext=function(){this._currentStream=null;if(this._insideLoop){this._pendingNext=true;return}this._insideLoop=true;try{do{this._pendingNext=false;this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=false}};CombinedStream.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t=="undefined"){this.end();return}if(typeof t!=="function"){this._pipeNext(t);return}var r=t;r(function(t){var r=CombinedStream.isStreamLike(t);if(r){t.on("data",this._checkDataSize.bind(this));this._handleErrors(t)}this._pipeNext(t)}.bind(this))};CombinedStream.prototype._pipeNext=function(t){this._currentStream=t;var r=CombinedStream.isStreamLike(t);if(r){t.on("end",this._getNext.bind(this));t.pipe(this,{end:false});return}var n=t;this.write(n);this._getNext()};CombinedStream.prototype._handleErrors=function(t){var r=this;t.on("error",(function(t){r._emitError(t)}))};CombinedStream.prototype.write=function(t){this.emit("data",t)};CombinedStream.prototype.pause=function(){if(!this.pauseStreams){return}if(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function")this._currentStream.pause();this.emit("pause")};CombinedStream.prototype.resume=function(){if(!this._released){this._released=true;this.writable=true;this._getNext()}if(this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function")this._currentStream.resume();this.emit("resume")};CombinedStream.prototype.end=function(){this._reset();this.emit("end")};CombinedStream.prototype.destroy=function(){this._reset();this.emit("close")};CombinedStream.prototype._reset=function(){this.writable=false;this._streams=[];this._currentStream=null};CombinedStream.prototype._checkDataSize=function(){this._updateDataSize();if(this.dataSize<=this.maxDataSize){return}var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))};CombinedStream.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach((function(r){if(!r.dataSize){return}t.dataSize+=r.dataSize}));if(this._currentStream&&this._currentStream.dataSize){this.dataSize+=this._currentStream.dataSize}};CombinedStream.prototype._emitError=function(t){this._reset();this.emit("error",t)}},28222:(t,r,n)=>{r.formatArgs=formatArgs;r.save=save;r.load=load;r.useColors=useColors;r.storage=localstorage();r.destroy=(()=>{let t=false;return()=>{if(!t){t=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(r){r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff);if(!this.useColors){return}const n="color: "+this.color;r.splice(1,0,n,"color: inherit");let i=0;let o=0;r[0].replace(/%[a-zA-Z%]/g,(t=>{if(t==="%%"){return}i++;if(t==="%c"){o=i}}));r.splice(o,0,n)}r.log=console.debug||console.log||(()=>{});function save(t){try{if(t){r.storage.setItem("debug",t)}else{r.storage.removeItem("debug")}}catch(t){}}function load(){let t;try{t=r.storage.getItem("debug")}catch(t){}if(!t&&typeof process!=="undefined"&&"env"in process){t=process.env.DEBUG}return t}function localstorage(){try{return localStorage}catch(t){}}t.exports=n(46243)(r);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},46243:(t,r,n)=>{function setup(t){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=n(80900);createDebug.destroy=destroy;Object.keys(t).forEach((r=>{createDebug[r]=t[r]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(t){let r=0;for(let n=0;n<t.length;n++){r=(r<<5)-r+t.charCodeAt(n);r|=0}return createDebug.colors[Math.abs(r)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(t){let r;let n=null;let i;let o;function debug(...t){if(!debug.enabled){return}const n=debug;const i=Number(new Date);const o=i-(r||i);n.diff=o;n.prev=r;n.curr=i;r=i;t[0]=createDebug.coerce(t[0]);if(typeof t[0]!=="string"){t.unshift("%O")}let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if(r==="%%"){return"%"}a++;const o=createDebug.formatters[i];if(typeof o==="function"){const i=t[a];r=o.call(n,i);t.splice(a,1);a--}return r}));createDebug.formatArgs.call(n,t);const s=n.log||createDebug.log;s.apply(n,t)}debug.namespace=t;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(t);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(n!==null){return n}if(i!==createDebug.namespaces){i=createDebug.namespaces;o=createDebug.enabled(t)}return o},set:t=>{n=t}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(t,r){const n=createDebug(this.namespace+(typeof r==="undefined"?":":r)+t);n.log=this.log;return n}function enable(t){createDebug.save(t);createDebug.namespaces=t;createDebug.names=[];createDebug.skips=[];let r;const n=(typeof t==="string"?t:"").split(/[\s,]+/);const i=n.length;for(r=0;r<i;r++){if(!n[r]){continue}t=n[r].replace(/\*/g,".*?");if(t[0]==="-"){createDebug.skips.push(new RegExp("^"+t.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+t+"$"))}}}function disable(){const t=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((t=>"-"+t))].join(",");createDebug.enable("");return t}function enabled(t){if(t[t.length-1]==="*"){return true}let r;let n;for(r=0,n=createDebug.skips.length;r<n;r++){if(createDebug.skips[r].test(t)){return false}}for(r=0,n=createDebug.names.length;r<n;r++){if(createDebug.names[r].test(t)){return true}}return false}function toNamespace(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(t){if(t instanceof Error){return t.stack||t.message}return t}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}t.exports=setup},38237:(t,r,n)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){t.exports=n(28222)}else{t.exports=n(35332)}},35332:(t,r,n)=>{const i=n(76224);const o=n(73837);r.init=init;r.log=log;r.formatArgs=formatArgs;r.save=save;r.load=load;r.useColors=useColors;r.destroy=o.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");r.colors=[6,2,3,4,5,1];try{const t=n(59318);if(t&&(t.stderr||t).level>=2){r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(t){}r.inspectOpts=Object.keys(process.env).filter((t=>/^debug_/i.test(t))).reduce(((t,r)=>{const n=r.substring(6).toLowerCase().replace(/_([a-z])/g,((t,r)=>r.toUpperCase()));let i=process.env[r];if(/^(yes|on|true|enabled)$/i.test(i)){i=true}else if(/^(no|off|false|disabled)$/i.test(i)){i=false}else if(i==="null"){i=null}else{i=Number(i)}t[n]=i;return t}),{});function useColors(){return"colors"in r.inspectOpts?Boolean(r.inspectOpts.colors):i.isatty(process.stderr.fd)}function formatArgs(r){const{namespace:n,useColors:i}=this;if(i){const i=this.color;const o="[3"+(i<8?i:"8;5;"+i);const a=`  ${o};1m${n} [0m`;r[0]=a+r[0].split("\n").join("\n"+a);r.push(o+"m+"+t.exports.humanize(this.diff)+"[0m")}else{r[0]=getDate()+n+" "+r[0]}}function getDate(){if(r.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...t){return process.stderr.write(o.format(...t)+"\n")}function save(t){if(t){process.env.DEBUG=t}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(t){t.inspectOpts={};const n=Object.keys(r.inspectOpts);for(let i=0;i<n.length;i++){t.inspectOpts[n[i]]=r.inspectOpts[n[i]]}}t.exports=n(46243)(r);const{formatters:a}=t.exports;a.o=function(t){this.inspectOpts.colors=this.useColors;return o.inspect(t,this.inspectOpts).split("\n").map((t=>t.trim())).join(" ")};a.O=function(t){this.inspectOpts.colors=this.useColors;return o.inspect(t,this.inspectOpts)}},961:t=>{"use strict";t.exports=(t,r,n)=>{const define=n=>Object.defineProperty(t,r,{value:n,enumerable:true,writable:true});Object.defineProperty(t,r,{configurable:true,enumerable:true,get(){const t=n();define(t);return t},set(t){define(t)}});return t}},59234:(t,r,n)=>{"use strict";var i=n(70137);var o=typeof Symbol==="function"&&typeof Symbol("foo")==="symbol";var a=Object.prototype.toString;var s=Array.prototype.concat;var c=Object.defineProperty;var isFunction=function(t){return typeof t==="function"&&a.call(t)==="[object Function]"};var u=n(90176)();var l=c&&u;var defineProperty=function(t,r,n,i){if(r in t&&(!isFunction(i)||!i())){return}if(l){c(t,r,{configurable:true,enumerable:false,value:n,writable:true})}else{t[r]=n}};var defineProperties=function(t,r){var n=arguments.length>2?arguments[2]:{};var a=i(r);if(o){a=s.call(a,Object.getOwnPropertySymbols(r))}for(var c=0;c<a.length;c+=1){defineProperty(t,a[c],r[a[c]],n[a[c]])}};defineProperties.supportsDescriptors=!!l;t.exports=defineProperties},18611:(t,r,n)=>{var i=n(12781).Stream;var o=n(73837);t.exports=DelayedStream;function DelayedStream(){this.source=null;this.dataSize=0;this.maxDataSize=1024*1024;this.pauseStream=true;this._maxDataSizeExceeded=false;this._released=false;this._bufferedEvents=[]}o.inherits(DelayedStream,i);DelayedStream.create=function(t,r){var n=new this;r=r||{};for(var i in r){n[i]=r[i]}n.source=t;var o=t.emit;t.emit=function(){n._handleEmit(arguments);return o.apply(t,arguments)};t.on("error",(function(){}));if(n.pauseStream){t.pause()}return n};Object.defineProperty(DelayedStream.prototype,"readable",{configurable:true,enumerable:true,get:function(){return this.source.readable}});DelayedStream.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};DelayedStream.prototype.resume=function(){if(!this._released){this.release()}this.source.resume()};DelayedStream.prototype.pause=function(){this.source.pause()};DelayedStream.prototype.release=function(){this._released=true;this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this));this._bufferedEvents=[]};DelayedStream.prototype.pipe=function(){var t=i.prototype.pipe.apply(this,arguments);this.resume();return t};DelayedStream.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}if(t[0]==="data"){this.dataSize+=t[1].length;this._checkIfMaxDataSizeExceeded()}this._bufferedEvents.push(t)};DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(this._maxDataSizeExceeded){return}if(this.dataSize<=this.maxDataSize){return}this._maxDataSizeExceeded=true;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}},11728:(t,r,n)=>{"use strict";var i=n(21867).Buffer;var o=n(30528);var a=128,s=0,c=32,u=16,l=2,d=u|c|s<<6,p=l|s<<6;function base64Url(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function signatureAsBuffer(t){if(i.isBuffer(t)){return t}else if("string"===typeof t){return i.from(t,"base64")}throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function derToJose(t,r){t=signatureAsBuffer(t);var n=o(r);var s=n+1;var c=t.length;var u=0;if(t[u++]!==d){throw new Error('Could not find expected "seq"')}var l=t[u++];if(l===(a|1)){l=t[u++]}if(c-u<l){throw new Error('"seq" specified length of "'+l+'", only "'+(c-u)+'" remaining')}if(t[u++]!==p){throw new Error('Could not find expected "int" for "r"')}var g=t[u++];if(c-u-2<g){throw new Error('"r" specified length of "'+g+'", only "'+(c-u-2)+'" available')}if(s<g){throw new Error('"r" specified length of "'+g+'", max of "'+s+'" is acceptable')}var v=u;u+=g;if(t[u++]!==p){throw new Error('Could not find expected "int" for "s"')}var E=t[u++];if(c-u!==E){throw new Error('"s" specified length of "'+E+'", expected "'+(c-u)+'"')}if(s<E){throw new Error('"s" specified length of "'+E+'", max of "'+s+'" is acceptable')}var S=u;u+=E;if(u!==c){throw new Error('Expected to consume entire buffer, but "'+(c-u)+'" bytes remain')}var w=n-g,x=n-E;var N=i.allocUnsafe(w+g+x+E);for(u=0;u<w;++u){N[u]=0}t.copy(N,u,v+Math.max(-w,0),v+g);u=n;for(var P=u;u<P+x;++u){N[u]=0}t.copy(N,u,S+Math.max(-x,0),S+E);N=N.toString("base64");N=base64Url(N);return N}function countPadding(t,r,n){var i=0;while(r+i<n&&t[r+i]===0){++i}var o=t[r+i]>=a;if(o){--i}return i}function joseToDer(t,r){t=signatureAsBuffer(t);var n=o(r);var s=t.length;if(s!==n*2){throw new TypeError('"'+r+'" signatures must be "'+n*2+'" bytes, saw "'+s+'"')}var c=countPadding(t,0,n);var u=countPadding(t,n,t.length);var l=n-c;var g=n-u;var v=1+1+l+1+1+g;var E=v<a;var S=i.allocUnsafe((E?2:3)+v);var w=0;S[w++]=d;if(E){S[w++]=v}else{S[w++]=a|1;S[w++]=v&255}S[w++]=p;S[w++]=l;if(c<0){S[w++]=0;w+=t.copy(S,w,0,n)}else{w+=t.copy(S,w,c,n)}S[w++]=p;S[w++]=g;if(u<0){S[w++]=0;t.copy(S,w,n)}else{t.copy(S,w,n+u)}return S}t.exports={derToJose:derToJose,joseToDer:joseToDer}},30528:t=>{"use strict";function getParamSize(t){var r=(t/8|0)+(t%8===0?0:1);return r}var r={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};function getParamBytesForAlg(t){var n=r[t];if(n){return n}throw new Error('Unknown algorithm "'+t+'"')}t.exports=getParamBytesForAlg},29271:(t,r,n)=>{"use strict";var i=n(1605);var o=n(10013);var a=n(49014);var s=n(97039);var c=n(47224);var u=n(89102);var l=n(9206);var d=n(4640);var p=n(74538);var g=n(37111);var v=n(90176)();var E=p("%Error%");function AggregateError(t,r){var n=new E(r);l(n,S);delete n.constructor;var a=u(t,g({AdvanceStringIndex:i,GetMethod:s,IsArray:c,Type:d},t));o(n,"errors",a);return n}if(v){Object.defineProperty(AggregateError,"prototype",{writable:false})}var S=AggregateError.prototype;if(!a(S,"constructor",AggregateError)||!a(S,"message","")||!a(S,"name","AggregateError")){throw new E("unable to install AggregateError.prototype properties; please report this!")}l(AggregateError.prototype,Error.prototype);t.exports=AggregateError},55103:(t,r,n)=>{"use strict";var i=n(88334);var o=n(59234);var a=n(9019).functionsHaveConfigurableNames();var s=n(29271);var c=n(36730);var u=n(22284);var l=c();var d=i.call(l);if(Object.defineProperty){if(a){Object.defineProperty(d,"name",{value:l.name})}Object.defineProperty(d,"prototype",{value:l.prototype})}o(d,{getPolyfill:c,implementation:s,shim:u});t.exports=d},36730:(t,r,n)=>{"use strict";var i=n(29271);t.exports=function getPolyfill(){return typeof AggregateError==="function"?AggregateError:i}},22284:(t,r,n)=>{"use strict";var i=n(59234);var o=n(94475)();var a=n(36730);t.exports=function shimAggregateError(){var t=a();i(o,{AggregateError:t},{AggregateError:function testAggregateError(){return o.AggregateError!==t}});return t}},31133:(t,r,n)=>{var i;t.exports=function(){if(!i){try{i=n(38237)("follow-redirects")}catch(t){}if(typeof i!=="function"){i=function(){}}}i.apply(null,arguments)}},67707:(t,r,n)=>{var i=n(57310);var o=i.URL;var a=n(13685);var s=n(95687);var c=n(12781).Writable;var u=n(39491);var l=n(31133);var d=["abort","aborted","connect","error","socket","timeout"];var p=Object.create(null);d.forEach((function(t){p[t]=function(r,n,i){this._redirectable.emit(t,r,n,i)}}));var g=createErrorType("ERR_FR_REDIRECTION_FAILURE","Redirected request failed");var v=createErrorType("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded");var E=createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit");var S=createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");function RedirectableRequest(t,r){c.call(this);this._sanitizeOptions(t);this._options=t;this._ended=false;this._ending=false;this._redirectCount=0;this._redirects=[];this._requestBodyLength=0;this._requestBodyBuffers=[];if(r){this.on("response",r)}var n=this;this._onNativeResponse=function(t){n._processResponse(t)};this._performRequest()}RedirectableRequest.prototype=Object.create(c.prototype);RedirectableRequest.prototype.abort=function(){abortRequest(this._currentRequest);this.emit("abort")};RedirectableRequest.prototype.write=function(t,r,n){if(this._ending){throw new S}if(!(typeof t==="string"||typeof t==="object"&&"length"in t)){throw new TypeError("data should be a string, Buffer or Uint8Array")}if(typeof r==="function"){n=r;r=null}if(t.length===0){if(n){n()}return}if(this._requestBodyLength+t.length<=this._options.maxBodyLength){this._requestBodyLength+=t.length;this._requestBodyBuffers.push({data:t,encoding:r});this._currentRequest.write(t,r,n)}else{this.emit("error",new E);this.abort()}};RedirectableRequest.prototype.end=function(t,r,n){if(typeof t==="function"){n=t;t=r=null}else if(typeof r==="function"){n=r;r=null}if(!t){this._ended=this._ending=true;this._currentRequest.end(null,null,n)}else{var i=this;var o=this._currentRequest;this.write(t,r,(function(){i._ended=true;o.end(null,null,n)}));this._ending=true}};RedirectableRequest.prototype.setHeader=function(t,r){this._options.headers[t]=r;this._currentRequest.setHeader(t,r)};RedirectableRequest.prototype.removeHeader=function(t){delete this._options.headers[t];this._currentRequest.removeHeader(t)};RedirectableRequest.prototype.setTimeout=function(t,r){var n=this;function destroyOnTimeout(r){r.setTimeout(t);r.removeListener("timeout",r.destroy);r.addListener("timeout",r.destroy)}function startTimer(r){if(n._timeout){clearTimeout(n._timeout)}n._timeout=setTimeout((function(){n.emit("timeout");clearTimer()}),t);destroyOnTimeout(r)}function clearTimer(){if(n._timeout){clearTimeout(n._timeout);n._timeout=null}n.removeListener("abort",clearTimer);n.removeListener("error",clearTimer);n.removeListener("response",clearTimer);if(r){n.removeListener("timeout",r)}if(!n.socket){n._currentRequest.removeListener("socket",startTimer)}}if(r){this.on("timeout",r)}if(this.socket){startTimer(this.socket)}else{this._currentRequest.once("socket",startTimer)}this.on("socket",destroyOnTimeout);this.on("abort",clearTimer);this.on("error",clearTimer);this.on("response",clearTimer);return this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(t){RedirectableRequest.prototype[t]=function(r,n){return this._currentRequest[t](r,n)}}));["aborted","connection","socket"].forEach((function(t){Object.defineProperty(RedirectableRequest.prototype,t,{get:function(){return this._currentRequest[t]}})}));RedirectableRequest.prototype._sanitizeOptions=function(t){if(!t.headers){t.headers={}}if(t.host){if(!t.hostname){t.hostname=t.host}delete t.host}if(!t.pathname&&t.path){var r=t.path.indexOf("?");if(r<0){t.pathname=t.path}else{t.pathname=t.path.substring(0,r);t.search=t.path.substring(r)}}};RedirectableRequest.prototype._performRequest=function(){var t=this._options.protocol;var r=this._options.nativeProtocols[t];if(!r){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var o=this._currentRequest=r.request(this._options,this._onNativeResponse);this._currentUrl=i.format(this._options);o._redirectable=this;for(var a=0;a<d.length;a++){o.on(d[a],p[d[a]])}if(this._isRedirect){var s=0;var c=this;var u=this._requestBodyBuffers;(function writeNext(t){if(o===c._currentRequest){if(t){c.emit("error",t)}else if(s<u.length){var r=u[s++];if(!o.finished){o.write(r.data,r.encoding,writeNext)}}else if(c._ended){o.end()}}})()}};RedirectableRequest.prototype._processResponse=function(t){var r=t.statusCode;if(this._options.trackRedirects){this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:r})}var n=t.headers.location;if(!n||this._options.followRedirects===false||r<300||r>=400){t.responseUrl=this._currentUrl;t.redirects=this._redirects;this.emit("response",t);this._requestBodyBuffers=[];return}abortRequest(this._currentRequest);t.destroy();if(++this._redirectCount>this._options.maxRedirects){this.emit("error",new v);return}var o;var a=this._options.beforeRedirect;if(a){o=Object.assign({Host:t.req.getHeader("host")},this._options.headers)}var s=this._options.method;if((r===301||r===302)&&this._options.method==="POST"||r===303&&!/^(?:GET|HEAD)$/.test(this._options.method)){this._options.method="GET";this._requestBodyBuffers=[];removeMatchingHeaders(/^content-/i,this._options.headers)}var c=removeMatchingHeaders(/^host$/i,this._options.headers);var u=i.parse(this._currentUrl);var d=c||u.host;var p=/^\w+:/.test(n)?this._currentUrl:i.format(Object.assign(u,{host:d}));var E;try{E=i.resolve(p,n)}catch(t){this.emit("error",new g(t));return}l("redirecting to",E);this._isRedirect=true;var S=i.parse(E);Object.assign(this._options,S);if(S.protocol!==u.protocol&&S.protocol!=="https:"||S.host!==d&&!isSubdomain(S.host,d)){removeMatchingHeaders(/^(?:authorization|cookie)$/i,this._options.headers)}if(typeof a==="function"){var w={headers:t.headers,statusCode:r};var x={url:p,method:s,headers:o};try{a(this._options,w,x)}catch(t){this.emit("error",t);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(t){this.emit("error",new g(t))}};function wrap(t){var r={maxRedirects:21,maxBodyLength:10*1024*1024};var n={};Object.keys(t).forEach((function(a){var s=a+":";var c=n[s]=t[a];var d=r[a]=Object.create(c);function request(t,a,c){if(typeof t==="string"){var d=t;try{t=urlToOptions(new o(d))}catch(r){t=i.parse(d)}}else if(o&&t instanceof o){t=urlToOptions(t)}else{c=a;a=t;t={protocol:s}}if(typeof a==="function"){c=a;a=null}a=Object.assign({maxRedirects:r.maxRedirects,maxBodyLength:r.maxBodyLength},t,a);a.nativeProtocols=n;u.equal(a.protocol,s,"protocol mismatch");l("options",a);return new RedirectableRequest(a,c)}function get(t,r,n){var i=d.request(t,r,n);i.end();return i}Object.defineProperties(d,{request:{value:request,configurable:true,enumerable:true,writable:true},get:{value:get,configurable:true,enumerable:true,writable:true}})}));return r}function noop(){}function urlToOptions(t){var r={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};if(t.port!==""){r.port=Number(t.port)}return r}function removeMatchingHeaders(t,r){var n;for(var i in r){if(t.test(i)){n=r[i];delete r[i]}}return n===null||typeof n==="undefined"?undefined:String(n).trim()}function createErrorType(t,r){function CustomError(t){Error.captureStackTrace(this,this.constructor);if(!t){this.message=r}else{this.message=r+": "+t.message;this.cause=t}}CustomError.prototype=new Error;CustomError.prototype.constructor=CustomError;CustomError.prototype.name="Error ["+t+"]";CustomError.prototype.code=t;return CustomError}function abortRequest(t){for(var r=0;r<d.length;r++){t.removeListener(d[r],p[d[r]])}t.on("error",noop);t.abort()}function isSubdomain(t,r){const n=t.length-r.length-1;return n>0&&t[n]==="."&&t.endsWith(r)}t.exports=wrap({http:a,https:s});t.exports.wrap=wrap},19320:t=>{"use strict";var r="Function.prototype.bind called on incompatible ";var n=Array.prototype.slice;var i=Object.prototype.toString;var o="[object Function]";t.exports=function bind(t){var a=this;if(typeof a!=="function"||i.call(a)!==o){throw new TypeError(r+a)}var s=n.call(arguments,1);var c;var binder=function(){if(this instanceof c){var r=a.apply(this,s.concat(n.call(arguments)));if(Object(r)===r){return r}return this}else{return a.apply(t,s.concat(n.call(arguments)))}};var u=Math.max(0,a.length-s.length);var l=[];for(var d=0;d<u;d++){l.push("$"+d)}c=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(a.prototype){var p=function Empty(){};p.prototype=a.prototype;c.prototype=new p;p.prototype=null}return c}},88334:(t,r,n)=>{"use strict";var i=n(19320);t.exports=Function.prototype.bind||i},9019:t=>{"use strict";var r=function functionsHaveNames(){return typeof function f(){}.name==="string"};var n=Object.getOwnPropertyDescriptor;if(n){try{n([],"length")}catch(t){n=null}}r.functionsHaveConfigurableNames=function functionsHaveConfigurableNames(){if(!r()||!n){return false}var t=n((function(){}),"name");return!!t&&!!t.configurable};var i=Function.prototype.bind;r.boundFunctionsHaveNames=function boundFunctionsHaveNames(){return r()&&typeof i==="function"&&function f(){}.bind().name!==""};t.exports=r},74538:(t,r,n)=>{"use strict";var i;var o=SyntaxError;var a=Function;var s=TypeError;var getEvalledConstructor=function(t){try{return a('"use strict"; return ('+t+").constructor;")()}catch(t){}};var c=Object.getOwnPropertyDescriptor;if(c){try{c({},"")}catch(t){c=null}}var throwTypeError=function(){throw new s};var u=c?function(){try{arguments.callee;return throwTypeError}catch(t){try{return c(arguments,"callee").get}catch(t){return throwTypeError}}}():throwTypeError;var l=n(40587)();var d=Object.getPrototypeOf||function(t){return t.__proto__};var p={};var g=typeof Uint8Array==="undefined"?i:d(Uint8Array);var v={"%AggregateError%":typeof AggregateError==="undefined"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?i:ArrayBuffer,"%ArrayIteratorPrototype%":l?d([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics==="undefined"?i:Atomics,"%BigInt%":typeof BigInt==="undefined"?i:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?i:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?i:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array==="undefined"?i:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?i:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?d(d([][Symbol.iterator]())):i,"%JSON%":typeof JSON==="object"?JSON:i,"%Map%":typeof Map==="undefined"?i:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!l?i:d((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?i:Promise,"%Proxy%":typeof Proxy==="undefined"?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?i:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!l?i:d((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?d(""[Symbol.iterator]()):i,"%Symbol%":l?Symbol:i,"%SyntaxError%":o,"%ThrowTypeError%":u,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array==="undefined"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?i:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?i:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?i:WeakSet};var E=function doEval(t){var r;if(t==="%AsyncFunction%"){r=getEvalledConstructor("async function () {}")}else if(t==="%GeneratorFunction%"){r=getEvalledConstructor("function* () {}")}else if(t==="%AsyncGeneratorFunction%"){r=getEvalledConstructor("async function* () {}")}else if(t==="%AsyncGenerator%"){var n=doEval("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(t==="%AsyncIteratorPrototype%"){var i=doEval("%AsyncGenerator%");if(i){r=d(i.prototype)}}v[t]=r;return r};var S={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var w=n(88334);var x=n(76339);var N=w.call(Function.call,Array.prototype.concat);var P=w.call(Function.apply,Array.prototype.splice);var D=w.call(Function.call,String.prototype.replace);var M=w.call(Function.call,String.prototype.slice);var L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var U=/\\(\\)?/g;var q=function stringToPath(t){var r=M(t,0,1);var n=M(t,-1);if(r==="%"&&n!=="%"){throw new o("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new o("invalid intrinsic syntax, expected opening `%`")}var i=[];D(t,L,(function(t,r,n,o){i[i.length]=n?D(o,U,"$1"):r||t}));return i};var B=function getBaseIntrinsic(t,r){var n=t;var i;if(x(S,n)){i=S[n];n="%"+i[0]+"%"}if(x(v,n)){var a=v[n];if(a===p){a=E(n)}if(typeof a==="undefined"&&!r){throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!")}return{alias:i,name:n,value:a}}throw new o("intrinsic "+t+" does not exist!")};t.exports=function GetIntrinsic(t,r){if(typeof t!=="string"||t.length===0){throw new s("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new s('"allowMissing" argument must be a boolean')}var n=q(t);var a=n.length>0?n[0]:"";var u=B("%"+a+"%",r);var l=u.name;var d=u.value;var p=false;var g=u.alias;if(g){a=g[0];P(n,N([0,1],g))}for(var E=1,S=true;E<n.length;E+=1){var w=n[E];var D=M(w,0,1);var L=M(w,-1);if((D==='"'||D==="'"||D==="`"||(L==='"'||L==="'"||L==="`"))&&D!==L){throw new o("property names with quotes must have matching quotes")}if(w==="constructor"||!S){p=true}a+="."+w;l="%"+a+"%";if(x(v,l)){d=v[l]}else if(d!=null){if(!(w in d)){if(!r){throw new s("base intrinsic for "+t+" exists, but the property is not available.")}return void i}if(c&&E+1>=n.length){var U=c(d,w);S=!!U;if(S&&"get"in U&&!("originalValue"in U.get)){d=U.get}else{d=d[w]}}else{S=x(d,w);d=d[w]}if(S&&!p){v[l]=d}}}return d}},51046:(t,r,n)=>{var i=n(9417);t.exports=expandTop;var o="\0SLASH"+Math.random()+"\0";var a="\0OPEN"+Math.random()+"\0";var s="\0CLOSE"+Math.random()+"\0";var c="\0COMMA"+Math.random()+"\0";var u="\0PERIOD"+Math.random()+"\0";function numeric(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function escapeBraces(t){return t.split("\\\\").join(o).split("\\{").join(a).split("\\}").join(s).split("\\,").join(c).split("\\.").join(u)}function unescapeBraces(t){return t.split(o).join("\\").split(a).join("{").split(s).join("}").split(c).join(",").split(u).join(".")}function parseCommaParts(t){if(!t)return[""];var r=[];var n=i("{","}",t);if(!n)return t.split(",");var o=n.pre;var a=n.body;var s=n.post;var c=o.split(",");c[c.length-1]+="{"+a+"}";var u=parseCommaParts(s);if(s.length){c[c.length-1]+=u.shift();c.push.apply(c,u)}r.push.apply(r,c);return r}function expandTop(t){if(!t)return[];if(t.substr(0,2)==="{}"){t="\\{\\}"+t.substr(2)}return expand(escapeBraces(t),true).map(unescapeBraces)}function embrace(t){return"{"+t+"}"}function isPadded(t){return/^-?0\d/.test(t)}function lte(t,r){return t<=r}function gte(t,r){return t>=r}function expand(t,r){var n=[];var o=i("{","}",t);if(!o)return[t];var a=o.pre;var c=o.post.length?expand(o.post,false):[""];if(/\$$/.test(o.pre)){for(var u=0;u<c.length;u++){var l=a+"{"+o.body+"}"+c[u];n.push(l)}}else{var d=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var g=d||p;var v=o.body.indexOf(",")>=0;if(!g&&!v){if(o.post.match(/,.*\}/)){t=o.pre+"{"+o.body+s+o.post;return expand(t)}return[t]}var E;if(g){E=o.body.split(/\.\./)}else{E=parseCommaParts(o.body);if(E.length===1){E=expand(E[0],false).map(embrace);if(E.length===1){return c.map((function(t){return o.pre+E[0]+t}))}}}var S;if(g){var w=numeric(E[0]);var x=numeric(E[1]);var N=Math.max(E[0].length,E[1].length);var P=E.length==3?Math.abs(numeric(E[2])):1;var D=lte;var M=x<w;if(M){P*=-1;D=gte}var L=E.some(isPadded);S=[];for(var U=w;D(U,x);U+=P){var q;if(p){q=String.fromCharCode(U);if(q==="\\")q=""}else{q=String(U);if(L){var B=N-q.length;if(B>0){var F=new Array(B+1).join("0");if(U<0)q="-"+F+q.slice(1);else q=F+q}}}S.push(q)}}else{S=[];for(var j=0;j<E.length;j++){S.push.apply(S,expand(E[j],false))}}for(var j=0;j<S.length;j++){for(var u=0;u<c.length;u++){var l=a+S[j]+c[u];if(!r||g||l)n.push(l)}}}return n}},44265:t=>{"use strict";t.exports=global},94475:(t,r,n)=>{"use strict";var i=n(59234);var o=n(44265);var a=n(27837);var s=n(94676);var c=a();var getGlobal=function(){return c};i(getGlobal,{getPolyfill:a,implementation:o,shim:s});t.exports=getGlobal},27837:(t,r,n)=>{"use strict";var i=n(44265);t.exports=function getPolyfill(){if(typeof global!=="object"||!global||global.Math!==Math||global.Array!==Array){return i}return global}},94676:(t,r,n)=>{"use strict";var i=n(59234);var o=n(27837);t.exports=function shimGlobal(){var t=o();if(i.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");if(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t)){Object.defineProperty(t,"globalThis",{configurable:true,enumerable:false,value:t,writable:true})}}else if(typeof globalThis!=="object"||globalThis!==t){t.globalThis=t}return t}},31621:t=>{"use strict";t.exports=(t,r)=>{r=r||process.argv;const n=t.startsWith("-")?"":t.length===1?"-":"--";const i=r.indexOf(n+t);const o=r.indexOf("--");return i!==-1&&(o===-1?true:i<o)}},90176:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Object.defineProperty%",true);var a=function hasPropertyDescriptors(){if(o){try{o({},"a",{value:1});return true}catch(t){return false}}return false};a.hasArrayLengthDefineBug=function hasArrayLengthDefineBug(){if(!a()){return null}try{return o([],"length",{value:1}).length!==1}catch(t){return true}};t.exports=a},40587:(t,r,n)=>{"use strict";var i=typeof Symbol!=="undefined"&&Symbol;var o=n(57747);t.exports=function hasNativeSymbols(){if(typeof i!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof i("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return o()}},57747:t=>{"use strict";t.exports=function hasSymbols(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var t={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var i=42;t[r]=i;for(r in t){return false}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false}var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(t,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==true){return false}}return true}},99038:(t,r,n)=>{"use strict";var i=n(57747);t.exports=function hasToStringTagShams(){return i()&&!!Symbol.toStringTag}},76339:(t,r,n)=>{"use strict";var i=n(88334);t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},77492:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const a=o(n(41808));const s=o(n(24404));const c=o(n(57310));const u=o(n(38237));const l=o(n(81040));const d=n(49690);const p=u.default("http-proxy-agent");function isHTTPS(t){return typeof t==="string"?/^https:?$/i.test(t):false}class HttpProxyAgent extends d.Agent{constructor(t){let r;if(typeof t==="string"){r=c.default.parse(t)}else{r=t}if(!r){throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!")}p("Creating new HttpProxyAgent instance: %o",r);super(r);const n=Object.assign({},r);this.secureProxy=r.secureProxy||isHTTPS(n.protocol);n.host=n.hostname||n.host;if(typeof n.port==="string"){n.port=parseInt(n.port,10)}if(!n.port&&n.host){n.port=this.secureProxy?443:80}if(n.host&&n.path){delete n.path;delete n.pathname}this.proxy=n}callback(t,r){return i(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:i}=this;const o=c.default.parse(t.path);if(!o.protocol){o.protocol="http:"}if(!o.hostname){o.hostname=r.hostname||r.host||null}if(o.port==null&&typeof r.port){o.port=String(r.port)}if(o.port==="80"){delete o.port}t.path=c.default.format(o);if(n.auth){t.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`)}let u;if(i){p("Creating `tls.Socket`: %o",n);u=s.default.connect(n)}else{p("Creating `net.Socket`: %o",n);u=a.default.connect(n)}if(t._header){let r;let n;p("Regenerating stored HTTP header string for request");t._header=null;t._implicitHeader();if(t.output&&t.output.length>0){p("Patching connection write() output buffer with updated header");r=t.output[0];n=r.indexOf("\r\n\r\n")+4;t.output[0]=t._header+r.substring(n);p("Output buffer: %o",t.output)}else if(t.outputData&&t.outputData.length>0){p("Patching connection write() output buffer with updated header");r=t.outputData[0].data;n=r.indexOf("\r\n\r\n")+4;t.outputData[0].data=t._header+r.substring(n);p("Output buffer: %o",t.outputData[0].data)}}yield l.default(u,"connect");return u}))}}r["default"]=HttpProxyAgent},23764:function(t,r,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const o=i(n(77492));function createHttpProxyAgent(t){return new o.default(t)}(function(t){t.HttpProxyAgent=o.default;t.prototype=o.default.prototype})(createHttpProxyAgent||(createHttpProxyAgent={}));t.exports=createHttpProxyAgent},15098:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const a=o(n(41808));const s=o(n(24404));const c=o(n(57310));const u=o(n(39491));const l=o(n(38237));const d=n(49690);const p=o(n(595));const g=l.default("https-proxy-agent:agent");class HttpsProxyAgent extends d.Agent{constructor(t){let r;if(typeof t==="string"){r=c.default.parse(t)}else{r=t}if(!r){throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!")}g("creating new HttpsProxyAgent instance: %o",r);super(r);const n=Object.assign({},r);this.secureProxy=r.secureProxy||isHTTPS(n.protocol);n.host=n.hostname||n.host;if(typeof n.port==="string"){n.port=parseInt(n.port,10)}if(!n.port&&n.host){n.port=this.secureProxy?443:80}if(this.secureProxy&&!("ALPNProtocols"in n)){n.ALPNProtocols=["http 1.1"]}if(n.host&&n.path){delete n.path;delete n.pathname}this.proxy=n}callback(t,r){return i(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:i}=this;let o;if(i){g("Creating `tls.Socket`: %o",n);o=s.default.connect(n)}else{g("Creating `net.Socket`: %o",n);o=a.default.connect(n)}const c=Object.assign({},n.headers);const l=`${r.host}:${r.port}`;let d=`CONNECT ${l} HTTP/1.1\r\n`;if(n.auth){c["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`}let{host:v,port:E,secureEndpoint:S}=r;if(!isDefaultPort(E,S)){v+=`:${E}`}c.Host=v;c.Connection="close";for(const t of Object.keys(c)){d+=`${t}: ${c[t]}\r\n`}const w=p.default(o);o.write(`${d}\r\n`);const{statusCode:x,buffered:N}=yield w;if(x===200){t.once("socket",resume);if(r.secureEndpoint){g("Upgrading socket connection to TLS");const t=r.servername||r.host;return s.default.connect(Object.assign(Object.assign({},omit(r,"host","hostname","path","port")),{socket:o,servername:t}))}return o}o.destroy();const P=new a.default.Socket({writable:false});P.readable=true;t.once("socket",(t=>{g("replaying proxy buffer for failed request");u.default(t.listenerCount("data")>0);t.push(N);t.push(null)}));return P}))}}r["default"]=HttpsProxyAgent;function resume(t){t.resume()}function isDefaultPort(t,r){return Boolean(!r&&t===80||r&&t===443)}function isHTTPS(t){return typeof t==="string"?/^https:?$/i.test(t):false}function omit(t,...r){const n={};let i;for(i in t){if(!r.includes(i)){n[i]=t[i]}}return n}},77219:function(t,r,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const o=i(n(15098));function createHttpsProxyAgent(t){return new o.default(t)}(function(t){t.HttpsProxyAgent=o.default;t.prototype=o.default.prototype})(createHttpsProxyAgent||(createHttpsProxyAgent={}));t.exports=createHttpsProxyAgent},595:function(t,r,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const o=i(n(38237));const a=o.default("https-proxy-agent:parse-proxy-response");function parseProxyResponse(t){return new Promise(((r,n)=>{let i=0;const o=[];function read(){const r=t.read();if(r)ondata(r);else t.once("readable",read)}function cleanup(){t.removeListener("end",onend);t.removeListener("error",onerror);t.removeListener("close",onclose);t.removeListener("readable",read)}function onclose(t){a("onclose had error %o",t)}function onend(){a("onend")}function onerror(t){cleanup();a("onerror %o",t);n(t)}function ondata(t){o.push(t);i+=t.length;const n=Buffer.concat(o,i);const s=n.indexOf("\r\n\r\n");if(s===-1){a("have not received end of HTTP headers yet...");read();return}const c=n.toString("ascii",0,n.indexOf("\r\n"));const u=+c.split(" ")[1];a("got proxy server response: %o",c);r({statusCode:u,buffered:n})}t.on("error",onerror);t.on("close",onclose);t.on("end",onend);read()}))}r["default"]=parseProxyResponse},44124:(t,r,n)=>{try{var i=n(73837);if(typeof i.inherits!=="function")throw"";t.exports=i.inherits}catch(r){t.exports=n(8544)}},8544:t=>{if(typeof Object.create==="function"){t.exports=function inherits(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{t.exports=function inherits(t,r){if(r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype;t.prototype=new TempCtor;t.prototype.constructor=t}}}},94615:t=>{"use strict";var r=Function.prototype.toString;var n=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var i;var o;if(typeof n==="function"&&typeof Object.defineProperty==="function"){try{i=Object.defineProperty({},"length",{get:function(){throw o}});o={};n((function(){throw 42}),null,i)}catch(t){if(t!==o){n=null}}}else{n=null}var a=/^\s*class\b/;var s=function isES6ClassFunction(t){try{var n=r.call(t);return a.test(n)}catch(t){return false}};var c=function tryFunctionToStr(t){try{if(s(t)){return false}r.call(t);return true}catch(t){return false}};var u=Object.prototype.toString;var l="[object Function]";var d="[object GeneratorFunction]";var p=typeof Symbol==="function"&&!!Symbol.toStringTag;var g=typeof document==="object"&&typeof document.all==="undefined"&&document.all!==undefined?document.all:{};t.exports=n?function isCallable(t){if(t===g){return true}if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(typeof t==="function"&&!t.prototype){return true}try{n(t,null,i)}catch(t){if(t!==o){return false}}return!s(t)}:function isCallable(t){if(t===g){return true}if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(typeof t==="function"&&!t.prototype){return true}if(p){return c(t)}if(s(t)){return false}var r=u.call(t);return r===l||r===d}},98768:(t,r,n)=>{"use strict";const i=n(57147);let o;function hasDockerEnv(){try{i.statSync("/.dockerenv");return true}catch(t){return false}}function hasDockerCGroup(){try{return i.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(t){return false}}t.exports=()=>{if(o===undefined){o=hasDockerEnv()||hasDockerCGroup()}return o}},96403:(t,r,n)=>{"use strict";var i=n(28803);var o=n(99038)();var a;var s;var c;var u;if(o){a=i("Object.prototype.hasOwnProperty");s=i("RegExp.prototype.exec");c={};var throwRegexMarker=function(){throw c};u={toString:throwRegexMarker,valueOf:throwRegexMarker};if(typeof Symbol.toPrimitive==="symbol"){u[Symbol.toPrimitive]=throwRegexMarker}}var l=i("Object.prototype.toString");var d=Object.getOwnPropertyDescriptor;var p="[object RegExp]";t.exports=o?function isRegex(t){if(!t||typeof t!=="object"){return false}var r=d(t,"lastIndex");var n=r&&a(r,"value");if(!n){return false}try{s(t,u)}catch(t){return t===c}}:function isRegex(t){if(!t||typeof t!=="object"&&typeof t!=="function"){return false}return l(t)===p}},20639:(t,r,n)=>{"use strict";var i=String.prototype.valueOf;var o=function tryStringObject(t){try{i.call(t);return true}catch(t){return false}};var a=Object.prototype.toString;var s="[object String]";var c=n(99038)();t.exports=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return c?o(t):a.call(t)===s}},51778:t=>{"use strict";class JSBI extends Array{constructor(t,r){if(super(t),this.sign=r,t>JSBI.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(t){var r=Math.floor,n=Number.isFinite;if("number"==typeof t){if(0===t)return JSBI.__zero();if(JSBI.__isOneDigitInt(t))return 0>t?JSBI.__oneDigit(-t,!0):JSBI.__oneDigit(t,!1);if(!n(t)||r(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return JSBI.__fromDouble(t)}if("string"==typeof t){const r=JSBI.__fromString(t);if(null===r)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return r}if("boolean"==typeof t)return!0===t?JSBI.__oneDigit(1,!1):JSBI.__zero();if("object"==typeof t){if(t.constructor===JSBI)return t;const r=JSBI.__toPrimitive(t);return JSBI.BigInt(r)}throw new TypeError("Cannot convert "+t+" to a BigInt")}toDebugString(){const t=["BigInt["];for(const r of this)t.push((r?(r>>>0).toString(16):r)+", ");return t.push("]"),t.join("")}toString(t=10){if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(t&t-1)?JSBI.__toStringBasePowerOfTwo(this,t):JSBI.__toStringGeneric(this,t,!1)}static toNumber(t){const r=t.length;if(0===r)return 0;if(1===r){const r=t.__unsignedDigit(0);return t.sign?-r:r}const n=t.__digit(r-1),i=JSBI.__clz30(n),o=30*r-i;if(1024<o)return t.sign?-Infinity:1/0;let a=o-1,s=n,c=r-1;const u=i+3;let l=32===u?0:s<<u;l>>>=12;const d=u-12;let p=12<=u?0:s<<20+u,g=20+u;for(0<d&&0<c&&(c--,s=t.__digit(c),l|=s>>>30-d,p=s<<d+2,g=d+2);0<g&&0<c;)c--,s=t.__digit(c),p|=30<=g?s<<g-30:s>>>30-g,g-=30;const v=JSBI.__decideRounding(t,g,c,s);if((1===v||0===v&&1==(1&p))&&(p=p+1>>>0,0===p&&(l++,0!=l>>>20&&(l=0,a++,1023<a))))return t.sign?-Infinity:1/0;const E=t.sign?-2147483648:0;return a=a+1023<<20,JSBI.__kBitConversionInts[1]=E|a|l,JSBI.__kBitConversionInts[0]=p,JSBI.__kBitConversionDouble[0]}static unaryMinus(t){if(0===t.length)return t;const r=t.__copy();return r.sign=!t.sign,r}static bitwiseNot(t){return t.sign?JSBI.__absoluteSubOne(t).__trim():JSBI.__absoluteAddOne(t,!0)}static exponentiate(t,r){if(r.sign)throw new RangeError("Exponent must be positive");if(0===r.length)return JSBI.__oneDigit(1,!1);if(0===t.length)return t;if(1===t.length&&1===t.__digit(0))return t.sign&&0==(1&r.__digit(0))?JSBI.unaryMinus(t):t;if(1<r.length)throw new RangeError("BigInt too big");let n=r.__unsignedDigit(0);if(1===n)return t;if(n>=JSBI.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===t.length&&2===t.__digit(0)){const r=1+(0|n/30),i=t.sign&&0!=(1&n),o=new JSBI(r,i);o.__initializeDigits();const a=1<<n%30;return o.__setDigit(r-1,a),o}let i=null,o=t;for(0!=(1&n)&&(i=t),n>>=1;0!==n;n>>=1)o=JSBI.multiply(o,o),0!=(1&n)&&(null===i?i=o:i=JSBI.multiply(i,o));return i}static multiply(t,r){if(0===t.length)return t;if(0===r.length)return r;let n=t.length+r.length;30<=t.__clzmsd()+r.__clzmsd()&&n--;const i=new JSBI(n,t.sign!==r.sign);i.__initializeDigits();for(let n=0;n<t.length;n++)JSBI.__multiplyAccumulate(r,t.__digit(n),i,n);return i.__trim()}static divide(t,r){if(0===r.length)throw new RangeError("Division by zero");if(0>JSBI.__absoluteCompare(t,r))return JSBI.__zero();const n=t.sign!==r.sign,i=r.__unsignedDigit(0);let o;if(1===r.length&&32767>=i){if(1===i)return n===t.sign?t:JSBI.unaryMinus(t);o=JSBI.__absoluteDivSmall(t,i,null)}else o=JSBI.__absoluteDivLarge(t,r,!0,!1);return o.sign=n,o.__trim()}static remainder(t,r){if(0===r.length)throw new RangeError("Division by zero");if(0>JSBI.__absoluteCompare(t,r))return t;const n=r.__unsignedDigit(0);if(1===r.length&&32767>=n){if(1===n)return JSBI.__zero();const r=JSBI.__absoluteModSmall(t,n);return 0===r?JSBI.__zero():JSBI.__oneDigit(r,t.sign)}const i=JSBI.__absoluteDivLarge(t,r,!1,!0);return i.sign=t.sign,i.__trim()}static add(t,r){const n=t.sign;return n===r.sign?JSBI.__absoluteAdd(t,r,n):0<=JSBI.__absoluteCompare(t,r)?JSBI.__absoluteSub(t,r,n):JSBI.__absoluteSub(r,t,!n)}static subtract(t,r){const n=t.sign;return n===r.sign?0<=JSBI.__absoluteCompare(t,r)?JSBI.__absoluteSub(t,r,n):JSBI.__absoluteSub(r,t,!n):JSBI.__absoluteAdd(t,r,n)}static leftShift(t,r){return 0===r.length||0===t.length?t:r.sign?JSBI.__rightShiftByAbsolute(t,r):JSBI.__leftShiftByAbsolute(t,r)}static signedRightShift(t,r){return 0===r.length||0===t.length?t:r.sign?JSBI.__leftShiftByAbsolute(t,r):JSBI.__rightShiftByAbsolute(t,r)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(t,r){return 0>JSBI.__compareToBigInt(t,r)}static lessThanOrEqual(t,r){return 0>=JSBI.__compareToBigInt(t,r)}static greaterThan(t,r){return 0<JSBI.__compareToBigInt(t,r)}static greaterThanOrEqual(t,r){return 0<=JSBI.__compareToBigInt(t,r)}static equal(t,r){if(t.sign!==r.sign)return!1;if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t.__digit(n)!==r.__digit(n))return!1;return!0}static notEqual(t,r){return!JSBI.equal(t,r)}static bitwiseAnd(t,r){var n=Math.max;if(!t.sign&&!r.sign)return JSBI.__absoluteAnd(t,r).__trim();if(t.sign&&r.sign){const i=n(t.length,r.length)+1;let o=JSBI.__absoluteSubOne(t,i);const a=JSBI.__absoluteSubOne(r);return o=JSBI.__absoluteOr(o,a,o),JSBI.__absoluteAddOne(o,!0,o).__trim()}return t.sign&&([t,r]=[r,t]),JSBI.__absoluteAndNot(t,JSBI.__absoluteSubOne(r)).__trim()}static bitwiseXor(t,r){var n=Math.max;if(!t.sign&&!r.sign)return JSBI.__absoluteXor(t,r).__trim();if(t.sign&&r.sign){const i=n(t.length,r.length),o=JSBI.__absoluteSubOne(t,i),a=JSBI.__absoluteSubOne(r);return JSBI.__absoluteXor(o,a,o).__trim()}const i=n(t.length,r.length)+1;t.sign&&([t,r]=[r,t]);let o=JSBI.__absoluteSubOne(r,i);return o=JSBI.__absoluteXor(o,t,o),JSBI.__absoluteAddOne(o,!0,o).__trim()}static bitwiseOr(t,r){var n=Math.max;const i=n(t.length,r.length);if(!t.sign&&!r.sign)return JSBI.__absoluteOr(t,r).__trim();if(t.sign&&r.sign){let n=JSBI.__absoluteSubOne(t,i);const o=JSBI.__absoluteSubOne(r);return n=JSBI.__absoluteAnd(n,o,n),JSBI.__absoluteAddOne(n,!0,n).__trim()}t.sign&&([t,r]=[r,t]);let o=JSBI.__absoluteSubOne(r,i);return o=JSBI.__absoluteAndNot(o,t,o),JSBI.__absoluteAddOne(o,!0,o).__trim()}static asIntN(t,r){var n=Math.floor;if(0===r.length)return r;if(t=n(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return JSBI.__zero();if(t>=JSBI.__kMaxLengthBits)return r;const i=0|(t+29)/30;if(r.length<i)return r;const o=r.__unsignedDigit(i-1),a=1<<(t-1)%30;if(r.length===i&&o<a)return r;if(!((o&a)===a))return JSBI.__truncateToNBits(t,r);if(!r.sign)return JSBI.__truncateAndSubFromPowerOfTwo(t,r,!0);if(0==(o&a-1)){for(let n=i-2;0<=n;n--)if(0!==r.__digit(n))return JSBI.__truncateAndSubFromPowerOfTwo(t,r,!1);return r.length===i&&o===a?r:JSBI.__truncateToNBits(t,r)}return JSBI.__truncateAndSubFromPowerOfTwo(t,r,!1)}static asUintN(t,r){var n=Math.floor;if(0===r.length)return r;if(t=n(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return JSBI.__zero();if(r.sign){if(t>JSBI.__kMaxLengthBits)throw new RangeError("BigInt too big");return JSBI.__truncateAndSubFromPowerOfTwo(t,r,!1)}if(t>=JSBI.__kMaxLengthBits)return r;const i=0|(t+29)/30;if(r.length<i)return r;const o=t%30;if(r.length==i){if(0===o)return r;const t=r.__digit(i-1);if(0==t>>>o)return r}return JSBI.__truncateToNBits(t,r)}static ADD(t,r){if(t=JSBI.__toPrimitive(t),r=JSBI.__toPrimitive(r),"string"==typeof t)return"string"!=typeof r&&(r=r.toString()),t+r;if("string"==typeof r)return t.toString()+r;if(t=JSBI.__toNumeric(t),r=JSBI.__toNumeric(r),JSBI.__isBigInt(t)&&JSBI.__isBigInt(r))return JSBI.add(t,r);if("number"==typeof t&&"number"==typeof r)return t+r;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(t,r){return JSBI.__compare(t,r,0)}static LE(t,r){return JSBI.__compare(t,r,1)}static GT(t,r){return JSBI.__compare(t,r,2)}static GE(t,r){return JSBI.__compare(t,r,3)}static EQ(t,r){for(;;){if(JSBI.__isBigInt(t))return JSBI.__isBigInt(r)?JSBI.equal(t,r):JSBI.EQ(r,t);if("number"==typeof t){if(JSBI.__isBigInt(r))return JSBI.__equalToNumber(r,t);if("object"!=typeof r)return t==r;r=JSBI.__toPrimitive(r)}else if("string"==typeof t){if(JSBI.__isBigInt(r))return t=JSBI.__fromString(t),null!==t&&JSBI.equal(t,r);if("object"!=typeof r)return t==r;r=JSBI.__toPrimitive(r)}else if("boolean"==typeof t){if(JSBI.__isBigInt(r))return JSBI.__equalToNumber(r,+t);if("object"!=typeof r)return t==r;r=JSBI.__toPrimitive(r)}else if("symbol"==typeof t){if(JSBI.__isBigInt(r))return!1;if("object"!=typeof r)return t==r;r=JSBI.__toPrimitive(r)}else if("object"==typeof t){if("object"==typeof r&&r.constructor!==JSBI)return t==r;t=JSBI.__toPrimitive(t)}else return t==r}}static NE(t,r){return!JSBI.EQ(t,r)}static __zero(){return new JSBI(0,!1)}static __oneDigit(t,r){const n=new JSBI(1,r);return n.__setDigit(0,t),n}__copy(){const t=new JSBI(this.length,this.sign);for(let r=0;r<this.length;r++)t[r]=this[r];return t}__trim(){let t=this.length,r=this[t-1];for(;0===r;)t--,r=this[t-1],this.pop();return 0===t&&(this.sign=!1),this}__initializeDigits(){for(let t=0;t<this.length;t++)this[t]=0}static __decideRounding(t,r,n,i){if(0<r)return-1;let o;if(0>r)o=-r-1;else{if(0===n)return-1;n--,i=t.__digit(n),o=29}let a=1<<o;if(0==(i&a))return-1;if(a-=1,0!=(i&a))return 1;for(;0<n;)if(n--,0!==t.__digit(n))return 1;return 0}static __fromDouble(t){JSBI.__kBitConversionDouble[0]=t;const r=2047&JSBI.__kBitConversionInts[1]>>>20,n=r-1023,i=(0|n/30)+1,o=new JSBI(i,0>t);let a=1048575&JSBI.__kBitConversionInts[1]|1048576,s=JSBI.__kBitConversionInts[0];const c=20,u=n%30;let l,d=0;if(u<20){const t=c-u;d=t+32,l=a>>>t,a=a<<32-t|s>>>t,s<<=32-t}else if(u===20)d=32,l=a,a=s,s=0;else{const t=u-c;d=32-t,l=a<<t|s>>>32-t,a=s<<t,s=0}o.__setDigit(i-1,l);for(let t=i-2;0<=t;t--)0<d?(d-=30,l=a>>>2,a=a<<30|s>>>2,s<<=30):l=0,o.__setDigit(t,l);return o.__trim()}static __isWhitespace(t){return!!(13>=t&&9<=t)||(159>=t?32==t:131071>=t?160==t||5760==t:196607>=t?(t&=131071,10>=t||40==t||41==t||47==t||95==t||4096==t):65279==t)}static __fromString(t,r=0){let n=0;const i=t.length;let o=0;if(o===i)return JSBI.__zero();let a=t.charCodeAt(o);for(;JSBI.__isWhitespace(a);){if(++o===i)return JSBI.__zero();a=t.charCodeAt(o)}if(43===a){if(++o===i)return null;a=t.charCodeAt(o),n=1}else if(45===a){if(++o===i)return null;a=t.charCodeAt(o),n=-1}if(0===r){if(r=10,48===a){if(++o===i)return JSBI.__zero();if(a=t.charCodeAt(o),88===a||120===a){if(r=16,++o===i)return null;a=t.charCodeAt(o)}else if(79===a||111===a){if(r=8,++o===i)return null;a=t.charCodeAt(o)}else if(66===a||98===a){if(r=2,++o===i)return null;a=t.charCodeAt(o)}}}else if(16===r&&48===a){if(++o===i)return JSBI.__zero();if(a=t.charCodeAt(o),88===a||120===a){if(++o===i)return null;a=t.charCodeAt(o)}}if(0!=n&&10!==r)return null;for(;48===a;){if(++o===i)return JSBI.__zero();a=t.charCodeAt(o)}const s=i-o;let c=JSBI.__kMaxBitsPerChar[r],u=JSBI.__kBitsPerCharTableMultiplier-1;if(s>1073741824/c)return null;const l=c*s+u>>>JSBI.__kBitsPerCharTableShift,d=new JSBI(0|(l+29)/30,!1),p=10>r?r:10,g=10<r?r-10:0;if(0==(r&r-1)){c>>=JSBI.__kBitsPerCharTableShift;const r=[],n=[];let s=!1;do{let u=0,l=0;for(;;){let r;if(a-48>>>0<p)r=a-48;else if((32|a)-97>>>0<g)r=(32|a)-87;else{s=!0;break}if(l+=c,u=u<<c|r,++o===i){s=!0;break}if(a=t.charCodeAt(o),30<l+c)break}r.push(u),n.push(l)}while(!s);JSBI.__fillFromParts(d,r,n)}else{d.__initializeDigits();let n=!1,s=0;do{let l=0,v=1;for(;;){let c;if(a-48>>>0<p)c=a-48;else if((32|a)-97>>>0<g)c=(32|a)-87;else{n=!0;break}const u=v*r;if(1073741823<u)break;if(v=u,l=l*r+c,s++,++o===i){n=!0;break}a=t.charCodeAt(o)}u=30*JSBI.__kBitsPerCharTableMultiplier-1;const E=0|(c*s+u>>>JSBI.__kBitsPerCharTableShift)/30;d.__inplaceMultiplyAdd(v,l,E)}while(!n)}if(o!==i){if(!JSBI.__isWhitespace(a))return null;for(o++;o<i;o++)if(a=t.charCodeAt(o),!JSBI.__isWhitespace(a))return null}return d.sign=-1==n,d.__trim()}static __fillFromParts(t,r,n){let i=0,o=0,a=0;for(let s=r.length-1;0<=s;s--){const c=r[s],u=n[s];o|=c<<a,a+=u,30===a?(t.__setDigit(i++,o),a=0,o=0):30<a&&(t.__setDigit(i++,1073741823&o),a-=30,o=c>>>u-a)}if(0!==o){if(i>=t.length)throw new Error("implementation bug");t.__setDigit(i++,o)}for(;i<t.length;i++)t.__setDigit(i,0)}static __toStringBasePowerOfTwo(t,r){const n=t.length;let i=r-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const o=i,a=r-1,s=t.__digit(n-1),c=JSBI.__clz30(s);let u=0|(30*n-c+o-1)/o;if(t.sign&&u++,268435456<u)throw new Error("string too long");const l=Array(u);let d=u-1,p=0,g=0;for(let r=0;r<n-1;r++){const n=t.__digit(r),i=(p|n<<g)&a;l[d--]=JSBI.__kConversionChars[i];const s=o-g;for(p=n>>>s,g=30-s;g>=o;)l[d--]=JSBI.__kConversionChars[p&a],p>>>=o,g-=o}const v=(p|s<<g)&a;for(l[d--]=JSBI.__kConversionChars[v],p=s>>>o-g;0!==p;)l[d--]=JSBI.__kConversionChars[p&a],p>>>=o;if(t.sign&&(l[d--]="-"),-1!=d)throw new Error("implementation bug");return l.join("")}static __toStringGeneric(t,r,n){const i=t.length;if(0===i)return"";if(1===i){let i=t.__unsignedDigit(0).toString(r);return!1===n&&t.sign&&(i="-"+i),i}const o=30*i-JSBI.__clz30(t.__digit(i-1)),a=JSBI.__kMaxBitsPerChar[r],s=a-1;let c=o*JSBI.__kBitsPerCharTableMultiplier;c+=s-1,c=0|c/s;const u=c+1>>1,l=JSBI.exponentiate(JSBI.__oneDigit(r,!1),JSBI.__oneDigit(u,!1));let d,p;const g=l.__unsignedDigit(0);if(1===l.length&&32767>=g){d=new JSBI(t.length,!1),d.__initializeDigits();let n=0;for(let r=2*t.length-1;0<=r;r--){const i=n<<15|t.__halfDigit(r);d.__setHalfDigit(r,0|i/g),n=0|i%g}p=n.toString(r)}else{const n=JSBI.__absoluteDivLarge(t,l,!0,!0);d=n.quotient;const i=n.remainder.__trim();p=JSBI.__toStringGeneric(i,r,!0)}d.__trim();let v=JSBI.__toStringGeneric(d,r,!0);for(;p.length<u;)p="0"+p;return!1===n&&t.sign&&(v="-"+v),v+p}static __unequalSign(t){return t?-1:1}static __absoluteGreater(t){return t?-1:1}static __absoluteLess(t){return t?1:-1}static __compareToBigInt(t,r){const n=t.sign;if(n!==r.sign)return JSBI.__unequalSign(n);const i=JSBI.__absoluteCompare(t,r);return 0<i?JSBI.__absoluteGreater(n):0>i?JSBI.__absoluteLess(n):0}static __compareToNumber(t,r){if(JSBI.__isOneDigitInt(r)){const n=t.sign,i=0>r;if(n!==i)return JSBI.__unequalSign(n);if(0===t.length){if(i)throw new Error("implementation bug");return 0===r?0:-1}if(1<t.length)return JSBI.__absoluteGreater(n);const o=Math.abs(r),a=t.__unsignedDigit(0);return a>o?JSBI.__absoluteGreater(n):a<o?JSBI.__absoluteLess(n):0}return JSBI.__compareToDouble(t,r)}static __compareToDouble(t,r){if(r!==r)return r;if(r===1/0)return-1;if(r===-Infinity)return 1;const n=t.sign;if(n!==0>r)return JSBI.__unequalSign(n);if(0===r)throw new Error("implementation bug: should be handled elsewhere");if(0===t.length)return-1;JSBI.__kBitConversionDouble[0]=r;const i=2047&JSBI.__kBitConversionInts[1]>>>20;if(2047==i)throw new Error("implementation bug: handled elsewhere");const o=i-1023;if(0>o)return JSBI.__absoluteGreater(n);const a=t.length;let s=t.__digit(a-1);const c=JSBI.__clz30(s),u=30*a-c,l=o+1;if(u<l)return JSBI.__absoluteLess(n);if(u>l)return JSBI.__absoluteGreater(n);let d=1048576|1048575&JSBI.__kBitConversionInts[1],p=JSBI.__kBitConversionInts[0];const g=20,v=29-c;if(v!==(0|(u-1)%30))throw new Error("implementation bug");let E,S=0;if(20>v){const t=g-v;S=t+32,E=d>>>t,d=d<<32-t|p>>>t,p<<=32-t}else if(20===v)S=32,E=d,d=p,p=0;else{const t=v-g;S=32-t,E=d<<t|p>>>32-t,d=p<<t,p=0}if(s>>>=0,E>>>=0,s>E)return JSBI.__absoluteGreater(n);if(s<E)return JSBI.__absoluteLess(n);for(let r=a-2;0<=r;r--){0<S?(S-=30,E=d>>>2,d=d<<30|p>>>2,p<<=30):E=0;const i=t.__unsignedDigit(r);if(i>E)return JSBI.__absoluteGreater(n);if(i<E)return JSBI.__absoluteLess(n)}if(0!==d||0!==p){if(0===S)throw new Error("implementation bug");return JSBI.__absoluteLess(n)}return 0}static __equalToNumber(t,r){var n=Math.abs;return JSBI.__isOneDigitInt(r)?0===r?0===t.length:1===t.length&&t.sign===0>r&&t.__unsignedDigit(0)===n(r):0===JSBI.__compareToDouble(t,r)}static __comparisonResultToBool(t,r){return 0===r?0>t:1===r?0>=t:2===r?0<t:3===r?0<=t:void 0}static __compare(t,r,n){if(t=JSBI.__toPrimitive(t),r=JSBI.__toPrimitive(r),"string"==typeof t&&"string"==typeof r)switch(n){case 0:return t<r;case 1:return t<=r;case 2:return t>r;case 3:return t>=r}if(JSBI.__isBigInt(t)&&"string"==typeof r)return r=JSBI.__fromString(r),null!==r&&JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(t,r),n);if("string"==typeof t&&JSBI.__isBigInt(r))return t=JSBI.__fromString(t),null!==t&&JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(t,r),n);if(t=JSBI.__toNumeric(t),r=JSBI.__toNumeric(r),JSBI.__isBigInt(t)){if(JSBI.__isBigInt(r))return JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(t,r),n);if("number"!=typeof r)throw new Error("implementation bug");return JSBI.__comparisonResultToBool(JSBI.__compareToNumber(t,r),n)}if("number"!=typeof t)throw new Error("implementation bug");if(JSBI.__isBigInt(r))return JSBI.__comparisonResultToBool(JSBI.__compareToNumber(r,t),2^n);if("number"!=typeof r)throw new Error("implementation bug");return 0===n?t<r:1===n?t<=r:2===n?t>r:3===n?t>=r:void 0}__clzmsd(){return JSBI.__clz30(this.__digit(this.length-1))}static __absoluteAdd(t,r,n){if(t.length<r.length)return JSBI.__absoluteAdd(r,t,n);if(0===t.length)return t;if(0===r.length)return t.sign===n?t:JSBI.unaryMinus(t);let i=t.length;(0===t.__clzmsd()||r.length===t.length&&0===r.__clzmsd())&&i++;const o=new JSBI(i,n);let a=0,s=0;for(;s<r.length;s++){const n=t.__digit(s)+r.__digit(s)+a;a=n>>>30,o.__setDigit(s,1073741823&n)}for(;s<t.length;s++){const r=t.__digit(s)+a;a=r>>>30,o.__setDigit(s,1073741823&r)}return s<o.length&&o.__setDigit(s,a),o.__trim()}static __absoluteSub(t,r,n){if(0===t.length)return t;if(0===r.length)return t.sign===n?t:JSBI.unaryMinus(t);const i=new JSBI(t.length,n);let o=0,a=0;for(;a<r.length;a++){const n=t.__digit(a)-r.__digit(a)-o;o=1&n>>>30,i.__setDigit(a,1073741823&n)}for(;a<t.length;a++){const r=t.__digit(a)-o;o=1&r>>>30,i.__setDigit(a,1073741823&r)}return i.__trim()}static __absoluteAddOne(t,r,n=null){const i=t.length;null===n?n=new JSBI(i,r):n.sign=r;let o=1;for(let r=0;r<i;r++){const i=t.__digit(r)+o;o=i>>>30,n.__setDigit(r,1073741823&i)}return 0!=o&&n.__setDigitGrow(i,1),n}static __absoluteSubOne(t,r){const n=t.length;r=r||n;const i=new JSBI(r,!1);let o=1;for(let r=0;r<n;r++){const n=t.__digit(r)-o;o=1&n>>>30,i.__setDigit(r,1073741823&n)}if(0!=o)throw new Error("implementation bug");for(let t=n;t<r;t++)i.__setDigit(t,0);return i}static __absoluteAnd(t,r,n=null){let i=t.length,o=r.length,a=o;if(i<o){a=i;const n=t,s=i;t=r,i=o,r=n,o=s}let s=a;null===n?n=new JSBI(s,!1):s=n.length;let c=0;for(;c<a;c++)n.__setDigit(c,t.__digit(c)&r.__digit(c));for(;c<s;c++)n.__setDigit(c,0);return n}static __absoluteAndNot(t,r,n=null){const i=t.length,o=r.length;let a=o;i<o&&(a=i);let s=i;null===n?n=new JSBI(s,!1):s=n.length;let c=0;for(;c<a;c++)n.__setDigit(c,t.__digit(c)&~r.__digit(c));for(;c<i;c++)n.__setDigit(c,t.__digit(c));for(;c<s;c++)n.__setDigit(c,0);return n}static __absoluteOr(t,r,n=null){let i=t.length,o=r.length,a=o;if(i<o){a=i;const n=t,s=i;t=r,i=o,r=n,o=s}let s=i;null===n?n=new JSBI(s,!1):s=n.length;let c=0;for(;c<a;c++)n.__setDigit(c,t.__digit(c)|r.__digit(c));for(;c<i;c++)n.__setDigit(c,t.__digit(c));for(;c<s;c++)n.__setDigit(c,0);return n}static __absoluteXor(t,r,n=null){let i=t.length,o=r.length,a=o;if(i<o){a=i;const n=t,s=i;t=r,i=o,r=n,o=s}let s=i;null===n?n=new JSBI(s,!1):s=n.length;let c=0;for(;c<a;c++)n.__setDigit(c,t.__digit(c)^r.__digit(c));for(;c<i;c++)n.__setDigit(c,t.__digit(c));for(;c<s;c++)n.__setDigit(c,0);return n}static __absoluteCompare(t,r){const n=t.length-r.length;if(0!=n)return n;let i=t.length-1;for(;0<=i&&t.__digit(i)===r.__digit(i);)i--;return 0>i?0:t.__unsignedDigit(i)>r.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(t,r,n,i){if(0===r)return;const o=32767&r,a=r>>>15;let s=0,c=0;for(let r,u=0;u<t.length;u++,i++){r=n.__digit(i);const l=t.__digit(u),d=32767&l,p=l>>>15,g=JSBI.__imul(d,o),v=JSBI.__imul(d,a),E=JSBI.__imul(p,o),S=JSBI.__imul(p,a);r+=c+g+s,s=r>>>30,r&=1073741823,r+=((32767&v)<<15)+((32767&E)<<15),s+=r>>>30,c=S+(v>>>15)+(E>>>15),n.__setDigit(i,1073741823&r)}for(;0!=s||0!==c;i++){let t=n.__digit(i);t+=s+c,c=0,s=t>>>30,n.__setDigit(i,1073741823&t)}}static __internalMultiplyAdd(t,r,n,i,o){let a=n,s=0;for(let n=0;n<i;n++){const i=t.__digit(n),c=JSBI.__imul(32767&i,r),u=JSBI.__imul(i>>>15,r),l=c+((32767&u)<<15)+s+a;a=l>>>30,s=u>>>15,o.__setDigit(n,1073741823&l)}if(o.length>i)for(o.__setDigit(i++,a+s);i<o.length;)o.__setDigit(i++,0);else if(0!==a+s)throw new Error("implementation bug")}__inplaceMultiplyAdd(t,r,n){n>this.length&&(n=this.length);const i=32767&t,o=t>>>15;let a=0,s=r;for(let t=0;t<n;t++){const r=this.__digit(t),n=32767&r,c=r>>>15,u=JSBI.__imul(n,i),l=JSBI.__imul(n,o),d=JSBI.__imul(c,i),p=JSBI.__imul(c,o);let g=s+u+a;a=g>>>30,g&=1073741823,g+=((32767&l)<<15)+((32767&d)<<15),a+=g>>>30,s=p+(l>>>15)+(d>>>15),this.__setDigit(t,1073741823&g)}if(0!=a||0!==s)throw new Error("implementation bug")}static __absoluteDivSmall(t,r,n=null){null===n&&(n=new JSBI(t.length,!1));let i=0;for(let o,a=2*t.length-1;0<=a;a-=2){o=(i<<15|t.__halfDigit(a))>>>0;const s=0|o/r;i=0|o%r,o=(i<<15|t.__halfDigit(a-1))>>>0;const c=0|o/r;i=0|o%r,n.__setDigit(a>>>1,s<<15|c)}return n}static __absoluteModSmall(t,r){let n=0;for(let i=2*t.length-1;0<=i;i--){const o=(n<<15|t.__halfDigit(i))>>>0;n=0|o%r}return n}static __absoluteDivLarge(t,r,n,i){const o=r.__halfDigitLength(),a=r.length,s=t.__halfDigitLength()-o;let c=null;n&&(c=new JSBI(s+2>>>1,!1),c.__initializeDigits());const u=new JSBI(o+2>>>1,!1);u.__initializeDigits();const l=JSBI.__clz15(r.__halfDigit(o-1));0<l&&(r=JSBI.__specialLeftShift(r,l,0));const d=JSBI.__specialLeftShift(t,l,1),p=r.__halfDigit(o-1);let g=0;for(let t,i=s;0<=i;i--){t=32767;const s=d.__halfDigit(i+o);if(s!==p){const n=(s<<15|d.__halfDigit(i+o-1))>>>0;t=0|n/p;let a=0|n%p;const c=r.__halfDigit(o-2),u=d.__halfDigit(i+o-2);for(;JSBI.__imul(t,c)>>>0>(a<<16|u)>>>0&&(t--,a+=p,!(32767<a)););}JSBI.__internalMultiplyAdd(r,t,0,a,u);let l=d.__inplaceSub(u,i,o+1);0!==l&&(l=d.__inplaceAdd(r,i,o),d.__setHalfDigit(i+o,32767&d.__halfDigit(i+o)+l),t--),n&&(1&i?g=t<<15:c.__setDigit(i>>>1,g|t))}if(i)return d.__inplaceRightShift(l),n?{quotient:c,remainder:d}:d;if(n)return c;throw new Error("unreachable")}static __clz15(t){return JSBI.__clz30(t)-15}__inplaceAdd(t,r,n){let i=0;for(let o=0;o<n;o++){const n=this.__halfDigit(r+o)+t.__halfDigit(o)+i;i=n>>>15,this.__setHalfDigit(r+o,32767&n)}return i}__inplaceSub(t,r,n){let i=0;if(1&r){r>>=1;let o=this.__digit(r),a=32767&o,s=0;for(;s<n-1>>>1;s++){const n=t.__digit(s),c=(o>>>15)-(32767&n)-i;i=1&c>>>15,this.__setDigit(r+s,(32767&c)<<15|32767&a),o=this.__digit(r+s+1),a=(32767&o)-(n>>>15)-i,i=1&a>>>15}const c=t.__digit(s),u=(o>>>15)-(32767&c)-i;i=1&u>>>15,this.__setDigit(r+s,(32767&u)<<15|32767&a);if(r+s+1>=this.length)throw new RangeError("out of bounds");0==(1&n)&&(o=this.__digit(r+s+1),a=(32767&o)-(c>>>15)-i,i=1&a>>>15,this.__setDigit(r+t.length,1073709056&o|32767&a))}else{r>>=1;let o=0;for(;o<t.length-1;o++){const n=this.__digit(r+o),a=t.__digit(o),s=(32767&n)-(32767&a)-i;i=1&s>>>15;const c=(n>>>15)-(a>>>15)-i;i=1&c>>>15,this.__setDigit(r+o,(32767&c)<<15|32767&s)}const a=this.__digit(r+o),s=t.__digit(o),c=(32767&a)-(32767&s)-i;i=1&c>>>15;let u=0;0==(1&n)&&(u=(a>>>15)-(s>>>15)-i,i=1&u>>>15),this.__setDigit(r+o,(32767&u)<<15|32767&c)}return i}__inplaceRightShift(t){if(0===t)return;let r=this.__digit(0)>>>t;const n=this.length-1;for(let i=0;i<n;i++){const n=this.__digit(i+1);this.__setDigit(i,1073741823&n<<30-t|r),r=n>>>t}this.__setDigit(n,r)}static __specialLeftShift(t,r,n){const i=t.length,o=new JSBI(i+n,!1);if(0===r){for(let r=0;r<i;r++)o.__setDigit(r,t.__digit(r));return 0<n&&o.__setDigit(i,0),o}let a=0;for(let n=0;n<i;n++){const i=t.__digit(n);o.__setDigit(n,1073741823&i<<r|a),a=i>>>30-r}return 0<n&&o.__setDigit(i,a),o}static __leftShiftByAbsolute(t,r){const n=JSBI.__toShiftAmount(r);if(0>n)throw new RangeError("BigInt too big");const i=0|n/30,o=n%30,a=t.length,s=0!==o&&0!=t.__digit(a-1)>>>30-o,c=a+i+(s?1:0),u=new JSBI(c,t.sign);if(0===o){let r=0;for(;r<i;r++)u.__setDigit(r,0);for(;r<c;r++)u.__setDigit(r,t.__digit(r-i))}else{let r=0;for(let t=0;t<i;t++)u.__setDigit(t,0);for(let n=0;n<a;n++){const a=t.__digit(n);u.__setDigit(n+i,1073741823&a<<o|r),r=a>>>30-o}if(s)u.__setDigit(a+i,r);else if(0!==r)throw new Error("implementation bug")}return u.__trim()}static __rightShiftByAbsolute(t,r){const n=t.length,i=t.sign,o=JSBI.__toShiftAmount(r);if(0>o)return JSBI.__rightShiftByMaximum(i);const a=0|o/30,s=o%30;let c=n-a;if(0>=c)return JSBI.__rightShiftByMaximum(i);let u=!1;if(i){if(0!=(t.__digit(a)&(1<<s)-1))u=!0;else for(let r=0;r<a;r++)if(0!==t.__digit(r)){u=!0;break}}if(u&&0===s){const r=t.__digit(n-1);0==~r&&c++}let l=new JSBI(c,i);if(0===s){l.__setDigit(c-1,0);for(let r=a;r<n;r++)l.__setDigit(r-a,t.__digit(r))}else{let r=t.__digit(a)>>>s;const i=n-a-1;for(let n=0;n<i;n++){const i=t.__digit(n+a+1);l.__setDigit(n,1073741823&i<<30-s|r),r=i>>>s}l.__setDigit(i,r)}return u&&(l=JSBI.__absoluteAddOne(l,!0,l)),l.__trim()}static __rightShiftByMaximum(t){return t?JSBI.__oneDigit(1,!0):JSBI.__zero()}static __toShiftAmount(t){if(1<t.length)return-1;const r=t.__unsignedDigit(0);return r>JSBI.__kMaxLengthBits?-1:r}static __toPrimitive(t,r="default"){if("object"!=typeof t)return t;if(t.constructor===JSBI)return t;if("undefined"!=typeof Symbol&&"symbol"==typeof Symbol.toPrimitive){const n=t[Symbol.toPrimitive];if(n){const t=n(r);if("object"!=typeof t)return t;throw new TypeError("Cannot convert object to primitive value")}}const n=t.valueOf;if(n){const r=n.call(t);if("object"!=typeof r)return r}const i=t.toString;if(i){const r=i.call(t);if("object"!=typeof r)return r}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(t){return JSBI.__isBigInt(t)?t:+t}static __isBigInt(t){return"object"==typeof t&&null!==t&&t.constructor===JSBI}static __truncateToNBits(t,r){const n=0|(t+29)/30,i=new JSBI(n,r.sign),o=n-1;for(let t=0;t<o;t++)i.__setDigit(t,r.__digit(t));let a=r.__digit(o);if(0!=t%30){const r=32-t%30;a=a<<r>>>r}return i.__setDigit(o,a),i.__trim()}static __truncateAndSubFromPowerOfTwo(t,r,n){var i=Math.min;const o=0|(t+29)/30,a=new JSBI(o,n);let s=0;const c=o-1;let u=0;for(const t=i(c,r.length);s<t;s++){const t=0-r.__digit(s)-u;u=1&t>>>30,a.__setDigit(s,1073741823&t)}for(;s<c;s++)a.__setDigit(s,0|1073741823&-u);let l=c<r.length?r.__digit(c):0;const d=t%30;let p;if(0==d)p=0-l-u,p&=1073741823;else{const t=32-d;l=l<<t>>>t;const r=1<<32-t;p=r-l-u,p&=r-1}return a.__setDigit(c,p),a.__trim()}__digit(t){return this[t]}__unsignedDigit(t){return this[t]>>>0}__setDigit(t,r){this[t]=0|r}__setDigitGrow(t,r){this[t]=0|r}__halfDigitLength(){const t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}__halfDigit(t){return 32767&this[t>>>1]>>>15*(1&t)}__setHalfDigit(t,r){const n=t>>>1,i=this.__digit(n),o=1&t?32767&i|r<<15:1073709056&i|32767&r;this.__setDigit(n,o)}static __digitPow(t,r){let n=1;for(;0<r;)1&r&&(n*=t),r>>>=1,t*=t;return n}static __isOneDigitInt(t){return(1073741823&t)===t}}JSBI.__kMaxLength=33554432,JSBI.__kMaxLengthBits=JSBI.__kMaxLength<<5,JSBI.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],JSBI.__kBitsPerCharTableShift=5,JSBI.__kBitsPerCharTableMultiplier=1<<JSBI.__kBitsPerCharTableShift,JSBI.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],JSBI.__kBitConversionBuffer=new ArrayBuffer(8),JSBI.__kBitConversionDouble=new Float64Array(JSBI.__kBitConversionBuffer),JSBI.__kBitConversionInts=new Int32Array(JSBI.__kBitConversionBuffer),JSBI.__clz30=Math.clz32?function(t){return Math.clz32(t)-2}:function(t){return 0===t?30:0|29-(0|Math.log(t>>>0)/Math.LN2)},JSBI.__imul=Math.imul||function(t,r){return 0|t*r},t.exports=JSBI},53359:(t,r,n)=>{var i=n(22597);t.exports=function(t,r){r=r||{};var n=i.decode(t,r);if(!n){return null}var o=n.payload;if(typeof o==="string"){try{var a=JSON.parse(o);if(a!==null&&typeof a==="object"){o=a}}catch(t){}}if(r.complete===true){return{header:n.header,payload:o,signature:n.signature}}return o}},77486:(t,r,n)=>{t.exports={decode:n(53359),verify:n(12327),sign:n(82022),JsonWebTokenError:n(405),NotBeforeError:n(4383),TokenExpiredError:n(46637)}},405:t=>{var JsonWebTokenError=function(t,r){Error.call(this,t);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}this.name="JsonWebTokenError";this.message=t;if(r)this.inner=r};JsonWebTokenError.prototype=Object.create(Error.prototype);JsonWebTokenError.prototype.constructor=JsonWebTokenError;t.exports=JsonWebTokenError},4383:(t,r,n)=>{var i=n(405);var NotBeforeError=function(t,r){i.call(this,t);this.name="NotBeforeError";this.date=r};NotBeforeError.prototype=Object.create(i.prototype);NotBeforeError.prototype.constructor=NotBeforeError;t.exports=NotBeforeError},46637:(t,r,n)=>{var i=n(405);var TokenExpiredError=function(t,r){i.call(this,t);this.name="TokenExpiredError";this.expiredAt=r};TokenExpiredError.prototype=Object.create(i.prototype);TokenExpiredError.prototype.constructor=TokenExpiredError;t.exports=TokenExpiredError},59085:(t,r,n)=>{var i=n(85911);t.exports=i.satisfies(process.version,"^6.12.0 || >=8.0.0")},46098:(t,r,n)=>{var i=n(84098);t.exports=function(t,r){var n=r||Math.floor(Date.now()/1e3);if(typeof t==="string"){var o=i(t);if(typeof o==="undefined"){return}return Math.floor(n+o/1e3)}else if(typeof t==="number"){return n+t}else{return}}},92321:(t,r,n)=>{var i=n(9239);var o=n(21867).Buffer;var a=n(6113);var s=n(11728);var c=n(73837);var u='"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".';var l="secret must be a string or buffer";var d="key must be a string or a buffer";var p="key must be a string, a buffer or an object";var g=typeof a.createPublicKey==="function";if(g){d+=" or a KeyObject";l+="or a KeyObject"}function checkIsPublicKey(t){if(o.isBuffer(t)){return}if(typeof t==="string"){return}if(!g){throw typeError(d)}if(typeof t!=="object"){throw typeError(d)}if(typeof t.type!=="string"){throw typeError(d)}if(typeof t.asymmetricKeyType!=="string"){throw typeError(d)}if(typeof t.export!=="function"){throw typeError(d)}}function checkIsPrivateKey(t){if(o.isBuffer(t)){return}if(typeof t==="string"){return}if(typeof t==="object"){return}throw typeError(p)}function checkIsSecretKey(t){if(o.isBuffer(t)){return}if(typeof t==="string"){return t}if(!g){throw typeError(l)}if(typeof t!=="object"){throw typeError(l)}if(t.type!=="secret"){throw typeError(l)}if(typeof t.export!=="function"){throw typeError(l)}}function fromBase64(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(t){t=t.toString();var r=4-t.length%4;if(r!==4){for(var n=0;n<r;++n){t+="="}}return t.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(t){var r=[].slice.call(arguments,1);var n=c.format.bind(c,t).apply(null,r);return new TypeError(n)}function bufferOrString(t){return o.isBuffer(t)||typeof t==="string"}function normalizeInput(t){if(!bufferOrString(t))t=JSON.stringify(t);return t}function createHmacSigner(t){return function sign(r,n){checkIsSecretKey(n);r=normalizeInput(r);var i=a.createHmac("sha"+t,n);var o=(i.update(r),i.digest("base64"));return fromBase64(o)}}function createHmacVerifier(t){return function verify(r,n,a){var s=createHmacSigner(t)(r,a);return i(o.from(n),o.from(s))}}function createKeySigner(t){return function sign(r,n){checkIsPrivateKey(n);r=normalizeInput(r);var i=a.createSign("RSA-SHA"+t);var o=(i.update(r),i.sign(n,"base64"));return fromBase64(o)}}function createKeyVerifier(t){return function verify(r,n,i){checkIsPublicKey(i);r=normalizeInput(r);n=toBase64(n);var o=a.createVerify("RSA-SHA"+t);o.update(r);return o.verify(i,n,"base64")}}function createPSSKeySigner(t){return function sign(r,n){checkIsPrivateKey(n);r=normalizeInput(r);var i=a.createSign("RSA-SHA"+t);var o=(i.update(r),i.sign({key:n,padding:a.constants.RSA_PKCS1_PSS_PADDING,saltLength:a.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return fromBase64(o)}}function createPSSKeyVerifier(t){return function verify(r,n,i){checkIsPublicKey(i);r=normalizeInput(r);n=toBase64(n);var o=a.createVerify("RSA-SHA"+t);o.update(r);return o.verify({key:i,padding:a.constants.RSA_PKCS1_PSS_PADDING,saltLength:a.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function createECDSASigner(t){var r=createKeySigner(t);return function sign(){var n=r.apply(null,arguments);n=s.derToJose(n,"ES"+t);return n}}function createECDSAVerifer(t){var r=createKeyVerifier(t);return function verify(n,i,o){i=s.joseToDer(i,"ES"+t).toString("base64");var a=r(n,i,o);return a}}function createNoneSigner(){return function sign(){return""}}function createNoneVerifier(){return function verify(t,r){return r===""}}t.exports=function jwa(t){var r={hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner};var n={hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier};var i=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw typeError(u,t);var o=(i[1]||i[3]).toLowerCase();var a=i[2];return{sign:r[o](a),verify:n[o](a)}}},22597:(t,r,n)=>{var i=n(35070);var o=n(63974);var a=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];r.ALGORITHMS=a;r.sign=i.sign;r.verify=o.verify;r.decode=o.decode;r.isValid=o.isValid;r.createSign=function createSign(t){return new i(t)};r.createVerify=function createVerify(t){return new o(t)}},60704:(t,r,n)=>{var i=n(21867).Buffer;var o=n(12781);var a=n(73837);function DataStream(t){this.buffer=null;this.writable=true;this.readable=true;if(!t){this.buffer=i.alloc(0);return this}if(typeof t.pipe==="function"){this.buffer=i.alloc(0);t.pipe(this);return this}if(t.length||typeof t==="object"){this.buffer=t;this.writable=false;process.nextTick(function(){this.emit("end",t);this.readable=false;this.emit("close")}.bind(this));return this}throw new TypeError("Unexpected data type ("+typeof t+")")}a.inherits(DataStream,o);DataStream.prototype.write=function write(t){this.buffer=i.concat([this.buffer,i.from(t)]);this.emit("data",t)};DataStream.prototype.end=function end(t){if(t)this.write(t);this.emit("end",t);this.emit("close");this.writable=false;this.readable=false};t.exports=DataStream},35070:(t,r,n)=>{var i=n(21867).Buffer;var o=n(60704);var a=n(92321);var s=n(12781);var c=n(56206);var u=n(73837);function base64url(t,r){return i.from(t,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSecuredInput(t,r,n){n=n||"utf8";var i=base64url(c(t),"binary");var o=base64url(c(r),n);return u.format("%s.%s",i,o)}function jwsSign(t){var r=t.header;var n=t.payload;var i=t.secret||t.privateKey;var o=t.encoding;var s=a(r.alg);var c=jwsSecuredInput(r,n,o);var l=s.sign(c,i);return u.format("%s.%s",c,l)}function SignStream(t){var r=t.secret||t.privateKey||t.key;var n=new o(r);this.readable=true;this.header=t.header;this.encoding=t.encoding;this.secret=this.privateKey=this.key=n;this.payload=new o(t.payload);this.secret.once("close",function(){if(!this.payload.writable&&this.readable)this.sign()}.bind(this));this.payload.once("close",function(){if(!this.secret.writable&&this.readable)this.sign()}.bind(this))}u.inherits(SignStream,s);SignStream.prototype.sign=function sign(){try{var t=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});this.emit("done",t);this.emit("data",t);this.emit("end");this.readable=false;return t}catch(t){this.readable=false;this.emit("error",t);this.emit("close")}};SignStream.sign=jwsSign;t.exports=SignStream},56206:(t,r,n)=>{var i=n(14300).Buffer;t.exports=function toString(t){if(typeof t==="string")return t;if(typeof t==="number"||i.isBuffer(t))return t.toString();return JSON.stringify(t)}},63974:(t,r,n)=>{var i=n(21867).Buffer;var o=n(60704);var a=n(92321);var s=n(12781);var c=n(56206);var u=n(73837);var l=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}function safeJsonParse(t){if(isObject(t))return t;try{return JSON.parse(t)}catch(t){return undefined}}function headerFromJWS(t){var r=t.split(".",1)[0];return safeJsonParse(i.from(r,"base64").toString("binary"))}function securedInputFromJWS(t){return t.split(".",2).join(".")}function signatureFromJWS(t){return t.split(".")[2]}function payloadFromJWS(t,r){r=r||"utf8";var n=t.split(".")[1];return i.from(n,"base64").toString(r)}function isValidJws(t){return l.test(t)&&!!headerFromJWS(t)}function jwsVerify(t,r,n){if(!r){var i=new Error("Missing algorithm parameter for jws.verify");i.code="MISSING_ALGORITHM";throw i}t=c(t);var o=signatureFromJWS(t);var s=securedInputFromJWS(t);var u=a(r);return u.verify(s,o,n)}function jwsDecode(t,r){r=r||{};t=c(t);if(!isValidJws(t))return null;var n=headerFromJWS(t);if(!n)return null;var i=payloadFromJWS(t);if(n.typ==="JWT"||r.json)i=JSON.parse(i,r.encoding);return{header:n,payload:i,signature:signatureFromJWS(t)}}function VerifyStream(t){t=t||{};var r=t.secret||t.publicKey||t.key;var n=new o(r);this.readable=true;this.algorithm=t.algorithm;this.encoding=t.encoding;this.secret=this.publicKey=this.key=n;this.signature=new o(t.signature);this.secret.once("close",function(){if(!this.signature.writable&&this.readable)this.verify()}.bind(this));this.signature.once("close",function(){if(!this.secret.writable&&this.readable)this.verify()}.bind(this))}u.inherits(VerifyStream,s);VerifyStream.prototype.verify=function verify(){try{var t=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer);var r=jwsDecode(this.signature.buffer,this.encoding);this.emit("done",t,r);this.emit("data",t);this.emit("end");this.readable=false;return t}catch(t){this.readable=false;this.emit("error",t);this.emit("close")}};VerifyStream.decode=jwsDecode;VerifyStream.isValid=isValidJws;VerifyStream.verify=jwsVerify;t.exports=VerifyStream},84098:t=>{var r=1e3;var n=r*60;var i=n*60;var o=i*24;var a=o*7;var s=o*365.25;t.exports=function(t,r){r=r||{};var n=typeof t;if(n==="string"&&t.length>0){return parse(t)}else if(n==="number"&&isFinite(t)){return r.long?fmtLong(t):fmtShort(t)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function parse(t){t=String(t);if(t.length>100){return}var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!c){return}var u=parseFloat(c[1]);var l=(c[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*a;case"days":case"day":case"d":return u*o;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return undefined}}function fmtShort(t){var a=Math.abs(t);if(a>=o){return Math.round(t/o)+"d"}if(a>=i){return Math.round(t/i)+"h"}if(a>=n){return Math.round(t/n)+"m"}if(a>=r){return Math.round(t/r)+"s"}return t+"ms"}function fmtLong(t){var a=Math.abs(t);if(a>=o){return plural(t,a,o,"day")}if(a>=i){return plural(t,a,i,"hour")}if(a>=n){return plural(t,a,n,"minute")}if(a>=r){return plural(t,a,r,"second")}return t+" ms"}function plural(t,r,n,i){var o=r>=n*1.5;return Math.round(t/n)+" "+i+(o?"s":"")}},82022:(t,r,n)=>{var i=n(46098);var o=n(59085);var a=n(22597);var s=n(17931);var c=n(16501);var u=n(21441);var l=n(40298);var d=n(25723);var p=n(25180);var g=n(94499);var v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];if(o){v.splice(3,0,"PS256","PS384","PS512")}var E={expiresIn:{isValid:function(t){return u(t)||p(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return u(t)||p(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return p(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:p,message:'"encoding" must be a string'},issuer:{isValid:p,message:'"issuer" must be a string'},subject:{isValid:p,message:'"subject" must be a string'},jwtid:{isValid:p,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:p,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'}};var S={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function validate(t,r,n,i){if(!d(n)){throw new Error('Expected "'+i+'" to be a plain object.')}Object.keys(n).forEach((function(o){var a=t[o];if(!a){if(!r){throw new Error('"'+o+'" is not allowed in "'+i+'"')}return}if(!a.isValid(n[o])){throw new Error(a.message)}}))}function validateOptions(t){return validate(E,false,t,"options")}function validatePayload(t){return validate(S,true,t,"payload")}var w={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"};var x=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];t.exports=function(t,r,n,o){if(typeof n==="function"){o=n;n={}}else{n=n||{}}var s=typeof t==="object"&&!Buffer.isBuffer(t);var c=Object.assign({alg:n.algorithm||"HS256",typ:s?"JWT":undefined,kid:n.keyid},n.header);function failure(t){if(o){return o(t)}throw t}if(!r&&n.algorithm!=="none"){return failure(new Error("secretOrPrivateKey must have a value"))}if(typeof t==="undefined"){return failure(new Error("payload is required"))}else if(s){try{validatePayload(t)}catch(t){return failure(t)}if(!n.mutatePayload){t=Object.assign({},t)}}else{var u=x.filter((function(t){return typeof n[t]!=="undefined"}));if(u.length>0){return failure(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}}if(typeof t.exp!=="undefined"&&typeof n.expiresIn!=="undefined"){return failure(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'))}if(typeof t.nbf!=="undefined"&&typeof n.notBefore!=="undefined"){return failure(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'))}try{validateOptions(n)}catch(t){return failure(t)}var l=t.iat||Math.floor(Date.now()/1e3);if(n.noTimestamp){delete t.iat}else if(s){t.iat=l}if(typeof n.notBefore!=="undefined"){try{t.nbf=i(n.notBefore,l)}catch(t){return failure(t)}if(typeof t.nbf==="undefined"){return failure(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}}if(typeof n.expiresIn!=="undefined"&&typeof t==="object"){try{t.exp=i(n.expiresIn,l)}catch(t){return failure(t)}if(typeof t.exp==="undefined"){return failure(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}}Object.keys(w).forEach((function(r){var i=w[r];if(typeof n[r]!=="undefined"){if(typeof t[i]!=="undefined"){return failure(new Error('Bad "options.'+r+'" option. The payload already has an "'+i+'" property.'))}t[i]=n[r]}}));var d=n.encoding||"utf8";if(typeof o==="function"){o=o&&g(o);a.createSign({header:c,privateKey:r,payload:t,encoding:d}).once("error",o).once("done",(function(t){o(null,t)}))}else{return a.sign({header:c,payload:t,secret:r,encoding:d})}}},12327:(t,r,n)=>{var i=n(405);var o=n(4383);var a=n(46637);var s=n(53359);var c=n(46098);var u=n(59085);var l=n(22597);var d=["RS256","RS384","RS512","ES256","ES384","ES512"];var p=["RS256","RS384","RS512"];var g=["HS256","HS384","HS512"];if(u){d.splice(3,0,"PS256","PS384","PS512");p.splice(3,0,"PS256","PS384","PS512")}t.exports=function(t,r,n,u){if(typeof n==="function"&&!u){u=n;n={}}if(!n){n={}}n=Object.assign({},n);var v;if(u){v=u}else{v=function(t,r){if(t)throw t;return r}}if(n.clockTimestamp&&typeof n.clockTimestamp!=="number"){return v(new i("clockTimestamp must be a number"))}if(n.nonce!==undefined&&(typeof n.nonce!=="string"||n.nonce.trim()==="")){return v(new i("nonce must be a non-empty string"))}var E=n.clockTimestamp||Math.floor(Date.now()/1e3);if(!t){return v(new i("jwt must be provided"))}if(typeof t!=="string"){return v(new i("jwt must be a string"))}var S=t.split(".");if(S.length!==3){return v(new i("jwt malformed"))}var w;try{w=s(t,{complete:true})}catch(t){return v(t)}if(!w){return v(new i("invalid token"))}var x=w.header;var N;if(typeof r==="function"){if(!u){return v(new i("verify must be called asynchronous if secret or public key is provided as a callback"))}N=r}else{N=function(t,n){return n(null,r)}}return N(x,(function(r,s){if(r){return v(new i("error in secret or public key callback: "+r.message))}var u=S[2].trim()!=="";if(!u&&s){return v(new i("jwt signature is required"))}if(u&&!s){return v(new i("secret or public key must be provided"))}if(!u&&!n.algorithms){n.algorithms=["none"]}if(!n.algorithms){n.algorithms=~s.toString().indexOf("BEGIN CERTIFICATE")||~s.toString().indexOf("BEGIN PUBLIC KEY")?d:~s.toString().indexOf("BEGIN RSA PUBLIC KEY")?p:g}if(!~n.algorithms.indexOf(w.header.alg)){return v(new i("invalid algorithm"))}var N;try{N=l.verify(t,w.header.alg,s)}catch(t){return v(t)}if(!N){return v(new i("invalid signature"))}var P=w.payload;if(typeof P.nbf!=="undefined"&&!n.ignoreNotBefore){if(typeof P.nbf!=="number"){return v(new i("invalid nbf value"))}if(P.nbf>E+(n.clockTolerance||0)){return v(new o("jwt not active",new Date(P.nbf*1e3)))}}if(typeof P.exp!=="undefined"&&!n.ignoreExpiration){if(typeof P.exp!=="number"){return v(new i("invalid exp value"))}if(E>=P.exp+(n.clockTolerance||0)){return v(new a("jwt expired",new Date(P.exp*1e3)))}}if(n.audience){var D=Array.isArray(n.audience)?n.audience:[n.audience];var M=Array.isArray(P.aud)?P.aud:[P.aud];var L=M.some((function(t){return D.some((function(r){return r instanceof RegExp?r.test(t):r===t}))}));if(!L){return v(new i("jwt audience invalid. expected: "+D.join(" or ")))}}if(n.issuer){var U=typeof n.issuer==="string"&&P.iss!==n.issuer||Array.isArray(n.issuer)&&n.issuer.indexOf(P.iss)===-1;if(U){return v(new i("jwt issuer invalid. expected: "+n.issuer))}}if(n.subject){if(P.sub!==n.subject){return v(new i("jwt subject invalid. expected: "+n.subject))}}if(n.jwtid){if(P.jti!==n.jwtid){return v(new i("jwt jwtid invalid. expected: "+n.jwtid))}}if(n.nonce){if(P.nonce!==n.nonce){return v(new i("jwt nonce invalid. expected: "+n.nonce))}}if(n.maxAge){if(typeof P.iat!=="number"){return v(new i("iat required when maxAge is specified"))}var q=c(n.maxAge,P.iat);if(typeof q==="undefined"){return v(new i('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(E>=q+(n.clockTolerance||0)){return v(new a("maxAge exceeded",new Date(q*1e3)))}}if(n.complete===true){var B=w.signature;return v(null,{header:x,payload:P,signature:B})}return v(null,P)}))}},17931:t=>{var r=1/0,n=9007199254740991,i=17976931348623157e292,o=0/0;var a="[object Arguments]",s="[object Function]",c="[object GeneratorFunction]",u="[object String]",l="[object Symbol]";var d=/^\s+|\s+$/g;var p=/^[-+]0x[0-9a-f]+$/i;var g=/^0b[01]+$/i;var v=/^0o[0-7]+$/i;var E=/^(?:0|[1-9]\d*)$/;var S=parseInt;function arrayMap(t,r){var n=-1,i=t?t.length:0,o=Array(i);while(++n<i){o[n]=r(t[n],n,t)}return o}function baseFindIndex(t,r,n,i){var o=t.length,a=n+(i?1:-1);while(i?a--:++a<o){if(r(t[a],a,t)){return a}}return-1}function baseIndexOf(t,r,n){if(r!==r){return baseFindIndex(t,baseIsNaN,n)}var i=n-1,o=t.length;while(++i<o){if(t[i]===r){return i}}return-1}function baseIsNaN(t){return t!==t}function baseTimes(t,r){var n=-1,i=Array(t);while(++n<t){i[n]=r(n)}return i}function baseValues(t,r){return arrayMap(r,(function(r){return t[r]}))}function overArg(t,r){return function(n){return t(r(n))}}var w=Object.prototype;var x=w.hasOwnProperty;var N=w.toString;var P=w.propertyIsEnumerable;var D=overArg(Object.keys,Object),M=Math.max;function arrayLikeKeys(t,r){var n=L(t)||isArguments(t)?baseTimes(t.length,String):[];var i=n.length,o=!!i;for(var a in t){if((r||x.call(t,a))&&!(o&&(a=="length"||isIndex(a,i)))){n.push(a)}}return n}function baseKeys(t){if(!isPrototype(t)){return D(t)}var r=[];for(var n in Object(t)){if(x.call(t,n)&&n!="constructor"){r.push(n)}}return r}function isIndex(t,r){r=r==null?n:r;return!!r&&(typeof t=="number"||E.test(t))&&(t>-1&&t%1==0&&t<r)}function isPrototype(t){var r=t&&t.constructor,n=typeof r=="function"&&r.prototype||w;return t===n}function includes(t,r,n,i){t=isArrayLike(t)?t:values(t);n=n&&!i?toInteger(n):0;var o=t.length;if(n<0){n=M(o+n,0)}return isString(t)?n<=o&&t.indexOf(r,n)>-1:!!o&&baseIndexOf(t,r,n)>-1}function isArguments(t){return isArrayLikeObject(t)&&x.call(t,"callee")&&(!P.call(t,"callee")||N.call(t)==a)}var L=Array.isArray;function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction(t)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function isFunction(t){var r=isObject(t)?N.call(t):"";return r==s||r==c}function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}function isObject(t){var r=typeof t;return!!t&&(r=="object"||r=="function")}function isObjectLike(t){return!!t&&typeof t=="object"}function isString(t){return typeof t=="string"||!L(t)&&isObjectLike(t)&&N.call(t)==u}function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&N.call(t)==l}function toFinite(t){if(!t){return t===0?t:0}t=toNumber(t);if(t===r||t===-r){var n=t<0?-1:1;return n*i}return t===t?t:0}function toInteger(t){var r=toFinite(t),n=r%1;return r===r?n?r-n:r:0}function toNumber(t){if(typeof t=="number"){return t}if(isSymbol(t)){return o}if(isObject(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject(r)?r+"":r}if(typeof t!="string"){return t===0?t:+t}t=t.replace(d,"");var n=g.test(t);return n||v.test(t)?S(t.slice(2),n?2:8):p.test(t)?o:+t}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function values(t){return t?baseValues(t,keys(t)):[]}t.exports=includes},16501:t=>{var r="[object Boolean]";var n=Object.prototype;var i=n.toString;function isBoolean(t){return t===true||t===false||isObjectLike(t)&&i.call(t)==r}function isObjectLike(t){return!!t&&typeof t=="object"}t.exports=isBoolean},21441:t=>{var r=1/0,n=17976931348623157e292,i=0/0;var o="[object Symbol]";var a=/^\s+|\s+$/g;var s=/^[-+]0x[0-9a-f]+$/i;var c=/^0b[01]+$/i;var u=/^0o[0-7]+$/i;var l=parseInt;var d=Object.prototype;var p=d.toString;function isInteger(t){return typeof t=="number"&&t==toInteger(t)}function isObject(t){var r=typeof t;return!!t&&(r=="object"||r=="function")}function isObjectLike(t){return!!t&&typeof t=="object"}function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&p.call(t)==o}function toFinite(t){if(!t){return t===0?t:0}t=toNumber(t);if(t===r||t===-r){var i=t<0?-1:1;return i*n}return t===t?t:0}function toInteger(t){var r=toFinite(t),n=r%1;return r===r?n?r-n:r:0}function toNumber(t){if(typeof t=="number"){return t}if(isSymbol(t)){return i}if(isObject(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject(r)?r+"":r}if(typeof t!="string"){return t===0?t:+t}t=t.replace(a,"");var n=c.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):s.test(t)?i:+t}t.exports=isInteger},40298:t=>{var r="[object Number]";var n=Object.prototype;var i=n.toString;function isObjectLike(t){return!!t&&typeof t=="object"}function isNumber(t){return typeof t=="number"||isObjectLike(t)&&i.call(t)==r}t.exports=isNumber},25723:t=>{var r="[object Object]";function isHostObject(t){var r=false;if(t!=null&&typeof t.toString!="function"){try{r=!!(t+"")}catch(t){}}return r}function overArg(t,r){return function(n){return t(r(n))}}var n=Function.prototype,i=Object.prototype;var o=n.toString;var a=i.hasOwnProperty;var s=o.call(Object);var c=i.toString;var u=overArg(Object.getPrototypeOf,Object);function isObjectLike(t){return!!t&&typeof t=="object"}function isPlainObject(t){if(!isObjectLike(t)||c.call(t)!=r||isHostObject(t)){return false}var n=u(t);if(n===null){return true}var i=a.call(n,"constructor")&&n.constructor;return typeof i=="function"&&i instanceof i&&o.call(i)==s}t.exports=isPlainObject},25180:t=>{var r="[object String]";var n=Object.prototype;var i=n.toString;var o=Array.isArray;function isObjectLike(t){return!!t&&typeof t=="object"}function isString(t){return typeof t=="string"||!o(t)&&isObjectLike(t)&&i.call(t)==r}t.exports=isString},94499:t=>{var r="Expected a function";var n=1/0,i=17976931348623157e292,o=0/0;var a="[object Symbol]";var s=/^\s+|\s+$/g;var c=/^[-+]0x[0-9a-f]+$/i;var u=/^0b[01]+$/i;var l=/^0o[0-7]+$/i;var d=parseInt;var p=Object.prototype;var g=p.toString;function before(t,n){var i;if(typeof n!="function"){throw new TypeError(r)}t=toInteger(t);return function(){if(--t>0){i=n.apply(this,arguments)}if(t<=1){n=undefined}return i}}function once(t){return before(2,t)}function isObject(t){var r=typeof t;return!!t&&(r=="object"||r=="function")}function isObjectLike(t){return!!t&&typeof t=="object"}function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&g.call(t)==a}function toFinite(t){if(!t){return t===0?t:0}t=toNumber(t);if(t===n||t===-n){var r=t<0?-1:1;return r*i}return t===t?t:0}function toInteger(t){var r=toFinite(t),n=r%1;return r===r?n?r-n:r:0}function toNumber(t){if(typeof t=="number"){return t}if(isSymbol(t)){return o}if(isObject(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=isObject(r)?r+"":r}if(typeof t!="string"){return t===0?t:+t}t=t.replace(s,"");var n=u.test(t);return n||l.test(t)?d(t.slice(2),n?2:8):c.test(t)?o:+t}t.exports=once},47426:(t,r,n)=>{
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
t.exports=n(53765)},43583:(t,r,n)=>{"use strict";
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var i=n(47426);var o=n(71017).extname;var a=/^\s*([^;\s]*)(?:;|\s|$)/;var s=/^text\//i;r.charset=charset;r.charsets={lookup:charset};r.contentType=contentType;r.extension=extension;r.extensions=Object.create(null);r.lookup=lookup;r.types=Object.create(null);populateMaps(r.extensions,r.types);function charset(t){if(!t||typeof t!=="string"){return false}var r=a.exec(t);var n=r&&i[r[1].toLowerCase()];if(n&&n.charset){return n.charset}if(r&&s.test(r[1])){return"UTF-8"}return false}function contentType(t){if(!t||typeof t!=="string"){return false}var n=t.indexOf("/")===-1?r.lookup(t):t;if(!n){return false}if(n.indexOf("charset")===-1){var i=r.charset(n);if(i)n+="; charset="+i.toLowerCase()}return n}function extension(t){if(!t||typeof t!=="string"){return false}var n=a.exec(t);var i=n&&r.extensions[n[1].toLowerCase()];if(!i||!i.length){return false}return i[0]}function lookup(t){if(!t||typeof t!=="string"){return false}var n=o("x."+t).toLowerCase().substr(1);if(!n){return false}return r.types[n]||false}function populateMaps(t,r){var n=["nginx","apache",undefined,"iana"];Object.keys(i).forEach((function forEachMimeType(o){var a=i[o];var s=a.extensions;if(!s||!s.length){return}t[o]=s;for(var c=0;c<s.length;c++){var u=s[c];if(r[u]){var l=n.indexOf(i[r[u]].source);var d=n.indexOf(a.source);if(r[u]!=="application/octet-stream"&&(l>d||l===d&&r[u].substr(0,12)==="application/")){continue}}r[u]=o}}))}},80900:t=>{var r=1e3;var n=r*60;var i=n*60;var o=i*24;var a=o*7;var s=o*365.25;t.exports=function(t,r){r=r||{};var n=typeof t;if(n==="string"&&t.length>0){return parse(t)}else if(n==="number"&&isFinite(t)){return r.long?fmtLong(t):fmtShort(t)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function parse(t){t=String(t);if(t.length>100){return}var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!c){return}var u=parseFloat(c[1]);var l=(c[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*a;case"days":case"day":case"d":return u*o;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return undefined}}function fmtShort(t){var a=Math.abs(t);if(a>=o){return Math.round(t/o)+"d"}if(a>=i){return Math.round(t/i)+"h"}if(a>=n){return Math.round(t/n)+"m"}if(a>=r){return Math.round(t/r)+"s"}return t+"ms"}function fmtLong(t){var a=Math.abs(t);if(a>=o){return plural(t,a,o,"day")}if(a>=i){return plural(t,a,i,"hour")}if(a>=n){return plural(t,a,n,"minute")}if(a>=r){return plural(t,a,r,"second")}return t+" ms"}function plural(t,r,n,i){var o=r>=n*1.5;return Math.round(t/n)+" "+i+(o?"s":"")}},25018:(t,r,n)=>{t.exports=n(37197)},85558:(t,r,n)=>{"use strict";const{EventEmitter:i}=n(82361);const o=n(38237)("mssql:base");const{parseSqlConnectionString:a}=n(31736);const s=n(84819);const{IDS:c}=n(14178);const u=n(86485);const l=n(67636);const d=n(83189);class ConnectionPool extends i{constructor(t,r){super();c.add(this,"ConnectionPool");o("pool(%d): created",c.get(this));this._connectStack=[];this._closeStack=[];this._connected=false;this._connecting=false;this._healthy=false;if(typeof t==="string"){try{this.config=this.constructor.parseConnectionString(t)}catch(t){if(typeof r==="function"){return setImmediate(r,t)}throw t}}else{this.config=d(t)}this.config.port=this.config.port||1433;this.config.options=this.config.options||{};this.config.stream=this.config.stream||false;this.config.parseJSON=this.config.parseJSON||false;this.config.arrayRowMode=this.config.arrayRowMode||false;this.config.validateConnection="validateConnection"in this.config?this.config.validateConnection:true;if(/^(.*)\\(.*)$/.exec(this.config.server)){this.config.server=RegExp.$1;this.config.options.instanceName=RegExp.$2}if(typeof r==="function"){this.connect(r)}}get connected(){return this._connected}get connecting(){return this._connecting}get healthy(){return this._healthy}static parseConnectionString(t){return this._parseConnectionString(t)}static _parseConnectionString(t){const r=a(t,true,true);return Object.entries(r).reduce(((t,[r,n])=>{switch(r){case"application name":break;case"applicationintent":Object.assign(t.options,{readOnlyIntent:n==="readonly"});break;case"asynchronous processing":break;case"attachdbfilename":break;case"authentication":break;case"column encryption setting":break;case"connection timeout":Object.assign(t,{connectionTimeout:n*1e3});break;case"connection lifetime":break;case"connectretrycount":break;case"connectretryinterval":Object.assign(t.options,{connectionRetryInterval:n*1e3});break;case"context connection":break;case"current language":Object.assign(t.options,{language:n});break;case"data source":{let r=n;let i;let o=1433;if(/^np:/i.test(r)){throw new Error("Connection via Named Pipes is not supported.")}if(/^tcp:/i.test(r)){r=r.substr(4)}if(/^(.*)\\(.*)$/.exec(r)){r=RegExp.$1;i=RegExp.$2}if(/^(.*),(.*)$/.exec(r)){r=RegExp.$1.trim();o=parseInt(RegExp.$2.trim(),10)}if(r==="."||r==="(.)"||r.toLowerCase()==="(localdb)"||r.toLowerCase()==="(local)"){r="localhost"}Object.assign(t,{port:o,server:r});Object.assign(t.options,{instanceName:i});break}case"encrypt":Object.assign(t.options,{encrypt:!!n});break;case"enlist":break;case"failover partner":break;case"initial catalog":Object.assign(t,{database:n});break;case"integrated security":break;case"max pool size":Object.assign(t.pool,{max:n});break;case"min pool size":Object.assign(t.pool,{min:n});break;case"multipleactiveresultsets":break;case"multisubnetfailover":Object.assign(t.options,{multiSubnetFailover:n});break;case"network library":break;case"packet size":Object.assign(t.options,{packetSize:n});break;case"password":Object.assign(t,{password:n});break;case"persist security info":break;case"poolblockingperiod":break;case"pooling":break;case"replication":break;case"transaction binding":Object.assign(t.options,{enableImplicitTransactions:n.toLowerCase()==="implicit unbind"});break;case"transparentnetworkipresolution":break;case"trustservercertificate":Object.assign(t.options,{trustServerCertificate:n});break;case"type system version":break;case"user id":{let r=n;let i;if(/^(.*)\\(.*)$/.exec(r)){i=RegExp.$1;r=RegExp.$2}Object.assign(t,{domain:i,user:r});break}case"user instance":break;case"workstation id":Object.assign(t.options,{workstationId:n});break;case"request timeout":Object.assign(t,{requestTimeout:parseInt(n,10)});break;case"stream":Object.assign(t,{stream:!!n});break;case"useutc":Object.assign(t.options,{useUTC:!!n});break;case"parsejson":Object.assign(t,{parseJSON:!!n});break}return t}),{options:{},pool:{}})}acquire(t,r){const n=l.Promise.resolve(this._acquire().promise).catch((t=>{this.emit("error",t);throw t}));if(typeof r==="function"){n.then((t=>r(null,t,this.config))).catch(r);return this}return n}_acquire(){if(!this.pool){return l.Promise.reject(new u("Connection not yet open.","ENOTOPEN"))}else if(this.pool.destroyed){return l.Promise.reject(new u("Connection is closing","ENOTOPEN"))}return this.pool.acquire()}release(t){o("connection(%d): released",c.get(t));if(this.pool){this.pool.release(t)}return this}connect(t){if(typeof t==="function"){this._connect(t);return this}return new l.Promise(((t,r)=>this._connect((n=>{if(n)return r(n);t(this)}))))}_connect(t){if(this._connected){o("pool(%d): already connected, executing connect callback immediately",c.get(this));return setImmediate(t,null,this)}this._connectStack.push(t);if(this._connecting){return}this._connecting=true;o("pool(%d): connecting",c.get(this));this._poolCreate().then((t=>{o("pool(%d): connected",c.get(this));this._healthy=true;return this._poolDestroy(t).then((()=>{this.pool=new s.Pool(Object.assign({create:()=>this._poolCreate().then((t=>{this._healthy=true;return t})).catch((t=>{if(this.pool.numUsed()+this.pool.numFree()<=0){this._healthy=false}throw t})),validate:this._poolValidate.bind(this),destroy:this._poolDestroy.bind(this),max:10,min:0,idleTimeoutMillis:3e4,propagateCreateError:true},this.config.pool));this._connecting=false;this._connected=true}))})).then((()=>{this._connectStack.forEach((t=>{setImmediate(t,null,this)}))})).catch((t=>{this._connecting=false;this._connectStack.forEach((r=>{setImmediate(r,t)}))})).then((()=>{this._connectStack=[]}))}get size(){return this.pool.numFree()+this.pool.numUsed()+this.pool.numPendingCreates()}get available(){return this.pool.numFree()}get pending(){return this.pool.numPendingAcquires()}get borrowed(){return this.pool.numUsed()}close(t){if(typeof t==="function"){this._close(t);return this}return new l.Promise(((t,r)=>{this._close((n=>{if(n)return r(n);t(this)}))}))}_close(t){if(this._connecting){o("pool(%d): close called while connecting",c.get(this));setImmediate(t,new u("Cannot close a pool while it is connecting"))}if(!this.pool){o("pool(%d): already closed, executing close callback immediately",c.get(this));return setImmediate(t,null)}this._closeStack.push(t);if(this.pool.destroyed)return;this._connecting=this._connected=this._healthy=false;this.pool.destroy().then((()=>{o("pool(%d): pool closed, removing pool reference and executing close callbacks",c.get(this));this.pool=null;this._closeStack.forEach((t=>{setImmediate(t,null)}))})).catch((t=>{this.pool=null;this._closeStack.forEach((r=>{setImmediate(r,t)}))})).then((()=>{this._closeStack=[]}))}request(){return new l.driver.Request(this)}transaction(){return new l.driver.Transaction(this)}query(){if(typeof arguments[0]==="string"){return new l.driver.Request(this).query(arguments[0],arguments[1])}const t=Array.prototype.slice.call(arguments);const r=t.shift();return new l.driver.Request(this)._template(r,t,"query")}batch(){if(typeof arguments[0]==="string"){return new l.driver.Request(this).batch(arguments[0],arguments[1])}const t=Array.prototype.slice.call(arguments);const r=t.shift();return new l.driver.Request(this)._template(r,t,"batch")}}t.exports=ConnectionPool},26042:(t,r,n)=>{"use strict";const i=n(85558);const o=n(72919);const a=n(65225);const s=n(2555);const{ConnectionError:c,TransactionError:u,RequestError:l,PreparedStatementError:d,MSSQLError:p}=n(25903);const g=n(67636);const v=n(67417);const E=n(62202);const{TYPES:S}=n(2013);const{connect:w,close:x,on:N,off:P,removeListener:D,query:M,batch:L}=n(89105);t.exports={ConnectionPool:i,Transaction:s,Request:a,PreparedStatement:o,ConnectionError:c,TransactionError:u,RequestError:l,PreparedStatementError:d,MSSQLError:p,driver:g.driver,exports:{ConnectionError:c,TransactionError:u,RequestError:l,PreparedStatementError:d,MSSQLError:p,Table:v,ISOLATION_LEVEL:E,TYPES:S,MAX:65535,map:g.map,getTypeByValue:g.getTypeByValue,connect:w,close:x,on:N,removeListener:D,off:P,query:M,batch:L}};Object.defineProperty(t.exports,"Promise",{enumerable:true,get:()=>g.Promise,set:t=>{g.Promise=t}});Object.defineProperty(t.exports,"valueHandler",{enumerable:true,value:g.valueHandler,writable:false,configurable:false});for(const r in S){const n=S[r];t.exports.exports[r]=n;t.exports.exports[r.toUpperCase()]=n}},72919:(t,r,n)=>{"use strict";const i=n(38237)("mssql:base");const{EventEmitter:o}=n(82361);const{IDS:a,objectHasProperty:s}=n(14178);const c=n(89105);const{TransactionError:u,PreparedStatementError:l}=n(25903);const d=n(67636);const{TYPES:p,declare:g}=n(2013);class PreparedStatement extends o{constructor(t){super();a.add(this,"PreparedStatement");i("ps(%d): created",a.get(this));this.parent=t||c.pool;this._handle=0;this.prepared=false;this.parameters={}}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire(t,r){if(!this._acquiredConnection){setImmediate(r,new l("Statement is not prepared. Call prepare() first.","ENOTPREPARED"));return this}if(this._activeRequest){setImmediate(r,new u("Can't acquire connection for the request. There is another request in progress.","EREQINPROG"));return this}this._activeRequest=t;setImmediate(r,null,this._acquiredConnection,this._acquiredConfig);return this}release(t){if(t===this._acquiredConnection){this._activeRequest=null}return this}input(t,r){if(/(--| |\/\*|\*\/|')/.test(t)){throw new l(`SQL injection warning for param '${t}'`,"EINJECT")}if(arguments.length<2){throw new l("Invalid number of arguments. 2 arguments expected.","EARGS")}if(r instanceof Function){r=r()}if(s(this.parameters,t)){throw new l(`The parameter name ${t} has already been declared. Parameter names must be unique`,"EDUPEPARAM")}this.parameters[t]={name:t,type:r.type,io:1,length:r.length,scale:r.scale,precision:r.precision,tvpType:r.tvpType};return this}replaceInput(t,r,n){delete this.parameters[t];return this.input(t,r,n)}output(t,r){if(/(--| |\/\*|\*\/|')/.test(t)){throw new l(`SQL injection warning for param '${t}'`,"EINJECT")}if(arguments.length<2){throw new l("Invalid number of arguments. 2 arguments expected.","EARGS")}if(r instanceof Function)r=r();if(s(this.parameters,t)){throw new l(`The parameter name ${t} has already been declared. Parameter names must be unique`,"EDUPEPARAM")}this.parameters[t]={name:t,type:r.type,io:2,length:r.length,scale:r.scale,precision:r.precision};return this}replaceOutput(t,r){delete this.parameters[t];return this.output(t,r)}prepare(t,r){if(typeof r==="function"){this._prepare(t,r);return this}return new d.Promise(((r,n)=>{this._prepare(t,(t=>{if(t)return n(t);r(this)}))}))}_prepare(t,r){i("ps(%d): prepare",a.get(this));if(typeof t==="function"){r=t;t=undefined}if(this.prepared){return setImmediate(r,new l("Statement is already prepared.","EALREADYPREPARED"))}this.statement=t||this.statement;this.parent.acquire(this,((t,n,o)=>{if(t)return r(t);this._acquiredConnection=n;this._acquiredConfig=o;const c=new d.driver.Request(this);c.stream=false;c.output("handle",p.Int);c.input("params",p.NVarChar,(()=>{const t=[];for(const r in this.parameters){if(!s(this.parameters,r)){continue}const n=this.parameters[r];t.push(`@${r} ${g(n.type,n)}${n.io===2?" output":""}`)}return t})().join(","));c.input("stmt",p.NVarChar,this.statement);c.execute("sp_prepare",((t,n)=>{if(t){this.parent.release(this._acquiredConnection);this._acquiredConnection=null;this._acquiredConfig=null;return r(t)}i("ps(%d): prepared",a.get(this));this._handle=n.output.handle;this.prepared=true;r(null)}))}))}execute(t,r){if(this.stream||typeof r==="function"){return this._execute(t,r)}return new d.Promise(((r,n)=>{this._execute(t,((t,i)=>{if(t)return n(t);r(i)}))}))}_execute(t,r){const n=new d.driver.Request(this);n.stream=this.stream;n.arrayRowMode=this.arrayRowMode;n.input("handle",p.Int,this._handle);for(const r in this.parameters){if(!s(this.parameters,r)){continue}const i=this.parameters[r];n.parameters[r]={name:r,type:i.type,io:i.io,value:t[r],length:i.length,scale:i.scale,precision:i.precision}}n.execute("sp_execute",((t,n)=>{if(t)return r(t);r(null,n)}));return n}unprepare(t){if(typeof t==="function"){this._unprepare(t);return this}return new d.Promise(((t,r)=>{this._unprepare((n=>{if(n)return r(n);t()}))}))}_unprepare(t){i("ps(%d): unprepare",a.get(this));if(!this.prepared){return setImmediate(t,new l("Statement is not prepared. Call prepare() first.","ENOTPREPARED"))}if(this._activeRequest){return setImmediate(t,new u("Can't unprepare the statement. There is a request in progress.","EREQINPROG"))}const r=new d.driver.Request(this);r.stream=false;r.input("handle",p.Int,this._handle);r.execute("sp_unprepare",(r=>{if(r)return t(r);this.parent.release(this._acquiredConnection);this._acquiredConnection=null;this._acquiredConfig=null;this._handle=0;this.prepared=false;i("ps(%d): unprepared",a.get(this));return t(null)}))}}t.exports=PreparedStatement},65225:(t,r,n)=>{"use strict";const i=n(38237)("mssql:base");const{EventEmitter:o}=n(82361);const{Readable:a}=n(12781);const{IDS:s,objectHasProperty:c}=n(14178);const u=n(89105);const{RequestError:l,ConnectionError:d}=n(25903);const{TYPES:p}=n(2013);const g=n(67636);class Request extends o{constructor(t){super();s.add(this,"Request");i("request(%d): created",s.get(this));this.canceled=false;this._paused=false;this.parent=t||u.pool;this.parameters={};this.stream=null;this.arrayRowMode=null}get paused(){return this._paused}template(){const t=Array.prototype.slice.call(arguments);const r=t.shift();return this._template(r,t)}_template(t,r,n){const i=[t[0]];for(let n=0;n<r.length;n++){const o=r[n];if(Array.isArray(o)){for(let t=0;t<o.length;t++){this.input(`param${n+1}_${t}`,o[t]);i.push(`@param${n+1}_${t}`);if(t<o.length-1){i.push(", ")}}i.push(t[n+1])}else{this.input(`param${n+1}`,o);i.push(`@param${n+1}`,t[n+1])}}if(n){return this[n](i.join(""))}else{return i.join("")}}input(t,r,n){if(/(--| |\/\*|\*\/|')/.test(t)){throw new l(`SQL injection warning for param '${t}'`,"EINJECT")}if(arguments.length<2){throw new l("Invalid number of arguments. At least 2 arguments expected.","EARGS")}else if(arguments.length===2){n=r;r=g.getTypeByValue(n)}if(n&&typeof n.valueOf==="function"&&!(n instanceof Date))n=n.valueOf();if(n===undefined)n=null;if(typeof n==="number"&&isNaN(n))n=null;if(r instanceof Function)r=r();if(c(this.parameters,t)){throw new l(`The parameter name ${t} has already been declared. Parameter names must be unique`,"EDUPEPARAM")}this.parameters[t]={name:t,type:r.type,io:1,value:n,length:r.length,scale:r.scale,precision:r.precision,tvpType:r.tvpType};return this}replaceInput(t,r,n){delete this.parameters[t];return this.input(t,r,n)}output(t,r,n){if(!r){r=p.NVarChar}if(/(--| |\/\*|\*\/|')/.test(t)){throw new l(`SQL injection warning for param '${t}'`,"EINJECT")}if(r===p.Text||r===p.NText||r===p.Image){throw new l("Deprecated types (Text, NText, Image) are not supported as OUTPUT parameters.","EDEPRECATED")}if(n&&typeof n.valueOf==="function"&&!(n instanceof Date))n=n.valueOf();if(n===undefined)n=null;if(typeof n==="number"&&isNaN(n))n=null;if(r instanceof Function)r=r();if(c(this.parameters,t)){throw new l(`The parameter name ${t} has already been declared. Parameter names must be unique`,"EDUPEPARAM")}this.parameters[t]={name:t,type:r.type,io:2,value:n,length:r.length,scale:r.scale,precision:r.precision};return this}replaceOutput(t,r,n){delete this.parameters[t];return this.output(t,r,n)}batch(t,r){if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;this.rowsAffected=0;if(typeof r==="function"){this._batch(t,((t,n,i,o)=>{if(this.stream){if(t)this.emit("error",t);t=null;this.emit("done",{output:i,rowsAffected:o})}if(t)return r(t);r(null,{recordsets:n,recordset:n&&n[0],output:i,rowsAffected:o})}));return this}if(typeof t==="object"){const r=Array.prototype.slice.call(arguments);const n=r.shift();t=this._template(n,r)}return new g.Promise(((r,n)=>{this._batch(t,((t,i,o,a)=>{if(this.stream){if(t)this.emit("error",t);t=null;this.emit("done",{output:o,rowsAffected:a})}if(t)return n(t);r({recordsets:i,recordset:i&&i[0],output:o,rowsAffected:a})}))}))}_batch(t,r){if(!this.parent){return setImmediate(r,new l("No connection is specified for that request.","ENOCONN"))}if(!this.parent.connected){return setImmediate(r,new d("Connection is closed.","ECONNCLOSED"))}this.canceled=false;setImmediate(r)}bulk(t,r,n){if(typeof r==="function"){n=r;r={}}else if(typeof r==="undefined"){r={}}if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;if(this.stream||typeof n==="function"){this._bulk(t,r,((t,r)=>{if(this.stream){if(t)this.emit("error",t);return this.emit("done",{rowsAffected:r})}if(t)return n(t);n(null,{rowsAffected:r})}));return this}return new g.Promise(((n,i)=>{this._bulk(t,r,((t,r)=>{if(t)return i(t);n({rowsAffected:r})}))}))}_bulk(t,r,n){if(!this.parent){return setImmediate(n,new l("No connection is specified for that request.","ENOCONN"))}if(!this.parent.connected){return setImmediate(n,new d("Connection is closed.","ECONNCLOSED"))}this.canceled=false;setImmediate(n)}toReadableStream(t={}){this.stream=true;this.pause();const r=new a({...t,objectMode:true,read:()=>{this.resume()}});this.on("row",(t=>{if(!r.push(t)){this.pause()}}));this.on("error",(t=>{r.emit("error",t)}));this.on("done",(()=>{r.push(null)}));return r}pipe(t){const r=this.toReadableStream();return r.pipe(t)}query(t,r){if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;this.rowsAffected=0;if(typeof r==="function"){this._query(t,((t,n,i,o,a)=>{if(this.stream){if(t)this.emit("error",t);t=null;this.emit("done",{output:i,rowsAffected:o})}if(t)return r(t);const s={recordsets:n,recordset:n&&n[0],output:i,rowsAffected:o};if(this.arrayRowMode)s.columns=a;r(null,s)}));return this}if(typeof t==="object"){const r=Array.prototype.slice.call(arguments);const n=r.shift();t=this._template(n,r)}return new g.Promise(((r,n)=>{this._query(t,((t,i,o,a,s)=>{if(this.stream){if(t)this.emit("error",t);t=null;this.emit("done",{output:o,rowsAffected:a})}if(t)return n(t);const c={recordsets:i,recordset:i&&i[0],output:o,rowsAffected:a};if(this.arrayRowMode)c.columns=s;r(c)}))}))}_query(t,r){if(!this.parent){return setImmediate(r,new l("No connection is specified for that request.","ENOCONN"))}if(!this.parent.connected){return setImmediate(r,new d("Connection is closed.","ECONNCLOSED"))}this.canceled=false;setImmediate(r)}execute(t,r){if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;this.rowsAffected=0;if(typeof r==="function"){this._execute(t,((t,n,i,o,a,s)=>{if(this.stream){if(t)this.emit("error",t);t=null;this.emit("done",{output:i,rowsAffected:a,returnValue:o})}if(t)return r(t);const c={recordsets:n,recordset:n&&n[0],output:i,rowsAffected:a,returnValue:o};if(this.arrayRowMode)c.columns=s;r(null,c)}));return this}return new g.Promise(((r,n)=>{this._execute(t,((t,i,o,a,s,c)=>{if(this.stream){if(t)this.emit("error",t);t=null;this.emit("done",{output:o,rowsAffected:s,returnValue:a})}if(t)return n(t);const u={recordsets:i,recordset:i&&i[0],output:o,rowsAffected:s,returnValue:a};if(this.arrayRowMode)u.columns=c;r(u)}))}))}_execute(t,r){if(!this.parent){return setImmediate(r,new l("No connection is specified for that request.","ENOCONN"))}if(!this.parent.connected){return setImmediate(r,new d("Connection is closed.","ECONNCLOSED"))}this.canceled=false;setImmediate(r)}cancel(){this._cancel();return true}_cancel(){this.canceled=true}pause(){if(this.stream){this._pause();return true}return false}_pause(){this._paused=true}resume(){if(this.stream){this._resume();return true}return false}_resume(){this._paused=false}_setCurrentRequest(t){this._currentRequest=t;if(this._paused){this.pause()}return this}}t.exports=Request},2555:(t,r,n)=>{"use strict";const i=n(38237)("mssql:base");const{EventEmitter:o}=n(82361);const{IDS:a}=n(14178);const s=n(89105);const{TransactionError:c}=n(25903);const u=n(67636);const l=n(62202);class Transaction extends o{constructor(t){super();a.add(this,"Transaction");i("transaction(%d): created",a.get(this));this.parent=t||s.pool;this.isolationLevel=Transaction.defaultIsolationLevel;this.name=""}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire(t,r){if(!this._acquiredConnection){setImmediate(r,new c("Transaction has not begun. Call begin() first.","ENOTBEGUN"));return this}if(this._activeRequest){setImmediate(r,new c("Can't acquire connection for the request. There is another request in progress.","EREQINPROG"));return this}this._activeRequest=t;setImmediate(r,null,this._acquiredConnection,this._acquiredConfig);return this}release(t){if(t===this._acquiredConnection){this._activeRequest=null}return this}begin(t,r){if(t instanceof Function){r=t;t=undefined}if(typeof r==="function"){this._begin(t,(t=>{if(!t){this.emit("begin")}r(t)}));return this}return new u.Promise(((r,n)=>{this._begin(t,(t=>{if(t)return n(t);this.emit("begin");r(this)}))}))}_begin(t,r){if(this._acquiredConnection){return setImmediate(r,new c("Transaction has already begun.","EALREADYBEGUN"))}this._aborted=false;this._rollbackRequested=false;if(t){if(Object.keys(l).some((r=>l[r]===t))){this.isolationLevel=t}else{throw new c("Invalid isolation level.")}}setImmediate(r)}commit(t){if(typeof t==="function"){this._commit((r=>{if(!r){this.emit("commit")}t(r)}));return this}return new u.Promise(((t,r)=>{this._commit((n=>{if(n)return r(n);this.emit("commit");t()}))}))}_commit(t){if(this._aborted){return setImmediate(t,new c("Transaction has been aborted.","EABORT"))}if(!this._acquiredConnection){return setImmediate(t,new c("Transaction has not begun. Call begin() first.","ENOTBEGUN"))}if(this._activeRequest){return setImmediate(t,new c("Can't commit transaction. There is a request in progress.","EREQINPROG"))}setImmediate(t)}request(){return new u.driver.Request(this)}rollback(t){if(typeof t==="function"){this._rollback((r=>{if(!r){this.emit("rollback",this._aborted)}t(r)}));return this}return new u.Promise(((t,r)=>this._rollback((n=>{if(n)return r(n);this.emit("rollback",this._aborted);t()}))))}_rollback(t){if(this._aborted){return setImmediate(t,new c("Transaction has been aborted.","EABORT"))}if(!this._acquiredConnection){return setImmediate(t,new c("Transaction has not begun. Call begin() first.","ENOTBEGUN"))}if(this._activeRequest){return setImmediate(t,new c("Can't rollback transaction. There is a request in progress.","EREQINPROG"))}this._rollbackRequested=true;setImmediate(t)}}Transaction.defaultIsolationLevel=l.READ_COMMITTED;t.exports=Transaction},2013:(t,r,n)=>{"use strict";const i=n(14178).objectHasProperty;const o=Symbol.for("nodejs.util.inspect.custom");const a={VarChar(t){return{type:a.VarChar,length:t}},NVarChar(t){return{type:a.NVarChar,length:t}},Text(){return{type:a.Text}},Int(){return{type:a.Int}},BigInt(){return{type:a.BigInt}},TinyInt(){return{type:a.TinyInt}},SmallInt(){return{type:a.SmallInt}},Bit(){return{type:a.Bit}},Float(){return{type:a.Float}},Numeric(t,r){return{type:a.Numeric,precision:t,scale:r}},Decimal(t,r){return{type:a.Decimal,precision:t,scale:r}},Real(){return{type:a.Real}},Date(){return{type:a.Date}},DateTime(){return{type:a.DateTime}},DateTime2(t){return{type:a.DateTime2,scale:t}},DateTimeOffset(t){return{type:a.DateTimeOffset,scale:t}},SmallDateTime(){return{type:a.SmallDateTime}},Time(t){return{type:a.Time,scale:t}},UniqueIdentifier(){return{type:a.UniqueIdentifier}},SmallMoney(){return{type:a.SmallMoney}},Money(){return{type:a.Money}},Binary(t){return{type:a.Binary,length:t}},VarBinary(t){return{type:a.VarBinary,length:t}},Image(){return{type:a.Image}},Xml(){return{type:a.Xml}},Char(t){return{type:a.Char,length:t}},NChar(t){return{type:a.NChar,length:t}},NText(){return{type:a.NText}},TVP(t){return{type:a.TVP,tvpType:t}},UDT(){return{type:a.UDT}},Geography(){return{type:a.Geography}},Geometry(){return{type:a.Geometry}},Variant(){return{type:a.Variant}}};t.exports.TYPES=a;t.exports.DECLARATIONS={};const zero=function(t,r){if(r==null)r=2;t=String(t);if(t.length<r){for(let n=1;n<=r-t.length;n++){t=`0${t}`}}return t};for(const r in a){if(i(a,r)){const n=a[r];n.declaration=r.toLowerCase();t.exports.DECLARATIONS[n.declaration]=n;((t,r)=>{r[o]=()=>`[sql.${t}]`})(r,n)}}t.exports.declare=(t,r)=>{switch(t){case a.VarChar:case a.VarBinary:return`${t.declaration} (${r.length>8e3?"MAX":r.length==null?"MAX":r.length})`;case a.NVarChar:return`${t.declaration} (${r.length>4e3?"MAX":r.length==null?"MAX":r.length})`;case a.Char:case a.NChar:case a.Binary:return`${t.declaration} (${r.length==null?1:r.length})`;case a.Decimal:case a.Numeric:return`${t.declaration} (${r.precision==null?18:r.precision}, ${r.scale==null?0:r.scale})`;case a.Time:case a.DateTime2:case a.DateTimeOffset:return`${t.declaration} (${r.scale==null?7:r.scale})`;case a.TVP:return`${r.tvpType} readonly`;default:return t.declaration}};t.exports.cast=(t,r,n)=>{if(t==null){return null}switch(typeof t){case"string":return`N'${t.replace(/'/g,"''")}'`;case"number":return t;case"boolean":return t?1:0;case"object":if(t instanceof Date){let r=t.getUTCMilliseconds()/1e3;if(t.nanosecondDelta!=null){r+=t.nanosecondDelta}const i=n.scale==null?7:n.scale;if(i>0){r=String(r).substr(1,i+1)}else{r=""}return`N'${t.getUTCFullYear()}-${zero(t.getUTCMonth()+1)}-${zero(t.getUTCDate())} ${zero(t.getUTCHours())}:${zero(t.getUTCMinutes())}:${zero(t.getUTCSeconds())}${r}'`}else if(Buffer.isBuffer(t)){return`0x${t.toString("hex")}`}return null;default:return null}}},86485:(t,r,n)=>{"use strict";const i=n(24022);class ConnectionError extends i{constructor(t,r){super(t,r);this.name="ConnectionError"}}t.exports=ConnectionError},25903:(t,r,n)=>{"use strict";const i=n(86485);const o=n(24022);const a=n(47641);const s=n(31296);const c=n(70274);t.exports={ConnectionError:i,MSSQLError:o,PreparedStatementError:a,RequestError:s,TransactionError:c}},24022:t=>{"use strict";class MSSQLError extends Error{constructor(t,r){if(t instanceof Error){super(t.message);this.code=t.code||r;Error.captureStackTrace(this,this.constructor);Object.defineProperty(this,"originalError",{enumerable:true,value:t})}else{super(t);this.code=r}this.name="MSSQLError"}}t.exports=MSSQLError},47641:(t,r,n)=>{"use strict";const i=n(24022);class PreparedStatementError extends i{constructor(t,r){super(t,r);this.name="PreparedStatementError"}}t.exports=PreparedStatementError},31296:(t,r,n)=>{"use strict";const i=n(24022);class RequestError extends i{constructor(t,r){super(t,r);if(t instanceof Error){if(t.info){this.number=t.info.number||t.code;this.lineNumber=t.info.lineNumber;this.state=t.info.state||t.sqlstate;this.class=t.info.class;this.serverName=t.info.serverName;this.procName=t.info.procName}else{this.number=t.code;this.lineNumber=t.lineNumber;this.state=t.sqlstate;this.class=t.severity;this.serverName=t.serverName;this.procName=t.procName}}this.name="RequestError";if(/^\[Microsoft\]\[SQL Server Native Client 11\.0\](?:\[SQL Server\])?([\s\S]*)$/.exec(this.message)){this.message=RegExp.$1}}}t.exports=RequestError},70274:(t,r,n)=>{"use strict";const i=n(24022);class TransactionError extends i{constructor(t,r){super(t,r);this.name="TransactionError"}}t.exports=TransactionError},89105:(t,r,n)=>{"use strict";const i=n(67636);let o=null;const a={};function connect(t,r){if(!o){o=new i.driver.ConnectionPool(t);for(const t in a){for(let r=0,n=a[t].length;r<n;r++){o.on(t,a[t][r])}}const r=o.close;const globalClose=function(t){for(const t in a){for(let r=0,n=a[t].length;r<n;r++){this.removeListener(t,a[t][r])}}this.on("error",(t=>{if(a.error){for(let r=0,n=a.error.length;r<n;r++){a.error[r].call(this,t)}}}));o=null;return r.call(this,t)};o.close=globalClose.bind(o)}if(typeof r==="function"){return o.connect(((t,n)=>{if(t){o=null}r(t,n)}))}return o.connect().catch((t=>{o=null;return i.Promise.reject(t)}))}function close(t){if(o){const r=o;o=null;return r.close(t)}if(typeof t==="function"){setImmediate(t);return null}return new i.Promise((t=>{t(o)}))}function on(t,r){if(!a[t])a[t]=[];a[t].push(r);if(o)o.on(t,r);return o}function removeListener(t,r){if(!a[t])return o;const n=a[t].indexOf(r);if(n===-1)return o;a[t].splice(n,1);if(a[t].length===0)a[t]=undefined;if(o)o.removeListener(t,r);return o}function query(){if(typeof arguments[0]==="string"){return(new i.driver.Request).query(arguments[0],arguments[1])}const t=Array.prototype.slice.call(arguments);const r=t.shift();return(new i.driver.Request)._template(r,t,"query")}function batch(){if(typeof arguments[0]==="string"){return(new i.driver.Request).batch(arguments[0],arguments[1])}const t=Array.prototype.slice.call(arguments);const r=t.shift();return(new i.driver.Request)._template(r,t,"batch")}t.exports={batch:batch,close:close,connect:connect,off:removeListener,on:on,query:query,removeListener:removeListener};Object.defineProperty(t.exports,"pool",{get:()=>o,set:()=>{}})},62202:t=>{"use strict";t.exports={READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5}},67636:(t,r,n)=>{"use strict";const i=n(2013).TYPES;const o=n(67417);let a=Promise;const s={};const c=[];c.register=function(t,r){for(let r=0;r<this.length;r++){const n=this[r];if(n.js===t){this.splice(r,1);break}}this.push({js:t,sql:r});return null};c.register(String,i.NVarChar);c.register(Number,i.Int);c.register(Boolean,i.Bit);c.register(Date,i.DateTime);c.register(Buffer,i.VarBinary);c.register(o,i.TVP);const getTypeByValue=function(t){if(t===null||t===undefined){return i.NVarChar}switch(typeof t){case"string":for(const t of Array.from(c)){if(t.js===String){return t.sql}}return i.NVarChar;case"number":case"bigint":if(t%1===0){if(t<-2147483648||t>2147483647){return i.BigInt}else{return i.Int}}else{return i.Float}case"boolean":for(const t of Array.from(c)){if(t.js===Boolean){return t.sql}}return i.Bit;case"object":for(const r of Array.from(c)){if(t instanceof r.js){return r.sql}}return i.NVarChar;default:return i.NVarChar}};t.exports={driver:s,getTypeByValue:getTypeByValue,map:c};Object.defineProperty(t.exports,"Promise",{get:()=>a,set:t=>{a=t}});Object.defineProperty(t.exports,"valueHandler",{enumerable:true,value:new Map,writable:false,configurable:false})},67417:(t,r,n)=>{"use strict";const i=n(2013).TYPES;const o=n(2013).declare;const a=n(14178).objectHasProperty;const s=65535;const c="JSON_F52E2B61-18A1-11d1-B105-00805F49916B";function Table(t){if(t){const r=Table.parseName(t);this.name=r.name;this.schema=r.schema;this.database=r.database;this.path=(this.database?`[${this.database}].`:"")+(this.schema?`[${this.schema}].`:"")+`[${this.name}]`;this.temporary=this.name.charAt(0)==="#"}this.columns=[];this.rows=[];Object.defineProperty(this.columns,"add",{value(t,r,n){if(r==null){throw new Error("Column data type is not defined.")}if(r instanceof Function){r=r()}n=n||{};r.name=t;["nullable","primary","identity","readOnly","length"].forEach((t=>{if(a(n,t)){r[t]=n[t]}}));return this.push(r)}});Object.defineProperty(this.rows,"add",{value(){return this.push(Array.prototype.slice.call(arguments))}});Object.defineProperty(this.rows,"clear",{value(){return this.splice(0,this.length)}})}Table.prototype._makeBulk=function _makeBulk(){for(let t=0;t<this.columns.length;t++){const r=this.columns[t];switch(r.type){case i.Date:case i.DateTime:case i.DateTime2:for(let r=0;r<this.rows.length;r++){const n=this.rows[r][t];if(typeof n==="string"||typeof n==="number"){const i=new Date(n);if(isNaN(i.getDate())){throw new TypeError("Invalid date value passed to bulk rows")}this.rows[r][t]=i}}break;case i.Xml:r.type=i.NVarChar(s).type;break;case i.UDT:case i.Geography:case i.Geometry:r.type=i.VarBinary(s).type;break;default:break}}return this};Table.prototype.declare=function declare(){const t=this.columns.filter((t=>t.primary===true)).map((t=>t.name));const r=this.columns.map((r=>{const n=[`[${r.name}] ${o(r.type,r)}`];if(r.nullable===true){n.push("null")}else if(r.nullable===false){n.push("not null")}if(r.primary===true&&t.length===1){n.push("primary key")}return n.join(" ")}));const n=t.length>1?`, constraint PK_${this.temporary?this.name.substr(1):this.name} primary key (${t.join(", ")})`:"";return`create table ${this.path} (${r.join(", ")}${n})`};Table.fromRecordset=function fromRecordset(t,r){const n=new this(r);for(const r in t.columns){if(a(t.columns,r)){const i=t.columns[r];n.columns.add(r,{type:i.type,length:i.length,scale:i.scale,precision:i.precision},{nullable:i.nullable,identity:i.identity,readOnly:i.readOnly})}}if(n.columns.length===1&&n.columns[0].name===c){for(let r=0;r<t.length;r++){n.rows.add(JSON.stringify(t[r]))}}else{for(let r=0;r<t.length;r++){n.rows.add.apply(n.rows,n.columns.map((n=>t[r][n.name])))}}return n};Table.parseName=function parseName(t){const r=t.length;let n=-1;let i="";let o=false;const a=[];while(++n<r){const r=t.charAt(n);if(r==="["){if(o){i+=r}else{o=true}}else if(r==="]"){if(o){o=false}else{throw new Error("Invalid table name.")}}else if(r==="."){if(o){i+=r}else{a.push(i);i=""}}else{i+=r}}if(i){a.push(i)}switch(a.length){case 1:return{name:a[0],schema:null,database:null};case 2:return{name:a[1],schema:a[0],database:null};case 3:return{name:a[2],schema:a[1],database:a[0]};default:throw new Error("Invalid table name.")}};t.exports=Table},89:(t,r,n)=>{"use strict";const i=n(62459);const o=n(38237)("mssql:tedi");const a=n(85558);const{IDS:s}=n(14178);const c=n(67636);const u=n(86485);class ConnectionPool extends a{_poolCreate(){return new c.Promise(((t,r)=>{const resolveOnce=n=>{t(n);t=r=()=>{}};const rejectOnce=n=>{r(n);t=r=()=>{}};const n={server:this.config.server,options:Object.assign({encrypt:typeof this.config.encrypt==="boolean"?this.config.encrypt:true,trustServerCertificate:typeof this.config.trustServerCertificate==="boolean"?this.config.trustServerCertificate:false},this.config.options),authentication:Object.assign({type:this.config.domain!==undefined?"ntlm":"default",options:{userName:this.config.user,password:this.config.password,domain:this.config.domain}},this.config.authentication)};n.options.database=n.options.database||this.config.database;n.options.port=n.options.port||this.config.port;n.options.connectTimeout=n.options.connectTimeout||this.config.connectionTimeout||this.config.timeout||15e3;n.options.requestTimeout=n.options.requestTimeout||this.config.requestTimeout!=null?this.config.requestTimeout:15e3;n.options.tdsVersion=n.options.tdsVersion||"7_4";n.options.rowCollectionOnDone=n.options.rowCollectionOnDone||false;n.options.rowCollectionOnRequestCompletion=n.options.rowCollectionOnRequestCompletion||false;n.options.useColumnNames=n.options.useColumnNames||false;n.options.appName=n.options.appName||"node-mssql";if(n.options.instanceName)delete n.options.port;if(isNaN(n.options.requestTimeout))n.options.requestTimeout=15e3;if(n.options.requestTimeout===Infinity||n.options.requestTimeout<0)n.options.requestTimeout=0;if(!n.options.debug&&this.config.debug){n.options.debug={packet:true,token:true,data:true,payload:true}}let a;try{a=new i.Connection(n)}catch(t){rejectOnce(t);return}a.connect((t=>{if(t){t=new u(t);return rejectOnce(t)}o("connection(%d): established",s.get(a));this.collation=a.databaseCollation;resolveOnce(a)}));s.add(a,"Connection");o("pool(%d): connection #%d created",s.get(this),s.get(a));o("connection(%d): establishing",s.get(a));a.on("end",(()=>{const t=new u("The connection ended without ever completing the connection");rejectOnce(t)}));a.on("error",(t=>{if(t.code==="ESOCKET"){a.hasError=true}else{this.emit("error",t)}rejectOnce(t)}));if(this.config.debug){a.on("debug",this.emit.bind(this,"debug",a))}if(typeof this.config.beforeConnect==="function"){this.config.beforeConnect(a)}}))}_poolValidate(t){if(t&&!t.closed&&!t.hasError){return!this.config.validateConnection||new c.Promise((r=>{const n=new i.Request("SELECT 1;",(t=>{r(!t)}));t.execSql(n)}))}return false}_poolDestroy(t){return new c.Promise(((r,n)=>{if(!t){r();return}o("connection(%d): destroying",s.get(t));if(t.closed){o("connection(%d): already closed",s.get(t));r()}else{t.once("end",(()=>{o("connection(%d): destroyed",s.get(t));r()}));t.close()}}))}}t.exports=ConnectionPool},37197:(t,r,n)=>{"use strict";const i=n(26042);const o=n(89);const a=n(41670);const s=n(22906);t.exports=Object.assign({ConnectionPool:o,Transaction:a,Request:s,PreparedStatement:i.PreparedStatement},i.exports);Object.defineProperty(t.exports,"Promise",{enumerable:true,get:()=>i.Promise,set:t=>{i.Promise=t}});Object.defineProperty(t.exports,"valueHandler",{enumerable:true,value:i.valueHandler,writable:false,configurable:false});i.driver.name="tedious";i.driver.ConnectionPool=o;i.driver.Transaction=a;i.driver.Request=s},22906:(t,r,n)=>{"use strict";const i=n(62459);const o=n(38237)("mssql:tedi");const a=n(65225);const s=n(31296);const{IDS:c,objectHasProperty:u}=n(14178);const{TYPES:l,DECLARATIONS:d,declare:p,cast:g}=n(2013);const v=n(67417);const{PARSERS:E}=n(33199);const{valueHandler:S}=n(67636);const w="JSON_F52E2B61-18A1-11d1-B105-00805F49916B";const x="XML_F52E2B61-18A1-11d1-B105-00805F49916B";const N={BitN:104,DateTimeN:111,DecimalN:106,FloatN:109,IntN:38,MoneyN:110,NumericN:108};const getTediousType=function(t){switch(t){case l.VarChar:return i.TYPES.VarChar;case l.NVarChar:return i.TYPES.NVarChar;case l.Text:return i.TYPES.Text;case l.Int:return i.TYPES.Int;case l.BigInt:return i.TYPES.BigInt;case l.TinyInt:return i.TYPES.TinyInt;case l.SmallInt:return i.TYPES.SmallInt;case l.Bit:return i.TYPES.Bit;case l.Float:return i.TYPES.Float;case l.Decimal:return i.TYPES.Decimal;case l.Numeric:return i.TYPES.Numeric;case l.Real:return i.TYPES.Real;case l.Money:return i.TYPES.Money;case l.SmallMoney:return i.TYPES.SmallMoney;case l.Time:return i.TYPES.Time;case l.Date:return i.TYPES.Date;case l.DateTime:return i.TYPES.DateTime;case l.DateTime2:return i.TYPES.DateTime2;case l.DateTimeOffset:return i.TYPES.DateTimeOffset;case l.SmallDateTime:return i.TYPES.SmallDateTime;case l.UniqueIdentifier:return i.TYPES.UniqueIdentifier;case l.Xml:return i.TYPES.NVarChar;case l.Char:return i.TYPES.Char;case l.NChar:return i.TYPES.NChar;case l.NText:return i.TYPES.NVarChar;case l.Image:return i.TYPES.Image;case l.Binary:return i.TYPES.Binary;case l.VarBinary:return i.TYPES.VarBinary;case l.UDT:case l.Geography:case l.Geometry:return i.TYPES.UDT;case l.TVP:return i.TYPES.TVP;case l.Variant:return i.TYPES.Variant;default:return t}};const getMssqlType=function(t,r){if(typeof t!=="object")return undefined;switch(t){case i.TYPES.Char:return l.Char;case i.TYPES.NChar:return l.NChar;case i.TYPES.VarChar:return l.VarChar;case i.TYPES.NVarChar:return l.NVarChar;case i.TYPES.Text:return l.Text;case i.TYPES.NText:return l.NText;case i.TYPES.Int:return l.Int;case i.TYPES.BigInt:return l.BigInt;case i.TYPES.TinyInt:return l.TinyInt;case i.TYPES.SmallInt:return l.SmallInt;case i.TYPES.Bit:return l.Bit;case i.TYPES.Float:return l.Float;case i.TYPES.Real:return l.Real;case i.TYPES.Money:return l.Money;case i.TYPES.SmallMoney:return l.SmallMoney;case i.TYPES.Numeric:return l.Numeric;case i.TYPES.Decimal:return l.Decimal;case i.TYPES.DateTime:return l.DateTime;case i.TYPES.Time:return l.Time;case i.TYPES.Date:return l.Date;case i.TYPES.DateTime2:return l.DateTime2;case i.TYPES.DateTimeOffset:return l.DateTimeOffset;case i.TYPES.SmallDateTime:return l.SmallDateTime;case i.TYPES.UniqueIdentifier:return l.UniqueIdentifier;case i.TYPES.Image:return l.Image;case i.TYPES.Binary:return l.Binary;case i.TYPES.VarBinary:return l.VarBinary;case i.TYPES.Xml:return l.Xml;case i.TYPES.UDT:return l.UDT;case i.TYPES.TVP:return l.TVP;case i.TYPES.Variant:return l.Variant;default:switch(t.id){case N.BitN:return l.Bit;case N.NumericN:return l.Numeric;case N.DecimalN:return l.Decimal;case N.IntN:if(r===8)return l.BigInt;if(r===4)return l.Int;if(r===2)return l.SmallInt;return l.TinyInt;case N.FloatN:if(r===8)return l.Float;return l.Real;case N.MoneyN:if(r===8)return l.Money;return l.SmallMoney;case N.DateTimeN:if(r===8)return l.DateTime;return l.SmallDateTime}}};const createColumns=function(t,r){let n={};if(r)n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];const a={index:i,name:o.colName,length:o.dataLength,type:getMssqlType(o.type,o.dataLength),scale:o.scale,precision:o.precision,nullable:!!(o.flags&1),caseSensitive:!!(o.flags&2),identity:!!(o.flags&16),readOnly:!(o.flags&12)};if(o.udtInfo){a.udt={name:o.udtInfo.typeName,database:o.udtInfo.dbname,schema:o.udtInfo.owningSchema,assembly:o.udtInfo.assemblyName};if(d[o.udtInfo.typeName]){a.type=d[o.udtInfo.typeName]}}if(r){n.push(a)}else{n[o.colName]=a}}return n};const valueCorrection=function(t,r){const n=getMssqlType(r.type);if(S.has(n)){return S.get(n)(t)}else if(r.type===i.TYPES.UDT&&t!=null){if(E[r.udtInfo.typeName]){return E[r.udtInfo.typeName](t)}else{return t}}else{return t}};const parameterCorrection=function(t){if(t instanceof v){const r={name:t.name,schema:t.schema,columns:[],rows:t.rows};for(const n of t.columns){r.columns.push({name:n.name,type:getTediousType(n.type),length:n.length,scale:n.scale,precision:n.precision})}return r}else{return t}};class Request extends a{_batch(t,r){this._isBatch=true;this._query(t,r)}_bulk(t,r,n){super._bulk(t,r,(a=>{if(a)return n(a);try{t._makeBulk()}catch(t){return n(new s(t,"EREQUEST"))}if(!t.name){return n(new s("Table name must be specified for bulk insert.","ENAME"))}if(t.name.charAt(0)==="@"){return n(new s("You can't use table variables for bulk insert.","ENAME"))}const u=[];const l={};let d=false;const handleError=(t,r,i)=>{let o=new Error(i.message);o.info=i;o=new s(o,"EREQUEST");if(this.stream){this.emit("error",o)}else{if(t&&!d){if(r){for(const t in l){r.removeListener(t,l[t])}this.parent.release(r)}d=true;n(o)}}u.push(o)};const handleInfo=t=>{this.emit("info",{message:t.message,number:t.number,state:t.state,class:t.class,lineNumber:t.lineNumber,serverName:t.serverName,procName:t.procName})};this.parent.acquire(this,((a,p)=>{const callbackWithRelease=(t,...r)=>{try{this.parent.release(p)}catch(t){}n(t,...r)};if(a)return callbackWithRelease(a);o("connection(%d): borrowed to request #%d",c.get(p),c.get(this));if(this.canceled){o("request(%d): canceled",c.get(this));return callbackWithRelease(new s("Canceled.","ECANCEL"))}this._cancel=()=>{o("request(%d): cancel",c.get(this));p.cancel()};p.on("infoMessage",l.infoMessage=handleInfo);p.on("errorMessage",l.errorMessage=handleError.bind(null,false,p));p.on("error",l.error=handleError.bind(null,true,p));const done=(t,r)=>{if(t&&(!u.length||u.length&&t.message!==u[u.length-1].message)){t=new s(t,"EREQUEST");if(this.stream)this.emit("error",t);u.push(t)}delete this._cancel;let n;if(u.length&&!this.stream){n=u.pop();n.precedingErrors=u}if(!d){for(const t in l){p.removeListener(t,l[t])}d=true;if(this.stream){callbackWithRelease(null,r)}else{callbackWithRelease(n,r)}}};const g=p.newBulkLoad(t.path,r,done);for(const r of t.columns){g.addColumn(r.name,getTediousType(r.type),{nullable:r.nullable,length:r.length,scale:r.scale,precision:r.precision})}if(t.create){const r=t.temporary?`tempdb..[${t.name}]`:t.path;const n=new i.Request(`if object_id('${r.replace(/'/g,"''")}') is null ${t.declare()}`,(r=>{if(r)return done(r);p.execBulkLoad(g,t.rows)}));this._setCurrentRequest(n);p.execSqlBatch(n)}else{p.execBulkLoad(g,t.rows)}}))}))}_query(t,r){super._query(t,(n=>{if(n)return r(n);const a=[];const l=[];const d=[];const E={};const S={};const N=[];let P={};let D=[];let M=null;let L=false;let U=false;let q=null;let B=false;const handleError=(t,n,i)=>{let o=new Error(i.message);o.info=i;o=new s(o,"EREQUEST");if(this.stream){this.emit("error",o)}else{if(t&&!B){if(n){for(const t in E){n.removeListener(t,E[t])}this.parent.release(n)}B=true;r(o)}}d.push(o)};const handleInfo=t=>{this.emit("info",{message:t.message,number:t.number,state:t.state,class:t.class,lineNumber:t.lineNumber,serverName:t.serverName,procName:t.procName})};this.parent.acquire(this,((n,F,j)=>{if(n)return r(n);o("connection(%d): borrowed to request #%d",c.get(F),c.get(this));let H;if(this.canceled){o("request(%d): canceled",c.get(this));this.parent.release(F);return r(new s("Canceled.","ECANCEL"))}this._cancel=()=>{o("request(%d): cancel",c.get(this));F.cancel()};F.on("infoMessage",E.infoMessage=handleInfo);F.on("errorMessage",E.errorMessage=handleError.bind(null,false,F));F.on("error",E.error=handleError.bind(null,true,F));o("request(%d): query",c.get(this),t);const z=new i.Request(t,(t=>{if(t&&(!d.length||d.length&&t.message!==d[d.length-1].message)){t=new s(t,"EREQUEST");if(this.stream)this.emit("error",t);d.push(t)}if(L){if(!this.stream)M=a.pop()[0];for(const t in M){const r=M[t];if(t!=="___return___"){S[t]=r}}}delete this._cancel;let n;if(d.length&&!this.stream){n=d.pop();n.precedingErrors=d}if(!B){for(const t in E){F.removeListener(t,E[t])}this.parent.release(F);B=true;if(n){o("request(%d): failed",c.get(this),n)}else{o("request(%d): completed",c.get(this))}if(this.stream){r(null,null,S,N,l)}else{r(n,a,S,N,l)}}}));this._setCurrentRequest(z);z.on("columnMetadata",(t=>{P=createColumns(t,this.arrayRowMode);U=false;if(t.length===1&&(t[0].colName===w||t[0].colName===x)){U=true;q=[]}if(this.stream){if(this._isBatch){if(!P.___return___){this.emit("recordset",P)}}else{this.emit("recordset",P)}}if(this.arrayRowMode)l.push(P)}));const doneHandler=(t,r)=>{if(t!=null){N.push(t);if(this.stream){this.emit("rowsaffected",t)}}if(Object.keys(P).length===0)return;if(U){const t=q.join("");if(P[w]&&j.parseJSON===true){try{if(t===""){H=null}else{H=JSON.parse(t)}}catch(t){H=null;const r=new s(new Error(`Failed to parse incoming JSON. ${t.message}`),"EJSON");if(this.stream)this.emit("error",r);d.push(r)}}else{H={};H[Object.keys(P)[0]]=t}q=null;if(this.stream){this.emit("row",H)}else{D.push(H)}}if(!this.stream){Object.defineProperty(D,"columns",{enumerable:false,configurable:true,value:P});Object.defineProperty(D,"toTable",{enumerable:false,configurable:true,value(t){return v.fromRecordset(this,t)}});a.push(D)}D=[];P={}};z.on("doneInProc",doneHandler);z.on("done",doneHandler);z.on("returnValue",((t,r,n)=>{S[t]=r}));z.on("row",(t=>{if(!D)D=[];if(U){return q.push(t[0].value)}if(this.arrayRowMode){H=[]}else{H={}}for(const r of t){r.value=valueCorrection(r.value,r.metadata);if(this.arrayRowMode){H.push(r.value)}else{const t=H[r.metadata.colName];if(t!==undefined){if(t instanceof Array){t.push(r.value)}else{H[r.metadata.colName]=[t,r.value]}}else{H[r.metadata.colName]=r.value}}}if(this.stream){if(this._isBatch){if(H.___return___){M=H}else{this.emit("row",H)}}else{this.emit("row",H)}}else{D.push(H)}}));if(this._isBatch){if(Object.keys(this.parameters).length){for(const t in this.parameters){if(!u(this.parameters,t)){continue}const n=this.parameters[t];try{n.value=getTediousType(n.type).validate(n.value,this.parent.collation)}catch(n){n.message=`Validation failed for parameter '${t}'. ${n.message}`;const i=new s(n,"EPARAM");this.parent.release(F);return r(i)}}const t=[];for(const r in this.parameters){if(!u(this.parameters,r)){continue}const n=this.parameters[r];t.push(`@${r} ${p(n.type,n)}`)}const n=[];for(const t in this.parameters){if(!u(this.parameters,t)){continue}const r=this.parameters[t];n.push(`@${t} = ${g(r.value,r.type,r)}`)}const i=[];for(const t in this.parameters){if(!u(this.parameters,t)){continue}const r=this.parameters[t];if(r.io===2){i.push(`@${t} as [${t}]`)}}L=i.length>0;z.sqlTextOrProcedure=`declare ${t.join(", ")};select ${n.join(", ")};${z.sqlTextOrProcedure};${L?`select 1 as [___return___], ${i.join(", ")}`:""}`}}else{for(const t in this.parameters){if(!u(this.parameters,t)){continue}const r=this.parameters[t];if(r.io===1){z.addParameter(r.name,getTediousType(r.type),parameterCorrection(r.value),{length:r.length,scale:r.scale,precision:r.precision})}else{z.addOutputParameter(r.name,getTediousType(r.type),parameterCorrection(r.value),{length:r.length,scale:r.scale,precision:r.precision})}}}try{F[this._isBatch?"execSqlBatch":"execSql"](z)}catch(t){handleError(true,F,t)}}))}))}_execute(t,r){super._execute(t,(n=>{if(n)return r(n);const a=[];const l=[];const d=[];const p={};const g={};const E=[];let S={};let N=[];let P=0;let D=false;let M=null;let L=false;const handleError=(t,n,i)=>{let o=new Error(i.message);o.info=i;o=new s(o,"EREQUEST");if(this.stream){this.emit("error",o)}else{if(t&&!L){if(n){for(const t in p){n.removeListener(t,p[t])}this.parent.release(n)}L=true;r(o)}}d.push(o)};const handleInfo=t=>{this.emit("info",{message:t.message,number:t.number,state:t.state,class:t.class,lineNumber:t.lineNumber,serverName:t.serverName,procName:t.procName})};this.parent.acquire(this,((n,U,q)=>{if(n)return r(n);o("connection(%d): borrowed to request #%d",c.get(U),c.get(this));let B;if(this.canceled){o("request(%d): canceled",c.get(this));this.parent.release(U);return r(new s("Canceled.","ECANCEL"))}this._cancel=()=>{o("request(%d): cancel",c.get(this));U.cancel()};U.on("infoMessage",p.infoMessage=handleInfo);U.on("errorMessage",p.errorMessage=handleError.bind(null,false,U));U.on("error",p.error=handleError.bind(null,true,U));if(o.enabled){const r=Object.keys(this.parameters).map((t=>this.parameters[t]));const logValue=t=>typeof t==="string"&&t.length>50?t.substring(0,47)+"...":t;const logName=t=>t.name+" [sql."+t.type.name+"]";const n={};r.forEach((t=>{n[logName(t)]=logValue(t.value)}));o("request(%d): execute %s %O",c.get(this),t,n)}const F=new i.Request(t,(t=>{if(t&&(!d.length||d.length&&t.message!==d[d.length-1].message)){t=new s(t,"EREQUEST");if(this.stream)this.emit("error",t);d.push(t)}delete this._cancel;let n;if(d.length&&!this.stream){n=d.pop();n.precedingErrors=d}if(!L){for(const t in p){U.removeListener(t,p[t])}this.parent.release(U);L=true;if(n){o("request(%d): failed",c.get(this),n)}else{o("request(%d): complete",c.get(this))}if(this.stream){r(null,null,g,P,E,l)}else{r(n,a,g,P,E,l)}}}));this._setCurrentRequest(F);F.on("columnMetadata",(t=>{S=createColumns(t,this.arrayRowMode);D=false;if(t.length===1&&(t[0].colName===w||t[0].colName===x)){D=true;M=[]}if(this.stream)this.emit("recordset",S);if(this.arrayRowMode)l.push(S)}));F.on("row",(t=>{if(!N)N=[];if(D){return M.push(t[0].value)}if(this.arrayRowMode){B=[]}else{B={}}for(const r of t){r.value=valueCorrection(r.value,r.metadata);if(this.arrayRowMode){B.push(r.value)}else{const t=B[r.metadata.colName];if(t!=null){if(t instanceof Array){t.push(r.value)}else{B[r.metadata.colName]=[t,r.value]}}else{B[r.metadata.colName]=r.value}}}if(this.stream){this.emit("row",B)}else{N.push(B)}}));F.on("doneInProc",((t,r)=>{if(t!=null){E.push(t);if(this.stream){this.emit("rowsaffected",t)}}if(Object.keys(S).length===0)return;if(D){if(S[w]&&q.parseJSON===true){try{if(M.length===0){B=null}else{B=JSON.parse(M.join(""))}}catch(t){B=null;const r=new s(new Error(`Failed to parse incoming JSON. ${t.message}`),"EJSON");if(this.stream)this.emit("error",r);d.push(r)}}else{B={};B[Object.keys(S)[0]]=M.join("")}M=null;if(this.stream){this.emit("row",B)}else{N.push(B)}}if(!this.stream){Object.defineProperty(N,"columns",{enumerable:false,configurable:true,value:S});Object.defineProperty(N,"toTable",{enumerable:false,configurable:true,value(t){return v.fromRecordset(this,t)}});a.push(N)}N=[];S={}}));F.on("doneProc",((t,r,n)=>{P=n}));F.on("returnValue",((t,r,n)=>{g[t]=r}));for(const t in this.parameters){if(!u(this.parameters,t)){continue}const r=this.parameters[t];if(r.io===1){F.addParameter(r.name,getTediousType(r.type),parameterCorrection(r.value),{length:r.length,scale:r.scale,precision:r.precision})}else{F.addOutputParameter(r.name,getTediousType(r.type),parameterCorrection(r.value),{length:r.length,scale:r.scale,precision:r.precision})}}U.callProcedure(F)}))}))}_pause(){super._pause();if(this._currentRequest){this._currentRequest.pause()}}_resume(){super._resume();if(this._currentRequest){this._currentRequest.resume()}}}t.exports=Request},41670:(t,r,n)=>{"use strict";const i=n(38237)("mssql:tedi");const o=n(2555);const{IDS:a}=n(14178);const s=n(70274);class Transaction extends o{constructor(t){super(t);this._abort=()=>{if(!this._rollbackRequested){const t=this._acquiredConnection;setImmediate(this.parent.release.bind(this.parent),t);this._acquiredConnection.removeListener("rollbackTransaction",this._abort);this._acquiredConnection=null;this._acquiredConfig=null;this._aborted=true;this.emit("rollback",true)}}}_begin(t,r){super._begin(t,(t=>{if(t)return r(t);i("transaction(%d): begin",a.get(this));this.parent.acquire(this,((t,n,o)=>{if(t)return r(t);this._acquiredConnection=n;this._acquiredConnection.on("rollbackTransaction",this._abort);this._acquiredConfig=o;n.beginTransaction((t=>{if(t)t=new s(t);i("transaction(%d): begun",a.get(this));r(t)}),this.name,this.isolationLevel)}))}))}_commit(t){super._commit((r=>{if(r)return t(r);i("transaction(%d): commit",a.get(this));this._acquiredConnection.commitTransaction((r=>{if(r)r=new s(r);this._acquiredConnection.removeListener("rollbackTransaction",this._abort);this.parent.release(this._acquiredConnection);this._acquiredConnection=null;this._acquiredConfig=null;if(!r)i("transaction(%d): commited",a.get(this));t(r)}))}))}_rollback(t){super._rollback((r=>{if(r)return t(r);i("transaction(%d): rollback",a.get(this));this._acquiredConnection.rollbackTransaction((r=>{if(r)r=new s(r);this._acquiredConnection.removeListener("rollbackTransaction",this._abort);this.parent.release(this._acquiredConnection);this._acquiredConnection=null;this._acquiredConfig=null;if(!r)i("transaction(%d): rolled back",a.get(this));t(r)}))}))}}t.exports=Transaction},33199:t=>{"use strict";class Point{constructor(){this.x=0;this.y=0;this.z=null;this.m=null}}const parsePoints=(t,r,n)=>{const i=[];if(r<1){return i}if(n){for(let n=1;n<=r;n++){const r=new Point;i.push(r);r.x=t.readDoubleLE(t.position);r.y=t.readDoubleLE(t.position+8);t.position+=16}}else{for(let n=1;n<=r;n++){const r=new Point;i.push(r);r.lat=t.readDoubleLE(t.position);r.lng=t.readDoubleLE(t.position+8);r.x=r.lat;r.y=r.lng;t.position+=16}}return i};const parseZ=(t,r)=>{if(r<1){return}r.forEach((r=>{r.z=t.readDoubleLE(t.position);t.position+=8}))};const parseM=(t,r)=>{if(r<1){return}r.forEach((r=>{r.m=t.readDoubleLE(t.position);t.position+=8}))};const parseFigures=(t,r,n)=>{const i=[];if(r<1){return i}if(n.P){i.push({attribute:1,pointOffset:0})}else if(n.L){i.push({attribute:1,pointOffset:0})}else{for(let n=1;n<=r;n++){i.push({attribute:t.readUInt8(t.position),pointOffset:t.readInt32LE(t.position+1)});t.position+=5}}return i};const parseShapes=(t,r,n)=>{const i=[];if(r<1){return i}if(n.P){i.push({parentOffset:-1,figureOffset:0,type:1})}else if(n.L){i.push({parentOffset:-1,figureOffset:0,type:2})}else{for(let n=1;n<=r;n++){i.push({parentOffset:t.readInt32LE(t.position),figureOffset:t.readInt32LE(t.position+4),type:t.readUInt8(t.position+8)});t.position+=9}}return i};const parseSegments=(t,r)=>{const n=[];if(r<1){return n}for(let i=1;i<=r;i++){n.push({type:t.readUInt8(t.position)});t.position++}return n};const parseGeography=(t,r)=>{const n=t.readInt32LE(0);if(n===-1){return null}const i={srid:n,version:t.readUInt8(4)};const o=t.readUInt8(5);t.position=6;const a={Z:(o&1<<0)>0,M:(o&1<<1)>0,V:(o&1<<2)>0,P:(o&1<<3)>0,L:(o&1<<4)>0};if(i.version===2){a.H=(o&1<<3)>0}let s;if(a.P){s=1}else if(a.L){s=2}else{s=t.readUInt32LE(t.position);t.position+=4}i.points=parsePoints(t,s,r);if(a.Z){parseZ(t,i.points)}if(a.M){parseM(t,i.points)}let c;if(a.P){c=1}else if(a.L){c=1}else{c=t.readUInt32LE(t.position);t.position+=4}i.figures=parseFigures(t,c,a);let u;if(a.P){u=1}else if(a.L){u=1}else{u=t.readUInt32LE(t.position);t.position+=4}i.shapes=parseShapes(t,u,a);if(i.version===2&&t.position<t.length){const r=t.readUInt32LE(t.position);t.position+=4;i.segments=parseSegments(t,r)}else{i.segments=[]}return i};t.exports.PARSERS={geography(t){return parseGeography(t,false)},geometry(t){return parseGeography(t,true)}}},14178:t=>{const r=new WeakMap;const n={Connection:1,ConnectionPool:1,Request:1,Transaction:1,PreparedStatement:1};t.exports={objectHasProperty:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),INCREMENT:n,IDS:{get:r.get.bind(r),add:(t,i,o)=>{if(o)return r.set(t,o);r.set(t,n[i]++)}}}},34266:(t,r,n)=>{"use strict";const i=n(12781).Duplex;const o=Symbol("Callback");const a=Symbol("Other");class DuplexSocket extends i{constructor(t){super(t);this[o]=null;this[a]=null}_read(){const t=this[o];if(t){this[o]=null;t()}}_write(t,r,n){this[a][o]=n;this[a].push(t)}_final(t){this[a].on("end",t);this[a].push(null)}}class DuplexPair{constructor(t){this.socket1=new DuplexSocket(t);this.socket2=new DuplexSocket(t);this.socket1[a]=this.socket2;this.socket2[a]=this.socket1}}t.exports=DuplexPair},85220:(t,r,n)=>{const{EventEmitter:i}=n(82361);class AbortSignal{constructor(){this.eventEmitter=new i;this.onabort=null;this.aborted=false}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(t,r){this.eventEmitter.removeListener(t,r)}addEventListener(t,r){this.eventEmitter.on(t,r)}dispatchEvent(t){const r={type:t,target:this};const n=`on${t}`;if(typeof this[n]==="function")this[n](r);this.eventEmitter.emit(t,r)}}class AbortController{constructor(){this.signal=new AbortSignal}abort(){if(this.signal.aborted)return;this.signal.aborted=true;this.signal.dispatchEvent("abort")}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}}t.exports={AbortController:AbortController,AbortSignal:AbortSignal}},20504:(t,r,n)=>{var i=typeof Map==="function"&&Map.prototype;var o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var a=i&&o&&typeof o.get==="function"?o.get:null;var s=i&&Map.prototype.forEach;var c=typeof Set==="function"&&Set.prototype;var u=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var l=c&&u&&typeof u.get==="function"?u.get:null;var d=c&&Set.prototype.forEach;var p=typeof WeakMap==="function"&&WeakMap.prototype;var g=p?WeakMap.prototype.has:null;var v=typeof WeakSet==="function"&&WeakSet.prototype;var E=v?WeakSet.prototype.has:null;var S=typeof WeakRef==="function"&&WeakRef.prototype;var w=S?WeakRef.prototype.deref:null;var x=Boolean.prototype.valueOf;var N=Object.prototype.toString;var P=Function.prototype.toString;var D=String.prototype.match;var M=String.prototype.slice;var L=String.prototype.replace;var U=String.prototype.toUpperCase;var q=String.prototype.toLowerCase;var B=RegExp.prototype.test;var F=Array.prototype.concat;var j=Array.prototype.join;var H=Array.prototype.slice;var z=Math.floor;var V=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var Y=Object.getOwnPropertySymbols;var G=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var W=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var $=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===W?"object":"symbol")?Symbol.toStringTag:null;var K=Object.prototype.propertyIsEnumerable;var J=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,r){if(t===Infinity||t===-Infinity||t!==t||t&&t>-1e3&&t<1e3||B.call(/e/,r)){return r}var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t==="number"){var i=t<0?-z(-t):z(t);if(i!==t){var o=String(i);var a=M.call(r,o.length+1);return L.call(o,n,"$&_")+"."+L.call(L.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return L.call(r,n,"$&_")}var Z=n(37265).custom;var X=Z&&isSymbol(Z)?Z:null;t.exports=function inspect_(t,r,n,i){var o=r||{};if(has(o,"quoteStyle")&&(o.quoteStyle!=="single"&&o.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if(has(o,"maxStringLength")&&(typeof o.maxStringLength==="number"?o.maxStringLength<0&&o.maxStringLength!==Infinity:o.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var c=has(o,"customInspect")?o.customInspect:true;if(typeof c!=="boolean"&&c!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if(has(o,"indent")&&o.indent!==null&&o.indent!=="\t"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0)){throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`')}if(has(o,"numericSeparator")&&typeof o.numericSeparator!=="boolean"){throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`')}var u=o.numericSeparator;if(typeof t==="undefined"){return"undefined"}if(t===null){return"null"}if(typeof t==="boolean"){return t?"true":"false"}if(typeof t==="string"){return inspectString(t,o)}if(typeof t==="number"){if(t===0){return Infinity/t>0?"0":"-0"}var p=String(t);return u?addNumericSeparator(t,p):p}if(typeof t==="bigint"){var g=String(t)+"n";return u?addNumericSeparator(t,g):g}var v=typeof o.depth==="undefined"?5:o.depth;if(typeof n==="undefined"){n=0}if(n>=v&&v>0&&typeof t==="object"){return isArray(t)?"[Array]":"[Object]"}var E=getIndent(o,n);if(typeof i==="undefined"){i=[]}else if(indexOf(i,t)>=0){return"[Circular]"}function inspect(t,r,a){if(r){i=H.call(i);i.push(r)}if(a){var s={depth:o.depth};if(has(o,"quoteStyle")){s.quoteStyle=o.quoteStyle}return inspect_(t,s,n+1,i)}return inspect_(t,o,n+1,i)}if(typeof t==="function"){var S=nameOf(t);var w=arrObjKeys(t,inspect);return"[Function"+(S?": "+S:" (anonymous)")+"]"+(w.length>0?" { "+j.call(w,", ")+" }":"")}if(isSymbol(t)){var N=W?L.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):G.call(t);return typeof t==="object"&&!W?markBoxed(N):N}if(isElement(t)){var P="<"+q.call(String(t.nodeName));var D=t.attributes||[];for(var U=0;U<D.length;U++){P+=" "+D[U].name+"="+wrapQuotes(quote(D[U].value),"double",o)}P+=">";if(t.childNodes&&t.childNodes.length){P+="..."}P+="</"+q.call(String(t.nodeName))+">";return P}if(isArray(t)){if(t.length===0){return"[]"}var B=arrObjKeys(t,inspect);if(E&&!singleLineValues(B)){return"["+indentedJoin(B,E)+"]"}return"[ "+j.call(B,", ")+" ]"}if(isError(t)){var z=arrObjKeys(t,inspect);if("cause"in t&&!K.call(t,"cause")){return"{ ["+String(t)+"] "+j.call(F.call("[cause]: "+inspect(t.cause),z),", ")+" }"}if(z.length===0){return"["+String(t)+"]"}return"{ ["+String(t)+"] "+j.call(z,", ")+" }"}if(typeof t==="object"&&c){if(X&&typeof t[X]==="function"){return t[X]()}else if(c!=="symbol"&&typeof t.inspect==="function"){return t.inspect()}}if(isMap(t)){var Y=[];s.call(t,(function(r,n){Y.push(inspect(n,t,true)+" => "+inspect(r,t))}));return collectionOf("Map",a.call(t),Y,E)}if(isSet(t)){var Z=[];d.call(t,(function(r){Z.push(inspect(r,t))}));return collectionOf("Set",l.call(t),Z,E)}if(isWeakMap(t)){return weakCollectionOf("WeakMap")}if(isWeakSet(t)){return weakCollectionOf("WeakSet")}if(isWeakRef(t)){return weakCollectionOf("WeakRef")}if(isNumber(t)){return markBoxed(inspect(Number(t)))}if(isBigInt(t)){return markBoxed(inspect(V.call(t)))}if(isBoolean(t)){return markBoxed(x.call(t))}if(isString(t)){return markBoxed(inspect(String(t)))}if(!isDate(t)&&!isRegExp(t)){var Q=arrObjKeys(t,inspect);var ee=J?J(t)===Object.prototype:t instanceof Object||t.constructor===Object;var te=t instanceof Object?"":"null prototype";var re=!ee&&$&&Object(t)===t&&$ in t?M.call(toStr(t),8,-1):te?"Object":"";var ne=ee||typeof t.constructor!=="function"?"":t.constructor.name?t.constructor.name+" ":"";var ie=ne+(re||te?"["+j.call(F.call([],re||[],te||[]),": ")+"] ":"");if(Q.length===0){return ie+"{}"}if(E){return ie+"{"+indentedJoin(Q,E)+"}"}return ie+"{ "+j.call(Q,", ")+" }"}return String(t)};function wrapQuotes(t,r,n){var i=(n.quoteStyle||r)==="double"?'"':"'";return i+t+i}function quote(t){return L.call(String(t),/"/g,"&quot;")}function isArray(t){return toStr(t)==="[object Array]"&&(!$||!(typeof t==="object"&&$ in t))}function isDate(t){return toStr(t)==="[object Date]"&&(!$||!(typeof t==="object"&&$ in t))}function isRegExp(t){return toStr(t)==="[object RegExp]"&&(!$||!(typeof t==="object"&&$ in t))}function isError(t){return toStr(t)==="[object Error]"&&(!$||!(typeof t==="object"&&$ in t))}function isString(t){return toStr(t)==="[object String]"&&(!$||!(typeof t==="object"&&$ in t))}function isNumber(t){return toStr(t)==="[object Number]"&&(!$||!(typeof t==="object"&&$ in t))}function isBoolean(t){return toStr(t)==="[object Boolean]"&&(!$||!(typeof t==="object"&&$ in t))}function isSymbol(t){if(W){return t&&typeof t==="object"&&t instanceof Symbol}if(typeof t==="symbol"){return true}if(!t||typeof t!=="object"||!G){return false}try{G.call(t);return true}catch(t){}return false}function isBigInt(t){if(!t||typeof t!=="object"||!V){return false}try{V.call(t);return true}catch(t){}return false}var Q=Object.prototype.hasOwnProperty||function(t){return t in this};function has(t,r){return Q.call(t,r)}function toStr(t){return N.call(t)}function nameOf(t){if(t.name){return t.name}var r=D.call(P.call(t),/^function\s*([\w$]+)/);if(r){return r[1]}return null}function indexOf(t,r){if(t.indexOf){return t.indexOf(r)}for(var n=0,i=t.length;n<i;n++){if(t[n]===r){return n}}return-1}function isMap(t){if(!a||!t||typeof t!=="object"){return false}try{a.call(t);try{l.call(t)}catch(t){return true}return t instanceof Map}catch(t){}return false}function isWeakMap(t){if(!g||!t||typeof t!=="object"){return false}try{g.call(t,g);try{E.call(t,E)}catch(t){return true}return t instanceof WeakMap}catch(t){}return false}function isWeakRef(t){if(!w||!t||typeof t!=="object"){return false}try{w.call(t);return true}catch(t){}return false}function isSet(t){if(!l||!t||typeof t!=="object"){return false}try{l.call(t);try{a.call(t)}catch(t){return true}return t instanceof Set}catch(t){}return false}function isWeakSet(t){if(!E||!t||typeof t!=="object"){return false}try{E.call(t,E);try{g.call(t,g)}catch(t){return true}return t instanceof WeakSet}catch(t){}return false}function isElement(t){if(!t||typeof t!=="object"){return false}if(typeof HTMLElement!=="undefined"&&t instanceof HTMLElement){return true}return typeof t.nodeName==="string"&&typeof t.getAttribute==="function"}function inspectString(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;var i="... "+n+" more character"+(n>1?"s":"");return inspectString(M.call(t,0,r.maxStringLength),r)+i}var o=L.call(L.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(o,"single",r)}function lowbyte(t){var r=t.charCodeAt(0);var n={8:"b",9:"t",10:"n",12:"f",13:"r"}[r];if(n){return"\\"+n}return"\\x"+(r<16?"0":"")+U.call(r.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,r,n,i){var o=i?indentedJoin(n,i):j.call(n,", ");return t+" ("+r+") {"+o+"}"}function singleLineValues(t){for(var r=0;r<t.length;r++){if(indexOf(t[r],"\n")>=0){return false}}return true}function getIndent(t,r){var n;if(t.indent==="\t"){n="\t"}else if(typeof t.indent==="number"&&t.indent>0){n=j.call(Array(t.indent+1)," ")}else{return null}return{base:n,prev:j.call(Array(r+1),n)}}function indentedJoin(t,r){if(t.length===0){return""}var n="\n"+r.prev+r.base;return n+j.call(t,","+n)+"\n"+r.prev}function arrObjKeys(t,r){var n=isArray(t);var i=[];if(n){i.length=t.length;for(var o=0;o<t.length;o++){i[o]=has(t,o)?r(t[o],t):""}}var a=typeof Y==="function"?Y(t):[];var s;if(W){s={};for(var c=0;c<a.length;c++){s["$"+a[c]]=a[c]}}for(var u in t){if(!has(t,u)){continue}if(n&&String(Number(u))===u&&u<t.length){continue}if(W&&s["$"+u]instanceof Symbol){continue}else if(B.call(/[^\w$]/,u)){i.push(r(u,t)+": "+r(t[u],t))}else{i.push(u+": "+r(t[u],t))}}if(typeof Y==="function"){for(var l=0;l<a.length;l++){if(K.call(t,a[l])){i.push("["+r(a[l])+"]: "+r(t[a[l]],t))}}}return i}},37265:(t,r,n)=>{t.exports=n(73837).inspect},38435:(t,r,n)=>{"use strict";var i;if(!Object.keys){var o=Object.prototype.hasOwnProperty;var a=Object.prototype.toString;var s=n(46362);var c=Object.prototype.propertyIsEnumerable;var u=!c.call({toString:null},"toString");var l=c.call((function(){}),"prototype");var d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var equalsConstructorPrototype=function(t){var r=t.constructor;return r&&r.prototype===t};var p={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var g=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!p["$"+t]&&o.call(window,t)&&window[t]!==null&&typeof window[t]==="object"){try{equalsConstructorPrototype(window[t])}catch(t){return true}}}catch(t){return true}}return false}();var equalsConstructorPrototypeIfNotBuggy=function(t){if(typeof window==="undefined"||!g){return equalsConstructorPrototype(t)}try{return equalsConstructorPrototype(t)}catch(t){return false}};i=function keys(t){var r=t!==null&&typeof t==="object";var n=a.call(t)==="[object Function]";var i=s(t);var c=r&&a.call(t)==="[object String]";var p=[];if(!r&&!n&&!i){throw new TypeError("Object.keys called on a non-object")}var g=l&&n;if(c&&t.length>0&&!o.call(t,0)){for(var v=0;v<t.length;++v){p.push(String(v))}}if(i&&t.length>0){for(var E=0;E<t.length;++E){p.push(String(E))}}else{for(var S in t){if(!(g&&S==="prototype")&&o.call(t,S)){p.push(String(S))}}}if(u){var w=equalsConstructorPrototypeIfNotBuggy(t);for(var x=0;x<d.length;++x){if(!(w&&d[x]==="constructor")&&o.call(t,d[x])){p.push(d[x])}}}return p}}t.exports=i},70137:(t,r,n)=>{"use strict";var i=Array.prototype.slice;var o=n(46362);var a=Object.keys;var s=a?function keys(t){return a(t)}:n(38435);var c=Object.keys;s.shim=function shimObjectKeys(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);if(!t){Object.keys=function keys(t){if(o(t)){return c(i.call(t))}return c(t)}}}else{Object.keys=s}return Object.keys||s};t.exports=s},46362:t=>{"use strict";var r=Object.prototype.toString;t.exports=function isArguments(t){var n=r.call(t);var i=n==="[object Arguments]";if(!i){i=n!=="[object Array]"&&t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&r.call(t.callee)==="[object Function]"}return i}},85768:(t,r,n)=>{const i=n(71017);const o=n(32081);const{promises:a,constants:s}=n(57147);const c=n(51213);const u=n(98768);const l=n(961);const d=n.ab+"xdg-open";const{platform:p,arch:g}=process;const v=(()=>{const t="/mnt/";let r;return async function(){if(r){return r}const n="/etc/wsl.conf";let i=false;try{await a.access(n,s.F_OK);i=true}catch{}if(!i){return t}const o=await a.readFile(n,{encoding:"utf8"});const c=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);if(!c){return t}r=c.groups.mountPoint.trim();r=r.endsWith("/")?r:`${r}/`;return r}})();const pTryEach=async(t,r)=>{let n;for(const i of t){try{return await r(i)}catch(t){n=t}}throw n};const baseOpen=async t=>{t={wait:false,background:false,newInstance:false,allowNonzeroExitCode:false,...t};if(Array.isArray(t.app)){return pTryEach(t.app,(r=>baseOpen({...t,app:r})))}let{name:r,arguments:i=[]}=t.app||{};i=[...i];if(Array.isArray(r)){return pTryEach(r,(r=>baseOpen({...t,app:{name:r,arguments:i}})))}let l;const g=[];const E={};if(p==="darwin"){l="open";if(t.wait){g.push("--wait-apps")}if(t.background){g.push("--background")}if(t.newInstance){g.push("--new")}if(r){g.push("-a",r)}}else if(p==="win32"||c&&!u()){const n=await v();l=c?`${n}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`;g.push("-NoProfile","-NonInteractive","ExecutionPolicy","Bypass","-EncodedCommand");if(!c){E.windowsVerbatimArguments=true}const o=["Start"];if(t.wait){o.push("-Wait")}if(r){o.push(`"\`"${r}\`""`,"-ArgumentList");if(t.target){i.unshift(t.target)}}else if(t.target){o.push(`"${t.target}"`)}if(i.length>0){i=i.map((t=>`"\`"${t}\`""`));o.push(i.join(","))}t.target=Buffer.from(o.join(" "),"utf16le").toString("base64")}else{if(r){l=r}else{const t=!__dirname||__dirname==="/";let r=false;try{await a.access(n.ab+"xdg-open",s.X_OK);r=true}catch{}const i=process.versions.electron||p==="android"||t||!r;l=i?"xdg-open":d}if(i.length>0){g.push(...i)}if(!t.wait){E.stdio="ignore";E.detached=true}}if(t.target){g.push(t.target)}if(p==="darwin"&&i.length>0){g.push("--args",...i)}const S=o.spawn(l,g,E);if(t.wait){return new Promise(((r,n)=>{S.once("error",n);S.once("close",(i=>{if(t.allowNonzeroExitCode&&i>0){n(new Error(`Exited with code ${i}`));return}r(S)}))}))}S.unref();return S};const open=(t,r)=>{if(typeof t!=="string"){throw new TypeError("Expected a `target`")}return baseOpen({...r,target:t})};const openApp=(t,r)=>{if(typeof t!=="string"){throw new TypeError("Expected a `name`")}const{arguments:n=[]}=r||{};if(n!==undefined&&n!==null&&!Array.isArray(n)){throw new TypeError("Expected `appArguments` as Array type")}return baseOpen({...r,app:{name:t,arguments:n}})};function detectArchBinary(t){if(typeof t==="string"||Array.isArray(t)){return t}const{[g]:r}=t;if(!r){throw new Error(`${g} is not supported`)}return r}function detectPlatformBinary({[p]:t},{wsl:r}){if(r&&c){return detectArchBinary(r)}if(!t){throw new Error(`${p} is not supported`)}return detectArchBinary(t)}const E={};l(E,"chrome",(()=>detectPlatformBinary({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}})));l(E,"firefox",(()=>detectPlatformBinary({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"})));l(E,"edge",(()=>detectPlatformBinary({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"})));open.apps=E;open.openApp=openApp;t.exports=open},51213:(t,r,n)=>{"use strict";const i=n(22037);const o=n(57147);const a=n(98768);const isWsl=()=>{if(process.platform!=="linux"){return false}if(i.release().toLowerCase().includes("microsoft")){if(a()){return false}return true}try{return o.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!a():false}catch(t){return false}};if(process.env.__IS_WSL_TEST__){t.exports=isWsl}else{t.exports=isWsl()}},83189:(t,r,n)=>{"use strict";t.exports=n(11868)()},11868:t=>{"use strict";t.exports=rfdc;function copyBuffer(t){if(t instanceof Buffer){return Buffer.from(t)}return new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function rfdc(t){t=t||{};if(t.circles)return rfdcCircles(t);return t.proto?cloneProto:clone;function cloneArray(t,r){var n=Object.keys(t);var i=new Array(n.length);for(var o=0;o<n.length;o++){var a=n[o];var s=t[a];if(typeof s!=="object"||s===null){i[a]=s}else if(s instanceof Date){i[a]=new Date(s)}else if(ArrayBuffer.isView(s)){i[a]=copyBuffer(s)}else{i[a]=r(s)}}return i}function clone(t){if(typeof t!=="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return cloneArray(t,clone);if(t instanceof Map)return new Map(cloneArray(Array.from(t),clone));if(t instanceof Set)return new Set(cloneArray(Array.from(t),clone));var r={};for(var n in t){if(Object.hasOwnProperty.call(t,n)===false)continue;var i=t[n];if(typeof i!=="object"||i===null){r[n]=i}else if(i instanceof Date){r[n]=new Date(i)}else if(i instanceof Map){r[n]=new Map(cloneArray(Array.from(i),clone))}else if(i instanceof Set){r[n]=new Set(cloneArray(Array.from(i),clone))}else if(ArrayBuffer.isView(i)){r[n]=copyBuffer(i)}else{r[n]=clone(i)}}return r}function cloneProto(t){if(typeof t!=="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return cloneArray(t,cloneProto);if(t instanceof Map)return new Map(cloneArray(Array.from(t),cloneProto));if(t instanceof Set)return new Set(cloneArray(Array.from(t),cloneProto));var r={};for(var n in t){var i=t[n];if(typeof i!=="object"||i===null){r[n]=i}else if(i instanceof Date){r[n]=new Date(i)}else if(i instanceof Map){r[n]=new Map(cloneArray(Array.from(i),cloneProto))}else if(i instanceof Set){r[n]=new Set(cloneArray(Array.from(i),cloneProto))}else if(ArrayBuffer.isView(i)){r[n]=copyBuffer(i)}else{r[n]=cloneProto(i)}}return r}}function rfdcCircles(t){var r=[];var n=[];return t.proto?cloneProto:clone;function cloneArray(t,i){var o=Object.keys(t);var a=new Array(o.length);for(var s=0;s<o.length;s++){var c=o[s];var u=t[c];if(typeof u!=="object"||u===null){a[c]=u}else if(u instanceof Date){a[c]=new Date(u)}else if(ArrayBuffer.isView(u)){a[c]=copyBuffer(u)}else{var l=r.indexOf(u);if(l!==-1){a[c]=n[l]}else{a[c]=i(u)}}}return a}function clone(t){if(typeof t!=="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return cloneArray(t,clone);if(t instanceof Map)return new Map(cloneArray(Array.from(t),clone));if(t instanceof Set)return new Set(cloneArray(Array.from(t),clone));var i={};r.push(t);n.push(i);for(var o in t){if(Object.hasOwnProperty.call(t,o)===false)continue;var a=t[o];if(typeof a!=="object"||a===null){i[o]=a}else if(a instanceof Date){i[o]=new Date(a)}else if(a instanceof Map){i[o]=new Map(cloneArray(Array.from(a),clone))}else if(a instanceof Set){i[o]=new Set(cloneArray(Array.from(a),clone))}else if(ArrayBuffer.isView(a)){i[o]=copyBuffer(a)}else{var s=r.indexOf(a);if(s!==-1){i[o]=n[s]}else{i[o]=clone(a)}}}r.pop();n.pop();return i}function cloneProto(t){if(typeof t!=="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return cloneArray(t,cloneProto);if(t instanceof Map)return new Map(cloneArray(Array.from(t),cloneProto));if(t instanceof Set)return new Set(cloneArray(Array.from(t),cloneProto));var i={};r.push(t);n.push(i);for(var o in t){var a=t[o];if(typeof a!=="object"||a===null){i[o]=a}else if(a instanceof Date){i[o]=new Date(a)}else if(a instanceof Map){i[o]=new Map(cloneArray(Array.from(a),cloneProto))}else if(a instanceof Set){i[o]=new Set(cloneArray(Array.from(a),cloneProto))}else if(ArrayBuffer.isView(a)){i[o]=copyBuffer(a)}else{var s=r.indexOf(a);if(s!==-1){i[o]=n[s]}else{i[o]=cloneProto(a)}}}r.pop();n.pop();return i}}},21867:(t,r,n)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var i=n(14300);var o=i.Buffer;function copyProps(t,r){for(var n in t){r[n]=t[n]}}if(o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow){t.exports=i}else{copyProps(i,r);r.Buffer=SafeBuffer}function SafeBuffer(t,r,n){return o(t,r,n)}SafeBuffer.prototype=Object.create(o.prototype);copyProps(o,SafeBuffer);SafeBuffer.from=function(t,r,n){if(typeof t==="number"){throw new TypeError("Argument must not be a number")}return o(t,r,n)};SafeBuffer.alloc=function(t,r,n){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}var i=o(t);if(r!==undefined){if(typeof n==="string"){i.fill(r,n)}else{i.fill(r)}}else{i.fill(0)}return i};SafeBuffer.allocUnsafe=function(t){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}return o(t)};SafeBuffer.allocUnsafeSlow=function(t){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}return i.SlowBuffer(t)}},15118:(t,r,n)=>{"use strict";var i=n(14300);var o=i.Buffer;var a={};var s;for(s in i){if(!i.hasOwnProperty(s))continue;if(s==="SlowBuffer"||s==="Buffer")continue;a[s]=i[s]}var c=a.Buffer={};for(s in o){if(!o.hasOwnProperty(s))continue;if(s==="allocUnsafe"||s==="allocUnsafeSlow")continue;c[s]=o[s]}a.Buffer.prototype=o.prototype;if(!c.from||c.from===Uint8Array.from){c.from=function(t,r,n){if(typeof t==="number"){throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t)}if(t&&typeof t.length==="undefined"){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}return o(t,r,n)}}if(!c.alloc){c.alloc=function(t,r,n){if(typeof t!=="number"){throw new TypeError('The "size" argument must be of type number. Received type '+typeof t)}if(t<0||t>=2*(1<<30)){throw new RangeError('The value "'+t+'" is invalid for option "size"')}var i=o(t);if(!r||r.length===0){i.fill(0)}else if(typeof n==="string"){i.fill(r,n)}else{i.fill(r)}return i}}if(!a.kStringMaxLength){try{a.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(t){}}if(!a.constants){a.constants={MAX_LENGTH:a.kMaxLength};if(a.kStringMaxLength){a.constants.MAX_STRING_LENGTH=a.kStringMaxLength}}t.exports=a},85911:(t,r)=>{r=t.exports=SemVer;var n;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){n=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER");console.log.apply(console,t)}}else{n=function(){}}r.SEMVER_SPEC_VERSION="2.0.0";var i=256;var o=Number.MAX_SAFE_INTEGER||9007199254740991;var a=16;var s=r.re=[];var c=r.src=[];var u=0;var l=u++;c[l]="0|[1-9]\\d*";var d=u++;c[d]="[0-9]+";var p=u++;c[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var g=u++;c[g]="("+c[l]+")\\."+"("+c[l]+")\\."+"("+c[l]+")";var v=u++;c[v]="("+c[d]+")\\."+"("+c[d]+")\\."+"("+c[d]+")";var E=u++;c[E]="(?:"+c[l]+"|"+c[p]+")";var S=u++;c[S]="(?:"+c[d]+"|"+c[p]+")";var w=u++;c[w]="(?:-("+c[E]+"(?:\\."+c[E]+")*))";var x=u++;c[x]="(?:-?("+c[S]+"(?:\\."+c[S]+")*))";var N=u++;c[N]="[0-9A-Za-z-]+";var P=u++;c[P]="(?:\\+("+c[N]+"(?:\\."+c[N]+")*))";var D=u++;var M="v?"+c[g]+c[w]+"?"+c[P]+"?";c[D]="^"+M+"$";var L="[v=\\s]*"+c[v]+c[x]+"?"+c[P]+"?";var U=u++;c[U]="^"+L+"$";var q=u++;c[q]="((?:<|>)?=?)";var B=u++;c[B]=c[d]+"|x|X|\\*";var F=u++;c[F]=c[l]+"|x|X|\\*";var j=u++;c[j]="[v=\\s]*("+c[F]+")"+"(?:\\.("+c[F]+")"+"(?:\\.("+c[F]+")"+"(?:"+c[w]+")?"+c[P]+"?"+")?)?";var H=u++;c[H]="[v=\\s]*("+c[B]+")"+"(?:\\.("+c[B]+")"+"(?:\\.("+c[B]+")"+"(?:"+c[x]+")?"+c[P]+"?"+")?)?";var z=u++;c[z]="^"+c[q]+"\\s*"+c[j]+"$";var V=u++;c[V]="^"+c[q]+"\\s*"+c[H]+"$";var Y=u++;c[Y]="(?:^|[^\\d])"+"(\\d{1,"+a+"})"+"(?:\\.(\\d{1,"+a+"}))?"+"(?:\\.(\\d{1,"+a+"}))?"+"(?:$|[^\\d])";var G=u++;c[G]="(?:~>?)";var W=u++;c[W]="(\\s*)"+c[G]+"\\s+";s[W]=new RegExp(c[W],"g");var $="$1~";var K=u++;c[K]="^"+c[G]+c[j]+"$";var J=u++;c[J]="^"+c[G]+c[H]+"$";var Z=u++;c[Z]="(?:\\^)";var X=u++;c[X]="(\\s*)"+c[Z]+"\\s+";s[X]=new RegExp(c[X],"g");var Q="$1^";var ee=u++;c[ee]="^"+c[Z]+c[j]+"$";var te=u++;c[te]="^"+c[Z]+c[H]+"$";var re=u++;c[re]="^"+c[q]+"\\s*("+L+")$|^$";var ne=u++;c[ne]="^"+c[q]+"\\s*("+M+")$|^$";var ie=u++;c[ie]="(\\s*)"+c[q]+"\\s*("+L+"|"+c[j]+")";s[ie]=new RegExp(c[ie],"g");var oe="$1$2$3";var ae=u++;c[ae]="^\\s*("+c[j]+")"+"\\s+-\\s+"+"("+c[j]+")"+"\\s*$";var se=u++;c[se]="^\\s*("+c[H]+")"+"\\s+-\\s+"+"("+c[H]+")"+"\\s*$";var ce=u++;c[ce]="(<|>)?=?\\s*\\*";for(var ue=0;ue<u;ue++){n(ue,c[ue]);if(!s[ue]){s[ue]=new RegExp(c[ue])}}r.parse=parse;function parse(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof SemVer){return t}if(typeof t!=="string"){return null}if(t.length>i){return null}var n=r.loose?s[U]:s[D];if(!n.test(t)){return null}try{return new SemVer(t,r)}catch(t){return null}}r.valid=valid;function valid(t,r){var n=parse(t,r);return n?n.version:null}r.clean=clean;function clean(t,r){var n=parse(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null}r.SemVer=SemVer;function SemVer(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof SemVer){if(t.loose===r.loose){return t}else{t=t.version}}else if(typeof t!=="string"){throw new TypeError("Invalid Version: "+t)}if(t.length>i){throw new TypeError("version is longer than "+i+" characters")}if(!(this instanceof SemVer)){return new SemVer(t,r)}n("SemVer",t,r);this.options=r;this.loose=!!r.loose;var a=t.trim().match(r.loose?s[U]:s[D]);if(!a){throw new TypeError("Invalid Version: "+t)}this.raw=t;this.major=+a[1];this.minor=+a[2];this.patch=+a[3];if(this.major>o||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>o||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>o||this.patch<0){throw new TypeError("Invalid patch version")}if(!a[4]){this.prerelease=[]}else{this.prerelease=a[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var r=+t;if(r>=0&&r<o){return r}}return t}))}this.build=a[5]?a[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(t){n("SemVer.compare",this.version,this.options,t);if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}return this.compareMain(t)||this.comparePre(t)};SemVer.prototype.compareMain=function(t){if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}return compareIdentifiers(this.major,t.major)||compareIdentifiers(this.minor,t.minor)||compareIdentifiers(this.patch,t.patch)};SemVer.prototype.comparePre=function(t){if(!(t instanceof SemVer)){t=new SemVer(t,this.options)}if(this.prerelease.length&&!t.prerelease.length){return-1}else if(!this.prerelease.length&&t.prerelease.length){return 1}else if(!this.prerelease.length&&!t.prerelease.length){return 0}var r=0;do{var i=this.prerelease[r];var o=t.prerelease[r];n("prerelease compare",r,i,o);if(i===undefined&&o===undefined){return 0}else if(o===undefined){return 1}else if(i===undefined){return-1}else if(i===o){continue}else{return compareIdentifiers(i,o)}}while(++r)};SemVer.prototype.inc=function(t,r){switch(t){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",r);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",r);break;case"prepatch":this.prerelease.length=0;this.inc("patch",r);this.inc("pre",r);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",r)}this.inc("pre",r);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var n=this.prerelease.length;while(--n>=0){if(typeof this.prerelease[n]==="number"){this.prerelease[n]++;n=-2}}if(n===-1){this.prerelease.push(0)}}if(r){if(this.prerelease[0]===r){if(isNaN(this.prerelease[1])){this.prerelease=[r,0]}}else{this.prerelease=[r,0]}}break;default:throw new Error("invalid increment argument: "+t)}this.format();this.raw=this.version;return this};r.inc=inc;function inc(t,r,n,i){if(typeof n==="string"){i=n;n=undefined}try{return new SemVer(t,n).inc(r,i).version}catch(t){return null}}r.diff=diff;function diff(t,r){if(eq(t,r)){return null}else{var n=parse(t);var i=parse(r);var o="";if(n.prerelease.length||i.prerelease.length){o="pre";var a="prerelease"}for(var s in n){if(s==="major"||s==="minor"||s==="patch"){if(n[s]!==i[s]){return o+s}}}return a}}r.compareIdentifiers=compareIdentifiers;var le=/^[0-9]+$/;function compareIdentifiers(t,r){var n=le.test(t);var i=le.test(r);if(n&&i){t=+t;r=+r}return t===r?0:n&&!i?-1:i&&!n?1:t<r?-1:1}r.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(t,r){return compareIdentifiers(r,t)}r.major=major;function major(t,r){return new SemVer(t,r).major}r.minor=minor;function minor(t,r){return new SemVer(t,r).minor}r.patch=patch;function patch(t,r){return new SemVer(t,r).patch}r.compare=compare;function compare(t,r,n){return new SemVer(t,n).compare(new SemVer(r,n))}r.compareLoose=compareLoose;function compareLoose(t,r){return compare(t,r,true)}r.rcompare=rcompare;function rcompare(t,r,n){return compare(r,t,n)}r.sort=sort;function sort(t,n){return t.sort((function(t,i){return r.compare(t,i,n)}))}r.rsort=rsort;function rsort(t,n){return t.sort((function(t,i){return r.rcompare(t,i,n)}))}r.gt=gt;function gt(t,r,n){return compare(t,r,n)>0}r.lt=lt;function lt(t,r,n){return compare(t,r,n)<0}r.eq=eq;function eq(t,r,n){return compare(t,r,n)===0}r.neq=neq;function neq(t,r,n){return compare(t,r,n)!==0}r.gte=gte;function gte(t,r,n){return compare(t,r,n)>=0}r.lte=lte;function lte(t,r,n){return compare(t,r,n)<=0}r.cmp=cmp;function cmp(t,r,n,i){switch(r){case"===":if(typeof t==="object")t=t.version;if(typeof n==="object")n=n.version;return t===n;case"!==":if(typeof t==="object")t=t.version;if(typeof n==="object")n=n.version;return t!==n;case"":case"=":case"==":return eq(t,n,i);case"!=":return neq(t,n,i);case">":return gt(t,n,i);case">=":return gte(t,n,i);case"<":return lt(t,n,i);case"<=":return lte(t,n,i);default:throw new TypeError("Invalid operator: "+r)}}r.Comparator=Comparator;function Comparator(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof Comparator){if(t.loose===!!r.loose){return t}else{t=t.value}}if(!(this instanceof Comparator)){return new Comparator(t,r)}n("comparator",t,r);this.options=r;this.loose=!!r.loose;this.parse(t);if(this.semver===fe){this.value=""}else{this.value=this.operator+this.semver.version}n("comp",this)}var fe={};Comparator.prototype.parse=function(t){var r=this.options.loose?s[re]:s[ne];var n=t.match(r);if(!n){throw new TypeError("Invalid comparator: "+t)}this.operator=n[1];if(this.operator==="="){this.operator=""}if(!n[2]){this.semver=fe}else{this.semver=new SemVer(n[2],this.options.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(t){n("Comparator.test",t,this.options.loose);if(this.semver===fe){return true}if(typeof t==="string"){t=new SemVer(t,this.options)}return cmp(t,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(t,r){if(!(t instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}var n;if(this.operator===""){n=new Range(t.value,r);return satisfies(this.value,n,r)}else if(t.operator===""){n=new Range(this.value,r);return satisfies(t.semver,n,r)}var i=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">");var o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<");var a=this.semver.version===t.semver.version;var s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<=");var c=cmp(this.semver,"<",t.semver,r)&&((this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"));var u=cmp(this.semver,">",t.semver,r)&&((this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">"));return i||o||a&&s||c||u};r.Range=Range;function Range(t,r){if(!r||typeof r!=="object"){r={loose:!!r,includePrerelease:false}}if(t instanceof Range){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease){return t}else{return new Range(t.raw,r)}}if(t instanceof Comparator){return new Range(t.value,r)}if(!(this instanceof Range)){return new Range(t,r)}this.options=r;this.loose=!!r.loose;this.includePrerelease=!!r.includePrerelease;this.raw=t;this.set=t.split(/\s*\|\|\s*/).map((function(t){return this.parseRange(t.trim())}),this).filter((function(t){return t.length}));if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+t)}this.format()}Range.prototype.format=function(){this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(t){var r=this.options.loose;t=t.trim();var i=r?s[se]:s[ae];t=t.replace(i,hyphenReplace);n("hyphen replace",t);t=t.replace(s[ie],oe);n("comparator trim",t,s[ie]);t=t.replace(s[W],$);t=t.replace(s[X],Q);t=t.split(/\s+/).join(" ");var o=r?s[re]:s[ne];var a=t.split(" ").map((function(t){return parseComparator(t,this.options)}),this).join(" ").split(/\s+/);if(this.options.loose){a=a.filter((function(t){return!!t.match(o)}))}a=a.map((function(t){return new Comparator(t,this.options)}),this);return a};Range.prototype.intersects=function(t,r){if(!(t instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((function(n){return n.every((function(n){return t.set.some((function(t){return t.every((function(t){return n.intersects(t,r)}))}))}))}))};r.toComparators=toComparators;function toComparators(t,r){return new Range(t,r).set.map((function(t){return t.map((function(t){return t.value})).join(" ").trim().split(" ")}))}function parseComparator(t,r){n("comp",t,r);t=replaceCarets(t,r);n("caret",t);t=replaceTildes(t,r);n("tildes",t);t=replaceXRanges(t,r);n("xrange",t);t=replaceStars(t,r);n("stars",t);return t}function isX(t){return!t||t.toLowerCase()==="x"||t==="*"}function replaceTildes(t,r){return t.trim().split(/\s+/).map((function(t){return replaceTilde(t,r)})).join(" ")}function replaceTilde(t,r){var i=r.loose?s[J]:s[K];return t.replace(i,(function(r,i,o,a,s){n("tilde",t,r,i,o,a,s);var c;if(isX(i)){c=""}else if(isX(o)){c=">="+i+".0.0 <"+(+i+1)+".0.0"}else if(isX(a)){c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"}else if(s){n("replaceTilde pr",s);c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+(+o+1)+".0"}else{c=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0"}n("tilde return",c);return c}))}function replaceCarets(t,r){return t.trim().split(/\s+/).map((function(t){return replaceCaret(t,r)})).join(" ")}function replaceCaret(t,r){n("caret",t,r);var i=r.loose?s[te]:s[ee];return t.replace(i,(function(r,i,o,a,s){n("caret",t,r,i,o,a,s);var c;if(isX(i)){c=""}else if(isX(o)){c=">="+i+".0.0 <"+(+i+1)+".0.0"}else if(isX(a)){if(i==="0"){c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"}else{c=">="+i+"."+o+".0 <"+(+i+1)+".0.0"}}else if(s){n("replaceCaret pr",s);if(i==="0"){if(o==="0"){c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+o+"."+(+a+1)}else{c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+(+o+1)+".0"}}else{c=">="+i+"."+o+"."+a+"-"+s+" <"+(+i+1)+".0.0"}}else{n("no pr");if(i==="0"){if(o==="0"){c=">="+i+"."+o+"."+a+" <"+i+"."+o+"."+(+a+1)}else{c=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0"}}else{c=">="+i+"."+o+"."+a+" <"+(+i+1)+".0.0"}}n("caret return",c);return c}))}function replaceXRanges(t,r){n("replaceXRanges",t,r);return t.split(/\s+/).map((function(t){return replaceXRange(t,r)})).join(" ")}function replaceXRange(t,r){t=t.trim();var i=r.loose?s[V]:s[z];return t.replace(i,(function(r,i,o,a,s,c){n("xRange",t,r,i,o,a,s,c);var u=isX(o);var l=u||isX(a);var d=l||isX(s);var p=d;if(i==="="&&p){i=""}if(u){if(i===">"||i==="<"){r="<0.0.0"}else{r="*"}}else if(i&&p){if(l){a=0}s=0;if(i===">"){i=">=";if(l){o=+o+1;a=0;s=0}else{a=+a+1;s=0}}else if(i==="<="){i="<";if(l){o=+o+1}else{a=+a+1}}r=i+o+"."+a+"."+s}else if(l){r=">="+o+".0.0 <"+(+o+1)+".0.0"}else if(d){r=">="+o+"."+a+".0 <"+o+"."+(+a+1)+".0"}n("xRange return",r);return r}))}function replaceStars(t,r){n("replaceStars",t,r);return t.trim().replace(s[ce],"")}function hyphenReplace(t,r,n,i,o,a,s,c,u,l,d,p,g){if(isX(n)){r=""}else if(isX(i)){r=">="+n+".0.0"}else if(isX(o)){r=">="+n+"."+i+".0"}else{r=">="+r}if(isX(u)){c=""}else if(isX(l)){c="<"+(+u+1)+".0.0"}else if(isX(d)){c="<"+u+"."+(+l+1)+".0"}else if(p){c="<="+u+"."+l+"."+d+"-"+p}else{c="<="+c}return(r+" "+c).trim()}Range.prototype.test=function(t){if(!t){return false}if(typeof t==="string"){t=new SemVer(t,this.options)}for(var r=0;r<this.set.length;r++){if(testSet(this.set[r],t,this.options)){return true}}return false};function testSet(t,r,i){for(var o=0;o<t.length;o++){if(!t[o].test(r)){return false}}if(r.prerelease.length&&!i.includePrerelease){for(o=0;o<t.length;o++){n(t[o].semver);if(t[o].semver===fe){continue}if(t[o].semver.prerelease.length>0){var a=t[o].semver;if(a.major===r.major&&a.minor===r.minor&&a.patch===r.patch){return true}}}return false}return true}r.satisfies=satisfies;function satisfies(t,r,n){try{r=new Range(r,n)}catch(t){return false}return r.test(t)}r.maxSatisfying=maxSatisfying;function maxSatisfying(t,r,n){var i=null;var o=null;try{var a=new Range(r,n)}catch(t){return null}t.forEach((function(t){if(a.test(t)){if(!i||o.compare(t)===-1){i=t;o=new SemVer(i,n)}}}));return i}r.minSatisfying=minSatisfying;function minSatisfying(t,r,n){var i=null;var o=null;try{var a=new Range(r,n)}catch(t){return null}t.forEach((function(t){if(a.test(t)){if(!i||o.compare(t)===1){i=t;o=new SemVer(i,n)}}}));return i}r.minVersion=minVersion;function minVersion(t,r){t=new Range(t,r);var n=new SemVer("0.0.0");if(t.test(n)){return n}n=new SemVer("0.0.0-0");if(t.test(n)){return n}n=null;for(var i=0;i<t.set.length;++i){var o=t.set[i];o.forEach((function(t){var r=new SemVer(t.semver.version);switch(t.operator){case">":if(r.prerelease.length===0){r.patch++}else{r.prerelease.push(0)}r.raw=r.format();case"":case">=":if(!n||gt(n,r)){n=r}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}}))}if(n&&t.test(n)){return n}return null}r.validRange=validRange;function validRange(t,r){try{return new Range(t,r).range||"*"}catch(t){return null}}r.ltr=ltr;function ltr(t,r,n){return outside(t,r,"<",n)}r.gtr=gtr;function gtr(t,r,n){return outside(t,r,">",n)}r.outside=outside;function outside(t,r,n,i){t=new SemVer(t,i);r=new Range(r,i);var o,a,s,c,u;switch(n){case">":o=gt;a=lte;s=lt;c=">";u=">=";break;case"<":o=lt;a=gte;s=gt;c="<";u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(t,r,i)){return false}for(var l=0;l<r.set.length;++l){var d=r.set[l];var p=null;var g=null;d.forEach((function(t){if(t.semver===fe){t=new Comparator(">=0.0.0")}p=p||t;g=g||t;if(o(t.semver,p.semver,i)){p=t}else if(s(t.semver,g.semver,i)){g=t}}));if(p.operator===c||p.operator===u){return false}if((!g.operator||g.operator===c)&&a(t,g.semver)){return false}else if(g.operator===u&&s(t,g.semver)){return false}}return true}r.prerelease=prerelease;function prerelease(t,r){var n=parse(t,r);return n&&n.prerelease.length?n.prerelease:null}r.intersects=intersects;function intersects(t,r,n){t=new Range(t,n);r=new Range(r,n);return t.intersects(r)}r.coerce=coerce;function coerce(t){if(t instanceof SemVer){return t}if(typeof t!=="string"){return null}var r=t.match(s[Y]);if(r==null){return null}return parse(r[1]+"."+(r[2]||"0")+"."+(r[3]||"0"))}},14334:(t,r,n)=>{"use strict";var i=n(74538);var o=n(28803);var a=n(20504);var s=i("%TypeError%");var c=i("%WeakMap%",true);var u=i("%Map%",true);var l=o("WeakMap.prototype.get",true);var d=o("WeakMap.prototype.set",true);var p=o("WeakMap.prototype.has",true);var g=o("Map.prototype.get",true);var v=o("Map.prototype.set",true);var E=o("Map.prototype.has",true);var listGetNode=function(t,r){for(var n=t,i;(i=n.next)!==null;n=i){if(i.key===r){n.next=i.next;i.next=t.next;t.next=i;return i}}};var listGet=function(t,r){var n=listGetNode(t,r);return n&&n.value};var listSet=function(t,r,n){var i=listGetNode(t,r);if(i){i.value=n}else{t.next={key:r,next:t.next,value:n}}};var listHas=function(t,r){return!!listGetNode(t,r)};t.exports=function getSideChannel(){var t;var r;var n;var i={assert:function(t){if(!i.has(t)){throw new s("Side channel does not contain "+a(t))}},get:function(i){if(c&&i&&(typeof i==="object"||typeof i==="function")){if(t){return l(t,i)}}else if(u){if(r){return g(r,i)}}else{if(n){return listGet(n,i)}}},has:function(i){if(c&&i&&(typeof i==="object"||typeof i==="function")){if(t){return p(t,i)}}else if(u){if(r){return E(r,i)}}else{if(n){return listHas(n,i)}}return false},set:function(i,o){if(c&&i&&(typeof i==="object"||typeof i==="function")){if(!t){t=new c}d(t,i,o)}else if(u){if(!r){r=new u}v(r,i,o)}else{if(!n){n={key:{},next:null}}listSet(n,i,o)}}};return i}},33988:(t,r)=>{!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function sprintf(t){return sprintf_format(sprintf_parse(t),arguments)}function vsprintf(t,r){return sprintf.apply(null,[t].concat(r||[]))}function sprintf_format(r,n){var i=1,o=r.length,a,s="",c,u,l,d,p,g,v,E;for(c=0;c<o;c++){if(typeof r[c]==="string"){s+=r[c]}else if(typeof r[c]==="object"){l=r[c];if(l.keys){a=n[i];for(u=0;u<l.keys.length;u++){if(a==undefined){throw new Error(sprintf('[sprintf] Cannot access property "%s" of undefined value "%s"',l.keys[u],l.keys[u-1]))}a=a[l.keys[u]]}}else if(l.param_no){a=n[l.param_no]}else{a=n[i++]}if(t.not_type.test(l.type)&&t.not_primitive.test(l.type)&&a instanceof Function){a=a()}if(t.numeric_arg.test(l.type)&&(typeof a!=="number"&&isNaN(a))){throw new TypeError(sprintf("[sprintf] expecting number but found %T",a))}if(t.number.test(l.type)){v=a>=0}switch(l.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l.width?parseInt(l.width):0);break;case"e":a=l.precision?parseFloat(a).toExponential(l.precision):parseFloat(a).toExponential();break;case"f":a=l.precision?parseFloat(a).toFixed(l.precision):parseFloat(a);break;case"g":a=l.precision?String(Number(a.toPrecision(l.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a);a=l.precision?a.substring(0,l.precision):a;break;case"t":a=String(!!a);a=l.precision?a.substring(0,l.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();a=l.precision?a.substring(0,l.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf();a=l.precision?a.substring(0,l.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase();break}if(t.json.test(l.type)){s+=a}else{if(t.number.test(l.type)&&(!v||l.sign)){E=v?"+":"-";a=a.toString().replace(t.sign,"")}else{E=""}p=l.pad_char?l.pad_char==="0"?"0":l.pad_char.charAt(1):" ";g=l.width-(E+a).length;d=l.width?g>0?p.repeat(g):"":"";s+=l.align?E+a+d:p==="0"?E+d+a:d+E+a}}}return s}var n=Object.create(null);function sprintf_parse(r){if(n[r]){return n[r]}var i=r,o,a=[],s=0;while(i){if((o=t.text.exec(i))!==null){a.push(o[0])}else if((o=t.modulo.exec(i))!==null){a.push("%")}else if((o=t.placeholder.exec(i))!==null){if(o[2]){s|=1;var c=[],u=o[2],l=[];if((l=t.key.exec(u))!==null){c.push(l[1]);while((u=u.substring(l[0].length))!==""){if((l=t.key_access.exec(u))!==null){c.push(l[1])}else if((l=t.index_access.exec(u))!==null){c.push(l[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}o[2]=c}else{s|=2}if(s===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}a.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}i=i.substring(o[0].length)}return n[r]=a}if(true){r.sprintf=sprintf;r.vsprintf=vsprintf}if(typeof window!=="undefined"){window["sprintf"]=sprintf;window["vsprintf"]=vsprintf;if(typeof define==="function"&&define["amd"]){define((function(){return{sprintf:sprintf,vsprintf:vsprintf}}))}}}()},24477:(t,r,n)=>{"use strict";const i=n(95687);t.exports=(t,r)=>{r=typeof r==="undefined"?Infinity:r;const n=new Map;let o=false;let a=true;if(t instanceof i.Server){t.on("secureConnection",onConnection)}else{t.on("connection",onConnection)}t.on("request",onRequest);t.stop=stop;t._pendingSockets=n;return t;function onConnection(t){n.set(t,0);t.once("close",(()=>n.delete(t)))}function onRequest(t,r){n.set(t.socket,n.get(t.socket)+1);r.once("finish",(()=>{const r=n.get(t.socket)-1;n.set(t.socket,r);if(o&&r===0){t.socket.end()}}))}function stop(i){setImmediate((()=>{o=true;if(r<Infinity){setTimeout(destroyAll,r).unref()}t.close((t=>{if(i){i(t,a)}}));n.forEach(endIfIdle)}))}function endIfIdle(t,r){if(t===0)r.end()}function destroyAll(){a=false;n.forEach(((t,r)=>r.end()));setImmediate((()=>{n.forEach(((t,r)=>r.destroy()))}))}}},94841:(t,r,n)=>{"use strict";var i=n(2279).Buffer;var o=i.isEncoding||function(t){t=""+t;switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(t){if(!t)return"utf8";var r;while(true){switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(r)return;t=(""+t).toLowerCase();r=true}}}function normalizeEncoding(t){var r=_normalizeEncoding(t);if(typeof r!=="string"&&(i.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return r||t}r.s=StringDecoder;function StringDecoder(t){this.encoding=normalizeEncoding(t);var r;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;r=4;break;case"utf8":this.fillLast=utf8FillLast;r=4;break;case"base64":this.text=base64Text;this.end=base64End;r=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=i.allocUnsafe(r)}StringDecoder.prototype.write=function(t){if(t.length===0)return"";var r;var n;if(this.lastNeed){r=this.fillLast(t);if(r===undefined)return"";n=this.lastNeed;this.lastNeed=0}else{n=0}if(n<t.length)return r?r+this.text(t,n):this.text(t,n);return r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length){t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length);this.lastNeed-=t.length};function utf8CheckByte(t){if(t<=127)return 0;else if(t>>5===6)return 2;else if(t>>4===14)return 3;else if(t>>3===30)return 4;return t>>6===2?-1:-2}function utf8CheckIncomplete(t,r,n){var i=r.length-1;if(i<n)return 0;var o=utf8CheckByte(r[i]);if(o>=0){if(o>0)t.lastNeed=o-1;return o}if(--i<n||o===-2)return 0;o=utf8CheckByte(r[i]);if(o>=0){if(o>0)t.lastNeed=o-2;return o}if(--i<n||o===-2)return 0;o=utf8CheckByte(r[i]);if(o>=0){if(o>0){if(o===2)o=0;else t.lastNeed=o-3}return o}return 0}function utf8CheckExtraBytes(t,r,n){if((r[0]&192)!==128){t.lastNeed=0;return""}if(t.lastNeed>1&&r.length>1){if((r[1]&192)!==128){t.lastNeed=1;return""}if(t.lastNeed>2&&r.length>2){if((r[2]&192)!==128){t.lastNeed=2;return""}}}}function utf8FillLast(t){var r=this.lastTotal-this.lastNeed;var n=utf8CheckExtraBytes(this,t,r);if(n!==undefined)return n;if(this.lastNeed<=t.length){t.copy(this.lastChar,r,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}t.copy(this.lastChar,r,0,t.length);this.lastNeed-=t.length}function utf8Text(t,r){var n=utf8CheckIncomplete(this,t,r);if(!this.lastNeed)return t.toString("utf8",r);this.lastTotal=n;var i=t.length-(n-this.lastNeed);t.copy(this.lastChar,0,i);return t.toString("utf8",r,i)}function utf8End(t){var r=t&&t.length?this.write(t):"";if(this.lastNeed)return r+"";return r}function utf16Text(t,r){if((t.length-r)%2===0){var n=t.toString("utf16le",r);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=t[t.length-2];this.lastChar[1]=t[t.length-1];return n.slice(0,-1)}}return n}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=t[t.length-1];return t.toString("utf16le",r,t.length-1)}function utf16End(t){var r=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,n)}return r}function base64Text(t,r){var n=(t.length-r)%3;if(n===0)return t.toString("base64",r);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=t[t.length-1]}else{this.lastChar[0]=t[t.length-2];this.lastChar[1]=t[t.length-1]}return t.toString("base64",r,t.length-n)}function base64End(t){var r=t&&t.length?this.write(t):"";if(this.lastNeed)return r+this.lastChar.toString("base64",0,3-this.lastNeed);return r}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}},2279:(t,r,n)=>{var i=n(14300);var o=i.Buffer;function copyProps(t,r){for(var n in t){r[n]=t[n]}}if(o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow){t.exports=i}else{copyProps(i,r);r.Buffer=SafeBuffer}function SafeBuffer(t,r,n){return o(t,r,n)}copyProps(o,SafeBuffer);SafeBuffer.from=function(t,r,n){if(typeof t==="number"){throw new TypeError("Argument must not be a number")}return o(t,r,n)};SafeBuffer.alloc=function(t,r,n){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}var i=o(t);if(r!==undefined){if(typeof n==="string"){i.fill(r,n)}else{i.fill(r)}}else{i.fill(0)}return i};SafeBuffer.allocUnsafe=function(t){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}return o(t)};SafeBuffer.allocUnsafeSlow=function(t){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}return i.SlowBuffer(t)}},59318:(t,r,n)=>{"use strict";const i=n(22037);const o=n(31621);const a=process.env;let s;if(o("no-color")||o("no-colors")||o("color=false")){s=false}else if(o("color")||o("colors")||o("color=true")||o("color=always")){s=true}if("FORCE_COLOR"in a){s=a.FORCE_COLOR.length===0||parseInt(a.FORCE_COLOR,10)!==0}function translateLevel(t){if(t===0){return false}return{level:t,hasBasic:true,has256:t>=2,has16m:t>=3}}function supportsColor(t){if(s===false){return 0}if(o("color=16m")||o("color=full")||o("color=truecolor")){return 3}if(o("color=256")){return 2}if(t&&!t.isTTY&&s!==true){return 0}const r=s?1:0;if(process.platform==="win32"){const t=i.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586){return Number(t[2])>=14931?3:2}return 1}if("CI"in a){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((t=>t in a))||a.CI_NAME==="codeship"){return 1}return r}if("TEAMCITY_VERSION"in a){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0}if(a.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in a){const t=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(a.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)){return 1}if("COLORTERM"in a){return 1}if(a.TERM==="dumb"){return r}return r}function getSupportLevel(t){const r=supportsColor(t);return translateLevel(r)}t.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},83969:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const i=n(35638);const o=n(62388);class PendingOperation{constructor(t){this.timeoutMillis=t;this.deferred=o.defer();this.possibleTimeoutCause=null;this.isRejected=false;this.promise=timeout(this.deferred.promise,t).catch((t=>{if(t instanceof i.TimeoutError){if(this.possibleTimeoutCause){t=new i.TimeoutError(this.possibleTimeoutCause.message)}else{t=new i.TimeoutError("operation timed out for an unknown reason")}}this.isRejected=true;return Promise.reject(t)}))}abort(){this.reject(new Error("aborted"))}reject(t){this.deferred.reject(t)}resolve(t){this.deferred.resolve(t)}}r.PendingOperation=PendingOperation;function timeout(t,r){return new Promise(((n,o)=>{const a=setTimeout((()=>o(new i.TimeoutError)),r);t.then((t=>{clearTimeout(a);n(t)})).catch((t=>{clearTimeout(a);o(t)}))}))}},2911:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const i=n(83969);const o=n(37606);const a=n(62388);const s=n(82361);const c=n(39512);class Pool{constructor(t){this.destroyed=false;this.emitter=new s.EventEmitter;t=t||{};if(!t.create){throw new Error("Tarn: opt.create function most be provided")}if(!t.destroy){throw new Error("Tarn: opt.destroy function most be provided")}if(typeof t.min!=="number"||t.min<0||t.min!==Math.round(t.min)){throw new Error("Tarn: opt.min must be an integer >= 0")}if(typeof t.max!=="number"||t.max<=0||t.max!==Math.round(t.max)){throw new Error("Tarn: opt.max must be an integer > 0")}if(t.min>t.max){throw new Error("Tarn: opt.max is smaller than opt.min")}if(!a.checkOptionalTime(t.acquireTimeoutMillis)){throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(t.acquireTimeoutMillis))}if(!a.checkOptionalTime(t.createTimeoutMillis)){throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(t.createTimeoutMillis))}if(!a.checkOptionalTime(t.destroyTimeoutMillis)){throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(t.destroyTimeoutMillis))}if(!a.checkOptionalTime(t.idleTimeoutMillis)){throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(t.idleTimeoutMillis))}if(!a.checkOptionalTime(t.reapIntervalMillis)){throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(t.reapIntervalMillis))}if(!a.checkOptionalTime(t.createRetryIntervalMillis)){throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(t.createRetryIntervalMillis))}const r={create:true,validate:true,destroy:true,log:true,min:true,max:true,acquireTimeoutMillis:true,createTimeoutMillis:true,destroyTimeoutMillis:true,idleTimeoutMillis:true,reapIntervalMillis:true,createRetryIntervalMillis:true,propagateCreateError:true};for(const n of Object.keys(t)){if(!r[n]){throw new Error(`Tarn: unsupported option opt.${n}`)}}this.creator=t.create;this.destroyer=t.destroy;this.validate=typeof t.validate==="function"?t.validate:()=>true;this.log=t.log||(()=>{});this.acquireTimeoutMillis=t.acquireTimeoutMillis||3e4;this.createTimeoutMillis=t.createTimeoutMillis||3e4;this.destroyTimeoutMillis=t.destroyTimeoutMillis||5e3;this.idleTimeoutMillis=t.idleTimeoutMillis||3e4;this.reapIntervalMillis=t.reapIntervalMillis||1e3;this.createRetryIntervalMillis=t.createRetryIntervalMillis||200;this.propagateCreateError=!!t.propagateCreateError;this.min=t.min;this.max=t.max;this.used=[];this.free=[];this.pendingCreates=[];this.pendingAcquires=[];this.pendingDestroys=[];this.pendingValidations=[];this.destroyed=false;this.interval=null;this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){const t=this.eventId++;this._executeEventHandlers("acquireRequest",t);const r=new i.PendingOperation(this.acquireTimeoutMillis);this.pendingAcquires.push(r);r.promise=r.promise.then((r=>{this._executeEventHandlers("acquireSuccess",t,r);return r})).catch((n=>{this._executeEventHandlers("acquireFail",t,n);remove(this.pendingAcquires,r);return Promise.reject(n)}));this._tryAcquireOrCreate();return r}release(t){this._executeEventHandlers("release",t);for(let r=0,n=this.used.length;r<n;++r){const n=this.used[r];if(n.resource===t){this.used.splice(r,1);this.free.push(n.resolve());this._tryAcquireOrCreate();return true}}return false}isEmpty(){return[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce(((t,r)=>t+r))===0}check(){const t=a.now();const r=[];const n=this.min-this.used.length;const i=this.free.length-n;let o=0;this.free.forEach((n=>{if(a.duration(t,n.timestamp)>=this.idleTimeoutMillis&&o<i){o++;this._destroy(n.resource)}else{r.push(n)}}));this.free=r;if(this.isEmpty()){this._stopReaping()}}destroy(){const t=this.eventId++;this._executeEventHandlers("poolDestroyRequest",t);this._stopReaping();this.destroyed=true;return a.reflect(Promise.all(this.pendingCreates.map((t=>a.reflect(t.promise)))).then((()=>new Promise(((t,r)=>{if(this.numPendingValidations()===0){t();return}const n=setInterval((()=>{if(this.numPendingValidations()===0){c.clearInterval(n);t()}}),100)})))).then((()=>Promise.all(this.used.map((t=>a.reflect(t.promise)))))).then((()=>Promise.all(this.pendingAcquires.map((t=>{t.abort();return a.reflect(t.promise)}))))).then((()=>Promise.all(this.free.map((t=>a.reflect(this._destroy(t.resource))))))).then((()=>Promise.all(this.pendingDestroys.map((t=>t.promise))))).then((()=>{this.free=[];this.pendingAcquires=[]}))).then((r=>{this._executeEventHandlers("poolDestroySuccess",t);this.emitter.removeAllListeners();return r}))}on(t,r){this.emitter.on(t,r)}removeListener(t,r){this.emitter.removeListener(t,r)}removeAllListeners(t){this.emitter.removeAllListeners(t)}_tryAcquireOrCreate(){if(this.destroyed){return}if(this._hasFreeResources()){this._doAcquire()}else if(this._shouldCreateMoreResources()){this._doCreate()}}_hasFreeResources(){return this.free.length>0}_doAcquire(){while(this._canAcquire()){const t=this.pendingAcquires.shift();const r=this.free.pop();if(r===undefined||t===undefined){const t="this.free was empty while trying to acquire resource";this.log(`Tarn: ${t}`,"warn");throw new Error(`Internal error, should never happen. ${t}`)}this.pendingValidations.push(t);this.used.push(r);const n=new i.PendingOperation(this.acquireTimeoutMillis);t.promise.catch((t=>{n.abort()}));n.promise.catch((t=>{this.log("Tarn: resource validator threw an exception "+t.stack,"warn");return false})).then((n=>{try{if(n&&!t.isRejected){this._startReaping();t.resolve(r.resource)}else{remove(this.used,r);if(!n){this._destroy(r.resource);setTimeout((()=>{this._tryAcquireOrCreate()}),0)}else{this.free.push(r)}if(!t.isRejected){this.pendingAcquires.unshift(t)}}}finally{remove(this.pendingValidations,t)}}));this._validateResource(r.resource).then((t=>{n.resolve(t)})).catch((t=>{n.reject(t)}))}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource(t){try{return Promise.resolve(this.validate(t))}catch(t){return Promise.reject(t)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){const t=this.pendingAcquires.slice();const r=this._create();r.promise.then((()=>{this._tryAcquireOrCreate();return null})).catch((r=>{if(this.propagateCreateError&&this.pendingAcquires.length!==0){this.pendingAcquires[0].reject(r)}t.forEach((t=>{t.possibleTimeoutCause=r}));a.delay(this.createRetryIntervalMillis).then((()=>this._tryAcquireOrCreate()))}))}_create(){const t=this.eventId++;this._executeEventHandlers("createRequest",t);const r=new i.PendingOperation(this.createTimeoutMillis);r.promise=r.promise.catch((n=>{if(remove(this.pendingCreates,r)){this._executeEventHandlers("createFail",t,n)}throw n}));this.pendingCreates.push(r);callbackOrPromise(this.creator).then((n=>{if(r.isRejected){this.destroyer(n);return null}remove(this.pendingCreates,r);this.free.push(new o.Resource(n));r.resolve(n);this._executeEventHandlers("createSuccess",t,n);return null})).catch((n=>{if(r.isRejected){return null}if(remove(this.pendingCreates,r)){this._executeEventHandlers("createFail",t,n)}r.reject(n);return null}));return r}_destroy(t){const r=this.eventId++;this._executeEventHandlers("destroyRequest",r,t);const n=new i.PendingOperation(this.destroyTimeoutMillis);const o=Promise.resolve().then((()=>this.destroyer(t)));o.then((()=>{n.resolve(t)})).catch((t=>{n.reject(t)}));this.pendingDestroys.push(n);return n.promise.then((n=>{this._executeEventHandlers("destroySuccess",r,t);return n})).catch((n=>this._logDestroyerError(r,t,n))).then((t=>{const r=this.pendingDestroys.findIndex((t=>t===n));this.pendingDestroys.splice(r,1);return t}))}_logDestroyerError(t,r,n){this._executeEventHandlers("destroyFail",t,r,n);this.log("Tarn: resource destroyer threw an exception "+n.stack,"warn")}_startReaping(){if(!this.interval){this._executeEventHandlers("startReaping");this.interval=setInterval((()=>this.check()),this.reapIntervalMillis)}}_stopReaping(){if(this.interval!==null){this._executeEventHandlers("stopReaping");c.clearInterval(this.interval)}this.interval=null}_executeEventHandlers(t,...r){const n=this.emitter.listeners(t);n.forEach((n=>{try{n(...r)}catch(r){this.log(`Tarn: event handler "${t}" threw an exception ${r.stack}`,"warn")}}))}}r.Pool=Pool;function remove(t,r){const n=t.indexOf(r);if(n===-1){return false}else{t.splice(n,1);return true}}function callbackOrPromise(t){return new Promise(((r,n)=>{const callback=(t,i)=>{if(t){n(t)}else{r(i)}};a.tryPromise((()=>t(callback))).then((t=>{if(t){r(t)}})).catch((t=>{n(t)}))}))}},20513:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});class PromiseInspection{constructor(t){this._value=t.value;this._error=t.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}r.PromiseInspection=PromiseInspection},37606:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const i=n(62388);class Resource{constructor(t){this.resource=t;this.resource=t;this.timestamp=i.now();this.deferred=i.defer()}get promise(){return this.deferred.promise}resolve(){this.deferred.resolve(undefined);return new Resource(this.resource)}}r.Resource=Resource},35638:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});class TimeoutError extends Error{}r.TimeoutError=TimeoutError},84819:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const i=n(2911);r.Pool=i.Pool;const o=n(35638);r.TimeoutError=o.TimeoutError;t.exports={Pool:i.Pool,TimeoutError:o.TimeoutError}},62388:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});const i=n(20513);function defer(){let t=null;let r=null;const n=new Promise(((n,i)=>{t=n;r=i}));return{promise:n,resolve:t,reject:r}}r.defer=defer;function now(){return Date.now()}r.now=now;function duration(t,r){return Math.abs(r-t)}r.duration=duration;function checkOptionalTime(t){if(typeof t==="undefined"){return true}return checkRequiredTime(t)}r.checkOptionalTime=checkOptionalTime;function checkRequiredTime(t){return typeof t==="number"&&t===Math.round(t)&&t>0}r.checkRequiredTime=checkRequiredTime;function delay(t){return new Promise((r=>setTimeout(r,t)))}r.delay=delay;function reflect(t){return t.then((t=>new i.PromiseInspection({value:t}))).catch((t=>new i.PromiseInspection({error:t})))}r.reflect=reflect;function tryPromise(t){try{const r=t();return Promise.resolve(r)}catch(t){return Promise.reject(t)}}r.tryPromise=tryPromise},6053:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.writeToTrackingBuffer=writeToTrackingBuffer;const n={QUERY_NOTIFICATIONS:1,TXN_DESCRIPTOR:2,TRACE_ACTIVITY:3};const i=4+8;const o=4+2+i;function writeToTrackingBuffer(t,r,i){t.writeUInt32LE(0);t.writeUInt32LE(o);t.writeUInt16LE(n.TXN_DESCRIPTOR);t.writeBuffer(r);t.writeUInt32LE(i);const a=t.data;a.writeUInt32LE(a.length,0);return t}},91784:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SQLServerStatementColumnEncryptionSetting=r.DescribeParameterEncryptionResultSet2=r.DescribeParameterEncryptionResultSet1=r.SQLServerEncryptionType=void 0;let n;r.SQLServerEncryptionType=n;(function(t){t[t["Deterministic"]=1]="Deterministic";t[t["Randomized"]=2]="Randomized";t[t["PlainText"]=0]="PlainText"})(n||(r.SQLServerEncryptionType=n={}));let i;r.DescribeParameterEncryptionResultSet1=i;(function(t){t[t["KeyOrdinal"]=0]="KeyOrdinal";t[t["DbId"]=1]="DbId";t[t["KeyId"]=2]="KeyId";t[t["KeyVersion"]=3]="KeyVersion";t[t["KeyMdVersion"]=4]="KeyMdVersion";t[t["EncryptedKey"]=5]="EncryptedKey";t[t["ProviderName"]=6]="ProviderName";t[t["KeyPath"]=7]="KeyPath";t[t["KeyEncryptionAlgorithm"]=8]="KeyEncryptionAlgorithm"})(i||(r.DescribeParameterEncryptionResultSet1=i={}));let o;r.DescribeParameterEncryptionResultSet2=o;(function(t){t[t["ParameterOrdinal"]=0]="ParameterOrdinal";t[t["ParameterName"]=1]="ParameterName";t[t["ColumnEncryptionAlgorithm"]=2]="ColumnEncryptionAlgorithm";t[t["ColumnEncrytionType"]=3]="ColumnEncrytionType";t[t["ColumnEncryptionKeyOrdinal"]=4]="ColumnEncryptionKeyOrdinal";t[t["NormalizationRuleVersion"]=5]="NormalizationRuleVersion"})(o||(r.DescribeParameterEncryptionResultSet2=o={}));let a;r.SQLServerStatementColumnEncryptionSetting=a;(function(t){t[t["UseConnectionSetting"]=0]="UseConnectionSetting";t[t["Enabled"]=1]="Enabled";t[t["ResultSetOnly"]=2]="ResultSetOnly";t[t["Disabled"]=3]="Disabled"})(a||(r.SQLServerStatementColumnEncryptionSetting=a={}))},49368:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.BulkLoadPayload=void 0;let n;n=Symbol.asyncIterator;class BulkLoadPayload{constructor(t){this.bulkLoad=void 0;this.iterator=void 0;this.bulkLoad=t;this.iterator=this.bulkLoad.rowToPacketTransform[Symbol.asyncIterator]()}[n](){return this.iterator}toString(t=""){return t+"BulkLoad"}}r.BulkLoadPayload=BulkLoadPayload},44655:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(82361);var o=_interopRequireDefault(n(16020));var a=n(12781);var s=n(51195);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const c={nullable:1<<0,caseSen:1<<1,updateableReadWrite:1<<2,updateableUnknown:1<<3,identity:1<<4,computed:1<<5,fixedLenCLRType:1<<8,sparseColumnSet:1<<10,hidden:1<<13,key:1<<14,nullableUnknown:1<<15};const u={FINAL:0,MORE:1,ERROR:2,INXACT:4,COUNT:16,ATTN:32,SRVERROR:256};const l=Buffer.from([s.TYPE.ROW]);const d=Buffer.from([16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);const p=Buffer.from([0]);class RowTransform extends a.Transform{constructor(t){super({writableObjectMode:true});this.columnMetadataWritten=void 0;this.bulkLoad=void 0;this.mainOptions=void 0;this.columns=void 0;this.bulkLoad=t;this.mainOptions=t.options;this.columns=t.columns;this.columnMetadataWritten=false}_transform(t,r,n){if(!this.columnMetadataWritten){this.push(this.bulkLoad.getColMetaData());this.columnMetadataWritten=true}this.push(l);for(let r=0;r<this.columns.length;r++){const i=this.columns[r];let o=Array.isArray(t)?t[r]:t[i.objName];if(!this.bulkLoad.firstRowWritten){try{o=i.type.validate(o,i.collation)}catch(t){return n(t)}}const a={length:i.length,scale:i.scale,precision:i.precision,value:o};if(i.type.name==="Text"||i.type.name==="Image"||i.type.name==="NText"){if(o==null){this.push(p);continue}this.push(d)}this.push(i.type.generateParameterLength(a,this.mainOptions));for(const t of i.type.generateParameterData(a,this.mainOptions)){this.push(t)}}process.nextTick(n)}_flush(t){this.push(this.bulkLoad.createDoneToken());process.nextTick(t)}}class BulkLoad extends i.EventEmitter{constructor(t,r,n,{checkConstraints:i=false,fireTriggers:o=false,keepNulls:a=false,lockTable:s=false,order:c={}},u){if(typeof i!=="boolean"){throw new TypeError('The "options.checkConstraints" property must be of type boolean.')}if(typeof o!=="boolean"){throw new TypeError('The "options.fireTriggers" property must be of type boolean.')}if(typeof a!=="boolean"){throw new TypeError('The "options.keepNulls" property must be of type boolean.')}if(typeof s!=="boolean"){throw new TypeError('The "options.lockTable" property must be of type boolean.')}if(typeof c!=="object"||c===null){throw new TypeError('The "options.order" property must be of type object.')}for(const[t,r]of Object.entries(c)){if(r!=="ASC"&&r!=="DESC"){throw new TypeError('The value of the "'+t+'" key in the "options.order" object must be either "ASC" or "DESC".')}}super();this.error=void 0;this.canceled=void 0;this.executionStarted=void 0;this.streamingMode=void 0;this.table=void 0;this.timeout=void 0;this.options=void 0;this.callback=void 0;this.columns=void 0;this.columnsByName=void 0;this.firstRowWritten=void 0;this.rowToPacketTransform=void 0;this.bulkOptions=void 0;this.connection=void 0;this.rows=void 0;this.rst=void 0;this.rowCount=void 0;this.collation=void 0;this.error=undefined;this.canceled=false;this.executionStarted=false;this.collation=r;this.table=t;this.options=n;this.callback=u;this.columns=[];this.columnsByName={};this.firstRowWritten=false;this.streamingMode=false;this.rowToPacketTransform=new RowTransform(this);this.bulkOptions={checkConstraints:i,fireTriggers:o,keepNulls:a,lockTable:s,order:c}}addColumn(t,r,{output:n=false,length:i,precision:o,scale:a,objName:s=t,nullable:c=true}){if(this.firstRowWritten){throw new Error("Columns cannot be added to bulk insert after the first row has been written.")}if(this.executionStarted){throw new Error("Columns cannot be added to bulk insert after execution has started.")}const u={type:r,name:t,value:null,output:n,length:i,precision:o,scale:a,objName:s,nullable:c,collation:this.collation};if((r.id&48)===32){if(u.length==null&&r.resolveLength){u.length=r.resolveLength(u)}}if(r.resolvePrecision&&u.precision==null){u.precision=r.resolvePrecision(u)}if(r.resolveScale&&u.scale==null){u.scale=r.resolveScale(u)}this.columns.push(u);this.columnsByName[t]=u}getOptionsSql(){const t=[];if(this.bulkOptions.checkConstraints){t.push("CHECK_CONSTRAINTS")}if(this.bulkOptions.fireTriggers){t.push("FIRE_TRIGGERS")}if(this.bulkOptions.keepNulls){t.push("KEEP_NULLS")}if(this.bulkOptions.lockTable){t.push("TABLOCK")}if(this.bulkOptions.order){const r=[];for(const[t,n]of Object.entries(this.bulkOptions.order)){r.push(`${t} ${n}`)}if(r.length){t.push(`ORDER (${r.join(", ")})`)}}if(t.length>0){return` WITH (${t.join(",")})`}else{return""}}getBulkInsertSql(){let t="insert bulk "+this.table+"(";for(let r=0,n=this.columns.length;r<n;r++){const n=this.columns[r];if(r!==0){t+=", "}t+="["+n.name+"] "+n.type.declaration(n)}t+=")";t+=this.getOptionsSql();return t}getTableCreationSql(){let t="CREATE TABLE "+this.table+"(\n";for(let r=0,n=this.columns.length;r<n;r++){const n=this.columns[r];if(r!==0){t+=",\n"}t+="["+n.name+"] "+n.type.declaration(n);if(n.nullable!==undefined){t+=" "+(n.nullable?"NULL":"NOT NULL")}}t+="\n)";return t}getColMetaData(){const t=new o.default(100,null,true);t.writeUInt8(s.TYPE.COLMETADATA);t.writeUInt16LE(this.columns.length);for(let r=0,n=this.columns.length;r<n;r++){const n=this.columns[r];if(this.options.tdsVersion<"7_2"){t.writeUInt16LE(0)}else{t.writeUInt32LE(0)}let i=c.updateableReadWrite;if(n.nullable){i|=c.nullable}else if(n.nullable===undefined&&this.options.tdsVersion>="7_2"){i|=c.nullableUnknown}t.writeUInt16LE(i);t.writeBuffer(n.type.generateTypeInfo(n,this.options));if(n.type.hasTableName){t.writeUsVarchar(this.table,"ucs2")}t.writeBVarchar(n.name,"ucs2")}return t.data}setTimeout(t){this.timeout=t}createDoneToken(){const t=new o.default(this.options.tdsVersion<"7_2"?9:13);t.writeUInt8(s.TYPE.DONE);const r=u.FINAL;t.writeUInt16LE(r);t.writeUInt16LE(0);t.writeUInt32LE(0);if(this.options.tdsVersion>="7_2"){t.writeUInt32LE(0)}return t.data}cancel(){if(this.canceled){return}this.canceled=true;this.emit("cancel")}}var g=BulkLoad;r["default"]=g;t.exports=BulkLoad},69026:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Collation=r.Flags=r.codepageBySortId=r.codepageByLanguageId=void 0;const n={[1025]:"CP1256",[1028]:"CP950",[1029]:"CP1250",[1030]:"CP1252",[1032]:"CP1253",[1033]:"CP1252",[1034]:"CP1252",[1035]:"CP1252",[1036]:"CP1252",[1037]:"CP1255",[1038]:"CP1250",[1039]:"CP1252",[1041]:"CP932",[1042]:"CP949",[1044]:"CP1252",[1045]:"CP1250",[1047]:"CP1252",[1048]:"CP1250",[1049]:"CP1251",[1050]:"CP1250",[1051]:"CP1250",[1052]:"CP1250",[1054]:"CP874",[1055]:"CP1254",[1056]:"CP1256",[1058]:"CP1251",[1060]:"CP1250",[1061]:"CP1257",[1062]:"CP1257",[1063]:"CP1257",[1065]:"CP1256",[1066]:"CP1258",[1068]:"CP1254",[1070]:"CP1252",[1071]:"CP1251",[1083]:"CP1252",[1087]:"CP1251",[1090]:"CP1250",[1091]:"CP1254",[1092]:"CP1251",[1106]:"CP1252",[1122]:"CP1252",[1133]:"CP1251",[1146]:"CP1252",[1148]:"CP1252",[1150]:"CP1252",[1152]:"CP1256",[1155]:"CP1252",[1157]:"CP1251",[1164]:"CP1256",[2052]:"CP936",[2074]:"CP1250",[2092]:"CP1251",[2107]:"CP1252",[2143]:"CP1252",[3076]:"CP950",[3082]:"CP1252",[3098]:"CP1251",[5124]:"CP950",[5146]:"CP1250",[8218]:"CP1251",[1031]:"CP1252",[1079]:"CP1252"};r.codepageByLanguageId=n;const i={[30]:"CP437",[31]:"CP437",[32]:"CP437",[33]:"CP437",[34]:"CP437",[40]:"CP850",[41]:"CP850",[42]:"CP850",[43]:"CP850",[44]:"CP850",[49]:"CP850",[51]:"CP1252",[52]:"CP1252",[53]:"CP1252",[54]:"CP1252",[55]:"CP850",[56]:"CP850",[57]:"CP850",[58]:"CP850",[59]:"CP850",[60]:"CP850",[61]:"CP850",[80]:"CP1250",[81]:"CP1250",[82]:"CP1250",[83]:"CP1250",[84]:"CP1250",[85]:"CP1250",[86]:"CP1250",[87]:"CP1250",[88]:"CP1250",[89]:"CP1250",[90]:"CP1250",[91]:"CP1250",[92]:"CP1250",[93]:"CP1250",[94]:"CP1250",[95]:"CP1250",[96]:"CP1250",[104]:"CP1251",[105]:"CP1251",[106]:"CP1251",[107]:"CP1251",[108]:"CP1251",[112]:"CP1253",[113]:"CP1253",[114]:"CP1253",[120]:"CP1253",[121]:"CP1253",[122]:"CP1253",[124]:"CP1253",[128]:"CP1254",[129]:"CP1254",[130]:"CP1254",[136]:"CP1255",[137]:"CP1255",[138]:"CP1255",[144]:"CP1256",[145]:"CP1256",[146]:"CP1256",[152]:"CP1257",[153]:"CP1257",[154]:"CP1257",[155]:"CP1257",[156]:"CP1257",[157]:"CP1257",[158]:"CP1257",[159]:"CP1257",[160]:"CP1257",[183]:"CP1252",[184]:"CP1252",[185]:"CP1252",[186]:"CP1252"};r.codepageBySortId=i;const o={IGNORE_CASE:1<<0,IGNORE_ACCENT:1<<1,IGNORE_KANA:1<<2,IGNORE_WIDTH:1<<3,BINARY:1<<4,BINARY2:1<<5,UTF8:1<<6};r.Flags=o;class Collation{static fromBuffer(t,r=0){let n=(t[r+2]&15)<<16;n|=t[r+1]<<8;n|=t[r+0];let i=(t[r+3]&15)<<4;i|=(t[r+2]&240)>>>4;const o=(t[r+3]&240)>>>4;const a=t[r+4];return new this(n,i,o,a)}constructor(t,r,a,s){this.lcid=void 0;this.flags=void 0;this.version=void 0;this.sortId=void 0;this.codepage=void 0;this.buffer=void 0;this.buffer=undefined;this.lcid=t;this.flags=r;this.version=a;this.sortId=s;if(this.flags&o.UTF8){this.codepage="utf-8"}else if(this.sortId){this.codepage=i[this.sortId]}else{const t=this.lcid&65535;this.codepage=n[t]}}toBuffer(){if(this.buffer){return this.buffer}this.buffer=Buffer.alloc(5);this.buffer[0]=this.lcid&255;this.buffer[1]=this.lcid>>>8&255;this.buffer[2]=this.lcid>>>16&15|(this.flags&15)<<4;this.buffer[3]=(this.flags&240)>>>4|(this.version&15)<<4;this.buffer[4]=this.sortId&255;return this.buffer}}r.Collation=Collation},53675:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(6113));var o=_interopRequireDefault(n(22037));var a=_interopRequireDefault(n(22057));var s=n(24404);var c=n(12781);var u=n(3084);var l=_interopRequireDefault(n(44655));var d=_interopRequireDefault(n(54643));var p=n(82361);var g=n(22875);var v=n(8848);var E=n(6246);var S=_interopRequireDefault(n(69108));var w=_interopRequireDefault(n(33614));var x=_interopRequireDefault(n(93746));var N=_interopRequireDefault(n(23773));var P=_interopRequireDefault(n(83124));var D=_interopRequireDefault(n(78358));var M=_interopRequireDefault(n(24130));var L=n(56729);var U=n(3034);var q=n(43026);var B=n(5405);var F=n(74122);var j=n(80395);var H=_interopRequireDefault(n(55136));var z=n(17356);var V=n(85220);var Y=n(88156);var G=n(49368);var W=_interopRequireDefault(n(55103));var $=n(23134);var K=n(57310);var J=n(79553);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}let Z=false;const emitTrustServerCertificateWarning=()=>{if(!Z){Z=true;process.emitWarning("`config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options")}};let X=false;const emitDomainRenameToTenantIdWarning=()=>{if(!X){X=true;process.emitWarning("`When using authentication type `azure-active-directory-password`,"+" config.authentication.options.domain` will be renamed to config.authentications.options.tenantId`"+" in the future. Rename `domain` to `tenantId` to silence this message.")}};const Q=30*1e3;const ee=15*1e3;const te=15*1e3;const re=5*1e3;const ne=500;const ie=4*1024;const oe=2147483647;const ae=7;const se=1433;const ce="7_4";const ue="us_english";const le="mdy";const fe={NORMAL:0,REDIRECT:1,RETRY:2};class Connection extends p.EventEmitter{constructor(t){super();this.fedAuthRequired=void 0;this.config=void 0;this.secureContext=void 0;this.inTransaction=void 0;this.transactionDescriptors=void 0;this.transactionDepth=void 0;this.isSqlBatch=void 0;this.curTransientRetryCount=void 0;this.transientErrorLookup=void 0;this.closed=void 0;this.loginError=void 0;this.debug=void 0;this.ntlmpacket=void 0;this.ntlmpacketBuffer=void 0;this.routingData=void 0;this.messageIo=void 0;this.state=void 0;this.resetConnectionOnNextRequest=void 0;this.request=void 0;this.procReturnStatusValue=void 0;this.socket=void 0;this.messageBuffer=void 0;this.connectTimer=void 0;this.cancelTimer=void 0;this.requestTimer=void 0;this.retryTimer=void 0;this._cancelAfterRequestSent=void 0;this.databaseCollation=void 0;if(typeof t!=="object"||t===null){throw new TypeError('The "config" argument is required and must be of type Object.')}if(typeof t.server!=="string"){throw new TypeError('The "config.server" property is required and must be of type string.')}this.fedAuthRequired=false;let r;if(t.authentication!==undefined){if(typeof t.authentication!=="object"||t.authentication===null){throw new TypeError('The "config.authentication" property must be of type Object.')}const o=t.authentication.type;const a=t.authentication.options===undefined?{}:t.authentication.options;if(typeof o!=="string"){throw new TypeError('The "config.authentication.type" property must be of type string.')}if(o!=="default"&&o!=="ntlm"&&o!=="azure-active-directory-password"&&o!=="azure-active-directory-access-token"&&o!=="azure-active-directory-msi-vm"&&o!=="azure-active-directory-msi-app-service"&&o!=="azure-active-directory-service-principal-secret"&&o!=="azure-active-directory-default"){throw new TypeError('The "type" property must one of "default", "ntlm", "azure-active-directory-password", "azure-active-directory-access-token", "azure-active-directory-default", "azure-active-directory-msi-vm" or "azure-active-directory-msi-app-service" or "azure-active-directory-service-principal-secret".')}if(typeof a!=="object"||a===null){throw new TypeError('The "config.authentication.options" property must be of type object.')}if(o==="ntlm"){if(typeof a.domain!=="string"){throw new TypeError('The "config.authentication.options.domain" property must be of type string.')}if(a.userName!==undefined&&typeof a.userName!=="string"){throw new TypeError('The "config.authentication.options.userName" property must be of type string.')}if(a.password!==undefined&&typeof a.password!=="string"){throw new TypeError('The "config.authentication.options.password" property must be of type string.')}r={type:"ntlm",options:{userName:a.userName,password:a.password,domain:a.domain&&a.domain.toUpperCase()}}}else if(o==="azure-active-directory-password"){var n,i;if(a.userName!==undefined&&typeof a.userName!=="string"){throw new TypeError('The "config.authentication.options.userName" property must be of type string.')}if(a.password!==undefined&&typeof a.password!=="string"){throw new TypeError('The "config.authentication.options.password" property must be of type string.')}if(a.clientId!==undefined&&typeof a.clientId!=="string"){throw new TypeError('The "config.authentication.options.clientId" property must be of type string.')}else if(a.clientId===undefined){emitAzureADPasswordClientIdDeprecationWarning()}if(a.domain!==undefined&&typeof a.domain!=="string"){throw new TypeError('The "config.authentication.options.domain" property must be of type string.')}else if(a.domain!==undefined){emitDomainRenameToTenantIdWarning()}if(a.tenantId!==undefined&&typeof a.tenantId!=="string"){throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.')}r={type:"azure-active-directory-password",options:{userName:a.userName,password:a.password,tenantId:(n=a.tenantId)!==null&&n!==void 0?n:a.domain,clientId:(i=a.clientId)!==null&&i!==void 0?i:"7f98cb04-cd1e-40df-9140-3bf7e2cea4db"}}}else if(o==="azure-active-directory-access-token"){if(typeof a.token!=="string"){throw new TypeError('The "config.authentication.options.token" property must be of type string.')}r={type:"azure-active-directory-access-token",options:{token:a.token}}}else if(o==="azure-active-directory-msi-vm"){if(a.clientId!==undefined&&typeof a.clientId!=="string"){throw new TypeError('The "config.authentication.options.clientId" property must be of type string.')}r={type:"azure-active-directory-msi-vm",options:{clientId:a.clientId}}}else if(o==="azure-active-directory-default"){if(a.clientId!==undefined&&typeof a.clientId!=="string"){throw new TypeError('The "config.authentication.options.clientId" property must be of type string.')}r={type:"azure-active-directory-default",options:{clientId:a.clientId}}}else if(o==="azure-active-directory-msi-app-service"){if(a.clientId!==undefined&&typeof a.clientId!=="string"){throw new TypeError('The "config.authentication.options.clientId" property must be of type string.')}r={type:"azure-active-directory-msi-app-service",options:{clientId:a.clientId}}}else if(o==="azure-active-directory-service-principal-secret"){if(typeof a.clientId!=="string"){throw new TypeError('The "config.authentication.options.clientId" property must be of type string.')}if(typeof a.clientSecret!=="string"){throw new TypeError('The "config.authentication.options.clientSecret" property must be of type string.')}if(typeof a.tenantId!=="string"){throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.')}r={type:"azure-active-directory-service-principal-secret",options:{clientId:a.clientId,clientSecret:a.clientSecret,tenantId:a.tenantId}}}else{if(a.userName!==undefined&&typeof a.userName!=="string"){throw new TypeError('The "config.authentication.options.userName" property must be of type string.')}if(a.password!==undefined&&typeof a.password!=="string"){throw new TypeError('The "config.authentication.options.password" property must be of type string.')}r={type:"default",options:{userName:a.userName,password:a.password}}}}else{r={type:"default",options:{userName:undefined,password:undefined}}}this.config={server:t.server,authentication:r,options:{abortTransactionOnError:false,appName:undefined,camelCaseColumns:false,cancelTimeout:re,columnEncryptionKeyCacheTTL:2*60*60*1e3,columnEncryptionSetting:false,columnNameReplacer:undefined,connectionRetryInterval:ne,connectTimeout:ee,connectionIsolationLevel:U.ISOLATION_LEVEL.READ_COMMITTED,cryptoCredentialsDetails:{},database:undefined,datefirst:ae,dateFormat:le,debug:{data:false,packet:false,payload:false,token:false},enableAnsiNull:true,enableAnsiNullDefault:true,enableAnsiPadding:true,enableAnsiWarnings:true,enableArithAbort:true,enableConcatNullYieldsNull:true,enableCursorCloseOnCommit:null,enableImplicitTransactions:false,enableNumericRoundabort:false,enableQuotedIdentifier:true,encrypt:true,fallbackToDefaultDb:false,encryptionKeyStoreProviders:undefined,instanceName:undefined,isolationLevel:U.ISOLATION_LEVEL.READ_COMMITTED,language:ue,localAddress:undefined,maxRetriesOnTransientErrors:3,multiSubnetFailover:false,packetSize:ie,port:se,readOnlyIntent:false,requestTimeout:te,rowCollectionOnDone:false,rowCollectionOnRequestCompletion:false,serverName:undefined,serverSupportsColumnEncryption:false,tdsVersion:ce,textsize:oe,trustedServerNameAE:undefined,trustServerCertificate:true,useColumnNames:false,useUTC:true,workstationId:undefined,lowerCaseGuids:false}};if(t.options){if(t.options.port&&t.options.instanceName){throw new Error("Port and instanceName are mutually exclusive, but "+t.options.port+" and "+t.options.instanceName+" provided")}if(t.options.abortTransactionOnError!==undefined){if(typeof t.options.abortTransactionOnError!=="boolean"&&t.options.abortTransactionOnError!==null){throw new TypeError('The "config.options.abortTransactionOnError" property must be of type string or null.')}this.config.options.abortTransactionOnError=t.options.abortTransactionOnError}if(t.options.appName!==undefined){if(typeof t.options.appName!=="string"){throw new TypeError('The "config.options.appName" property must be of type string.')}this.config.options.appName=t.options.appName}if(t.options.camelCaseColumns!==undefined){if(typeof t.options.camelCaseColumns!=="boolean"){throw new TypeError('The "config.options.camelCaseColumns" property must be of type boolean.')}this.config.options.camelCaseColumns=t.options.camelCaseColumns}if(t.options.cancelTimeout!==undefined){if(typeof t.options.cancelTimeout!=="number"){throw new TypeError('The "config.options.cancelTimeout" property must be of type number.')}this.config.options.cancelTimeout=t.options.cancelTimeout}if(t.options.columnNameReplacer){if(typeof t.options.columnNameReplacer!=="function"){throw new TypeError('The "config.options.cancelTimeout" property must be of type function.')}this.config.options.columnNameReplacer=t.options.columnNameReplacer}if(t.options.connectTimeout!==undefined){if(typeof t.options.connectTimeout!=="number"){throw new TypeError('The "config.options.connectTimeout" property must be of type number.')}this.config.options.connectTimeout=t.options.connectTimeout}if(t.options.connectionIsolationLevel!==undefined){(0,U.assertValidIsolationLevel)(t.options.connectionIsolationLevel,"config.options.connectionIsolationLevel");this.config.options.connectionIsolationLevel=t.options.connectionIsolationLevel}if(t.options.connectTimeout!==undefined){if(typeof t.options.connectTimeout!=="number"){throw new TypeError('The "config.options.connectTimeout" property must be of type number.')}this.config.options.connectTimeout=t.options.connectTimeout}if(t.options.cryptoCredentialsDetails!==undefined){if(typeof t.options.cryptoCredentialsDetails!=="object"||t.options.cryptoCredentialsDetails===null){throw new TypeError('The "config.options.cryptoCredentialsDetails" property must be of type Object.')}this.config.options.cryptoCredentialsDetails=t.options.cryptoCredentialsDetails}if(t.options.database!==undefined){if(typeof t.options.database!=="string"){throw new TypeError('The "config.options.database" property must be of type string.')}this.config.options.database=t.options.database}if(t.options.datefirst!==undefined){if(typeof t.options.datefirst!=="number"&&t.options.datefirst!==null){throw new TypeError('The "config.options.datefirst" property must be of type number.')}if(t.options.datefirst!==null&&(t.options.datefirst<1||t.options.datefirst>7)){throw new RangeError('The "config.options.datefirst" property must be >= 1 and <= 7')}this.config.options.datefirst=t.options.datefirst}if(t.options.dateFormat!==undefined){if(typeof t.options.dateFormat!=="string"&&t.options.dateFormat!==null){throw new TypeError('The "config.options.dateFormat" property must be of type string or null.')}this.config.options.dateFormat=t.options.dateFormat}if(t.options.debug){if(t.options.debug.data!==undefined){if(typeof t.options.debug.data!=="boolean"){throw new TypeError('The "config.options.debug.data" property must be of type boolean.')}this.config.options.debug.data=t.options.debug.data}if(t.options.debug.packet!==undefined){if(typeof t.options.debug.packet!=="boolean"){throw new TypeError('The "config.options.debug.packet" property must be of type boolean.')}this.config.options.debug.packet=t.options.debug.packet}if(t.options.debug.payload!==undefined){if(typeof t.options.debug.payload!=="boolean"){throw new TypeError('The "config.options.debug.payload" property must be of type boolean.')}this.config.options.debug.payload=t.options.debug.payload}if(t.options.debug.token!==undefined){if(typeof t.options.debug.token!=="boolean"){throw new TypeError('The "config.options.debug.token" property must be of type boolean.')}this.config.options.debug.token=t.options.debug.token}}if(t.options.enableAnsiNull!==undefined){if(typeof t.options.enableAnsiNull!=="boolean"&&t.options.enableAnsiNull!==null){throw new TypeError('The "config.options.enableAnsiNull" property must be of type boolean or null.')}this.config.options.enableAnsiNull=t.options.enableAnsiNull}if(t.options.enableAnsiNullDefault!==undefined){if(typeof t.options.enableAnsiNullDefault!=="boolean"&&t.options.enableAnsiNullDefault!==null){throw new TypeError('The "config.options.enableAnsiNullDefault" property must be of type boolean or null.')}this.config.options.enableAnsiNullDefault=t.options.enableAnsiNullDefault}if(t.options.enableAnsiPadding!==undefined){if(typeof t.options.enableAnsiPadding!=="boolean"&&t.options.enableAnsiPadding!==null){throw new TypeError('The "config.options.enableAnsiPadding" property must be of type boolean or null.')}this.config.options.enableAnsiPadding=t.options.enableAnsiPadding}if(t.options.enableAnsiWarnings!==undefined){if(typeof t.options.enableAnsiWarnings!=="boolean"&&t.options.enableAnsiWarnings!==null){throw new TypeError('The "config.options.enableAnsiWarnings" property must be of type boolean or null.')}this.config.options.enableAnsiWarnings=t.options.enableAnsiWarnings}if(t.options.enableArithAbort!==undefined){if(typeof t.options.enableArithAbort!=="boolean"&&t.options.enableArithAbort!==null){throw new TypeError('The "config.options.enableArithAbort" property must be of type boolean or null.')}this.config.options.enableArithAbort=t.options.enableArithAbort}if(t.options.enableConcatNullYieldsNull!==undefined){if(typeof t.options.enableConcatNullYieldsNull!=="boolean"&&t.options.enableConcatNullYieldsNull!==null){throw new TypeError('The "config.options.enableConcatNullYieldsNull" property must be of type boolean or null.')}this.config.options.enableConcatNullYieldsNull=t.options.enableConcatNullYieldsNull}if(t.options.enableCursorCloseOnCommit!==undefined){if(typeof t.options.enableCursorCloseOnCommit!=="boolean"&&t.options.enableCursorCloseOnCommit!==null){throw new TypeError('The "config.options.enableCursorCloseOnCommit" property must be of type boolean or null.')}this.config.options.enableCursorCloseOnCommit=t.options.enableCursorCloseOnCommit}if(t.options.enableImplicitTransactions!==undefined){if(typeof t.options.enableImplicitTransactions!=="boolean"&&t.options.enableImplicitTransactions!==null){throw new TypeError('The "config.options.enableImplicitTransactions" property must be of type boolean or null.')}this.config.options.enableImplicitTransactions=t.options.enableImplicitTransactions}if(t.options.enableNumericRoundabort!==undefined){if(typeof t.options.enableNumericRoundabort!=="boolean"&&t.options.enableNumericRoundabort!==null){throw new TypeError('The "config.options.enableNumericRoundabort" property must be of type boolean or null.')}this.config.options.enableNumericRoundabort=t.options.enableNumericRoundabort}if(t.options.enableQuotedIdentifier!==undefined){if(typeof t.options.enableQuotedIdentifier!=="boolean"&&t.options.enableQuotedIdentifier!==null){throw new TypeError('The "config.options.enableQuotedIdentifier" property must be of type boolean or null.')}this.config.options.enableQuotedIdentifier=t.options.enableQuotedIdentifier}if(t.options.encrypt!==undefined){if(typeof t.options.encrypt!=="boolean"){throw new TypeError('The "config.options.encrypt" property must be of type boolean.')}this.config.options.encrypt=t.options.encrypt}if(t.options.fallbackToDefaultDb!==undefined){if(typeof t.options.fallbackToDefaultDb!=="boolean"){throw new TypeError('The "config.options.fallbackToDefaultDb" property must be of type boolean.')}this.config.options.fallbackToDefaultDb=t.options.fallbackToDefaultDb}if(t.options.instanceName!==undefined){if(typeof t.options.instanceName!=="string"){throw new TypeError('The "config.options.instanceName" property must be of type string.')}this.config.options.instanceName=t.options.instanceName;this.config.options.port=undefined}if(t.options.isolationLevel!==undefined){(0,U.assertValidIsolationLevel)(t.options.isolationLevel,"config.options.isolationLevel");this.config.options.isolationLevel=t.options.isolationLevel}if(t.options.language!==undefined){if(typeof t.options.language!=="string"&&t.options.language!==null){throw new TypeError('The "config.options.language" property must be of type string or null.')}this.config.options.language=t.options.language}if(t.options.localAddress!==undefined){if(typeof t.options.localAddress!=="string"){throw new TypeError('The "config.options.localAddress" property must be of type string.')}this.config.options.localAddress=t.options.localAddress}if(t.options.multiSubnetFailover!==undefined){if(typeof t.options.multiSubnetFailover!=="boolean"){throw new TypeError('The "config.options.multiSubnetFailover" property must be of type boolean.')}this.config.options.multiSubnetFailover=t.options.multiSubnetFailover}if(t.options.packetSize!==undefined){if(typeof t.options.packetSize!=="number"){throw new TypeError('The "config.options.packetSize" property must be of type number.')}this.config.options.packetSize=t.options.packetSize}if(t.options.port!==undefined){if(typeof t.options.port!=="number"){throw new TypeError('The "config.options.port" property must be of type number.')}if(t.options.port<=0||t.options.port>=65536){throw new RangeError('The "config.options.port" property must be > 0 and < 65536')}this.config.options.port=t.options.port;this.config.options.instanceName=undefined}if(t.options.readOnlyIntent!==undefined){if(typeof t.options.readOnlyIntent!=="boolean"){throw new TypeError('The "config.options.readOnlyIntent" property must be of type boolean.')}this.config.options.readOnlyIntent=t.options.readOnlyIntent}if(t.options.requestTimeout!==undefined){if(typeof t.options.requestTimeout!=="number"){throw new TypeError('The "config.options.requestTimeout" property must be of type number.')}this.config.options.requestTimeout=t.options.requestTimeout}if(t.options.maxRetriesOnTransientErrors!==undefined){if(typeof t.options.maxRetriesOnTransientErrors!=="number"){throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be of type number.')}if(t.options.maxRetriesOnTransientErrors<0){throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be equal or greater than 0.')}this.config.options.maxRetriesOnTransientErrors=t.options.maxRetriesOnTransientErrors}if(t.options.connectionRetryInterval!==undefined){if(typeof t.options.connectionRetryInterval!=="number"){throw new TypeError('The "config.options.connectionRetryInterval" property must be of type number.')}if(t.options.connectionRetryInterval<=0){throw new TypeError('The "config.options.connectionRetryInterval" property must be greater than 0.')}this.config.options.connectionRetryInterval=t.options.connectionRetryInterval}if(t.options.rowCollectionOnDone!==undefined){if(typeof t.options.rowCollectionOnDone!=="boolean"){throw new TypeError('The "config.options.rowCollectionOnDone" property must be of type boolean.')}this.config.options.rowCollectionOnDone=t.options.rowCollectionOnDone}if(t.options.rowCollectionOnRequestCompletion!==undefined){if(typeof t.options.rowCollectionOnRequestCompletion!=="boolean"){throw new TypeError('The "config.options.rowCollectionOnRequestCompletion" property must be of type boolean.')}this.config.options.rowCollectionOnRequestCompletion=t.options.rowCollectionOnRequestCompletion}if(t.options.tdsVersion!==undefined){if(typeof t.options.tdsVersion!=="string"){throw new TypeError('The "config.options.tdsVersion" property must be of type string.')}this.config.options.tdsVersion=t.options.tdsVersion}if(t.options.textsize!==undefined){if(typeof t.options.textsize!=="number"&&t.options.textsize!==null){throw new TypeError('The "config.options.textsize" property must be of type number or null.')}if(t.options.textsize>2147483647){throw new TypeError('The "config.options.textsize" can\'t be greater than 2147483647.')}else if(t.options.textsize<-1){throw new TypeError('The "config.options.textsize" can\'t be smaller than -1.')}this.config.options.textsize=t.options.textsize|0}if(t.options.trustServerCertificate!==undefined){if(typeof t.options.trustServerCertificate!=="boolean"){throw new TypeError('The "config.options.trustServerCertificate" property must be of type boolean.')}this.config.options.trustServerCertificate=t.options.trustServerCertificate}else{emitTrustServerCertificateWarning()}if(t.options.useColumnNames!==undefined){if(typeof t.options.useColumnNames!=="boolean"){throw new TypeError('The "config.options.useColumnNames" property must be of type boolean.')}this.config.options.useColumnNames=t.options.useColumnNames}if(t.options.useUTC!==undefined){if(typeof t.options.useUTC!=="boolean"){throw new TypeError('The "config.options.useUTC" property must be of type boolean.')}this.config.options.useUTC=t.options.useUTC}if(t.options.workstationId!==undefined){if(typeof t.options.workstationId!=="string"){throw new TypeError('The "config.options.workstationId" property must be of type string.')}this.config.options.workstationId=t.options.workstationId}if(t.options.lowerCaseGuids!==undefined){if(typeof t.options.lowerCaseGuids!=="boolean"){throw new TypeError('The "config.options.lowerCaseGuids" property must be of type boolean.')}this.config.options.lowerCaseGuids=t.options.lowerCaseGuids}}let o=this.config.options.cryptoCredentialsDetails;if(o.secureOptions===undefined){o=Object.create(o,{secureOptions:{value:a.default.SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS}})}this.secureContext=(0,s.createSecureContext)(o);this.debug=this.createDebug();this.inTransaction=false;this.transactionDescriptors=[Buffer.from([0,0,0,0,0,0,0,0])];this.transactionDepth=0;this.isSqlBatch=false;this.closed=false;this.messageBuffer=Buffer.alloc(0);this.curTransientRetryCount=0;this.transientErrorLookup=new v.TransientErrorLookup;this.state=this.STATE.INITIALIZED;this._cancelAfterRequestSent=()=>{this.messageIo.sendMessage(E.TYPE.ATTENTION);this.createCancelTimer()}}connect(t){if(this.state!==this.STATE.INITIALIZED){throw new q.ConnectionError("`.connect` can not be called on a Connection in `"+this.state.name+"` state.")}if(t){const onConnect=r=>{this.removeListener("error",onError);t(r)};const onError=r=>{this.removeListener("connect",onConnect);t(r)};this.once("connect",onConnect);this.once("error",onError)}this.transitionTo(this.STATE.CONNECTING)}on(t,r){return super.on(t,r)}emit(t,...r){return super.emit(t,...r)}close(){this.transitionTo(this.STATE.FINAL)}initialiseConnection(){const t=this.createConnectTimer();if(this.config.options.port){return this.connectOnPort(this.config.options.port,this.config.options.multiSubnetFailover,t)}else{return(new g.InstanceLookup).instanceLookup({server:this.config.server,instanceName:this.config.options.instanceName,timeout:this.config.options.connectTimeout,signal:t},((r,n)=>{if(r){if(r.name==="AbortError"){return}this.emit("connect",new q.ConnectionError(r.message,"EINSTLOOKUP"))}else{this.connectOnPort(n,this.config.options.multiSubnetFailover,t)}}))}}cleanupConnection(t){if(!this.closed){this.clearConnectTimer();this.clearRequestTimer();this.clearRetryTimer();this.closeConnection();if(t===fe.REDIRECT){this.emit("rerouting")}else if(t!==fe.RETRY){process.nextTick((()=>{this.emit("end")}))}const r=this.request;if(r){const t=new q.RequestError("Connection closed before request completed.","ECLOSE");r.callback(t);this.request=undefined}this.closed=true;this.loginError=undefined}}createDebug(){const t=new d.default(this.config.options.debug);t.on("debug",(t=>{this.emit("debug",t)}));return t}createTokenStreamParser(t,r){return new L.Parser(t,this.debug,r,this.config.options)}connectOnPort(t,r,n){const i={host:this.routingData?this.routingData.server:this.config.server,port:this.routingData?this.routingData.port:t,localAddress:this.config.options.localAddress};new B.Connector(i,n,r).execute(((t,r)=>{if(t){if(t.name==="AbortError"){return}return this.socketError(t)}r=r;r.on("error",(t=>{this.socketError(t)}));r.on("close",(()=>{this.socketClose()}));r.on("end",(()=>{this.socketEnd()}));r.setKeepAlive(true,Q);this.messageIo=new M.default(r,this.config.options.packetSize,this.debug);this.messageIo.on("secure",(t=>{this.emit("secure",t)}));this.socket=r;this.closed=false;this.debug.log("connected to "+this.config.server+":"+this.config.options.port);this.sendPreLogin();this.transitionTo(this.STATE.SENT_PRELOGIN)}))}closeConnection(){if(this.socket){this.socket.destroy()}}createConnectTimer(){const t=new V.AbortController;this.connectTimer=setTimeout((()=>{t.abort();this.connectTimeout()}),this.config.options.connectTimeout);return t.signal}createCancelTimer(){this.clearCancelTimer();const t=this.config.options.cancelTimeout;if(t>0){this.cancelTimer=setTimeout((()=>{this.cancelTimeout()}),t)}}createRequestTimer(){this.clearRequestTimer();const t=this.request;const r=t.timeout!==undefined?t.timeout:this.config.options.requestTimeout;if(r){this.requestTimer=setTimeout((()=>{this.requestTimeout()}),r)}}createRetryTimer(){this.clearRetryTimer();this.retryTimer=setTimeout((()=>{this.retryTimeout()}),this.config.options.connectionRetryInterval)}connectTimeout(){const t=`Failed to connect to ${this.config.server}${this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`} in ${this.config.options.connectTimeout}ms`;this.debug.log(t);this.emit("connect",new q.ConnectionError(t,"ETIMEOUT"));this.connectTimer=undefined;this.dispatchEvent("connectTimeout")}cancelTimeout(){const t=`Failed to cancel request in ${this.config.options.cancelTimeout}ms`;this.debug.log(t);this.dispatchEvent("socketError",new q.ConnectionError(t,"ETIMEOUT"))}requestTimeout(){this.requestTimer=undefined;const t=this.request;t.cancel();const r=t.timeout!==undefined?t.timeout:this.config.options.requestTimeout;const n="Timeout: Request failed to complete in "+r+"ms";t.error=new q.RequestError(n,"ETIMEOUT")}retryTimeout(){this.retryTimer=undefined;this.emit("retry");this.transitionTo(this.STATE.CONNECTING)}clearConnectTimer(){if(this.connectTimer){clearTimeout(this.connectTimer);this.connectTimer=undefined}}clearCancelTimer(){if(this.cancelTimer){clearTimeout(this.cancelTimer);this.cancelTimer=undefined}}clearRequestTimer(){if(this.requestTimer){clearTimeout(this.requestTimer);this.requestTimer=undefined}}clearRetryTimer(){if(this.retryTimer){clearTimeout(this.retryTimer);this.retryTimer=undefined}}transitionTo(t){if(this.state===t){this.debug.log("State is already "+t.name);return}if(this.state&&this.state.exit){this.state.exit.call(this,t)}this.debug.log("State change: "+(this.state?this.state.name:"undefined")+" -> "+t.name);this.state=t;if(this.state.enter){this.state.enter.apply(this)}}getEventHandler(t){const r=this.state.events[t];if(!r){throw new Error(`No event '${t}' in state '${this.state.name}'`)}return r}dispatchEvent(t,...r){const n=this.state.events[t];if(n){n.apply(this,r)}else{this.emit("error",new Error(`No event '${t}' in state '${this.state.name}'`));this.close()}}socketError(t){if(this.state===this.STATE.CONNECTING||this.state===this.STATE.SENT_TLSSSLNEGOTIATION){const r=`Failed to connect to ${this.config.server}:${this.config.options.port} - ${t.message}`;this.debug.log(r);this.emit("connect",new q.ConnectionError(r,"ESOCKET"))}else{const r=`Connection lost - ${t.message}`;this.debug.log(r);this.emit("error",new q.ConnectionError(r,"ESOCKET"))}this.dispatchEvent("socketError",t)}socketEnd(){this.debug.log("socket ended");if(this.state!==this.STATE.FINAL){const t=new Error("socket hang up");t.code="ECONNRESET";this.socketError(t)}}socketClose(){this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed");if(this.state===this.STATE.REROUTING){this.debug.log("Rerouting to "+this.routingData.server+":"+this.routingData.port);this.dispatchEvent("reconnect")}else if(this.state===this.STATE.TRANSIENT_FAILURE_RETRY){const t=this.routingData?this.routingData.server:this.config.server;const r=this.routingData?this.routingData.port:this.config.options.port;this.debug.log("Retry after transient failure connecting to "+t+":"+r);this.dispatchEvent("retry")}else{this.transitionTo(this.STATE.FINAL)}}sendPreLogin(){var t;const[,r,n,i]=(t=/^(\d+)\.(\d+)\.(\d+)/.exec($.version))!==null&&t!==void 0?t:["0.0.0","0","0","0"];const o=new S.default({encrypt:this.config.options.encrypt,version:{major:Number(r),minor:Number(n),build:Number(i),subbuild:0}});this.messageIo.sendMessage(E.TYPE.PRELOGIN,o.data);this.debug.payload((function(){return o.toString("  ")}))}emptyMessageBuffer(){this.messageBuffer=Buffer.alloc(0)}addToMessageBuffer(t){this.messageBuffer=Buffer.concat([this.messageBuffer,t])}sendLogin7Packet(){const t=new w.default({tdsVersion:j.versions[this.config.options.tdsVersion],packetSize:this.config.options.packetSize,clientProgVer:0,clientPid:process.pid,connectionId:0,clientTimeZone:(new Date).getTimezoneOffset(),clientLcid:1033});const{authentication:r}=this.config;switch(r.type){case"azure-active-directory-password":t.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"default"};break;case"azure-active-directory-access-token":t.fedAuth={type:"SECURITYTOKEN",echo:this.fedAuthRequired,fedAuthToken:r.options.token};break;case"azure-active-directory-msi-vm":case"azure-active-directory-default":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":t.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"integrated"};break;case"ntlm":t.sspi=(0,z.createNTLMRequest)({domain:r.options.domain});break;default:t.userName=r.options.userName;t.password=r.options.password}t.hostname=this.config.options.workstationId||o.default.hostname();t.serverName=this.routingData?this.routingData.server:this.config.server;t.appName=this.config.options.appName||"Tedious";t.libraryName=F.name;t.language=this.config.options.language;t.database=this.config.options.database;t.clientId=Buffer.from([1,2,3,4,5,6]);t.readOnlyIntent=this.config.options.readOnlyIntent;t.initDbFatal=!this.config.options.fallbackToDefaultDb;this.routingData=undefined;this.messageIo.sendMessage(E.TYPE.LOGIN7,t.toBuffer());this.debug.payload((function(){return t.toString("  ")}))}sendFedAuthTokenMessage(t){const r=Buffer.byteLength(t,"ucs2");const n=Buffer.alloc(8+r);let i=0;i=n.writeUInt32LE(r+4,i);i=n.writeUInt32LE(r,i);n.write(t,i,"ucs2");this.messageIo.sendMessage(E.TYPE.FEDAUTH_TOKEN,n);this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}sendInitialSql(){const t=new D.default(this.getInitialSql(),this.currentTransactionDescriptor(),this.config.options);const r=new H.default({type:E.TYPE.SQL_BATCH});this.messageIo.outgoingMessageStream.write(r);c.Readable.from(t).pipe(r)}getInitialSql(){const t=[];if(this.config.options.enableAnsiNull===true){t.push("set ansi_nulls on")}else if(this.config.options.enableAnsiNull===false){t.push("set ansi_nulls off")}if(this.config.options.enableAnsiNullDefault===true){t.push("set ansi_null_dflt_on on")}else if(this.config.options.enableAnsiNullDefault===false){t.push("set ansi_null_dflt_on off")}if(this.config.options.enableAnsiPadding===true){t.push("set ansi_padding on")}else if(this.config.options.enableAnsiPadding===false){t.push("set ansi_padding off")}if(this.config.options.enableAnsiWarnings===true){t.push("set ansi_warnings on")}else if(this.config.options.enableAnsiWarnings===false){t.push("set ansi_warnings off")}if(this.config.options.enableArithAbort===true){t.push("set arithabort on")}else if(this.config.options.enableArithAbort===false){t.push("set arithabort off")}if(this.config.options.enableConcatNullYieldsNull===true){t.push("set concat_null_yields_null on")}else if(this.config.options.enableConcatNullYieldsNull===false){t.push("set concat_null_yields_null off")}if(this.config.options.enableCursorCloseOnCommit===true){t.push("set cursor_close_on_commit on")}else if(this.config.options.enableCursorCloseOnCommit===false){t.push("set cursor_close_on_commit off")}if(this.config.options.datefirst!==null){t.push(`set datefirst ${this.config.options.datefirst}`)}if(this.config.options.dateFormat!==null){t.push(`set dateformat ${this.config.options.dateFormat}`)}if(this.config.options.enableImplicitTransactions===true){t.push("set implicit_transactions on")}else if(this.config.options.enableImplicitTransactions===false){t.push("set implicit_transactions off")}if(this.config.options.language!==null){t.push(`set language ${this.config.options.language}`)}if(this.config.options.enableNumericRoundabort===true){t.push("set numeric_roundabort on")}else if(this.config.options.enableNumericRoundabort===false){t.push("set numeric_roundabort off")}if(this.config.options.enableQuotedIdentifier===true){t.push("set quoted_identifier on")}else if(this.config.options.enableQuotedIdentifier===false){t.push("set quoted_identifier off")}if(this.config.options.textsize!==null){t.push(`set textsize ${this.config.options.textsize}`)}if(this.config.options.connectionIsolationLevel!==null){t.push(`set transaction isolation level ${this.getIsolationLevelText(this.config.options.connectionIsolationLevel)}`)}if(this.config.options.abortTransactionOnError===true){t.push("set xact_abort on")}else if(this.config.options.abortTransactionOnError===false){t.push("set xact_abort off")}return t.join("\n")}processedInitialSql(){this.clearConnectTimer();this.emit("connect")}execSqlBatch(t){this.makeRequest(t,E.TYPE.SQL_BATCH,new D.default(t.sqlTextOrProcedure,this.currentTransactionDescriptor(),this.config.options))}execSql(t){try{t.validateParameters(this.databaseCollation)}catch(r){t.error=r;process.nextTick((()=>{this.debug.log(r.message);t.callback(r)}));return}const r=[];r.push({type:Y.TYPES.NVarChar,name:"statement",value:t.sqlTextOrProcedure,output:false,length:undefined,precision:undefined,scale:undefined});if(t.parameters.length){r.push({type:Y.TYPES.NVarChar,name:"params",value:t.makeParamsParameter(t.parameters),output:false,length:undefined,precision:undefined,scale:undefined});r.push(...t.parameters)}this.makeRequest(t,E.TYPE.RPC_REQUEST,new P.default("sp_executesql",r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}newBulkLoad(t,r,n){let i;if(n===undefined){n=r;i={}}else{i=r}if(typeof i!=="object"){throw new TypeError('"options" argument must be an object')}return new l.default(t,this.databaseCollation,this.config.options,i,n)}execBulkLoad(t,r){t.executionStarted=true;if(r){if(t.streamingMode){throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that was put in streaming mode.")}if(t.firstRowWritten){throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that already has rows written to it.")}const n=c.Readable.from(r);n.on("error",(r=>{t.rowToPacketTransform.destroy(r)}));t.rowToPacketTransform.on("error",(t=>{n.destroy(t)}));n.pipe(t.rowToPacketTransform)}else if(!t.streamingMode){t.rowToPacketTransform.end()}const onCancel=()=>{i.cancel()};const n=new G.BulkLoadPayload(t);const i=new N.default(t.getBulkInsertSql(),(r=>{t.removeListener("cancel",onCancel);if(r){if(r.code==="UNKNOWN"){r.message+=" This is likely because the schema of the BulkLoad does not match the schema of the table you are attempting to insert into."}t.error=r;t.callback(r);return}this.makeRequest(t,E.TYPE.BULK_LOAD,n)}));t.once("cancel",onCancel);this.execSqlBatch(i)}prepare(t){const r=[];r.push({type:Y.TYPES.Int,name:"handle",value:undefined,output:true,length:undefined,precision:undefined,scale:undefined});r.push({type:Y.TYPES.NVarChar,name:"params",value:t.parameters.length?t.makeParamsParameter(t.parameters):null,output:false,length:undefined,precision:undefined,scale:undefined});r.push({type:Y.TYPES.NVarChar,name:"stmt",value:t.sqlTextOrProcedure,output:false,length:undefined,precision:undefined,scale:undefined});t.preparing=true;t.on("returnValue",((r,n)=>{if(r==="handle"){t.handle=n}else{t.error=new q.RequestError(`Tedious > Unexpected output parameter ${r} from sp_prepare`)}}));this.makeRequest(t,E.TYPE.RPC_REQUEST,new P.default("sp_prepare",r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}unprepare(t){const r=[];r.push({type:Y.TYPES.Int,name:"handle",value:t.handle,output:false,length:undefined,precision:undefined,scale:undefined});this.makeRequest(t,E.TYPE.RPC_REQUEST,new P.default("sp_unprepare",r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}execute(t,r){const n=[];n.push({type:Y.TYPES.Int,name:"handle",value:t.handle,output:false,length:undefined,precision:undefined,scale:undefined});try{for(let i=0,o=t.parameters.length;i<o;i++){const o=t.parameters[i];n.push({...o,value:o.type.validate(r?r[o.name]:null,this.databaseCollation)})}}catch(r){t.error=r;process.nextTick((()=>{this.debug.log(r.message);t.callback(r)}));return}this.makeRequest(t,E.TYPE.RPC_REQUEST,new P.default("sp_execute",n,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}callProcedure(t){try{t.validateParameters(this.databaseCollation)}catch(r){t.error=r;process.nextTick((()=>{this.debug.log(r.message);t.callback(r)}));return}this.makeRequest(t,E.TYPE.RPC_REQUEST,new P.default(t.sqlTextOrProcedure,t.parameters,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}beginTransaction(t,r="",n=this.config.options.isolationLevel){(0,U.assertValidIsolationLevel)(n,"isolationLevel");const i=new U.Transaction(r,n);if(this.config.options.tdsVersion<"7_2"){return this.execSqlBatch(new N.default("SET TRANSACTION ISOLATION LEVEL "+i.isolationLevelToTSQL()+";BEGIN TRAN "+i.name,(r=>{this.transactionDepth++;if(this.transactionDepth===1){this.inTransaction=true}t(r)})))}const o=new N.default(undefined,(r=>t(r,this.currentTransactionDescriptor())));return this.makeRequest(o,E.TYPE.TRANSACTION_MANAGER,i.beginPayload(this.currentTransactionDescriptor()))}commitTransaction(t,r=""){const n=new U.Transaction(r);if(this.config.options.tdsVersion<"7_2"){return this.execSqlBatch(new N.default("COMMIT TRAN "+n.name,(r=>{this.transactionDepth--;if(this.transactionDepth===0){this.inTransaction=false}t(r)})))}const i=new N.default(undefined,t);return this.makeRequest(i,E.TYPE.TRANSACTION_MANAGER,n.commitPayload(this.currentTransactionDescriptor()))}rollbackTransaction(t,r=""){const n=new U.Transaction(r);if(this.config.options.tdsVersion<"7_2"){return this.execSqlBatch(new N.default("ROLLBACK TRAN "+n.name,(r=>{this.transactionDepth--;if(this.transactionDepth===0){this.inTransaction=false}t(r)})))}const i=new N.default(undefined,t);return this.makeRequest(i,E.TYPE.TRANSACTION_MANAGER,n.rollbackPayload(this.currentTransactionDescriptor()))}saveTransaction(t,r){const n=new U.Transaction(r);if(this.config.options.tdsVersion<"7_2"){return this.execSqlBatch(new N.default("SAVE TRAN "+n.name,(r=>{this.transactionDepth++;t(r)})))}const i=new N.default(undefined,t);return this.makeRequest(i,E.TYPE.TRANSACTION_MANAGER,n.savePayload(this.currentTransactionDescriptor()))}transaction(t,r){if(typeof t!=="function"){throw new TypeError("`cb` must be a function")}const n=this.inTransaction;const o="_tedious_"+i.default.randomBytes(10).toString("hex");const txDone=(t,r,...i)=>{if(t){if(this.inTransaction&&this.state===this.STATE.LOGGED_IN){this.rollbackTransaction((n=>{r(n||t,...i)}),o)}else{r(t,...i)}}else if(n){if(this.config.options.tdsVersion<"7_2"){this.transactionDepth--}r(null,...i)}else{this.commitTransaction((t=>{r(t,...i)}),o)}};if(n){return this.saveTransaction((n=>{if(n){return t(n)}if(r){return this.execSqlBatch(new N.default("SET transaction isolation level "+this.getIsolationLevelText(r),(r=>t(r,txDone))))}else{return t(null,txDone)}}),o)}else{return this.beginTransaction((r=>{if(r){return t(r)}return t(null,txDone)}),o,r)}}makeRequest(t,r,n){if(this.state!==this.STATE.LOGGED_IN){const r="Requests can only be made in the "+this.STATE.LOGGED_IN.name+" state, not the "+this.state.name+" state";this.debug.log(r);t.callback(new q.RequestError(r,"EINVALIDSTATE"))}else if(t.canceled){process.nextTick((()=>{t.callback(new q.RequestError("Canceled.","ECANCEL"))}))}else{if(r===E.TYPE.SQL_BATCH){this.isSqlBatch=true}else{this.isSqlBatch=false}this.request=t;t.connection=this;t.rowCount=0;t.rows=[];t.rst=[];const onCancel=()=>{o.unpipe(i);o.destroy(new q.RequestError("Canceled.","ECANCEL"));i.ignore=true;i.end();if(t instanceof N.default&&t.paused){t.resume()}};t.once("cancel",onCancel);this.createRequestTimer();const i=new H.default({type:r,resetConnection:this.resetConnectionOnNextRequest});this.messageIo.outgoingMessageStream.write(i);this.transitionTo(this.STATE.SENT_CLIENT_REQUEST);i.once("finish",(()=>{t.removeListener("cancel",onCancel);t.once("cancel",this._cancelAfterRequestSent);this.resetConnectionOnNextRequest=false;this.debug.payload((function(){return n.toString("  ")}))}));const o=c.Readable.from(n);o.once("error",(r=>{var n;o.unpipe(i);(n=t.error)!==null&&n!==void 0?n:t.error=r;i.ignore=true;i.end()}));o.pipe(i)}}cancel(){if(!this.request){return false}if(this.request.canceled){return false}this.request.cancel();return true}reset(t){const r=new N.default(this.getInitialSql(),(r=>{if(this.config.options.tdsVersion<"7_2"){this.inTransaction=false}t(r)}));this.resetConnectionOnNextRequest=true;this.execSqlBatch(r)}currentTransactionDescriptor(){return this.transactionDescriptors[this.transactionDescriptors.length-1]}getIsolationLevelText(t){switch(t){case U.ISOLATION_LEVEL.READ_UNCOMMITTED:return"read uncommitted";case U.ISOLATION_LEVEL.REPEATABLE_READ:return"repeatable read";case U.ISOLATION_LEVEL.SERIALIZABLE:return"serializable";case U.ISOLATION_LEVEL.SNAPSHOT:return"snapshot";default:return"read committed"}}}let de=false;function emitAzureADPasswordClientIdDeprecationWarning(){if(de){return}de=true;process.emitWarning("When using the `azure-active-directory-password` authentication method, please provide a value for the `clientId` option. "+"This option will be required in a future release.","DeprecationWarning",Connection.prototype.on)}function isTransientError(t){if(t instanceof W.default){t=t.errors[0]}return t instanceof q.ConnectionError&&!!t.isTransient}var pe=Connection;r["default"]=pe;t.exports=Connection;Connection.prototype.STATE={INITIALIZED:{name:"Initialized",events:{}},CONNECTING:{name:"Connecting",enter:function(){this.initialiseConnection()},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_PRELOGIN:{name:"SentPrelogin",enter:function(){this.emptyMessageBuffer();this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},message:function(t){t.on("data",(t=>{this.addToMessageBuffer(t)}));t.once("end",(()=>{const t=new S.default(this.messageBuffer);this.debug.payload((function(){return t.toString("  ")}));if(t.fedAuthRequired===1){this.fedAuthRequired=true}if(t.encryptionString==="ON"||t.encryptionString==="REQ"){var r,n;if(!this.config.options.encrypt){this.emit("connect",new q.ConnectionError("Server requires encryption, set 'encrypt' config option to true.","EENCRYPT"));return this.close()}this.messageIo.startTls(this.secureContext,(r=(n=this.routingData)===null||n===void 0?void 0:n.server)!==null&&r!==void 0?r:this.config.server,this.config.options.trustServerCertificate);this.transitionTo(this.STATE.SENT_TLSSSLNEGOTIATION)}else{this.sendLogin7Packet();const{authentication:t}=this.config;if(t.type==="ntlm"){this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM)}else{this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}}}))}}},REROUTING:{name:"ReRouting",enter:function(){this.cleanupConnection(fe.REDIRECT)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},reconnect:function(){this.transitionTo(this.STATE.CONNECTING)}}},TRANSIENT_FAILURE_RETRY:{name:"TRANSIENT_FAILURE_RETRY",enter:function(){this.curTransientRetryCount++;this.cleanupConnection(fe.RETRY)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},retry:function(){this.createRetryTimer()}}},SENT_TLSSSLNEGOTIATION:{name:"SentTLSSSLNegotiation",enter:function(){this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},message:function(t){t.on("data",(t=>{this.messageIo.tlsHandshakeData(t)}));t.once("end",(()=>{if(this.messageIo.tlsNegotiationComplete){this.sendLogin7Packet();const{authentication:t}=this.config;if(t.type==="azure-active-directory-password"||t.type==="azure-active-directory-msi-vm"||t.type==="azure-active-directory-msi-app-service"||t.type==="azure-active-directory-service-principal-secret"||t.type==="azure-active-directory-default"){this.transitionTo(this.STATE.SENT_LOGIN7_WITH_FEDAUTH)}else if(t.type==="ntlm"){this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM)}else{this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}}else{this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))}}))}}},SENT_LOGIN7_WITH_STANDARD_LOGIN:{name:"SentLogin7WithStandardLogin",enter:function(){this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},message:function(t){const r=new J.Login7TokenHandler(this);const n=this.createTokenStreamParser(t,r);n.once("end",(()=>{if(r.loginAckReceived){if(r.routingData){this.routingData=r.routingData;this.transitionTo(this.STATE.REROUTING)}else{this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL)}}else if(this.loginError){if(isTransientError(this.loginError)){this.debug.log("Initiating retry on transient error");this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)}else{this.emit("connect",this.loginError);this.transitionTo(this.STATE.FINAL)}}else{this.emit("connect",new q.ConnectionError("Login failed.","ELOGIN"));this.transitionTo(this.STATE.FINAL)}}))}}},SENT_LOGIN7_WITH_NTLM:{name:"SentLogin7WithNTLMLogin",enter:function(){this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},message:function(t){const r=new J.Login7TokenHandler(this);const n=this.createTokenStreamParser(t,r);n.once("end",(()=>{if(r.loginAckReceived){if(r.routingData){this.routingData=r.routingData;this.transitionTo(this.STATE.REROUTING)}else{this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL)}}else if(this.ntlmpacket){const t=this.config.authentication;const r=new x.default({domain:t.options.domain,userName:t.options.userName,password:t.options.password,ntlmpacket:this.ntlmpacket});this.messageIo.sendMessage(E.TYPE.NTLMAUTH_PKT,r.data);this.debug.payload((function(){return r.toString("  ")}));this.ntlmpacket=undefined;this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))}else if(this.loginError){if(isTransientError(this.loginError)){this.debug.log("Initiating retry on transient error");this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)}else{this.emit("connect",this.loginError);this.transitionTo(this.STATE.FINAL)}}else{this.emit("connect",new q.ConnectionError("Login failed.","ELOGIN"));this.transitionTo(this.STATE.FINAL)}}))}}},SENT_LOGIN7_WITH_FEDAUTH:{name:"SentLogin7Withfedauth",enter:function(){this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},message:function(t){const r=new J.Login7TokenHandler(this);const n=this.createTokenStreamParser(t,r);n.once("end",(()=>{if(r.loginAckReceived){if(r.routingData){this.routingData=r.routingData;this.transitionTo(this.STATE.REROUTING)}else{this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL)}return}const t=r.fedAuthInfoToken;if(t&&t.stsurl&&t.spn){const r=this.config.authentication;const n=new K.URL("/.default",t.spn).toString();const getToken=t=>{const getTokenFromCredentials=r=>{r.getToken(n).then((r=>{t(null,r===null||r===void 0?void 0:r.token)}),t)};if(r.type==="azure-active-directory-password"){var i;const t=new u.UsernamePasswordCredential((i=r.options.tenantId)!==null&&i!==void 0?i:"common",r.options.clientId,r.options.userName,r.options.password);getTokenFromCredentials(t)}else if(r.type==="azure-active-directory-msi-vm"||r.type==="azure-active-directory-msi-app-service"){const t=r.options.clientId?[r.options.clientId,{}]:[{}];const n=new u.ManagedIdentityCredential(...t);getTokenFromCredentials(n)}else if(r.type==="azure-active-directory-default"){const t=r.options.clientId?{managedIdentityClientId:r.options.clientId}:{};const n=new u.DefaultAzureCredential(t);getTokenFromCredentials(n)}else if(r.type==="azure-active-directory-service-principal-secret"){const t=new u.ClientSecretCredential(r.options.tenantId,r.options.clientId,r.options.clientSecret);getTokenFromCredentials(t)}};getToken(((t,r)=>{if(t){this.loginError=new W.default([new q.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH"),t]);this.emit("connect",this.loginError);this.transitionTo(this.STATE.FINAL);return}this.sendFedAuthTokenMessage(r)}))}else if(this.loginError){if(isTransientError(this.loginError)){this.debug.log("Initiating retry on transient error");this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)}else{this.emit("connect",this.loginError);this.transitionTo(this.STATE.FINAL)}}else{this.emit("connect",new q.ConnectionError("Login failed.","ELOGIN"));this.transitionTo(this.STATE.FINAL)}}))}}},LOGGED_IN_SENDING_INITIAL_SQL:{name:"LoggedInSendingInitialSql",enter:function(){this.sendInitialSql();this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function socketError(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},message:function(t){const r=this.createTokenStreamParser(t,new J.InitialSqlTokenHandler(this));r.once("end",(()=>{this.transitionTo(this.STATE.LOGGED_IN);this.processedInitialSql()}))}}},LOGGED_IN:{name:"LoggedIn",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_CLIENT_REQUEST:{name:"SentClientRequest",enter:function(){this.emptyMessageBuffer();this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},exit:function(t){this.clearRequestTimer()},events:{socketError:function(t){const r=this.request;this.request=undefined;this.transitionTo(this.STATE.FINAL);r.callback(t)},message:function(t){var r,n,i;this.clearRequestTimer();const o=this.createTokenStreamParser(t,new J.RequestTokenHandler(this,this.request));if((r=this.request)!==null&&r!==void 0&&r.canceled&&this.cancelTimer){return this.transitionTo(this.STATE.SENT_ATTENTION)}const onResume=()=>{o.resume()};const onPause=()=>{var t;o.pause();(t=this.request)===null||t===void 0?void 0:t.once("resume",onResume)};(n=this.request)===null||n===void 0?void 0:n.on("pause",onPause);if(this.request instanceof N.default&&this.request.paused){onPause()}const onCancel=()=>{var t,r;o.removeListener("end",onEndOfMessage);if(this.request instanceof N.default&&this.request.paused){this.request.resume()}(t=this.request)===null||t===void 0?void 0:t.removeListener("pause",onPause);(r=this.request)===null||r===void 0?void 0:r.removeListener("resume",onResume);this.transitionTo(this.STATE.SENT_ATTENTION)};const onEndOfMessage=()=>{var t,r,n,i;(t=this.request)===null||t===void 0?void 0:t.removeListener("cancel",this._cancelAfterRequestSent);(r=this.request)===null||r===void 0?void 0:r.removeListener("cancel",onCancel);(n=this.request)===null||n===void 0?void 0:n.removeListener("pause",onPause);(i=this.request)===null||i===void 0?void 0:i.removeListener("resume",onResume);this.transitionTo(this.STATE.LOGGED_IN);const o=this.request;this.request=undefined;if(this.config.options.tdsVersion<"7_2"&&o.error&&this.isSqlBatch){this.inTransaction=false}o.callback(o.error,o.rowCount,o.rows)};o.once("end",onEndOfMessage);(i=this.request)===null||i===void 0?void 0:i.once("cancel",onCancel)}}},SENT_ATTENTION:{name:"SentAttention",enter:function(){this.emptyMessageBuffer();this.messageIo.readMessage().then((t=>{this.dispatchEvent("message",t)}),(t=>{this.socketError(t)}))},events:{socketError:function(t){const r=this.request;this.request=undefined;this.transitionTo(this.STATE.FINAL);r.callback(t)},message:function(t){const r=new J.AttentionTokenHandler(this,this.request);const n=this.createTokenStreamParser(t,r);n.once("end",(()=>{if(r.attentionReceived){this.clearCancelTimer();const t=this.request;this.request=undefined;this.transitionTo(this.STATE.LOGGED_IN);if(t.error&&t.error instanceof q.RequestError&&t.error.code==="ETIMEOUT"){t.callback(t.error)}else{t.callback(new q.RequestError("Canceled.","ECANCEL"))}}}))}}},FINAL:{name:"Final",enter:function(){this.cleanupConnection(fe.NORMAL)},events:{connectTimeout:function(){},message:function(){},socketError:function(){}}}}},5405:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Connector=r.SequentialConnectionStrategy=r.ParallelConnectionStrategy=void 0;var i=_interopRequireDefault(n(41808));var o=_interopRequireDefault(n(9523));var a=_interopRequireWildcard(n(85477));function _getRequireWildcardCache(t){if(typeof WeakMap!=="function")return null;var r=new WeakMap;var n=new WeakMap;return(_getRequireWildcardCache=function(t){return t?n:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var n=_getRequireWildcardCache(r);if(n&&n.has(t)){return n.get(t)}var i={};var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t){if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;if(s&&(s.get||s.set)){Object.defineProperty(i,a,s)}else{i[a]=t[a]}}}i.default=t;if(n){n.set(t,i)}return i}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class AbortError extends Error{constructor(){super("The operation was aborted");this.code=void 0;this.code="ABORT_ERR";this.name="AbortError"}}class ParallelConnectionStrategy{constructor(t,r,n){this.addresses=void 0;this.options=void 0;this.signal=void 0;this.addresses=t;this.options=n;this.signal=r}connect(t){const r=this.signal;if(r.aborted){return process.nextTick(t,new AbortError)}const n=this.addresses;const o=new Array(n.length);let a=0;function onError(i){a+=1;this.removeListener("error",onError);this.removeListener("connect",onConnect);this.destroy();if(a===n.length){r.removeEventListener("abort",onAbort);t(new Error("Could not connect (parallel)"))}}function onConnect(){r.removeEventListener("abort",onAbort);for(let t=0;t<o.length;t++){const r=o[t];if(this===r){continue}r.removeListener("error",onError);r.removeListener("connect",onConnect);r.destroy()}t(null,this)}const onAbort=()=>{for(let t=0;t<o.length;t++){const r=o[t];r.removeListener("error",onError);r.removeListener("connect",onConnect);r.destroy()}t(new AbortError)};for(let t=0,r=n.length;t<r;t++){const r=o[t]=i.default.connect({...this.options,host:n[t].address,family:n[t].family});r.on("error",onError);r.on("connect",onConnect)}r.addEventListener("abort",onAbort,{once:true})}}r.ParallelConnectionStrategy=ParallelConnectionStrategy;class SequentialConnectionStrategy{constructor(t,r,n){this.addresses=void 0;this.options=void 0;this.signal=void 0;this.addresses=t;this.options=n;this.signal=r}connect(t){if(this.signal.aborted){return process.nextTick(t,new AbortError)}const r=this.addresses.shift();if(!r){return t(new Error("Could not connect (sequence)"))}const n=i.default.connect({...this.options,host:r.address,family:r.family});const onAbort=()=>{n.removeListener("error",onError);n.removeListener("connect",onConnect);n.destroy();t(new AbortError)};const onError=r=>{this.signal.removeEventListener("abort",onAbort);n.removeListener("error",onError);n.removeListener("connect",onConnect);n.destroy();this.connect(t)};const onConnect=()=>{this.signal.removeEventListener("abort",onAbort);n.removeListener("error",onError);n.removeListener("connect",onConnect);t(null,n)};this.signal.addEventListener("abort",onAbort,{once:true});n.on("error",onError);n.on("connect",onConnect)}}r.SequentialConnectionStrategy=SequentialConnectionStrategy;class Connector{constructor(t,r,n){var i;this.options=void 0;this.multiSubnetFailover=void 0;this.lookup=void 0;this.signal=void 0;this.options=t;this.lookup=(i=t.lookup)!==null&&i!==void 0?i:o.default.lookup;this.signal=r;this.multiSubnetFailover=n}execute(t){if(this.signal.aborted){return process.nextTick(t,new AbortError)}this.lookupAllAddresses(this.options.host,((r,n)=>{if(this.signal.aborted){return t(new AbortError)}if(r){return t(r)}if(this.multiSubnetFailover){new ParallelConnectionStrategy(n,this.signal,this.options).connect(t)}else{new SequentialConnectionStrategy(n,this.signal,this.options).connect(t)}}))}lookupAllAddresses(t,r){if(i.default.isIPv6(t)){process.nextTick(r,null,[{address:t,family:6}])}else if(i.default.isIPv4(t)){process.nextTick(r,null,[{address:t,family:4}])}else{this.lookup.call(null,a.toASCII(t),{all:true},r)}}}r.Connector=Connector},88156:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.typeByName=r.TYPES=r.TYPE=void 0;var i=_interopRequireDefault(n(13653));var o=_interopRequireDefault(n(19984));var a=_interopRequireDefault(n(10214));var s=_interopRequireDefault(n(93079));var c=_interopRequireDefault(n(13219));var u=_interopRequireDefault(n(24342));var l=_interopRequireDefault(n(98740));var d=_interopRequireDefault(n(19185));var p=_interopRequireDefault(n(37978));var g=_interopRequireDefault(n(46957));var v=_interopRequireDefault(n(32057));var E=_interopRequireDefault(n(56272));var S=_interopRequireDefault(n(69257));var w=_interopRequireDefault(n(51038));var x=_interopRequireDefault(n(52847));var N=_interopRequireDefault(n(82705));var P=_interopRequireDefault(n(22467));var D=_interopRequireDefault(n(84931));var M=_interopRequireDefault(n(16304));var L=_interopRequireDefault(n(74136));var U=_interopRequireDefault(n(32162));var q=_interopRequireDefault(n(45836));var B=_interopRequireDefault(n(47307));var F=_interopRequireDefault(n(76601));var j=_interopRequireDefault(n(78359));var H=_interopRequireDefault(n(96305));var z=_interopRequireDefault(n(45714));var V=_interopRequireDefault(n(95734));var Y=_interopRequireDefault(n(52044));var G=_interopRequireDefault(n(3680));var W=_interopRequireDefault(n(57526));var $=_interopRequireDefault(n(26089));var K=_interopRequireDefault(n(91146));var J=_interopRequireDefault(n(57802));var Z=_interopRequireDefault(n(38850));var X=_interopRequireDefault(n(40189));var Q=_interopRequireDefault(n(87624));var ee=_interopRequireDefault(n(22570));var te=_interopRequireDefault(n(32483));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const re={[i.default.id]:i.default,[o.default.id]:o.default,[a.default.id]:a.default,[s.default.id]:s.default,[c.default.id]:c.default,[u.default.id]:u.default,[l.default.id]:l.default,[d.default.id]:d.default,[p.default.id]:p.default,[g.default.id]:g.default,[v.default.id]:v.default,[E.default.id]:E.default,[S.default.id]:S.default,[w.default.id]:w.default,[x.default.id]:x.default,[N.default.id]:N.default,[P.default.id]:P.default,[D.default.id]:D.default,[M.default.id]:M.default,[L.default.id]:L.default,[U.default.id]:U.default,[q.default.id]:q.default,[B.default.id]:B.default,[F.default.id]:F.default,[j.default.id]:j.default,[H.default.id]:H.default,[z.default.id]:z.default,[V.default.id]:V.default,[Y.default.id]:Y.default,[G.default.id]:G.default,[W.default.id]:W.default,[$.default.id]:$.default,[K.default.id]:K.default,[J.default.id]:J.default,[Z.default.id]:Z.default,[X.default.id]:X.default,[Q.default.id]:Q.default,[ee.default.id]:ee.default,[te.default.id]:te.default};r.TYPE=re;const ne={TinyInt:o.default,Bit:a.default,SmallInt:s.default,Int:c.default,SmallDateTime:u.default,Real:l.default,Money:d.default,DateTime:p.default,Float:g.default,Decimal:v.default,Numeric:E.default,SmallMoney:S.default,BigInt:w.default,Image:x.default,Text:N.default,UniqueIdentifier:P.default,NText:M.default,VarBinary:H.default,VarChar:z.default,Binary:V.default,Char:Y.default,NVarChar:G.default,NChar:W.default,Xml:$.default,Time:K.default,Date:J.default,DateTime2:Z.default,DateTimeOffset:X.default,UDT:Q.default,TVP:ee.default,Variant:te.default};r.TYPES=ne;const ie=ne;r.typeByName=ie},51038:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(84931));var o=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=Buffer.from([8]);const s=Buffer.from([0]);const c={id:127,type:"INT8",name:"BigInt",declaration:function(){return"bigint"},generateTypeInfo(){return Buffer.from([i.default.id,8])},generateParameterLength(t,r){if(t.value==null){return s}return a},*generateParameterData(t,r){if(t.value==null){return}const n=new o.default(8);n.writeInt64LE(Number(t.value));yield n.data},validate:function(t){if(t==null){return null}if(typeof t!=="number"){t=Number(t)}if(isNaN(t)){throw new TypeError("Invalid number.")}if(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER){throw new TypeError(`Value must be between ${Number.MIN_SAFE_INTEGER} and ${Number.MAX_SAFE_INTEGER}, inclusive.  For smaller or bigger numbers, use VarChar type.`)}return t}};var u=c;r["default"]=u;t.exports=c},95734:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n=Buffer.from([255,255]);const i={id:173,type:"BIGBinary",name:"Binary",maximumLength:8e3,declaration:function(t){const r=t.value;let n;if(t.length){n=t.length}else if(r!=null){n=r.length||1}else if(r===null&&!t.output){n=1}else{n=this.maximumLength}return"binary("+n+")"},resolveLength:function(t){const r=t.value;if(r!=null){return r.length}else{return this.maximumLength}},generateTypeInfo(t){const r=Buffer.alloc(3);r.writeUInt8(this.id,0);r.writeUInt16LE(t.length,1);return r},generateParameterLength(t,r){if(t.value==null){return n}const i=Buffer.alloc(2);i.writeUInt16LE(t.length,0);return i},*generateParameterData(t,r){if(t.value==null){return}yield t.value.slice(0,t.length!==undefined?Math.min(t.length,this.maximumLength):this.maximumLength)},validate:function(t){if(t==null){return null}if(!Buffer.isBuffer(t)){throw new TypeError("Invalid buffer.")}return t}};var o=i;r["default"]=o;t.exports=i},10214:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(74136));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([1]);const a=Buffer.from([0]);const s={id:50,type:"BIT",name:"Bit",declaration:function(){return"bit"},generateTypeInfo(){return Buffer.from([i.default.id,1])},generateParameterLength(t,r){if(t.value==null){return a}return o},*generateParameterData(t,r){if(t.value==null){return}yield t.value?Buffer.from([1]):Buffer.from([0])},validate:function(t){if(t==null){return null}if(t){return true}else{return false}}};var c=s;r["default"]=c;t.exports=s},74136:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:104,type:"BITN",name:"BitN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},*generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},52044:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(93102));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([255,255]);const a={id:175,type:"BIGCHAR",name:"Char",maximumLength:8e3,declaration:function(t){const r=t.value;let n;if(t.length){n=t.length}else if(r!=null){n=r.length||1}else if(r===null&&!t.output){n=1}else{n=this.maximumLength}if(n<this.maximumLength){return"char("+n+")"}else{return"char("+this.maximumLength+")"}},resolveLength:function(t){const r=t.value;if(t.length!=null){return t.length}else if(r!=null){return r.length||1}else{return this.maximumLength}},generateTypeInfo(t){const r=Buffer.alloc(8);r.writeUInt8(this.id,0);r.writeUInt16LE(t.length,1);if(t.collation){t.collation.toBuffer().copy(r,3,0,5)}return r},generateParameterLength(t,r){const n=t.value;if(n==null){return o}const i=Buffer.alloc(2);i.writeUInt16LE(n.length,0);return i},*generateParameterData(t,r){if(t.value==null){return}yield Buffer.from(t.value,"ascii")},validate:function(t,r){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}if(!r){throw new Error("No collation was set by the server for the current connection.")}if(!r.codepage){throw new Error("The collation set by the server has no associated encoding.")}return i.default.encode(t,r.codepage)}};var s=a;r["default"]=s;t.exports=a},57802:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(22709);const o=global.Date;const a=i.LocalDate.ofYearDay(1,1);const s=Buffer.from([0]);const c=Buffer.from([3]);const u={id:40,type:"DATEN",name:"Date",declaration:function(){return"date"},generateTypeInfo:function(){return Buffer.from([this.id])},generateParameterLength(t,r){if(t.value==null){return s}return c},*generateParameterData(t,r){if(t.value==null){return}const n=t.value;let o;if(r.useUTC){o=i.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate())}else{o=i.LocalDate.of(n.getFullYear(),n.getMonth()+1,n.getDate())}const s=a.until(o,i.ChronoUnit.DAYS);const c=Buffer.alloc(3);c.writeUIntLE(s,0,3);yield c},validate:function(t){if(t==null){return null}if(!(t instanceof o)){t=new o(o.parse(t))}if(isNaN(t)){throw new TypeError("Invalid date.")}return t}};var l=u;r["default"]=l;t.exports=u},37978:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(78359));var o=n(22709);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=o.LocalDate.ofYearDay(1900,1);const s=Buffer.from([0]);const c=Buffer.from([8]);const u={id:61,type:"DATETIME",name:"DateTime",declaration:function(){return"datetime"},generateTypeInfo(){return Buffer.from([i.default.id,8])},generateParameterLength(t,r){if(t.value==null){return s}return c},generateParameterData:function*(t,r){if(t.value==null){return}const n=t.value;let i;if(r.useUTC){i=o.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate())}else{i=o.LocalDate.of(n.getFullYear(),n.getMonth()+1,n.getDate())}let s=a.until(i,o.ChronoUnit.DAYS);let c,u;if(r.useUTC){let t=n.getUTCHours()*60*60;t+=n.getUTCMinutes()*60;t+=n.getUTCSeconds();c=t*1e3+n.getUTCMilliseconds()}else{let t=n.getHours()*60*60;t+=n.getMinutes()*60;t+=n.getSeconds();c=t*1e3+n.getMilliseconds()}u=c/(3+1/3);u=Math.round(u);if(u===2592e4){s+=1;u=0}const l=Buffer.alloc(8);l.writeInt32LE(s,0);l.writeUInt32LE(u,4);yield l},validate:function(t){if(t==null){return null}if(!(t instanceof Date)){t=new Date(Date.parse(t))}if(isNaN(t)){throw new TypeError("Invalid date.")}return t}};var l=u;r["default"]=l;t.exports=u},38850:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(22709);var o=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=i.LocalDate.ofYearDay(1,1);const s=Buffer.from([0]);const c={id:42,type:"DATETIME2N",name:"DateTime2",declaration:function(t){return"datetime2("+this.resolveScale(t)+")"},resolveScale:function(t){if(t.scale!=null){return t.scale}else if(t.value===null){return 0}else{return 7}},generateTypeInfo(t,r){return Buffer.from([this.id,t.scale])},generateParameterLength(t,r){if(t.value==null){return s}switch(t.scale){case 0:case 1:case 2:return Buffer.from([6]);case 3:case 4:return Buffer.from([7]);case 5:case 6:case 7:return Buffer.from([8]);default:throw new Error("invalid scale")}},*generateParameterData(t,r){if(t.value==null){return}const n=t.value;let s=t.scale;const c=new o.default(16);s=s;let u;if(r.useUTC){u=((n.getUTCHours()*60+n.getUTCMinutes())*60+n.getUTCSeconds())*1e3+n.getUTCMilliseconds()}else{u=((n.getHours()*60+n.getMinutes())*60+n.getSeconds())*1e3+n.getMilliseconds()}u=u*Math.pow(10,s-3);u+=(n.nanosecondDelta!=null?n.nanosecondDelta:0)*Math.pow(10,s);u=Math.round(u);switch(s){case 0:case 1:case 2:c.writeUInt24LE(u);break;case 3:case 4:c.writeUInt32LE(u);break;case 5:case 6:case 7:c.writeUInt40LE(u)}let l;if(r.useUTC){l=i.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate())}else{l=i.LocalDate.of(n.getFullYear(),n.getMonth()+1,n.getDate())}const d=a.until(l,i.ChronoUnit.DAYS);c.writeUInt24LE(d);yield c.data},validate:function(t){if(t==null){return null}if(!(t instanceof Date)){t=new Date(Date.parse(t))}if(isNaN(t)){throw new TypeError("Invalid date.")}return t}};var u=c;r["default"]=u;t.exports=c},78359:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:111,type:"DATETIMN",name:"DateTimeN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},40189:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(22709);var o=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=i.LocalDate.ofYearDay(1,1);const s=Buffer.from([0]);const c={id:43,type:"DATETIMEOFFSETN",name:"DateTimeOffset",declaration:function(t){return"datetimeoffset("+this.resolveScale(t)+")"},resolveScale:function(t){if(t.scale!=null){return t.scale}else if(t.value===null){return 0}else{return 7}},generateTypeInfo(t){return Buffer.from([this.id,t.scale])},generateParameterLength(t,r){if(t.value==null){return s}switch(t.scale){case 0:case 1:case 2:return Buffer.from([8]);case 3:case 4:return Buffer.from([9]);case 5:case 6:case 7:return Buffer.from([10]);default:throw new Error("invalid scale")}},*generateParameterData(t,r){if(t.value==null){return}const n=t.value;let s=t.scale;const c=new o.default(16);s=s;let u;u=((n.getUTCHours()*60+n.getUTCMinutes())*60+n.getUTCSeconds())*1e3+n.getMilliseconds();u=u*Math.pow(10,s-3);u+=(n.nanosecondDelta!=null?n.nanosecondDelta:0)*Math.pow(10,s);u=Math.round(u);switch(s){case 0:case 1:case 2:c.writeUInt24LE(u);break;case 3:case 4:c.writeUInt32LE(u);break;case 5:case 6:case 7:c.writeUInt40LE(u)}const l=i.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate());const d=a.until(l,i.ChronoUnit.DAYS);c.writeUInt24LE(d);const p=-n.getTimezoneOffset();c.writeInt16LE(p);yield c.data},validate:function(t){if(t==null){return null}if(!(t instanceof Date)){t=new Date(Date.parse(t))}if(isNaN(t)){throw new TypeError("Invalid date.")}return t}};var u=c;r["default"]=u;t.exports=c},32057:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(32162));var o=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=Buffer.from([0]);const s={id:55,type:"DECIMAL",name:"Decimal",declaration:function(t){return"decimal("+this.resolvePrecision(t)+", "+this.resolveScale(t)+")"},resolvePrecision:function(t){if(t.precision!=null){return t.precision}else if(t.value===null){return 1}else{return 18}},resolveScale:function(t){if(t.scale!=null){return t.scale}else{return 0}},generateTypeInfo(t,r){let n;if(t.precision<=9){n=5}else if(t.precision<=19){n=9}else if(t.precision<=28){n=13}else{n=17}return Buffer.from([i.default.id,n,t.precision,t.scale])},generateParameterLength(t,r){if(t.value==null){return a}const n=t.precision;if(n<=9){return Buffer.from([5])}else if(n<=19){return Buffer.from([9])}else if(n<=28){return Buffer.from([13])}else{return Buffer.from([17])}},*generateParameterData(t,r){if(t.value==null){return}const n=t.value<0?0:1;const i=Math.round(Math.abs(t.value*Math.pow(10,t.scale)));const a=t.precision;if(a<=9){const t=Buffer.alloc(5);t.writeUInt8(n,0);t.writeUInt32LE(i,1);yield t}else if(a<=19){const t=new o.default(9);t.writeUInt8(n);t.writeUInt64LE(i);yield t.data}else if(a<=28){const t=new o.default(13);t.writeUInt8(n);t.writeUInt64LE(i);t.writeUInt32LE(0);yield t.data}else{const t=new o.default(17);t.writeUInt8(n);t.writeUInt64LE(i);t.writeUInt32LE(0);t.writeUInt32LE(0);yield t.data}},validate:function(t){if(t==null){return null}t=parseFloat(t);if(isNaN(t)){throw new TypeError("Invalid number.")}return t}};var c=s;r["default"]=c;t.exports=s},32162:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:106,type:"DECIMALN",name:"DecimalN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},46957:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(47307));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([0]);const a={id:62,type:"FLT8",name:"Float",declaration:function(){return"float"},generateTypeInfo(){return Buffer.from([i.default.id,8])},generateParameterLength(t,r){if(t.value==null){return o}return Buffer.from([8])},*generateParameterData(t,r){if(t.value==null){return}const n=Buffer.alloc(8);n.writeDoubleLE(parseFloat(t.value),0);yield n},validate:function(t){if(t==null){return null}t=parseFloat(t);if(isNaN(t)){throw new TypeError("Invalid number.")}return t}};var s=a;r["default"]=s;t.exports=a},47307:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:109,type:"FLTN",name:"FloatN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},52847:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n=Buffer.from([255,255,255,255]);const i={id:34,type:"IMAGE",name:"Image",hasTableName:true,declaration:function(){return"image"},resolveLength:function(t){if(t.value!=null){const r=t.value;return r.length}else{return-1}},generateTypeInfo(t){const r=Buffer.alloc(5);r.writeUInt8(this.id,0);r.writeInt32LE(t.length,1);return r},generateParameterLength(t,r){if(t.value==null){return n}const i=Buffer.alloc(4);i.writeInt32LE(t.value.length,0);return i},*generateParameterData(t,r){if(t.value==null){return}yield t.value},validate:function(t){if(t==null){return null}if(!Buffer.isBuffer(t)){throw new TypeError("Invalid buffer.")}return t}};var o=i;r["default"]=o;t.exports=i},13219:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(84931));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([0]);const a=Buffer.from([4]);const s={id:56,type:"INT4",name:"Int",declaration:function(){return"int"},generateTypeInfo(){return Buffer.from([i.default.id,4])},generateParameterLength(t,r){if(t.value==null){return o}return a},*generateParameterData(t,r){if(t.value==null){return}const n=Buffer.alloc(4);n.writeInt32LE(Number(t.value),0);yield n},validate:function(t){if(t==null){return null}if(typeof t!=="number"){t=Number(t)}if(isNaN(t)){throw new TypeError("Invalid number.")}if(t<-2147483648||t>2147483647){throw new TypeError("Value must be between -2147483648 and 2147483647, inclusive.")}return t|0}};var c=s;r["default"]=c;t.exports=s},84931:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:38,type:"INTN",name:"IntN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},19185:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(76601));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=(1<<16)*(1<<16);const a=1/o;const s=Buffer.from([0]);const c=Buffer.from([8]);const u={id:60,type:"MONEY",name:"Money",declaration:function(){return"money"},generateTypeInfo:function(){return Buffer.from([i.default.id,8])},generateParameterLength(t,r){if(t.value==null){return s}return c},*generateParameterData(t,r){if(t.value==null){return}const n=t.value*1e4;const i=Buffer.alloc(8);i.writeInt32LE(Math.floor(n*a),0);i.writeInt32LE(n&-1,4);yield i},validate:function(t){if(t==null){return null}t=parseFloat(t);if(isNaN(t)){throw new TypeError("Invalid number.")}return t}};var l=u;r["default"]=l;t.exports=u},76601:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:110,type:"MONEYN",name:"MoneyN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},57526:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n=Buffer.from([255,255]);const i={id:239,type:"NCHAR",name:"NChar",maximumLength:4e3,declaration:function(t){const r=t.value;let n;if(t.length){n=t.length}else if(t.value!=null){n=r.toString().length||1}else if(t.value===null&&!t.output){n=1}else{n=this.maximumLength}if(n<this.maximumLength){return"nchar("+n+")"}else{return"nchar("+this.maximumLength+")"}},resolveLength:function(t){const r=t.value;if(t.length!=null){return t.length}else if(t.value!=null){if(Buffer.isBuffer(t.value)){return t.value.length/2||1}else{return r.toString().length||1}}else{return this.maximumLength}},generateTypeInfo:function(t){const r=Buffer.alloc(8);r.writeUInt8(this.id,0);r.writeUInt16LE(t.length*2,1);if(t.collation){t.collation.toBuffer().copy(r,3,0,5)}return r},generateParameterLength(t,r){if(t.value==null){return n}const{value:i}=t;if(i instanceof Buffer){const t=i.length;const r=Buffer.alloc(2);r.writeUInt16LE(t,0);return r}else{const t=Buffer.byteLength(i.toString(),"ucs2");const r=Buffer.alloc(2);r.writeUInt16LE(t,0);return r}},*generateParameterData(t,r){if(t.value==null){return}const n=t.value;if(n instanceof Buffer){yield n}else{yield Buffer.from(n,"ucs2")}},validate:function(t){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}return t}};var o=i;r["default"]=o;t.exports=i},16304:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n=Buffer.from([255,255,255,255]);const i={id:99,type:"NTEXT",name:"NText",hasTableName:true,declaration:function(){return"ntext"},resolveLength:function(t){const r=t.value;if(r!=null){return r.length}else{return-1}},generateTypeInfo(t,r){const n=Buffer.alloc(10);n.writeUInt8(this.id,0);n.writeInt32LE(t.length,1);if(t.collation){t.collation.toBuffer().copy(n,5,0,5)}return n},generateParameterLength(t,r){if(t.value==null){return n}const i=Buffer.alloc(4);i.writeInt32LE(Buffer.byteLength(t.value,"ucs2"),0);return i},generateParameterData:function*(t,r){if(t.value==null){return}yield Buffer.from(t.value.toString(),"ucs2")},validate:function(t){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}return t}};var o=i;r["default"]=o;t.exports=i},13653:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:31,type:"NULL",name:"Null",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},56272:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(45836));var o=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=Buffer.from([0]);const s={id:63,type:"NUMERIC",name:"Numeric",declaration:function(t){return"numeric("+this.resolvePrecision(t)+", "+this.resolveScale(t)+")"},resolvePrecision:function(t){if(t.precision!=null){return t.precision}else if(t.value===null){return 1}else{return 18}},resolveScale:function(t){if(t.scale!=null){return t.scale}else{return 0}},generateTypeInfo(t){let r;if(t.precision<=9){r=5}else if(t.precision<=19){r=9}else if(t.precision<=28){r=13}else{r=17}return Buffer.from([i.default.id,r,t.precision,t.scale])},generateParameterLength(t,r){if(t.value==null){return a}const n=t.precision;if(n<=9){return Buffer.from([5])}else if(n<=19){return Buffer.from([9])}else if(n<=28){return Buffer.from([13])}else{return Buffer.from([17])}},*generateParameterData(t,r){if(t.value==null){return}const n=t.value<0?0:1;const i=Math.round(Math.abs(t.value*Math.pow(10,t.scale)));if(t.precision<=9){const t=Buffer.alloc(5);t.writeUInt8(n,0);t.writeUInt32LE(i,1);yield t}else if(t.precision<=19){const t=new o.default(10);t.writeUInt8(n);t.writeUInt64LE(i);yield t.data}else if(t.precision<=28){const t=new o.default(14);t.writeUInt8(n);t.writeUInt64LE(i);t.writeUInt32LE(0);yield t.data}else{const t=new o.default(18);t.writeUInt8(n);t.writeUInt64LE(i);t.writeUInt32LE(0);t.writeUInt32LE(0);yield t.data}},validate:function(t){if(t==null){return null}t=parseFloat(t);if(isNaN(t)){throw new TypeError("Invalid number.")}return t}};var c=s;r["default"]=c;t.exports=s},45836:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:108,type:"NUMERICN",name:"NumericN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},3680:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n=(1<<16)-1;const i=Buffer.from([254,255,255,255,255,255,255,255]);const o=Buffer.from([0,0,0,0]);const a=Buffer.from([255,255]);const s=Buffer.from([255,255,255,255,255,255,255,255]);const c={id:231,type:"NVARCHAR",name:"NVarChar",maximumLength:4e3,declaration:function(t){const r=t.value;let n;if(t.length){n=t.length}else if(r!=null){n=r.toString().length||1}else if(r===null&&!t.output){n=1}else{n=this.maximumLength}if(n<=this.maximumLength){return"nvarchar("+n+")"}else{return"nvarchar(max)"}},resolveLength:function(t){const r=t.value;if(t.length!=null){return t.length}else if(r!=null){if(Buffer.isBuffer(r)){return r.length/2||1}else{return r.toString().length||1}}else{return this.maximumLength}},generateTypeInfo(t){const r=Buffer.alloc(8);r.writeUInt8(this.id,0);if(t.length<=this.maximumLength){r.writeUInt16LE(t.length*2,1)}else{r.writeUInt16LE(n,1)}if(t.collation){t.collation.toBuffer().copy(r,3,0,5)}return r},generateParameterLength(t,r){if(t.value==null){if(t.length<=this.maximumLength){return a}else{return s}}let n=t.value;if(t.length<=this.maximumLength){let t;if(n instanceof Buffer){t=n.length}else{n=n.toString();t=Buffer.byteLength(n,"ucs2")}const r=Buffer.alloc(2);r.writeUInt16LE(t,0);return r}else{return i}},*generateParameterData(t,r){if(t.value==null){return}let n=t.value;if(t.length<=this.maximumLength){if(n instanceof Buffer){yield n}else{n=n.toString();yield Buffer.from(n,"ucs2")}}else{if(n instanceof Buffer){const t=n.length;if(t>0){const r=Buffer.alloc(4);r.writeUInt32LE(t,0);yield r;yield n}}else{n=n.toString();const t=Buffer.byteLength(n,"ucs2");if(t>0){const r=Buffer.alloc(4);r.writeUInt32LE(t,0);yield r;yield Buffer.from(n,"ucs2")}}yield o}},validate:function(t){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}return t}};var u=c;r["default"]=u;t.exports=c},98740:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(47307));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([0]);const a=Buffer.from([4]);const s={id:59,type:"FLT4",name:"Real",declaration:function(){return"real"},generateTypeInfo(){return Buffer.from([i.default.id,4])},generateParameterLength(t,r){if(t.value==null){return o}return a},*generateParameterData(t,r){if(t.value==null){return}const n=Buffer.alloc(4);n.writeFloatLE(parseFloat(t.value),0);yield n},validate:function(t){if(t==null){return null}t=parseFloat(t);if(isNaN(t)){throw new TypeError("Invalid number.")}return t}};var c=s;r["default"]=c;t.exports=s},24342:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(78359));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=new Date(1900,0,1);const a=new Date(Date.UTC(1900,0,1));const s=Buffer.from([4]);const c=Buffer.from([0]);const u={id:58,type:"DATETIM4",name:"SmallDateTime",declaration:function(){return"smalldatetime"},generateTypeInfo(){return Buffer.from([i.default.id,4])},generateParameterLength(t,r){if(t.value==null){return c}return s},generateParameterData:function*(t,r){if(t.value==null){return}const n=Buffer.alloc(4);let i,s,c;if(r.useUTC){i=Math.floor((t.value.getTime()-a.getTime())/(1e3*60*60*24));c=t.value.getUTCHours()*60+t.value.getUTCMinutes()}else{s=-(t.value.getTimezoneOffset()-o.getTimezoneOffset())*60*1e3;i=Math.floor((t.value.getTime()-o.getTime()+s)/(1e3*60*60*24));c=t.value.getHours()*60+t.value.getMinutes()}n.writeUInt16LE(i,0);n.writeUInt16LE(c,2);yield n},validate:function(t){if(t==null){return null}if(!(t instanceof Date)){t=new Date(Date.parse(t))}if(isNaN(t)){throw new TypeError("Invalid date.")}return t}};var l=u;r["default"]=l;t.exports=u},93079:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(84931));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([2]);const a=Buffer.from([0]);const s={id:52,type:"INT2",name:"SmallInt",declaration:function(){return"smallint"},generateTypeInfo(){return Buffer.from([i.default.id,2])},generateParameterLength(t,r){if(t.value==null){return a}return o},*generateParameterData(t,r){if(t.value==null){return}const n=Buffer.alloc(2);n.writeInt16LE(Number(t.value),0);yield n},validate:function(t){if(t==null){return null}if(typeof t!=="number"){t=Number(t)}if(isNaN(t)){throw new TypeError("Invalid number.")}if(t<-32768||t>32767){throw new TypeError("Value must be between -32768 and 32767, inclusive.")}return t|0}};var c=s;r["default"]=c;t.exports=s},69257:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(76601));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([4]);const a=Buffer.from([0]);const s={id:122,type:"MONEY4",name:"SmallMoney",declaration:function(){return"smallmoney"},generateTypeInfo:function(){return Buffer.from([i.default.id,4])},generateParameterLength(t,r){if(t.value==null){return a}return o},*generateParameterData(t,r){if(t.value==null){return}const n=Buffer.alloc(4);n.writeInt32LE(t.value*1e4,0);yield n},validate:function(t){if(t==null){return null}t=parseFloat(t);if(isNaN(t)){throw new TypeError("Invalid number.")}if(t<-214748.3648||t>214748.3647){throw new TypeError("Value must be between -214748.3648 and 214748.3647.")}return t}};var c=s;r["default"]=c;t.exports=s},32483:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:98,type:"SSVARIANTTYPE",name:"Variant",declaration:function(){return"sql_variant"},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},82705:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(93102));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([255,255,255,255]);const a={id:35,type:"TEXT",name:"Text",hasTableName:true,declaration:function(){return"text"},resolveLength:function(t){const r=t.value;if(r!=null){return r.length}else{return-1}},generateTypeInfo(t,r){const n=Buffer.alloc(10);n.writeUInt8(this.id,0);n.writeInt32LE(t.length,1);if(t.collation){t.collation.toBuffer().copy(n,5,0,5)}return n},generateParameterLength(t,r){const n=t.value;if(n==null){return o}const i=Buffer.alloc(4);i.writeInt32LE(n.length,0);return i},generateParameterData:function*(t,r){const n=t.value;if(n==null){return}yield n},validate:function(t,r){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}if(!r){throw new Error("No collation was set by the server for the current connection.")}if(!r.codepage){throw new Error("The collation set by the server has no associated encoding.")}return i.default.encode(t,r.codepage)}};var s=a;r["default"]=s;t.exports=a},91146:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([0]);const a={id:41,type:"TIMEN",name:"Time",declaration:function(t){return"time("+this.resolveScale(t)+")"},resolveScale:function(t){if(t.scale!=null){return t.scale}else if(t.value===null){return 0}else{return 7}},generateTypeInfo(t){return Buffer.from([this.id,t.scale])},generateParameterLength(t,r){if(t.value==null){return o}switch(t.scale){case 0:case 1:case 2:return Buffer.from([3]);case 3:case 4:return Buffer.from([4]);case 5:case 6:case 7:return Buffer.from([5]);default:throw new Error("invalid scale")}},*generateParameterData(t,r){if(t.value==null){return}const n=new i.default(16);const o=t.value;let a;if(r.useUTC){a=((o.getUTCHours()*60+o.getUTCMinutes())*60+o.getUTCSeconds())*1e3+o.getUTCMilliseconds()}else{a=((o.getHours()*60+o.getMinutes())*60+o.getSeconds())*1e3+o.getMilliseconds()}a=a*Math.pow(10,t.scale-3);a+=(t.value.nanosecondDelta!=null?t.value.nanosecondDelta:0)*Math.pow(10,t.scale);a=Math.round(a);switch(t.scale){case 0:case 1:case 2:n.writeUInt24LE(a);break;case 3:case 4:n.writeUInt32LE(a);break;case 5:case 6:case 7:n.writeUInt40LE(a)}yield n.data},validate:function(t){if(t==null){return null}if(!(t instanceof Date)){t=new Date(Date.parse(t))}if(isNaN(t)){throw new TypeError("Invalid time.")}return t}};var s=a;r["default"]=s;t.exports=a},19984:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(84931));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([1]);const a=Buffer.from([0]);const s={id:48,type:"INT1",name:"TinyInt",declaration:function(){return"tinyint"},generateTypeInfo(){return Buffer.from([i.default.id,1])},generateParameterLength(t,r){if(t.value==null){return a}return o},*generateParameterData(t,r){if(t.value==null){return}const n=Buffer.alloc(1);n.writeUInt8(Number(t.value),0);yield n},validate:function(t){if(t==null){return null}if(typeof t!=="number"){t=Number(t)}if(isNaN(t)){throw new TypeError("Invalid number.")}if(t<0||t>255){throw new TypeError("Value must be between 0 and 255, inclusive.")}return t|0}};var c=s;r["default"]=c;t.exports=s},22570:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=Buffer.from([1]);const a=Buffer.from([0]);const s=Buffer.from([255,255]);const c={id:243,type:"TVPTYPE",name:"TVP",declaration:function(t){const r=t.value;return r.name+" readonly"},generateTypeInfo(t){var r,n,o,a;const s="";const c=(r=(n=t.value)===null||n===void 0?void 0:n.schema)!==null&&r!==void 0?r:"";const u=(o=(a=t.value)===null||a===void 0?void 0:a.name)!==null&&o!==void 0?o:"";const l=1+1+Buffer.byteLength(s,"ucs2")+1+Buffer.byteLength(c,"ucs2")+1+Buffer.byteLength(u,"ucs2");const d=new i.default(l,"ucs2");d.writeUInt8(this.id);d.writeBVarchar(s);d.writeBVarchar(c);d.writeBVarchar(u);return d.data},generateParameterLength(t,r){if(t.value==null){return s}const{columns:n}=t.value;const i=Buffer.alloc(2);i.writeUInt16LE(n.length,0);return i},*generateParameterData(t,r){if(t.value==null){yield a;yield a;return}const{columns:n,rows:i}=t.value;for(let t=0,r=n.length;t<r;t++){const r=n[t];const i=Buffer.alloc(6);i.writeUInt32LE(0,0);i.writeUInt16LE(0,4);yield i;yield r.type.generateTypeInfo(r);yield Buffer.from([0])}yield a;for(let a=0,s=i.length;a<s;a++){yield o;const s=i[a];for(let i=0,o=s.length;i<o;i++){const o=n[i];const a=s[i];const c={value:o.type.validate(a,t.collation),length:o.length,scale:o.scale,precision:o.precision};yield o.type.generateParameterLength(c,r);yield*o.type.generateParameterData(c,r)}}yield a},validate:function(t){if(t==null){return null}if(typeof t!=="object"){throw new TypeError("Invalid table.")}if(!Array.isArray(t.columns)){throw new TypeError("Invalid table.")}if(!Array.isArray(t.rows)){throw new TypeError("Invalid table.")}return t}};var u=c;r["default"]=u;t.exports=c},87624:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:240,type:"UDTTYPE",name:"UDT",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},22467:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(1997);const o=Buffer.from([0]);const a=Buffer.from([16]);const s={id:36,type:"GUIDN",name:"UniqueIdentifier",declaration:function(){return"uniqueidentifier"},resolveLength:function(){return 16},generateTypeInfo(){return Buffer.from([this.id,16])},generateParameterLength(t,r){if(t.value==null){return o}return a},generateParameterData:function*(t,r){if(t.value==null){return}yield Buffer.from((0,i.guidToArray)(t.value))},validate:function(t){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)){throw new TypeError("Invalid GUID.")}return t}};var c=s;r["default"]=c;t.exports=s},96305:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n=(1<<16)-1;const i=Buffer.from([254,255,255,255,255,255,255,255]);const o=Buffer.from([0,0,0,0]);const a=Buffer.from([255,255]);const s=Buffer.from([255,255,255,255,255,255,255,255]);const c={id:165,type:"BIGVARBIN",name:"VarBinary",maximumLength:8e3,declaration:function(t){const r=t.value;let n;if(t.length){n=t.length}else if(r!=null){n=r.length||1}else if(r===null&&!t.output){n=1}else{n=this.maximumLength}if(n<=this.maximumLength){return"varbinary("+n+")"}else{return"varbinary(max)"}},resolveLength:function(t){const r=t.value;if(t.length!=null){return t.length}else if(r!=null){return r.length}else{return this.maximumLength}},generateTypeInfo:function(t){const r=Buffer.alloc(3);r.writeUInt8(this.id,0);if(t.length<=this.maximumLength){r.writeUInt16LE(t.length,1)}else{r.writeUInt16LE(n,1)}return r},generateParameterLength(t,r){if(t.value==null){if(t.length<=this.maximumLength){return a}else{return s}}let n=t.value;if(!Buffer.isBuffer(n)){n=n.toString()}const o=Buffer.byteLength(n,"ucs2");if(t.length<=this.maximumLength){const t=Buffer.alloc(2);t.writeUInt16LE(o,0);return t}else{return i}},*generateParameterData(t,r){if(t.value==null){return}let n=t.value;if(t.length<=this.maximumLength){if(Buffer.isBuffer(n)){yield n}else{yield Buffer.from(n.toString(),"ucs2")}}else{if(!Buffer.isBuffer(n)){n=n.toString()}const t=Buffer.byteLength(n,"ucs2");if(t>0){const r=Buffer.alloc(4);r.writeUInt32LE(t,0);yield r;if(Buffer.isBuffer(n)){yield n}else{yield Buffer.from(n,"ucs2")}}yield o}},validate:function(t){if(t==null){return null}if(!Buffer.isBuffer(t)){throw new TypeError("Invalid buffer.")}return t}};var u=c;r["default"]=u;t.exports=c},45714:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(93102));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=(1<<16)-1;const a=Buffer.from([254,255,255,255,255,255,255,255]);const s=Buffer.from([0,0,0,0]);const c=Buffer.from([255,255]);const u=Buffer.from([255,255,255,255,255,255,255,255]);const l={id:167,type:"BIGVARCHR",name:"VarChar",maximumLength:8e3,declaration:function(t){const r=t.value;let n;if(t.length){n=t.length}else if(r!=null){n=r.length||1}else if(r===null&&!t.output){n=1}else{n=this.maximumLength}if(n<=this.maximumLength){return"varchar("+n+")"}else{return"varchar(max)"}},resolveLength:function(t){const r=t.value;if(t.length!=null){return t.length}else if(r!=null){return r.length||1}else{return this.maximumLength}},generateTypeInfo(t){const r=Buffer.alloc(8);r.writeUInt8(this.id,0);if(t.length<=this.maximumLength){r.writeUInt16LE(t.length,1)}else{r.writeUInt16LE(o,1)}if(t.collation){t.collation.toBuffer().copy(r,3,0,5)}return r},generateParameterLength(t,r){const n=t.value;if(n==null){if(t.length<=this.maximumLength){return c}else{return u}}if(t.length<=this.maximumLength){const t=Buffer.alloc(2);t.writeUInt16LE(n.length,0);return t}else{return a}},*generateParameterData(t,r){const n=t.value;if(n==null){return}if(t.length<=this.maximumLength){yield n}else{if(n.length>0){const t=Buffer.alloc(4);t.writeUInt32LE(n.length,0);yield t;yield n}yield s}},validate:function(t,r){if(t==null){return null}if(typeof t!=="string"){throw new TypeError("Invalid string.")}if(!r){throw new Error("No collation was set by the server for the current connection.")}if(!r.codepage){throw new Error("The collation set by the server has no associated encoding.")}return i.default.encode(t,r.codepage)}};var d=l;r["default"]=d;t.exports=l},26089:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;const n={id:241,type:"XML",name:"Xml",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var i=n;r["default"]=i;t.exports=n},54643:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(82361);var o=_interopRequireWildcard(n(73837));function _getRequireWildcardCache(t){if(typeof WeakMap!=="function")return null;var r=new WeakMap;var n=new WeakMap;return(_getRequireWildcardCache=function(t){return t?n:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var n=_getRequireWildcardCache(r);if(n&&n.has(t)){return n.get(t)}var i={};var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t){if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;if(s&&(s.get||s.set)){Object.defineProperty(i,a,s)}else{i[a]=t[a]}}}i.default=t;if(n){n.set(t,i)}return i}class Debug extends i.EventEmitter{constructor({data:t=false,payload:r=false,packet:n=false,token:i=false}={}){super();this.options=void 0;this.indent=void 0;this.options={data:t,payload:r,packet:n,token:i};this.indent="  "}packet(t,r){if(this.haveListeners()&&this.options.packet){this.log("");this.log(t);this.log(r.headerToString(this.indent))}}data(t){if(this.haveListeners()&&this.options.data){this.log(t.dataToString(this.indent))}}payload(t){if(this.haveListeners()&&this.options.payload){this.log(t())}}token(t){if(this.haveListeners()&&this.options.token){this.log(o.inspect(t,{showHidden:false,depth:5,colors:true}))}}haveListeners(){return this.listeners("debug").length>0}log(t){this.emit("debug",t)}}var a=Debug;r["default"]=a;t.exports=Debug},43026:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RequestError=r.ConnectionError=void 0;class ConnectionError extends Error{constructor(t,r){super(t);this.code=void 0;this.isTransient=void 0;this.code=r}}r.ConnectionError=ConnectionError;class RequestError extends Error{constructor(t,r){super(t);this.code=void 0;this.number=void 0;this.state=void 0;this.class=void 0;this.serverName=void 0;this.procName=void 0;this.lineNumber=void 0;this.code=r}}r.RequestError=RequestError},1997:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.bufferToUpperCaseGuid=bufferToUpperCaseGuid;r.bufferToLowerCaseGuid=bufferToLowerCaseGuid;r.guidToArray=guidToArray;const n=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"];const i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function bufferToUpperCaseGuid(t){return n[t[3]]+n[t[2]]+n[t[1]]+n[t[0]]+"-"+n[t[5]]+n[t[4]]+"-"+n[t[7]]+n[t[6]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}function bufferToLowerCaseGuid(t){return i[t[3]]+i[t[2]]+i[t[1]]+i[t[0]]+"-"+i[t[5]]+i[t[4]]+"-"+i[t[7]]+i[t[6]]+"-"+i[t[8]]+i[t[9]]+"-"+i[t[10]]+i[t[11]]+i[t[12]]+i[t[13]]+i[t[14]]+i[t[15]]}const o={};const a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"].map((t=>t.charCodeAt(0)));for(let t=0;t<a.length;t++){const r=o[a[t]]={};for(let n=0;n<a.length;n++){const i=String.fromCharCode(a[t],a[n]);const o=parseInt(i,16);r[a[n]]=o}}function guidToArray(t){return[o[t.charCodeAt(6)][t.charCodeAt(7)],o[t.charCodeAt(4)][t.charCodeAt(5)],o[t.charCodeAt(2)][t.charCodeAt(3)],o[t.charCodeAt(0)][t.charCodeAt(1)],o[t.charCodeAt(11)][t.charCodeAt(12)],o[t.charCodeAt(9)][t.charCodeAt(10)],o[t.charCodeAt(16)][t.charCodeAt(17)],o[t.charCodeAt(14)][t.charCodeAt(15)],o[t.charCodeAt(19)][t.charCodeAt(20)],o[t.charCodeAt(21)][t.charCodeAt(22)],o[t.charCodeAt(24)][t.charCodeAt(25)],o[t.charCodeAt(26)][t.charCodeAt(27)],o[t.charCodeAt(28)][t.charCodeAt(29)],o[t.charCodeAt(30)][t.charCodeAt(31)],o[t.charCodeAt(32)][t.charCodeAt(33)],o[t.charCodeAt(34)][t.charCodeAt(35)]]}},60897:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(20336));var o=n(12781);var a=_interopRequireDefault(n(55136));var s=n(6246);var c=n(43026);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class IncomingMessageStream extends o.Transform{constructor(t){super({readableObjectMode:true});this.debug=void 0;this.bl=void 0;this.currentMessage=void 0;this.debug=t;this.currentMessage=undefined;this.bl=new i.default}pause(){super.pause();if(this.currentMessage){this.currentMessage.pause()}return this}resume(){super.resume();if(this.currentMessage){this.currentMessage.resume()}return this}processBufferedData(t){while(this.bl.length>=s.HEADER_LENGTH){const r=this.bl.readUInt16BE(2);if(r<s.HEADER_LENGTH){return t(new c.ConnectionError("Unable to process incoming packet"))}if(this.bl.length>=r){const n=this.bl.slice(0,r);this.bl.consume(r);const i=new s.Packet(n);this.debug.packet("Received",i);this.debug.data(i);let o=this.currentMessage;if(o===undefined){this.currentMessage=o=new a.default({type:i.type(),resetConnection:false});this.push(o)}if(i.isLast()){o.once("end",(()=>{this.currentMessage=undefined;this.processBufferedData(t)}));o.end(i.data());return}else if(!o.write(i.data())){o.once("drain",(()=>{this.processBufferedData(t)}));return}}else{break}}t()}_transform(t,r,n){this.bl.append(t);this.processBufferedData(n)}}var u=IncomingMessageStream;r["default"]=u;t.exports=IncomingMessageStream},22875:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.InstanceLookup=void 0;var i=_interopRequireDefault(n(9523));var o=n(85220);var a=n(5845);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const s=1434;const c=2*1e3;const u=3;const l=3;class AbortError extends Error{constructor(){super("The operation was aborted");this.code=void 0;this.code="ABORT_ERR";this.name="AbortError"}}class InstanceLookup{instanceLookup(t,r){var n,d;const p=t.server;if(typeof p!=="string"){throw new TypeError('Invalid arguments: "server" must be a string')}const g=t.instanceName;if(typeof g!=="string"){throw new TypeError('Invalid arguments: "instanceName" must be a string')}const v=t.timeout===undefined?c:t.timeout;if(typeof v!=="number"){throw new TypeError('Invalid arguments: "timeout" must be a number')}const E=t.retries===undefined?u:t.retries;if(typeof E!=="number"){throw new TypeError('Invalid arguments: "retries" must be a number')}if(t.lookup!==undefined&&typeof t.lookup!=="function"){throw new TypeError('Invalid arguments: "lookup" must be a function')}const S=(n=t.lookup)!==null&&n!==void 0?n:i.default.lookup;if(t.port!==undefined&&typeof t.port!=="number"){throw new TypeError('Invalid arguments: "port" must be a number')}const w=(d=t.port)!==null&&d!==void 0?d:s;const x=t.signal;if(typeof r!=="function"){throw new TypeError('Invalid arguments: "callback" must be a function')}if(x.aborted){return process.nextTick(r,new AbortError)}let N=E;const makeAttempt=()=>{if(N>=0){N--;const n=new o.AbortController;const abortCurrentAttempt=()=>{n.abort()};x.addEventListener("abort",abortCurrentAttempt,{once:true});const i=Buffer.from([2]);const s=new a.Sender(t.server,w,S,n.signal,i);const c=setTimeout(abortCurrentAttempt,v);s.execute(((n,i)=>{clearTimeout(c);if(n){if((n===null||n===void 0?void 0:n.name)==="AbortError"){if(x.aborted){return r(new AbortError)}return makeAttempt()}return r(new Error("Failed to lookup instance on "+p+" - "+n.message))}const o=i.toString("ascii",l);const a=this.parseBrowserResponse(o,g);if(a){r(undefined,a)}else{r(new Error("Port for "+g+" not found in "+t.server))}}))}else{r(new Error("Failed to get response from SQL Server Browser on "+p))}};makeAttempt()}parseBrowserResponse(t,r){let n;const i=t.split(";;");for(let t=0,o=i.length;t<o;t++){const o=i[t];const a=o.split(";");for(let t=0,i=a.length;t<i;t+=2){const i=a[t];const o=a[t+1];if(i==="tcp"&&n){const t=parseInt(o,10);return t}if(i==="InstanceName"){if(o.toUpperCase()===r.toUpperCase()){n=true}else{n=false}}}}}}r.InstanceLookup=InstanceLookup},74122:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.name=void 0;const n="Tedious";r.name=n},33614:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(33988);var o=n(80395);const a={ENDIAN_LITTLE:0,ENDIAN_BIG:1,CHARSET_ASCII:0,CHARSET_EBCDIC:2,FLOAT_IEEE_754:0,FLOAT_VAX:4,FLOAT_ND5000:8,BCP_DUMPLOAD_ON:0,BCP_DUMPLOAD_OFF:16,USE_DB_ON:0,USE_DB_OFF:32,INIT_DB_WARN:0,INIT_DB_FATAL:64,SET_LANG_WARN_OFF:0,SET_LANG_WARN_ON:128};const s={INIT_LANG_WARN:0,INIT_LANG_FATAL:1,ODBC_OFF:0,ODBC_ON:2,F_TRAN_BOUNDARY:4,F_CACHE_CONNECT:8,USER_NORMAL:0,USER_SERVER:16,USER_REMUSER:32,USER_SQLREPL:64,INTEGRATED_SECURITY_OFF:0,INTEGRATED_SECURITY_ON:128};const c={SQL_DFLT:0,SQL_TSQL:8,OLEDB_OFF:0,OLEDB_ON:16,READ_WRITE_INTENT:0,READ_ONLY_INTENT:32};const u={CHANGE_PASSWORD_NO:0,CHANGE_PASSWORD_YES:1,BINARY_XML:2,SPAWN_USER_INSTANCE:4,UNKNOWN_COLLATION_HANDLING:8,EXTENSION_USED:16};const l={FEATURE_ID:2,LIBRARY_SECURITYTOKEN:1,LIBRARY_ADAL:2,FEDAUTH_YES_ECHO:1,FEDAUTH_NO_ECHO:0,ADAL_WORKFLOW_USER_PASS:1,ADAL_WORKFLOW_INTEGRATED:2};const d=255;class Login7Payload{constructor({tdsVersion:t,packetSize:r,clientProgVer:n,clientPid:i,connectionId:o,clientTimeZone:a,clientLcid:s}){this.tdsVersion=void 0;this.packetSize=void 0;this.clientProgVer=void 0;this.clientPid=void 0;this.connectionId=void 0;this.clientTimeZone=void 0;this.clientLcid=void 0;this.readOnlyIntent=void 0;this.initDbFatal=void 0;this.userName=void 0;this.password=void 0;this.serverName=void 0;this.appName=void 0;this.hostname=void 0;this.libraryName=void 0;this.language=void 0;this.database=void 0;this.clientId=void 0;this.sspi=void 0;this.attachDbFile=void 0;this.changePassword=void 0;this.fedAuth=void 0;this.tdsVersion=t;this.packetSize=r;this.clientProgVer=n;this.clientPid=i;this.connectionId=o;this.clientTimeZone=a;this.clientLcid=s;this.readOnlyIntent=false;this.initDbFatal=false;this.fedAuth=undefined;this.userName=undefined;this.password=undefined;this.serverName=undefined;this.appName=undefined;this.hostname=undefined;this.libraryName=undefined;this.language=undefined;this.database=undefined;this.clientId=undefined;this.sspi=undefined;this.attachDbFile=undefined;this.changePassword=undefined}toBuffer(){const t=Buffer.alloc(94);const r=[t];let n=0;let i=t.length;n=t.writeUInt32LE(0,n);n=t.writeUInt32LE(this.tdsVersion,n);n=t.writeUInt32LE(this.packetSize,n);n=t.writeUInt32LE(this.clientProgVer,n);n=t.writeUInt32LE(this.clientPid,n);n=t.writeUInt32LE(this.connectionId,n);n=t.writeUInt8(this.buildOptionFlags1(),n);n=t.writeUInt8(this.buildOptionFlags2(),n);n=t.writeUInt8(this.buildTypeFlags(),n);n=t.writeUInt8(this.buildOptionFlags3(),n);n=t.writeInt32LE(this.clientTimeZone,n);n=t.writeUInt32LE(this.clientLcid,n);n=t.writeUInt16LE(i,n);if(this.hostname){const o=Buffer.from(this.hostname,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(i,n)}n=t.writeUInt16LE(i,n);if(this.userName){const o=Buffer.from(this.userName,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.password){const o=Buffer.from(this.password,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(this.scramblePassword(o))}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.appName){const o=Buffer.from(this.appName,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.serverName){const o=Buffer.from(this.serverName,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);const o=this.buildFeatureExt();n=t.writeUInt16LE(4,n);const a=Buffer.alloc(4);a.writeUInt32LE(i+=4,0);i+=o.length;r.push(a,o);n=t.writeUInt16LE(i,n);if(this.libraryName){const o=Buffer.from(this.libraryName,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.language){const o=Buffer.from(this.language,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.database){const o=Buffer.from(this.database,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}if(this.clientId){this.clientId.copy(t,n,0,6)}n+=6;n=t.writeUInt16LE(i,n);if(this.sspi){if(this.sspi.length>65535){n=t.writeUInt16LE(65535,n)}else{n=t.writeUInt16LE(this.sspi.length,n)}r.push(this.sspi)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.attachDbFile){const o=Buffer.from(this.attachDbFile,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}n=t.writeUInt16LE(i,n);if(this.changePassword){const o=Buffer.from(this.changePassword,"ucs2");n=t.writeUInt16LE(o.length/2,n);i+=o.length;r.push(o)}else{n=t.writeUInt16LE(0,n)}if(this.sspi&&this.sspi.length>65535){t.writeUInt32LE(this.sspi.length,n)}else{t.writeUInt32LE(0,n)}const s=Buffer.concat(r);s.writeUInt32LE(s.length,0);return s}buildOptionFlags1(){let t=a.ENDIAN_LITTLE|a.CHARSET_ASCII|a.FLOAT_IEEE_754|a.BCP_DUMPLOAD_OFF|a.USE_DB_OFF|a.SET_LANG_WARN_ON;if(this.initDbFatal){t|=a.INIT_DB_FATAL}else{t|=a.INIT_DB_WARN}return t}buildFeatureExt(){const t=[];const r=this.fedAuth;if(r){switch(r.type){case"ADAL":const n=Buffer.alloc(7);n.writeUInt8(l.FEATURE_ID,0);n.writeUInt32LE(2,1);n.writeUInt8(l.LIBRARY_ADAL<<1|(r.echo?l.FEDAUTH_YES_ECHO:l.FEDAUTH_NO_ECHO),5);n.writeUInt8(r.workflow==="integrated"?2:l.ADAL_WORKFLOW_USER_PASS,6);t.push(n);break;case"SECURITYTOKEN":const i=Buffer.from(r.fedAuthToken,"ucs2");const o=Buffer.alloc(10);let a=0;a=o.writeUInt8(l.FEATURE_ID,a);a=o.writeUInt32LE(i.length+4+1,a);a=o.writeUInt8(l.LIBRARY_SECURITYTOKEN<<1|(r.echo?l.FEDAUTH_YES_ECHO:l.FEDAUTH_NO_ECHO),a);o.writeInt32LE(i.length,a);t.push(o);t.push(i);break}}if(this.tdsVersion>=o.versions["7_4"]){const r=10;const n=1;const i=Buffer.alloc(6);i.writeUInt8(r,0);i.writeUInt32LE(1,1);i.writeUInt8(n,5);t.push(i)}t.push(Buffer.from([d]));return Buffer.concat(t)}buildOptionFlags2(){let t=s.INIT_LANG_WARN|s.ODBC_OFF|s.USER_NORMAL;if(this.sspi){t|=s.INTEGRATED_SECURITY_ON}else{t|=s.INTEGRATED_SECURITY_OFF}return t}buildTypeFlags(){let t=c.SQL_DFLT|c.OLEDB_OFF;if(this.readOnlyIntent){t|=c.READ_ONLY_INTENT}else{t|=c.READ_WRITE_INTENT}return t}buildOptionFlags3(){return u.CHANGE_PASSWORD_NO|u.UNKNOWN_COLLATION_HANDLING|u.EXTENSION_USED}scramblePassword(t){for(let r=0,n=t.length;r<n;r++){let n=t[r];const i=n&15;const o=n>>4;n=i<<4|o;n=n^165;t[r]=n}return t}toString(t=""){return t+"Login7 - "+(0,i.sprintf)("TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X",this.tdsVersion,this.packetSize,this.clientProgVer,this.clientPid,this.connectionId)+"\n"+t+"         "+(0,i.sprintf)("Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X",this.buildOptionFlags1(),this.buildOptionFlags2(),this.buildTypeFlags(),this.buildOptionFlags3(),this.clientTimeZone,this.clientLcid)+"\n"+t+"         "+(0,i.sprintf)("Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'",this.hostname,this.userName,this.password,this.appName,this.serverName,this.libraryName)+"\n"+t+"         "+(0,i.sprintf)("Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'",this.language,this.database,this.sspi,this.attachDbFile,this.changePassword)}}var p=Login7Payload;r["default"]=p;t.exports=Login7Payload},24130:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireWildcard(n(24404));var o=n(82361);var a=_interopRequireDefault(n(55136));var s=n(6246);var c=_interopRequireDefault(n(60897));var u=_interopRequireDefault(n(52441));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _getRequireWildcardCache(t){if(typeof WeakMap!=="function")return null;var r=new WeakMap;var n=new WeakMap;return(_getRequireWildcardCache=function(t){return t?n:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var n=_getRequireWildcardCache(r);if(n&&n.has(t)){return n.get(t)}var i={};var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t){if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;if(s&&(s.get||s.set)){Object.defineProperty(i,a,s)}else{i[a]=t[a]}}}i.default=t;if(n){n.set(t,i)}return i}const l=n(34266);class MessageIO extends o.EventEmitter{constructor(t,r,n){super();this.socket=void 0;this.debug=void 0;this.tlsNegotiationComplete=void 0;this.incomingMessageStream=void 0;this.outgoingMessageStream=void 0;this.securePair=void 0;this.incomingMessageIterator=void 0;this.socket=t;this.debug=n;this.tlsNegotiationComplete=false;this.incomingMessageStream=new c.default(this.debug);this.incomingMessageIterator=this.incomingMessageStream[Symbol.asyncIterator]();this.outgoingMessageStream=new u.default(this.debug,{packetSize:r});this.socket.pipe(this.incomingMessageStream);this.outgoingMessageStream.pipe(this.socket)}packetSize(...t){if(t.length>0){const r=t[0];this.debug.log("Packet size changed from "+this.outgoingMessageStream.packetSize+" to "+r);this.outgoingMessageStream.packetSize=r}if(this.securePair){this.securePair.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize)}return this.outgoingMessageStream.packetSize}startTls(t,r,n){const o=new l;const a=this.securePair={cleartext:i.connect({socket:o.socket1,servername:r,secureContext:t,rejectUnauthorized:!n}),encrypted:o.socket2};a.cleartext.on("error",(t=>{if(typeof a.encrypted.destroy==="function"){a.encrypted.destroy()}this.socket.destroy(t)}));a.cleartext.on("secureConnect",(()=>{const t=a.cleartext.getCipher();if(t){this.debug.log("TLS negotiated ("+t.name+", "+t.version+")")}this.emit("secure",a.cleartext);this.encryptAllFutureTraffic()}));a.encrypted.on("data",(t=>{this.sendMessage(s.TYPE.PRELOGIN,t,false)}))}encryptAllFutureTraffic(){const t=this.securePair;t.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize);t.encrypted.removeAllListeners("data");this.outgoingMessageStream.unpipe(this.socket);this.socket.unpipe(this.incomingMessageStream);this.socket.pipe(t.encrypted);t.encrypted.pipe(this.socket);t.cleartext.pipe(this.incomingMessageStream);this.outgoingMessageStream.pipe(t.cleartext);this.tlsNegotiationComplete=true}tlsHandshakeData(t){const r=this.securePair;r.encrypted.write(t)}sendMessage(t,r,n){const i=new a.default({type:t,resetConnection:n});i.end(r);this.outgoingMessageStream.write(i);return i}async readMessage(){const t=await this.incomingMessageIterator.next();if(t.done){throw new Error("unexpected end of message stream")}return t.value}pause(){this.incomingMessageStream.pause()}resume(){this.incomingMessageStream.resume()}}var d=MessageIO;r["default"]=d;t.exports=MessageIO},55136:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(12781);class Message extends i.PassThrough{constructor({type:t,resetConnection:r=false}){super();this.type=void 0;this.resetConnection=void 0;this.ignore=void 0;this.type=t;this.resetConnection=r;this.ignore=false}}var o=Message;r["default"]=o;t.exports=Message},59157:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.readCollation=readCollation;r["default"]=void 0;var i=n(69026);var o=n(88156);var a=n(33988);function readCollation(t,r){t.readBuffer(5,(t=>{r(i.Collation.fromBuffer(t))}))}function readSchema(t,r){t.readUInt8((n=>{if(n===1){t.readBVarChar((n=>{t.readBVarChar((i=>{t.readUsVarChar((t=>{r({dbname:n,owningSchema:i,xmlSchemaCollection:t})}))}))}))}else{r(undefined)}}))}function readUDTInfo(t,r){t.readUInt16LE((n=>{t.readBVarChar((i=>{t.readBVarChar((o=>{t.readBVarChar((a=>{t.readUsVarChar((t=>{r({maxByteSize:n,dbname:i,owningSchema:o,typeName:a,assemblyName:t})}))}))}))}))}))}function metadataParse(t,r,n){(r.tdsVersion<"7_2"?t.readUInt16LE:t.readUInt32LE).call(t,(r=>{t.readUInt16LE((i=>{t.readUInt8((s=>{const c=o.TYPE[s];if(!c){throw new Error((0,a.sprintf)("Unrecognised data type 0x%02X",s))}switch(c.name){case"Null":case"TinyInt":case"SmallInt":case"Int":case"BigInt":case"Real":case"Float":case"SmallMoney":case"Money":case"Bit":case"SmallDateTime":case"DateTime":case"Date":return n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:undefined,schema:undefined,udtInfo:undefined});case"IntN":case"FloatN":case"MoneyN":case"BitN":case"UniqueIdentifier":case"DateTimeN":return t.readUInt8((t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:t,schema:undefined,udtInfo:undefined})}));case"Variant":return t.readUInt32LE((t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:t,schema:undefined,udtInfo:undefined})}));case"VarChar":case"Char":case"NVarChar":case"NChar":return t.readUInt16LE((o=>{readCollation(t,(t=>{n({userType:r,flags:i,type:c,collation:t,precision:undefined,scale:undefined,dataLength:o,schema:undefined,udtInfo:undefined})}))}));case"Text":case"NText":return t.readUInt32LE((o=>{readCollation(t,(t=>{n({userType:r,flags:i,type:c,collation:t,precision:undefined,scale:undefined,dataLength:o,schema:undefined,udtInfo:undefined})}))}));case"VarBinary":case"Binary":return t.readUInt16LE((t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:t,schema:undefined,udtInfo:undefined})}));case"Image":return t.readUInt32LE((t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:t,schema:undefined,udtInfo:undefined})}));case"Xml":return readSchema(t,(t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:undefined,schema:t,udtInfo:undefined})}));case"Time":case"DateTime2":case"DateTimeOffset":return t.readUInt8((t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:t,dataLength:undefined,schema:undefined,udtInfo:undefined})}));case"NumericN":case"DecimalN":return t.readUInt8((o=>{t.readUInt8((a=>{t.readUInt8((t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:a,scale:t,dataLength:o,schema:undefined,udtInfo:undefined})}))}))}));case"UDT":return readUDTInfo(t,(t=>{n({userType:r,flags:i,type:c,collation:undefined,precision:undefined,scale:undefined,dataLength:undefined,schema:undefined,udtInfo:t})}));default:throw new Error((0,a.sprintf)("Unrecognised type %s",c.name))}}))}))}))}var s=metadataParse;r["default"]=s;t.exports=metadataParse;t.exports.readCollation=readCollation},93746:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(16020));var o=_interopRequireWildcard(n(6113));var a=_interopRequireDefault(n(51778));function _getRequireWildcardCache(t){if(typeof WeakMap!=="function")return null;var r=new WeakMap;var n=new WeakMap;return(_getRequireWildcardCache=function(t){return t?n:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var n=_getRequireWildcardCache(r);if(n&&n.has(t)){return n.get(t)}var i={};var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t){if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;if(s&&(s.get||s.set)){Object.defineProperty(i,a,s)}else{i[a]=t[a]}}}i.default=t;if(n){n.set(t,i)}return i}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class NTLMResponsePayload{constructor(t){this.data=void 0;this.data=this.createResponse(t)}toString(t=""){return t+"NTLM Auth"}createResponse(t){const r=this.createClientNonce();const n=24;const o=16;const a=t.domain;const s=t.userName;const c=t.password;const u=t.ntlmpacket;const l=u.target;const d=u.nonce;const p=64+a.length*2+s.length*2+n+o+8+8+8+4+l.length+4;const g=new i.default(p);g.position=0;g.writeString("NTLMSSP\0","utf8");g.writeUInt32LE(3);const v=64;const E=v;const S=E+a.length*2;const w=S+s.length*2;const x=w+n;g.writeUInt16LE(n);g.writeUInt16LE(n);g.writeUInt32LE(w);g.writeUInt16LE(o);g.writeUInt16LE(o);g.writeUInt32LE(x);g.writeUInt16LE(a.length*2);g.writeUInt16LE(a.length*2);g.writeUInt32LE(E);g.writeUInt16LE(s.length*2);g.writeUInt16LE(s.length*2);g.writeUInt32LE(S);g.writeUInt16LE(0);g.writeUInt16LE(0);g.writeUInt32LE(v);g.writeUInt16LE(0);g.writeUInt16LE(0);g.writeUInt32LE(v);g.writeUInt16LE(33281);g.writeUInt16LE(8);g.writeString(a,"ucs2");g.writeString(s,"ucs2");const N=this.lmv2Response(a,s,c,d,r);g.copyFrom(N);const P=(new Date).getTime();const D=this.ntlmv2Response(a,s,c,d,l,r,P);g.copyFrom(D);g.writeUInt32LE(257);g.writeUInt32LE(0);const M=this.createTimestamp(P);g.copyFrom(M);g.copyFrom(r);g.writeUInt32LE(0);g.copyFrom(l);g.writeUInt32LE(0);return g.data}createClientNonce(){const t=Buffer.alloc(8,0);let r=0;while(r<8){t.writeUInt8(Math.ceil(Math.random()*255),r);r++}return t}ntlmv2Response(t,r,n,i,o,a,s){const c=this.createTimestamp(s);const u=this.ntv2Hash(t,r,n);const l=40+o.length;const d=Buffer.alloc(l,0);i.copy(d,0,0,8);d.writeUInt32LE(257,8);d.writeUInt32LE(0,12);c.copy(d,16,0,8);a.copy(d,24,0,8);d.writeUInt32LE(0,32);o.copy(d,36,0,o.length);d.writeUInt32LE(0,36+o.length);return this.hmacMD5(d,u)}createTimestamp(t){const r=a.default.multiply(a.default.add(a.default.BigInt(t),a.default.BigInt(11644473600)),a.default.BigInt(1e7));const n=a.default.toNumber(a.default.bitwiseAnd(r,a.default.BigInt(4294967295)));const i=a.default.toNumber(a.default.bitwiseAnd(a.default.signedRightShift(r,a.default.BigInt(32)),a.default.BigInt(4294967295)));const o=Buffer.alloc(8);o.writeUInt32LE(n,0);o.writeUInt32LE(i,4);return o}lmv2Response(t,r,n,i,o){const a=this.ntv2Hash(t,r,n);const s=Buffer.alloc(i.length+o.length,0);i.copy(s);o.copy(s,i.length,0,o.length);const c=this.hmacMD5(s,a);const u=Buffer.alloc(c.length+o.length,0);c.copy(u);o.copy(u,c.length,0,o.length);return u}ntv2Hash(t,r,n){const i=this.ntHash(n);const o=Buffer.from(r.toUpperCase()+t.toUpperCase(),"ucs2");return this.hmacMD5(o,i)}ntHash(t){const r=Buffer.from(t,"ucs2");return o.createHash("md4").update(r).digest()}hmacMD5(t,r){return o.createHmac("MD5",r).update(t).digest()}}var s=NTLMResponsePayload;r["default"]=s;t.exports=NTLMResponsePayload},17356:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.createNTLMRequest=createNTLMRequest;const n={NTLM_NegotiateUnicode:1,NTLM_NegotiateOEM:2,NTLM_RequestTarget:4,NTLM_Unknown9:8,NTLM_NegotiateSign:16,NTLM_NegotiateSeal:32,NTLM_NegotiateDatagram:64,NTLM_NegotiateLanManagerKey:128,NTLM_Unknown8:256,NTLM_NegotiateNTLM:512,NTLM_NegotiateNTOnly:1024,NTLM_Anonymous:2048,NTLM_NegotiateOemDomainSupplied:4096,NTLM_NegotiateOemWorkstationSupplied:8192,NTLM_Unknown6:16384,NTLM_NegotiateAlwaysSign:32768,NTLM_TargetTypeDomain:65536,NTLM_TargetTypeServer:131072,NTLM_TargetTypeShare:262144,NTLM_NegotiateExtendedSecurity:524288,NTLM_NegotiateIdentify:1048576,NTLM_Unknown5:2097152,NTLM_RequestNonNTSessionKey:4194304,NTLM_NegotiateTargetInfo:8388608,NTLM_Unknown4:16777216,NTLM_NegotiateVersion:33554432,NTLM_Unknown3:67108864,NTLM_Unknown2:134217728,NTLM_Unknown1:268435456,NTLM_Negotiate128:536870912,NTLM_NegotiateKeyExchange:1073741824,NTLM_Negotiate56:2147483648};function createNTLMRequest(t){const r=escape(t.domain.toUpperCase());const i=t.workstation?escape(t.workstation.toUpperCase()):"";let o=n.NTLM_NegotiateUnicode+n.NTLM_NegotiateOEM+n.NTLM_RequestTarget+n.NTLM_NegotiateNTLM+n.NTLM_NegotiateOemDomainSupplied+n.NTLM_NegotiateOemWorkstationSupplied+n.NTLM_NegotiateAlwaysSign+n.NTLM_NegotiateVersion+n.NTLM_NegotiateExtendedSecurity+n.NTLM_Negotiate128+n.NTLM_Negotiate56;if(i===""){o-=n.NTLM_NegotiateOemWorkstationSupplied}const a=Buffer.alloc(40);const s=[a];let c=0;c+=a.write("NTLMSSP",c,7,"ascii");c=a.writeUInt8(0,c);c=a.writeUInt32LE(1,c);c=a.writeUInt32LE(o,c);c=a.writeUInt16LE(r.length,c);c=a.writeUInt16LE(r.length,c);c=a.writeUInt32LE(a.length+i.length,c);c=a.writeUInt16LE(i.length,c);c=a.writeUInt16LE(i.length,c);c=a.writeUInt32LE(a.length,c);c=a.writeUInt8(5,c);c=a.writeUInt8(0,c);c=a.writeUInt16LE(2195,c);c=a.writeUInt8(0,c);c=a.writeUInt8(0,c);c=a.writeUInt8(0,c);a.writeUInt8(15,c);s.push(Buffer.from(i,"ascii"));s.push(Buffer.from(r,"ascii"));return Buffer.concat(s)}},52441:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(20336));var o=n(12781);var a=n(6246);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class OutgoingMessageStream extends o.Duplex{constructor(t,{packetSize:r}){super({writableObjectMode:true});this.packetSize=void 0;this.debug=void 0;this.bl=void 0;this.currentMessage=void 0;this.packetSize=r;this.debug=t;this.bl=new i.default;this.on("finish",(()=>{this.push(null)}))}_write(t,r,n){const i=this.packetSize-a.HEADER_LENGTH;let o=0;this.currentMessage=t;this.currentMessage.on("data",(r=>{if(t.ignore){return}this.bl.append(r);while(this.bl.length>i){const r=this.bl.slice(0,i);this.bl.consume(i);const n=new a.Packet(t.type);n.packetId(o+=1);n.resetConnection(t.resetConnection);n.addData(r);this.debug.packet("Sent",n);this.debug.data(n);if(this.push(n.buffer)===false){t.pause()}}}));this.currentMessage.on("end",(()=>{const r=this.bl.slice();this.bl.consume(r.length);const i=new a.Packet(t.type);i.packetId(o+=1);i.resetConnection(t.resetConnection);i.last(true);i.ignore(t.ignore);i.addData(r);this.debug.packet("Sent",i);this.debug.data(i);this.push(i.buffer);this.currentMessage=undefined;n()}))}_read(t){if(this.currentMessage){this.currentMessage.resume()}}}var s=OutgoingMessageStream;r["default"]=s;t.exports=OutgoingMessageStream},6246:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.isPacketComplete=isPacketComplete;r.packetLength=packetLength;r.Packet=r.OFFSET=r.TYPE=r.HEADER_LENGTH=void 0;var i=n(33988);const o=8;r.HEADER_LENGTH=o;const a={SQL_BATCH:1,RPC_REQUEST:3,TABULAR_RESULT:4,ATTENTION:6,BULK_LOAD:7,TRANSACTION_MANAGER:14,LOGIN7:16,NTLMAUTH_PKT:17,PRELOGIN:18,FEDAUTH_TOKEN:8};r.TYPE=a;const s={};for(const t in a){s[a[t]]=t}const c={NORMAL:0,EOM:1,IGNORE:2,RESETCONNECTION:8,RESETCONNECTIONSKIPTRAN:16};const u={Type:0,Status:1,Length:2,SPID:4,PacketID:6,Window:7};r.OFFSET=u;const l=0;const d=1;const p=0;const g="\n";class Packet{constructor(t){this.buffer=void 0;if(t instanceof Buffer){this.buffer=t}else{const r=t;this.buffer=Buffer.alloc(o,0);this.buffer.writeUInt8(r,u.Type);this.buffer.writeUInt8(c.NORMAL,u.Status);this.buffer.writeUInt16BE(l,u.SPID);this.buffer.writeUInt8(d,u.PacketID);this.buffer.writeUInt8(p,u.Window);this.setLength()}}setLength(){this.buffer.writeUInt16BE(this.buffer.length,u.Length)}length(){return this.buffer.readUInt16BE(u.Length)}resetConnection(t){let r=this.buffer.readUInt8(u.Status);if(t){r|=c.RESETCONNECTION}else{r&=255-c.RESETCONNECTION}this.buffer.writeUInt8(r,u.Status)}last(t){let r=this.buffer.readUInt8(u.Status);if(arguments.length>0){if(t){r|=c.EOM}else{r&=255-c.EOM}this.buffer.writeUInt8(r,u.Status)}return this.isLast()}ignore(t){let r=this.buffer.readUInt8(u.Status);if(t){r|=c.IGNORE}else{r&=255-c.IGNORE}this.buffer.writeUInt8(r,u.Status)}isLast(){return!!(this.buffer.readUInt8(u.Status)&c.EOM)}packetId(t){if(t){this.buffer.writeUInt8(t%256,u.PacketID)}return this.buffer.readUInt8(u.PacketID)}addData(t){this.buffer=Buffer.concat([this.buffer,t]);this.setLength();return this}data(){return this.buffer.slice(o)}type(){return this.buffer.readUInt8(u.Type)}statusAsString(){const t=this.buffer.readUInt8(u.Status);const r=[];for(const n in c){const i=c[n];if(t&i){r.push(n)}else{r.push(undefined)}}return r.join(" ").trim()}headerToString(t=""){const r=(0,i.sprintf)("type:0x%02X(%s), status:0x%02X(%s), length:0x%04X, spid:0x%04X, packetId:0x%02X, window:0x%02X",this.buffer.readUInt8(u.Type),s[this.buffer.readUInt8(u.Type)],this.buffer.readUInt8(u.Status),this.statusAsString(),this.buffer.readUInt16BE(u.Length),this.buffer.readUInt16BE(u.SPID),this.buffer.readUInt8(u.PacketID),this.buffer.readUInt8(u.Window));return t+r}dataToString(t=""){const r=4;const n=8;const o=32;const a=this.data();let s="";let c="";for(let u=0;u<a.length;u++){if(u%o===0){s+=t;s+=(0,i.sprintf)("%04X  ",u)}if(a[u]<32||a[u]>126){c+=".";if((u+1)%n===0&&!((u+1)%o===0)){c+=" "}}else{c+=String.fromCharCode(a[u])}if(a[u]!=null){s+=(0,i.sprintf)("%02X",a[u])}if((u+1)%r===0&&!((u+1)%o===0)){s+=" "}if((u+1)%o===0){s+="  "+c;c="";if(u<a.length-1){s+=g}}}if(c.length){s+="  "+c}return s}toString(t=""){return this.headerToString(t)+"\n"+this.dataToString(t+t)}payloadString(){return""}}r.Packet=Packet;function isPacketComplete(t){if(t.length<o){return false}else{return t.length>=t.readUInt16BE(u.Length)}}function packetLength(t){return t.readUInt16BE(u.Length)}},69108:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(33988);var o=_interopRequireDefault(n(16020));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a=20;const s={VERSION:0,ENCRYPTION:1,INSTOPT:2,THREADID:3,MARS:4,FEDAUTHREQUIRED:6,TERMINATOR:255};const c={OFF:0,ON:1,NOT_SUP:2,REQ:3};const u={};for(const t in c){const r=c[t];u[r]=t}const l={OFF:0,ON:1};const d={};for(const t in l){const r=l[t];d[r]=t}class PreloginPayload{constructor(t={encrypt:false,version:{major:0,minor:0,build:0,subbuild:0}}){this.data=void 0;this.options=void 0;this.version=void 0;this.encryption=void 0;this.encryptionString=void 0;this.instance=void 0;this.threadId=void 0;this.mars=void 0;this.marsString=void 0;this.fedAuthRequired=void 0;if(t instanceof Buffer){this.data=t;this.options={encrypt:false,version:{major:0,minor:0,build:0,subbuild:0}}}else{this.options=t;this.createOptions()}this.extractOptions()}createOptions(){const t=[this.createVersionOption(),this.createEncryptionOption(),this.createInstanceOption(),this.createThreadIdOption(),this.createMarsOption(),this.createFedAuthOption()];let r=0;for(let n=0,i=t.length;n<i;n++){const i=t[n];r+=5+i.data.length}r++;this.data=Buffer.alloc(r,0);let n=0;let i=5*t.length+1;for(let r=0,o=t.length;r<o;r++){const o=t[r];this.data.writeUInt8(o.token,n+0);this.data.writeUInt16BE(i,n+1);this.data.writeUInt16BE(o.data.length,n+3);n+=5;o.data.copy(this.data,i);i+=o.data.length}this.data.writeUInt8(s.TERMINATOR,n)}createVersionOption(){const t=new o.default(a);t.writeUInt8(this.options.version.major);t.writeUInt8(this.options.version.minor);t.writeUInt16BE(this.options.version.build);t.writeUInt16BE(this.options.version.subbuild);return{token:s.VERSION,data:t.data}}createEncryptionOption(){const t=new o.default(a);if(this.options.encrypt){t.writeUInt8(c.ON)}else{t.writeUInt8(c.NOT_SUP)}return{token:s.ENCRYPTION,data:t.data}}createInstanceOption(){const t=new o.default(a);t.writeUInt8(0);return{token:s.INSTOPT,data:t.data}}createThreadIdOption(){const t=new o.default(a);t.writeUInt32BE(0);return{token:s.THREADID,data:t.data}}createMarsOption(){const t=new o.default(a);t.writeUInt8(l.OFF);return{token:s.MARS,data:t.data}}createFedAuthOption(){const t=new o.default(a);t.writeUInt8(1);return{token:s.FEDAUTHREQUIRED,data:t.data}}extractOptions(){let t=0;while(this.data[t]!==s.TERMINATOR){let r=this.data.readUInt16BE(t+1);const n=this.data.readUInt16BE(t+3);switch(this.data[t]){case s.VERSION:this.extractVersion(r);break;case s.ENCRYPTION:this.extractEncryption(r);break;case s.INSTOPT:this.extractInstance(r);break;case s.THREADID:if(n>0){this.extractThreadId(r)}break;case s.MARS:this.extractMars(r);break;case s.FEDAUTHREQUIRED:this.extractFedAuth(r);break}t+=5;r+=n}}extractVersion(t){this.version={major:this.data.readUInt8(t+0),minor:this.data.readUInt8(t+1),build:this.data.readUInt16BE(t+2),subbuild:this.data.readUInt16BE(t+4)}}extractEncryption(t){this.encryption=this.data.readUInt8(t);this.encryptionString=u[this.encryption]}extractInstance(t){this.instance=this.data.readUInt8(t)}extractThreadId(t){this.threadId=this.data.readUInt32BE(t)}extractMars(t){this.mars=this.data.readUInt8(t);this.marsString=d[this.mars]}extractFedAuth(t){this.fedAuthRequired=this.data.readUInt8(t)}toString(t=""){return t+"PreLogin - "+(0,i.sprintf)("version:%d.%d.%d.%d, encryption:0x%02X(%s), instopt:0x%02X, threadId:0x%08X, mars:0x%02X(%s)",this.version.major,this.version.minor,this.version.build,this.version.subbuild,this.encryption?this.encryption:0,this.encryptionString?this.encryptionString:"",this.instance?this.instance:0,this.threadId?this.threadId:0,this.mars?this.mars:0,this.marsString?this.marsString:"")}}var p=PreloginPayload;r["default"]=p;t.exports=PreloginPayload},23773:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(82361);var o=n(43026);var a=n(91784);class Request extends i.EventEmitter{on(t,r){return super.on(t,r)}emit(t,...r){return super.emit(t,...r)}constructor(t,r,n){super();this.sqlTextOrProcedure=void 0;this.parameters=void 0;this.parametersByName=void 0;this.preparing=void 0;this.canceled=void 0;this.paused=void 0;this.userCallback=void 0;this.handle=void 0;this.error=void 0;this.connection=void 0;this.timeout=void 0;this.rows=void 0;this.rst=void 0;this.rowCount=void 0;this.callback=void 0;this.shouldHonorAE=void 0;this.statementColumnEncryptionSetting=void 0;this.cryptoMetadataLoaded=void 0;this.sqlTextOrProcedure=t;this.parameters=[];this.parametersByName={};this.preparing=false;this.handle=undefined;this.canceled=false;this.paused=false;this.error=undefined;this.connection=undefined;this.timeout=undefined;this.userCallback=r;this.statementColumnEncryptionSetting=n&&n.statementColumnEncryptionSetting||a.SQLServerStatementColumnEncryptionSetting.UseConnectionSetting;this.cryptoMetadataLoaded=false;this.callback=function(t,r,n){if(this.preparing){this.preparing=false;if(t){this.emit("error",t)}else{this.emit("prepared")}}else{this.userCallback(t,r,n);this.emit("requestCompleted")}}}addParameter(t,r,n,i){const{output:o=false,length:a,precision:s,scale:c}=i!==null&&i!==void 0?i:{};const u={type:r,name:t,value:n,output:o,length:a,precision:s,scale:c};this.parameters.push(u);this.parametersByName[t]=u}addOutputParameter(t,r,n,i){this.addParameter(t,r,n,{...i,output:true})}makeParamsParameter(t){let r="";for(let n=0,i=t.length;n<i;n++){const i=t[n];if(r.length>0){r+=", "}r+="@"+i.name+" ";r+=i.type.declaration(i);if(i.output){r+=" OUTPUT"}}return r}validateParameters(t){for(let r=0,n=this.parameters.length;r<n;r++){const n=this.parameters[r];try{n.value=n.type.validate(n.value,t)}catch(t){throw new o.RequestError("Validation failed for parameter '"+n.name+"'. "+t.message,"EPARAM")}}}pause(){if(this.paused){return}this.emit("pause");this.paused=true}resume(){if(!this.paused){return}this.paused=false;this.emit("resume")}cancel(){if(this.canceled){return}this.canceled=true;this.emit("cancel")}setTimeout(t){this.timeout=t}}var s=Request;r["default"]=s;t.exports=Request},83124:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(16020));var o=n(6053);let a;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const s={BY_REF_VALUE:1,DEFAULT_VALUE:2};a=Symbol.iterator;class RpcRequestPayload{constructor(t,r,n,i,o){this.procedure=void 0;this.parameters=void 0;this.options=void 0;this.txnDescriptor=void 0;this.collation=void 0;this.procedure=t;this.parameters=r;this.options=i;this.txnDescriptor=n;this.collation=o}[a](){return this.generateData()}*generateData(){const t=new i.default(500);if(this.options.tdsVersion>="7_2"){const r=1;(0,o.writeToTrackingBuffer)(t,this.txnDescriptor,r)}if(typeof this.procedure==="string"){t.writeUsVarchar(this.procedure)}else{t.writeUShort(65535);t.writeUShort(this.procedure)}const r=0;t.writeUInt16LE(r);yield t.data;const n=this.parameters.length;for(let t=0;t<n;t++){yield*this.generateParameterData(this.parameters[t])}}toString(t=""){return t+("RPC Request - "+this.procedure)}*generateParameterData(t){const r=new i.default(1+2+Buffer.byteLength(t.name,"ucs-2")+1);r.writeBVarchar("@"+t.name);let n=0;if(t.output){n|=s.BY_REF_VALUE}r.writeUInt8(n);yield r.data;const o={value:t.value};const a=t.type;if((a.id&48)===32){if(t.length){o.length=t.length}else if(a.resolveLength){o.length=a.resolveLength(t)}}if(t.precision){o.precision=t.precision}else if(a.resolvePrecision){o.precision=a.resolvePrecision(t)}if(t.scale){o.scale=t.scale}else if(a.resolveScale){o.scale=a.resolveScale(t)}if(this.collation){o.collation=this.collation}yield a.generateTypeInfo(o,this.options);yield a.generateParameterLength(o,this.options);yield*a.generateParameterData(o,this.options)}}var c=RpcRequestPayload;r["default"]=c;t.exports=RpcRequestPayload},5845:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Sender=r.ParallelSendStrategy=void 0;var i=_interopRequireDefault(n(71891));var o=_interopRequireDefault(n(41808));var a=_interopRequireWildcard(n(85477));function _getRequireWildcardCache(t){if(typeof WeakMap!=="function")return null;var r=new WeakMap;var n=new WeakMap;return(_getRequireWildcardCache=function(t){return t?n:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var n=_getRequireWildcardCache(r);if(n&&n.has(t)){return n.get(t)}var i={};var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t){if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;if(s&&(s.get||s.set)){Object.defineProperty(i,a,s)}else{i[a]=t[a]}}}i.default=t;if(n){n.set(t,i)}return i}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class AbortError extends Error{constructor(){super("The operation was aborted");this.code=void 0;this.code="ABORT_ERR";this.name="AbortError"}}class ParallelSendStrategy{constructor(t,r,n,i){this.addresses=void 0;this.port=void 0;this.request=void 0;this.signal=void 0;this.addresses=t;this.port=r;this.request=i;this.signal=n}send(t){const r=this.signal;if(r.aborted){return t(new AbortError)}const n=[];let o=0;const onError=n=>{o++;if(o===this.addresses.length){r.removeEventListener("abort",onAbort);clearSockets();t(n)}};const onMessage=n=>{r.removeEventListener("abort",onAbort);clearSockets();t(null,n)};const onAbort=()=>{clearSockets();t(new AbortError)};const clearSockets=()=>{for(const t of n){t.removeListener("error",onError);t.removeListener("message",onMessage);t.close()}};r.addEventListener("abort",onAbort,{once:true});for(let t=0;t<this.addresses.length;t++){const r=this.addresses[t].family===6?"udp6":"udp4";const o=i.default.createSocket(r);n.push(o);o.on("error",onError);o.on("message",onMessage);o.send(this.request,0,this.request.length,this.port,this.addresses[t].address)}}}r.ParallelSendStrategy=ParallelSendStrategy;class Sender{constructor(t,r,n,i,o){this.host=void 0;this.port=void 0;this.request=void 0;this.lookup=void 0;this.signal=void 0;this.host=t;this.port=r;this.request=o;this.lookup=n;this.signal=i}execute(t){if(o.default.isIP(this.host)){this.executeForIP(t)}else{this.executeForHostname(t)}}executeForIP(t){this.executeForAddresses([{address:this.host,family:o.default.isIPv6(this.host)?6:4}],t)}invokeLookupAll(t,r){this.lookup.call(null,a.toASCII(t),{all:true},r)}executeForHostname(t){this.invokeLookupAll(this.host,((r,n)=>{if(r){return t(r)}this.executeForAddresses(n,t)}))}executeForAddresses(t,r){const n=new ParallelSendStrategy(t,this.port,this.signal,this.request);n.send(r)}}r.Sender=Sender},78358:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(16020));var o=n(6053);let a;function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}a=Symbol.iterator;class SqlBatchPayload{constructor(t,r,n){this.sqlText=void 0;this.txnDescriptor=void 0;this.options=void 0;this.sqlText=t;this.txnDescriptor=r;this.options=n}*[a](){if(this.options.tdsVersion>="7_2"){const t=new i.default(18,"ucs2");const r=1;(0,o.writeToTrackingBuffer)(t,this.txnDescriptor,r);yield t.data}yield Buffer.from(this.sqlText,"ucs2")}toString(t=""){return t+("SQL Batch - "+this.sqlText)}}var s=SqlBatchPayload;r["default"]=s;t.exports=SqlBatchPayload},80395:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.versionsByValue=r.versions=void 0;const n={"7_1":1895825409,"7_2":1913192450,"7_3_A":1930035203,"7_3_B":1930100739,"7_4":1946157060};r.versions=n;const i={};r.versionsByValue=i;for(const t in n){i[n[t]]=t}},62459:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.connect=connect;Object.defineProperty(r,"BulkLoad",{enumerable:true,get:function(){return i.default}});Object.defineProperty(r,"Connection",{enumerable:true,get:function(){return o.default}});Object.defineProperty(r,"Request",{enumerable:true,get:function(){return a.default}});Object.defineProperty(r,"ConnectionError",{enumerable:true,get:function(){return c.ConnectionError}});Object.defineProperty(r,"RequestError",{enumerable:true,get:function(){return c.RequestError}});Object.defineProperty(r,"TYPES",{enumerable:true,get:function(){return u.TYPES}});Object.defineProperty(r,"ISOLATION_LEVEL",{enumerable:true,get:function(){return l.ISOLATION_LEVEL}});Object.defineProperty(r,"TDS_VERSION",{enumerable:true,get:function(){return d.versions}});r.library=void 0;var i=_interopRequireDefault(n(44655));var o=_interopRequireDefault(n(53675));var a=_interopRequireDefault(n(23773));var s=n(74122);var c=n(43026);var u=n(88156);var l=n(3034);var d=n(80395);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const p={name:s.name};r.library=p;function connect(t,r){const n=new o.default(t);n.connect(r);return n}},83146:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(59157));var o=n(51195);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function readTableName(t,r,n,i){if(n.type.hasTableName){if(r.tdsVersion>="7_2"){t.readUInt8((r=>{const n=[];let o=0;function next(i){if(r===o){return i()}t.readUsVarChar((t=>{n.push(t);o++;next(i)}))}next((()=>{i(n)}))}))}else{t.readUsVarChar(i)}}else{i(undefined)}}function readColumnName(t,r,n,i,o){t.readBVarChar((t=>{if(r.columnNameReplacer){o(r.columnNameReplacer(t,n,i))}else if(r.camelCaseColumns){o(t.replace(/^[A-Z]/,(function(t){return t.toLowerCase()})))}else{o(t)}}))}function readColumn(t,r,n,o){(0,i.default)(t,r,(i=>{readTableName(t,r,i,(a=>{readColumnName(t,r,n,i,(t=>{o({userType:i.userType,flags:i.flags,type:i.type,collation:i.collation,precision:i.precision,scale:i.scale,udtInfo:i.udtInfo,dataLength:i.dataLength,schema:i.schema,colName:t,tableName:a})}))}))}))}async function colMetadataParser(t){while(t.buffer.length-t.position<2){await t.streamBuffer.waitForChunk()}const r=t.buffer.readUInt16LE(t.position);t.position+=2;const n=[];for(let i=0;i<r;i++){let r;readColumn(t,t.options,i,(t=>{r=t}));while(t.suspended){await t.streamBuffer.waitForChunk();t.suspended=false;const r=t.next;r()}n.push(r)}return new o.ColMetadataToken(n)}var a=colMetadataParser;r["default"]=a;t.exports=colMetadataParser},29069:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.doneParser=doneParser;r.doneInProcParser=doneInProcParser;r.doneProcParser=doneProcParser;var i=_interopRequireDefault(n(51778));var o=n(51195);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a={MORE:1,ERROR:2,INXACT:4,COUNT:16,ATTN:32,SRVERROR:256};function parseToken(t,r,n){t.readUInt16LE((o=>{const s=!!(o&a.MORE);const c=!!(o&a.ERROR);const u=!!(o&a.COUNT);const l=!!(o&a.ATTN);const d=!!(o&a.SRVERROR);t.readUInt16LE((o=>{const next=t=>{n({more:s,sqlError:c,attention:l,serverError:d,rowCount:u?t:undefined,curCmd:o})};if(r.tdsVersion<"7_2"){t.readUInt32LE(next)}else{t.readBigUInt64LE((t=>{next(i.default.toNumber(t))}))}}))}))}function doneParser(t,r,n){parseToken(t,r,(t=>{n(new o.DoneToken(t))}))}function doneInProcParser(t,r,n){parseToken(t,r,(t=>{n(new o.DoneInProcToken(t))}))}function doneProcParser(t,r,n){parseToken(t,r,(t=>{n(new o.DoneProcToken(t))}))}},63828:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(69026);var o=n(51195);const a={1:{name:"DATABASE",event:"databaseChange"},2:{name:"LANGUAGE",event:"languageChange"},3:{name:"CHARSET",event:"charsetChange"},4:{name:"PACKET_SIZE",event:"packetSizeChange"},7:{name:"SQL_COLLATION",event:"sqlCollationChange"},8:{name:"BEGIN_TXN",event:"beginTransaction"},9:{name:"COMMIT_TXN",event:"commitTransaction"},10:{name:"ROLLBACK_TXN",event:"rollbackTransaction"},13:{name:"DATABASE_MIRRORING_PARTNER",event:"partnerNode"},17:{name:"TXN_ENDED"},18:{name:"RESET_CONNECTION",event:"resetConnection"},20:{name:"ROUTING_CHANGE",event:"routingChange"}};function readNewAndOldValue(t,r,n,a){switch(n.name){case"DATABASE":case"LANGUAGE":case"CHARSET":case"PACKET_SIZE":case"DATABASE_MIRRORING_PARTNER":return t.readBVarChar((r=>{t.readBVarChar((t=>{switch(n.name){case"PACKET_SIZE":return a(new o.PacketSizeEnvChangeToken(parseInt(r),parseInt(t)));case"DATABASE":return a(new o.DatabaseEnvChangeToken(r,t));case"LANGUAGE":return a(new o.LanguageEnvChangeToken(r,t));case"CHARSET":return a(new o.CharsetEnvChangeToken(r,t));case"DATABASE_MIRRORING_PARTNER":return a(new o.DatabaseMirroringPartnerEnvChangeToken(r,t))}}))}));case"SQL_COLLATION":case"BEGIN_TXN":case"COMMIT_TXN":case"ROLLBACK_TXN":case"RESET_CONNECTION":return t.readBVarByte((r=>{t.readBVarByte((t=>{switch(n.name){case"SQL_COLLATION":{const n=r.length?i.Collation.fromBuffer(r):undefined;const s=t.length?i.Collation.fromBuffer(t):undefined;return a(new o.CollationChangeToken(n,s))}case"BEGIN_TXN":return a(new o.BeginTransactionEnvChangeToken(r,t));case"COMMIT_TXN":return a(new o.CommitTransactionEnvChangeToken(r,t));case"ROLLBACK_TXN":return a(new o.RollbackTransactionEnvChangeToken(r,t));case"RESET_CONNECTION":return a(new o.ResetConnectionEnvChangeToken(r,t))}}))}));case"ROUTING_CHANGE":return t.readUInt16LE((r=>{t.readBuffer(r,(r=>{const n=r.readUInt8(0);if(n!==0){throw new Error("Unknown protocol byte in routing change event")}const i=r.readUInt16LE(1);const s=r.readUInt16LE(3);const c=r.toString("ucs2",5,5+s*2);const u={protocol:n,port:i,server:c};t.readUInt16LE((r=>{t.readBuffer(r,(t=>{a(new o.RoutingEnvChangeToken(u,t))}))}))}))}));default:console.error("Tedious > Unsupported ENVCHANGE type "+n.name);t.readBuffer(r-1,(()=>{a(undefined)}))}}function envChangeParser(t,r,n){t.readUInt16LE((r=>{t.readUInt8((i=>{const o=a[i];if(!o){console.error("Tedious > Unsupported ENVCHANGE type "+i);return t.readBuffer(r-1,(()=>{n(undefined)}))}readNewAndOldValue(t,r,o,(t=>{n(t)}))}))}))}var s=envChangeParser;r["default"]=s;t.exports=envChangeParser},99059:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);const o={SESSIONRECOVERY:1,FEDAUTH:2,COLUMNENCRYPTION:4,GLOBALTRANSACTIONS:5,AZURESQLSUPPORT:8,UTF8_SUPPORT:10,TERMINATOR:255};function featureExtAckParser(t,r,n){let a;let s;function next(){t.readUInt8((r=>{if(r===o.TERMINATOR){return n(new i.FeatureExtAckToken(a,s))}t.readUInt32LE((n=>{t.readBuffer(n,(t=>{switch(r){case o.FEDAUTH:a=t;break;case o.UTF8_SUPPORT:s=!!t[0];break}next()}))}))}))}next()}var a=featureExtAckParser;r["default"]=a;t.exports=featureExtAckParser},77535:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);const o={STSURL:1,SPN:2};function fedAuthInfoParser(t,r,n){t.readUInt32LE((r=>{t.readBuffer(r,(t=>{let r,a;let s=0;const c=t.readUInt32LE(s);s+=4;for(let n=0;n<c;n++){const n=t.readUInt8(s);s+=1;const i=t.readUInt32LE(s);s+=4;const c=t.readUInt32LE(s);s+=4;switch(n){case o.SPN:r=t.toString("ucs2",c,c+i);break;case o.STSURL:a=t.toString("ucs2",c,c+i);break;default:break}}n(new i.FedAuthInfoToken(r,a))}))}))}var a=fedAuthInfoParser;r["default"]=a;t.exports=fedAuthInfoParser},79553:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.AttentionTokenHandler=r.RequestTokenHandler=r.Login7TokenHandler=r.InitialSqlTokenHandler=r.TokenHandler=r.UnexpectedTokenError=void 0;var i=_interopRequireDefault(n(23773));var o=n(43026);var a=_interopRequireDefault(n(55103));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class UnexpectedTokenError extends Error{constructor(t,r){super("Unexpected token `"+r.name+"` in `"+t.constructor.name+"`")}}r.UnexpectedTokenError=UnexpectedTokenError;class TokenHandler{onInfoMessage(t){throw new UnexpectedTokenError(this,t)}onErrorMessage(t){throw new UnexpectedTokenError(this,t)}onSSPI(t){throw new UnexpectedTokenError(this,t)}onDatabaseChange(t){throw new UnexpectedTokenError(this,t)}onLanguageChange(t){throw new UnexpectedTokenError(this,t)}onCharsetChange(t){throw new UnexpectedTokenError(this,t)}onSqlCollationChange(t){throw new UnexpectedTokenError(this,t)}onRoutingChange(t){throw new UnexpectedTokenError(this,t)}onPacketSizeChange(t){throw new UnexpectedTokenError(this,t)}onResetConnection(t){throw new UnexpectedTokenError(this,t)}onBeginTransaction(t){throw new UnexpectedTokenError(this,t)}onCommitTransaction(t){throw new UnexpectedTokenError(this,t)}onRollbackTransaction(t){throw new UnexpectedTokenError(this,t)}onFedAuthInfo(t){throw new UnexpectedTokenError(this,t)}onFeatureExtAck(t){throw new UnexpectedTokenError(this,t)}onLoginAck(t){throw new UnexpectedTokenError(this,t)}onColMetadata(t){throw new UnexpectedTokenError(this,t)}onOrder(t){throw new UnexpectedTokenError(this,t)}onRow(t){throw new UnexpectedTokenError(this,t)}onReturnStatus(t){throw new UnexpectedTokenError(this,t)}onReturnValue(t){throw new UnexpectedTokenError(this,t)}onDoneProc(t){throw new UnexpectedTokenError(this,t)}onDoneInProc(t){throw new UnexpectedTokenError(this,t)}onDone(t){throw new UnexpectedTokenError(this,t)}onDatabaseMirroringPartner(t){throw new UnexpectedTokenError(this,t)}}r.TokenHandler=TokenHandler;class InitialSqlTokenHandler extends TokenHandler{constructor(t){super();this.connection=void 0;this.connection=t}onInfoMessage(t){this.connection.emit("infoMessage",t)}onErrorMessage(t){this.connection.emit("errorMessage",t)}onDatabaseChange(t){this.connection.emit("databaseChange",t.newValue)}onLanguageChange(t){this.connection.emit("languageChange",t.newValue)}onCharsetChange(t){this.connection.emit("charsetChange",t.newValue)}onSqlCollationChange(t){this.connection.databaseCollation=t.newValue}onPacketSizeChange(t){this.connection.messageIo.packetSize(t.newValue)}onBeginTransaction(t){this.connection.transactionDescriptors.push(t.newValue);this.connection.inTransaction=true}onCommitTransaction(t){this.connection.transactionDescriptors.length=1;this.connection.inTransaction=false}onRollbackTransaction(t){this.connection.transactionDescriptors.length=1;this.connection.inTransaction=false;this.connection.emit("rollbackTransaction")}onColMetadata(t){this.connection.emit("error",new Error("Received 'columnMetadata' when no sqlRequest is in progress"));this.connection.close()}onOrder(t){this.connection.emit("error",new Error("Received 'order' when no sqlRequest is in progress"));this.connection.close()}onRow(t){this.connection.emit("error",new Error("Received 'row' when no sqlRequest is in progress"));this.connection.close()}onReturnStatus(t){}onReturnValue(t){}onDoneProc(t){}onDoneInProc(t){}onDone(t){}onResetConnection(t){this.connection.emit("resetConnection")}}r.InitialSqlTokenHandler=InitialSqlTokenHandler;class Login7TokenHandler extends TokenHandler{constructor(t){super();this.connection=void 0;this.fedAuthInfoToken=void 0;this.routingData=void 0;this.loginAckReceived=false;this.connection=t}onInfoMessage(t){this.connection.emit("infoMessage",t)}onErrorMessage(t){this.connection.emit("errorMessage",t);const r=new o.ConnectionError(t.message,"ELOGIN");const n=this.connection.transientErrorLookup.isTransientError(t.number);if(n&&this.connection.curTransientRetryCount!==this.connection.config.options.maxRetriesOnTransientErrors){r.isTransient=true}this.connection.loginError=r}onSSPI(t){if(t.ntlmpacket){this.connection.ntlmpacket=t.ntlmpacket;this.connection.ntlmpacketBuffer=t.ntlmpacketBuffer}}onDatabaseChange(t){this.connection.emit("databaseChange",t.newValue)}onLanguageChange(t){this.connection.emit("languageChange",t.newValue)}onCharsetChange(t){this.connection.emit("charsetChange",t.newValue)}onSqlCollationChange(t){this.connection.databaseCollation=t.newValue}onFedAuthInfo(t){this.fedAuthInfoToken=t}onFeatureExtAck(t){const{authentication:r}=this.connection.config;if(r.type==="azure-active-directory-password"||r.type==="azure-active-directory-access-token"||r.type==="azure-active-directory-msi-vm"||r.type==="azure-active-directory-msi-app-service"||r.type==="azure-active-directory-service-principal-secret"||r.type==="azure-active-directory-default"){if(t.fedAuth===undefined){this.connection.loginError=new o.ConnectionError("Did not receive Active Directory authentication acknowledgement")}else if(t.fedAuth.length!==0){this.connection.loginError=new o.ConnectionError(`Active Directory authentication acknowledgment for ${r.type} authentication method includes extra data`)}}else if(t.fedAuth===undefined&&t.utf8Support===undefined){this.connection.loginError=new o.ConnectionError("Received acknowledgement for unknown feature")}else if(t.fedAuth){this.connection.loginError=new o.ConnectionError("Did not request Active Directory authentication, but received the acknowledgment")}}onLoginAck(t){if(!t.tdsVersion){this.connection.loginError=new o.ConnectionError("Server responded with unknown TDS version.","ETDS");return}if(!t.interface){this.connection.loginError=new o.ConnectionError("Server responded with unsupported interface.","EINTERFACENOTSUPP");return}this.connection.config.options.tdsVersion=t.tdsVersion;this.loginAckReceived=true}onRoutingChange(t){const[r]=t.newValue.server.split("\\");this.routingData={server:r,port:t.newValue.port}}onDoneInProc(t){}onDone(t){}onPacketSizeChange(t){this.connection.messageIo.packetSize(t.newValue)}onDatabaseMirroringPartner(t){}}r.Login7TokenHandler=Login7TokenHandler;class RequestTokenHandler extends TokenHandler{constructor(t,r){super();this.connection=void 0;this.request=void 0;this.errors=void 0;this.connection=t;this.request=r;this.errors=[]}onInfoMessage(t){this.connection.emit("infoMessage",t)}onErrorMessage(t){this.connection.emit("errorMessage",t);if(!this.request.canceled){const r=new o.RequestError(t.message,"EREQUEST");r.number=t.number;r.state=t.state;r.class=t.class;r.serverName=t.serverName;r.procName=t.procName;r.lineNumber=t.lineNumber;this.errors.push(r);this.request.error=r;if(this.request instanceof i.default&&this.errors.length>1){this.request.error=new a.default(this.errors)}}}onDatabaseChange(t){this.connection.emit("databaseChange",t.newValue)}onLanguageChange(t){this.connection.emit("languageChange",t.newValue)}onCharsetChange(t){this.connection.emit("charsetChange",t.newValue)}onSqlCollationChange(t){this.connection.databaseCollation=t.newValue}onPacketSizeChange(t){this.connection.messageIo.packetSize(t.newValue)}onBeginTransaction(t){this.connection.transactionDescriptors.push(t.newValue);this.connection.inTransaction=true}onCommitTransaction(t){this.connection.transactionDescriptors.length=1;this.connection.inTransaction=false}onRollbackTransaction(t){this.connection.transactionDescriptors.length=1;this.connection.inTransaction=false;this.connection.emit("rollbackTransaction")}onColMetadata(t){if(!this.request.canceled){if(this.connection.config.options.useColumnNames){const r=Object.create(null);for(let n=0,i=t.columns.length;n<i;n++){const i=t.columns[n];if(r[i.colName]==null){r[i.colName]=i}}this.request.emit("columnMetadata",r)}else{this.request.emit("columnMetadata",t.columns)}}}onOrder(t){if(!this.request.canceled){this.request.emit("order",t.orderColumns)}}onRow(t){if(!this.request.canceled){if(this.connection.config.options.rowCollectionOnRequestCompletion){this.request.rows.push(t.columns)}if(this.connection.config.options.rowCollectionOnDone){this.request.rst.push(t.columns)}this.request.emit("row",t.columns)}}onReturnStatus(t){if(!this.request.canceled){this.connection.procReturnStatusValue=t.value}}onReturnValue(t){if(!this.request.canceled){this.request.emit("returnValue",t.paramName,t.value,t.metadata)}}onDoneProc(t){if(!this.request.canceled){if(t.sqlError&&!this.request.error){this.request.error=new o.RequestError("An unknown error has occurred.","UNKNOWN")}this.request.emit("doneProc",t.rowCount,t.more,this.connection.procReturnStatusValue,this.request.rst);this.connection.procReturnStatusValue=undefined;if(t.rowCount!==undefined){this.request.rowCount+=t.rowCount}if(this.connection.config.options.rowCollectionOnDone){this.request.rst=[]}}}onDoneInProc(t){if(!this.request.canceled){this.request.emit("doneInProc",t.rowCount,t.more,this.request.rst);if(t.rowCount!==undefined){this.request.rowCount+=t.rowCount}if(this.connection.config.options.rowCollectionOnDone){this.request.rst=[]}}}onDone(t){if(!this.request.canceled){if(t.sqlError&&!this.request.error){this.request.error=new o.RequestError("An unknown error has occurred.","UNKNOWN")}this.request.emit("done",t.rowCount,t.more,this.request.rst);if(t.rowCount!==undefined){this.request.rowCount+=t.rowCount}if(this.connection.config.options.rowCollectionOnDone){this.request.rst=[]}}}onResetConnection(t){this.connection.emit("resetConnection")}}r.RequestTokenHandler=RequestTokenHandler;class AttentionTokenHandler extends TokenHandler{constructor(t,r){super();this.connection=void 0;this.request=void 0;this.attentionReceived=void 0;this.connection=t;this.request=r;this.attentionReceived=false}onDone(t){if(t.attention){this.attentionReceived=true}}}r.AttentionTokenHandler=AttentionTokenHandler},98435:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.infoParser=infoParser;r.errorParser=errorParser;var i=n(51195);function parseToken(t,r,n){t.readUInt16LE((()=>{t.readUInt32LE((i=>{t.readUInt8((o=>{t.readUInt8((a=>{t.readUsVarChar((s=>{t.readBVarChar((c=>{t.readBVarChar((u=>{(r.tdsVersion<"7_2"?t.readUInt16LE:t.readUInt32LE).call(t,(t=>{n({number:i,state:o,class:a,message:s,serverName:c,procName:u,lineNumber:t})}))}))}))}))}))}))}))}))}function infoParser(t,r,n){parseToken(t,r,(t=>{n(new i.InfoMessageToken(t))}))}function errorParser(t,r,n){parseToken(t,r,(t=>{n(new i.ErrorMessageToken(t))}))}},9201:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);var o=n(80395);const a={0:"SQL_DFLT",1:"SQL_TSQL"};function loginAckParser(t,r,n){t.readUInt16LE((()=>{t.readUInt8((r=>{const s=a[r];t.readUInt32BE((r=>{const a=o.versionsByValue[r];t.readBVarChar((r=>{t.readUInt8((o=>{t.readUInt8((c=>{t.readUInt8((u=>{t.readUInt8((t=>{n(new i.LoginAckToken({interface:s,tdsVersion:a,progName:r,progVersion:{major:o,minor:c,buildNumHi:u,buildNumLow:t}}))}))}))}))}))}))}))}))}))}var s=loginAckParser;r["default"]=s;t.exports=loginAckParser},46969:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);var o=_interopRequireDefault(n(74568));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function nullHandler(t,r,n,i){i(null)}async function nbcRowParser(t){const r=t.colMetadata;const n=Math.ceil(r.length/8);const a=[];const s=[];while(t.buffer.length-t.position<n){await t.streamBuffer.waitForChunk()}const c=t.buffer.slice(t.position,t.position+n);t.position+=n;for(let t=0,r=c.length;t<r;t++){const r=c[t];s.push(r&1?true:false);s.push(r&2?true:false);s.push(r&4?true:false);s.push(r&8?true:false);s.push(r&16?true:false);s.push(r&32?true:false);s.push(r&64?true:false);s.push(r&128?true:false)}for(let n=0;n<r.length;n++){const i=r[n];let c;(s[n]?nullHandler:o.default)(t,i,t.options,(t=>{c=t}));while(t.suspended){await t.streamBuffer.waitForChunk();t.suspended=false;const r=t.next;r()}a.push({value:c,metadata:i})}if(t.options.useColumnNames){const t={};a.forEach((r=>{const n=r.metadata.colName;if(t[n]==null){t[n]=r}}));return new i.NBCRowToken(t)}else{return new i.NBCRowToken(a)}}var a=nbcRowParser;r["default"]=a;t.exports=nbcRowParser},33263:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);function orderParser(t,r,n){t.readUInt16LE((r=>{const o=r/2;const a=[];let s=0;function next(r){if(s===o){return r()}t.readUInt16LE((t=>{a.push(t);s++;next(r)}))}next((()=>{n(new i.OrderToken(a))}))}))}var o=orderParser;r["default"]=o;t.exports=orderParser},84206:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);function returnStatusParser(t,r,n){t.readInt32LE((t=>{n(new i.ReturnStatusToken(t))}))}var o=returnStatusParser;r["default"]=o;t.exports=returnStatusParser},77006:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);var o=_interopRequireDefault(n(59157));var a=_interopRequireDefault(n(74568));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function returnParser(t,r,n){t.readUInt16LE((s=>{t.readBVarChar((c=>{if(c.charAt(0)==="@"){c=c.slice(1)}t.readUInt8((()=>{(0,o.default)(t,r,(o=>{(0,a.default)(t,o,r,(t=>{n(new i.ReturnValueToken({paramOrdinal:s,paramName:c,metadata:o,value:t}))}))}))}))}))}))}var s=returnParser;r["default"]=s;t.exports=returnParser},34506:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);var o=_interopRequireDefault(n(74568));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}async function rowParser(t){const r=t.colMetadata;const n=r.length;const a=[];for(let i=0;i<n;i++){const n=r[i];let s;(0,o.default)(t,n,t.options,(t=>{s=t}));while(t.suspended){await t.streamBuffer.waitForChunk();t.suspended=false;const r=t.next;r()}a.push({value:s,metadata:n})}if(t.options.useColumnNames){const t=Object.create(null);a.forEach((r=>{const n=r.metadata.colName;if(t[n]==null){t[n]=r}}));return new i.RowToken(t)}else{return new i.RowToken(a)}}var a=rowParser;r["default"]=a;t.exports=rowParser},38696:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(51195);function parseChallenge(t){const r={};r.magic=t.slice(0,8).toString("utf8");r.type=t.readInt32LE(8);r.domainLen=t.readInt16LE(12);r.domainMax=t.readInt16LE(14);r.domainOffset=t.readInt32LE(16);r.flags=t.readInt32LE(20);r.nonce=t.slice(24,32);r.zeroes=t.slice(32,40);r.targetLen=t.readInt16LE(40);r.targetMax=t.readInt16LE(42);r.targetOffset=t.readInt32LE(44);r.oddData=t.slice(48,56);r.domain=t.slice(56,56+r.domainLen).toString("ucs2");r.target=t.slice(56+r.domainLen,56+r.domainLen+r.targetLen);return r}function sspiParser(t,r,n){t.readUsVarByte((t=>{n(new i.SSPIToken(parseChallenge(t),t))}))}var o=sspiParser;r["default"]=o;t.exports=sspiParser},14845:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(51778));var o=n(51195);var a=_interopRequireDefault(n(83146));var s=n(29069);var c=_interopRequireDefault(n(63828));var u=n(98435);var l=_interopRequireDefault(n(77535));var d=_interopRequireDefault(n(99059));var p=_interopRequireDefault(n(9201));var g=_interopRequireDefault(n(33263));var v=_interopRequireDefault(n(84206));var E=_interopRequireDefault(n(77006));var S=_interopRequireDefault(n(34506));var w=_interopRequireDefault(n(46969));var x=_interopRequireDefault(n(38696));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const N={[o.TYPE.DONE]:s.doneParser,[o.TYPE.DONEINPROC]:s.doneInProcParser,[o.TYPE.DONEPROC]:s.doneProcParser,[o.TYPE.ENVCHANGE]:c.default,[o.TYPE.ERROR]:u.errorParser,[o.TYPE.FEDAUTHINFO]:l.default,[o.TYPE.FEATUREEXTACK]:d.default,[o.TYPE.INFO]:u.infoParser,[o.TYPE.LOGINACK]:p.default,[o.TYPE.ORDER]:g.default,[o.TYPE.RETURNSTATUS]:v.default,[o.TYPE.RETURNVALUE]:E.default,[o.TYPE.SSPI]:x.default};class StreamBuffer{constructor(t){this.iterator=void 0;this.buffer=void 0;this.position=void 0;this.iterator=(t[Symbol.asyncIterator]||t[Symbol.iterator]).call(t);this.buffer=Buffer.alloc(0);this.position=0}async waitForChunk(){const t=await this.iterator.next();if(t.done){throw new Error("unexpected end of data")}if(this.position===this.buffer.length){this.buffer=t.value}else{this.buffer=Buffer.concat([this.buffer.slice(this.position),t.value])}this.position=0}}class Parser{static async*parseTokens(t,r,n,i=[]){let s;const onDoneParsing=t=>{s=t};const c=new StreamBuffer(t);const u=new Parser(c,r,n);u.colMetadata=i;while(true){try{await c.waitForChunk()}catch(t){if(c.position===c.buffer.length){return}throw t}if(u.suspended){u.suspended=false;const t=u.next;t();if(!u.suspended&&s){if(s instanceof o.ColMetadataToken){u.colMetadata=s.columns}yield s}}while(!u.suspended&&u.position+1<=u.buffer.length){const t=u.buffer.readUInt8(u.position);u.position+=1;if(t===o.TYPE.COLMETADATA){const t=await(0,a.default)(u);u.colMetadata=t.columns;yield t}else if(t===o.TYPE.ROW){yield(0,S.default)(u)}else if(t===o.TYPE.NBCROW){yield(0,w.default)(u)}else if(N[t]){N[t](u,u.options,onDoneParsing);if(!u.suspended&&s){if(s instanceof o.ColMetadataToken){u.colMetadata=s.columns}yield s}}else{throw new Error("Unknown type: "+t)}}}}constructor(t,r,n){this.debug=void 0;this.colMetadata=void 0;this.options=void 0;this.suspended=void 0;this.next=void 0;this.streamBuffer=void 0;this.debug=r;this.colMetadata=[];this.options=n;this.streamBuffer=t;this.suspended=false;this.next=undefined}get buffer(){return this.streamBuffer.buffer}get position(){return this.streamBuffer.position}set position(t){this.streamBuffer.position=t}suspend(t){this.suspended=true;this.next=t}awaitData(t,r){if(this.position+t<=this.buffer.length){r()}else{this.suspend((()=>{this.awaitData(t,r)}))}}readInt8(t){this.awaitData(1,(()=>{const r=this.buffer.readInt8(this.position);this.position+=1;t(r)}))}readUInt8(t){this.awaitData(1,(()=>{const r=this.buffer.readUInt8(this.position);this.position+=1;t(r)}))}readInt16LE(t){this.awaitData(2,(()=>{const r=this.buffer.readInt16LE(this.position);this.position+=2;t(r)}))}readInt16BE(t){this.awaitData(2,(()=>{const r=this.buffer.readInt16BE(this.position);this.position+=2;t(r)}))}readUInt16LE(t){this.awaitData(2,(()=>{const r=this.buffer.readUInt16LE(this.position);this.position+=2;t(r)}))}readUInt16BE(t){this.awaitData(2,(()=>{const r=this.buffer.readUInt16BE(this.position);this.position+=2;t(r)}))}readInt32LE(t){this.awaitData(4,(()=>{const r=this.buffer.readInt32LE(this.position);this.position+=4;t(r)}))}readInt32BE(t){this.awaitData(4,(()=>{const r=this.buffer.readInt32BE(this.position);this.position+=4;t(r)}))}readUInt32LE(t){this.awaitData(4,(()=>{const r=this.buffer.readUInt32LE(this.position);this.position+=4;t(r)}))}readUInt32BE(t){this.awaitData(4,(()=>{const r=this.buffer.readUInt32BE(this.position);this.position+=4;t(r)}))}readBigInt64LE(t){this.awaitData(8,(()=>{const r=i.default.add(i.default.leftShift(i.default.BigInt(this.buffer[this.position+4]+this.buffer[this.position+5]*2**8+this.buffer[this.position+6]*2**16+(this.buffer[this.position+7]<<24)),i.default.BigInt(32)),i.default.BigInt(this.buffer[this.position]+this.buffer[this.position+1]*2**8+this.buffer[this.position+2]*2**16+this.buffer[this.position+3]*2**24));this.position+=8;t(r)}))}readInt64LE(t){this.awaitData(8,(()=>{const r=Math.pow(2,32)*this.buffer.readInt32LE(this.position+4)+((this.buffer[this.position+4]&128)===128?1:-1)*this.buffer.readUInt32LE(this.position);this.position+=8;t(r)}))}readInt64BE(t){this.awaitData(8,(()=>{const r=Math.pow(2,32)*this.buffer.readInt32BE(this.position)+((this.buffer[this.position]&128)===128?1:-1)*this.buffer.readUInt32BE(this.position+4);this.position+=8;t(r)}))}readBigUInt64LE(t){this.awaitData(8,(()=>{const r=i.default.BigInt(this.buffer.readUInt32LE(this.position));const n=i.default.BigInt(this.buffer.readUInt32LE(this.position+4));this.position+=8;t(i.default.add(r,i.default.leftShift(n,i.default.BigInt(32))))}))}readUInt64LE(t){this.awaitData(8,(()=>{const r=Math.pow(2,32)*this.buffer.readUInt32LE(this.position+4)+this.buffer.readUInt32LE(this.position);this.position+=8;t(r)}))}readUInt64BE(t){this.awaitData(8,(()=>{const r=Math.pow(2,32)*this.buffer.readUInt32BE(this.position)+this.buffer.readUInt32BE(this.position+4);this.position+=8;t(r)}))}readFloatLE(t){this.awaitData(4,(()=>{const r=this.buffer.readFloatLE(this.position);this.position+=4;t(r)}))}readFloatBE(t){this.awaitData(4,(()=>{const r=this.buffer.readFloatBE(this.position);this.position+=4;t(r)}))}readDoubleLE(t){this.awaitData(8,(()=>{const r=this.buffer.readDoubleLE(this.position);this.position+=8;t(r)}))}readDoubleBE(t){this.awaitData(8,(()=>{const r=this.buffer.readDoubleBE(this.position);this.position+=8;t(r)}))}readUInt24LE(t){this.awaitData(3,(()=>{const r=this.buffer.readUInt16LE(this.position);const n=this.buffer.readUInt8(this.position+2);this.position+=3;t(r|n<<16)}))}readUInt40LE(t){this.awaitData(5,(()=>{const r=this.buffer.readUInt32LE(this.position);const n=this.buffer.readUInt8(this.position+4);this.position+=5;t(4294967296*n+r)}))}readUNumeric64LE(t){this.awaitData(8,(()=>{const r=this.buffer.readUInt32LE(this.position);const n=this.buffer.readUInt32LE(this.position+4);this.position+=8;t(4294967296*n+r)}))}readUNumeric96LE(t){this.awaitData(12,(()=>{const r=this.buffer.readUInt32LE(this.position);const n=this.buffer.readUInt32LE(this.position+4);const i=this.buffer.readUInt32LE(this.position+8);this.position+=12;t(r+4294967296*n+4294967296*4294967296*i)}))}readUNumeric128LE(t){this.awaitData(16,(()=>{const r=this.buffer.readUInt32LE(this.position);const n=this.buffer.readUInt32LE(this.position+4);const i=this.buffer.readUInt32LE(this.position+8);const o=this.buffer.readUInt32LE(this.position+12);this.position+=16;t(r+4294967296*n+4294967296*4294967296*i+4294967296*4294967296*4294967296*o)}))}readBuffer(t,r){this.awaitData(t,(()=>{const n=this.buffer.slice(this.position,this.position+t);this.position+=t;r(n)}))}readBVarChar(t){this.readUInt8((r=>{this.readBuffer(r*2,(r=>{t(r.toString("ucs2"))}))}))}readUsVarChar(t){this.readUInt16LE((r=>{this.readBuffer(r*2,(r=>{t(r.toString("ucs2"))}))}))}readBVarByte(t){this.readUInt8((r=>{this.readBuffer(r,t)}))}readUsVarByte(t){this.readUInt16LE((r=>{this.readBuffer(r,t)}))}}var P=Parser;r["default"]=P;t.exports=Parser},56729:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Parser=void 0;var i=n(82361);var o=_interopRequireDefault(n(14845));var a=n(12781);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class Parser extends i.EventEmitter{constructor(t,r,n,i){super();this.debug=void 0;this.options=void 0;this.parser=void 0;this.debug=r;this.options=i;this.parser=a.Readable.from(o.default.parseTokens(t,this.debug,this.options));this.parser.on("data",(t=>{n[t.handlerName](t)}));this.parser.on("drain",(()=>{this.emit("drain")}));this.parser.on("end",(()=>{this.emit("end")}))}pause(){return this.parser.pause()}resume(){return this.parser.resume()}}r.Parser=Parser},51195:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SSPIToken=r.RowToken=r.ReturnValueToken=r.ReturnStatusToken=r.OrderToken=r.NBCRowToken=r.LoginAckToken=r.ErrorMessageToken=r.InfoMessageToken=r.FedAuthInfoToken=r.FeatureExtAckToken=r.RoutingEnvChangeToken=r.CollationChangeToken=r.ResetConnectionEnvChangeToken=r.DatabaseMirroringPartnerEnvChangeToken=r.RollbackTransactionEnvChangeToken=r.CommitTransactionEnvChangeToken=r.BeginTransactionEnvChangeToken=r.PacketSizeEnvChangeToken=r.CharsetEnvChangeToken=r.LanguageEnvChangeToken=r.DatabaseEnvChangeToken=r.DoneProcToken=r.DoneInProcToken=r.DoneToken=r.ColMetadataToken=r.Token=r.TYPE=void 0;const n={ALTMETADATA:136,ALTROW:211,COLMETADATA:129,COLINFO:165,DONE:253,DONEPROC:254,DONEINPROC:255,ENVCHANGE:227,ERROR:170,FEATUREEXTACK:174,FEDAUTHINFO:238,INFO:171,LOGINACK:173,NBCROW:210,OFFSET:120,ORDER:169,RETURNSTATUS:121,RETURNVALUE:172,ROW:209,SSPI:237,TABNAME:164};r.TYPE=n;class Token{constructor(t,r){this.name=void 0;this.handlerName=void 0;this.name=t;this.handlerName=r}}r.Token=Token;class ColMetadataToken extends Token{constructor(t){super("COLMETADATA","onColMetadata");this.columns=void 0;this.columns=t}}r.ColMetadataToken=ColMetadataToken;class DoneToken extends Token{constructor({more:t,sqlError:r,attention:n,serverError:i,rowCount:o,curCmd:a}){super("DONE","onDone");this.more=void 0;this.sqlError=void 0;this.attention=void 0;this.serverError=void 0;this.rowCount=void 0;this.curCmd=void 0;this.more=t;this.sqlError=r;this.attention=n;this.serverError=i;this.rowCount=o;this.curCmd=a}}r.DoneToken=DoneToken;class DoneInProcToken extends Token{constructor({more:t,sqlError:r,attention:n,serverError:i,rowCount:o,curCmd:a}){super("DONEINPROC","onDoneInProc");this.more=void 0;this.sqlError=void 0;this.attention=void 0;this.serverError=void 0;this.rowCount=void 0;this.curCmd=void 0;this.more=t;this.sqlError=r;this.attention=n;this.serverError=i;this.rowCount=o;this.curCmd=a}}r.DoneInProcToken=DoneInProcToken;class DoneProcToken extends Token{constructor({more:t,sqlError:r,attention:n,serverError:i,rowCount:o,curCmd:a}){super("DONEPROC","onDoneProc");this.more=void 0;this.sqlError=void 0;this.attention=void 0;this.serverError=void 0;this.rowCount=void 0;this.curCmd=void 0;this.more=t;this.sqlError=r;this.attention=n;this.serverError=i;this.rowCount=o;this.curCmd=a}}r.DoneProcToken=DoneProcToken;class DatabaseEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onDatabaseChange");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="DATABASE";this.newValue=t;this.oldValue=r}}r.DatabaseEnvChangeToken=DatabaseEnvChangeToken;class LanguageEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onLanguageChange");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="LANGUAGE";this.newValue=t;this.oldValue=r}}r.LanguageEnvChangeToken=LanguageEnvChangeToken;class CharsetEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onCharsetChange");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="CHARSET";this.newValue=t;this.oldValue=r}}r.CharsetEnvChangeToken=CharsetEnvChangeToken;class PacketSizeEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onPacketSizeChange");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="PACKET_SIZE";this.newValue=t;this.oldValue=r}}r.PacketSizeEnvChangeToken=PacketSizeEnvChangeToken;class BeginTransactionEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onBeginTransaction");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="BEGIN_TXN";this.newValue=t;this.oldValue=r}}r.BeginTransactionEnvChangeToken=BeginTransactionEnvChangeToken;class CommitTransactionEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onCommitTransaction");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="COMMIT_TXN";this.newValue=t;this.oldValue=r}}r.CommitTransactionEnvChangeToken=CommitTransactionEnvChangeToken;class RollbackTransactionEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onRollbackTransaction");this.type=void 0;this.oldValue=void 0;this.newValue=void 0;this.type="ROLLBACK_TXN";this.newValue=t;this.oldValue=r}}r.RollbackTransactionEnvChangeToken=RollbackTransactionEnvChangeToken;class DatabaseMirroringPartnerEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onDatabaseMirroringPartner");this.type=void 0;this.oldValue=void 0;this.newValue=void 0;this.type="DATABASE_MIRRORING_PARTNER";this.newValue=t;this.oldValue=r}}r.DatabaseMirroringPartnerEnvChangeToken=DatabaseMirroringPartnerEnvChangeToken;class ResetConnectionEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onResetConnection");this.type=void 0;this.oldValue=void 0;this.newValue=void 0;this.type="RESET_CONNECTION";this.newValue=t;this.oldValue=r}}r.ResetConnectionEnvChangeToken=ResetConnectionEnvChangeToken;class CollationChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onSqlCollationChange");this.type=void 0;this.oldValue=void 0;this.newValue=void 0;this.type="SQL_COLLATION";this.newValue=t;this.oldValue=r}}r.CollationChangeToken=CollationChangeToken;class RoutingEnvChangeToken extends Token{constructor(t,r){super("ENVCHANGE","onRoutingChange");this.type=void 0;this.newValue=void 0;this.oldValue=void 0;this.type="ROUTING_CHANGE";this.newValue=t;this.oldValue=r}}r.RoutingEnvChangeToken=RoutingEnvChangeToken;class FeatureExtAckToken extends Token{constructor(t,r){super("FEATUREEXTACK","onFeatureExtAck");this.fedAuth=void 0;this.utf8Support=void 0;this.fedAuth=t;this.utf8Support=r}}r.FeatureExtAckToken=FeatureExtAckToken;class FedAuthInfoToken extends Token{constructor(t,r){super("FEDAUTHINFO","onFedAuthInfo");this.spn=void 0;this.stsurl=void 0;this.spn=t;this.stsurl=r}}r.FedAuthInfoToken=FedAuthInfoToken;class InfoMessageToken extends Token{constructor({number:t,state:r,class:n,message:i,serverName:o,procName:a,lineNumber:s}){super("INFO","onInfoMessage");this.number=void 0;this.state=void 0;this.class=void 0;this.message=void 0;this.serverName=void 0;this.procName=void 0;this.lineNumber=void 0;this.number=t;this.state=r;this.class=n;this.message=i;this.serverName=o;this.procName=a;this.lineNumber=s}}r.InfoMessageToken=InfoMessageToken;class ErrorMessageToken extends Token{constructor({number:t,state:r,class:n,message:i,serverName:o,procName:a,lineNumber:s}){super("ERROR","onErrorMessage");this.number=void 0;this.state=void 0;this.class=void 0;this.message=void 0;this.serverName=void 0;this.procName=void 0;this.lineNumber=void 0;this.number=t;this.state=r;this.class=n;this.message=i;this.serverName=o;this.procName=a;this.lineNumber=s}}r.ErrorMessageToken=ErrorMessageToken;class LoginAckToken extends Token{constructor({interface:t,tdsVersion:r,progName:n,progVersion:i}){super("LOGINACK","onLoginAck");this.interface=void 0;this.tdsVersion=void 0;this.progName=void 0;this.progVersion=void 0;this.interface=t;this.tdsVersion=r;this.progName=n;this.progVersion=i}}r.LoginAckToken=LoginAckToken;class NBCRowToken extends Token{constructor(t){super("NBCROW","onRow");this.columns=void 0;this.columns=t}}r.NBCRowToken=NBCRowToken;class OrderToken extends Token{constructor(t){super("ORDER","onOrder");this.orderColumns=void 0;this.orderColumns=t}}r.OrderToken=OrderToken;class ReturnStatusToken extends Token{constructor(t){super("RETURNSTATUS","onReturnStatus");this.value=void 0;this.value=t}}r.ReturnStatusToken=ReturnStatusToken;class ReturnValueToken extends Token{constructor({paramOrdinal:t,paramName:r,metadata:n,value:i}){super("RETURNVALUE","onReturnValue");this.paramOrdinal=void 0;this.paramName=void 0;this.metadata=void 0;this.value=void 0;this.paramOrdinal=t;this.paramName=r;this.metadata=n;this.value=i}}r.ReturnValueToken=ReturnValueToken;class RowToken extends Token{constructor(t){super("ROW","onRow");this.columns=void 0;this.columns=t}}r.RowToken=RowToken;class SSPIToken extends Token{constructor(t,r){super("SSPICHALLENGE","onSSPI");this.ntlmpacket=void 0;this.ntlmpacketBuffer=void 0;this.ntlmpacket=t;this.ntlmpacketBuffer=r}}r.SSPIToken=SSPIToken},16020:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=_interopRequireDefault(n(51778));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=(1<<16)*(1<<16);const a=1/o;const s=Buffer.from([254,255,255,255,255,255,255,255]);const c=Buffer.alloc(0);class WritableTrackingBuffer{constructor(t,r,n){this.initialSize=void 0;this.encoding=void 0;this.doubleSizeGrowth=void 0;this.buffer=void 0;this.compositeBuffer=void 0;this.position=void 0;this.initialSize=t;this.encoding=r||"ucs2";this.doubleSizeGrowth=n||false;this.buffer=Buffer.alloc(this.initialSize,0);this.compositeBuffer=c;this.position=0}get data(){this.newBuffer(0);return this.compositeBuffer}copyFrom(t){const r=t.length;this.makeRoomFor(r);t.copy(this.buffer,this.position);this.position+=r}makeRoomFor(t){if(this.buffer.length-this.position<t){if(this.doubleSizeGrowth){let r=Math.max(128,this.buffer.length*2);while(r<t){r*=2}this.newBuffer(r)}else{this.newBuffer(t)}}}newBuffer(t){const r=this.buffer.slice(0,this.position);this.compositeBuffer=Buffer.concat([this.compositeBuffer,r]);this.buffer=t===0?c:Buffer.alloc(t,0);this.position=0}writeUInt8(t){const r=1;this.makeRoomFor(r);this.buffer.writeUInt8(t,this.position);this.position+=r}writeUInt16LE(t){const r=2;this.makeRoomFor(r);this.buffer.writeUInt16LE(t,this.position);this.position+=r}writeUShort(t){this.writeUInt16LE(t)}writeUInt16BE(t){const r=2;this.makeRoomFor(r);this.buffer.writeUInt16BE(t,this.position);this.position+=r}writeUInt24LE(t){const r=3;this.makeRoomFor(r);this.buffer[this.position+2]=t>>>16&255;this.buffer[this.position+1]=t>>>8&255;this.buffer[this.position]=t&255;this.position+=r}writeUInt32LE(t){const r=4;this.makeRoomFor(r);this.buffer.writeUInt32LE(t,this.position);this.position+=r}writeBigInt64LE(t){this.writeBigU_Int64LE(t)}writeBigU_Int64LE(t){this.makeRoomFor(8);let r=i.default.toNumber(i.default.bitwiseAnd(t,i.default.BigInt(4294967295)));this.buffer[this.position++]=r;r=r>>8;this.buffer[this.position++]=r;r=r>>8;this.buffer[this.position++]=r;r=r>>8;this.buffer[this.position++]=r;let n=i.default.toNumber(i.default.bitwiseAnd(i.default.signedRightShift(t,i.default.BigInt(32)),i.default.BigInt(4294967295)));this.buffer[this.position++]=n;n=n>>8;this.buffer[this.position++]=n;n=n>>8;this.buffer[this.position++]=n;n=n>>8;this.buffer[this.position++]=n}writeInt64LE(t){this.writeBigInt64LE(i.default.BigInt(t))}writeUInt32BE(t){const r=4;this.makeRoomFor(r);this.buffer.writeUInt32BE(t,this.position);this.position+=r}writeUInt40LE(t){this.writeInt32LE(t&-1);this.writeUInt8(Math.floor(t*a))}writeUInt64LE(t){this.writeBigUInt64LE(i.default.BigInt(t))}writeBigUInt64LE(t){this.writeBigU_Int64LE(t)}writeInt8(t){const r=1;this.makeRoomFor(r);this.buffer.writeInt8(t,this.position);this.position+=r}writeInt16LE(t){const r=2;this.makeRoomFor(r);this.buffer.writeInt16LE(t,this.position);this.position+=r}writeInt16BE(t){const r=2;this.makeRoomFor(r);this.buffer.writeInt16BE(t,this.position);this.position+=r}writeInt32LE(t){const r=4;this.makeRoomFor(r);this.buffer.writeInt32LE(t,this.position);this.position+=r}writeInt32BE(t){const r=4;this.makeRoomFor(r);this.buffer.writeInt32BE(t,this.position);this.position+=r}writeFloatLE(t){const r=4;this.makeRoomFor(r);this.buffer.writeFloatLE(t,this.position);this.position+=r}writeDoubleLE(t){const r=8;this.makeRoomFor(r);this.buffer.writeDoubleLE(t,this.position);this.position+=r}writeString(t,r){if(r==null){r=this.encoding}const n=Buffer.byteLength(t,r);this.makeRoomFor(n);this.buffer.write(t,this.position,r);this.position+=n}writeBVarchar(t,r){this.writeUInt8(t.length);this.writeString(t,r)}writeUsVarchar(t,r){this.writeUInt16LE(t.length);this.writeString(t,r)}writeUsVarbyte(t,r){if(r==null){r=this.encoding}let n;if(t instanceof Buffer){n=t.length}else{t=t.toString();n=Buffer.byteLength(t,r)}this.writeUInt16LE(n);if(t instanceof Buffer){this.writeBuffer(t)}else{this.makeRoomFor(n);this.buffer.write(t,this.position,r);this.position+=n}}writePLPBody(t,r){if(r==null){r=this.encoding}let n;if(t instanceof Buffer){n=t.length}else{t=t.toString();n=Buffer.byteLength(t,r)}this.writeBuffer(s);if(n>0){this.writeUInt32LE(n);if(t instanceof Buffer){this.writeBuffer(t)}else{this.makeRoomFor(n);this.buffer.write(t,this.position,r);this.position+=n}}this.writeUInt32LE(0)}writeBuffer(t){const r=t.length;this.makeRoomFor(r);t.copy(this.buffer,this.position);this.position+=r}writeMoney(t){this.writeInt32LE(Math.floor(t*a));this.writeInt32LE(t&-1)}}var u=WritableTrackingBuffer;r["default"]=u;t.exports=WritableTrackingBuffer},3034:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.assertValidIsolationLevel=assertValidIsolationLevel;r.Transaction=r.isolationLevelByValue=r.ISOLATION_LEVEL=r.OPERATION_TYPE=void 0;var i=_interopRequireDefault(n(16020));var o=n(6053);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const a={TM_GET_DTC_ADDRESS:0,TM_PROPAGATE_XACT:1,TM_BEGIN_XACT:5,TM_PROMOTE_XACT:6,TM_COMMIT_XACT:7,TM_ROLLBACK_XACT:8,TM_SAVE_XACT:9};r.OPERATION_TYPE=a;const s={NO_CHANGE:0,READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5};r.ISOLATION_LEVEL=s;const c={};r.isolationLevelByValue=c;for(const t in s){const r=s[t];c[r]=t}function assertValidIsolationLevel(t,r){if(typeof t!=="number"){throw new TypeError(`The "${r}" ${r.includes(".")?"property":"argument"} must be of type number. Received type ${typeof t} (${t})`)}if(!Number.isInteger(t)){throw new RangeError(`The value of "${r}" is out of range. It must be an integer. Received: ${t}`)}if(!(t>=0&&t<=5)){throw new RangeError(`The value of "${r}" is out of range. It must be >= 0 && <= 5. Received: ${t}`)}}class Transaction{constructor(t,r=s.NO_CHANGE){this.name=void 0;this.isolationLevel=void 0;this.outstandingRequestCount=void 0;this.name=t;this.isolationLevel=r;this.outstandingRequestCount=1}beginPayload(t){const r=new i.default(100,"ucs2");(0,o.writeToTrackingBuffer)(r,t,this.outstandingRequestCount);r.writeUShort(a.TM_BEGIN_XACT);r.writeUInt8(this.isolationLevel);r.writeUInt8(this.name.length*2);r.writeString(this.name,"ucs2");return{*[Symbol.iterator](){yield r.data},toString:()=>"Begin Transaction: name="+this.name+", isolationLevel="+c[this.isolationLevel]}}commitPayload(t){const r=new i.default(100,"ascii");(0,o.writeToTrackingBuffer)(r,t,this.outstandingRequestCount);r.writeUShort(a.TM_COMMIT_XACT);r.writeUInt8(this.name.length*2);r.writeString(this.name,"ucs2");r.writeUInt8(0);return{*[Symbol.iterator](){yield r.data},toString:()=>"Commit Transaction: name="+this.name}}rollbackPayload(t){const r=new i.default(100,"ascii");(0,o.writeToTrackingBuffer)(r,t,this.outstandingRequestCount);r.writeUShort(a.TM_ROLLBACK_XACT);r.writeUInt8(this.name.length*2);r.writeString(this.name,"ucs2");r.writeUInt8(0);return{*[Symbol.iterator](){yield r.data},toString:()=>"Rollback Transaction: name="+this.name}}savePayload(t){const r=new i.default(100,"ascii");(0,o.writeToTrackingBuffer)(r,t,this.outstandingRequestCount);r.writeUShort(a.TM_SAVE_XACT);r.writeUInt8(this.name.length*2);r.writeString(this.name,"ucs2");return{*[Symbol.iterator](){yield r.data},toString:()=>"Save Transaction: name="+this.name}}isolationLevelToTSQL(){switch(this.isolationLevel){case s.READ_UNCOMMITTED:return"READ UNCOMMITTED";case s.READ_COMMITTED:return"READ COMMITTED";case s.REPEATABLE_READ:return"REPEATABLE READ";case s.SERIALIZABLE:return"SERIALIZABLE";case s.SNAPSHOT:return"SNAPSHOT"}return""}}r.Transaction=Transaction},8848:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TransientErrorLookup=void 0;class TransientErrorLookup{isTransientError(t){const r=[4060,10928,10929,40197,40501,40613];return r.indexOf(t)!==-1}}r.TransientErrorLookup=TransientErrorLookup},74568:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]=void 0;var i=n(59157);var o=n(88156);var a=_interopRequireDefault(n(93102));var s=n(33988);var c=n(1997);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const u=(1<<16)-1;const l=(1<<16)-1;const d=3+1/3;const p=1e4;const g=Buffer.from([255,255,255,255,255,255,255,255]);const v=Buffer.from([254,255,255,255,255,255,255,255]);const E="utf8";function readTinyInt(t,r){t.readUInt8(r)}function readSmallInt(t,r){t.readInt16LE(r)}function readInt(t,r){t.readInt32LE(r)}function readBigInt(t,r){t.readBigInt64LE((t=>{r(t.toString())}))}function readReal(t,r){t.readFloatLE(r)}function readFloat(t,r){t.readDoubleLE(r)}function readSmallMoney(t,r){t.readInt32LE((t=>{r(t/p)}))}function readMoney(t,r){t.readInt32LE((n=>{t.readUInt32LE((t=>{r((t+4294967296*n)/p)}))}))}function readBit(t,r){t.readUInt8((t=>{r(!!t)}))}function valueParse(t,r,n,i){const o=r.type;switch(o.name){case"Null":return i(null);case"TinyInt":return readTinyInt(t,i);case"SmallInt":return readSmallInt(t,i);case"Int":return readInt(t,i);case"BigInt":return readBigInt(t,i);case"IntN":return t.readUInt8((r=>{switch(r){case 0:return i(null);case 1:return readTinyInt(t,i);case 2:return readSmallInt(t,i);case 4:return readInt(t,i);case 8:return readBigInt(t,i);default:throw new Error("Unsupported dataLength "+r+" for IntN")}}));case"Real":return readReal(t,i);case"Float":return readFloat(t,i);case"FloatN":return t.readUInt8((r=>{switch(r){case 0:return i(null);case 4:return readReal(t,i);case 8:return readFloat(t,i);default:throw new Error("Unsupported dataLength "+r+" for FloatN")}}));case"SmallMoney":return readSmallMoney(t,i);case"Money":return readMoney(t,i);case"MoneyN":return t.readUInt8((r=>{switch(r){case 0:return i(null);case 4:return readSmallMoney(t,i);case 8:return readMoney(t,i);default:throw new Error("Unsupported dataLength "+r+" for MoneyN")}}));case"Bit":return readBit(t,i);case"BitN":return t.readUInt8((r=>{switch(r){case 0:return i(null);case 1:return readBit(t,i);default:throw new Error("Unsupported dataLength "+r+" for BitN")}}));case"VarChar":case"Char":const a=r.collation.codepage;if(r.dataLength===l){return readMaxChars(t,a,i)}else{return t.readUInt16LE((r=>{if(r===u){return i(null)}readChars(t,r,a,i)}))}case"NVarChar":case"NChar":if(r.dataLength===l){return readMaxNChars(t,i)}else{return t.readUInt16LE((r=>{if(r===u){return i(null)}readNChars(t,r,i)}))}case"VarBinary":case"Binary":if(r.dataLength===l){return readMaxBinary(t,i)}else{return t.readUInt16LE((r=>{if(r===u){return i(null)}readBinary(t,r,i)}))}case"Text":return t.readUInt8((n=>{if(n===0){return i(null)}t.readBuffer(n,(n=>{t.readBuffer(8,(n=>{t.readUInt32LE((n=>{readChars(t,n,r.collation.codepage,i)}))}))}))}));case"NText":return t.readUInt8((r=>{if(r===0){return i(null)}t.readBuffer(r,(r=>{t.readBuffer(8,(r=>{t.readUInt32LE((r=>{readNChars(t,r,i)}))}))}))}));case"Image":return t.readUInt8((r=>{if(r===0){return i(null)}t.readBuffer(r,(r=>{t.readBuffer(8,(r=>{t.readUInt32LE((r=>{readBinary(t,r,i)}))}))}))}));case"Xml":return readMaxNChars(t,i);case"SmallDateTime":return readSmallDateTime(t,n.useUTC,i);case"DateTime":return readDateTime(t,n.useUTC,i);case"DateTimeN":return t.readUInt8((r=>{switch(r){case 0:return i(null);case 4:return readSmallDateTime(t,n.useUTC,i);case 8:return readDateTime(t,n.useUTC,i);default:throw new Error("Unsupported dataLength "+r+" for DateTimeN")}}));case"Time":return t.readUInt8((o=>{if(o===0){return i(null)}else{return readTime(t,o,r.scale,n.useUTC,i)}}));case"Date":return t.readUInt8((r=>{if(r===0){return i(null)}else{return readDate(t,n.useUTC,i)}}));case"DateTime2":return t.readUInt8((o=>{if(o===0){return i(null)}else{return readDateTime2(t,o,r.scale,n.useUTC,i)}}));case"DateTimeOffset":return t.readUInt8((n=>{if(n===0){return i(null)}else{return readDateTimeOffset(t,n,r.scale,i)}}));case"NumericN":case"DecimalN":return t.readUInt8((n=>{if(n===0){return i(null)}else{return readNumeric(t,n,r.precision,r.scale,i)}}));case"UniqueIdentifier":return t.readUInt8((r=>{switch(r){case 0:return i(null);case 16:return readUniqueIdentifier(t,n,i);default:throw new Error((0,s.sprintf)("Unsupported guid size %d",r-1))}}));case"UDT":return readMaxBinary(t,i);case"Variant":return t.readUInt32LE((r=>{if(r===0){return i(null)}readVariant(t,n,r,i)}));default:throw new Error((0,s.sprintf)("Unrecognised type %s",o.name))}}function readUniqueIdentifier(t,r,n){t.readBuffer(16,(t=>{n(r.lowerCaseGuids?(0,c.bufferToLowerCaseGuid)(t):(0,c.bufferToUpperCaseGuid)(t))}))}function readNumeric(t,r,n,i,o){t.readUInt8((n=>{n=n===1?1:-1;let a;if(r===5){a=t.readUInt32LE}else if(r===9){a=t.readUNumeric64LE}else if(r===13){a=t.readUNumeric96LE}else if(r===17){a=t.readUNumeric128LE}else{throw new Error((0,s.sprintf)("Unsupported numeric dataLength %d",r))}a.call(t,(t=>{o(t*n/Math.pow(10,i))}))}))}function readVariant(t,r,n,a){return t.readUInt8((s=>{const c=o.TYPE[s];return t.readUInt8((o=>{n=n-o-2;switch(c.name){case"UniqueIdentifier":return readUniqueIdentifier(t,r,a);case"Bit":return readBit(t,a);case"TinyInt":return readTinyInt(t,a);case"SmallInt":return readSmallInt(t,a);case"Int":return readInt(t,a);case"BigInt":return readBigInt(t,a);case"SmallDateTime":return readSmallDateTime(t,r.useUTC,a);case"DateTime":return readDateTime(t,r.useUTC,a);case"Real":return readReal(t,a);case"Float":return readFloat(t,a);case"SmallMoney":return readSmallMoney(t,a);case"Money":return readMoney(t,a);case"Date":return readDate(t,r.useUTC,a);case"Time":return t.readUInt8((i=>readTime(t,n,i,r.useUTC,a)));case"DateTime2":return t.readUInt8((i=>readDateTime2(t,n,i,r.useUTC,a)));case"DateTimeOffset":return t.readUInt8((r=>readDateTimeOffset(t,n,r,a)));case"VarBinary":case"Binary":return t.readUInt16LE((r=>{readBinary(t,n,a)}));case"NumericN":case"DecimalN":return t.readUInt8((r=>{t.readUInt8((i=>{readNumeric(t,n,r,i,a)}))}));case"VarChar":case"Char":return t.readUInt16LE((r=>{(0,i.readCollation)(t,(r=>{readChars(t,n,r.codepage,a)}))}));case"NVarChar":case"NChar":return t.readUInt16LE((r=>{(0,i.readCollation)(t,(r=>{readNChars(t,n,a)}))}));default:throw new Error("Invalid type!")}}))}))}function readBinary(t,r,n){return t.readBuffer(r,n)}function readChars(t,r,n,i){if(n==null){n=E}return t.readBuffer(r,(t=>{i(a.default.decode(t,n))}))}function readNChars(t,r,n){t.readBuffer(r,(t=>{n(t.toString("ucs2"))}))}function readMaxBinary(t,r){return readMax(t,r)}function readMaxChars(t,r,n){if(r==null){r=E}readMax(t,(t=>{if(t){n(a.default.decode(t,r))}else{n(null)}}))}function readMaxNChars(t,r){readMax(t,(t=>{if(t){r(t.toString("ucs2"))}else{r(null)}}))}function readMax(t,r){t.readBuffer(8,(n=>{if(n.equals(g)){return r(null)}else if(n.equals(v)){return readMaxUnknownLength(t,r)}else{const i=n.readUInt32LE(0);const o=n.readUInt32LE(4);if(o>=2<<53-32){console.warn("Read UInt64LE > 53 bits : high="+o+", low="+i)}const a=i+4294967296*o;return readMaxKnownLength(t,a,r)}}))}function readMaxKnownLength(t,r,n){const i=Buffer.alloc(r,0);let o=0;function next(r){t.readUInt32LE((n=>{if(!n){return r()}t.readBuffer(n,(t=>{t.copy(i,o);o+=n;next(r)}))}))}next((()=>{if(o!==r){throw new Error("Partially Length-prefixed Bytes unmatched lengths : expected "+r+", but got "+o+" bytes")}n(i)}))}function readMaxUnknownLength(t,r){const n=[];let i=0;function next(r){t.readUInt32LE((o=>{if(!o){return r()}t.readBuffer(o,(t=>{n.push(t);i+=o;next(r)}))}))}next((()=>{r(Buffer.concat(n,i))}))}function readSmallDateTime(t,r,n){t.readUInt16LE((i=>{t.readUInt16LE((t=>{let o;if(r){o=new Date(Date.UTC(1900,0,1+i,0,t))}else{o=new Date(1900,0,1+i,0,t)}n(o)}))}))}function readDateTime(t,r,n){t.readInt32LE((i=>{t.readUInt32LE((t=>{const o=Math.round(t*d);let a;if(r){a=new Date(Date.UTC(1900,0,1+i,0,0,0,o))}else{a=new Date(1900,0,1+i,0,0,0,o)}n(a)}))}))}function readTime(t,r,n,i,o){let a;switch(r){case 3:a=t.readUInt24LE;break;case 4:a=t.readUInt32LE;break;case 5:a=t.readUInt40LE}a.call(t,(t=>{if(n<7){for(let r=n;r<7;r++){t*=10}}let r;if(i){r=new Date(Date.UTC(1970,0,1,0,0,0,t/1e4))}else{r=new Date(1970,0,1,0,0,0,t/1e4)}Object.defineProperty(r,"nanosecondsDelta",{enumerable:false,value:t%1e4/Math.pow(10,7)});o(r)}))}function readDate(t,r,n){t.readUInt24LE((t=>{if(r){n(new Date(Date.UTC(2e3,0,t-730118)))}else{n(new Date(2e3,0,t-730118))}}))}function readDateTime2(t,r,n,i,o){readTime(t,r-3,n,i,(r=>{t.readUInt24LE((t=>{let n;if(i){n=new Date(Date.UTC(2e3,0,t-730118,0,0,0,+r))}else{n=new Date(2e3,0,t-730118,r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())}Object.defineProperty(n,"nanosecondsDelta",{enumerable:false,value:r.nanosecondsDelta});o(n)}))}))}function readDateTimeOffset(t,r,n,i){readTime(t,r-5,n,true,(r=>{t.readUInt24LE((n=>{t.readInt16LE((()=>{const t=new Date(Date.UTC(2e3,0,n-730118,0,0,0,+r));Object.defineProperty(t,"nanosecondsDelta",{enumerable:false,value:r.nanosecondsDelta});i(t)}))}))}))}var S=valueParse;r["default"]=S;t.exports=valueParse},39698:(t,r,n)=>{"use strict";var i=n(15118).Buffer;r._dbcs=DBCSCodec;var o=-1,a=-2,s=-10,c=-1e3,u=new Array(256),l=-1;for(var d=0;d<256;d++)u[d]=o;function DBCSCodec(t,r){this.encodingName=t.encodingName;if(!t)throw new Error("DBCS codec is called without the data.");if(!t.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=t.table();this.decodeTables=[];this.decodeTables[0]=u.slice(0);this.decodeTableSeq=[];for(var i=0;i<n.length;i++)this._addDecodeChunk(n[i]);if(typeof t.gb18030==="function"){this.gb18030=t.gb18030();var s=this.decodeTables.length;this.decodeTables.push(u.slice(0));var l=this.decodeTables.length;this.decodeTables.push(u.slice(0));var d=this.decodeTables[0];for(var i=129;i<=254;i++){var p=this.decodeTables[c-d[i]];for(var g=48;g<=57;g++){if(p[g]===o){p[g]=c-s}else if(p[g]>c){throw new Error("gb18030 decode tables conflict at byte 2")}var v=this.decodeTables[c-p[g]];for(var E=129;E<=254;E++){if(v[E]===o){v[E]=c-l}else if(v[E]===c-l){continue}else if(v[E]>c){throw new Error("gb18030 decode tables conflict at byte 3")}var S=this.decodeTables[c-v[E]];for(var w=48;w<=57;w++){if(S[w]===o)S[w]=a}}}}}this.defaultCharUnicode=r.defaultCharUnicode;this.encodeTable=[];this.encodeTableSeq=[];var x={};if(t.encodeSkipVals)for(var i=0;i<t.encodeSkipVals.length;i++){var N=t.encodeSkipVals[i];if(typeof N==="number")x[N]=true;else for(var g=N.from;g<=N.to;g++)x[g]=true}this._fillEncodeTable(0,0,x);if(t.encodeAdd){for(var P in t.encodeAdd)if(Object.prototype.hasOwnProperty.call(t.encodeAdd,P))this._setEncodeChar(P.charCodeAt(0),t.encodeAdd[P])}this.defCharSB=this.encodeTable[0][r.defaultCharSingleByte.charCodeAt(0)];if(this.defCharSB===o)this.defCharSB=this.encodeTable[0]["?"];if(this.defCharSB===o)this.defCharSB="?".charCodeAt(0)}DBCSCodec.prototype.encoder=DBCSEncoder;DBCSCodec.prototype.decoder=DBCSDecoder;DBCSCodec.prototype._getDecodeTrieNode=function(t){var r=[];for(;t>0;t>>>=8)r.push(t&255);if(r.length==0)r.push(0);var n=this.decodeTables[0];for(var i=r.length-1;i>0;i--){var a=n[r[i]];if(a==o){n[r[i]]=c-this.decodeTables.length;this.decodeTables.push(n=u.slice(0))}else if(a<=c){n=this.decodeTables[c-a]}else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+t.toString(16))}return n};DBCSCodec.prototype._addDecodeChunk=function(t){var r=parseInt(t[0],16);var n=this._getDecodeTrieNode(r);r=r&255;for(var i=1;i<t.length;i++){var o=t[i];if(typeof o==="string"){for(var a=0;a<o.length;){var c=o.charCodeAt(a++);if(55296<=c&&c<56320){var u=o.charCodeAt(a++);if(56320<=u&&u<57344)n[r++]=65536+(c-55296)*1024+(u-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+t[0])}else if(4080<c&&c<=4095){var l=4095-c+2;var d=[];for(var p=0;p<l;p++)d.push(o.charCodeAt(a++));n[r++]=s-this.decodeTableSeq.length;this.decodeTableSeq.push(d)}else n[r++]=c}}else if(typeof o==="number"){var g=n[r-1]+1;for(var a=0;a<o;a++)n[r++]=g++}else throw new Error("Incorrect type '"+typeof o+"' given in "+this.encodingName+" at chunk "+t[0])}if(r>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+t[0]+": too long"+r)};DBCSCodec.prototype._getEncodeBucket=function(t){var r=t>>8;if(this.encodeTable[r]===undefined)this.encodeTable[r]=u.slice(0);return this.encodeTable[r]};DBCSCodec.prototype._setEncodeChar=function(t,r){var n=this._getEncodeBucket(t);var i=t&255;if(n[i]<=s)this.encodeTableSeq[s-n[i]][l]=r;else if(n[i]==o)n[i]=r};DBCSCodec.prototype._setEncodeSequence=function(t,r){var n=t[0];var i=this._getEncodeBucket(n);var a=n&255;var c;if(i[a]<=s){c=this.encodeTableSeq[s-i[a]]}else{c={};if(i[a]!==o)c[l]=i[a];i[a]=s-this.encodeTableSeq.length;this.encodeTableSeq.push(c)}for(var u=1;u<t.length-1;u++){var d=c[n];if(typeof d==="object")c=d;else{c=c[n]={};if(d!==undefined)c[l]=d}}n=t[t.length-1];c[n]=r};DBCSCodec.prototype._fillEncodeTable=function(t,r,n){var i=this.decodeTables[t];var o=false;var a={};for(var u=0;u<256;u++){var l=i[u];var d=r+u;if(n[d])continue;if(l>=0){this._setEncodeChar(l,d);o=true}else if(l<=c){var p=c-l;if(!a[p]){var g=d<<8>>>0;if(this._fillEncodeTable(p,g,n))o=true;else a[p]=true}}else if(l<=s){this._setEncodeSequence(this.decodeTableSeq[s-l],d);o=true}}return o};function DBCSEncoder(t,r){this.leadSurrogate=-1;this.seqObj=undefined;this.encodeTable=r.encodeTable;this.encodeTableSeq=r.encodeTableSeq;this.defaultCharSingleByte=r.defCharSB;this.gb18030=r.gb18030}DBCSEncoder.prototype.write=function(t){var r=i.alloc(t.length*(this.gb18030?4:3)),n=this.leadSurrogate,a=this.seqObj,c=-1,u=0,d=0;while(true){if(c===-1){if(u==t.length)break;var p=t.charCodeAt(u++)}else{var p=c;c=-1}if(55296<=p&&p<57344){if(p<56320){if(n===-1){n=p;continue}else{n=p;p=o}}else{if(n!==-1){p=65536+(n-55296)*1024+(p-56320);n=-1}else{p=o}}}else if(n!==-1){c=p;p=o;n=-1}var g=o;if(a!==undefined&&p!=o){var v=a[p];if(typeof v==="object"){a=v;continue}else if(typeof v=="number"){g=v}else if(v==undefined){v=a[l];if(v!==undefined){g=v;c=p}else{}}a=undefined}else if(p>=0){var E=this.encodeTable[p>>8];if(E!==undefined)g=E[p&255];if(g<=s){a=this.encodeTableSeq[s-g];continue}if(g==o&&this.gb18030){var S=findIdx(this.gb18030.uChars,p);if(S!=-1){var g=this.gb18030.gbChars[S]+(p-this.gb18030.uChars[S]);r[d++]=129+Math.floor(g/12600);g=g%12600;r[d++]=48+Math.floor(g/1260);g=g%1260;r[d++]=129+Math.floor(g/10);g=g%10;r[d++]=48+g;continue}}}if(g===o)g=this.defaultCharSingleByte;if(g<256){r[d++]=g}else if(g<65536){r[d++]=g>>8;r[d++]=g&255}else if(g<16777216){r[d++]=g>>16;r[d++]=g>>8&255;r[d++]=g&255}else{r[d++]=g>>>24;r[d++]=g>>>16&255;r[d++]=g>>>8&255;r[d++]=g&255}}this.seqObj=a;this.leadSurrogate=n;return r.slice(0,d)};DBCSEncoder.prototype.end=function(){if(this.leadSurrogate===-1&&this.seqObj===undefined)return;var t=i.alloc(10),r=0;if(this.seqObj){var n=this.seqObj[l];if(n!==undefined){if(n<256){t[r++]=n}else{t[r++]=n>>8;t[r++]=n&255}}else{}this.seqObj=undefined}if(this.leadSurrogate!==-1){t[r++]=this.defaultCharSingleByte;this.leadSurrogate=-1}return t.slice(0,r)};DBCSEncoder.prototype.findIdx=findIdx;function DBCSDecoder(t,r){this.nodeIdx=0;this.prevBytes=[];this.decodeTables=r.decodeTables;this.decodeTableSeq=r.decodeTableSeq;this.defaultCharUnicode=r.defaultCharUnicode;this.gb18030=r.gb18030}DBCSDecoder.prototype.write=function(t){var r=i.alloc(t.length*2),n=this.nodeIdx,u=this.prevBytes,l=this.prevBytes.length,d=-this.prevBytes.length,p;for(var g=0,v=0;g<t.length;g++){var E=g>=0?t[g]:u[g+l];var p=this.decodeTables[n][E];if(p>=0){}else if(p===o){p=this.defaultCharUnicode.charCodeAt(0);g=d}else if(p===a){if(g>=3){var S=(t[g-3]-129)*12600+(t[g-2]-48)*1260+(t[g-1]-129)*10+(E-48)}else{var S=(u[g-3+l]-129)*12600+((g-2>=0?t[g-2]:u[g-2+l])-48)*1260+((g-1>=0?t[g-1]:u[g-1+l])-129)*10+(E-48)}var w=findIdx(this.gb18030.gbChars,S);p=this.gb18030.uChars[w]+S-this.gb18030.gbChars[w]}else if(p<=c){n=c-p;continue}else if(p<=s){var x=this.decodeTableSeq[s-p];for(var N=0;N<x.length-1;N++){p=x[N];r[v++]=p&255;r[v++]=p>>8}p=x[x.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+p+" at "+n+"/"+E);if(p>=65536){p-=65536;var P=55296|p>>10;r[v++]=P&255;r[v++]=P>>8;p=56320|p&1023}r[v++]=p&255;r[v++]=p>>8;n=0;d=g+1}this.nodeIdx=n;this.prevBytes=d>=0?Array.prototype.slice.call(t,d):u.slice(d+l).concat(Array.prototype.slice.call(t));return r.slice(0,v).toString("ucs2")};DBCSDecoder.prototype.end=function(){var t="";while(this.prevBytes.length>0){t+=this.defaultCharUnicode;var r=this.prevBytes.slice(1);this.prevBytes=[];this.nodeIdx=0;if(r.length>0)t+=this.write(r)}this.prevBytes=[];this.nodeIdx=0;return t};function findIdx(t,r){if(t[0]>r)return-1;var n=0,i=t.length;while(n<i-1){var o=n+(i-n+1>>1);if(t[o]<=r)n=o;else i=o}return n}},78942:(t,r,n)=>{"use strict";t.exports={shiftjis:{type:"_dbcs",table:function(){return n(71634)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(76334)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(93731)}},gbk:{type:"_dbcs",table:function(){return n(93731).concat(n(98024))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(93731).concat(n(98024))},gb18030:function(){return n(62802)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(32058)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(82872)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(82872).concat(n(20992))},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},12657:(t,r,n)=>{"use strict";var i=[n(45756),n(40750),n(9164),n(55369),n(20102),n(87558),n(7494),n(39698),n(78942)];for(var o=0;o<i.length;o++){var a=i[o];for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s))r[s]=a[s]}},45756:(t,r,n)=>{"use strict";var i=n(15118).Buffer;t.exports={utf8:{type:"_internal",bomAware:true},cesu8:{type:"_internal",bomAware:true},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:true},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:InternalCodec};function InternalCodec(t,r){this.enc=t.encodingName;this.bomAware=t.bomAware;if(this.enc==="base64")this.encoder=InternalEncoderBase64;else if(this.enc==="cesu8"){this.enc="utf8";this.encoder=InternalEncoderCesu8;if(i.from("eda0bdedb2a9","hex").toString()!==""){this.decoder=InternalDecoderCesu8;this.defaultCharUnicode=r.defaultCharUnicode}}}InternalCodec.prototype.encoder=InternalEncoder;InternalCodec.prototype.decoder=InternalDecoder;var o=n(71576).StringDecoder;if(!o.prototype.end)o.prototype.end=function(){};function InternalDecoder(t,r){this.decoder=new o(r.enc)}InternalDecoder.prototype.write=function(t){if(!i.isBuffer(t)){t=i.from(t)}return this.decoder.write(t)};InternalDecoder.prototype.end=function(){return this.decoder.end()};function InternalEncoder(t,r){this.enc=r.enc}InternalEncoder.prototype.write=function(t){return i.from(t,this.enc)};InternalEncoder.prototype.end=function(){};function InternalEncoderBase64(t,r){this.prevStr=""}InternalEncoderBase64.prototype.write=function(t){t=this.prevStr+t;var r=t.length-t.length%4;this.prevStr=t.slice(r);t=t.slice(0,r);return i.from(t,"base64")};InternalEncoderBase64.prototype.end=function(){return i.from(this.prevStr,"base64")};function InternalEncoderCesu8(t,r){}InternalEncoderCesu8.prototype.write=function(t){var r=i.alloc(t.length*3),n=0;for(var o=0;o<t.length;o++){var a=t.charCodeAt(o);if(a<128)r[n++]=a;else if(a<2048){r[n++]=192+(a>>>6);r[n++]=128+(a&63)}else{r[n++]=224+(a>>>12);r[n++]=128+(a>>>6&63);r[n++]=128+(a&63)}}return r.slice(0,n)};InternalEncoderCesu8.prototype.end=function(){};function InternalDecoderCesu8(t,r){this.acc=0;this.contBytes=0;this.accBytes=0;this.defaultCharUnicode=r.defaultCharUnicode}InternalDecoderCesu8.prototype.write=function(t){var r=this.acc,n=this.contBytes,i=this.accBytes,o="";for(var a=0;a<t.length;a++){var s=t[a];if((s&192)!==128){if(n>0){o+=this.defaultCharUnicode;n=0}if(s<128){o+=String.fromCharCode(s)}else if(s<224){r=s&31;n=1;i=1}else if(s<240){r=s&15;n=2;i=1}else{o+=this.defaultCharUnicode}}else{if(n>0){r=r<<6|s&63;n--;i++;if(n===0){if(i===2&&r<128&&r>0)o+=this.defaultCharUnicode;else if(i===3&&r<2048)o+=this.defaultCharUnicode;else o+=String.fromCharCode(r)}}else{o+=this.defaultCharUnicode}}}this.acc=r;this.contBytes=n;this.accBytes=i;return o};InternalDecoderCesu8.prototype.end=function(){var t=0;if(this.contBytes>0)t+=this.defaultCharUnicode;return t}},20102:(t,r,n)=>{"use strict";var i=n(15118).Buffer;r._sbcs=SBCSCodec;function SBCSCodec(t,r){if(!t)throw new Error("SBCS codec is called without the data.");if(!t.chars||t.chars.length!==128&&t.chars.length!==256)throw new Error("Encoding '"+t.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(t.chars.length===128){var n="";for(var o=0;o<128;o++)n+=String.fromCharCode(o);t.chars=n+t.chars}this.decodeBuf=i.from(t.chars,"ucs2");var a=i.alloc(65536,r.defaultCharSingleByte.charCodeAt(0));for(var o=0;o<t.chars.length;o++)a[t.chars.charCodeAt(o)]=o;this.encodeBuf=a}SBCSCodec.prototype.encoder=SBCSEncoder;SBCSCodec.prototype.decoder=SBCSDecoder;function SBCSEncoder(t,r){this.encodeBuf=r.encodeBuf}SBCSEncoder.prototype.write=function(t){var r=i.alloc(t.length);for(var n=0;n<t.length;n++)r[n]=this.encodeBuf[t.charCodeAt(n)];return r};SBCSEncoder.prototype.end=function(){};function SBCSDecoder(t,r){this.decodeBuf=r.decodeBuf}SBCSDecoder.prototype.write=function(t){var r=this.decodeBuf;var n=i.alloc(t.length*2);var o=0,a=0;for(var s=0;s<t.length;s++){o=t[s]*2;a=s*2;n[a]=r[o];n[a+1]=r[o+1]}return n.toString("ucs2")};SBCSDecoder.prototype.end=function(){}},7494:t=>{"use strict";t.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},87558:t=>{"use strict";t.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},9164:(t,r,n)=>{"use strict";var i=n(15118).Buffer;r.utf16be=Utf16BECodec;function Utf16BECodec(){}Utf16BECodec.prototype.encoder=Utf16BEEncoder;Utf16BECodec.prototype.decoder=Utf16BEDecoder;Utf16BECodec.prototype.bomAware=true;function Utf16BEEncoder(){}Utf16BEEncoder.prototype.write=function(t){var r=i.from(t,"ucs2");for(var n=0;n<r.length;n+=2){var o=r[n];r[n]=r[n+1];r[n+1]=o}return r};Utf16BEEncoder.prototype.end=function(){};function Utf16BEDecoder(){this.overflowByte=-1}Utf16BEDecoder.prototype.write=function(t){if(t.length==0)return"";var r=i.alloc(t.length+1),n=0,o=0;if(this.overflowByte!==-1){r[0]=t[0];r[1]=this.overflowByte;n=1;o=2}for(;n<t.length-1;n+=2,o+=2){r[o]=t[n+1];r[o+1]=t[n]}this.overflowByte=n==t.length-1?t[t.length-1]:-1;return r.slice(0,o).toString("ucs2")};Utf16BEDecoder.prototype.end=function(){this.overflowByte=-1};r.utf16=Utf16Codec;function Utf16Codec(t,r){this.iconv=r}Utf16Codec.prototype.encoder=Utf16Encoder;Utf16Codec.prototype.decoder=Utf16Decoder;function Utf16Encoder(t,r){t=t||{};if(t.addBOM===undefined)t.addBOM=true;this.encoder=r.iconv.getEncoder("utf-16le",t)}Utf16Encoder.prototype.write=function(t){return this.encoder.write(t)};Utf16Encoder.prototype.end=function(){return this.encoder.end()};function Utf16Decoder(t,r){this.decoder=null;this.initialBufs=[];this.initialBufsLen=0;this.options=t||{};this.iconv=r.iconv}Utf16Decoder.prototype.write=function(t){if(!this.decoder){this.initialBufs.push(t);this.initialBufsLen+=t.length;if(this.initialBufsLen<16)return"";var r=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(r,this.options);var n="";for(var i=0;i<this.initialBufs.length;i++)n+=this.decoder.write(this.initialBufs[i]);this.initialBufs.length=this.initialBufsLen=0;return n}return this.decoder.write(t)};Utf16Decoder.prototype.end=function(){if(!this.decoder){var t=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var r="";for(var n=0;n<this.initialBufs.length;n++)r+=this.decoder.write(this.initialBufs[n]);var i=this.decoder.end();if(i)r+=i;this.initialBufs.length=this.initialBufsLen=0;return r}return this.decoder.end()};function detectEncoding(t,r){var n=[];var i=0;var o=0,a=0;e:for(var s=0;s<t.length;s++){var c=t[s];for(var u=0;u<c.length;u++){n.push(c[u]);if(n.length===2){if(i===0){if(n[0]===255&&n[1]===254)return"utf-16le";if(n[0]===254&&n[1]===255)return"utf-16be"}if(n[0]===0&&n[1]!==0)a++;if(n[0]!==0&&n[1]===0)o++;n.length=0;i++;if(i>=100){break e}}}}if(a>o)return"utf-16be";if(a<o)return"utf-16le";return r||"utf-16le"}},40750:(t,r,n)=>{"use strict";var i=n(15118).Buffer;r._utf32=Utf32Codec;function Utf32Codec(t,r){this.iconv=r;this.bomAware=true;this.isLE=t.isLE}r.utf32le={type:"_utf32",isLE:true};r.utf32be={type:"_utf32",isLE:false};r.ucs4le="utf32le";r.ucs4be="utf32be";Utf32Codec.prototype.encoder=Utf32Encoder;Utf32Codec.prototype.decoder=Utf32Decoder;function Utf32Encoder(t,r){this.isLE=r.isLE;this.highSurrogate=0}Utf32Encoder.prototype.write=function(t){var r=i.from(t,"ucs2");var n=i.alloc(r.length*2);var o=this.isLE?n.writeUInt32LE:n.writeUInt32BE;var a=0;for(var s=0;s<r.length;s+=2){var c=r.readUInt16LE(s);var u=55296<=c&&c<56320;var l=56320<=c&&c<57344;if(this.highSurrogate){if(u||!l){o.call(n,this.highSurrogate,a);a+=4}else{var d=(this.highSurrogate-55296<<10|c-56320)+65536;o.call(n,d,a);a+=4;this.highSurrogate=0;continue}}if(u)this.highSurrogate=c;else{o.call(n,c,a);a+=4;this.highSurrogate=0}}if(a<n.length)n=n.slice(0,a);return n};Utf32Encoder.prototype.end=function(){if(!this.highSurrogate)return;var t=i.alloc(4);if(this.isLE)t.writeUInt32LE(this.highSurrogate,0);else t.writeUInt32BE(this.highSurrogate,0);this.highSurrogate=0;return t};function Utf32Decoder(t,r){this.isLE=r.isLE;this.badChar=r.iconv.defaultCharUnicode.charCodeAt(0);this.overflow=[]}Utf32Decoder.prototype.write=function(t){if(t.length===0)return"";var r=0;var n=0;var o=i.alloc(t.length+4);var a=0;var s=this.isLE;var c=this.overflow;var u=this.badChar;if(c.length>0){for(;r<t.length&&c.length<4;r++)c.push(t[r]);if(c.length===4){if(s){n=c[r]|c[r+1]<<8|c[r+2]<<16|c[r+3]<<24}else{n=c[r+3]|c[r+2]<<8|c[r+1]<<16|c[r]<<24}c.length=0;a=_writeCodepoint(o,a,n,u)}}for(;r<t.length-3;r+=4){if(s){n=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24}else{n=t[r+3]|t[r+2]<<8|t[r+1]<<16|t[r]<<24}a=_writeCodepoint(o,a,n,u)}for(;r<t.length;r++){c.push(t[r])}return o.slice(0,a).toString("ucs2")};function _writeCodepoint(t,r,n,i){if(n<0||n>1114111){n=i}if(n>=65536){n-=65536;var o=55296|n>>10;t[r++]=o&255;t[r++]=o>>8;var n=56320|n&1023}t[r++]=n&255;t[r++]=n>>8;return r}Utf32Decoder.prototype.end=function(){this.overflow.length=0};r.utf32=Utf32AutoCodec;r.ucs4="utf32";function Utf32AutoCodec(t,r){this.iconv=r}Utf32AutoCodec.prototype.encoder=Utf32AutoEncoder;Utf32AutoCodec.prototype.decoder=Utf32AutoDecoder;function Utf32AutoEncoder(t,r){t=t||{};if(t.addBOM===undefined)t.addBOM=true;this.encoder=r.iconv.getEncoder(t.defaultEncoding||"utf-32le",t)}Utf32AutoEncoder.prototype.write=function(t){return this.encoder.write(t)};Utf32AutoEncoder.prototype.end=function(){return this.encoder.end()};function Utf32AutoDecoder(t,r){this.decoder=null;this.initialBufs=[];this.initialBufsLen=0;this.options=t||{};this.iconv=r.iconv}Utf32AutoDecoder.prototype.write=function(t){if(!this.decoder){this.initialBufs.push(t);this.initialBufsLen+=t.length;if(this.initialBufsLen<32)return"";var r=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(r,this.options);var n="";for(var i=0;i<this.initialBufs.length;i++)n+=this.decoder.write(this.initialBufs[i]);this.initialBufs.length=this.initialBufsLen=0;return n}return this.decoder.write(t)};Utf32AutoDecoder.prototype.end=function(){if(!this.decoder){var t=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var r="";for(var n=0;n<this.initialBufs.length;n++)r+=this.decoder.write(this.initialBufs[n]);var i=this.decoder.end();if(i)r+=i;this.initialBufs.length=this.initialBufsLen=0;return r}return this.decoder.end()};function detectEncoding(t,r){var n=[];var i=0;var o=0,a=0;var s=0,c=0;e:for(var u=0;u<t.length;u++){var l=t[u];for(var d=0;d<l.length;d++){n.push(l[d]);if(n.length===4){if(i===0){if(n[0]===255&&n[1]===254&&n[2]===0&&n[3]===0){return"utf-32le"}if(n[0]===0&&n[1]===0&&n[2]===254&&n[3]===255){return"utf-32be"}}if(n[0]!==0||n[1]>16)a++;if(n[3]!==0||n[2]>16)o++;if(n[0]===0&&n[1]===0&&(n[2]!==0||n[3]!==0))c++;if((n[0]!==0||n[1]!==0)&&n[2]===0&&n[3]===0)s++;n.length=0;i++;if(i>=100){break e}}}}if(c-a>s-o)return"utf-32be";if(c-a<s-o)return"utf-32le";return r||"utf-32le"}},55369:(t,r,n)=>{"use strict";var i=n(15118).Buffer;r.utf7=Utf7Codec;r.unicode11utf7="utf7";function Utf7Codec(t,r){this.iconv=r}Utf7Codec.prototype.encoder=Utf7Encoder;Utf7Codec.prototype.decoder=Utf7Decoder;Utf7Codec.prototype.bomAware=true;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function Utf7Encoder(t,r){this.iconv=r.iconv}Utf7Encoder.prototype.write=function(t){return i.from(t.replace(o,function(t){return"+"+(t==="+"?"":this.iconv.encode(t,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))};Utf7Encoder.prototype.end=function(){};function Utf7Decoder(t,r){this.iconv=r.iconv;this.inBase64=false;this.base64Accum=""}var a=/[A-Za-z0-9\/+]/;var s=[];for(var c=0;c<256;c++)s[c]=a.test(String.fromCharCode(c));var u="+".charCodeAt(0),l="-".charCodeAt(0),d="&".charCodeAt(0);Utf7Decoder.prototype.write=function(t){var r="",n=0,o=this.inBase64,a=this.base64Accum;for(var c=0;c<t.length;c++){if(!o){if(t[c]==u){r+=this.iconv.decode(t.slice(n,c),"ascii");n=c+1;o=true}}else{if(!s[t[c]]){if(c==n&&t[c]==l){r+="+"}else{var d=a+this.iconv.decode(t.slice(n,c),"ascii");r+=this.iconv.decode(i.from(d,"base64"),"utf16-be")}if(t[c]!=l)c--;n=c+1;o=false;a=""}}}if(!o){r+=this.iconv.decode(t.slice(n),"ascii")}else{var d=a+this.iconv.decode(t.slice(n),"ascii");var p=d.length-d.length%8;a=d.slice(p);d=d.slice(0,p);r+=this.iconv.decode(i.from(d,"base64"),"utf16-be")}this.inBase64=o;this.base64Accum=a;return r};Utf7Decoder.prototype.end=function(){var t="";if(this.inBase64&&this.base64Accum.length>0)t=this.iconv.decode(i.from(this.base64Accum,"base64"),"utf16-be");this.inBase64=false;this.base64Accum="";return t};r.utf7imap=Utf7IMAPCodec;function Utf7IMAPCodec(t,r){this.iconv=r}Utf7IMAPCodec.prototype.encoder=Utf7IMAPEncoder;Utf7IMAPCodec.prototype.decoder=Utf7IMAPDecoder;Utf7IMAPCodec.prototype.bomAware=true;function Utf7IMAPEncoder(t,r){this.iconv=r.iconv;this.inBase64=false;this.base64Accum=i.alloc(6);this.base64AccumIdx=0}Utf7IMAPEncoder.prototype.write=function(t){var r=this.inBase64,n=this.base64Accum,o=this.base64AccumIdx,a=i.alloc(t.length*5+10),s=0;for(var c=0;c<t.length;c++){var u=t.charCodeAt(c);if(32<=u&&u<=126){if(r){if(o>0){s+=a.write(n.slice(0,o).toString("base64").replace(/\//g,",").replace(/=+$/,""),s);o=0}a[s++]=l;r=false}if(!r){a[s++]=u;if(u===d)a[s++]=l}}else{if(!r){a[s++]=d;r=true}if(r){n[o++]=u>>8;n[o++]=u&255;if(o==n.length){s+=a.write(n.toString("base64").replace(/\//g,","),s);o=0}}}}this.inBase64=r;this.base64AccumIdx=o;return a.slice(0,s)};Utf7IMAPEncoder.prototype.end=function(){var t=i.alloc(10),r=0;if(this.inBase64){if(this.base64AccumIdx>0){r+=t.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),r);this.base64AccumIdx=0}t[r++]=l;this.inBase64=false}return t.slice(0,r)};function Utf7IMAPDecoder(t,r){this.iconv=r.iconv;this.inBase64=false;this.base64Accum=""}var p=s.slice();p[",".charCodeAt(0)]=true;Utf7IMAPDecoder.prototype.write=function(t){var r="",n=0,o=this.inBase64,a=this.base64Accum;for(var s=0;s<t.length;s++){if(!o){if(t[s]==d){r+=this.iconv.decode(t.slice(n,s),"ascii");n=s+1;o=true}}else{if(!p[t[s]]){if(s==n&&t[s]==l){r+="&"}else{var c=a+this.iconv.decode(t.slice(n,s),"ascii").replace(/,/g,"/");r+=this.iconv.decode(i.from(c,"base64"),"utf16-be")}if(t[s]!=l)s--;n=s+1;o=false;a=""}}}if(!o){r+=this.iconv.decode(t.slice(n),"ascii")}else{var c=a+this.iconv.decode(t.slice(n),"ascii").replace(/,/g,"/");var u=c.length-c.length%8;a=c.slice(u);c=c.slice(0,u);r+=this.iconv.decode(i.from(c,"base64"),"utf16-be")}this.inBase64=o;this.base64Accum=a;return r};Utf7IMAPDecoder.prototype.end=function(){var t="";if(this.inBase64&&this.base64Accum.length>0)t=this.iconv.decode(i.from(this.base64Accum,"base64"),"utf16-be");this.inBase64=false;this.base64Accum="";return t}},44233:(t,r)=>{"use strict";var n="\ufeff";r.PrependBOM=PrependBOMWrapper;function PrependBOMWrapper(t,r){this.encoder=t;this.addBOM=true}PrependBOMWrapper.prototype.write=function(t){if(this.addBOM){t=n+t;this.addBOM=false}return this.encoder.write(t)};PrependBOMWrapper.prototype.end=function(){return this.encoder.end()};r.StripBOM=StripBOMWrapper;function StripBOMWrapper(t,r){this.decoder=t;this.pass=false;this.options=r||{}}StripBOMWrapper.prototype.write=function(t){var r=this.decoder.write(t);if(this.pass||!r)return r;if(r[0]===n){r=r.slice(1);if(typeof this.options.stripBOM==="function")this.options.stripBOM()}this.pass=true;return r};StripBOMWrapper.prototype.end=function(){return this.decoder.end()}},93102:(t,r,n)=>{"use strict";var i=n(15118).Buffer;var o=n(44233),a=t.exports;a.encodings=null;a.defaultCharUnicode="";a.defaultCharSingleByte="?";a.encode=function encode(t,r,n){t=""+(t||"");var o=a.getEncoder(r,n);var s=o.write(t);var c=o.end();return c&&c.length>0?i.concat([s,c]):s};a.decode=function decode(t,r,n){if(typeof t==="string"){if(!a.skipDecodeWarning){console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding");a.skipDecodeWarning=true}t=i.from(""+(t||""),"binary")}var o=a.getDecoder(r,n);var s=o.write(t);var c=o.end();return c?s+c:s};a.encodingExists=function encodingExists(t){try{a.getCodec(t);return true}catch(t){return false}};a.toEncoding=a.encode;a.fromEncoding=a.decode;a._codecDataCache={};a.getCodec=function getCodec(t){if(!a.encodings)a.encodings=n(12657);var r=a._canonicalizeEncoding(t);var i={};while(true){var o=a._codecDataCache[r];if(o)return o;var s=a.encodings[r];switch(typeof s){case"string":r=s;break;case"object":for(var c in s)i[c]=s[c];if(!i.encodingName)i.encodingName=r;r=s.type;break;case"function":if(!i.encodingName)i.encodingName=r;o=new s(i,a);a._codecDataCache[i.encodingName]=o;return o;default:throw new Error("Encoding not recognized: '"+t+"' (searched as: '"+r+"')")}}};a._canonicalizeEncoding=function(t){return(""+t).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")};a.getEncoder=function getEncoder(t,r){var n=a.getCodec(t),i=new n.encoder(r,n);if(n.bomAware&&r&&r.addBOM)i=new o.PrependBOM(i,r);return i};a.getDecoder=function getDecoder(t,r){var n=a.getCodec(t),i=new n.decoder(r,n);if(n.bomAware&&!(r&&r.stripBOM===false))i=new o.StripBOM(i,r);return i};a.enableStreamingAPI=function enableStreamingAPI(t){if(a.supportsStreams)return;var r=n(78520)(t);a.IconvLiteEncoderStream=r.IconvLiteEncoderStream;a.IconvLiteDecoderStream=r.IconvLiteDecoderStream;a.encodeStream=function encodeStream(t,r){return new a.IconvLiteEncoderStream(a.getEncoder(t,r),r)};a.decodeStream=function decodeStream(t,r){return new a.IconvLiteDecoderStream(a.getDecoder(t,r),r)};a.supportsStreams=true};var s;try{s=n(12781)}catch(t){}if(s&&s.Transform){a.enableStreamingAPI(s)}else{a.encodeStream=a.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}}if(false){}},78520:(t,r,n)=>{"use strict";var i=n(15118).Buffer;t.exports=function(t){var r=t.Transform;function IconvLiteEncoderStream(t,n){this.conv=t;n=n||{};n.decodeStrings=false;r.call(this,n)}IconvLiteEncoderStream.prototype=Object.create(r.prototype,{constructor:{value:IconvLiteEncoderStream}});IconvLiteEncoderStream.prototype._transform=function(t,r,n){if(typeof t!="string")return n(new Error("Iconv encoding stream needs strings as its input."));try{var i=this.conv.write(t);if(i&&i.length)this.push(i);n()}catch(t){n(t)}};IconvLiteEncoderStream.prototype._flush=function(t){try{var r=this.conv.end();if(r&&r.length)this.push(r);t()}catch(r){t(r)}};IconvLiteEncoderStream.prototype.collect=function(t){var r=[];this.on("error",t);this.on("data",(function(t){r.push(t)}));this.on("end",(function(){t(null,i.concat(r))}));return this};function IconvLiteDecoderStream(t,n){this.conv=t;n=n||{};n.encoding=this.encoding="utf8";r.call(this,n)}IconvLiteDecoderStream.prototype=Object.create(r.prototype,{constructor:{value:IconvLiteDecoderStream}});IconvLiteDecoderStream.prototype._transform=function(t,r,n){if(!i.isBuffer(t)&&!(t instanceof Uint8Array))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var o=this.conv.write(t);if(o&&o.length)this.push(o,this.encoding);n()}catch(t){n(t)}};IconvLiteDecoderStream.prototype._flush=function(t){try{var r=this.conv.end();if(r&&r.length)this.push(r,this.encoding);t()}catch(r){t(r)}};IconvLiteDecoderStream.prototype.collect=function(t){var r="";this.on("error",t);this.on("data",(function(t){r+=t}));this.on("end",(function(){t(null,r)}));return this};return{IconvLiteEncoderStream:IconvLiteEncoderStream,IconvLiteDecoderStream:IconvLiteDecoderStream}}},74294:(t,r,n)=>{t.exports=n(54219)},54219:(t,r,n)=>{"use strict";var i=n(41808);var o=n(24404);var a=n(13685);var s=n(95687);var c=n(82361);var u=n(39491);var l=n(73837);r.httpOverHttp=httpOverHttp;r.httpsOverHttp=httpsOverHttp;r.httpOverHttps=httpOverHttps;r.httpsOverHttps=httpsOverHttps;function httpOverHttp(t){var r=new TunnelingAgent(t);r.request=a.request;return r}function httpsOverHttp(t){var r=new TunnelingAgent(t);r.request=a.request;r.createSocket=createSecureSocket;r.defaultPort=443;return r}function httpOverHttps(t){var r=new TunnelingAgent(t);r.request=s.request;return r}function httpsOverHttps(t){var r=new TunnelingAgent(t);r.request=s.request;r.createSocket=createSecureSocket;r.defaultPort=443;return r}function TunnelingAgent(t){var r=this;r.options=t||{};r.proxyOptions=r.options.proxy||{};r.maxSockets=r.options.maxSockets||a.Agent.defaultMaxSockets;r.requests=[];r.sockets=[];r.on("free",(function onFree(t,n,i,o){var a=toOptions(n,i,o);for(var s=0,c=r.requests.length;s<c;++s){var u=r.requests[s];if(u.host===a.host&&u.port===a.port){r.requests.splice(s,1);u.request.onSocket(t);return}}t.destroy();r.removeSocket(t)}))}l.inherits(TunnelingAgent,c.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(t,r,n,i){var o=this;var a=mergeOptions({request:t},o.options,toOptions(r,n,i));if(o.sockets.length>=this.maxSockets){o.requests.push(a);return}o.createSocket(a,(function(r){r.on("free",onFree);r.on("close",onCloseOrRemove);r.on("agentRemove",onCloseOrRemove);t.onSocket(r);function onFree(){o.emit("free",r,a)}function onCloseOrRemove(t){o.removeSocket(r);r.removeListener("free",onFree);r.removeListener("close",onCloseOrRemove);r.removeListener("agentRemove",onCloseOrRemove)}}))};TunnelingAgent.prototype.createSocket=function createSocket(t,r){var n=this;var i={};n.sockets.push(i);var o=mergeOptions({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:false,headers:{host:t.host+":"+t.port}});if(t.localAddress){o.localAddress=t.localAddress}if(o.proxyAuth){o.headers=o.headers||{};o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")}d("making CONNECT request");var a=n.request(o);a.useChunkedEncodingByDefault=false;a.once("response",onResponse);a.once("upgrade",onUpgrade);a.once("connect",onConnect);a.once("error",onError);a.end();function onResponse(t){t.upgrade=true}function onUpgrade(t,r,n){process.nextTick((function(){onConnect(t,r,n)}))}function onConnect(o,s,c){a.removeAllListeners();s.removeAllListeners();if(o.statusCode!==200){d("tunneling socket could not be established, statusCode=%d",o.statusCode);s.destroy();var u=new Error("tunneling socket could not be established, "+"statusCode="+o.statusCode);u.code="ECONNRESET";t.request.emit("error",u);n.removeSocket(i);return}if(c.length>0){d("got illegal response body from proxy");s.destroy();var u=new Error("got illegal response body from proxy");u.code="ECONNRESET";t.request.emit("error",u);n.removeSocket(i);return}d("tunneling connection has established");n.sockets[n.sockets.indexOf(i)]=s;return r(s)}function onError(r){a.removeAllListeners();d("tunneling socket could not be established, cause=%s\n",r.message,r.stack);var o=new Error("tunneling socket could not be established, "+"cause="+r.message);o.code="ECONNRESET";t.request.emit("error",o);n.removeSocket(i)}};TunnelingAgent.prototype.removeSocket=function removeSocket(t){var r=this.sockets.indexOf(t);if(r===-1){return}this.sockets.splice(r,1);var n=this.requests.shift();if(n){this.createSocket(n,(function(t){n.request.onSocket(t)}))}};function createSecureSocket(t,r){var n=this;TunnelingAgent.prototype.createSocket.call(n,t,(function(i){var a=t.request.getHeader("host");var s=mergeOptions({},n.options,{socket:i,servername:a?a.replace(/:.*$/,""):t.host});var c=o.connect(0,s);n.sockets[n.sockets.indexOf(i)]=c;r(c)}))}function toOptions(t,r,n){if(typeof t==="string"){return{host:t,port:r,localAddress:n}}return t}function mergeOptions(t){for(var r=1,n=arguments.length;r<n;++r){var i=arguments[r];if(typeof i==="object"){var o=Object.keys(i);for(var a=0,s=o.length;a<s;++a){var c=o[a];if(i[c]!==undefined){t[c]=i[c]}}}}return t}var d;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){d=function(){var t=Array.prototype.slice.call(arguments);if(typeof t[0]==="string"){t[0]="TUNNEL: "+t[0]}else{t.unshift("TUNNEL:")}console.error.apply(console,t)}}else{d=function(){}}r.debug=d},15538:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function fulfilled(t){try{step(i.next(t))}catch(t){a(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){a(t)}}function step(t){t.done?o(t.value):new n((function(r){r(t.value)})).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(57310);const a=n(13685);const s=n(95687);const c=n(19470);let u;let l;var d;(function(t){t[t["OK"]=200]="OK";t[t["MultipleChoices"]=300]="MultipleChoices";t[t["MovedPermanently"]=301]="MovedPermanently";t[t["ResourceMoved"]=302]="ResourceMoved";t[t["SeeOther"]=303]="SeeOther";t[t["NotModified"]=304]="NotModified";t[t["UseProxy"]=305]="UseProxy";t[t["SwitchProxy"]=306]="SwitchProxy";t[t["TemporaryRedirect"]=307]="TemporaryRedirect";t[t["PermanentRedirect"]=308]="PermanentRedirect";t[t["BadRequest"]=400]="BadRequest";t[t["Unauthorized"]=401]="Unauthorized";t[t["PaymentRequired"]=402]="PaymentRequired";t[t["Forbidden"]=403]="Forbidden";t[t["NotFound"]=404]="NotFound";t[t["MethodNotAllowed"]=405]="MethodNotAllowed";t[t["NotAcceptable"]=406]="NotAcceptable";t[t["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";t[t["RequestTimeout"]=408]="RequestTimeout";t[t["Conflict"]=409]="Conflict";t[t["Gone"]=410]="Gone";t[t["TooManyRequests"]=429]="TooManyRequests";t[t["InternalServerError"]=500]="InternalServerError";t[t["NotImplemented"]=501]="NotImplemented";t[t["BadGateway"]=502]="BadGateway";t[t["ServiceUnavailable"]=503]="ServiceUnavailable";t[t["GatewayTimeout"]=504]="GatewayTimeout"})(d=r.HttpCodes||(r.HttpCodes={}));const p=[d.MovedPermanently,d.ResourceMoved,d.SeeOther,d.TemporaryRedirect,d.PermanentRedirect];const g=[d.BadGateway,d.ServiceUnavailable,d.GatewayTimeout];const v=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED"];const E=["OPTIONS","GET","DELETE","HEAD"];const S=10;const w=5;class HttpClientResponse{constructor(t){this.message=t}readBody(){return new Promise(((t,r)=>i(this,void 0,void 0,(function*(){const n=[];const o=c.obtainContentCharset(this);const a=this.message.headers["content-encoding"]||"";const s=new RegExp("(gzip$)|(gzip, *deflate)").test(a);this.message.on("data",(function(t){const r=typeof t==="string"?Buffer.from(t,o):t;n.push(r)})).on("end",(function(){return i(this,void 0,void 0,(function*(){const r=Buffer.concat(n);if(s){const n=yield c.decompressGzippedContent(r,o);t(n)}else{t(r.toString(o))}}))})).on("error",(function(t){r(t)}))}))))}}r.HttpClientResponse=HttpClientResponse;function isHttps(t){let r=o.parse(t);return r.protocol==="https:"}r.isHttps=isHttps;var x;(function(t){t["HTTP_PROXY"]="HTTP_PROXY";t["HTTPS_PROXY"]="HTTPS_PROXY";t["NO_PROXY"]="NO_PROXY"})(x||(x={}));class HttpClient{constructor(t,r,i){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=t;this.handlers=r||[];let o=process.env[x.NO_PROXY];if(o){this._httpProxyBypassHosts=[];o.split(",").forEach((t=>{this._httpProxyBypassHosts.push(c.buildProxyBypassRegexFromEnv(t))}))}this.requestOptions=i;if(i){if(i.ignoreSslError!=null){this._ignoreSslError=i.ignoreSslError}this._socketTimeout=i.socketTimeout;this._httpProxy=i.proxy;if(i.proxy&&i.proxy.proxyBypassHosts){this._httpProxyBypassHosts=[];i.proxy.proxyBypassHosts.forEach((t=>{this._httpProxyBypassHosts.push(new RegExp(t,"i"))}))}this._certConfig=i.cert;if(this._certConfig){u=n(57147);if(this._certConfig.caFile&&u.existsSync(this._certConfig.caFile)){this._ca=u.readFileSync(this._certConfig.caFile,"utf8")}if(this._certConfig.certFile&&u.existsSync(this._certConfig.certFile)){this._cert=u.readFileSync(this._certConfig.certFile,"utf8")}if(this._certConfig.keyFile&&u.existsSync(this._certConfig.keyFile)){this._key=u.readFileSync(this._certConfig.keyFile,"utf8")}}if(i.allowRedirects!=null){this._allowRedirects=i.allowRedirects}if(i.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=i.allowRedirectDowngrade}if(i.maxRedirects!=null){this._maxRedirects=Math.max(i.maxRedirects,0)}if(i.keepAlive!=null){this._keepAlive=i.keepAlive}if(i.allowRetries!=null){this._allowRetries=i.allowRetries}if(i.maxRetries!=null){this._maxRetries=i.maxRetries}}}options(t,r){return this.request("OPTIONS",t,null,r||{})}get(t,r){return this.request("GET",t,null,r||{})}del(t,r){return this.request("DELETE",t,null,r||{})}post(t,r,n){return this.request("POST",t,r,n||{})}patch(t,r,n){return this.request("PATCH",t,r,n||{})}put(t,r,n){return this.request("PUT",t,r,n||{})}head(t,r){return this.request("HEAD",t,null,r||{})}sendStream(t,r,n,i){return this.request(t,r,n,i)}request(t,r,n,a){return i(this,void 0,void 0,(function*(){if(this._disposed){throw new Error("Client has already been disposed.")}let i=o.parse(r);let s=this._prepareRequest(t,i,a);let c=this._allowRetries&&E.indexOf(t)!=-1?this._maxRetries+1:1;let u=0;let l;while(u<c){try{l=yield this.requestRaw(s,n)}catch(t){u++;if(t&&t.code&&v.indexOf(t.code)>-1&&u<c){yield this._performExponentialBackoff(u);continue}throw t}if(l&&l.message&&l.message.statusCode===d.Unauthorized){let t;for(let r=0;r<this.handlers.length;r++){if(this.handlers[r].canHandleAuthentication(l)){t=this.handlers[r];break}}if(t){return t.handleAuthentication(this,s,n)}else{return l}}let r=this._maxRedirects;while(p.indexOf(l.message.statusCode)!=-1&&this._allowRedirects&&r>0){const c=l.message.headers["location"];if(!c){break}let u=o.parse(c);if(i.protocol=="https:"&&i.protocol!=u.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}yield l.readBody();s=this._prepareRequest(t,u,a);l=yield this.requestRaw(s,n);r--}if(g.indexOf(l.message.statusCode)==-1){return l}u+=1;if(u<c){yield l.readBody();yield this._performExponentialBackoff(u)}}return l}))}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(t,r){return new Promise(((n,i)=>{let callbackForResult=function(t,r){if(t){i(t)}n(r)};this.requestRawWithCallback(t,r,callbackForResult)}))}requestRawWithCallback(t,r,n){let i;if(typeof r==="string"){t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8")}let o=false;let handleResult=(t,r)=>{if(!o){o=true;n(t,r)}};let a=t.httpModule.request(t.options,(t=>{let r=new HttpClientResponse(t);handleResult(null,r)}));a.on("socket",(t=>{i=t}));a.setTimeout(this._socketTimeout||3*6e4,(()=>{if(i){i.destroy()}handleResult(new Error("Request timeout: "+t.options.path),null)}));a.on("error",(function(t){handleResult(t,null)}));if(r&&typeof r==="string"){a.write(r,"utf8")}if(r&&typeof r!=="string"){r.on("close",(function(){a.end()}));r.pipe(a)}else{a.end()}}_prepareRequest(t,r,n){const i={};i.parsedUrl=r;const c=i.parsedUrl.protocol==="https:";i.httpModule=c?s:a;const u=c?443:80;i.options={};i.options.host=i.parsedUrl.hostname;i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):u;i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||"");i.options.method=t;i.options.timeout=this.requestOptions&&this.requestOptions.socketTimeout||this._socketTimeout;this._socketTimeout=i.options.timeout;i.options.headers=this._mergeHeaders(n);if(this.userAgent!=null){i.options.headers["user-agent"]=this.userAgent}i.options.agent=this._getAgent(i.parsedUrl);if(this.handlers&&!this._isPresigned(o.format(r))){this.handlers.forEach((t=>{t.prepareRequest(i.options)}))}return i}_isPresigned(t){if(this.requestOptions&&this.requestOptions.presignedUrlPatterns){const r=this.requestOptions.presignedUrlPatterns;for(let n=0;n<r.length;n++){if(t.match(r[n])){return true}}}return false}_mergeHeaders(t){const lowercaseKeys=t=>Object.keys(t).reduce(((r,n)=>(r[n.toLowerCase()]=t[n],r)),{});if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(t))}return lowercaseKeys(t||{})}_getAgent(t){let r;let i=this._getProxy(t);let o=i.proxyUrl&&i.proxyUrl.hostname&&!this._isMatchInBypassProxyList(t);if(this._keepAlive&&o){r=this._proxyAgent}if(this._keepAlive&&!o){r=this._agent}if(!!r){return r}const c=t.protocol==="https:";let u=100;if(!!this.requestOptions){u=this.requestOptions.maxSockets||a.globalAgent.maxSockets}if(o){if(!l){l=n(74294)}const t={maxSockets:u,keepAlive:this._keepAlive,proxy:{proxyAuth:i.proxyAuth,host:i.proxyUrl.hostname,port:i.proxyUrl.port}};let o;const a=i.proxyUrl.protocol==="https:";if(c){o=a?l.httpsOverHttps:l.httpsOverHttp}else{o=a?l.httpOverHttps:l.httpOverHttp}r=o(t);this._proxyAgent=r}if(this._keepAlive&&!r){const t={keepAlive:this._keepAlive,maxSockets:u};r=c?new s.Agent(t):new a.Agent(t);this._agent=r}if(!r){r=c?s.globalAgent:a.globalAgent}if(c&&this._ignoreSslError){r.options=Object.assign(r.options||{},{rejectUnauthorized:false})}if(c&&this._certConfig){r.options=Object.assign(r.options||{},{ca:this._ca,cert:this._cert,key:this._key,passphrase:this._certConfig.passphrase})}return r}_getProxy(t){let r=t.protocol==="https:";let n=this._httpProxy;let i=process.env[x.HTTPS_PROXY];let a=process.env[x.HTTP_PROXY];if(!n){if(i&&r){n={proxyUrl:i}}else if(a){n={proxyUrl:a}}}let s;let c;if(n){if(n.proxyUrl.length>0){s=o.parse(n.proxyUrl)}if(n.proxyUsername||n.proxyPassword){c=n.proxyUsername+":"+n.proxyPassword}}return{proxyUrl:s,proxyAuth:c}}_isMatchInBypassProxyList(t){if(!this._httpProxyBypassHosts){return false}let r=false;this._httpProxyBypassHosts.forEach((n=>{if(n.test(t.href)){r=true}}));return r}_performExponentialBackoff(t){t=Math.min(S,t);const r=w*Math.pow(2,t);return new Promise((t=>setTimeout((()=>t()),r)))}}r.HttpClient=HttpClient},19470:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){return new(n||(n=Promise))((function(o,a){function fulfilled(t){try{step(i.next(t))}catch(t){a(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){a(t)}}function step(t){t.done?o(t.value):new n((function(r){r(t.value)})).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(89615);const a=n(57310);const s=n(71017);const c=n(59796);function getUrl(t,r,n){const i=s.posix||s;let o="";if(!r){o=t}else if(!t){o=r}else{const n=a.parse(r);const s=a.parse(t);s.protocol=s.protocol||n.protocol;s.auth=s.auth||n.auth;s.host=s.host||n.host;s.pathname=i.resolve(n.pathname,s.pathname);if(!s.pathname.endsWith("/")&&t.endsWith("/")){s.pathname+="/"}o=a.format(s)}return n?getUrlWithParsedQueryParams(o,n):o}r.getUrl=getUrl;function getUrlWithParsedQueryParams(t,r){const n=t.replace(/\?$/g,"");const i=o.stringify(r.params,buildParamsStringifyOptions(r));return`${n}${i}`}function buildParamsStringifyOptions(t){let r={addQueryPrefix:true,delimiter:(t.options||{}).separator||"&",allowDots:(t.options||{}).shouldAllowDots||false,arrayFormat:(t.options||{}).arrayFormat||"repeat",encodeValuesOnly:(t.options||{}).shouldOnlyEncodeValues||true};return r}function decompressGzippedContent(t,r){return i(this,void 0,void 0,(function*(){return new Promise(((n,o)=>i(this,void 0,void 0,(function*(){c.gunzip(t,(function(t,i){if(t){o(t)}else{n(i.toString(r||"utf-8"))}}))}))))}))}r.decompressGzippedContent=decompressGzippedContent;function buildProxyBypassRegexFromEnv(t){try{return new RegExp(t,"i")}catch(r){if(r instanceof SyntaxError&&(t||"").startsWith("*")){let r=t.replace("*","(.*)");return new RegExp(r,"i")}throw r}}r.buildProxyBypassRegexFromEnv=buildProxyBypassRegexFromEnv;function obtainContentCharset(t){const r=["ascii","utf8","utf16le","ucs2","base64","binary","hex"];const n=t.message.headers["content-type"]||"";const i=n.match(/charset=([^;,\r\n]+)/i);return i&&i[1]&&r.indexOf(i[1])!=-1?i[1]:"utf-8"}r.obtainContentCharset=obtainContentCharset},37864:t=>{"use strict";var r=String.prototype.replace;var n=/%20/g;var i={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:i.RFC3986,formatters:{RFC1738:function(t){return r.call(t,n,"+")},RFC3986:function(t){return String(t)}},RFC1738:i.RFC1738,RFC3986:i.RFC3986}},89615:(t,r,n)=>{"use strict";var i=n(13599);var o=n(80748);var a=n(37864);t.exports={formats:a,parse:o,stringify:i}},80748:(t,r,n)=>{"use strict";var i=n(57154);var o=Object.prototype.hasOwnProperty;var a=Array.isArray;var s={allowDots:false,allowPrototypes:false,allowSparse:false,arrayLimit:20,charset:"utf-8",charsetSentinel:false,comma:false,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:false,interpretNumericEntities:false,parameterLimit:1e3,parseArrays:true,plainObjects:false,strictNullHandling:false};var interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,(function(t,r){return String.fromCharCode(parseInt(r,10))}))};var parseArrayValue=function(t,r){if(t&&typeof t==="string"&&r.comma&&t.indexOf(",")>-1){return t.split(",")}return t};var c="utf8=%26%2310003%3B";var u="utf8=%E2%9C%93";var l=function parseQueryStringValues(t,r){var n={};var l=r.ignoreQueryPrefix?t.replace(/^\?/,""):t;var d=r.parameterLimit===Infinity?undefined:r.parameterLimit;var p=l.split(r.delimiter,d);var g=-1;var v;var E=r.charset;if(r.charsetSentinel){for(v=0;v<p.length;++v){if(p[v].indexOf("utf8=")===0){if(p[v]===u){E="utf-8"}else if(p[v]===c){E="iso-8859-1"}g=v;v=p.length}}}for(v=0;v<p.length;++v){if(v===g){continue}var S=p[v];var w=S.indexOf("]=");var x=w===-1?S.indexOf("="):w+1;var N,P;if(x===-1){N=r.decoder(S,s.decoder,E,"key");P=r.strictNullHandling?null:""}else{N=r.decoder(S.slice(0,x),s.decoder,E,"key");P=i.maybeMap(parseArrayValue(S.slice(x+1),r),(function(t){return r.decoder(t,s.decoder,E,"value")}))}if(P&&r.interpretNumericEntities&&E==="iso-8859-1"){P=interpretNumericEntities(P)}if(S.indexOf("[]=")>-1){P=a(P)?[P]:P}if(o.call(n,N)){n[N]=i.combine(n[N],P)}else{n[N]=P}}return n};var parseObject=function(t,r,n,i){var o=i?r:parseArrayValue(r,n);for(var a=t.length-1;a>=0;--a){var s;var c=t[a];if(c==="[]"&&n.parseArrays){s=[].concat(o)}else{s=n.plainObjects?Object.create(null):{};var u=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c;var l=parseInt(u,10);if(!n.parseArrays&&u===""){s={0:o}}else if(!isNaN(l)&&c!==u&&String(l)===u&&l>=0&&(n.parseArrays&&l<=n.arrayLimit)){s=[];s[l]=o}else if(u!=="__proto__"){s[u]=o}}o=s}return o};var d=function parseQueryStringKeys(t,r,n,i){if(!t){return}var a=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t;var s=/(\[[^[\]]*])/;var c=/(\[[^[\]]*])/g;var u=n.depth>0&&s.exec(a);var l=u?a.slice(0,u.index):a;var d=[];if(l){if(!n.plainObjects&&o.call(Object.prototype,l)){if(!n.allowPrototypes){return}}d.push(l)}var p=0;while(n.depth>0&&(u=c.exec(a))!==null&&p<n.depth){p+=1;if(!n.plainObjects&&o.call(Object.prototype,u[1].slice(1,-1))){if(!n.allowPrototypes){return}}d.push(u[1])}if(u){d.push("["+a.slice(u.index)+"]")}return parseObject(d,r,n,i)};var p=function normalizeParseOptions(t){if(!t){return s}if(t.decoder!==null&&t.decoder!==undefined&&typeof t.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}if(typeof t.charset!=="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var r=typeof t.charset==="undefined"?s.charset:t.charset;return{allowDots:typeof t.allowDots==="undefined"?s.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes==="boolean"?t.allowPrototypes:s.allowPrototypes,allowSparse:typeof t.allowSparse==="boolean"?t.allowSparse:s.allowSparse,arrayLimit:typeof t.arrayLimit==="number"?t.arrayLimit:s.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel==="boolean"?t.charsetSentinel:s.charsetSentinel,comma:typeof t.comma==="boolean"?t.comma:s.comma,decoder:typeof t.decoder==="function"?t.decoder:s.decoder,delimiter:typeof t.delimiter==="string"||i.isRegExp(t.delimiter)?t.delimiter:s.delimiter,depth:typeof t.depth==="number"||t.depth===false?+t.depth:s.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===true,interpretNumericEntities:typeof t.interpretNumericEntities==="boolean"?t.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof t.parameterLimit==="number"?t.parameterLimit:s.parameterLimit,parseArrays:t.parseArrays!==false,plainObjects:typeof t.plainObjects==="boolean"?t.plainObjects:s.plainObjects,strictNullHandling:typeof t.strictNullHandling==="boolean"?t.strictNullHandling:s.strictNullHandling}};t.exports=function(t,r){var n=p(r);if(t===""||t===null||typeof t==="undefined"){return n.plainObjects?Object.create(null):{}}var o=typeof t==="string"?l(t,n):t;var a=n.plainObjects?Object.create(null):{};var s=Object.keys(o);for(var c=0;c<s.length;++c){var u=s[c];var g=d(u,o[u],n,typeof t==="string");a=i.merge(a,g,n)}if(n.allowSparse===true){return a}return i.compact(a)}},13599:(t,r,n)=>{"use strict";var i=n(14334);var o=n(57154);var a=n(37864);var s=Object.prototype.hasOwnProperty;var c={brackets:function brackets(t){return t+"[]"},comma:"comma",indices:function indices(t,r){return t+"["+r+"]"},repeat:function repeat(t){return t}};var u=Array.isArray;var l=String.prototype.split;var d=Array.prototype.push;var pushToArray=function(t,r){d.apply(t,u(r)?r:[r])};var p=Date.prototype.toISOString;var g=a["default"];var v={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:o.encode,encodeValuesOnly:false,format:g,formatter:a.formatters[g],indices:false,serializeDate:function serializeDate(t){return p.call(t)},skipNulls:false,strictNullHandling:false};var E=function isNonNullishPrimitive(t){return typeof t==="string"||typeof t==="number"||typeof t==="boolean"||typeof t==="symbol"||typeof t==="bigint"};var S={};var w=function stringify(t,r,n,a,s,c,d,p,g,w,x,N,P,D,M,L){var U=t;var q=L;var B=0;var F=false;while((q=q.get(S))!==void undefined&&!F){var j=q.get(t);B+=1;if(typeof j!=="undefined"){if(j===B){throw new RangeError("Cyclic object value")}else{F=true}}if(typeof q.get(S)==="undefined"){B=0}}if(typeof p==="function"){U=p(r,U)}else if(U instanceof Date){U=x(U)}else if(n==="comma"&&u(U)){U=o.maybeMap(U,(function(t){if(t instanceof Date){return x(t)}return t}))}if(U===null){if(s){return d&&!D?d(r,v.encoder,M,"key",N):r}U=""}if(E(U)||o.isBuffer(U)){if(d){var H=D?r:d(r,v.encoder,M,"key",N);if(n==="comma"&&D){var z=l.call(String(U),",");var V="";for(var Y=0;Y<z.length;++Y){V+=(Y===0?"":",")+P(d(z[Y],v.encoder,M,"value",N))}return[P(H)+(a&&u(U)&&z.length===1?"[]":"")+"="+V]}return[P(H)+"="+P(d(U,v.encoder,M,"value",N))]}return[P(r)+"="+P(String(U))]}var G=[];if(typeof U==="undefined"){return G}var W;if(n==="comma"&&u(U)){W=[{value:U.length>0?U.join(",")||null:void undefined}]}else if(u(p)){W=p}else{var $=Object.keys(U);W=g?$.sort(g):$}var K=a&&u(U)&&U.length===1?r+"[]":r;for(var J=0;J<W.length;++J){var Z=W[J];var X=typeof Z==="object"&&typeof Z.value!=="undefined"?Z.value:U[Z];if(c&&X===null){continue}var Q=u(U)?typeof n==="function"?n(K,Z):K:K+(w?"."+Z:"["+Z+"]");L.set(t,B);var ee=i();ee.set(S,L);pushToArray(G,stringify(X,Q,n,a,s,c,d,p,g,w,x,N,P,D,M,ee))}return G};var x=function normalizeStringifyOptions(t){if(!t){return v}if(t.encoder!==null&&typeof t.encoder!=="undefined"&&typeof t.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var r=t.charset||v.charset;if(typeof t.charset!=="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var n=a["default"];if(typeof t.format!=="undefined"){if(!s.call(a.formatters,t.format)){throw new TypeError("Unknown format option provided.")}n=t.format}var i=a.formatters[n];var o=v.filter;if(typeof t.filter==="function"||u(t.filter)){o=t.filter}return{addQueryPrefix:typeof t.addQueryPrefix==="boolean"?t.addQueryPrefix:v.addQueryPrefix,allowDots:typeof t.allowDots==="undefined"?v.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel==="boolean"?t.charsetSentinel:v.charsetSentinel,delimiter:typeof t.delimiter==="undefined"?v.delimiter:t.delimiter,encode:typeof t.encode==="boolean"?t.encode:v.encode,encoder:typeof t.encoder==="function"?t.encoder:v.encoder,encodeValuesOnly:typeof t.encodeValuesOnly==="boolean"?t.encodeValuesOnly:v.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof t.serializeDate==="function"?t.serializeDate:v.serializeDate,skipNulls:typeof t.skipNulls==="boolean"?t.skipNulls:v.skipNulls,sort:typeof t.sort==="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling==="boolean"?t.strictNullHandling:v.strictNullHandling}};t.exports=function(t,r){var n=t;var o=x(r);var a;var s;if(typeof o.filter==="function"){s=o.filter;n=s("",n)}else if(u(o.filter)){s=o.filter;a=s}var l=[];if(typeof n!=="object"||n===null){return""}var d;if(r&&r.arrayFormat in c){d=r.arrayFormat}else if(r&&"indices"in r){d=r.indices?"indices":"repeat"}else{d="indices"}var p=c[d];if(r&&"commaRoundTrip"in r&&typeof r.commaRoundTrip!=="boolean"){throw new TypeError("`commaRoundTrip` must be a boolean, or absent")}var g=p==="comma"&&r&&r.commaRoundTrip;if(!a){a=Object.keys(n)}if(o.sort){a.sort(o.sort)}var v=i();for(var E=0;E<a.length;++E){var S=a[E];if(o.skipNulls&&n[S]===null){continue}pushToArray(l,w(n[S],S,p,g,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,v))}var N=l.join(o.delimiter);var P=o.addQueryPrefix===true?"?":"";if(o.charsetSentinel){if(o.charset==="iso-8859-1"){P+="utf8=%26%2310003%3B&"}else{P+="utf8=%E2%9C%93&"}}return N.length>0?P+N:""}},57154:(t,r,n)=>{"use strict";var i=n(37864);var o=Object.prototype.hasOwnProperty;var a=Array.isArray;var s=function(){var t=[];for(var r=0;r<256;++r){t.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase())}return t}();var c=function compactQueue(t){while(t.length>1){var r=t.pop();var n=r.obj[r.prop];if(a(n)){var i=[];for(var o=0;o<n.length;++o){if(typeof n[o]!=="undefined"){i.push(n[o])}}r.obj[r.prop]=i}}};var u=function arrayToObject(t,r){var n=r&&r.plainObjects?Object.create(null):{};for(var i=0;i<t.length;++i){if(typeof t[i]!=="undefined"){n[i]=t[i]}}return n};var l=function merge(t,r,n){if(!r){return t}if(typeof r!=="object"){if(a(t)){t.push(r)}else if(t&&typeof t==="object"){if(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r)){t[r]=true}}else{return[t,r]}return t}if(!t||typeof t!=="object"){return[t].concat(r)}var i=t;if(a(t)&&!a(r)){i=u(t,n)}if(a(t)&&a(r)){r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];if(a&&typeof a==="object"&&r&&typeof r==="object"){t[i]=merge(a,r,n)}else{t.push(r)}}else{t[i]=r}}));return t}return Object.keys(r).reduce((function(t,i){var a=r[i];if(o.call(t,i)){t[i]=merge(t[i],a,n)}else{t[i]=a}return t}),i)};var d=function assignSingleSource(t,r){return Object.keys(r).reduce((function(t,n){t[n]=r[n];return t}),t)};var decode=function(t,r,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1"){return i.replace(/%[0-9a-f]{2}/gi,unescape)}try{return decodeURIComponent(i)}catch(t){return i}};var p=function encode(t,r,n,o,a){if(t.length===0){return t}var c=t;if(typeof t==="symbol"){c=Symbol.prototype.toString.call(t)}else if(typeof t!=="string"){c=String(t)}if(n==="iso-8859-1"){return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}))}var u="";for(var l=0;l<c.length;++l){var d=c.charCodeAt(l);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||a===i.RFC1738&&(d===40||d===41)){u+=c.charAt(l);continue}if(d<128){u=u+s[d];continue}if(d<2048){u=u+(s[192|d>>6]+s[128|d&63]);continue}if(d<55296||d>=57344){u=u+(s[224|d>>12]+s[128|d>>6&63]+s[128|d&63]);continue}l+=1;d=65536+((d&1023)<<10|c.charCodeAt(l)&1023);u+=s[240|d>>18]+s[128|d>>12&63]+s[128|d>>6&63]+s[128|d&63]}return u};var g=function compact(t){var r=[{obj:{o:t},prop:"o"}];var n=[];for(var i=0;i<r.length;++i){var o=r[i];var a=o.obj[o.prop];var s=Object.keys(a);for(var u=0;u<s.length;++u){var l=s[u];var d=a[l];if(typeof d==="object"&&d!==null&&n.indexOf(d)===-1){r.push({obj:a,prop:l});n.push(d)}}}c(r);return t};var v=function isRegExp(t){return Object.prototype.toString.call(t)==="[object RegExp]"};var E=function isBuffer(t){if(!t||typeof t!=="object"){return false}return!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};var S=function combine(t,r){return[].concat(t,r)};var w=function maybeMap(t,r){if(a(t)){var n=[];for(var i=0;i<t.length;i+=1){n.push(r(t[i]))}return n}return r(t)};t.exports={arrayToObject:u,assign:d,combine:S,compact:g,decode:decode,encode:p,isBuffer:E,isRegExp:v,maybeMap:w,merge:l}},65278:(t,r,n)=>{t.exports=n(73837).deprecate},92707:t=>{var r=[];for(var n=0;n<256;++n){r[n]=(n+256).toString(16).substr(1)}function bytesToUuid(t,n){var i=n||0;var o=r;return[o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]]].join("")}t.exports=bytesToUuid},15859:(t,r,n)=>{var i=n(6113);t.exports=function nodeRNG(){return i.randomBytes(16)}},80824:(t,r,n)=>{var i=n(15859);var o=n(92707);function v4(t,r,n){var a=r&&n||0;if(typeof t=="string"){r=t==="binary"?new Array(16):null;t=null}t=t||{};var s=t.random||(t.rng||i)();s[6]=s[6]&15|64;s[8]=s[8]&63|128;if(r){for(var c=0;c<16;++c){r[a+c]=s[c]}}return r||o(s)}t.exports=v4},10183:(t,r,n)=>{var i=n(73837),o=n(71017),a=n(32081).spawn,log=function(){},s="HKLM",c="HKCU",u="HKCR",l="HKU",d="HKCC",p=[s,c,u,l,d],g="REG_SZ",v="REG_MULTI_SZ",E="REG_EXPAND_SZ",S="REG_DWORD",w="REG_QWORD",x="REG_BINARY",N="REG_NONE",P=[g,v,E,S,w,x,N],D="",M=/(\\[a-zA-Z0-9_\s]+)*/,L=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,U=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function ProcessUncleanExitError(t,r){if(!(this instanceof ProcessUncleanExitError))return new ProcessUncleanExitError(t,r);Error.captureStackTrace(this,ProcessUncleanExitError);this.__defineGetter__("name",(function(){return ProcessUncleanExitError.name}));this.__defineGetter__("message",(function(){return t}));this.__defineGetter__("code",(function(){return r}))}i.inherits(ProcessUncleanExitError,Error);function captureOutput(t){var r={stdout:"",stderr:""};t.stdout.on("data",(function(t){r["stdout"]+=t.toString()}));t.stderr.on("data",(function(t){r["stderr"]+=t.toString()}));return r}function mkErrorMsg(t,r,n){var o=n["stdout"].trim();var a=n["stderr"].trim();var s=i.format("%s command exited with code %d:\n%s\n%s",t,r,o,a);return new ProcessUncleanExitError(s,r)}function convertArchString(t){if(t=="x64"){return"64"}else if(t=="x86"){return"32"}else{throw new Error("illegal architecture: "+t+" (use x86 or x64)")}}function pushArch(t,r){if(r){t.push("/reg:"+convertArchString(r))}}function getRegExePath(){if(process.platform==="win32"){return o.join(process.env.windir,"system32","reg.exe")}else{return"REG"}}function RegistryItem(t,r,n,i,o,a,s){if(!(this instanceof RegistryItem))return new RegistryItem(t,r,n,i,o,a,s);var c=t,u=r,l=n,d=i,p=o,g=a,v=s;this.__defineGetter__("host",(function(){return c}));this.__defineGetter__("hive",(function(){return u}));this.__defineGetter__("key",(function(){return l}));this.__defineGetter__("name",(function(){return d}));this.__defineGetter__("type",(function(){return p}));this.__defineGetter__("value",(function(){return g}));this.__defineGetter__("arch",(function(){return v}))}i.inherits(RegistryItem,Object);function Registry(t){if(!(this instanceof Registry))return new Registry(t);var r=t||{},n=""+(r.host||""),i=""+(r.hive||s),o=""+(r.key||""),a=r.arch||null;this.__defineGetter__("host",(function(){return n}));this.__defineGetter__("hive",(function(){return i}));this.__defineGetter__("key",(function(){return o}));this.__defineGetter__("path",(function(){return(n.length==0?"":"\\\\"+n+"\\")+i+o}));this.__defineGetter__("arch",(function(){return a}));this.__defineGetter__("parent",(function(){var t=o.lastIndexOf("\\");return new Registry({host:this.host,hive:this.hive,key:t==-1?"":o.substring(0,t),arch:this.arch})}));if(p.indexOf(i)==-1)throw new Error("illegal hive specified.");if(!M.test(o))throw new Error("illegal key specified.");if(a&&a!="x64"&&a!="x86")throw new Error("illegal architecture specified (use x86 or x64)")}Registry.HKLM=s;Registry.HKCU=c;Registry.HKCR=u;Registry.HKU=l;Registry.HKCC=d;Registry.HIVES=p;Registry.REG_SZ=g;Registry.REG_MULTI_SZ=v;Registry.REG_EXPAND_SZ=E;Registry.REG_DWORD=S;Registry.REG_QWORD=w;Registry.REG_BINARY=x;Registry.REG_NONE=N;Registry.REG_TYPES=P;Registry.DEFAULT_VALUE=D;Registry.prototype.values=function values(t){if(typeof t!=="function")throw new TypeError("must specify a callback");var r=["QUERY",this.path];pushArch(r,this.arch);var n=a(getRegExePath(),r,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",o=this,s=null;var c=captureOutput(n);n.on("close",(function(r){if(s){return}else if(r!==0){log("process exited with code "+r);t(mkErrorMsg("QUERY",r,c),null)}else{var n=[],a=[],u=i.split("\n"),l=0;for(var d=0,p=u.length;d<p;d++){var g=u[d].trim();if(g.length>0){log(g);if(l!=0){n.push(g)}++l}}for(var d=0,p=n.length;d<p;d++){var v=U.exec(n[d]),E,S,w;if(v){E=v[1].trim();S=v[2].trim();w=v[3];a.push(new RegistryItem(o.host,o.hive,o.key,E,S,w,o.arch))}}t(null,a)}}));n.stdout.on("data",(function(t){i+=t.toString()}));n.on("error",(function(r){s=r;t(r)}));return this};Registry.prototype.keys=function keys(t){if(typeof t!=="function")throw new TypeError("must specify a callback");var r=["QUERY",this.path];pushArch(r,this.arch);var n=a(getRegExePath(),r,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",o=this,s=null;var c=captureOutput(n);n.on("close",(function(r){if(s){return}else if(r!==0){log("process exited with code "+r);t(mkErrorMsg("QUERY",r,c),null)}}));n.stdout.on("data",(function(t){i+=t.toString()}));n.stdout.on("end",(function(){var r=[],n=[],a=i.split("\n");for(var s=0,c=a.length;s<c;s++){var u=a[s].trim();if(u.length>0){log(u);r.push(u)}}for(var s=0,c=r.length;s<c;s++){var l=L.exec(r[s]),d,p;if(l){d=l[1];p=l[2];if(p&&p!==o.key){n.push(new Registry({host:o.host,hive:o.hive,key:p,arch:o.arch}))}}}t(null,n)}));n.on("error",(function(r){s=r;t(r)}));return this};Registry.prototype.get=function get(t,r){if(typeof r!=="function")throw new TypeError("must specify a callback");var n=["QUERY",this.path];if(t=="")n.push("/ve");else n=n.concat(["/v",t]);pushArch(n,this.arch);var i=a(getRegExePath(),n,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),o="",s=this,c=null;var u=captureOutput(i);i.on("close",(function(t){if(c){return}else if(t!==0){log("process exited with code "+t);r(mkErrorMsg("QUERY",t,u),null)}else{var n=[],i=null,a=o.split("\n"),l=0;for(var d=0,p=a.length;d<p;d++){var g=a[d].trim();if(g.length>0){log(g);if(l!=0){n.push(g)}++l}}var v=n[n.length-1]||"",E=U.exec(v),S,w,x;if(E){S=E[1].trim();w=E[2].trim();x=E[3];i=new RegistryItem(s.host,s.hive,s.key,S,w,x,s.arch)}r(null,i)}}));i.stdout.on("data",(function(t){o+=t.toString()}));i.on("error",(function(t){c=t;r(t)}));return this};Registry.prototype.set=function set(t,r,n,i){if(typeof i!=="function")throw new TypeError("must specify a callback");if(P.indexOf(r)==-1)throw Error("illegal type specified.");var o=["ADD",this.path];if(t=="")o.push("/ve");else o=o.concat(["/v",t]);o=o.concat(["/t",r,"/d",n,"/f"]);pushArch(o,this.arch);var s=a(getRegExePath(),o,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),c=null;var u=captureOutput(s);s.on("close",(function(t){if(c){return}else if(t!==0){log("process exited with code "+t);i(mkErrorMsg("ADD",t,u,null))}else{i(null)}}));s.stdout.on("data",(function(t){log(""+t)}));s.on("error",(function(t){c=t;i(t)}));return this};Registry.prototype.remove=function remove(t,r){if(typeof r!=="function")throw new TypeError("must specify a callback");var n=t?["DELETE",this.path,"/f","/v",t]:["DELETE",this.path,"/f","/ve"];pushArch(n,this.arch);var i=a(getRegExePath(),n,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),o=null;var s=captureOutput(i);i.on("close",(function(t){if(o){return}else if(t!==0){log("process exited with code "+t);r(mkErrorMsg("DELETE",t,s),null)}else{r(null)}}));i.stdout.on("data",(function(t){log(""+t)}));i.on("error",(function(t){o=t;r(t)}));return this};Registry.prototype.clear=function clear(t){if(typeof t!=="function")throw new TypeError("must specify a callback");var r=["DELETE",this.path,"/f","/va"];pushArch(r,this.arch);var n=a(getRegExePath(),r,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null;var o=captureOutput(n);n.on("close",(function(r){if(i){return}else if(r!==0){log("process exited with code "+r);t(mkErrorMsg("DELETE",r,o),null)}else{t(null)}}));n.stdout.on("data",(function(t){log(""+t)}));n.on("error",(function(r){i=r;t(r)}));return this};Registry.prototype.erase=Registry.prototype.clear;Registry.prototype.destroy=function destroy(t){if(typeof t!=="function")throw new TypeError("must specify a callback");var r=["DELETE",this.path,"/f"];pushArch(r,this.arch);var n=a(getRegExePath(),r,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null;var o=captureOutput(n);n.on("close",(function(r){if(i){return}else if(r!==0){log("process exited with code "+r);t(mkErrorMsg("DELETE",r,o),null)}else{t(null)}}));n.stdout.on("data",(function(t){log(""+t)}));n.on("error",(function(r){i=r;t(r)}));return this};Registry.prototype.create=function create(t){if(typeof t!=="function")throw new TypeError("must specify a callback");var r=["ADD",this.path,"/f"];pushArch(r,this.arch);var n=a(getRegExePath(),r,{cwd:undefined,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null;var o=captureOutput(n);n.on("close",(function(r){if(i){return}else if(r!==0){log("process exited with code "+r);t(mkErrorMsg("ADD",r,o),null)}else{t(null)}}));n.stdout.on("data",(function(t){log(""+t)}));n.on("error",(function(r){i=r;t(r)}));return this};Registry.prototype.keyExists=function keyExists(t){this.values((function(r,n){if(r){if(r.code==1){return t(null,false)}return t(r)}t(null,true)}));return this};Registry.prototype.valueExists=function valueExists(t,r){this.get(t,(function(t,n){if(t){if(t.code==1){return r(null,false)}return r(t)}r(null,true)}));return this};t.exports=Registry},61917:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});r.SqlPackageAction=r.ActionType=void 0;const u=a(n(71017));const l=a(n(42186));const d=a(n(71514));const p=c(n(63314));const g=c(n(50336));const v=c(n(82682));const E=c(n(83475));var S;(function(t){t[t["DacpacAction"]=0]="DacpacAction";t[t["SqlAction"]=1]="SqlAction";t[t["BuildAndPublish"]=2]="BuildAndPublish"})(S=r.ActionType||(r.ActionType={}));var w;(function(t){t[t["Publish"]=0]="Publish";t[t["Extract"]=1]="Extract";t[t["Export"]=2]="Export";t[t["Import"]=3]="Import";t[t["DriftReport"]=4]="DriftReport";t[t["DeployReport"]=5]="DeployReport";t[t["Script"]=6]="Script"})(w=r.SqlPackageAction||(r.SqlPackageAction={}));class AzureSqlAction{constructor(t){this._inputs=t}execute(){return s(this,void 0,void 0,(function*(){if(this._inputs.actionType===S.DacpacAction){yield this._executeDacpacAction(this._inputs)}else if(this._inputs.actionType===S.SqlAction){yield this._executeSqlFile(this._inputs)}else if(this._inputs.actionType===S.BuildAndPublish){const t=this._inputs;const r=yield this._executeBuildProject(t);const n={actionType:S.DacpacAction,connectionConfig:t.connectionConfig,filePath:r,additionalArguments:t.additionalArguments,sqlpackageAction:t.sqlpackageAction};yield this._executeDacpacAction(n)}else{throw new Error(`Invalid AzureSqlAction '${this._inputs.actionType}'.`)}}))}_executeDacpacAction(t){return s(this,void 0,void 0,(function*(){l.debug("Begin executing sqlpackage");let r=yield p.default.getSqlPackagePath();let n=this._getSqlPackageArguments(t);yield d.exec(`"${r}" ${n}`);console.log(`Successfully executed action ${w[t.sqlpackageAction]} on target database.`)}))}_executeSqlFile(t){return s(this,void 0,void 0,(function*(){l.debug("Begin executing sql script");let r=E.default.buildSqlCmdCallWithConnectionInfo(t.connectionConfig.Config);r+=` -i "${t.filePath}"`;if(!!t.additionalArguments){r+=` ${t.additionalArguments}`}yield d.exec(r);console.log(`Successfully executed SQL file on target database.`)}))}_executeBuildProject(t){var r,n;return s(this,void 0,void 0,(function*(){l.debug("Begin building project");const i=u.basename(t.filePath,v.default.sqlprojExtension);const o=(r=t.buildArguments)!==null&&r!==void 0?r:"";const a=yield g.default.parseCommandArguments(o);let s="";const c=yield g.default.findArgument(a,"--output","-o");if(c){s=c}else{const r=(n=yield g.default.findArgument(a,"--configuration","-c"))!==null&&n!==void 0?n:"Debug";s=u.join(u.dirname(t.filePath),"bin",r)}yield d.exec(`dotnet build "${t.filePath}" -p:NetCoreBuild=true ${o}`);const p=u.join(s,i+v.default.dacpacExtension);console.log(`Successfully built database project to ${p}`);return p}))}_getSqlPackageArguments(t){let r="";switch(t.sqlpackageAction){case w.Publish:case w.Script:case w.DeployReport:r+=`/Action:${w[t.sqlpackageAction]} /TargetConnectionString:"${t.connectionConfig.ConnectionString}" /SourceFile:"${t.filePath}"`;break;case w.DriftReport:r+=`/Action:${w[t.sqlpackageAction]} /TargetConnectionString:"${t.connectionConfig.ConnectionString}"`;break;default:throw new Error(`Not supported SqlPackage action: '${w[t.sqlpackageAction]}'`)}if(!!t.additionalArguments){r+=" "+t.additionalArguments}return r}}r["default"]=AzureSqlAction},63314:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const u=a(n(42186));const l=a(n(71514));const d=a(n(71017));const p=a(n(57147));const g=a(n(38211));const v=c(n(10183));const E=n(61917);const S=process.platform==="win32";const w=process.platform==="linux";class AzureSqlActionHelper{static getSqlPackagePath(){return s(this,void 0,void 0,(function*(){if(!!this._sqlPackagePath){u.debug(`Return the cached path of SqlPackage executable: ${this._sqlPackagePath}`);return this._sqlPackagePath}if(S){this._sqlPackagePath=yield this._getSqlPackageExecutablePath()}else if(w){this._sqlPackagePath=this._getSqlPackageBinaryPathLinux()}else{this._sqlPackagePath=this._getSqlPackageBinaryPathMac()}return this._sqlPackagePath}))}static getRegistrySubKeys(t){return new Promise((r=>{u.debug(`Getting sub-keys at registry path: HKLM:${t}`);let n=new v.default({hive:v.default.HKLM,key:t});n.keys(((t,n)=>!!t?"":r(n)))}))}static getRegistryValue(t,r){return new Promise((n=>{u.debug(`Getting registry value ${r} at path: HKLM:${t.key}`);t.get(r,((t,r)=>{n(!!t?"":r.value)}))}))}static registryKeyExists(t){u.debug(`Checking if registry key 'HKLM:${t}' exists.`);return new Promise((r=>{let n=new v.default({hive:v.default.HKLM,key:t});n.keyExists(((t,n)=>{r(!!t?false:n)}))}))}static resolveFilePath(t){let r=t;if(g.hasMagic(t)){let n=g.sync(t);if(n.length===0){throw new Error(`No files found matching pattern ${t}`)}if(n.length>1){throw new Error(`Muliple files found matching pattern ${t}`)}r=n[0]}if(!p.existsSync(r)){throw new Error(`Unable to find file at location: ${r}`)}return r}static getSqlpackageActionTypeFromString(t){if(!t){return E.SqlPackageAction.Publish}switch(t.trim().toLowerCase()){case"publish":return E.SqlPackageAction.Publish;case"driftreport":return E.SqlPackageAction.DriftReport;case"deployreport":return E.SqlPackageAction.DeployReport;case"script":return E.SqlPackageAction.Script;default:throw new Error(`Action ${t} is invalid. Supported action types are: Publish, Script, DriftReport, or DeployReport.`)}}static _getSqlPackageExecutablePath(){return s(this,void 0,void 0,(function*(){u.debug("Getting location of SQLPackage.exe");let t=yield this._getSqlPackageInstalledWithSSMS();u.debug(t.toString());let r=yield this._getSqlPackageInstalledWithDacMsi();u.debug(r.toString());let n=yield this._getSqlPackageInstalledWithSSDT();u.debug(n.toString());let i=Math.max(t[1],r[1],n[1]);let o="";if(i===t[1]){o=t[0]}else if(i===r[1]){o=r[0]}else if(i===n[1]){o=n[0]}if(!o){throw new Error("Unable to find the location of SqlPackage.exe")}u.debug(`SqlPackage.exe found at location: ${o}`);return o}))}static _getSqlPackageInstalledWithSSDT(){return s(this,void 0,void 0,(function*(){let t=yield this._getLatestVisualStudioInstallationPath();if(!!t){let r=d.join(t,"Common7","IDE","Extensions","Microsoft","SQLDB","DAC");let n=this._getSqlPackageInVSDacDirectory(r);if(!!n[0]){return n}}let r=d.join("\\","SOFTWARE","Microsoft","VisualStudio");let n=d.join("\\","SOFTWARE","Wow6432Node","Microsoft","VisualStudio");if(!(yield AzureSqlActionHelper.registryKeyExists(r))){r=n;if(!(yield AzureSqlActionHelper.registryKeyExists(r))){return["",0]}}let i=yield AzureSqlActionHelper.getRegistrySubKeys(r);let o=this._getVersionsRegistryKeys(i);for(let t of o){let r=yield AzureSqlActionHelper.getRegistryValue(t,"InstallDir");let n=d.join(r,"Common7","IDE","Extensions","Microsoft","SQLDB","DAC");let i=this._getSqlPackageInVSDacDirectory(n);if(!!i[0]){return i}}u.debug("Dac Framework (installed with Visual Studio) not found on machine.");return["",0]}))}static _getSqlPackageInVSDacDirectory(t){if(p.existsSync(t)){let r=p.readdirSync(t).filter((t=>!isNaN(d.basename(t)))).sort(((t,r)=>{let n=d.basename(t);let i=d.basename(r);if(n>i){return-1}else if(n<i){return 1}else{return 0}})).map((r=>d.join(t,r)));for(let t of r){let r=d.join(t,"SqlPackage.exe");if(p.existsSync(r)){u.debug(`Dac Framework installed with Visual Studio found at ${r}`);return[r,parseInt(d.basename(t))]}}}return["",0]}static _getLatestVisualStudioInstallationPath(){return s(this,void 0,void 0,(function*(){let t=d.join(process.env["ProgramFiles(x86)"],"Microsoft Visual Studio","Installer","vswhere.exe");let r="";try{yield l.exec(`"${t}"`,["-latest","-format","json"],{silent:true,listeners:{stdout:t=>r+=t.toString()}})}catch(t){u.debug(`Unable to find the location of latest Visual Studio Installation path using vswhere.exe. ${t}`);return""}u.debug(r);let n=JSON.parse(r);return n[0]&&n[0]["installationPath"]}))}static _getSqlPackageInstalledWithDacMsi(){return s(this,void 0,void 0,(function*(){let t=d.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server","Data-Tier Application Framework");let r=d.join("\\","SOFTWARE","Wow6432Node","Microsoft","Microsoft SQL Server","Data-Tier Application Framework");if(!(yield AzureSqlActionHelper.registryKeyExists(t))){t=r;if(!(yield AzureSqlActionHelper.registryKeyExists(t))){return["",0]}}let n=yield AzureSqlActionHelper.getRegistrySubKeys(t);let i=this._getVersionsRegistryKeys(n);for(let t of i){let r=yield AzureSqlActionHelper.getRegistryValue(t,"InstallDir");if(!!r){let n=d.join(r,"SqlPackage.exe");if(p.existsSync(n)){u.debug(`SQLPackage.exe (installed with DacFramework) found at location: ${n}`);return[n,parseInt(t.key.split("\\").slice(-1)[0])]}}}return["",0]}))}static _getSqlPackageInstalledWithSSMS(){return s(this,void 0,void 0,(function*(){let t=d.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server");let r=d.join("\\","SOFTWARE","Wow6432Node","Microsoft","Microsoft SQL Server");if(!(yield AzureSqlActionHelper.registryKeyExists(t))){t=r;if(!(yield AzureSqlActionHelper.registryKeyExists(t))){return["",0]}}let n=yield AzureSqlActionHelper.getRegistrySubKeys(t);let i=this._getVersionsRegistryKeys(n);for(let t of i){let r=yield AzureSqlActionHelper.getRegistryValue(t,"VerSpecificRootDir");if(!!r){let n=d.join(r,"Dac","bin","SqlPackage.exe");if(p.existsSync(n)){u.debug(`SqlPackage.exe (installed with SSMS) found at location: ${n}`);return[n,parseInt(t.key.split("\\").slice(-1)[0])]}}}return["",0]}))}static _getVersionsRegistryKeys(t){return t.filter((t=>!isNaN(t.key.split("\\").slice(-1)[0]))).sort(((t,r)=>{let n=parseInt(t.key.split("\\").slice(-1)[0]);let i=parseInt(r.key.split("\\").slice(-1)[0]);if(n>i){return-1}else if(n<i){return 1}else{return 0}}))}static _getSqlPackageBinaryPathLinux(){return"sqlpackage"}static _getSqlPackageBinaryPathMac(){throw new Error("This action is not supported on a Mac environment.")}}r["default"]=AzureSqlActionHelper;AzureSqlActionHelper._sqlPackagePath=""},51945:function(t,r,n){"use strict";var i=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const o=n(15570);const a="2021-11-01";class AzureSqlResourceManager{constructor(t){this._authorizer=t;this._restClient=new o.ServiceClient(t)}static getResourceManager(t,r){return i(this,void 0,void 0,(function*(){let n=new AzureSqlResourceManager(r);yield n._populateSqlServerData(t);return n}))}getSqlServer(){return this._resource}addFirewallRule(t,r){return i(this,void 0,void 0,(function*(){let n=new Date;let i=`ClientIPAddress_${n.getFullYear()}-${n.getMonth()}-${n.getDay()}_${t}`;let s={method:"PUT",uri:this._restClient.getRequestUri(`/${this._resource.id}/firewallRules/${i}`,{},[],a),body:JSON.stringify({properties:{startIpAddress:t,endIpAddress:r}})};try{let t=yield this._restClient.beginRequest(s);if(t.statusCode!==200&&t.statusCode!==201){throw(0,o.ToError)(t)}return t.body}catch(t){if(t instanceof o.AzureError){throw new Error(JSON.stringify(t))}throw t}}))}removeFirewallRule(t){return i(this,void 0,void 0,(function*(){let r={method:"DELETE",uri:this._restClient.getRequestUri(`/${this._resource.id}/firewallRules/${t.name}`,{},[],a)};try{let t=yield this._restClient.beginRequest(r);if(t.statusCode!==200&&t.statusCode!==204){throw(0,o.ToError)(t)}}catch(t){if(t instanceof o.AzureError){throw new Error(JSON.stringify(t))}throw t}}))}_populateSqlServerData(t){return i(this,void 0,void 0,(function*(){let r=this._authorizer.getCloudSuffixUrl("sqlServerHostname");if(t.endsWith(r)){t=t.slice(0,t.lastIndexOf(r))}let n={method:"GET",uri:this._restClient.getRequestUri("//subscriptions/{subscriptionId}/providers/Microsoft.Sql/servers",{},[],a)};try{let r=yield this._restClient.beginRequest(n);if(r.statusCode!==200){throw(0,o.ToError)(r)}let i=r.body&&r.body.value;if(i&&i.length>0){this._resource=i.filter((r=>r.name===t))[0];if(!this._resource){throw new Error(`Unable to get details of SQL server ${t}. Sql server '${t}' was not found in the subscription ${this._authorizer.subscriptionID}.`)}}else{throw new Error(`Unable to get details of SQL server ${t}. No SQL servers were found in the subscription ${this._authorizer.subscriptionID}.`)}}catch(t){if(t instanceof o.AzureError){throw new Error(JSON.stringify(t))}throw t}}))}}r["default"]=AzureSqlResourceManager},82682:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});class Constants{}r["default"]=Constants;Constants.ipv4MatchPattern=/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/;Constants.connectionStringTester=/^[;\s]*([\w\s]+=(?:('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*)))(;[;\s]*([\w\s]+=(?:('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*))))*[;\s]*$/;Constants.connectionStringParserRegex=/(?<key>[\w\s]+)=(?<val>('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*))/g;Constants.dacpacExtension=".dacpac";Constants.sqlFileExtension=".sql";Constants.sqlprojExtension=".sqlproj";Constants.sqlcmdPasswordEnvVarName="SQLCMDPASSWORD"},50336:function(t,r){"use strict";var n=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});class DotnetUtils{static parseCommandArguments(t){return n(this,void 0,void 0,(function*(){let r={};const n=t.match(/(\-\-?[A-Za-z\-]+(?:$|\s+)(?:[^\s"'\-]+|"[^"]*"|'[^']*')?)/g);n===null||n===void 0?void 0:n.forEach((t=>{const n=t.trim().indexOf(" ");if(n>=0){const i=t.substring(0,n);const o=t.substring(n).trim();r[i]=o}else{r[t]=undefined}}));return r}))}static findArgument(t,r,i){var o;return n(this,void 0,void 0,(function*(){return(o=t[r])!==null&&o!==void 0?o:i?t[i]:undefined}))}}r["default"]=DotnetUtils},10315:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:true});const c=a(n(42186));class FirewallManager{constructor(t){this._resourceManager=t}addFirewallRule(t){return s(this,void 0,void 0,(function*(){if(!t){c.debug(`Client has access to Sql server. Skip adding firewall exception.`);return}console.log(`Client does not have access to server. Adding firewall exception for client's IP address.`);this._firewallRule=yield this._resourceManager.addFirewallRule(t,t);c.debug(JSON.stringify(this._firewallRule));console.log(`Successfully added firewall rule ${this._firewallRule.name}.`)}))}removeFirewallRule(){return s(this,void 0,void 0,(function*(){if(this._firewallRule){console.log(`Removing firewall rule '${this._firewallRule.name}'.`);yield this._resourceManager.removeFirewallRule(this._firewallRule);console.log("Successfully removed firewall rule.")}}))}}r["default"]=FirewallManager},95490:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});r.sqlcmdVersion=r.sqlcmdToolName=void 0;const u=a(n(42186));const l=a(n(27784));const d=a(n(71017));const p=c(n(80824));r.sqlcmdToolName="go-sqlcmd";r.sqlcmdVersion="1.0.0";class Setup{static setupSqlcmd(){return s(this,void 0,void 0,(function*(){let t=l.find(r.sqlcmdToolName,r.sqlcmdVersion);if(!t){const n=yield this.downloadAndExtractSqlcmd();t=yield l.cacheDir(n,r.sqlcmdToolName,r.sqlcmdVersion)}u.addPath(t)}))}static downloadAndExtractSqlcmd(){return s(this,void 0,void 0,(function*(){let t;switch(process.platform){case"linux":t=yield l.downloadTool(`https://github.com/microsoft/go-sqlcmd/releases/download/v${r.sqlcmdVersion}/sqlcmd-v${r.sqlcmdVersion}-linux-x64.tar.bz2`);return yield l.extractTar(t,undefined,"xj");case"win32":const n=d.join(process.env["RUNNER_TEMP"]||"",(0,p.default)()+".zip");t=yield l.downloadTool(`https://github.com/microsoft/go-sqlcmd/releases/download/v${r.sqlcmdVersion}/sqlcmd-v${r.sqlcmdVersion}-windows-x64.zip`,n);return yield l.extractZip(t);default:throw new Error(`Runner OS is not supported: ${process.platform}`)}}))}}r["default"]=Setup},62274:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const c=a(n(42186));const u=n(25018);const l=s(n(82682));class SqlConnectionConfig{constructor(t){this._validateConnectionString(t);this._connectionString=t;this._connectionConfig=u.ConnectionPool.parseConnectionString(t);this._maskSecrets();this._setAuthentication();this._validateconfig()}get Config(){return this._connectionConfig}get ConnectionString(){return this._connectionString}_validateConnectionString(t){if(!l.default.connectionStringTester.test(t)){throw new Error("Invalid connection string. A valid connection string is a series of keyword/value pairs separated by semi-colons. If there are any special characters like quotes or semi-colons in the keyword value, enclose the value within quotes. Refer to this link for more info on connection string https://aka.ms/sqlconnectionstring")}}_maskSecrets(){if(this._connectionConfig.user){c.setSecret(this._connectionConfig.user)}if(this._connectionConfig.password){c.setSecret(this._connectionConfig.password)}}_validateconfig(){var t,r,n,i;if(!this._connectionConfig.server){throw new Error(`Invalid connection string. Please ensure 'Server' or 'Data Source' is provided in the connection string.`)}if(!this._connectionConfig.database){throw new Error(`Invalid connection string. Please ensure 'Database' or 'Initial Catalog' is provided in the connection string.`)}const o=this._connectionConfig["authentication"];switch(o===null||o===void 0?void 0:o.type){case undefined:{if(!this._connectionConfig.user){throw new Error(`Invalid connection string. Please ensure 'User' or 'User ID' is provided in the connection string.`)}if(!this._connectionConfig.password){throw new Error(`Invalid connection string. Please ensure 'Password' is provided in the connection string.`)}break}case"azure-active-directory-password":{if(!((t=o.options)===null||t===void 0?void 0:t.userName)){throw new Error(`Invalid connection string. Please ensure 'User' or 'User ID' is provided in the connection string.`)}if(!((r=o.options)===null||r===void 0?void 0:r.password)){throw new Error(`Invalid connection string. Please ensure 'Password' is provided in the connection string.`)}break}case"azure-active-directory-service-principal-secret":{if(!((n=o.options)===null||n===void 0?void 0:n.clientId)){throw new Error(`Invalid connection string. Please ensure client ID is provided in the 'User' or 'User ID' field of the connection string.`)}if(!((i=o.options)===null||i===void 0?void 0:i.clientSecret)){throw new Error(`Invalid connection string. Please ensure client secret is provided in the 'Password' field of the connection string.`)}break}}}_setAuthentication(){const t=Array.from(this._connectionString.matchAll(l.default.connectionStringParserRegex));const r=this._findInConnectionString(t,"authentication");if(!r){return}switch(r.replace(/\s/g,"").toLowerCase()){case"sqlpassword":{break}case"activedirectorypassword":{this._connectionConfig["authentication"]={type:"azure-active-directory-password",options:{userName:this._connectionConfig.user,password:this._connectionConfig.password}};break}case"activedirectorydefault":{this._connectionConfig["authentication"]={type:"azure-active-directory-default"};break}case"activedirectoryserviceprincipal":{this._connectionConfig["authentication"]={type:"azure-active-directory-service-principal-secret",options:{clientId:this._connectionConfig.user,clientSecret:this._connectionConfig.password}};break}default:{throw new Error(`Authentication type '${r}' is not supported.`)}}}_findInConnectionString(t,r){for(const n of t){if(n.groups){const t=n.groups.key.replace(/\s/g,"");r=r.replace(/\s/g,"");if(t.toLowerCase()===r.toLowerCase()){let t=n.groups.val;if(t[0]==="'"){t=t.slice(1,-1);t=t.replace(/''/g,"'")}else if(t[0]==='"'){t=t.slice(1,-1);t=t.replace(/""/g,'"')}return t}}}return undefined}}r["default"]=SqlConnectionConfig},83475:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const u=a(n(42186));const l=a(n(71514));const d=c(n(82682));class SqlUtils{static detectIPAddress(t){return s(this,void 0,void 0,(function*(){let r=yield this.tryConnection(t,true);if(r.success){return""}else if(r.ipAddress){return r.ipAddress}r=yield this.tryConnection(t,false);if(r.success){return""}else if(r.ipAddress){return r.ipAddress}else{throw new Error(`Failed to add firewall rule. Unable to detect client IP Address. ${r.errorMessage}`)}}))}static tryConnection(t,r){return s(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(t.Config));if(r){n.database="master"}let i="";try{u.debug(`Validating if client has access to '${n.database}' on '${n.server}'.`);let t=this.buildSqlCmdCallWithConnectionInfo(n);t+=` -Q "SELECT 'Validating connection from GitHub SQL Action'"`;yield l.exec(t,[],{silent:true,listeners:{stderr:t=>i+=t.toString(),stdout:t=>i+=t.toString()}});return{success:true}}catch(t){console.log(`${t.message}`);console.log(`SqlCmd stderr: ${i}`);return{success:false,errorMessage:i,ipAddress:this.parseErrorForIpAddress(i)}}}))}static parseErrorForIpAddress(t){let r;const n=t.match(d.default.ipv4MatchPattern);if(!!n){r=n[0]}return r}static buildSqlCmdCallWithConnectionInfo(t){var r;let n;switch(process.platform){case"win32":n="sqlcmd.exe";break;case"linux":case"darwin":n="sqlcmd";break;default:throw new Error(`Platform ${process.platform} is not supported.`)}let i=`"${n}" -S ${t.server},${(r=t.port)!==null&&r!==void 0?r:1433} -d ${t.database}`;const o=t["authentication"];switch(o===null||o===void 0?void 0:o.type){case undefined:i+=` -U "${t.user}"`;u.exportVariable(d.default.sqlcmdPasswordEnvVarName,t.password);break;case"azure-active-directory-default":i+=` --authentication-method=ActiveDirectoryDefault`;break;case"azure-active-directory-password":i+=` --authentication-method=ActiveDirectoryPassword -U "${o.options.userName}"`;u.exportVariable(d.default.sqlcmdPasswordEnvVarName,o.options.password);break;case"azure-active-directory-service-principal-secret":i+=` --authentication-method=ActiveDirectoryServicePrincipal -U "${t.user}"`;u.exportVariable(d.default.sqlcmdPasswordEnvVarName,o.options.clientSecret);break;default:throw new Error(`Authentication type ${o.type} is not supported.`)}return i}}r["default"]=SqlUtils},70399:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;Object.defineProperty(t,i,{enumerable:true,get:function(){return r[n]}})}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};var s=this&&this.__awaiter||function(t,r,n,i){function adopt(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(t){try{step(i.next(t))}catch(t){o(t)}}function rejected(t){try{step(i["throw"](t))}catch(t){o(t)}}function step(t){t.done?n(t.value):adopt(t.value).then(fulfilled,rejected)}step((i=i.apply(t,r||[])).next())}))};var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});const u=a(n(42186));const l=a(n(6113));const d=a(n(71017));const p=n(88510);const g=a(n(61917));const v=c(n(51945));const E=c(n(10315));const S=c(n(63314));const w=c(n(62274));const x=c(n(83475));const N=c(n(82682));const P=c(n(95490));const D=!!process.env.AZURE_HTTP_USER_AGENT?`${process.env.AZURE_HTTP_USER_AGENT}`:"";function run(){return s(this,void 0,void 0,(function*(){yield P.default.setupSqlcmd();let t;try{setUserAgentVariable();const r=getInputs();const n=new g.default(r);const i=yield x.default.detectIPAddress(r.connectionConfig);if(i){let n=yield p.AuthorizerFactory.getAuthorizer();let o=yield v.default.getResourceManager(r.connectionConfig.Config.server,n);t=new E.default(o);yield t.addFirewallRule(i)}yield n.execute()}catch(t){u.setFailed(t.message)}finally{if(t){yield t.removeFirewallRule()}u.exportVariable("AZURE_HTTP_USER_AGENT",D)}}))}r["default"]=run;function setUserAgentVariable(){const t=l.createHash("sha256").update(`${process.env.GITHUB_REPOSITORY}`).digest("hex");const r="AzureSqlAction";const n=(!!D?`${D}+`:"")+`GITHUBACTIONS_${r}_${t}`;u.exportVariable("AZURE_HTTP_USER_AGENT",n)}function getInputs(){u.debug("Get action inputs.");const t=u.getInput("connection-string",{required:true});const r=new w.default(t);let n=u.getInput("path",{required:true});n=S.default.resolveFilePath(n);const i=u.getInput("action");switch(d.extname(n).toLowerCase()){case N.default.sqlFileExtension:return{actionType:g.ActionType.SqlAction,connectionConfig:r,filePath:n,additionalArguments:u.getInput("arguments")||undefined};case N.default.dacpacExtension:if(!i){throw new Error("The action input must be specified when using a .dacpac file.")}return{actionType:g.ActionType.DacpacAction,connectionConfig:r,filePath:n,sqlpackageAction:S.default.getSqlpackageActionTypeFromString(i),additionalArguments:u.getInput("arguments")||undefined};case N.default.sqlprojExtension:if(!i){throw new Error("The action input must be specified when using a .sqlproj file.")}return{actionType:g.ActionType.BuildAndPublish,connectionConfig:r,filePath:n,buildArguments:u.getInput("build-arguments")||undefined,sqlpackageAction:S.default.getSqlpackageActionTypeFromString(i),additionalArguments:u.getInput("arguments")||undefined};break;default:throw new Error(`Invalid file type provided as input ${n}. File must be a .sql, .dacpac, or .sqlproj file.`)}}run()},39491:t=>{"use strict";t.exports=require("assert")},14300:t=>{"use strict";t.exports=require("buffer")},32081:t=>{"use strict";t.exports=require("child_process")},22057:t=>{"use strict";t.exports=require("constants")},6113:t=>{"use strict";t.exports=require("crypto")},71891:t=>{"use strict";t.exports=require("dgram")},9523:t=>{"use strict";t.exports=require("dns")},82361:t=>{"use strict";t.exports=require("events")},57147:t=>{"use strict";t.exports=require("fs")},73292:t=>{"use strict";t.exports=require("fs/promises")},13685:t=>{"use strict";t.exports=require("http")},95687:t=>{"use strict";t.exports=require("https")},41808:t=>{"use strict";t.exports=require("net")},22037:t=>{"use strict";t.exports=require("os")},71017:t=>{"use strict";t.exports=require("path")},85477:t=>{"use strict";t.exports=require("punycode")},12781:t=>{"use strict";t.exports=require("stream")},71576:t=>{"use strict";t.exports=require("string_decoder")},39512:t=>{"use strict";t.exports=require("timers")},24404:t=>{"use strict";t.exports=require("tls")},76224:t=>{"use strict";t.exports=require("tty")},57310:t=>{"use strict";t.exports=require("url")},73837:t=>{"use strict";t.exports=require("util")},59796:t=>{"use strict";t.exports=require("zlib")},80233:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Array%");var a=!o.isArray&&n(28803)("Object.prototype.toString");t.exports=o.isArray||function IsArray(t){return a(t)==="[object Array]"}},1605:(t,r,n)=>{"use strict";var i=n(74538);var o=n(56264);var a=n(43868);var s=n(4640);var c=n(97176);var u=i("%TypeError%");t.exports=function AdvanceStringIndex(t,r,n){if(s(t)!=="String"){throw new u("Assertion failed: `S` must be a String")}if(!a(r)||r<0||r>c){throw new u("Assertion failed: `length` must be an integer >= 0 and <= 2**53")}if(s(n)!=="Boolean"){throw new u("Assertion failed: `unicode` must be a Boolean")}if(!n){return r+1}var i=t.length;if(r+1>=i){return r+1}var l=o(t,r);return r+l["[[CodeUnitCount]]"]}},99933:(t,r,n)=>{"use strict";var i=n(74538);var o=n(28803);var a=i("%TypeError%");var s=n(47224);var c=i("%Reflect.apply%",true)||o("%Function.prototype.apply%");t.exports=function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!s(n)){throw new a("Assertion failed: optional `argumentsList`, if provided, must be a List")}return c(t,r,n)}},56264:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(28803);var s=n(648);var c=n(12088);var u=n(4640);var l=n(26055);var d=a("String.prototype.charAt");var p=a("String.prototype.charCodeAt");t.exports=function CodePointAt(t,r){if(u(t)!=="String"){throw new o("Assertion failed: `string` must be a String")}var n=t.length;if(r<0||r>=n){throw new o("Assertion failed: `position` must be >= 0, and < the length of `string`")}var i=p(t,r);var a=d(t,r);var g=s(i);var v=c(i);if(!g&&!v){return{"[[CodePoint]]":a,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":false}}if(v||r+1===n){return{"[[CodePoint]]":a,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":true}}var E=p(t,r+1);if(!c(E)){return{"[[CodePoint]]":a,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":true}}return{"[[CodePoint]]":l(i,E),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":false}}},98524:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(32705);var s=n(74016);var c=n(83258);var u=n(97837);var l=n(75994);var d=n(70440);var p=n(74178);var g=n(4640);t.exports=function CreateDataProperty(t,r,n){if(g(t)!=="Object"){throw new o("Assertion failed: Type(O) is not Object")}if(!d(r)){throw new o("Assertion failed: IsPropertyKey(P) is not true")}var i=c(t,r);var v=!i||l(t);var E=i&&!i["[[Configurable]]"];if(E||!v){return false}return a(u,p,s,t,r,{"[[Configurable]]":true,"[[Enumerable]]":true,"[[Value]]":n,"[[Writable]]":true})}},10013:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(98524);var s=n(70440);var c=n(4640);t.exports=function CreateDataPropertyOrThrow(t,r,n){if(c(t)!=="Object"){throw new o("Assertion failed: Type(O) is not Object")}if(!s(r)){throw new o("Assertion failed: IsPropertyKey(P) is not true")}var i=a(t,r,n);if(!i){throw new o("unable to create data property")}return i}},49014:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(32705);var s=n(74016);var c=n(97837);var u=n(70440);var l=n(74178);var d=n(4640);t.exports=function CreateMethodProperty(t,r,n){if(d(t)!=="Object"){throw new o("Assertion failed: Type(O) is not Object")}if(!u(r)){throw new o("Assertion failed: IsPropertyKey(P) is not true")}var i={"[[Configurable]]":true,"[[Enumerable]]":false,"[[Value]]":n,"[[Writable]]":true};return a(c,l,s,t,r,i)}},74016:(t,r,n)=>{"use strict";var i=n(32583);var o=n(68405);var a=n(4640);t.exports=function FromPropertyDescriptor(t){if(typeof t!=="undefined"){i(a,"Property Descriptor","Desc",t)}return o(t)}},43705:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(20504);var s=n(70440);var c=n(4640);t.exports=function Get(t,r){if(c(t)!=="Object"){throw new o("Assertion failed: Type(O) is not Object")}if(!s(r)){throw new o("Assertion failed: IsPropertyKey(P) is not true, got "+a(r))}return t[r]}},12192:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=i("%Symbol.asyncIterator%",true);var s=n(20504);var c=n(40587)();var u=n(37111);var l=n(1605);var d=n(99933);var p=n(97039);var g=n(47224);var v=n(4640);t.exports=function GetIterator(t,r,n){var i=r;if(arguments.length<2){i="sync"}if(i!=="sync"&&i!=="async"){throw new o("Assertion failed: `hint` must be one of 'sync' or 'async', got "+s(r))}var E=n;if(arguments.length<3){if(i==="async"){if(c&&a){E=p(t,a)}if(E===undefined){throw new o("async from sync iterators aren't currently supported")}}else{E=u({AdvanceStringIndex:l,GetMethod:p,IsArray:g},t)}}var S=d(E,t);if(v(S)!=="Object"){throw new o("iterator must return an object")}return S}},97039:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(37042);var s=n(8626);var c=n(70440);t.exports=function GetMethod(t,r){if(!c(r)){throw new o("Assertion failed: IsPropertyKey(P) is not true")}var n=a(t,r);if(n==null){return void 0}if(!s(n)){throw new o(r+"is not a function")}return n}},37042:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(70440);var s=n(90789);t.exports=function GetV(t,r){if(!a(r)){throw new o("Assertion failed: IsPropertyKey(P) is not true")}var n=s(t);return n[r]}},225:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(99933);var s=n(47224);var c=n(37042);var u=n(70440);t.exports=function Invoke(t,r){if(!u(r)){throw new o("Assertion failed: P must be a Property Key")}var n=arguments.length>2?arguments[2]:[];if(!s(n)){throw new o("Assertion failed: optional `argumentsList`, if provided, must be a List")}var i=c(t,r);return a(i,t,n)}},47224:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Array%");var a=!o.isArray&&n(28803)("Object.prototype.toString");t.exports=o.isArray||function IsArray(t){return a(t)==="[object Array]"}},8626:(t,r,n)=>{"use strict";t.exports=n(94615)},97837:(t,r,n)=>{"use strict";var i=n(76339);var o=n(32583);var a=n(4640);t.exports=function IsDataDescriptor(t){if(typeof t==="undefined"){return false}o(a,"Property Descriptor","Desc",t);if(!i(t,"[[Value]]")&&!i(t,"[[Writable]]")){return false}return true}},75994:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Object.preventExtensions%",true);var a=i("%Object.isExtensible%",true);var s=n(61544);t.exports=o?function IsExtensible(t){return!s(t)&&a(t)}:function IsExtensible(t){return!s(t)}},43868:(t,r,n)=>{"use strict";var i=n(39231);var o=n(33817);var a=n(4640);var s=n(35893);var c=n(77886);t.exports=function IsIntegralNumber(t){if(a(t)!=="Number"||s(t)||!c(t)){return false}var r=i(t);return o(r)===r}},70440:t=>{"use strict";t.exports=function IsPropertyKey(t){return typeof t==="string"||typeof t==="symbol"}},34140:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Symbol.match%",true);var a=n(96403);var s=n(69865);t.exports=function IsRegExp(t){if(!t||typeof t!=="object"){return false}if(o){var r=t[o];if(typeof r!=="undefined"){return s(r)}}return a(t)}},89102:(t,r,n)=>{"use strict";var i=n(28803);var o=i("Array.prototype.push");var a=n(12192);var s=n(70699);var c=n(22815);t.exports=function IterableToList(t){var r;if(arguments.length>1){r=a(t,"sync",arguments[1])}else{r=a(t,"sync")}var n=[];var i=true;while(i){i=s(r);if(i){var u=c(i);o(n,u)}}return n}},26651:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(43705);var s=n(69865);var c=n(4640);t.exports=function IteratorComplete(t){if(c(t)!=="Object"){throw new o("Assertion failed: Type(iterResult) is not Object")}return s(a(t,"done"))}},75966:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(225);var s=n(4640);t.exports=function IteratorNext(t,r){var n=a(t,"next",arguments.length<2?[]:[r]);if(s(n)!=="Object"){throw new o("iterator next must return an object")}return n}},70699:(t,r,n)=>{"use strict";var i=n(26651);var o=n(75966);t.exports=function IteratorStep(t){var r=o(t);var n=i(r);return n===true?false:r}},22815:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(43705);var s=n(4640);t.exports=function IteratorValue(t){if(s(t)!=="Object"){throw new o("Assertion failed: Type(iterResult) is not Object")}return a(t,"value")}},83258:(t,r,n)=>{"use strict";var i=n(74538);var o=n(3850);var a=i("%TypeError%");var s=n(28803);var c=s("Object.prototype.propertyIsEnumerable");var u=n(76339);var l=n(47224);var d=n(70440);var p=n(34140);var g=n(24262);var v=n(4640);t.exports=function OrdinaryGetOwnProperty(t,r){if(v(t)!=="Object"){throw new a("Assertion failed: O must be an Object")}if(!d(r)){throw new a("Assertion failed: P must be a Property Key")}if(!u(t,r)){return void 0}if(!o){var n=l(t)&&r==="length";var i=p(t)&&r==="lastIndex";return{"[[Configurable]]":!(n||i),"[[Enumerable]]":c(t,r),"[[Value]]":t[r],"[[Writable]]":true}}return g(o(t,r))}},90473:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(31139);var s=n(4640);t.exports=function OrdinaryGetPrototypeOf(t){if(s(t)!=="Object"){throw new o("Assertion failed: O must be an Object")}if(!a){throw new o("This environment does not support fetching prototypes.")}return a(t)}},9206:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=n(98245);var s=n(90473);var c=n(4640);t.exports=function OrdinarySetPrototypeOf(t,r){if(c(r)!=="Object"&&c(r)!=="Null"){throw new o("Assertion failed: V must be Object or Null")}try{a(t,r)}catch(t){return false}return s(t)===r}},39538:(t,r,n)=>{"use strict";t.exports=n(23300)},74178:(t,r,n)=>{"use strict";var i=n(35893);t.exports=function SameValue(t,r){if(t===r){if(t===0){return 1/t===1/r}return true}return i(t)&&i(r)}},69865:t=>{"use strict";t.exports=function ToBoolean(t){return!!t}},90789:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Object%");var a=n(39538);t.exports=function ToObject(t){a(t);return o(t)}},24262:(t,r,n)=>{"use strict";var i=n(76339);var o=n(74538);var a=o("%TypeError%");var s=n(4640);var c=n(69865);var u=n(8626);t.exports=function ToPropertyDescriptor(t){if(s(t)!=="Object"){throw new a("ToPropertyDescriptor requires an object")}var r={};if(i(t,"enumerable")){r["[[Enumerable]]"]=c(t.enumerable)}if(i(t,"configurable")){r["[[Configurable]]"]=c(t.configurable)}if(i(t,"value")){r["[[Value]]"]=t.value}if(i(t,"writable")){r["[[Writable]]"]=c(t.writable)}if(i(t,"get")){var n=t.get;if(typeof n!=="undefined"&&!u(n)){throw new a("getter must be a function")}r["[[Get]]"]=n}if(i(t,"set")){var o=t.set;if(typeof o!=="undefined"&&!u(o)){throw new a("setter must be a function")}r["[[Set]]"]=o}if((i(r,"[[Get]]")||i(r,"[[Set]]"))&&(i(r,"[[Value]]")||i(r,"[[Writable]]"))){throw new a("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute")}return r}},4640:(t,r,n)=>{"use strict";var i=n(59029);t.exports=function Type(t){if(typeof t==="symbol"){return"Symbol"}if(typeof t==="bigint"){return"BigInt"}return i(t)}},26055:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=i("%String.fromCharCode%");var s=n(648);var c=n(12088);t.exports=function UTF16SurrogatePairToCodePoint(t,r){if(!s(t)||!c(r)){throw new o("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code")}return a(t)+a(r)}},39231:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Math.abs%");t.exports=function abs(t){return o(t)}},33817:t=>{"use strict";var r=Math.floor;t.exports=function floor(t){return r(t)}},23300:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");t.exports=function CheckObjectCoercible(t,r){if(t==null){throw new o(r||"Cannot call method on "+t)}return t}},59029:t=>{"use strict";t.exports=function Type(t){if(t===null){return"Null"}if(typeof t==="undefined"){return"Undefined"}if(typeof t==="function"||typeof t==="object"){return"Object"}if(typeof t==="number"){return"Number"}if(typeof t==="boolean"){return"Boolean"}if(typeof t==="string"){return"String"}}},32705:(t,r,n)=>{"use strict";var i=n(90176);var o=n(74538);var a=i()&&o("%Object.defineProperty%",true);var s=i.hasArrayLengthDefineBug();var c=s&&n(80233);var u=n(28803);var l=u("Object.prototype.propertyIsEnumerable");t.exports=function DefineOwnProperty(t,r,n,i,o,u){if(!a){if(!t(u)){return false}if(!u["[[Configurable]]"]||!u["[[Writable]]"]){return false}if(o in i&&l(i,o)!==!!u["[[Enumerable]]"]){return false}var d=u["[[Value]]"];i[o]=d;return r(i[o],d)}if(s&&o==="length"&&"[[Value]]"in u&&c(i)&&i.length!==u["[[Value]]"]){i.length=u["[[Value]]"];return i.length===u["[[Value]]"]}a(i,o,n(u));return true}},32583:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%TypeError%");var a=i("%SyntaxError%");var s=n(76339);var c=n(33313);var u={"Property Descriptor":function isPropertyDescriptor(t){var r={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var n in t){if(s(t,n)&&!r[n]){return false}}var i=s(t,"[[Value]]");var a=s(t,"[[Get]]")||s(t,"[[Set]]");if(i&&a){throw new o("Property Descriptors may not be both accessor and data descriptors")}return true},"Match Record":c};t.exports=function assertRecord(t,r,n,i){var s=u[r];if(typeof s!=="function"){throw new a("unknown record type: "+r)}if(t(i)!=="Object"||!s(i)){throw new o(n+" must be a "+r)}}},68405:t=>{"use strict";t.exports=function fromPropertyDescriptor(t){if(typeof t==="undefined"){return t}var r={};if("[[Value]]"in t){r.value=t["[[Value]]"]}if("[[Writable]]"in t){r.writable=!!t["[[Writable]]"]}if("[[Get]]"in t){r.get=t["[[Get]]"]}if("[[Set]]"in t){r.set=t["[[Set]]"]}if("[[Enumerable]]"in t){r.enumerable=!!t["[[Enumerable]]"]}if("[[Configurable]]"in t){r.configurable=!!t["[[Configurable]]"]}return r}},37111:(t,r,n)=>{"use strict";var i=n(40587)();var o=n(74538);var a=n(28803);var s=n(20639);var c=o("%Symbol.iterator%",true);var u=a("String.prototype.slice");var l=o("%String%",true);t.exports=function getIteratorMethod(t,r){var n;if(i){n=t.GetMethod(r,c)}else if(t.IsArray(r)){n=function(){var t=-1;var r=this;return{next:function(){t+=1;return{done:t>=r.length,value:r[t]}}}}}else if(s(r)){n=function(){var n=0;return{next:function(){var i=t.AdvanceStringIndex(l(r),n,true);var o=u(r,n,i);n=i;return{done:i>r.length,value:o}}}}}return n}},3850:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Object.getOwnPropertyDescriptor%",true);if(o){try{o([],"length")}catch(t){o=null}}t.exports=o},31139:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Object.getPrototypeOf%",true);var a=i("%Array.prototype%");t.exports=o||([].__proto__===a?function(t){return t.__proto__}:null)},77886:t=>{"use strict";var r=Number.isNaN||function(t){return t!==t};t.exports=Number.isFinite||function(t){return typeof t==="number"&&!r(t)&&t!==Infinity&&t!==-Infinity}},648:t=>{"use strict";t.exports=function isLeadingSurrogate(t){return typeof t==="number"&&t>=55296&&t<=56319}},33313:(t,r,n)=>{"use strict";var i=n(76339);t.exports=function isMatchRecord(t){return i(t,"[[StartIndex]]")&&i(t,"[[EndIndex]]")&&t["[[StartIndex]]"]>=0&&t["[[EndIndex]]"]>=t["[[StartIndex]]"]&&String(parseInt(t["[[StartIndex]]"],10))===String(t["[[StartIndex]]"])&&String(parseInt(t["[[EndIndex]]"],10))===String(t["[[EndIndex]]"])}},35893:t=>{"use strict";t.exports=Number.isNaN||function isNaN(t){return t!==t}},61544:t=>{"use strict";t.exports=function isPrimitive(t){return t===null||typeof t!=="function"&&typeof t!=="object"}},12088:t=>{"use strict";t.exports=function isTrailingSurrogate(t){return typeof t==="number"&&t>=56320&&t<=57343}},97176:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Math%");var a=i("%Number%");t.exports=a.MAX_SAFE_INTEGER||o.pow(2,53)-1},98245:(t,r,n)=>{"use strict";var i=n(74538);var o=i("%Object.setPrototypeOf%",true);var a=i("%Array.prototype%");t.exports=o||([].__proto__!==a?null:function(t,r){t.__proto__=r;return t})},2487:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Glob=void 0;const i=n(90658);const o=n(51081);const a=n(57310);const s=n(86866);const c=n(10153);const u=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Glob{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,r){if(!r)throw new TypeError("glob options required");this.withFileTypes=!!r.withFileTypes;this.signal=r.signal;this.follow=!!r.follow;this.dot=!!r.dot;this.dotRelative=!!r.dotRelative;this.nodir=!!r.nodir;this.mark=!!r.mark;if(!r.cwd){this.cwd=""}else if(r.cwd instanceof URL||r.cwd.startsWith("file://")){r.cwd=(0,a.fileURLToPath)(r.cwd)}this.cwd=r.cwd||"";this.root=r.root;this.magicalBraces=!!r.magicalBraces;this.nobrace=!!r.nobrace;this.noext=!!r.noext;this.realpath=!!r.realpath;this.absolute=r.absolute;this.noglobstar=!!r.noglobstar;this.matchBase=!!r.matchBase;this.maxDepth=typeof r.maxDepth==="number"?r.maxDepth:Infinity;this.stat=!!r.stat;this.ignore=r.ignore;if(this.withFileTypes&&this.absolute!==undefined){throw new Error("cannot set absolute and withFileTypes:true")}if(typeof t==="string"){t=[t]}this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===false;if(this.windowsPathsNoEscape){t=t.map((t=>t.replace(/\\/g,"/")))}if(this.matchBase){if(r.noglobstar){throw new TypeError("base matching requires globstar")}t=t.map((t=>t.includes("/")?t:`./**/${t}`))}this.pattern=t;this.platform=r.platform||u;this.opts={...r,platform:this.platform};if(r.scurry){this.scurry=r.scurry;if(r.nocase!==undefined&&r.nocase!==r.scurry.nocase){throw new Error("nocase option contradicts provided scurry option")}}else{const t=r.platform==="win32"?o.PathScurryWin32:r.platform==="darwin"?o.PathScurryDarwin:r.platform?o.PathScurryPosix:o.PathScurry;this.scurry=new t(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;const n=this.platform==="darwin"||this.platform==="win32";const c={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:true,noext:this.noext,nonegate:true,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug};const l=this.pattern.map((t=>new i.Minimatch(t,c)));const[d,p]=l.reduce(((t,r)=>{t[0].push(...r.set);t[1].push(...r.globParts);return t}),[[],[]]);this.patterns=d.map(((t,r)=>{const n=p[r];if(!n)throw new Error("invalid pattern object");return new s.Pattern(t,n,0,this.platform)}))}async walk(){return[...await new c.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new c.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new c.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new c.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}r.Glob=Glob},33133:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.hasMagic=void 0;const i=n(90658);const hasMagic=(t,r={})=>{if(!Array.isArray(t)){t=[t]}for(const n of t){if(new i.Minimatch(n,r).hasMagic())return true}return false};r.hasMagic=hasMagic},69703:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Ignore=void 0;const i=n(90658);const o=n(86866);const a=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Ignore{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:r,nocase:n,noext:s,noglobstar:c,platform:u=a}){this.relative=[];this.absolute=[];this.relativeChildren=[];this.absoluteChildren=[];const l={dot:true,nobrace:r,nocase:n,noext:s,noglobstar:c,optimizationLevel:2,platform:u,nocomment:true,nonegate:true};for(const r of t){const t=new i.Minimatch(r,l);for(let r=0;r<t.set.length;r++){const n=t.set[r];const a=t.globParts[r];if(!n||!a){throw new Error("invalid pattern object")}while(n[0]==="."&&a[0]==="."){n.shift();a.shift()}const s=new o.Pattern(n,a,0,u);const c=new i.Minimatch(s.globString(),l);const d=a[a.length-1]==="**";const p=s.isAbsolute();if(p)this.absolute.push(c);else this.relative.push(c);if(d){if(p)this.absoluteChildren.push(c);else this.relativeChildren.push(c)}}}}ignored(t){const r=t.fullpath();const n=`${r}/`;const i=t.relative()||".";const o=`${i}/`;for(const t of this.relative){if(t.match(i)||t.match(o))return true}for(const t of this.absolute){if(t.match(r)||t.match(n))return true}return false}childrenIgnored(t){const r=t.fullpath()+"/";const n=(t.relative()||".")+"/";for(const t of this.relativeChildren){if(t.match(n))return true}for(const t of this.absoluteChildren){if(t.match(r))return true}return false}}r.Ignore=Ignore},38211:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.glob=r.hasMagic=r.Glob=r.unescape=r.escape=r.sync=r.iterate=r.iterateSync=r.stream=r.streamSync=r.globIterate=r.globIterateSync=r.globSync=r.globStream=r.globStreamSync=void 0;const i=n(90658);const o=n(2487);const a=n(33133);function globStreamSync(t,r={}){return new o.Glob(t,r).streamSync()}r.globStreamSync=globStreamSync;function globStream(t,r={}){return new o.Glob(t,r).stream()}r.globStream=globStream;function globSync(t,r={}){return new o.Glob(t,r).walkSync()}r.globSync=globSync;async function glob_(t,r={}){return new o.Glob(t,r).walk()}function globIterateSync(t,r={}){return new o.Glob(t,r).iterateSync()}r.globIterateSync=globIterateSync;function globIterate(t,r={}){return new o.Glob(t,r).iterate()}r.globIterate=globIterate;r.streamSync=globStreamSync;r.stream=Object.assign(globStream,{sync:globStreamSync});r.iterateSync=globIterateSync;r.iterate=Object.assign(globIterate,{sync:globIterateSync});r.sync=Object.assign(globSync,{stream:globStreamSync,iterate:globIterateSync});var s=n(90658);Object.defineProperty(r,"escape",{enumerable:true,get:function(){return s.escape}});Object.defineProperty(r,"unescape",{enumerable:true,get:function(){return s.unescape}});var c=n(2487);Object.defineProperty(r,"Glob",{enumerable:true,get:function(){return c.Glob}});var u=n(33133);Object.defineProperty(r,"hasMagic",{enumerable:true,get:function(){return u.hasMagic}});r.glob=Object.assign(glob_,{glob:glob_,globSync:globSync,sync:r.sync,globStream:globStream,stream:r.stream,globStreamSync:globStreamSync,streamSync:r.streamSync,globIterate:globIterate,iterate:r.iterate,globIterateSync:globIterateSync,iterateSync:r.iterateSync,Glob:o.Glob,hasMagic:a.hasMagic,escape:i.escape,unescape:i.unescape});r.glob.glob=r.glob},86866:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Pattern=void 0;const i=n(90658);const isPatternList=t=>t.length>=1;const isGlobList=t=>t.length>=1;class Pattern{#e;#t;#r;length;#n;#i;#o;#a;#s;#c;#u=true;constructor(t,r,n,i){if(!isPatternList(t)){throw new TypeError("empty pattern list")}if(!isGlobList(r)){throw new TypeError("empty glob list")}if(r.length!==t.length){throw new TypeError("mismatched pattern list and glob list lengths")}this.length=t.length;if(n<0||n>=this.length){throw new TypeError("index out of range")}this.#e=t;this.#t=r;this.#r=n;this.#n=i;if(this.#r===0){if(this.isUNC()){const[t,r,n,i,...o]=this.#e;const[a,s,c,u,...l]=this.#t;if(o[0]===""){o.shift();l.shift()}const d=[t,r,n,i,""].join("/");const p=[a,s,c,u,""].join("/");this.#e=[d,...o];this.#t=[p,...l];this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){const[t,...r]=this.#e;const[n,...i]=this.#t;if(r[0]===""){r.shift();i.shift()}const o=t+"/";const a=n+"/";this.#e=[o,...r];this.#t=[a,...i];this.length=this.#e.length}}}pattern(){return this.#e[this.#r]}isString(){return typeof this.#e[this.#r]==="string"}isGlobstar(){return this.#e[this.#r]===i.GLOBSTAR}isRegExp(){return this.#e[this.#r]instanceof RegExp}globString(){return this.#o=this.#o||(this.#r===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#r).join("/"))}hasMore(){return this.length>this.#r+1}rest(){if(this.#i!==undefined)return this.#i;if(!this.hasMore())return this.#i=null;this.#i=new Pattern(this.#e,this.#t,this.#r+1,this.#n);this.#i.#c=this.#c;this.#i.#s=this.#s;this.#i.#a=this.#a;return this.#i}isUNC(){const t=this.#e;return this.#s!==undefined?this.#s:this.#s=this.#n==="win32"&&this.#r===0&&t[0]===""&&t[1]===""&&typeof t[2]==="string"&&!!t[2]&&typeof t[3]==="string"&&!!t[3]}isDrive(){const t=this.#e;return this.#a!==undefined?this.#a:this.#a=this.#n==="win32"&&this.#r===0&&this.length>1&&typeof t[0]==="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#e;return this.#c!==undefined?this.#c:this.#c=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#e[0];return typeof t==="string"&&this.isAbsolute()&&this.#r===0?t:""}checkFollowGlobstar(){return!(this.#r===0||!this.isGlobstar()||!this.#u)}markFollowGlobstar(){if(this.#r===0||!this.isGlobstar()||!this.#u)return false;this.#u=false;return true}}r.Pattern=Pattern},74628:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Processor=r.SubWalks=r.MatchRecord=r.HasWalkedCache=void 0;const i=n(90658);class HasWalkedCache{store;constructor(t=new Map){this.store=t}copy(){return new HasWalkedCache(new Map(this.store))}hasWalked(t,r){return this.store.get(t.fullpath())?.has(r.globString())}storeWalked(t,r){const n=t.fullpath();const i=this.store.get(n);if(i)i.add(r.globString());else this.store.set(n,new Set([r.globString()]))}}r.HasWalkedCache=HasWalkedCache;class MatchRecord{store=new Map;add(t,r,n){const i=(r?2:0)|(n?1:0);const o=this.store.get(t);this.store.set(t,o===undefined?i:i&o)}entries(){return[...this.store.entries()].map((([t,r])=>[t,!!(r&2),!!(r&1)]))}}r.MatchRecord=MatchRecord;class SubWalks{store=new Map;add(t,r){if(!t.canReaddir()){return}const n=this.store.get(t);if(n){if(!n.find((t=>t.globString()===r.globString()))){n.push(r)}}else this.store.set(t,[r])}get(t){const r=this.store.get(t);if(!r){throw new Error("attempting to walk unknown path")}return r}entries(){return this.keys().map((t=>[t,this.store.get(t)]))}keys(){return[...this.store.keys()].filter((t=>t.canReaddir()))}}r.SubWalks=SubWalks;class Processor{hasWalkedCache;matches=new MatchRecord;subwalks=new SubWalks;patterns;follow;dot;opts;constructor(t,r){this.opts=t;this.follow=!!t.follow;this.dot=!!t.dot;this.hasWalkedCache=r?r.copy():new HasWalkedCache}processPatterns(t,r){this.patterns=r;const n=r.map((r=>[t,r]));for(let[t,r]of n){this.hasWalkedCache.storeWalked(t,r);const n=r.root();const o=r.isAbsolute()&&this.opts.absolute!==false;if(n){t=t.resolve(n==="/"&&this.opts.root!==undefined?this.opts.root:n);const i=r.rest();if(!i){this.matches.add(t,true,false);continue}else{r=i}}if(t.isENOENT())continue;let a;let s;let c=false;while(typeof(a=r.pattern())==="string"&&(s=r.rest())){const n=t.resolve(a);t=n;r=s;c=true}a=r.pattern();s=r.rest();if(c){if(this.hasWalkedCache.hasWalked(t,r))continue;this.hasWalkedCache.storeWalked(t,r)}if(typeof a==="string"){const r=a===".."||a===""||a===".";this.matches.add(t.resolve(a),o,r);continue}else if(a===i.GLOBSTAR){if(!t.isSymbolicLink()||this.follow||r.checkFollowGlobstar()){this.subwalks.add(t,r)}const n=s?.pattern();const i=s?.rest();if(!s||(n===""||n===".")&&!i){this.matches.add(t,o,n===""||n===".")}else{if(n===".."){const r=t.parent||t;if(!i)this.matches.add(r,o,true);else if(!this.hasWalkedCache.hasWalked(r,i)){this.subwalks.add(r,i)}}}}else if(a instanceof RegExp){this.subwalks.add(t,r)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Processor(this.opts,this.hasWalkedCache)}filterEntries(t,r){const n=this.subwalks.get(t);const o=this.child();for(const t of r){for(const r of n){const n=r.isAbsolute();const a=r.pattern();const s=r.rest();if(a===i.GLOBSTAR){o.testGlobstar(t,r,s,n)}else if(a instanceof RegExp){o.testRegExp(t,a,s,n)}else{o.testString(t,a,s,n)}}}return o}testGlobstar(t,r,n,i){if(this.dot||!t.name.startsWith(".")){if(!r.hasMore()){this.matches.add(t,i,false)}if(t.canReaddir()){if(this.follow||!t.isSymbolicLink()){this.subwalks.add(t,r)}else if(t.isSymbolicLink()){if(n&&r.checkFollowGlobstar()){this.subwalks.add(t,n)}else if(r.markFollowGlobstar()){this.subwalks.add(t,r)}}}}if(n){const r=n.pattern();if(typeof r==="string"&&r!==".."&&r!==""&&r!=="."){this.testString(t,r,n.rest(),i)}else if(r===".."){const r=t.parent||t;this.subwalks.add(r,n)}else if(r instanceof RegExp){this.testRegExp(t,r,n.rest(),i)}}}testRegExp(t,r,n,i){if(!r.test(t.name))return;if(!n){this.matches.add(t,i,false)}else{this.subwalks.add(t,n)}}testString(t,r,n,i){if(!t.isNamed(r))return;if(!n){this.matches.add(t,i,false)}else{this.subwalks.add(t,n)}}}r.Processor=Processor},10153:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GlobStream=r.GlobWalker=r.GlobUtil=void 0;const i=n(14968);const o=n(69703);const a=n(74628);const makeIgnore=(t,r)=>typeof t==="string"?new o.Ignore([t],r):Array.isArray(t)?new o.Ignore(t,r):t;class GlobUtil{path;patterns;opts;seen=new Set;paused=false;aborted=false;#l=[];#f;#d;signal;maxDepth;constructor(t,r,n){this.patterns=t;this.path=r;this.opts=n;this.#d=!n.posix&&n.platform==="win32"?"\\":"/";if(n.ignore){this.#f=makeIgnore(n.ignore,n)}this.maxDepth=n.maxDepth||Infinity;if(n.signal){this.signal=n.signal;this.signal.addEventListener("abort",(()=>{this.#l.length=0}))}}#p(t){return this.seen.has(t)||!!this.#f?.ignored?.(t)}#h(t){return!!this.#f?.childrenIgnored?.(t)}pause(){this.paused=true}resume(){if(this.signal?.aborted)return;this.paused=false;let t=undefined;while(!this.paused&&(t=this.#l.shift())){t()}}onResume(t){if(this.signal?.aborted)return;if(!this.paused){t()}else{this.#l.push(t)}}async matchCheck(t,r){if(r&&this.opts.nodir)return undefined;let n;if(this.opts.realpath){n=t.realpathCached()||await t.realpath();if(!n)return undefined;t=n}const i=t.isUnknown()||this.opts.stat;const o=i?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){const t=await o.realpath();if(t&&(t.isUnknown()||this.opts.stat)){await t.lstat()}}return this.matchCheckTest(o,r)}matchCheckTest(t,r){return t&&(this.maxDepth===Infinity||t.depth()<=this.maxDepth)&&(!r||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#p(t)?t:undefined}matchCheckSync(t,r){if(r&&this.opts.nodir)return undefined;let n;if(this.opts.realpath){n=t.realpathCached()||t.realpathSync();if(!n)return undefined;t=n}const i=t.isUnknown()||this.opts.stat;const o=i?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){const t=o.realpathSync();if(t&&(t?.isUnknown()||this.opts.stat)){t.lstatSync()}}return this.matchCheckTest(o,r)}matchFinish(t,r){if(this.#p(t))return;const n=this.opts.absolute===undefined?r:this.opts.absolute;this.seen.add(t);const i=this.opts.mark&&t.isDirectory()?this.#d:"";if(this.opts.withFileTypes){this.matchEmit(t)}else if(n){const r=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(r+i)}else{const r=this.opts.posix?t.relativePosix():t.relative();const n=this.opts.dotRelative&&!r.startsWith(".."+this.#d)?"."+this.#d:"";this.matchEmit(!r?"."+i:n+r+i)}}async match(t,r,n){const i=await this.matchCheck(t,n);if(i)this.matchFinish(i,r)}matchSync(t,r,n){const i=this.matchCheckSync(t,n);if(i)this.matchFinish(i,r)}walkCB(t,r,n){if(this.signal?.aborted)n();this.walkCB2(t,r,new a.Processor(this.opts),n)}walkCB2(t,r,n,i){if(this.#h(t))return i();if(this.signal?.aborted)i();if(this.paused){this.onResume((()=>this.walkCB2(t,r,n,i)));return}n.processPatterns(t,r);let o=1;const next=()=>{if(--o===0)i()};for(const[t,r,i]of n.matches.entries()){if(this.#p(t))continue;o++;this.match(t,r,i).then((()=>next()))}for(const t of n.subwalkTargets()){if(this.maxDepth!==Infinity&&t.depth()>=this.maxDepth){continue}o++;const r=t.readdirCached();if(t.calledReaddir())this.walkCB3(t,r,n,next);else{t.readdirCB(((r,i)=>this.walkCB3(t,i,n,next)),true)}}next()}walkCB3(t,r,n,i){n=n.filterEntries(t,r);let o=1;const next=()=>{if(--o===0)i()};for(const[t,r,i]of n.matches.entries()){if(this.#p(t))continue;o++;this.match(t,r,i).then((()=>next()))}for(const[t,r]of n.subwalks.entries()){o++;this.walkCB2(t,r,n.child(),next)}next()}walkCBSync(t,r,n){if(this.signal?.aborted)n();this.walkCB2Sync(t,r,new a.Processor(this.opts),n)}walkCB2Sync(t,r,n,i){if(this.#h(t))return i();if(this.signal?.aborted)i();if(this.paused){this.onResume((()=>this.walkCB2Sync(t,r,n,i)));return}n.processPatterns(t,r);let o=1;const next=()=>{if(--o===0)i()};for(const[t,r,i]of n.matches.entries()){if(this.#p(t))continue;this.matchSync(t,r,i)}for(const t of n.subwalkTargets()){if(this.maxDepth!==Infinity&&t.depth()>=this.maxDepth){continue}o++;const r=t.readdirSync();this.walkCB3Sync(t,r,n,next)}next()}walkCB3Sync(t,r,n,i){n=n.filterEntries(t,r);let o=1;const next=()=>{if(--o===0)i()};for(const[t,r,i]of n.matches.entries()){if(this.#p(t))continue;this.matchSync(t,r,i)}for(const[t,r]of n.subwalks.entries()){o++;this.walkCB2Sync(t,r,n.child(),next)}next()}}r.GlobUtil=GlobUtil;class GlobWalker extends GlobUtil{matches;constructor(t,r,n){super(t,r,n);this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown()){await this.path.lstat()}await new Promise(((t,r)=>{this.walkCB(this.path,this.patterns,(()=>{if(this.signal?.aborted){r(this.signal.reason)}else{t(this.matches)}}))}));return this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown()){this.path.lstatSync()}this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason}));return this.matches}}r.GlobWalker=GlobWalker;class GlobStream extends GlobUtil{results;constructor(t,r,n){super(t,r,n);this.results=new i.Minipass({signal:this.signal,objectMode:true});this.results.on("drain",(()=>this.resume()));this.results.on("resume",(()=>this.resume()))}matchEmit(t){this.results.write(t);if(!this.results.flowing)this.pause()}stream(){const t=this.path;if(t.isUnknown()){t.lstat().then((()=>{this.walkCB(t,this.patterns,(()=>this.results.end()))}))}else{this.walkCB(t,this.patterns,(()=>this.results.end()))}return this.results}streamSync(){if(this.path.isUnknown()){this.path.lstatSync()}this.walkCBSync(this.path,this.patterns,(()=>this.results.end()));return this.results}}r.GlobStream=GlobStream},92401:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.assertValidPattern=void 0;const n=1024*64;const assertValidPattern=t=>{if(typeof t!=="string"){throw new TypeError("invalid pattern")}if(t.length>n){throw new TypeError("pattern is too long")}};r.assertValidPattern=assertValidPattern},16034:(t,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.AST=void 0;const i=n(43096);const o=n(7226);const a=new Set(["!","?","+","*","@"]);const isExtglobType=t=>a.has(t);const s="(?!(?:^|/)\\.\\.?(?:$|/))";const c="(?!\\.)";const u=new Set(["[","."]);const l=new Set(["..","."]);const d=new Set("().*{}+?[]^$\\!");const regExpEscape=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const p="[^/]";const g=p+"*?";const v=p+"+?";class AST{type;#m;#g;#v=false;#y=[];#_;#E;#b;#S=false;#T;#C;#w=false;constructor(t,r,n={}){this.type=t;if(t)this.#g=true;this.#_=r;this.#m=this.#_?this.#_.#m:this;this.#T=this.#m===this?n:this.#m.#T;this.#b=this.#m===this?[]:this.#m.#b;if(t==="!"&&!this.#m.#S)this.#b.push(this);this.#E=this.#_?this.#_.#y.length:0}get hasMagic(){if(this.#g!==undefined)return this.#g;for(const t of this.#y){if(typeof t==="string")continue;if(t.type||t.hasMagic)return this.#g=true}return this.#g}toString(){if(this.#C!==undefined)return this.#C;if(!this.type){return this.#C=this.#y.map((t=>String(t))).join("")}else{return this.#C=this.type+"("+this.#y.map((t=>String(t))).join("|")+")"}}#A(){if(this!==this.#m)throw new Error("should only call on root");if(this.#S)return this;this.toString();this.#S=true;let t;while(t=this.#b.pop()){if(t.type!=="!")continue;let r=t;let n=r.#_;while(n){for(let i=r.#E+1;!n.type&&i<n.#y.length;i++){for(const r of t.#y){if(typeof r==="string"){throw new Error("string part in extglob AST??")}r.copyIn(n.#y[i])}}r=n;n=r.#_}}return this}push(...t){for(const r of t){if(r==="")continue;if(typeof r!=="string"&&!(r instanceof AST&&r.#_===this)){throw new Error("invalid part: "+r)}this.#y.push(r)}}toJSON(){const t=this.type===null?this.#y.slice().map((t=>typeof t==="string"?t:t.toJSON())):[this.type,...this.#y.map((t=>t.toJSON()))];if(this.isStart()&&!this.type)t.unshift([]);if(this.isEnd()&&(this===this.#m||this.#m.#S&&this.#_?.type==="!")){t.push({})}return t}isStart(){if(this.#m===this)return true;if(!this.#_?.isStart())return false;if(this.#E===0)return true;const t=this.#_;for(let r=0;r<this.#E;r++){const n=t.#y[r];if(!(n instanceof AST&&n.type==="!")){return false}}return true}isEnd(){if(this.#m===this)return true;if(this.#_?.type==="!")return true;if(!this.#_?.isEnd())return false;if(!this.type)return this.#_?.isEnd();const t=this.#_?this.#_.#y.length:0;return this.#E===t-1}copyIn(t){if(typeof t==="string")this.push(t);else this.push(t.clone(this))}clone(t){const r=new AST(this.type,t);for(const t of this.#y){r.copyIn(t)}return r}static#I(t,r,n,i){let o=false;let a=false;let s=-1;let c=false;if(r.type===null){let u=n;let l="";while(u<t.length){const n=t.charAt(u++);if(o||n==="\\"){o=!o;l+=n;continue}if(a){if(u===s+1){if(n==="^"||n==="!"){c=true}}else if(n==="]"&&!(u===s+2&&c)){a=false}l+=n;continue}else if(n==="["){a=true;s=u;c=false;l+=n;continue}if(!i.noext&&isExtglobType(n)&&t.charAt(u)==="("){r.push(l);l="";const o=new AST(n,r);u=AST.#I(t,o,u,i);r.push(o);continue}l+=n}r.push(l);return u}let u=n+1;let l=new AST(null,r);const d=[];let p="";while(u<t.length){const n=t.charAt(u++);if(o||n==="\\"){o=!o;p+=n;continue}if(a){if(u===s+1){if(n==="^"||n==="!"){c=true}}else if(n==="]"&&!(u===s+2&&c)){a=false}p+=n;continue}else if(n==="["){a=true;s=u;c=false;p+=n;continue}if(isExtglobType(n)&&t.charAt(u)==="("){l.push(p);p="";const r=new AST(n,l);l.push(r);u=AST.#I(t,r,u,i);continue}if(n==="|"){l.push(p);p="";d.push(l);l=new AST(null,r);continue}if(n===")"){if(p===""&&r.#y.length===0){r.#w=true}l.push(p);p="";r.push(...d,l);return u}p+=n}r.type=null;r.#g=undefined;r.#y=[t.substring(n-1)];return u}static fromGlob(t,r={}){const n=new AST(null,undefined,r);AST.#I(t,n,0,r);return n}toMMPattern(){if(this!==this.#m)return this.#m.toMMPattern();const t=this.toString();const[r,n,i,o]=this.toRegExpSource();const a=i||this.#g||this.#T.nocase&&!this.#T.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase();if(!a){return n}const s=(this.#T.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,s),{_src:r,_glob:t})}get options(){return this.#T}toRegExpSource(t){const r=t??!!this.#T.dot;if(this.#m===this)this.#A();if(!this.type){const n=this.isStart()&&this.isEnd();const i=this.#y.map((r=>{const[i,o,a,s]=typeof r==="string"?AST.#O(r,this.#g,n):r.toRegExpSource(t);this.#g=this.#g||a;this.#v=this.#v||s;return i})).join("");let a="";if(this.isStart()){if(typeof this.#y[0]==="string"){const n=this.#y.length===1&&l.has(this.#y[0]);if(!n){const n=u;const o=r&&n.has(i.charAt(0))||i.startsWith("\\.")&&n.has(i.charAt(2))||i.startsWith("\\.\\.")&&n.has(i.charAt(4));const l=!r&&!t&&n.has(i.charAt(0));a=o?s:l?c:""}}}let d="";if(this.isEnd()&&this.#m.#S&&this.#_?.type==="!"){d="(?:$|\\/)"}const p=a+i+d;return[p,(0,o.unescape)(i),this.#g=!!this.#g,this.#v]}const n=this.type==="*"||this.type==="+";const i=this.type==="!"?"(?:(?!(?:":"(?:";let a=this.#R(r);if(this.isStart()&&this.isEnd()&&!a&&this.type!=="!"){const t=this.toString();this.#y=[t];this.type=null;this.#g=undefined;return[t,(0,o.unescape)(this.toString()),false,false]}let d=!n||t||r||!c?"":this.#R(true);if(d===a){d=""}if(d){a=`(?:${a})(?:${d})*?`}let p="";if(this.type==="!"&&this.#w){p=(this.isStart()&&!r?c:"")+v}else{const n=this.type==="!"?"))"+(this.isStart()&&!r&&!t?c:"")+g+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&d?")":this.type==="*"&&d?`)?`:`)${this.type}`;p=i+a+n}return[p,(0,o.unescape)(a),this.#g=!!this.#g,this.#v]}#R(t){return this.#y.map((r=>{if(typeof r==="string"){throw new Error("string type in extglob ast??")}const[n,i,o,a]=r.toRegExpSource(t);this.#v=this.#v||a;return n})).filter((t=>!(this.isStart()&&this.isEnd())||!!t)).join("|")}static#O(t,r,n=false){let a=false;let s="";let c=false;for(let o=0;o<t.length;o++){const u=t.charAt(o);if(a){a=false;s+=(d.has(u)?"\\":"")+u;continue}if(u==="\\"){if(o===t.length-1){s+="\\\\"}else{a=true}continue}if(u==="["){const[n,a,u,l]=(0,i.parseClass)(t,o);if(u){s+=n;c=c||a;o+=u-1;r=r||l;continue}}if(u==="*"){if(n&&t==="*")s+=v;else s+=g;r=true;continue}if(u==="?"){s+=p;r=true;continue}s+=regExpEscape(u)}return[s,(0,o.unescape)(t),!!r,c]}}r.AST=AST},43096:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.parseClass=void 0;const n={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",true],"[:alpha:]":["\\p{L}\\p{Nl}",true],"[:ascii:]":["\\x"+"00-\\x"+"7f",false],"[:blank:]":["\\p{Zs}\\t",true],"[:cntrl:]":["\\p{Cc}",true],"[:digit:]":["\\p{Nd}",true],"[:graph:]":["\\p{Z}\\p{C}",true,true],"[:lower:]":["\\p{Ll}",true],"[:print:]":["\\p{C}",true],"[:punct:]":["\\p{P}",true],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",true],"[:upper:]":["\\p{Lu}",true],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",true],"[:xdigit:]":["A-Fa-f0-9",false]};const braceEscape=t=>t.replace(/[[\]\\-]/g,"\\$&");const regexpEscape=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const rangesToString=t=>t.join("");const parseClass=(t,r)=>{const i=r;if(t.charAt(i)!=="["){throw new Error("not in a brace expression")}const o=[];const a=[];let s=i+1;let c=false;let u=false;let l=false;let d=false;let p=i;let g="";e:while(s<t.length){const r=t.charAt(s);if((r==="!"||r==="^")&&s===i+1){d=true;s++;continue}if(r==="]"&&c&&!l){p=s+1;break}c=true;if(r==="\\"){if(!l){l=true;s++;continue}}if(r==="["&&!l){for(const[r,[c,l,d]]of Object.entries(n)){if(t.startsWith(r,s)){if(g){return["$.",false,t.length-i,true]}s+=r.length;if(d)a.push(c);else o.push(c);u=u||l;continue e}}}l=false;if(g){if(r>g){o.push(braceEscape(g)+"-"+braceEscape(r))}else if(r===g){o.push(braceEscape(r))}g="";s++;continue}if(t.startsWith("-]",s+1)){o.push(braceEscape(r+"-"));s+=2;continue}if(t.startsWith("-",s+1)){g=r;s+=2;continue}o.push(braceEscape(r));s++}if(p<s){return["",false,0,false]}if(!o.length&&!a.length){return["$.",false,t.length-i,true]}if(a.length===0&&o.length===1&&/^\\?.$/.test(o[0])&&!d){const t=o[0].length===2?o[0].slice(-1):o[0];return[regexpEscape(t),false,p-i,false]}const v="["+(d?"^":"")+rangesToString(o)+"]";const E="["+(d?"":"^")+rangesToString(a)+"]";const S=o.length&&a.length?"("+v+"|"+E+")":o.length?v:E;return[S,u,p-i,true]};r.parseClass=parseClass},51496:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.escape=void 0;const escape=(t,{windowsPathsNoEscape:r=false}={})=>r?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");r.escape=escape},90658:function(t,r,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});r.unescape=r.escape=r.AST=r.Minimatch=r.match=r.makeRe=r.braceExpand=r.defaults=r.filter=r.GLOBSTAR=r.sep=r.minimatch=void 0;const o=i(n(51046));const a=n(92401);const s=n(16034);const c=n(51496);const u=n(7226);const minimatch=(t,r,n={})=>{(0,a.assertValidPattern)(r);if(!n.nocomment&&r.charAt(0)==="#"){return false}return new Minimatch(r,n).match(t)};r.minimatch=minimatch;const l=/^\*+([^+@!?\*\[\(]*)$/;const starDotExtTest=t=>r=>!r.startsWith(".")&&r.endsWith(t);const starDotExtTestDot=t=>r=>r.endsWith(t);const starDotExtTestNocase=t=>{t=t.toLowerCase();return r=>!r.startsWith(".")&&r.toLowerCase().endsWith(t)};const starDotExtTestNocaseDot=t=>{t=t.toLowerCase();return r=>r.toLowerCase().endsWith(t)};const d=/^\*+\.\*+$/;const starDotStarTest=t=>!t.startsWith(".")&&t.includes(".");const starDotStarTestDot=t=>t!=="."&&t!==".."&&t.includes(".");const p=/^\.\*+$/;const dotStarTest=t=>t!=="."&&t!==".."&&t.startsWith(".");const g=/^\*+$/;const starTest=t=>t.length!==0&&!t.startsWith(".");const starTestDot=t=>t.length!==0&&t!=="."&&t!=="..";const v=/^\?+([^+@!?\*\[\(]*)?$/;const qmarksTestNocase=([t,r=""])=>{const n=qmarksTestNoExt([t]);if(!r)return n;r=r.toLowerCase();return t=>n(t)&&t.toLowerCase().endsWith(r)};const qmarksTestNocaseDot=([t,r=""])=>{const n=qmarksTestNoExtDot([t]);if(!r)return n;r=r.toLowerCase();return t=>n(t)&&t.toLowerCase().endsWith(r)};const qmarksTestDot=([t,r=""])=>{const n=qmarksTestNoExtDot([t]);return!r?n:t=>n(t)&&t.endsWith(r)};const qmarksTest=([t,r=""])=>{const n=qmarksTestNoExt([t]);return!r?n:t=>n(t)&&t.endsWith(r)};const qmarksTestNoExt=([t])=>{const r=t.length;return t=>t.length===r&&!t.startsWith(".")};const qmarksTestNoExtDot=([t])=>{const r=t.length;return t=>t.length===r&&t!=="."&&t!==".."};const E=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";const S={win32:{sep:"\\"},posix:{sep:"/"}};r.sep=E==="win32"?S.win32.sep:S.posix.sep;r.minimatch.sep=r.sep;r.GLOBSTAR=Symbol("globstar **");r.minimatch.GLOBSTAR=r.GLOBSTAR;const w="[^/]";const x=w+"*?";const N="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";const P="(?:(?!(?:\\/|^)\\.).)*?";const filter=(t,n={})=>i=>(0,r.minimatch)(i,t,n);r.filter=filter;r.minimatch.filter=r.filter;const ext=(t,r={})=>Object.assign({},t,r);const defaults=t=>{if(!t||typeof t!=="object"||!Object.keys(t).length){return r.minimatch}const n=r.minimatch;const m=(r,i,o={})=>n(r,i,ext(t,o));return Object.assign(m,{Minimatch:class Minimatch extends n.Minimatch{constructor(r,n={}){super(r,ext(t,n))}static defaults(r){return n.defaults(ext(t,r)).Minimatch}},AST:class AST extends n.AST{constructor(r,n,i={}){super(r,n,ext(t,i))}static fromGlob(r,i={}){return n.AST.fromGlob(r,ext(t,i))}},unescape:(r,i={})=>n.unescape(r,ext(t,i)),escape:(r,i={})=>n.escape(r,ext(t,i)),filter:(r,i={})=>n.filter(r,ext(t,i)),defaults:r=>n.defaults(ext(t,r)),makeRe:(r,i={})=>n.makeRe(r,ext(t,i)),braceExpand:(r,i={})=>n.braceExpand(r,ext(t,i)),match:(r,i,o={})=>n.match(r,i,ext(t,o)),sep:n.sep,GLOBSTAR:r.GLOBSTAR})};r.defaults=defaults;r.minimatch.defaults=r.defaults;const braceExpand=(t,r={})=>{(0,a.assertValidPattern)(t);if(r.nobrace||!/\{(?:(?!\{).)*\}/.test(t)){return[t]}return(0,o.default)(t)};r.braceExpand=braceExpand;r.minimatch.braceExpand=r.braceExpand;const makeRe=(t,r={})=>new Minimatch(t,r).makeRe();r.makeRe=makeRe;r.minimatch.makeRe=r.makeRe;const match=(t,r,n={})=>{const i=new Minimatch(r,n);t=t.filter((t=>i.match(t)));if(i.options.nonull&&!t.length){t.push(r)}return t};r.match=match;r.minimatch.match=r.match;const D=/[?*]|[+@!]\(.*?\)|\[|\]/;const regExpEscape=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class Minimatch{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,r={}){(0,a.assertValidPattern)(t);r=r||{};this.options=r;this.pattern=t;this.platform=r.platform||E;this.isWindows=this.platform==="win32";this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===false;if(this.windowsPathsNoEscape){this.pattern=this.pattern.replace(/\\/g,"/")}this.preserveMultipleSlashes=!!r.preserveMultipleSlashes;this.regexp=null;this.negate=false;this.nonegate=!!r.nonegate;this.comment=false;this.empty=false;this.partial=!!r.partial;this.nocase=!!this.options.nocase;this.windowsNoMagicRoot=r.windowsNoMagicRoot!==undefined?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase);this.globSet=[];this.globParts=[];this.set=[];this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1){return true}for(const t of this.set){for(const r of t){if(typeof r!=="string")return true}}return false}debug(...t){}make(){const t=this.pattern;const r=this.options;if(!r.nocomment&&t.charAt(0)==="#"){this.comment=true;return}if(!t){this.empty=true;return}this.parseNegate();this.globSet=[...new Set(this.braceExpand())];if(r.debug){this.debug=(...t)=>console.error(...t)}this.debug(this.pattern,this.globSet);const n=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(n);this.debug(this.pattern,this.globParts);let i=this.globParts.map(((t,r,n)=>{if(this.isWindows&&this.windowsNoMagicRoot){const r=t[0]===""&&t[1]===""&&(t[2]==="?"||!D.test(t[2]))&&!D.test(t[3]);const n=/^[a-z]:/i.test(t[0]);if(r){return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))]}else if(n){return[t[0],...t.slice(1).map((t=>this.parse(t)))]}}return t.map((t=>this.parse(t)))}));this.debug(this.pattern,i);this.set=i.filter((t=>t.indexOf(false)===-1));if(this.isWindows){for(let t=0;t<this.set.length;t++){const r=this.set[t];if(r[0]===""&&r[1]===""&&this.globParts[t][2]==="?"&&typeof r[3]==="string"&&/^[a-z]:$/i.test(r[3])){r[2]="?"}}}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar){for(let r=0;r<t.length;r++){for(let n=0;n<t[r].length;n++){if(t[r][n]==="**"){t[r][n]="*"}}}}const{optimizationLevel:r=1}=this.options;if(r>=2){t=this.firstPhasePreProcess(t);t=this.secondPhasePreProcess(t)}else if(r>=1){t=this.levelOneOptimize(t)}else{t=this.adjascentGlobstarOptimize(t)}return t}adjascentGlobstarOptimize(t){return t.map((t=>{let r=-1;while(-1!==(r=t.indexOf("**",r+1))){let n=r;while(t[n+1]==="**"){n++}if(n!==r){t.splice(r,n-r)}}return t}))}levelOneOptimize(t){return t.map((t=>{t=t.reduce(((t,r)=>{const n=t[t.length-1];if(r==="**"&&n==="**"){return t}if(r===".."){if(n&&n!==".."&&n!=="."&&n!=="**"){t.pop();return t}}t.push(r);return t}),[]);return t.length===0?[""]:t}))}levelTwoFileOptimize(t){if(!Array.isArray(t)){t=this.slashSplit(t)}let r=false;do{r=false;if(!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){const i=t[n];if(n===1&&i===""&&t[0]==="")continue;if(i==="."||i===""){r=true;t.splice(n,1);n--}}if(t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")){r=true;t.pop()}}let n=0;while(-1!==(n=t.indexOf("..",n+1))){const i=t[n-1];if(i&&i!=="."&&i!==".."&&i!=="**"){r=true;t.splice(n-1,2);n-=2}}}while(r);return t.length===0?[""]:t}firstPhasePreProcess(t){let r=false;do{r=false;for(let n of t){let i=-1;while(-1!==(i=n.indexOf("**",i+1))){let o=i;while(n[o+1]==="**"){o++}if(o>i){n.splice(i+1,o-i)}let a=n[i+1];const s=n[i+2];const c=n[i+3];if(a!=="..")continue;if(!s||s==="."||s===".."||!c||c==="."||c===".."){continue}r=true;n.splice(i,1);const u=n.slice(0);u[i]="**";t.push(u);i--}if(!this.preserveMultipleSlashes){for(let t=1;t<n.length-1;t++){const i=n[t];if(t===1&&i===""&&n[0]==="")continue;if(i==="."||i===""){r=true;n.splice(t,1);t--}}if(n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")){r=true;n.pop()}}let o=0;while(-1!==(o=n.indexOf("..",o+1))){const t=n[o-1];if(t&&t!=="."&&t!==".."&&t!=="**"){r=true;const t=o===1&&n[o+1]==="**";const i=t?["."]:[];n.splice(o-1,2,...i);if(n.length===0)n.push("");o-=2}}}}while(r);return t}secondPhasePreProcess(t){for(let r=0;r<t.length-1;r++){for(let n=r+1;n<t.length;n++){const i=this.partsMatch(t[r],t[n],!this.preserveMultipleSlashes);if(!i)continue;t[r]=i;t[n]=[]}}return t.filter((t=>t.length))}partsMatch(t,r,n=false){let i=0;let o=0;let a=[];let s="";while(i<t.length&&o<r.length){if(t[i]===r[o]){a.push(s==="b"?r[o]:t[i]);i++;o++}else if(n&&t[i]==="**"&&r[o]===t[i+1]){a.push(t[i]);i++}else if(n&&r[o]==="**"&&t[i]===r[o+1]){a.push(r[o]);o++}else if(t[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(s==="b")return false;s="a";a.push(t[i]);i++;o++}else if(r[o]==="*"&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&t[i]!=="**"){if(s==="a")return false;s="b";a.push(r[o]);i++;o++}else{return false}}return t.length===r.length&&a}parseNegate(){if(this.nonegate)return;const t=this.pattern;let r=false;let n=0;for(let i=0;i<t.length&&t.charAt(i)==="!";i++){r=!r;n++}if(n)this.pattern=t.slice(n);this.negate=r}matchOne(t,n,i=false){const o=this.options;if(this.isWindows){const r=typeof t[0]==="string"&&/^[a-z]:$/i.test(t[0]);const i=!r&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]);const o=typeof n[0]==="string"&&/^[a-z]:$/i.test(n[0]);const a=!o&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]==="string"&&/^[a-z]:$/i.test(n[3]);const s=i?3:r?0:undefined;const c=a?3:o?0:undefined;if(typeof s==="number"&&typeof c==="number"){const[r,i]=[t[s],n[c]];if(r.toLowerCase()===i.toLowerCase()){n[c]=r;if(c>s){n=n.slice(c)}else if(s>c){t=t.slice(s)}}}}const{optimizationLevel:a=1}=this.options;if(a>=2){t=this.levelTwoFileOptimize(t)}this.debug("matchOne",this,{file:t,pattern:n});this.debug("matchOne",t.length,n.length);for(var s=0,c=0,u=t.length,l=n.length;s<u&&c<l;s++,c++){this.debug("matchOne loop");var d=n[c];var p=t[s];this.debug(n,d,p);if(d===false){return false}if(d===r.GLOBSTAR){this.debug("GLOBSTAR",[n,d,p]);var g=s;var v=c+1;if(v===l){this.debug("** at the end");for(;s<u;s++){if(t[s]==="."||t[s]===".."||!o.dot&&t[s].charAt(0)===".")return false}return true}while(g<u){var E=t[g];this.debug("\nglobstar while",t,g,n,v,E);if(this.matchOne(t.slice(g),n.slice(v),i)){this.debug("globstar found match!",g,u,E);return true}else{if(E==="."||E===".."||!o.dot&&E.charAt(0)==="."){this.debug("dot detected!",t,g,n,v);break}this.debug("globstar swallow a segment, and continue");g++}}if(i){this.debug("\n>>> no match, partial?",t,g,n,v);if(g===u){return true}}return false}let a;if(typeof d==="string"){a=p===d;this.debug("string match",d,p,a)}else{a=d.test(p);this.debug("pattern match",d,p,a)}if(!a)return false}if(s===u&&c===l){return true}else if(s===u){return i}else if(c===l){return s===u-1&&t[s]===""}else{throw new Error("wtf?")}}braceExpand(){return(0,r.braceExpand)(this.pattern,this.options)}parse(t){(0,a.assertValidPattern)(t);const n=this.options;if(t==="**")return r.GLOBSTAR;if(t==="")return"";let i;let o=null;if(i=t.match(g)){o=n.dot?starTestDot:starTest}else if(i=t.match(l)){o=(n.nocase?n.dot?starDotExtTestNocaseDot:starDotExtTestNocase:n.dot?starDotExtTestDot:starDotExtTest)(i[1])}else if(i=t.match(v)){o=(n.nocase?n.dot?qmarksTestNocaseDot:qmarksTestNocase:n.dot?qmarksTestDot:qmarksTest)(i)}else if(i=t.match(d)){o=n.dot?starDotStarTestDot:starDotStarTest}else if(i=t.match(p)){o=dotStarTest}const c=s.AST.fromGlob(t,this.options).toMMPattern();if(o&&typeof c==="object"){Reflect.defineProperty(c,"test",{value:o})}return c}makeRe(){if(this.regexp||this.regexp===false)return this.regexp;const t=this.set;if(!t.length){this.regexp=false;return this.regexp}const n=this.options;const i=n.noglobstar?x:n.dot?N:P;const o=new Set(n.nocase?["i"]:[]);let a=t.map((t=>{const n=t.map((t=>{if(t instanceof RegExp){for(const r of t.flags.split(""))o.add(r)}return typeof t==="string"?regExpEscape(t):t===r.GLOBSTAR?r.GLOBSTAR:t._src}));n.forEach(((t,o)=>{const a=n[o+1];const s=n[o-1];if(t!==r.GLOBSTAR||s===r.GLOBSTAR){return}if(s===undefined){if(a!==undefined&&a!==r.GLOBSTAR){n[o+1]="(?:\\/|"+i+"\\/)?"+a}else{n[o]=i}}else if(a===undefined){n[o-1]=s+"(?:\\/|"+i+")?"}else if(a!==r.GLOBSTAR){n[o-1]=s+"(?:\\/|\\/"+i+"\\/)"+a;n[o+1]=r.GLOBSTAR}}));return n.filter((t=>t!==r.GLOBSTAR)).join("/")})).join("|");const[s,c]=t.length>1?["(?:",")"]:["",""];a="^"+s+a+c+"$";if(this.negate)a="^(?!"+a+").+$";try{this.regexp=new RegExp(a,[...o].join(""))}catch(t){this.regexp=false}return this.regexp}slashSplit(t){if(this.preserveMultipleSlashes){return t.split("/")}else if(this.isWindows&&/^\/\/[^\/]+/.test(t)){return["",...t.split(/\/+/)]}else{return t.split(/\/+/)}}match(t,r=this.partial){this.debug("match",t,this.pattern);if(this.comment){return false}if(this.empty){return t===""}if(t==="/"&&r){return true}const n=this.options;if(this.isWindows){t=t.split("\\").join("/")}const i=this.slashSplit(t);this.debug(this.pattern,"split",i);const o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a){for(let t=i.length-2;!a&&t>=0;t--){a=i[t]}}for(let t=0;t<o.length;t++){const s=o[t];let c=i;if(n.matchBase&&s.length===1){c=[a]}const u=this.matchOne(c,s,r);if(u){if(n.flipNegate){return true}return!this.negate}}if(n.flipNegate){return false}return this.negate}static defaults(t){return r.minimatch.defaults(t).Minimatch}}r.Minimatch=Minimatch;var M=n(16034);Object.defineProperty(r,"AST",{enumerable:true,get:function(){return M.AST}});var L=n(51496);Object.defineProperty(r,"escape",{enumerable:true,get:function(){return L.escape}});var U=n(7226);Object.defineProperty(r,"unescape",{enumerable:true,get:function(){return U.unescape}});r.minimatch.AST=s.AST;r.minimatch.Minimatch=Minimatch;r.minimatch.escape=c.escape;r.minimatch.unescape=u.unescape},7226:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.unescape=void 0;const unescape=(t,{windowsPathsNoEscape:r=false}={})=>r?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");r.unescape=unescape},14968:function(t,r,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:true});r.Minipass=r.isWritable=r.isReadable=r.isStream=void 0;const o=typeof process==="object"&&process?process:{stdout:null,stderr:null};const a=n(82361);const s=i(n(12781));const c=n(71576);const isStream=t=>!!t&&typeof t==="object"&&(t instanceof Minipass||t instanceof s.default||(0,r.isReadable)(t)||(0,r.isWritable)(t));r.isStream=isStream;const isReadable=t=>!!t&&typeof t==="object"&&t instanceof a.EventEmitter&&typeof t.pipe==="function"&&t.pipe!==s.default.Writable.prototype.pipe;r.isReadable=isReadable;const isWritable=t=>!!t&&typeof t==="object"&&t instanceof a.EventEmitter&&typeof t.write==="function"&&typeof t.end==="function";r.isWritable=isWritable;const u=Symbol("EOF");const l=Symbol("maybeEmitEnd");const d=Symbol("emittedEnd");const p=Symbol("emittingEnd");const g=Symbol("emittedError");const v=Symbol("closed");const E=Symbol("read");const S=Symbol("flush");const w=Symbol("flushChunk");const x=Symbol("encoding");const N=Symbol("decoder");const P=Symbol("flowing");const D=Symbol("paused");const M=Symbol("resume");const L=Symbol("buffer");const U=Symbol("pipes");const q=Symbol("bufferLength");const B=Symbol("bufferPush");const F=Symbol("bufferShift");const j=Symbol("objectMode");const H=Symbol("destroyed");const z=Symbol("error");const V=Symbol("emitData");const Y=Symbol("emitEnd");const G=Symbol("emitEnd2");const W=Symbol("async");const $=Symbol("abort");const K=Symbol("aborted");const J=Symbol("signal");const Z=Symbol("dataListeners");const X=Symbol("discarded");const defer=t=>Promise.resolve().then(t);const nodefer=t=>t();const isEndish=t=>t==="end"||t==="finish"||t==="prefinish";const isArrayBufferLike=t=>t instanceof ArrayBuffer||!!t&&typeof t==="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0;const isArrayBufferView=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);class Pipe{src;dest;opts;ondrain;constructor(t,r,n){this.src=t;this.dest=r;this.opts=n;this.ondrain=()=>t[M]();this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe();if(this.opts.end)this.dest.end()}}class PipeProxyErrors extends Pipe{unpipe(){this.src.removeListener("error",this.proxyErrors);super.unpipe()}constructor(t,r,n){super(t,r,n);this.proxyErrors=t=>r.emit("error",t);t.on("error",this.proxyErrors)}}const isObjectModeOptions=t=>!!t.objectMode;const isEncodingOptions=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer";class Minipass extends a.EventEmitter{[P]=false;[D]=false;[U]=[];[L]=[];[j];[x];[W];[N];[u]=false;[d]=false;[p]=false;[v]=false;[g]=null;[q]=0;[H]=false;[J];[K]=false;[Z]=0;[X]=false;writable=true;readable=true;constructor(...t){const r=t[0]||{};super();if(r.objectMode&&typeof r.encoding==="string"){throw new TypeError("Encoding and objectMode may not be used together")}if(isObjectModeOptions(r)){this[j]=true;this[x]=null}else if(isEncodingOptions(r)){this[x]=r.encoding;this[j]=false}else{this[j]=false;this[x]=null}this[W]=!!r.async;this[N]=this[x]?new c.StringDecoder(this[x]):null;if(r&&r.debugExposeBuffer===true){Object.defineProperty(this,"buffer",{get:()=>this[L]})}if(r&&r.debugExposePipes===true){Object.defineProperty(this,"pipes",{get:()=>this[U]})}const{signal:n}=r;if(n){this[J]=n;if(n.aborted){this[$]()}else{n.addEventListener("abort",(()=>this[$]()))}}}get bufferLength(){return this[q]}get encoding(){return this[x]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[j]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[W]}set["async"](t){this[W]=this[W]||!!t}[$](){this[K]=true;this.emit("abort",this[J]?.reason);this.destroy(this[J]?.reason)}get aborted(){return this[K]}set aborted(t){}write(t,r,n){if(this[K])return false;if(this[u])throw new Error("write after end");if(this[H]){this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"}));return true}if(typeof r==="function"){n=r;r="utf8"}if(!r)r="utf8";const i=this[W]?defer:nodefer;if(!this[j]&&!Buffer.isBuffer(t)){if(isArrayBufferView(t)){t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)}else if(isArrayBufferLike(t)){t=Buffer.from(t)}else if(typeof t!=="string"){throw new Error("Non-contiguous data written to non-objectMode stream")}}if(this[j]){if(this[P]&&this[q]!==0)this[S](true);if(this[P])this.emit("data",t);else this[B](t);if(this[q]!==0)this.emit("readable");if(n)i(n);return this[P]}if(!t.length){if(this[q]!==0)this.emit("readable");if(n)i(n);return this[P]}if(typeof t==="string"&&!(r===this[x]&&!this[N]?.lastNeed)){t=Buffer.from(t,r)}if(Buffer.isBuffer(t)&&this[x]){t=this[N].write(t)}if(this[P]&&this[q]!==0)this[S](true);if(this[P])this.emit("data",t);else this[B](t);if(this[q]!==0)this.emit("readable");if(n)i(n);return this[P]}read(t){if(this[H])return null;this[X]=false;if(this[q]===0||t===0||t&&t>this[q]){this[l]();return null}if(this[j])t=null;if(this[L].length>1&&!this[j]){this[L]=[this[x]?this[L].join(""):Buffer.concat(this[L],this[q])]}const r=this[E](t||null,this[L][0]);this[l]();return r}[E](t,r){if(this[j])this[F]();else{const n=r;if(t===n.length||t===null)this[F]();else if(typeof n==="string"){this[L][0]=n.slice(t);r=n.slice(0,t);this[q]-=t}else{this[L][0]=n.subarray(t);r=n.subarray(0,t);this[q]-=t}}this.emit("data",r);if(!this[L].length&&!this[u])this.emit("drain");return r}end(t,r,n){if(typeof t==="function"){n=t;t=undefined}if(typeof r==="function"){n=r;r="utf8"}if(t!==undefined)this.write(t,r);if(n)this.once("end",n);this[u]=true;this.writable=false;if(this[P]||!this[D])this[l]();return this}[M](){if(this[H])return;if(!this[Z]&&!this[U].length){this[X]=true}this[D]=false;this[P]=true;this.emit("resume");if(this[L].length)this[S]();else if(this[u])this[l]();else this.emit("drain")}resume(){return this[M]()}pause(){this[P]=false;this[D]=true;this[X]=false}get destroyed(){return this[H]}get flowing(){return this[P]}get paused(){return this[D]}[B](t){if(this[j])this[q]+=1;else this[q]+=t.length;this[L].push(t)}[F](){if(this[j])this[q]-=1;else this[q]-=this[L][0].length;return this[L].shift()}[S](t=false){do{}while(this[w](this[F]())&&this[L].length);if(!t&&!this[L].length&&!this[u])this.emit("drain")}[w](t){this.emit("data",t);return this[P]}pipe(t,r){if(this[H])return t;this[X]=false;const n=this[d];r=r||{};if(t===o.stdout||t===o.stderr)r.end=false;else r.end=r.end!==false;r.proxyErrors=!!r.proxyErrors;if(n){if(r.end)t.end()}else{this[U].push(!r.proxyErrors?new Pipe(this,t,r):new PipeProxyErrors(this,t,r));if(this[W])defer((()=>this[M]()));else this[M]()}return t}unpipe(t){const r=this[U].find((r=>r.dest===t));if(r){if(this[U].length===1){if(this[P]&&this[Z]===0){this[P]=false}this[U]=[]}else this[U].splice(this[U].indexOf(r),1);r.unpipe()}}addListener(t,r){return this.on(t,r)}on(t,r){const n=super.on(t,r);if(t==="data"){this[X]=false;this[Z]++;if(!this[U].length&&!this[P]){this[M]()}}else if(t==="readable"&&this[q]!==0){super.emit("readable")}else if(isEndish(t)&&this[d]){super.emit(t);this.removeAllListeners(t)}else if(t==="error"&&this[g]){const t=r;if(this[W])defer((()=>t.call(this,this[g])));else t.call(this,this[g])}return n}removeListener(t,r){return this.off(t,r)}off(t,r){const n=super.off(t,r);if(t==="data"){this[Z]=this.listeners("data").length;if(this[Z]===0&&!this[X]&&!this[U].length){this[P]=false}}return n}removeAllListeners(t){const r=super.removeAllListeners(t);if(t==="data"||t===undefined){this[Z]=0;if(!this[X]&&!this[U].length){this[P]=false}}return r}get emittedEnd(){return this[d]}[l](){if(!this[p]&&!this[d]&&!this[H]&&this[L].length===0&&this[u]){this[p]=true;this.emit("end");this.emit("prefinish");this.emit("finish");if(this[v])this.emit("close");this[p]=false}}emit(t,...r){const n=r[0];if(t!=="error"&&t!=="close"&&t!==H&&this[H]){return false}else if(t==="data"){return!this[j]&&!n?false:this[W]?(defer((()=>this[V](n))),true):this[V](n)}else if(t==="end"){return this[Y]()}else if(t==="close"){this[v]=true;if(!this[d]&&!this[H])return false;const t=super.emit("close");this.removeAllListeners("close");return t}else if(t==="error"){this[g]=n;super.emit(z,n);const t=!this[J]||this.listeners("error").length?super.emit("error",n):false;this[l]();return t}else if(t==="resume"){const t=super.emit("resume");this[l]();return t}else if(t==="finish"||t==="prefinish"){const r=super.emit(t);this.removeAllListeners(t);return r}const i=super.emit(t,...r);this[l]();return i}[V](t){for(const r of this[U]){if(r.dest.write(t)===false)this.pause()}const r=this[X]?false:super.emit("data",t);this[l]();return r}[Y](){if(this[d])return false;this[d]=true;this.readable=false;return this[W]?(defer((()=>this[G]())),true):this[G]()}[G](){if(this[N]){const t=this[N].end();if(t){for(const r of this[U]){r.dest.write(t)}if(!this[X])super.emit("data",t)}}for(const t of this[U]){t.end()}const t=super.emit("end");this.removeAllListeners("end");return t}async collect(){const t=Object.assign([],{dataLength:0});if(!this[j])t.dataLength=0;const r=this.promise();this.on("data",(r=>{t.push(r);if(!this[j])t.dataLength+=r.length}));await r;return t}async concat(){if(this[j]){throw new Error("cannot concat in objectMode")}const t=await this.collect();return this[x]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise(((t,r)=>{this.on(H,(()=>r(new Error("stream destroyed"))));this.on("error",(t=>r(t)));this.on("end",(()=>t()))}))}[Symbol.asyncIterator](){this[X]=false;let t=false;const stop=async()=>{this.pause();t=true;return{value:undefined,done:true}};const next=()=>{if(t)return stop();const r=this.read();if(r!==null)return Promise.resolve({done:false,value:r});if(this[u])return stop();let n;let i;const onerr=t=>{this.off("data",ondata);this.off("end",onend);this.off(H,ondestroy);stop();i(t)};const ondata=t=>{this.off("error",onerr);this.off("end",onend);this.off(H,ondestroy);this.pause();n({value:t,done:!!this[u]})};const onend=()=>{this.off("error",onerr);this.off("data",ondata);this.off(H,ondestroy);stop();n({done:true,value:undefined})};const ondestroy=()=>onerr(new Error("stream destroyed"));return new Promise(((t,r)=>{i=r;n=t;this.once(H,ondestroy);this.once("error",onerr);this.once("end",onend);this.once("data",ondata)}))};return{next:next,throw:stop,return:stop,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[X]=false;let t=false;const stop=()=>{this.pause();this.off(z,stop);this.off(H,stop);this.off("end",stop);t=true;return{done:true,value:undefined}};const next=()=>{if(t)return stop();const r=this.read();return r===null?stop():{done:false,value:r}};this.once("end",stop);this.once(z,stop);this.once(H,stop);return{next:next,throw:stop,return:stop,[Symbol.iterator](){return this}}}destroy(t){if(this[H]){if(t)this.emit("error",t);else this.emit(H);return this}this[H]=true;this[X]=true;this[L].length=0;this[q]=0;const r=this;if(typeof r.close==="function"&&!this[v])r.close();if(t)this.emit("error",t);else this.emit(H);return this}static get isStream(){return r.isStream}}r.Minipass=Minipass},51081:function(t,r,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,r,n,i){if(i===undefined)i=n;var o=Object.getOwnPropertyDescriptor(r,n);if(!o||("get"in o?!r.__esModule:o.writable||o.configurable)){o={enumerable:true,get:function(){return r[n]}}}Object.defineProperty(t,i,o)}:function(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]});var o=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:true,value:r})}:function(t,r){t["default"]=r});var a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n))i(r,t,n);o(r,t);return r};Object.defineProperty(r,"__esModule",{value:true});r.PathScurry=r.Path=r.PathScurryDarwin=r.PathScurryPosix=r.PathScurryWin32=r.PathScurryBase=r.PathPosix=r.PathWin32=r.PathBase=r.ChildrenCache=r.ResolveCache=void 0;const s=n(66091);const c=n(71017);const u=n(57310);const l=a(n(57147));const d=n(57147);const p=d.realpathSync.native;const g=n(73292);const v=n(14968);const E={lstatSync:d.lstatSync,readdir:d.readdir,readdirSync:d.readdirSync,readlinkSync:d.readlinkSync,realpathSync:p,promises:{lstat:g.lstat,readdir:g.readdir,readlink:g.readlink,realpath:g.realpath}};const fsFromOption=t=>!t||t===E||t===l?E:{...E,...t,promises:{...E.promises,...t.promises||{}}};const S=/^\\\\\?\\([a-z]:)\\?$/i;const uncToDrive=t=>t.replace(/\//g,"\\").replace(S,"$1\\");const w=/[\\\/]/;const x=0;const N=1;const P=2;const D=4;const M=6;const L=8;const U=10;const q=12;const B=15;const F=~B;const j=16;const H=32;const z=64;const V=128;const Y=256;const G=512;const W=z|V|G;const $=1023;const entToType=t=>t.isFile()?L:t.isDirectory()?D:t.isSymbolicLink()?U:t.isCharacterDevice()?P:t.isBlockDevice()?M:t.isSocket()?q:t.isFIFO()?N:x;const K=new Map;const normalize=t=>{const r=K.get(t);if(r)return r;const n=t.normalize("NFKD");K.set(t,n);return n};const J=new Map;const normalizeNocase=t=>{const r=J.get(t);if(r)return r;const n=normalize(t.toLowerCase());J.set(t,n);return n};class ResolveCache extends s.LRUCache{constructor(){super({max:256})}}r.ResolveCache=ResolveCache;class ChildrenCache extends s.LRUCache{constructor(t=16*1024){super({maxSize:t,sizeCalculation:t=>t.length+1})}}r.ChildrenCache=ChildrenCache;const Z=Symbol("PathScurry setAsCwd");class PathBase{name;root;roots;parent;nocase;#k;#x;get dev(){return this.#x}#N;get mode(){return this.#N}#P;get nlink(){return this.#P}#D;get uid(){return this.#D}#M;get gid(){return this.#M}#L;get rdev(){return this.#L}#U;get blksize(){return this.#U}#q;get ino(){return this.#q}#B;get size(){return this.#B}#F;get blocks(){return this.#F}#j;get atimeMs(){return this.#j}#H;get mtimeMs(){return this.#H}#z;get ctimeMs(){return this.#z}#V;get birthtimeMs(){return this.#V}#Y;get atime(){return this.#Y}#G;get mtime(){return this.#G}#W;get ctime(){return this.#W}#$;get birthtime(){return this.#$}#K;#J;#Z;#X;#Q;#ee;#te;#re;#ne;#ie;get path(){return(this.parent||this).fullpath()}constructor(t,r=x,n,i,o,a,s){this.name=t;this.#K=o?normalizeNocase(t):normalize(t);this.#te=r&$;this.nocase=o;this.roots=i;this.root=n||this;this.#re=a;this.#Z=s.fullpath;this.#Q=s.relative;this.#ee=s.relativePosix;this.parent=s.parent;if(this.parent){this.#k=this.parent.#k}else{this.#k=fsFromOption(s.fs)}}depth(){if(this.#J!==undefined)return this.#J;if(!this.parent)return this.#J=0;return this.#J=this.parent.depth()+1}childrenCache(){return this.#re}resolve(t){if(!t){return this}const r=this.getRootString(t);const n=t.substring(r.length);const i=n.split(this.splitSep);const o=r?this.getRoot(r).#oe(i):this.#oe(i);return o}#oe(t){let r=this;for(const n of t){r=r.child(n)}return r}children(){const t=this.#re.get(this);if(t){return t}const r=Object.assign([],{provisional:0});this.#re.set(this,r);this.#te&=~j;return r}child(t,r){if(t===""||t==="."){return this}if(t===".."){return this.parent||this}const n=this.children();const i=this.nocase?normalizeNocase(t):normalize(t);for(const t of n){if(t.#K===i){return t}}const o=this.parent?this.sep:"";const a=this.#Z?this.#Z+o+t:undefined;const s=this.newChild(t,x,{...r,parent:this,fullpath:a});if(!this.canReaddir()){s.#te|=V}n.push(s);return s}relative(){if(this.#Q!==undefined){return this.#Q}const t=this.name;const r=this.parent;if(!r){return this.#Q=this.name}const n=r.relative();return n+(!n||!r.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.#ee!==undefined)return this.#ee;const t=this.name;const r=this.parent;if(!r){return this.#ee=this.fullpathPosix()}const n=r.relativePosix();return n+(!n||!r.parent?"":"/")+t}fullpath(){if(this.#Z!==undefined){return this.#Z}const t=this.name;const r=this.parent;if(!r){return this.#Z=this.name}const n=r.fullpath();const i=n+(!r.parent?"":this.sep)+t;return this.#Z=i}fullpathPosix(){if(this.#X!==undefined)return this.#X;if(this.sep==="/")return this.#X=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(t)){return this.#X=`//?/${t}`}else{return this.#X=t}}const t=this.parent;const r=t.fullpathPosix();const n=r+(!r||!t.parent?"":"/")+this.name;return this.#X=n}isUnknown(){return(this.#te&B)===x}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#te&B)===L}isDirectory(){return(this.#te&B)===D}isCharacterDevice(){return(this.#te&B)===P}isBlockDevice(){return(this.#te&B)===M}isFIFO(){return(this.#te&B)===N}isSocket(){return(this.#te&B)===q}isSymbolicLink(){return(this.#te&U)===U}lstatCached(){return this.#te&H?this:undefined}readlinkCached(){return this.#ne}realpathCached(){return this.#ie}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#ne)return true;if(!this.parent)return false;const t=this.#te&B;return!(t!==x&&t!==U||this.#te&Y||this.#te&V)}calledReaddir(){return!!(this.#te&j)}isENOENT(){return!!(this.#te&V)}isNamed(t){return!this.nocase?this.#K===normalize(t):this.#K===normalizeNocase(t)}async readlink(){const t=this.#ne;if(t){return t}if(!this.canReadlink()){return undefined}if(!this.parent){return undefined}try{const t=await this.#k.promises.readlink(this.fullpath());const r=(await this.parent.realpath())?.resolve(t);if(r){return this.#ne=r}}catch(t){this.#ae(t.code);return undefined}}readlinkSync(){const t=this.#ne;if(t){return t}if(!this.canReadlink()){return undefined}if(!this.parent){return undefined}try{const t=this.#k.readlinkSync(this.fullpath());const r=this.parent.realpathSync()?.resolve(t);if(r){return this.#ne=r}}catch(t){this.#ae(t.code);return undefined}}#se(t){this.#te|=j;for(let r=t.provisional;r<t.length;r++){const n=t[r];if(n)n.#ce()}}#ce(){if(this.#te&V)return;this.#te=(this.#te|V)&F;this.#ue()}#ue(){const t=this.children();t.provisional=0;for(const r of t){r.#ce()}}#le(){this.#te|=G;this.#fe()}#fe(){if(this.#te&z)return;let t=this.#te;if((t&B)===D)t&=F;this.#te=t|z;this.#ue()}#de(t=""){if(t==="ENOTDIR"||t==="EPERM"){this.#fe()}else if(t==="ENOENT"){this.#ce()}else{this.children().provisional=0}}#pe(t=""){if(t==="ENOTDIR"){const t=this.parent;t.#fe()}else if(t==="ENOENT"){this.#ce()}}#ae(t=""){let r=this.#te;r|=Y;if(t==="ENOENT")r|=V;if(t==="EINVAL"||t==="UNKNOWN"){r&=F}this.#te=r;if(t==="ENOTDIR"&&this.parent){this.parent.#fe()}}#he(t,r){return this.#me(t,r)||this.#ge(t,r)}#ge(t,r){const n=entToType(t);const i=this.newChild(t.name,n,{parent:this});const o=i.#te&B;if(o!==D&&o!==U&&o!==x){i.#te|=z}r.unshift(i);r.provisional++;return i}#me(t,r){for(let n=r.provisional;n<r.length;n++){const i=r[n];const o=this.nocase?normalizeNocase(t.name):normalize(t.name);if(o!==i.#K){continue}return this.#ve(t,i,n,r)}}#ve(t,r,n,i){const o=r.name;r.#te=r.#te&F|entToType(t);if(o!==t.name)r.name=t.name;if(n!==i.provisional){if(n===i.length-1)i.pop();else i.splice(n,1);i.unshift(r)}i.provisional++;return r}async lstat(){if((this.#te&V)===0){try{this.#ye(await this.#k.promises.lstat(this.fullpath()));return this}catch(t){this.#pe(t.code)}}}lstatSync(){if((this.#te&V)===0){try{this.#ye(this.#k.lstatSync(this.fullpath()));return this}catch(t){this.#pe(t.code)}}}#ye(t){const{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:s,ctime:c,ctimeMs:u,dev:l,gid:d,ino:p,mode:g,mtime:v,mtimeMs:E,nlink:S,rdev:w,size:N,uid:P}=t;this.#Y=r;this.#j=n;this.#$=i;this.#V=o;this.#U=a;this.#F=s;this.#W=c;this.#z=u;this.#x=l;this.#M=d;this.#q=p;this.#N=g;this.#G=v;this.#H=E;this.#P=S;this.#L=w;this.#B=N;this.#D=P;const M=entToType(t);this.#te=this.#te&F|M|H;if(M!==x&&M!==D&&M!==U){this.#te|=z}}#_e=[];#Ee=false;#be(t){this.#Ee=false;const r=this.#_e.slice();this.#_e.length=0;r.forEach((r=>r(null,t)))}readdirCB(t,r=false){if(!this.canReaddir()){if(r)t(null,[]);else queueMicrotask((()=>t(null,[])));return}const n=this.children();if(this.calledReaddir()){const i=n.slice(0,n.provisional);if(r)t(null,i);else queueMicrotask((()=>t(null,i)));return}this.#_e.push(t);if(this.#Ee){return}this.#Ee=true;const i=this.fullpath();this.#k.readdir(i,{withFileTypes:true},((t,r)=>{if(t){this.#de(t.code);n.provisional=0}else{for(const t of r){this.#he(t,n)}this.#se(n)}this.#be(n.slice(0,n.provisional));return}))}#Se;async readdir(){if(!this.canReaddir()){return[]}const t=this.children();if(this.calledReaddir()){return t.slice(0,t.provisional)}const r=this.fullpath();if(this.#Se){await this.#Se}else{let resolve=()=>{};this.#Se=new Promise((t=>resolve=t));try{for(const n of await this.#k.promises.readdir(r,{withFileTypes:true})){this.#he(n,t)}this.#se(t)}catch(r){this.#de(r.code);t.provisional=0}this.#Se=undefined;resolve()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir()){return[]}const t=this.children();if(this.calledReaddir()){return t.slice(0,t.provisional)}const r=this.fullpath();try{for(const n of this.#k.readdirSync(r,{withFileTypes:true})){this.#he(n,t)}this.#se(t)}catch(r){this.#de(r.code);t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#te&W)return false;const t=B&this.#te;if(!(t===x||t===D||t===U)){return false}return true}shouldWalk(t,r){return(this.#te&D)===D&&!(this.#te&W)&&!t.has(this)&&(!r||r(this))}async realpath(){if(this.#ie)return this.#ie;if((G|Y|V)&this.#te)return undefined;try{const t=await this.#k.promises.realpath(this.fullpath());return this.#ie=this.resolve(t)}catch(t){this.#le()}}realpathSync(){if(this.#ie)return this.#ie;if((G|Y|V)&this.#te)return undefined;try{const t=this.#k.realpathSync(this.fullpath());return this.#ie=this.resolve(t)}catch(t){this.#le()}}[Z](t){if(t===this)return;const r=new Set([]);let n=[];let i=this;while(i&&i.parent){r.add(i);i.#Q=n.join(this.sep);i.#ee=n.join("/");i=i.parent;n.push("..")}i=t;while(i&&i.parent&&!r.has(i)){i.#Q=undefined;i.#ee=undefined;i=i.parent}}}r.PathBase=PathBase;class PathWin32 extends PathBase{sep="\\";splitSep=w;constructor(t,r=x,n,i,o,a,s){super(t,r,n,i,o,a,s)}newChild(t,r=x,n={}){return new PathWin32(t,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(t){return c.win32.parse(t).root}getRoot(t){t=uncToDrive(t.toUpperCase());if(t===this.root.name){return this.root}for(const[r,n]of Object.entries(this.roots)){if(this.sameRoot(t,r)){return this.roots[t]=n}}return this.roots[t]=new PathScurryWin32(t,this).root}sameRoot(t,r=this.root.name){t=t.toUpperCase().replace(/\//g,"\\").replace(S,"$1\\");return t===r}}r.PathWin32=PathWin32;class PathPosix extends PathBase{splitSep="/";sep="/";constructor(t,r=x,n,i,o,a,s){super(t,r,n,i,o,a,s)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,r=x,n={}){return new PathPosix(t,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}}r.PathPosix=PathPosix;class PathScurryBase{root;rootPath;roots;cwd;#Te;#Ce;#re;nocase;#k;constructor(t=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=E}={}){this.#k=fsFromOption(a);if(t instanceof URL||t.startsWith("file://")){t=(0,u.fileURLToPath)(t)}const s=r.resolve(t);this.roots=Object.create(null);this.rootPath=this.parseRootPath(s);this.#Te=new ResolveCache;this.#Ce=new ResolveCache;this.#re=new ChildrenCache(o);const c=s.substring(this.rootPath.length).split(n);if(c.length===1&&!c[0]){c.pop()}if(i===undefined){throw new TypeError("must provide nocase setting to PathScurryBase ctor")}this.nocase=i;this.root=this.newRoot(this.#k);this.roots[this.rootPath]=this.root;let l=this.root;let d=c.length-1;const p=r.sep;let g=this.rootPath;let v=false;for(const t of c){const r=d--;l=l.child(t,{relative:new Array(r).fill("..").join(p),relativePosix:new Array(r).fill("..").join("/"),fullpath:g+=(v?"":p)+t});v=true}this.cwd=l}depth(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.depth()}childrenCache(){return this.#re}resolve(...t){let r="";for(let n=t.length-1;n>=0;n--){const i=t[n];if(!i||i===".")continue;r=r?`${i}/${r}`:i;if(this.isAbsolute(i)){break}}const n=this.#Te.get(r);if(n!==undefined){return n}const i=this.cwd.resolve(r).fullpath();this.#Te.set(r,i);return i}resolvePosix(...t){let r="";for(let n=t.length-1;n>=0;n--){const i=t[n];if(!i||i===".")continue;r=r?`${i}/${r}`:i;if(this.isAbsolute(i)){break}}const n=this.#Ce.get(r);if(n!==undefined){return n}const i=this.cwd.resolve(r).fullpathPosix();this.#Ce.set(r,i);return i}relative(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.relative()}relativePosix(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.relativePosix()}basename(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.name}dirname(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return(t.parent||t).fullpath()}async readdir(t=this.cwd,r={withFileTypes:true}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n}=r;if(!t.canReaddir()){return[]}else{const r=await t.readdir();return n?r:r.map((t=>t.name))}}readdirSync(t=this.cwd,r={withFileTypes:true}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n=true}=r;if(!t.canReaddir()){return[]}else if(n){return t.readdirSync()}else{return t.readdirSync().map((t=>t.name))}}async lstat(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.lstat()}lstatSync(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:r}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t.withFileTypes;t=this.cwd}const n=await t.readlink();return r?n:n?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:r}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t.withFileTypes;t=this.cwd}const n=t.readlinkSync();return r?n:n?.fullpath()}async realpath(t=this.cwd,{withFileTypes:r}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t.withFileTypes;t=this.cwd}const n=await t.realpath();return r?n:n?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:r}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t.withFileTypes;t=this.cwd}const n=t.realpathSync();return r?n:n?.fullpath()}async walk(t=this.cwd,r={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n=true,follow:i=false,filter:o,walkFilter:a}=r;const s=[];if(!o||o(t)){s.push(n?t:t.fullpath())}const c=new Set;const walk=(t,r)=>{c.add(t);t.readdirCB(((t,u)=>{if(t){return r(t)}let l=u.length;if(!l)return r();const next=()=>{if(--l===0){r()}};for(const t of u){if(!o||o(t)){s.push(n?t:t.fullpath())}if(i&&t.isSymbolicLink()){t.realpath().then((t=>t?.isUnknown()?t.lstat():t)).then((t=>t?.shouldWalk(c,a)?walk(t,next):next()))}else{if(t.shouldWalk(c,a)){walk(t,next)}else{next()}}}}),true)};const u=t;return new Promise(((t,r)=>{walk(u,(n=>{if(n)return r(n);t(s)}))}))}walkSync(t=this.cwd,r={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n=true,follow:i=false,filter:o,walkFilter:a}=r;const s=[];if(!o||o(t)){s.push(n?t:t.fullpath())}const c=new Set([t]);for(const t of c){const r=t.readdirSync();for(const t of r){if(!o||o(t)){s.push(n?t:t.fullpath())}let r=t;if(t.isSymbolicLink()){if(!(i&&(r=t.realpathSync())))continue;if(r.isUnknown())r.lstatSync()}if(r.shouldWalk(c,a)){c.add(r)}}}return s}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,r={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}return this.stream(t,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,r={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n=true,follow:i=false,filter:o,walkFilter:a}=r;if(!o||o(t)){yield n?t:t.fullpath()}const s=new Set([t]);for(const t of s){const r=t.readdirSync();for(const t of r){if(!o||o(t)){yield n?t:t.fullpath()}let r=t;if(t.isSymbolicLink()){if(!(i&&(r=t.realpathSync())))continue;if(r.isUnknown())r.lstatSync()}if(r.shouldWalk(s,a)){s.add(r)}}}}stream(t=this.cwd,r={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n=true,follow:i=false,filter:o,walkFilter:a}=r;const s=new v.Minipass({objectMode:true});if(!o||o(t)){s.write(n?t:t.fullpath())}const c=new Set;const u=[t];let l=0;const process=()=>{let t=false;while(!t){const r=u.shift();if(!r){if(l===0)s.end();return}l++;c.add(r);const onReaddir=(r,p,g=false)=>{if(r)return s.emit("error",r);if(i&&!g){const t=[];for(const r of p){if(r.isSymbolicLink()){t.push(r.realpath().then((t=>t?.isUnknown()?t.lstat():t)))}}if(t.length){Promise.all(t).then((()=>onReaddir(null,p,true)));return}}for(const r of p){if(r&&(!o||o(r))){if(!s.write(n?r:r.fullpath())){t=true}}}l--;for(const t of p){const r=t.realpathCached()||t;if(r.shouldWalk(c,a)){u.push(r)}}if(t&&!s.flowing){s.once("drain",process)}else if(!d){process()}};let d=true;r.readdirCB(onReaddir,true);d=false}};process();return s}streamSync(t=this.cwd,r={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){r=t;t=this.cwd}const{withFileTypes:n=true,follow:i=false,filter:o,walkFilter:a}=r;const s=new v.Minipass({objectMode:true});const c=new Set;if(!o||o(t)){s.write(n?t:t.fullpath())}const u=[t];let l=0;const process=()=>{let t=false;while(!t){const r=u.shift();if(!r){if(l===0)s.end();return}l++;c.add(r);const d=r.readdirSync();for(const r of d){if(!o||o(r)){if(!s.write(n?r:r.fullpath())){t=true}}}l--;for(const t of d){let r=t;if(t.isSymbolicLink()){if(!(i&&(r=t.realpathSync())))continue;if(r.isUnknown())r.lstatSync()}if(r.shouldWalk(c,a)){u.push(r)}}}if(t&&!s.flowing)s.once("drain",process)};process();return s}chdir(t=this.cwd){const r=this.cwd;this.cwd=typeof t==="string"?this.cwd.resolve(t):t;this.cwd[Z](r)}}r.PathScurryBase=PathScurryBase;class PathScurryWin32 extends PathScurryBase{sep="\\";constructor(t=process.cwd(),r={}){const{nocase:n=true}=r;super(t,c.win32,"\\",{...r,nocase:n});this.nocase=n;for(let t=this.cwd;t;t=t.parent){t.nocase=this.nocase}}parseRootPath(t){return c.win32.parse(t).root.toUpperCase()}newRoot(t){return new PathWin32(this.rootPath,D,undefined,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}r.PathScurryWin32=PathScurryWin32;class PathScurryPosix extends PathScurryBase{sep="/";constructor(t=process.cwd(),r={}){const{nocase:n=false}=r;super(t,c.posix,"/",{...r,nocase:n});this.nocase=n}parseRootPath(t){return"/"}newRoot(t){return new PathPosix(this.rootPath,D,undefined,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}r.PathScurryPosix=PathScurryPosix;class PathScurryDarwin extends PathScurryPosix{constructor(t=process.cwd(),r={}){const{nocase:n=true}=r;super(t,{...r,nocase:n})}}r.PathScurryDarwin=PathScurryDarwin;r.Path=process.platform==="win32"?PathWin32:PathPosix;r.PathScurry=process.platform==="win32"?PathScurryWin32:process.platform==="darwin"?PathScurryDarwin:PathScurryPosix},66091:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:true});r.LRUCache=void 0;const n=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date;const i=new Set;const o=typeof process==="object"&&!!process?process:{};const emitWarning=(t,r,n,i)=>{typeof o.emitWarning==="function"?o.emitWarning(t,r,n,i):console.error(`[${n}] ${r}: ${t}`)};let a=globalThis.AbortController;let s=globalThis.AbortSignal;if(typeof a==="undefined"){s=class AbortSignal{onabort;_onabort=[];reason;aborted=false;addEventListener(t,r){this._onabort.push(r)}};a=class AbortController{constructor(){warnACPolyfill()}signal=new s;abort(t){if(this.signal.aborted)return;this.signal.reason=t;this.signal.aborted=true;for(const r of this.signal._onabort){r(t)}this.signal.onabort?.(t)}};let t=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const warnACPolyfill=()=>{if(!t)return;t=false;emitWarning("AbortController is not defined. If using lru-cache in "+"node 14, load an AbortController polyfill from the "+"`node-abort-controller` package. A minimal polyfill is "+"provided for use by LRUCache.fetch(), but it should not be "+"relied upon in other contexts (eg, passing it to other APIs that "+"use AbortController/AbortSignal might have undesirable effects). "+"You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",warnACPolyfill)}}const shouldWarn=t=>!i.has(t);const c=Symbol("type");const isPosInt=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t);const getUintArray=t=>!isPosInt(t)?null:t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ZeroArray:null;class ZeroArray extends Array{constructor(t){super(t);this.fill(0)}}class Stack{heap;length;static#we=false;static create(t){const r=getUintArray(t);if(!r)return[];Stack.#we=true;const n=new Stack(t,r);Stack.#we=false;return n}constructor(t,r){if(!Stack.#we){throw new TypeError("instantiate Stack using Stack.create(n)")}this.heap=new r(t);this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class LRUCache{#Ae;#Ie;#Oe;#Re;#ke;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#B;#xe;#Ne;#Pe;#De;#Me;#Le;#Ue;#qe;#Be;#Fe;#je;#He;#ze;#Ve;#Ye;#Ge;static unsafeExposeInternals(t){return{starts:t.#He,ttls:t.#ze,sizes:t.#je,keyMap:t.#Ne,keyList:t.#Pe,valList:t.#De,next:t.#Me,prev:t.#Le,get head(){return t.#Ue},get tail(){return t.#qe},free:t.#Be,isBackgroundFetch:r=>t.#We(r),backgroundFetch:(r,n,i,o)=>t.#$e(r,n,i,o),moveToTail:r=>t.#Ke(r),indexes:r=>t.#Je(r),rindexes:r=>t.#Ze(r),isStale:r=>t.#Xe(r)}}get max(){return this.#Ae}get maxSize(){return this.#Ie}get calculatedSize(){return this.#xe}get size(){return this.#B}get fetchMethod(){return this.#ke}get dispose(){return this.#Oe}get disposeAfter(){return this.#Re}constructor(t){const{max:r=0,ttl:n,ttlResolution:o=1,ttlAutopurge:a,updateAgeOnGet:s,updateAgeOnHas:c,allowStale:u,dispose:l,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:g,maxSize:v=0,maxEntrySize:E=0,sizeCalculation:S,fetchMethod:w,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:N,allowStaleOnFetchRejection:P,allowStaleOnFetchAbort:D,ignoreFetchAbort:M}=t;if(r!==0&&!isPosInt(r)){throw new TypeError("max option must be a nonnegative integer")}const L=r?getUintArray(r):Array;if(!L){throw new Error("invalid max value: "+r)}this.#Ae=r;this.#Ie=v;this.maxEntrySize=E||this.#Ie;this.sizeCalculation=S;if(this.sizeCalculation){if(!this.#Ie&&!this.maxEntrySize){throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize")}if(typeof this.sizeCalculation!=="function"){throw new TypeError("sizeCalculation set to non-function")}}if(w!==undefined&&typeof w!=="function"){throw new TypeError("fetchMethod must be a function if specified")}this.#ke=w;this.#Ye=!!w;this.#Ne=new Map;this.#Pe=new Array(r).fill(undefined);this.#De=new Array(r).fill(undefined);this.#Me=new L(r);this.#Le=new L(r);this.#Ue=0;this.#qe=0;this.#Be=Stack.create(r);this.#B=0;this.#xe=0;if(typeof l==="function"){this.#Oe=l}if(typeof d==="function"){this.#Re=d;this.#Fe=[]}else{this.#Re=undefined;this.#Fe=undefined}this.#Ve=!!this.#Oe;this.#Ge=!!this.#Re;this.noDisposeOnSet=!!p;this.noUpdateTTL=!!g;this.noDeleteOnFetchRejection=!!x;this.allowStaleOnFetchRejection=!!P;this.allowStaleOnFetchAbort=!!D;this.ignoreFetchAbort=!!M;if(this.maxEntrySize!==0){if(this.#Ie!==0){if(!isPosInt(this.#Ie)){throw new TypeError("maxSize must be a positive integer if specified")}}if(!isPosInt(this.maxEntrySize)){throw new TypeError("maxEntrySize must be a positive integer if specified")}this.#Qe()}this.allowStale=!!u;this.noDeleteOnStaleGet=!!N;this.updateAgeOnGet=!!s;this.updateAgeOnHas=!!c;this.ttlResolution=isPosInt(o)||o===0?o:1;this.ttlAutopurge=!!a;this.ttl=n||0;if(this.ttl){if(!isPosInt(this.ttl)){throw new TypeError("ttl must be a positive integer if specified")}this.#et()}if(this.#Ae===0&&this.ttl===0&&this.#Ie===0){throw new TypeError("At least one of max, maxSize, or ttl is required")}if(!this.ttlAutopurge&&!this.#Ae&&!this.#Ie){const t="LRU_CACHE_UNBOUNDED";if(shouldWarn(t)){i.add(t);const r="TTL caching without ttlAutopurge, max, or maxSize can "+"result in unbounded memory consumption.";emitWarning(r,"UnboundedCacheWarning",t,LRUCache)}}}getRemainingTTL(t){return this.#Ne.has(t)?Infinity:0}#et(){const t=new ZeroArray(this.#Ae);const r=new ZeroArray(this.#Ae);this.#ze=t;this.#He=r;this.#tt=(i,o,a=n.now())=>{r[i]=o!==0?a:0;t[i]=o;if(o!==0&&this.ttlAutopurge){const t=setTimeout((()=>{if(this.#Xe(i)){this.delete(this.#Pe[i])}}),o+1);if(t.unref){t.unref()}}};this.#rt=i=>{r[i]=t[i]!==0?n.now():0};this.#nt=(n,o)=>{if(t[o]){const a=t[o];const s=r[o];if(!a||!s)return;n.ttl=a;n.start=s;n.now=i||getNow();const c=n.now-s;n.remainingTTL=a-c}};let i=0;const getNow=()=>{const t=n.now();if(this.ttlResolution>0){i=t;const r=setTimeout((()=>i=0),this.ttlResolution);if(r.unref){r.unref()}}return t};this.getRemainingTTL=n=>{const o=this.#Ne.get(n);if(o===undefined){return 0}const a=t[o];const s=r[o];if(!a||!s){return Infinity}const c=(i||getNow())-s;return a-c};this.#Xe=n=>{const o=r[n];const a=t[n];return!!a&&!!o&&(i||getNow())-o>a}}#rt=()=>{};#nt=()=>{};#tt=()=>{};#Xe=()=>false;#Qe(){const t=new ZeroArray(this.#Ae);this.#xe=0;this.#je=t;this.#it=r=>{this.#xe-=t[r];t[r]=0};this.#ot=(t,r,n,i)=>{if(this.#We(r)){return 0}if(!isPosInt(n)){if(i){if(typeof i!=="function"){throw new TypeError("sizeCalculation must be a function")}n=i(r,t);if(!isPosInt(n)){throw new TypeError("sizeCalculation return invalid (expect positive integer)")}}else{throw new TypeError("invalid size value (must be positive integer). "+"When maxSize or maxEntrySize is used, sizeCalculation "+"or size must be set.")}}return n};this.#at=(r,n,i)=>{t[r]=n;if(this.#Ie){const n=this.#Ie-t[r];while(this.#xe>n){this.#st(true)}}this.#xe+=t[r];if(i){i.entrySize=n;i.totalCalculatedSize=this.#xe}}}#it=t=>{};#at=(t,r,n)=>{};#ot=(t,r,n,i)=>{if(n||i){throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}return 0};*#Je({allowStale:t=this.allowStale}={}){if(this.#B){for(let r=this.#qe;true;){if(!this.#ct(r)){break}if(t||!this.#Xe(r)){yield r}if(r===this.#Ue){break}else{r=this.#Le[r]}}}}*#Ze({allowStale:t=this.allowStale}={}){if(this.#B){for(let r=this.#Ue;true;){if(!this.#ct(r)){break}if(t||!this.#Xe(r)){yield r}if(r===this.#qe){break}else{r=this.#Me[r]}}}}#ct(t){return t!==undefined&&this.#Ne.get(this.#Pe[t])===t}*entries(){for(const t of this.#Je()){if(this.#De[t]!==undefined&&this.#Pe[t]!==undefined&&!this.#We(this.#De[t])){yield[this.#Pe[t],this.#De[t]]}}}*rentries(){for(const t of this.#Ze()){if(this.#De[t]!==undefined&&this.#Pe[t]!==undefined&&!this.#We(this.#De[t])){yield[this.#Pe[t],this.#De[t]]}}}*keys(){for(const t of this.#Je()){const r=this.#Pe[t];if(r!==undefined&&!this.#We(this.#De[t])){yield r}}}*rkeys(){for(const t of this.#Ze()){const r=this.#Pe[t];if(r!==undefined&&!this.#We(this.#De[t])){yield r}}}*values(){for(const t of this.#Je()){const r=this.#De[t];if(r!==undefined&&!this.#We(this.#De[t])){yield this.#De[t]}}}*rvalues(){for(const t of this.#Ze()){const r=this.#De[t];if(r!==undefined&&!this.#We(this.#De[t])){yield this.#De[t]}}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,r={}){for(const n of this.#Je()){const i=this.#De[n];const o=this.#We(i)?i.__staleWhileFetching:i;if(o===undefined)continue;if(t(o,this.#Pe[n],this)){return this.get(this.#Pe[n],r)}}}forEach(t,r=this){for(const n of this.#Je()){const i=this.#De[n];const o=this.#We(i)?i.__staleWhileFetching:i;if(o===undefined)continue;t.call(r,o,this.#Pe[n],this)}}rforEach(t,r=this){for(const n of this.#Ze()){const i=this.#De[n];const o=this.#We(i)?i.__staleWhileFetching:i;if(o===undefined)continue;t.call(r,o,this.#Pe[n],this)}}purgeStale(){let t=false;for(const r of this.#Ze({allowStale:true})){if(this.#Xe(r)){this.delete(this.#Pe[r]);t=true}}return t}info(t){const r=this.#Ne.get(t);if(r===undefined)return undefined;const i=this.#De[r];const o=this.#We(i)?i.__staleWhileFetching:i;if(o===undefined)return undefined;const a={value:o};if(this.#ze&&this.#He){const t=this.#ze[r];const i=this.#He[r];if(t&&i){const r=t-(n.now()-i);a.ttl=r;a.start=Date.now()}}if(this.#je){a.size=this.#je[r]}return a}dump(){const t=[];for(const r of this.#Je({allowStale:true})){const i=this.#Pe[r];const o=this.#De[r];const a=this.#We(o)?o.__staleWhileFetching:o;if(a===undefined||i===undefined)continue;const s={value:a};if(this.#ze&&this.#He){s.ttl=this.#ze[r];const t=n.now()-this.#He[r];s.start=Math.floor(Date.now()-t)}if(this.#je){s.size=this.#je[r]}t.unshift([i,s])}return t}load(t){this.clear();for(const[r,i]of t){if(i.start){const t=Date.now()-i.start;i.start=n.now()-t}this.set(r,i.value,i)}}set(t,r,n={}){if(r===undefined){this.delete(t);return this}const{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:c}=n;let{noUpdateTTL:u=this.noUpdateTTL}=n;const l=this.#ot(t,r,n.size||0,s);if(this.maxEntrySize&&l>this.maxEntrySize){if(c){c.set="miss";c.maxEntrySizeExceeded=true}this.delete(t);return this}let d=this.#B===0?undefined:this.#Ne.get(t);if(d===undefined){d=this.#B===0?this.#qe:this.#Be.length!==0?this.#Be.pop():this.#B===this.#Ae?this.#st(false):this.#B;this.#Pe[d]=t;this.#De[d]=r;this.#Ne.set(t,d);this.#Me[this.#qe]=d;this.#Le[d]=this.#qe;this.#qe=d;this.#B++;this.#at(d,l,c);if(c)c.set="add";u=false}else{this.#Ke(d);const n=this.#De[d];if(r!==n){if(this.#Ye&&this.#We(n)){n.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:r}=n;if(r!==undefined&&!a){if(this.#Ve){this.#Oe?.(r,t,"set")}if(this.#Ge){this.#Fe?.push([r,t,"set"])}}}else if(!a){if(this.#Ve){this.#Oe?.(n,t,"set")}if(this.#Ge){this.#Fe?.push([n,t,"set"])}}this.#it(d);this.#at(d,l,c);this.#De[d]=r;if(c){c.set="replace";const t=n&&this.#We(n)?n.__staleWhileFetching:n;if(t!==undefined)c.oldValue=t}}else if(c){c.set="update"}}if(i!==0&&!this.#ze){this.#et()}if(this.#ze){if(!u){this.#tt(d,i,o)}if(c)this.#nt(c,d)}if(!a&&this.#Ge&&this.#Fe){const t=this.#Fe;let r;while(r=t?.shift()){this.#Re?.(...r)}}return this}pop(){try{while(this.#B){const t=this.#De[this.#Ue];this.#st(true);if(this.#We(t)){if(t.__staleWhileFetching){return t.__staleWhileFetching}}else if(t!==undefined){return t}}}finally{if(this.#Ge&&this.#Fe){const t=this.#Fe;let r;while(r=t?.shift()){this.#Re?.(...r)}}}}#st(t){const r=this.#Ue;const n=this.#Pe[r];const i=this.#De[r];if(this.#Ye&&this.#We(i)){i.__abortController.abort(new Error("evicted"))}else if(this.#Ve||this.#Ge){if(this.#Ve){this.#Oe?.(i,n,"evict")}if(this.#Ge){this.#Fe?.push([i,n,"evict"])}}this.#it(r);if(t){this.#Pe[r]=undefined;this.#De[r]=undefined;this.#Be.push(r)}if(this.#B===1){this.#Ue=this.#qe=0;this.#Be.length=0}else{this.#Ue=this.#Me[r]}this.#Ne.delete(n);this.#B--;return r}has(t,r={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r;const o=this.#Ne.get(t);if(o!==undefined){const t=this.#De[o];if(this.#We(t)&&t.__staleWhileFetching===undefined){return false}if(!this.#Xe(o)){if(n){this.#rt(o)}if(i){i.has="hit";this.#nt(i,o)}return true}else if(i){i.has="stale";this.#nt(i,o)}}else if(i){i.has="miss"}return false}peek(t,r={}){const{allowStale:n=this.allowStale}=r;const i=this.#Ne.get(t);if(i===undefined||!n&&this.#Xe(i)){return}const o=this.#De[i];return this.#We(o)?o.__staleWhileFetching:o}#$e(t,r,n,i){const o=r===undefined?undefined:this.#De[r];if(this.#We(o)){return o}const s=new a;const{signal:c}=n;c?.addEventListener("abort",(()=>s.abort(c.reason)),{signal:s.signal});const u={signal:s.signal,options:n,context:i};const cb=(i,o=false)=>{const{aborted:a}=s.signal;const c=n.ignoreFetchAbort&&i!==undefined;if(n.status){if(a&&!o){n.status.fetchAborted=true;n.status.fetchError=s.signal.reason;if(c)n.status.fetchAbortIgnored=true}else{n.status.fetchResolved=true}}if(a&&!c&&!o){return fetchFail(s.signal.reason)}const d=l;if(this.#De[r]===l){if(i===undefined){if(d.__staleWhileFetching){this.#De[r]=d.__staleWhileFetching}else{this.delete(t)}}else{if(n.status)n.status.fetchUpdated=true;this.set(t,i,u.options)}}return i};const eb=t=>{if(n.status){n.status.fetchRejected=true;n.status.fetchError=t}return fetchFail(t)};const fetchFail=i=>{const{aborted:o}=s.signal;const a=o&&n.allowStaleOnFetchAbort;const c=a||n.allowStaleOnFetchRejection;const u=c||n.noDeleteOnFetchRejection;const d=l;if(this.#De[r]===l){const n=!u||d.__staleWhileFetching===undefined;if(n){this.delete(t)}else if(!a){this.#De[r]=d.__staleWhileFetching}}if(c){if(n.status&&d.__staleWhileFetching!==undefined){n.status.returnedStale=true}return d.__staleWhileFetching}else if(d.__returned===d){throw i}};const pcall=(r,i)=>{const a=this.#ke?.(t,o,u);if(a&&a instanceof Promise){a.then((t=>r(t===undefined?undefined:t)),i)}s.signal.addEventListener("abort",(()=>{if(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort){r(undefined);if(n.allowStaleOnFetchAbort){r=t=>cb(t,true)}}}))};if(n.status)n.status.fetchDispatched=true;const l=new Promise(pcall).then(cb,eb);const d=Object.assign(l,{__abortController:s,__staleWhileFetching:o,__returned:undefined});if(r===undefined){this.set(t,d,{...u.options,status:undefined});r=this.#Ne.get(t)}else{this.#De[r]=d}return d}#We(t){if(!this.#Ye)return false;const r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof a}async fetch(t,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:c=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:E,forceRefresh:S=false,status:w,signal:x}=r;if(!this.#Ye){if(w)w.fetch="get";return this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:w})}const N={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:s,size:c,sizeCalculation:u,noUpdateTTL:l,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:v,ignoreFetchAbort:g,status:w,signal:x};let P=this.#Ne.get(t);if(P===undefined){if(w)w.fetch="miss";const r=this.#$e(t,P,N,E);return r.__returned=r}else{const r=this.#De[P];if(this.#We(r)){const t=n&&r.__staleWhileFetching!==undefined;if(w){w.fetch="inflight";if(t)w.returnedStale=true}return t?r.__staleWhileFetching:r.__returned=r}const o=this.#Xe(P);if(!S&&!o){if(w)w.fetch="hit";this.#Ke(P);if(i){this.#rt(P)}if(w)this.#nt(w,P);return r}const a=this.#$e(t,P,N,E);const s=a.__staleWhileFetching!==undefined;const c=s&&n;if(w){w.fetch=o?"stale":"refresh";if(c&&o)w.returnedStale=true}return c?a.__staleWhileFetching:a.__returned=a}}get(t,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r;const s=this.#Ne.get(t);if(s!==undefined){const r=this.#De[s];const c=this.#We(r);if(a)this.#nt(a,s);if(this.#Xe(s)){if(a)a.get="stale";if(!c){if(!o){this.delete(t)}if(a&&n)a.returnedStale=true;return n?r:undefined}else{if(a&&n&&r.__staleWhileFetching!==undefined){a.returnedStale=true}return n?r.__staleWhileFetching:undefined}}else{if(a)a.get="hit";if(c){return r.__staleWhileFetching}this.#Ke(s);if(i){this.#rt(s)}return r}}else if(a){a.get="miss"}}#ut(t,r){this.#Le[r]=t;this.#Me[t]=r}#Ke(t){if(t!==this.#qe){if(t===this.#Ue){this.#Ue=this.#Me[t]}else{this.#ut(this.#Le[t],this.#Me[t])}this.#ut(this.#qe,t);this.#qe=t}}delete(t){let r=false;if(this.#B!==0){const n=this.#Ne.get(t);if(n!==undefined){r=true;if(this.#B===1){this.clear()}else{this.#it(n);const r=this.#De[n];if(this.#We(r)){r.__abortController.abort(new Error("deleted"))}else if(this.#Ve||this.#Ge){if(this.#Ve){this.#Oe?.(r,t,"delete")}if(this.#Ge){this.#Fe?.push([r,t,"delete"])}}this.#Ne.delete(t);this.#Pe[n]=undefined;this.#De[n]=undefined;if(n===this.#qe){this.#qe=this.#Le[n]}else if(n===this.#Ue){this.#Ue=this.#Me[n]}else{const t=this.#Le[n];this.#Me[t]=this.#Me[n];const r=this.#Me[n];this.#Le[r]=this.#Le[n]}this.#B--;this.#Be.push(n)}}}if(this.#Ge&&this.#Fe?.length){const t=this.#Fe;let r;while(r=t?.shift()){this.#Re?.(...r)}}return r}clear(){for(const t of this.#Ze({allowStale:true})){const r=this.#De[t];if(this.#We(r)){r.__abortController.abort(new Error("deleted"))}else{const n=this.#Pe[t];if(this.#Ve){this.#Oe?.(r,n,"delete")}if(this.#Ge){this.#Fe?.push([r,n,"delete"])}}}this.#Ne.clear();this.#De.fill(undefined);this.#Pe.fill(undefined);if(this.#ze&&this.#He){this.#ze.fill(0);this.#He.fill(0)}if(this.#je){this.#je.fill(0)}this.#Ue=0;this.#qe=0;this.#Be.length=0;this.#xe=0;this.#B=0;if(this.#Ge&&this.#Fe){const t=this.#Fe;let r;while(r=t?.shift()){this.#Re?.(...r)}}}}r.LRUCache=LRUCache},88593:t=>{"use strict";t.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},53765:t=>{"use strict";t.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true},"application/atsc-held+xml":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/cbor":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["ecma","es"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true},"application/fhir+json":{"source":"iana","compressible":true},"application/fhir+xml":{"source":"iana","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true},"application/mmt-usd+xml":{"source":"iana","compressible":true},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","compressible":true},"application/msc-mixer+xml":{"source":"iana","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana"},"application/news-groupinfo":{"source":"iana"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana"},"application/nss":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p2p-overlay+xml":{"source":"iana","compressible":true},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana"},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","compressible":true},"application/pidf-diff+xml":{"source":"iana","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true},"application/route-s-tsid+xml":{"source":"iana","compressible":true},"application/route-usd+xml":{"source":"iana","compressible":true},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana"},"application/ttml+xml":{"source":"iana","compressible":true},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true},"application/urc-targetdesc+xml":{"source":"iana","compressible":true},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["keynote"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana"},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana"},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","compressible":true},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"apache","extensions":["der","crt","pem"]},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true},"application/xcap-caps+xml":{"source":"iana","compressible":true},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana"},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana"},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana"},"image/avcs":{"source":"iana"},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana","compressible":false},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shex":{"extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana"},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vp8":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},20992:t=>{"use strict";t.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},93731:t=>{"use strict";t.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},32058:t=>{"use strict";t.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},82872:t=>{"use strict";t.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},76334:t=>{"use strict";t.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},62802:t=>{"use strict";t.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},98024:t=>{"use strict";t.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]]')},71634:t=>{"use strict";t.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},23134:t=>{"use strict";t.exports=JSON.parse('{"author":"Mike D Pilsbury <mike.pilsbury@gmail.com>","contributors":["Alex Robson","Arthur Schreiber","Bret Copeland <bret@atlantisflight.org> (https://github.com/bretcope)","Bryan Ross <bryan@rossipedia.com> (https://github.com/rossipedia)","Ciaran Jessup <ciaranj@gmail.com>","Cort Fritz <cfritz@caa.com>","lastonesky","Patrik Simek <patrik@patriksimek.cz>","Phil Dodderidge <pdodde@poyntz.com>","Zach Aller"],"name":"tedious","description":"A TDS driver, for connecting to MS SQLServer databases.","keywords":["sql","database","mssql","sqlserver","sql-server","tds","msnodesql","azure"],"homepage":"https://github.com/tediousjs/tedious","bugs":"https://github.com/tediousjs/tedious/issues","license":"MIT","version":"14.5.0","main":"./lib/tedious.js","repository":{"type":"git","url":"https://github.com/tediousjs/tedious.git"},"engines":{"node":">= 12"},"publishConfig":{"tag":"next"},"dependencies":{"@azure/identity":"^2.0.1","@azure/keyvault-keys":"^4.3.0","@js-joda/core":"^4.0.0","@types/es-aggregate-error":"^1.0.2","bl":"^5.0.0","es-aggregate-error":"^1.0.7","iconv-lite":"^0.6.3","jsbi":"^3.2.1","native-duplexpair":"^1.0.0","node-abort-controller":"^3.0.0","punycode":"^2.1.0","sprintf-js":"^1.1.2"},"devDependencies":{"@babel/cli":"^7.15.4","@babel/core":"^7.15.5","@babel/node":"^7.15.4","@babel/plugin-proposal-class-properties":"^7.14.5","@babel/preset-env":"^7.15.4","@babel/preset-typescript":"^7.15.0","@babel/register":"^7.15.3","@commitlint/cli":"^13.1.0","@commitlint/config-conventional":"^13.1.0","@commitlint/travis-cli":"^13.1.0","@types/async":"^3.2.7","@types/bl":"^5.0.1","@types/chai":"^4.2.21","@types/depd":"^1.1.32","@types/lru-cache":"^5.1.0","@types/mocha":"^9.0.0","@types/node":"^12.20.25","@types/sprintf-js":"^1.1.2","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","async":"^3.2.1","babel-plugin-istanbul":"^6.0.0","chai":"^4.3.4","codecov":"^3.8.3","eslint":"^7.32.0","mitm":"^1.7.2","mocha":"^9.1.1","nyc":"^15.1.0","rimraf":"^3.0.2","semantic-release":"^17.4.7","sinon":"^11.1.2","typedoc":"^0.21.9","typescript":"^4.4.2"},"scripts":{"docs":"typedoc","lint":"eslint src test --ext .js,.ts && tsc","test":"mocha test/unit test/unit/token test/unit/tracking-buffer","test-integration":"mocha test/integration/","test-all":"mocha test/unit/ test/unit/token/ test/unit/tracking-buffer test/integration/","build":"rimraf lib && babel src --out-dir lib --extensions .js,.ts","prepublish":"npm run build","semantic-release":"semantic-release"},"babel":{"sourceMaps":"both","ignore":["./src/**/*.d.ts"],"presets":[["@babel/preset-env",{"targets":{"node":12}}],["@babel/preset-typescript",{"allowDeclareFields":true}]],"plugins":[["@babel/transform-typescript",{"allowDeclareFields":true}],["@babel/plugin-proposal-class-properties",{"loose":true}],["@babel/plugin-proposal-private-methods",{"loose":true}],["@babel/plugin-proposal-private-property-in-object",{"loose":true}]]},"commitlint":{"extends":["@commitlint/config-conventional"],"rules":{"body-max-line-length":[1,"always",100],"footer-max-line-length":[1,"always",100],"header-max-length":[1,"always",100]}},"mocha":{"require":"test/setup.js","timeout":5000,"extension":["js","ts"]},"nyc":{"sourceMap":false,"instrument":false,"extension":[".ts"]}}')}};var r={};function __nccwpck_require__(n){var i=r[n];if(i!==undefined){return i.exports}var o=r[n]={exports:{}};var a=true;try{t[n].call(o.exports,o,o.exports,__nccwpck_require__);a=false}finally{if(a)delete r[n]}return o.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var n=__nccwpck_require__(70399);module.exports=n})();
//# sourceMappingURL=index.js.map