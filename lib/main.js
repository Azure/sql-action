(()=>{var e={5265:function(e,t,r){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(2037)),o=r(4570);function s(e,t,r){const i=new a(e,t,r);process.stdout.write(i.toString()+n.EOL)}t.issueCommand=s,t.issue=function(e,t=""){s(e,{},t)};class a{constructor(e,t,r){e||(e="missing.command"),this.command=e,this.properties=t,this.message=r}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(const i in this.properties)if(this.properties.hasOwnProperty(i)){const n=this.properties[i];n&&(r?r=!1:e+=",",e+=`${i}=${t=n,o.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var t;return e+=`::${function(e){return o.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}},2225:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=r(5265),s=r(3108),a=r(4570),c=n(r(2037)),u=n(r(1017));var l;function h(e){o.issue("error",e instanceof Error?e.toString():e)}function d(e){o.issue("group",e)}function f(){o.issue("endgroup")}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(l=t.ExitCode||(t.ExitCode={})),t.exportVariable=function(e,t){const r=a.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV){const t="_GitHubActionsFileCommandDelimeter_",i=`${e}<<${t}${c.EOL}${r}${c.EOL}${t}`;s.issueCommand("ENV",i)}else o.issueCommand("set-env",{name:e},r)},t.setSecret=function(e){o.issueCommand("add-mask",{},e)},t.addPath=function(e){process.env.GITHUB_PATH?s.issueCommand("PATH",e):o.issueCommand("add-path",{},e),process.env.PATH=`${e}${u.delimiter}${process.env.PATH}`},t.getInput=function(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return r.trim()},t.setOutput=function(e,t){o.issueCommand("set-output",{name:e},t)},t.setCommandEcho=function(e){o.issue("echo",e?"on":"off")},t.setFailed=function(e){process.exitCode=l.Failure,h(e)},t.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},t.debug=function(e){o.issueCommand("debug",{},e)},t.error=h,t.warning=function(e){o.issue("warning",e instanceof Error?e.toString():e)},t.info=function(e){process.stdout.write(e+c.EOL)},t.startGroup=d,t.endGroup=f,t.group=function(e,t){return i(this,void 0,void 0,(function*(){let r;d(e);try{r=yield t()}finally{f()}return r}))},t.saveState=function(e,t){o.issueCommand("save-state",{name:e},t)},t.getState=function(e){return process.env[`STATE_${e}`]||""}},3108:function(e,t,r){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(7147)),o=i(r(2037)),s=r(4570);t.issueCommand=function(e,t){const r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!n.existsSync(r))throw new Error(`Missing file at path: ${r}`);n.appendFileSync(r,`${s.toCommandValue(t)}${o.EOL}`,{encoding:"utf8"})}},4570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCommandValue=function(e){return null==e?"":"string"==typeof e||e instanceof String?e:JSON.stringify(e)}},27:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(4171);t.exec=function(e,t,r){return i(this,void 0,void 0,(function*(){const i=n.argStringToArray(e);if(0===i.length)throw new Error("Parameter 'commandLine' cannot be null or empty.");const o=i[0];return t=i.slice(1).concat(t||[]),new n.ToolRunner(o,t,r).exec()}))}},4171:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2037),o=r(2361),s=r(2081),a="win32"===process.platform;class c extends o.EventEmitter{constructor(e,t,r){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=t||[],this.options=r||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,t){const r=this._getSpawnFileName(),i=this._getSpawnArgs(e);let n=t?"":"[command]";if(a)if(this._isCmdFile()){n+=r;for(const e of i)n+=` ${e}`}else if(e.windowsVerbatimArguments){n+=`"${r}"`;for(const e of i)n+=` ${e}`}else{n+=this._windowsQuoteCmdArg(r);for(const e of i)n+=` ${this._windowsQuoteCmdArg(e)}`}else{n+=r;for(const e of i)n+=` ${e}`}return n}_processLineBuffer(e,t,r){try{let i=t+e.toString(),o=i.indexOf(n.EOL);for(;o>-1;)r(i.substring(0,o)),i=i.substring(o+n.EOL.length),o=i.indexOf(n.EOL);t=i}catch(e){this._debug(`error processing line. Failed with error ${e}`)}}_getSpawnFileName(){return a&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(a&&this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const r of this.args)t+=" ",t+=e.windowsVerbatimArguments?r:this._windowsQuoteCmdArg(r);return t+='"',[t]}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){const e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';const t=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let r=!1;for(const i of e)if(t.some((e=>e===i))){r=!0;break}if(!r)return e;let i='"',n=!0;for(let t=e.length;t>0;t--)i+=e[t-1],n&&"\\"===e[t-1]?i+="\\":'"'===e[t-1]?(n=!0,i+='"'):n=!1;return i+='"',i.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("\t")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let t='"',r=!0;for(let i=e.length;i>0;i--)t+=e[i-1],r&&"\\"===e[i-1]?t+="\\":'"'===e[i-1]?(r=!0,t+="\\"):r=!1;return t+='"',t.split("").reverse().join("")}_cloneExecOptions(e){const t={cwd:(e=e||{}).cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return t.outStream=e.outStream||process.stdout,t.errStream=e.errStream||process.stderr,t}_getSpawnOptions(e,t){e=e||{};const r={};return r.cwd=e.cwd,r.env=e.env,r.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(r.argv0=`"${t}"`),r}exec(){return i(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(const e of this.args)this._debug(`   ${e}`);const r=this._cloneExecOptions(this.options);!r.silent&&r.outStream&&r.outStream.write(this._getCommandString(r)+n.EOL);const i=new u(r,this.toolPath);i.on("debug",(e=>{this._debug(e)}));const o=this._getSpawnFileName(),a=s.spawn(o,this._getSpawnArgs(r),this._getSpawnOptions(this.options,o));a.stdout&&a.stdout.on("data",(e=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(e),!r.silent&&r.outStream&&r.outStream.write(e),this._processLineBuffer(e,"",(e=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(e)}))})),a.stderr&&a.stderr.on("data",(e=>{i.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(e),!r.silent&&r.errStream&&r.outStream&&(r.failOnStdErr?r.errStream:r.outStream).write(e),this._processLineBuffer(e,"",(e=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(e)}))})),a.on("error",(e=>{i.processError=e.message,i.processExited=!0,i.processClosed=!0,i.CheckComplete()})),a.on("exit",(e=>{i.processExitCode=e,i.processExited=!0,this._debug(`Exit code ${e} received from tool '${this.toolPath}'`),i.CheckComplete()})),a.on("close",(e=>{i.processExitCode=e,i.processExited=!0,i.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),i.CheckComplete()})),i.on("done",((r,i)=>{"".length>0&&this.emit("stdline",""),"".length>0&&this.emit("errline",""),a.removeAllListeners(),r?t(r):e(i)}))}))}))}}t.ToolRunner=c,t.argStringToArray=function(e){const t=[];let r=!1,i=!1,n="";function o(e){i&&'"'!==e&&(n+="\\"),n+=e,i=!1}for(let s=0;s<e.length;s++){const a=e.charAt(s);'"'!==a?"\\"===a&&i?o(a):"\\"===a&&r?i=!0:" "!==a||r?o(a):n.length>0&&(t.push(n),n=""):i?o(a):r=!r}return n.length>0&&t.push(n.trim()),t};class u extends o.EventEmitter{constructor(e,t){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!t)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=t,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=setTimeout(u.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):0===this.processExitCode||this.options.ignoreReturnCode?this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)):e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){const t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}}},7564:function(e,t,r){"use strict";var i,n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(9491),s=r(7147),a=r(1017);function c(e){return(1&e.mode)>0||(8&e.mode)>0&&e.gid===process.getgid()||(64&e.mode)>0&&e.uid===process.getuid()}i=s.promises,t.chmod=i.chmod,t.copyFile=i.copyFile,t.lstat=i.lstat,t.mkdir=i.mkdir,t.readdir=i.readdir,t.readlink=i.readlink,t.rename=i.rename,t.rmdir=i.rmdir,t.stat=i.stat,t.symlink=i.symlink,t.unlink=i.unlink,t.IS_WINDOWS="win32"===process.platform,t.exists=function(e){return n(this,void 0,void 0,(function*(){try{yield t.stat(e)}catch(e){if("ENOENT"===e.code)return!1;throw e}return!0}))},t.isDirectory=function(e,r=!1){return n(this,void 0,void 0,(function*(){return(r?yield t.stat(e):yield t.lstat(e)).isDirectory()}))},t.isRooted=function(e){if(!(e=function(e){return e=e||"",t.IS_WINDOWS?(e=e.replace(/\//g,"\\")).replace(/\\\\+/g,"\\"):e.replace(/\/\/+/g,"/")}(e)))throw new Error('isRooted() parameter "p" cannot be empty');return t.IS_WINDOWS?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")},t.mkdirP=function e(r,i=1e3,s=1){return n(this,void 0,void 0,(function*(){if(o.ok(r,"a path argument must be provided"),r=a.resolve(r),s>=i)return t.mkdir(r);try{return void(yield t.mkdir(r))}catch(n){if("ENOENT"===n.code)return yield e(a.dirname(r),i,s+1),void(yield t.mkdir(r));{let e;try{e=yield t.stat(r)}catch(e){throw n}if(!e.isDirectory())throw n}}}))},t.tryGetExecutablePath=function(e,r){return n(this,void 0,void 0,(function*(){let i;try{i=yield t.stat(e)}catch(t){"ENOENT"!==t.code&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}if(i&&i.isFile())if(t.IS_WINDOWS){const t=a.extname(e).toUpperCase();if(r.some((e=>e.toUpperCase()===t)))return e}else if(c(i))return e;const n=e;for(const o of r){e=n+o,i=void 0;try{i=yield t.stat(e)}catch(t){"ENOENT"!==t.code&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}if(i&&i.isFile()){if(t.IS_WINDOWS){try{const r=a.dirname(e),i=a.basename(e).toUpperCase();for(const n of yield t.readdir(r))if(i===n.toUpperCase()){e=a.join(r,n);break}}catch(t){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${t}`)}return e}if(c(i))return e}}return""}))}},484:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2081),o=r(1017),s=r(3837),a=r(7564),c=s.promisify(n.exec);function u(e){return i(this,void 0,void 0,(function*(){if(a.IS_WINDOWS){try{(yield a.isDirectory(e,!0))?yield c(`rd /s /q "${e}"`):yield c(`del /f /a "${e}"`)}catch(e){if("ENOENT"!==e.code)throw e}try{yield a.unlink(e)}catch(e){if("ENOENT"!==e.code)throw e}}else{let t=!1;try{t=yield a.isDirectory(e)}catch(e){if("ENOENT"!==e.code)throw e;return}t?yield c(`rm -rf "${e}"`):yield a.unlink(e)}}))}function l(e){return i(this,void 0,void 0,(function*(){yield a.mkdirP(e)}))}function h(e,t,r,n){return i(this,void 0,void 0,(function*(){if(r>=255)return;r++,yield l(t);const i=yield a.readdir(e);for(const o of i){const i=`${e}/${o}`,s=`${t}/${o}`;(yield a.lstat(i)).isDirectory()?yield h(i,s,r,n):yield d(i,s,n)}yield a.chmod(t,(yield a.stat(e)).mode)}))}function d(e,t,r){return i(this,void 0,void 0,(function*(){if((yield a.lstat(e)).isSymbolicLink()){try{yield a.lstat(t),yield a.unlink(t)}catch(e){"EPERM"===e.code&&(yield a.chmod(t,"0666"),yield a.unlink(t))}const r=yield a.readlink(e);yield a.symlink(r,t,a.IS_WINDOWS?"junction":null)}else(yield a.exists(t))&&!r||(yield a.copyFile(e,t))}))}t.cp=function(e,t,r={}){return i(this,void 0,void 0,(function*(){const{force:i,recursive:n}=function(e){return{force:null==e.force||e.force,recursive:Boolean(e.recursive)}}(r),s=(yield a.exists(t))?yield a.stat(t):null;if(s&&s.isFile()&&!i)return;const c=s&&s.isDirectory()?o.join(t,o.basename(e)):t;if(!(yield a.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield a.stat(e)).isDirectory()){if(!n)throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);yield h(e,c,0,i)}else{if(""===o.relative(e,c))throw new Error(`'${c}' and '${e}' are the same file`);yield d(e,c,i)}}))},t.mv=function(e,t,r={}){return i(this,void 0,void 0,(function*(){if(yield a.exists(t)){let i=!0;if((yield a.isDirectory(t))&&(t=o.join(t,o.basename(e)),i=yield a.exists(t)),i){if(null!=r.force&&!r.force)throw new Error("Destination already exists");yield u(t)}}yield l(o.dirname(t)),yield a.rename(e,t)}))},t.rmRF=u,t.mkdirP=l,t.which=function e(t,r){return i(this,void 0,void 0,(function*(){if(!t)throw new Error("parameter 'tool' is required");if(r&&!(yield e(t,!1)))throw a.IS_WINDOWS?new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);try{const e=[];if(a.IS_WINDOWS&&process.env.PATHEXT)for(const t of process.env.PATHEXT.split(o.delimiter))t&&e.push(t);if(a.isRooted(t)){return(yield a.tryGetExecutablePath(t,e))||""}if(t.includes("/")||a.IS_WINDOWS&&t.includes("\\"))return"";const r=[];if(process.env.PATH)for(const e of process.env.PATH.split(o.delimiter))e&&r.push(e);for(const i of r){const r=yield a.tryGetExecutablePath(i+o.sep+t,e);if(r)return r}return""}catch(e){throw new Error(`which failed with message ${e.message}`)}}))}},2609:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2225),o=r(4458);t.AuthorizerFactory=class{static getAuthorizer(){return i(this,void 0,void 0,(function*(){n.debug("try-get AzureCLIAuthorizer");try{return yield o.AzureCLIAuthorizer.getAuthorizer()}catch(e){throw n.debug(e),new Error("No credentails found. Add an Azure login script before this action.")}}))}}},4458:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2225),o=r(27),s=r(484);class a{constructor(){this._token="",this._subscriptionId="",this._cloudSuffixes={},this._cloudEndpoints={}}static getAuthorizer(){return i(this,void 0,void 0,(function*(){return this._authorizer||(this._authorizer=new a,yield this._authorizer._initialize()),this._authorizer}))}get subscriptionID(){return this._subscriptionId}get baseUrl(){return this._cloudEndpoints.resourceManager||"https://management.azure.com/"}getCloudSuffixUrl(e){return this._cloudSuffixes[e]}getCloudEndpointUrl(e){return this._cloudEndpoints[e]}getToken(e,t){return i(this,void 0,void 0,(function*(){if(!this._token||e)try{let e=JSON.parse(yield a.executeAzCliCommand("account get-access-token",t||[]));n.setSecret(e),this._token=e.accessToken}catch(e){throw console.log("Failed to fetch Azure access token"),e}return this._token}))}static executeAzCliCommand(e,t){return i(this,void 0,void 0,(function*(){let r=yield a._getAzCliPath(),i="",s="";try{n.debug(`"${r}" ${e}`),yield o.exec(`"${r}" ${e}`,t,{silent:!0,listeners:{stdout:e=>{i+=e.toString()},stderr:e=>{s+=e.toString()}}})}catch(e){throw new Error(s)}return i}))}static _getAzCliPath(){return i(this,void 0,void 0,(function*(){return this._azCliPath||(this._azCliPath=yield s.which("az",!0)),this._azCliPath}))}_initialize(){return i(this,void 0,void 0,(function*(){let e=JSON.parse(yield a.executeAzCliCommand("account show")),t=JSON.parse(yield a.executeAzCliCommand("cloud show"));this._subscriptionId=e.id,this._cloudSuffixes=t.suffixes,this._cloudEndpoints=t.endpoints}))}}t.AzureCLIAuthorizer=a},804:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2225),o=r(5937);class s{constructor(e,t,r,i){this.error=e,this.result=t,this.request=r,this.response=i}}t.ApiResult=s;class a{}function c(e){let t=new a;return t.statusCode=e.statusCode,t.message=e.body,e.body&&e.body.error&&(t.code=e.body.error.code,t.message=e.body.error.message,t.details=e.body.error.details,n.error(t.message)),t}t.AzureError=a,t.ToError=c,t.ServiceClient=class{constructor(e,t){this._webClient=new o.WebClient,this._authorizer=e,this.subscriptionId=this._authorizer.subscriptionID,this.baseUrl=this._authorizer.baseUrl,this.longRunningOperationRetryTimeout=t||0}getRequestUri(e,t,r,i){return this.getRequestUriForbaseUrl(this.baseUrl,e,t,r,i)}getRequestUriForbaseUrl(e,t,r,i,n){let o=e+t;o=o.replace("{subscriptionId}",encodeURIComponent(this.subscriptionId));for(let e in r)o=o.replace(e,encodeURIComponent(r[e]));return o=o.replace(/([^:]\/)\/+/gi,"$1"),i=i||[],n&&i.push("api-version="+encodeURIComponent(n)),i.length>0&&(o+="?"+i.join("&")),o}beginRequest(e,t){return i(this,void 0,void 0,(function*(){let r=yield this._authorizer.getToken(!1,t);e.headers=e.headers||{},e.headers.Authorization=`Bearer ${r}`,e.headers["Content-Type"]="application/json; charset=utf-8";let i=null;try{i=yield this._webClient.sendRequest(e),401===i.statusCode&&i.body&&i.body.error&&"ExpiredAuthenticationToken"===i.body.error.code&&(r=yield this._authorizer.getToken(!0,t),e.headers.Authorization=`Bearer ${r}`,i=yield this._webClient.sendRequest(e))}catch(e){let t=e.toString();if(-1!=t.indexOf("Hostname/IP doesn't match certificates's altnames")||-1!=t.indexOf("unable to verify the first certificate")||-1!=t.indexOf("unable to get local issuer certificate"))throw n.warning("You're probably using a self-signed certificate in the SSL certificate validation chain. To resolve them you need to export a variable named ACTIONS_AZURE_REST_IGNORE_SSL_ERRORS to the value true."),e}return i}))}accumulateResultFromPagedResult(e){return i(this,void 0,void 0,(function*(){let t=[];for(;e;){let r={method:"GET",uri:e},i=yield this.beginRequest(r);if(200!=i.statusCode||!i.body)return new s(c(i));i.body.value&&(t=t.concat(i.body.value)),e=i.body.nextLink}return new s(null,t)}))}}},9490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(7723);class n{constructor(){n._options={};let e=`${process.env.ACTIONS_AZURE_REST_IGNORE_SSL_ERRORS}`;n._options.ignoreSslError=!!e&&"true"===e.toLowerCase(),n._instance=new i.HttpClient(`${process.env.AZURE_HTTP_USER_AGENT}`,void 0,n._options)}static GetInstance(){return void 0===n._instance&&new n,n._instance}static SetOptions(e){n._options=e}}t.RequestClient=n},5937:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2225),o=r(7147),s=r(9490),a=["ETIMEDOUT","ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EA_AGAIN"],c=[408,409,500,502,503,504];t.WebClient=class{constructor(){this._httpClient=s.RequestClient.GetInstance()}sendRequest(e,t){return i(this,void 0,void 0,(function*(){let r=0,i=t&&t.retryCount?t.retryCount:5,s=t&&t.retryIntervalInSeconds?t.retryIntervalInSeconds:2,u=t&&t.retriableErrorCodes?t.retriableErrorCodes:a,l=t&&t.retriableStatusCodes?t.retriableStatusCodes:c,h=s;for(;;)try{e.body&&"string"!=typeof e.body&&!e.body.readable&&(e.body=o.createReadStream(e.body.path));let t=yield this._sendRequestInternal(e);if(-1!=l.indexOf(t.statusCode)&&++r<i){n.debug(`Encountered a retriable status code: ${t.statusCode}. Message: '${t.statusMessage}'.`),yield this._sleep(h),h=h*s+s;continue}return t}catch(e){if(!(-1!=u.indexOf(e.code)&&++r<i))throw e.code&&n.error(e.code),e;n.debug(`Encountered a retriable error:${e.code}. Message: ${e.message}.`),yield this._sleep(h),h=h*s+s}}))}_sendRequestInternal(e){return i(this,void 0,void 0,(function*(){n.debug(`[${e.method}] ${e.uri}`);let t=yield this._httpClient.request(e.method,e.uri,e.body||"",e.headers);if(!t)throw new Error(`Unexpected end of request. Http request: [${e.method}] ${e.uri} returned a null Http response.`);return yield this._toWebResponse(t)}))}_toWebResponse(e){return i(this,void 0,void 0,(function*(){let t,r=yield e.readBody();if(r)try{t=JSON.parse(r)}catch(e){n.error(`Could not parse response body: ${r}.`),n.error(JSON.stringify(e))}return{statusCode:e.message.statusCode,statusMessage:e.message.statusMessage,headers:e.message.headers,body:t||r}}))}_sleep(e){return new Promise((t=>{setTimeout(t,1e3*e)}))}}},5623:e=>{"use strict";function t(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var o=i(e,t,n);return o&&{start:o[0],end:o[1],pre:n.slice(0,o[0]),body:n.slice(o[0]+e.length,o[1]),post:n.slice(o[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function i(e,t,r){var i,n,o,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(i=[],o=r.length;l>=0&&!a;)l==c?(i.push(l),c=r.indexOf(e,l+1)):1==i.length?a=[i.pop(),u]:((n=i.pop())<o&&(o=n,s=u),u=r.indexOf(t,l+1)),l=c<u&&c>=0?c:u;i.length&&(a=[o,s])}return a}e.exports=t,t.range=i},3644:(e,t,r)=>{var i=r(1048),n=r(5623);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),v(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(h)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function h(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function d(e){if(!e)return[""];var t=[],r=n("{","}",e);if(!r)return e.split(",");var i=r.pre,o=r.body,s=r.post,a=i.split(",");a[a.length-1]+="{"+o+"}";var c=d(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function f(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function y(e,t){return e>=t}function v(e,t){var r=[],o=n("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),h=c||u,m=o.body.indexOf(",")>=0;if(!h&&!m)return o.post.match(/,.*\}/)?v(e=o.pre+"{"+o.body+a+o.post):[e];if(h)s=o.body.split(/\.\./);else if(1===(s=d(o.body)).length&&1===(s=v(s[0],!1).map(f)).length)return(b=o.post.length?v(o.post,!1):[""]).map((function(e){return o.pre+s[0]+e}));var _,w=o.pre,b=o.post.length?v(o.post,!1):[""];if(h){var S=l(s[0]),E=l(s[1]),x=Math.max(s[0].length,s[1].length),O=3==s.length?Math.abs(l(s[2])):1,A=g;E<S&&(O*=-1,A=y);var k=s.some(p);_=[];for(var P=S;A(P,E);P+=O){var C;if(u)"\\"===(C=String.fromCharCode(P))&&(C="");else if(C=String(P),k){var R=x-C.length;if(R>0){var T=new Array(R+1).join("0");C=P<0?"-"+T+C.slice(1):T+C}}_.push(C)}}else _=i(s,(function(e){return v(e,!1)}));for(var q=0;q<_.length;q++)for(var I=0;I<b.length;I++){var j=w+_[q]+b[I];(!t||h||j)&&r.push(j)}return r}},1048:e=>{e.exports=function(e,r){for(var i=[],n=0;n<e.length;n++){var o=r(e[n],n);t(o)?i.push.apply(i,o):i.push(o)}return i};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},7334:(e,t,r)=>{e.exports=l,l.realpath=l,l.sync=h,l.realpathSync=h,l.monkeypatch=function(){i.realpath=l,i.realpathSync=h},l.unmonkeypatch=function(){i.realpath=n,i.realpathSync=o};var i=r(7147),n=i.realpath,o=i.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=r(7059);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,r){if(a)return n(e,t,r);"function"==typeof t&&(r=t,t=null),n(e,t,(function(i,n){u(i)?c.realpath(e,t,r):r(i,n)}))}function h(e,t){if(a)return o(e,t);try{return o(e,t)}catch(r){if(u(r))return c.realpathSync(e,t);throw r}}},7059:(e,t,r)=>{var i=r(1017),n="win32"===process.platform,o=r(7147),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);if(i.normalize,n)var a=/(.*?)(?:[\/\\]+|$)/g;else a=/(.*?)(?:[\/]+|$)/g;if(n)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,u,l,h=e,d={},f={};function p(){var t=c.exec(e);r=t[0].length,s=t[0],u=t[0],l="",n&&!f[u]&&(o.lstatSync(u),f[u]=!0)}for(p();r<e.length;){a.lastIndex=r;var g=a.exec(e);if(l=s,s+=g[0],u=l+g[1],r=a.lastIndex,!(f[u]||t&&t[u]===u)){var y;if(t&&Object.prototype.hasOwnProperty.call(t,u))y=t[u];else{var v=o.lstatSync(u);if(!v.isSymbolicLink()){f[u]=!0,t&&(t[u]=u);continue}var m=null;if(!n){var _=v.dev.toString(32)+":"+v.ino.toString(32);d.hasOwnProperty(_)&&(m=d[_])}null===m&&(o.statSync(u),m=o.readlinkSync(u)),y=i.resolve(l,m),t&&(t[u]=y),n||(d[_]=m)}e=i.resolve(y,e.slice(r)),p()}}return t&&(t[h]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=function(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var u,l,h,d,f=e,p={},g={};function y(){var t=c.exec(e);u=t[0].length,l=t[0],h=t[0],d="",n&&!g[h]?o.lstat(h,(function(e){if(e)return r(e);g[h]=!0,v()})):process.nextTick(v)}function v(){if(u>=e.length)return t&&(t[f]=e),r(null,e);a.lastIndex=u;var i=a.exec(e);return d=l,l+=i[0],h=d+i[1],u=a.lastIndex,g[h]||t&&t[h]===h?process.nextTick(v):t&&Object.prototype.hasOwnProperty.call(t,h)?w(t[h]):o.lstat(h,m)}function m(e,i){if(e)return r(e);if(!i.isSymbolicLink())return g[h]=!0,t&&(t[h]=h),process.nextTick(v);if(!n){var s=i.dev.toString(32)+":"+i.ino.toString(32);if(p.hasOwnProperty(s))return _(null,p[s],h)}o.stat(h,(function(e){if(e)return r(e);o.readlink(h,(function(e,t){n||(p[s]=t),_(e,t)}))}))}function _(e,n,o){if(e)return r(e);var s=i.resolve(d,n);t&&(t[o]=s),w(s)}function w(t){e=i.resolve(t,e.slice(u)),y()}y()}},6772:(e,t,r)=>{function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,r),e.changedCwd=!1;var o=process.cwd();i(r,"cwd")?(e.cwd=n.resolve(r.cwd),e.changedCwd=e.cwd!==o):e.cwd=o,e.root=r.root||n.resolve(e.cwd,"/"),e.root=n.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=s(e.cwd)?e.cwd:h(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new a(t,r),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=h,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),i=0,n=e.matches.length;i<n;i++){var o=e.matches[i];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?r.push(a):r[a]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(e.nocase?c:u)),e.mark){for(i=0;i<r.length;i++)r[i]=e._mark(r[i]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),i=e.cache[t]||e.cache[h(e,t)];return r&&i&&(r="DIR"!==i&&!Array.isArray(i)),r})))}e.ignore.length&&(r=r.filter((function(t){return!d(e,t)}))),e.found=r},t.mark=function(e,t){var r=h(e,t),i=e.cache[r],n=t;if(i){var o="DIR"===i||Array.isArray(i),s="/"===t.slice(-1);if(o&&!s?n+="/":!o&&s&&(n=n.slice(0,-1)),n!==t){var a=h(e,n);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return n},t.isIgnored=d,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var n=r(1017),o=r(1171),s=r(4095),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function h(e,t){var r=t;return r="/"===t.charAt(0)?n.join(e.root,t):s(t)||""===t?t:e.changedCwd?n.resolve(e.cwd,t):n.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function d(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},2884:(e,t,r)=>{e.exports=_;var i=r(7147),n=r(7334),o=r(1171),s=(o.Minimatch,r(4378)),a=r(2361).EventEmitter,c=r(1017),u=r(9491),l=r(4095),h=r(4751),d=r(6772),f=(d.alphasort,d.alphasorti,d.setopts),p=d.ownProp,g=r(7844),y=(r(3837),d.childrenIgnored),v=d.isIgnored,m=r(778);function _(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return h(e,t)}return new b(e,t,r)}_.sync=h;var w=_.GlobSync=h.GlobSync;function b(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new w(e,t)}if(!(this instanceof b))return new b(e,t,r);f(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof r&&(r=m(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return s();for(var o=0;o<i;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--n._processing,n._processing<=0&&n._finish()}}_.glob=_,_.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}({},t);r.noprocess=!0;var i=new b(e,r).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var n=0;n<i[0].length;n++)if("string"!=typeof i[0][n])return!0;return!1},_.Glob=b,s(b,a),b.prototype._finish=function(){if(u(this instanceof b),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},b.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,i)}function i(){0==--e&&t._finish()}},b.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var i=Object.keys(r),o=this,s=i.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(r,i){r=o._makeAbs(r),n.realpath(r,o.realpathCache,(function(i,n){i?"stat"===i.syscall?a[r]=!0:o.emit("error",i):a[n]=!0,0==--s&&(o.matches[e]=a,t())}))}))},b.prototype._mark=function(e){return d.mark(this,e)},b.prototype._makeAbs=function(e){return d.makeAbs(this,e)},b.prototype.abort=function(){this.aborted=!0,this.emit("abort")},b.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},b.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);for(this._processQueue.length=0,t=0;t<i.length;t++){var n=i[t];this._processing--,this._process(n[0],n[1],n[2],n[3])}}}},b.prototype._process=function(e,t,r,i){if(u(this instanceof b),u("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,i]);else{for(var n,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:n=null;break;default:n=e.slice(0,s).join("/")}var a,c=e.slice(s);null===n?a=".":l(n)||l(e.join("/"))?(n&&l(n)||(n="/"+n),a=n):a=n;var h=this._makeAbs(a);if(y(this,a))return i();c[0]===o.GLOBSTAR?this._processGlobStar(n,a,h,c,t,r,i):this._processReaddir(n,a,h,c,t,r,i)}},b.prototype._processReaddir=function(e,t,r,i,n,o,s){var a=this;this._readdir(r,o,(function(c,u){return a._processReaddir2(e,t,r,i,n,o,u,s)}))},b.prototype._processReaddir2=function(e,t,r,i,n,o,s,a){if(!s)return a();for(var u=i[0],l=!!this.minimatch.negate,h=u._glob,d=this.dot||"."===h.charAt(0),f=[],p=0;p<s.length;p++)("."!==(y=s[p]).charAt(0)||d)&&(l&&!e?!y.match(u):y.match(u))&&f.push(y);var g=f.length;if(0===g)return a();if(1===i.length&&!this.mark&&!this.stat){for(this.matches[n]||(this.matches[n]=Object.create(null)),p=0;p<g;p++){var y=f[p];e&&(y="/"!==e?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=c.join(this.root,y)),this._emitMatch(n,y)}return a()}for(i.shift(),p=0;p<g;p++)y=f[p],e&&(y="/"!==e?e+"/"+y:e+y),this._process([y].concat(i),n,o,a);a()},b.prototype._emitMatch=function(e,t){if(!this.aborted&&!v(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var i=this.cache[r];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var n=this.statCache[r];n&&this.emit("stat",t,n),this.emit("match",t)}}},b.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=g("lstat\0"+e,(function(i,n){if(i&&"ENOENT"===i.code)return t();var o=n&&n.isSymbolicLink();r.symlinks[e]=o,o||!n||n.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));n&&i.lstat(e,n)}},b.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=g("readdir\0"+e+"\0"+t,r))){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e,r);if(p(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}i.readdir(e,function(e,t,r){return function(i,n){i?e._readdirError(t,i,r):e._readdirEntries(t,n,r)}}(this,e,r))}},b.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var n=t[i];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,r(null,t)}},b.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);n.path=this.cwd,n.code=t.code,this.emit("error",n),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},b.prototype._processGlobStar=function(e,t,r,i,n,o,s){var a=this;this._readdir(r,o,(function(c,u){a._processGlobStar2(e,t,r,i,n,o,u,s)}))},b.prototype._processGlobStar2=function(e,t,r,i,n,o,s,a){if(!s)return a();var c=i.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,n,!1,a);var h=this.symlinks[r],d=s.length;if(h&&o)return a();for(var f=0;f<d;f++)if("."!==s[f].charAt(0)||this.dot){var p=u.concat(s[f],c);this._process(p,n,!0,a);var g=u.concat(s[f],i);this._process(g,n,!0,a)}a()},b.prototype._processSimple=function(e,t,r){var i=this;this._stat(e,(function(n,o){i._processSimple2(e,t,n,o,r)}))},b.prototype._processSimple2=function(e,t,r,i,n){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return n();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),n()},b.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&p(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!n||"DIR"===o)return t(null,o);if(n&&"FILE"===o)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&"FILE"===a?t():t(null,a,s)}var c=this,u=g("stat\0"+r,(function(n,o){if(o&&o.isSymbolicLink())return i.stat(r,(function(i,n){i?c._stat2(e,r,null,o,t):c._stat2(e,r,i,n,t)}));c._stat2(e,r,n,o,t)}));u&&i.lstat(r,u)},b.prototype._stat2=function(e,t,r,i,n){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,n();var o="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return n(null,!1,i);var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?n():n(null,s,i)}},4751:(e,t,r)=>{e.exports=p,p.GlobSync=g;var i=r(7147),n=r(7334),o=r(1171),s=(o.Minimatch,r(2884).Glob,r(3837),r(1017)),a=r(9491),c=r(4095),u=r(6772),l=(u.alphasort,u.alphasorti,u.setopts),h=u.ownProp,d=u.childrenIgnored,f=u.isIgnored;function p(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(l(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var i=0;i<r;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach((function(t,r){var i=e.matches[r]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),i[n.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(o)]=!0}}))}u.finish(this)},g.prototype._process=function(e,t,r){a(this instanceof g);for(var i,n=0;"string"==typeof e[n];)n++;switch(n){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,n).join("/")}var s,u=e.slice(n);null===i?s=".":c(i)||c(e.join("/"))?(i&&c(i)||(i="/"+i),s=i):s=i;var l=this._makeAbs(s);d(this,s)||(u[0]===o.GLOBSTAR?this._processGlobStar(i,s,l,u,t,r):this._processReaddir(i,s,l,u,t,r))},g.prototype._processReaddir=function(e,t,r,i,n,o){var a=this._readdir(r,o);if(a){for(var c=i[0],u=!!this.minimatch.negate,l=c._glob,h=this.dot||"."===l.charAt(0),d=[],f=0;f<a.length;f++)("."!==(y=a[f]).charAt(0)||h)&&(u&&!e?!y.match(c):y.match(c))&&d.push(y);var p=d.length;if(0!==p)if(1!==i.length||this.mark||this.stat)for(i.shift(),f=0;f<p;f++){var g;y=d[f],g=e?[e,y]:[y],this._process(g.concat(i),n,o)}else{this.matches[n]||(this.matches[n]=Object.create(null));for(f=0;f<p;f++){var y=d[f];e&&(y="/"!==e.slice(-1)?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=s.join(this.root,y)),this._emitMatch(n,y)}}}},g.prototype._emitMatch=function(e,t){if(!f(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var i=this.cache[r];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=i.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!h(this.symlinks,e))return this._readdirInGlobStar(e);if(h(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,i.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,r,i,n,o){var s=this._readdir(r,o);if(s){var a=i.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,n,!1);var l=s.length;if(!this.symlinks[r]||!o)for(var h=0;h<l;h++)if("."!==s[h].charAt(0)||this.dot){var d=c.concat(s[h],a);this._process(d,n,!0);var f=c.concat(s[h],i);this._process(f,n,!0)}}},g.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&c(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&h(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var o=this.statCache[t];if(!o){var s;try{s=i.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=i.statSync(t)}catch(e){o=s}else o=s}return this.statCache[t]=o,n=!0,o&&(n=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},g.prototype._mark=function(e){return u.mark(this,e)},g.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},7844:(e,t,r)=>{var i=r(2479),n=Object.create(null),o=r(778);function s(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i]=e[i];return r}e.exports=i((function(e,t){return n[e]?(n[e].push(t),null):(n[e]=[t],function(e){return o((function t(){var r=n[e],i=r.length,o=s(arguments);try{for(var a=0;a<i;a++)r[a].apply(null,o)}finally{r.length>i?(r.splice(0,i),process.nextTick((function(){t.apply(null,o)}))):delete n[e]}}))}(e))}))},4378:(e,t,r)=>{try{var i=r(3837);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=r(5717)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},1171:(e,t,r)=>{e.exports=d,d.Minimatch=f;var i={sep:"/"};try{i=r(1017)}catch(e){}var n=d.GLOBSTAR=f.GLOBSTAR={},o=r(3644),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c="[^/]*?",u="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),l=/\/+/;function h(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function d(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new f(t,r).match(e))}function f(e,t){if(!(this instanceof f))return new f(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function p(e,t){if(t||(t=this instanceof f?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}d.filter=function(e,t){return t=t||{},function(r,i,n){return d(r,e,t)}},d.defaults=function(e){if(!e||!Object.keys(e).length)return d;var t=d,r=function(r,i,n){return t.minimatch(r,i,h(e,n))};return r.Minimatch=function(r,i){return new t.Minimatch(r,h(e,i))},r},f.defaults=function(e){return e&&Object.keys(e).length?d.defaults(e).Minimatch:f},f.prototype.debug=function(){},f.prototype.make=function(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(l)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0}},f.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var i=0,n=e.length;i<n&&"!"===e.charAt(i);i++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}},d.braceExpand=function(e,t){return p(e,t)},f.prototype.braceExpand=p,f.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return n;if(""===e)return"";var i,o="",l=!!r.nocase,h=!1,d=[],f=[],p=!1,y=-1,v=-1,m="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",_=this;function w(){if(i){switch(i){case"*":o+=c,l=!0;break;case"?":o+=a,l=!0;break;default:o+="\\"+i}_.debug("clearStateChar %j %j",i,o),i=!1}}for(var b,S=0,E=e.length;S<E&&(b=e.charAt(S));S++)if(this.debug("%s\t%s %s %j",e,S,o,b),h&&u[b])o+="\\"+b,h=!1;else switch(b){case"/":return!1;case"\\":w(),h=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,S,o,b),p){this.debug("  in class"),"!"===b&&S===v+1&&(b="^"),o+=b;continue}_.debug("call clearStateChar %j",i),w(),i=b,r.noext&&w();continue;case"(":if(p){o+="(";continue}if(!i){o+="\\(";continue}d.push({type:i,start:S-1,reStart:o.length,open:s[i].open,close:s[i].close}),o+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,o),i=!1;continue;case")":if(p||!d.length){o+="\\)";continue}w(),l=!0;var x=d.pop();o+=x.close,"!"===x.type&&f.push(x),x.reEnd=o.length;continue;case"|":if(p||!d.length||h){o+="\\|",h=!1;continue}w(),o+="|";continue;case"[":if(w(),p){o+="\\"+b;continue}p=!0,v=S,y=o.length,o+=b;continue;case"]":if(S===v+1||!p){o+="\\"+b,h=!1;continue}if(p){var O=e.substring(v+1,S);try{RegExp("["+O+"]")}catch(e){var A=this.parse(O,g);o=o.substr(0,y)+"\\["+A[0]+"\\]",l=l||A[1],p=!1;continue}}l=!0,p=!1,o+=b;continue;default:w(),h?h=!1:!u[b]||"^"===b&&p||(o+="\\"),o+=b}for(p&&(O=e.substr(v+1),A=this.parse(O,g),o=o.substr(0,y)+"\\["+A[0],l=l||A[1]),x=d.pop();x;x=d.pop()){var k=o.slice(x.reStart+x.open.length);this.debug("setting tail",o,x),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",k,k,x,o);var P="*"===x.type?c:"?"===x.type?a:"\\"+x.type;l=!0,o=o.slice(0,x.reStart)+P+"\\("+k}w(),h&&(o+="\\\\");var C=!1;switch(o.charAt(0)){case".":case"[":case"(":C=!0}for(var R=f.length-1;R>-1;R--){var T=f[R],q=o.slice(0,T.reStart),I=o.slice(T.reStart,T.reEnd-8),j=o.slice(T.reEnd-8,T.reEnd),$=o.slice(T.reEnd);j+=$;var N=q.split("(").length-1,D=$;for(S=0;S<N;S++)D=D.replace(/\)[+*?]?/,"");var M="";""===($=D)&&t!==g&&(M="$"),o=q+I+$+M+j}if(""!==o&&l&&(o="(?=.)"+o),C&&(o=m+o),t===g)return[o,l];if(!l)return e.replace(/\\(.)/g,"$1");var U=r.nocase?"i":"";try{var L=new RegExp("^"+o+"$",U)}catch(e){return new RegExp("$.")}return L._glob=e,L._src=o,L};var g={};d.makeRe=function(e,t){return new f(e,t||{}).makeRe()},f.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===n?r:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch(e){this.regexp=!1}return this.regexp},d.match=function(e,t,r){var i=new f(t,r=r||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},f.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(l),this.debug(this.pattern,"split",e);var n,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(n=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;if(r.matchBase&&1===a.length&&(c=[n]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},f.prototype.matchOne=function(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=t[s],h=e[o];if(this.debug(t,l,h),!1===l)return!1;if(l===n){this.debug("GLOBSTAR",[t,l,h]);var d=o,f=s+1;if(f===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!i.dot&&"."===e[o].charAt(0))return!1;return!0}for(;d<a;){var p=e[d];if(this.debug("\nglobstar while",e,d,t,f,p),this.matchOne(e.slice(d),t.slice(f),r))return this.debug("globstar found match!",d,a,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,d,t,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",e,d,t,f),d!==a))}if("string"==typeof l?(u=i.nocase?h.toLowerCase()===l.toLowerCase():h===l,this.debug("string match",l,h,u)):(u=h.match(l),this.debug("pattern match",l,h,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},778:(e,t,r)=>{var i=r(2479);function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=i(n),e.exports.strict=i(o),n.proto=n((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},4095:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",i=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},6679:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SqlPackageAction=t.ActionType=void 0;const c=o(r(1017)),u=o(r(2225)),l=o(r(27)),h=a(r(5731)),d=a(r(2573)),f=a(r(4738));var p,g;!function(e){e[e.DacpacAction=0]="DacpacAction",e[e.SqlAction=1]="SqlAction",e[e.BuildAndPublish=2]="BuildAndPublish"}(p=t.ActionType||(t.ActionType={})),function(e){e[e.Publish=0]="Publish",e[e.Extract=1]="Extract",e[e.Export=2]="Export",e[e.Import=3]="Import",e[e.DriftReport=4]="DriftReport",e[e.DeployReport=5]="DeployReport",e[e.Script=6]="Script"}(g=t.SqlPackageAction||(t.SqlPackageAction={})),t.default=class{constructor(e){this._inputs=e}execute(){return s(this,void 0,void 0,(function*(){if(this._inputs.actionType===p.DacpacAction)yield this._executeDacpacAction(this._inputs);else if(this._inputs.actionType===p.SqlAction)yield this._executeSqlFile(this._inputs);else{if(this._inputs.actionType!==p.BuildAndPublish)throw new Error(`Invalid AzureSqlAction '${this._inputs.actionType}'.`);{const e=yield this._executeBuildProject(this._inputs),t={serverName:this._inputs.serverName,actionType:p.DacpacAction,connectionString:this._inputs.connectionString,additionalArguments:this._inputs.additionalArguments,dacpacPackage:e,sqlpackageAction:g.Publish};yield this._executeDacpacAction(t)}}}))}_executeDacpacAction(e){return s(this,void 0,void 0,(function*(){u.debug("Begin executing action");let t=yield h.default.getSqlPackagePath(),r=this._getSqlPackageArguments(e);yield l.exec(`"${t}" ${r}`),console.log(`Successfully executed action ${g[e.sqlpackageAction]} on target database.`)}))}_executeSqlFile(e){return s(this,void 0,void 0,(function*(){let t=yield h.default.getSqlCmdPath();yield l.exec(`"${t}" -S ${e.serverName} -d ${e.connectionString.database} -U "${e.connectionString.userId}" -P "${e.connectionString.password}" -i "${e.sqlFile}" ${e.additionalArguments}`),console.log("Successfully executed Sql file on target database.")}))}_executeBuildProject(e){var t,r;return s(this,void 0,void 0,(function*(){const i=c.basename(e.projectFile,f.default.sqlprojExtension),n=null!==(t=e.buildArguments)&&void 0!==t?t:"";console.log("Calling into DotnetUtils.parseCommandArguments"+n);const o=yield d.default.parseCommandArguments(n);let s="";const a=yield d.default.findArgument(o,"--output","-o");if(a)s=a;else{const t=null!==(r=yield d.default.findArgument(o,"--configuration","-c"))&&void 0!==r?r:"Debug";s=c.join(c.dirname(e.projectFile),"bin",t)}yield l.exec(`dotnet build "${e.projectFile}" -p:NetCoreBuild=true ${n}`);const u=c.join(s,i+f.default.dacpacExtension);return console.log(`Successfully built database project to ${u}`),u}))}_getSqlPackageArguments(e){let t="";if(e.sqlpackageAction!==g.Publish)throw new Error(`Not supported SqlPackage action: '${g[e.sqlpackageAction]}'`);return t+=`/Action:Publish /TargetConnectionString:"${e.connectionString.connectionString}" /SourceFile:"${e.dacpacPackage}"`,e.additionalArguments&&(t+=" "+e.additionalArguments),t}}},5731:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=o(r(2225)),u=o(r(27)),l=o(r(1017)),h=o(r(7147)),d=o(r(2884)),f=a(r(1283)),p="win32"===process.platform,g="linux"===process.platform;class y{static getSqlPackagePath(){return s(this,void 0,void 0,(function*(){return this._sqlPackagePath?(c.debug(`Return the cached path of SqlPackage executable: ${this._sqlPackagePath}`),this._sqlPackagePath):(this._sqlPackagePath=p?yield this._getSqlPackageExecutablePath():g?this._getSqlPackageBinaryPathLinux():this._getSqlPackageBinaryPathMac(),this._sqlPackagePath)}))}static getSqlCmdPath(){return s(this,void 0,void 0,(function*(){return this._sqlCmdPath?(c.debug(`Return the cached path of SqlCmd executable: ${this._sqlCmdPath}`),this._sqlCmdPath):(this._sqlCmdPath=p?yield this._getSqlCmdExecutablePath():g?this._getSqlCmdBinaryPathLinux():this._getSqlCmdBinaryPathMac(),this._sqlCmdPath)}))}static getRegistrySubKeys(e){return new Promise((t=>{c.debug(`Getting sub-keys at registry path: HKLM:${e}`),new f.default({hive:f.default.HKLM,key:e}).keys(((e,r)=>e?"":t(r)))}))}static getRegistryValue(e,t){return new Promise((r=>{c.debug(`Getting registry value ${t} at path: HKLM:${e.key}`),e.get(t,((e,t)=>{r(e?"":t.value)}))}))}static registryKeyExists(e){return c.debug(`Checking if registry key 'HKLM:${e}' exists.`),new Promise((t=>{new f.default({hive:f.default.HKLM,key:e}).keyExists(((e,r)=>{t(!e&&r)}))}))}static resolveFilePath(e){let t=e;if(d.hasMagic(e)){let r=d.sync(e);if(0===r.length)throw new Error(`No files found matching pattern ${e}`);if(r.length>1)throw new Error(`Muliple files found matching pattern ${e}`);t=r[0]}if(!h.existsSync(t))throw new Error(`Unable to find file at location: ${t}`);return t}static _getSqlPackageExecutablePath(){return s(this,void 0,void 0,(function*(){c.debug("Getting location of SQLPackage.exe");let e=yield this._getSqlPackageInstalledWithSSMS();c.debug(e.toString());let t=yield this._getSqlPackageInstalledWithDacMsi();c.debug(t.toString());let r=yield this._getSqlPackageInstalledWithSSDT();c.debug(r.toString());let i=Math.max(e[1],t[1],r[1]),n="";if(i===e[1]?n=e[0]:i===t[1]?n=t[0]:i===r[1]&&(n=r[0]),!n)throw new Error("Unable to find the location of SqlPackage.exe");return c.debug(`SqlPackage.exe found at location: ${n}`),n}))}static _getSqlPackageInstalledWithSSDT(){return s(this,void 0,void 0,(function*(){let e=yield this._getLatestVisualStudioInstallationPath();if(e){let t=l.join(e,"Common7","IDE","Extensions","Microsoft","SQLDB","DAC"),r=this._getSqlPackageInVSDacDirectory(t);if(r[0])return r}let t=l.join("\\","SOFTWARE","Microsoft","VisualStudio"),r=l.join("\\","SOFTWARE","Wow6432Node","Microsoft","VisualStudio");if(!(yield y.registryKeyExists(t))&&(t=r,!(yield y.registryKeyExists(t))))return["",0];let i=yield y.getRegistrySubKeys(t),n=this._getVersionsRegistryKeys(i);for(let e of n){let t=yield y.getRegistryValue(e,"InstallDir"),r=l.join(t,"Common7","IDE","Extensions","Microsoft","SQLDB","DAC"),i=this._getSqlPackageInVSDacDirectory(r);if(i[0])return i}return c.debug("Dac Framework (installed with Visual Studio) not found on machine."),["",0]}))}static _getSqlPackageInVSDacDirectory(e){if(h.existsSync(e)){let t=h.readdirSync(e).filter((e=>!isNaN(l.basename(e)))).sort(((e,t)=>{let r=l.basename(e),i=l.basename(t);return r>i?-1:r<i?1:0})).map((t=>l.join(e,t)));for(let e of t){let t=l.join(e,"SqlPackage.exe");if(h.existsSync(t))return c.debug(`Dac Framework installed with Visual Studio found at ${t}`),[t,parseInt(l.basename(e))]}}return["",0]}static _getLatestVisualStudioInstallationPath(){return s(this,void 0,void 0,(function*(){let e=l.join(process.env["ProgramFiles(x86)"],"Microsoft Visual Studio","Installer","vswhere.exe"),t="";try{yield u.exec(`"${e}"`,["-latest","-format","json"],{silent:!0,listeners:{stdout:e=>t+=e.toString()}})}catch(e){return c.debug(`Unable to find the location of latest Visual Studio Installation path using vswhere.exe. ${e}`),""}c.debug(t);let r=JSON.parse(t);return r[0]&&r[0].installationPath}))}static _getSqlPackageInstalledWithDacMsi(){return s(this,void 0,void 0,(function*(){let e=l.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server","Data-Tier Application Framework"),t=l.join("\\","SOFTWARE","Wow6432Node","Microsoft","Microsoft SQL Server","Data-Tier Application Framework");if(!(yield y.registryKeyExists(e))&&(e=t,!(yield y.registryKeyExists(e))))return["",0];let r=yield y.getRegistrySubKeys(e),i=this._getVersionsRegistryKeys(r);for(let e of i){let t=yield y.getRegistryValue(e,"InstallDir");if(t){let r=l.join(t,"SqlPackage.exe");if(h.existsSync(r))return c.debug(`SQLPackage.exe (installed with DacFramework) found at location: ${r}`),[r,parseInt(e.key.split("\\").slice(-1)[0])]}}return["",0]}))}static _getSqlPackageInstalledWithSSMS(){return s(this,void 0,void 0,(function*(){let e=l.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server"),t=l.join("\\","SOFTWARE","Wow6432Node","Microsoft","Microsoft SQL Server");if(!(yield y.registryKeyExists(e))&&(e=t,!(yield y.registryKeyExists(e))))return["",0];let r=yield y.getRegistrySubKeys(e),i=this._getVersionsRegistryKeys(r);for(let e of i){let t=yield y.getRegistryValue(e,"VerSpecificRootDir");if(t){let r=l.join(t,"Dac","bin","SqlPackage.exe");if(h.existsSync(r))return c.debug(`SqlPackage.exe (installed with SSMS) found at location: ${r}`),[r,parseInt(e.key.split("\\").slice(-1)[0])]}}return["",0]}))}static _getVersionsRegistryKeys(e){return e.filter((e=>!isNaN(e.key.split("\\").slice(-1)[0]))).sort(((e,t)=>{let r=parseInt(e.key.split("\\").slice(-1)[0]),i=parseInt(t.key.split("\\").slice(-1)[0]);return r>i?-1:r<i?1:0}))}static _getSqlCmdExecutablePath(){return s(this,void 0,void 0,(function*(){c.debug("Getting location of sqlcmd.exe");let e=l.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server");if(!(yield y.registryKeyExists(e)))throw new Error("Unable to find the location for SqlCmd.exe from registry");let t=yield y.getRegistrySubKeys(e),r=this._getVersionsRegistryKeys(t);for(let e of r){let t=l.join(e.key,"Tools","ClientSetup");if(yield y.registryKeyExists(t)){let e=yield y.getRegistryValue(new f.default({hive:f.default.HKLM,key:t}),"ODBCToolsPath");if(e||(yield y.getRegistryValue(new f.default({hive:f.default.HKLM,key:t}),"Path")),e){let t=l.join(e,"SQLCMD.exe");if(h.existsSync(t))return c.debug(`SqlCmd.exe found at location: ${t}`),t}}}throw new Error("Unable to find location of sqlcmd.exe")}))}static _getSqlPackageBinaryPathLinux(){return"sqlpackage"}static _getSqlCmdBinaryPathLinux(){return"sqlcmd"}static _getSqlPackageBinaryPathMac(){throw new Error("This action is not supported on a Mac environment.")}static _getSqlCmdBinaryPathMac(){throw new Error("This action is not supported on a Mac environment.")}}t.default=y,y._sqlPackagePath="",y._sqlCmdPath=""},5169:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(804);class o{constructor(e){this._authorizer=e,this._restClient=new n.ServiceClient(e)}static getResourceManager(e,t){return i(this,void 0,void 0,(function*(){let r=new o(t);return yield r._populateSqlServerData(e),r}))}getSqlServer(){return this._resource}addFirewallRule(e,t){return i(this,void 0,void 0,(function*(){let r=new Date,i=`ClientIPAddress_${r.getFullYear()}-${r.getMonth()}-${r.getDay()}_${e}`,o={method:"PUT",uri:this._restClient.getRequestUri(`/${this._resource.id}/firewallRules/${i}`,{},[],"2014-04-01"),body:JSON.stringify({properties:{startIpAddress:e,endIpAddress:t}})};try{let e=yield this._restClient.beginRequest(o);if(200!==e.statusCode&&201!==e.statusCode)throw(0,n.ToError)(e);return e.body}catch(e){if(e instanceof n.AzureError)throw new Error(JSON.stringify(e));throw e}}))}removeFirewallRule(e){return i(this,void 0,void 0,(function*(){let t={method:"DELETE",uri:this._restClient.getRequestUri(`/${this._resource.id}/firewallRules/${e.name}`,{},[],"2014-04-01")};try{let e=yield this._restClient.beginRequest(t);if(200!==e.statusCode&&204!==e.statusCode)throw(0,n.ToError)(e)}catch(e){if(e instanceof n.AzureError)throw new Error(JSON.stringify(e));throw e}}))}_populateSqlServerData(e){return i(this,void 0,void 0,(function*(){let t=this._authorizer.getCloudSuffixUrl("sqlServerHostname");e.endsWith(t)&&(e=e.slice(0,e.lastIndexOf(t)));let r={method:"GET",uri:this._restClient.getRequestUri("//subscriptions/{subscriptionId}/providers/Microsoft.Sql/servers",{},[],"2015-05-01-preview")};try{let t=yield this._restClient.beginRequest(r);if(200!==t.statusCode)throw(0,n.ToError)(t);let i=t.body&&t.body.value;if(!(i&&i.length>0))throw new Error(`Unable to get details of SQL server ${e}. No SQL servers were found in the subscription.`);if(this._resource=i.filter((t=>t.name===e))[0],!this._resource)throw new Error(`Unable to get details of SQL server ${e}. Sql server '${e}' was not found in the subscription.`)}catch(e){if(e instanceof n.AzureError)throw new Error(JSON.stringify(e));throw e}}))}}t.default=o},4738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{}t.default=r,r.ipv4MatchPattern=/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/,r.dacpacExtension=".dacpac",r.sqlprojExtension=".sqlproj"},2573:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static parseCommandArguments(e){return r(this,void 0,void 0,(function*(){console.log("args to parse:"),console.log(e);let t={};const r=e.match(/(\-\-?[A-Za-z\-]+(?:$|\s+)(?:[^\s"'\-]+|"[^"]*"|'[^']*')?)/g);return null==r||r.forEach((e=>{const r=e.trim().indexOf(" ");if(r>=0){const i=e.substring(0,r),n=e.substring(r).trim();t[i]=n}else t[e]=void 0})),console.log("parsed command args:"),console.log(t),t}))}static findArgument(e,t,i){var n;return r(this,void 0,void 0,(function*(){return null!==(n=e[t])&&void 0!==n?n:i?e[i]:void 0}))}}},2873:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(2225));t.default=class{constructor(e){this._resourceManager=e}addFirewallRule(e){return s(this,void 0,void 0,(function*(){e?(console.log("Client does not have access to Sql server. Adding firewall exception for client's IP address."),this._firewallRule=yield this._resourceManager.addFirewallRule(e,e),a.debug(JSON.stringify(this._firewallRule)),console.log(`Successfully added firewall rule ${this._firewallRule.name}.`)):a.debug("Client has access to Sql server. Skip adding firewall exception.")}))}removeFirewallRule(){return s(this,void 0,void 0,(function*(){this._firewallRule&&(console.log(`Removing firewall rule '${this._firewallRule.name}'.`),yield this._resourceManager.removeFirewallRule(this._firewallRule),console.log("Successfully removed firewall rule."))}))}}},1063:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(2225)),a=/(?<key>[\w\s]+)=(?<val>('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*))/g,c=/^[;\s]*([\w\s]+=(?:('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*)))(;[;\s]*([\w\s]+=(?:('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*))))*[;\s]*$/;t.default=class{constructor(e){this._connectionString="",this._connectionString=e,this._validateConnectionString(),this._parsedConnectionString=this._parseConnectionString()}get connectionString(){return this._connectionString}get userId(){return this._parsedConnectionString.userId}get password(){return this._parsedConnectionString.password}get database(){return this._parsedConnectionString.database}get server(){return this._parsedConnectionString.server}_validateConnectionString(){if(!c.test(this._connectionString))throw new Error("Invalid connection string. A valid connection string is a series of keyword/value pairs separated by semi-colons. If there are any special characters like quotes, semi-colons in the keyword value, enclose the value within quotes. Refer this link for more info on conneciton string https://aka.ms/sqlconnectionstring")}_parseConnectionString(){let e=this._connectionString.matchAll(a),t={};for(let r of e)if(r.groups){let e=r.groups.key.trim(),i=r.groups.val.trim();switch("'"===i[0]?(i=i.slice(1,-1),i=i.replace(/''/g,"'")):'"'===i[0]&&(i=i.slice(1,-1),i=i.replace(/""/g,'"')),e.toLowerCase()){case"user id":case"uid":t.userId=i;break;case"password":case"pwd":t.password=i,s.setSecret(i);break;case"initial catalog":t.database=i;break;case"server":t.server=i;break;case"authentication":t.authentication=i}}if(!t.userId||!t.password||!t.database)throw new Error("Missing required keys in connection string. Please ensure that the keys 'User Id', 'Password', 'Initial Catalog' are provided in the connection string.");return t}}},9769:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=o(r(2225)),u=o(r(27)),l=a(r(5731)),h=a(r(4738));t.default=class{static detectIPAddress(e,t){return s(this,void 0,void 0,(function*(){let r=yield l.default.getSqlCmdPath(),i="",n="";try{c.debug(`Validating if client '${process.env.computername}' has access to Sql Server '${e}'.`),c.debug(`"${r}" -S ${e} -U "${t.userId}" -Q "select getdate()"`),yield u.exec(`"${r}" -S ${e} -U "${t.userId}" -P "${t.password}" -Q "select getdate()"`,[],{silent:!0,listeners:{stderr:e=>n+=e.toString()}})}catch(e){c.debug(n);let t=n.match(h.default.ipv4MatchPattern);if(!t)throw new Error(`Failed to add firewall rule. Unable to detect client IP Address. ${n} ${e}`);i=t[0]}return i}))}}},8519:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=o(r(2225)),u=o(r(6113)),l=o(r(1017)),h=r(2609),d=o(r(6679)),f=a(r(5169)),p=a(r(2873)),g=a(r(5731)),y=a(r(1063)),v=a(r(9769)),m=a(r(4738));let _=process.env.AZURE_HTTP_USER_AGENT?`${process.env.AZURE_HTTP_USER_AGENT}`:"";function w(){return s(this,void 0,void 0,(function*(){let e;try{let t=u.createHash("sha256").update(`${process.env.GITHUB_REPOSITORY}`).digest("hex"),r=(_?`${_}+`:"")+`GITHUBACTIONS_AzureSqlAction_${t}`;c.exportVariable("AZURE_HTTP_USER_AGENT",r);let i=function(){c.debug("Get action inputs.");let e=c.getInput("connection-string",{required:!0}),t=new y.default(e),r=c.getInput("server-name",{required:!1});r&&t.server&&r!=t.server&&c.debug("'server-name' is conflicting with 'server' property specified in the connection string. 'server-name' will take precedence."),r||(r=t.server);let i=c.getInput("arguments"),n=c.getInput("dacpac-package");if(n){if(n=g.default.resolveFilePath(n),l.extname(n).toLowerCase()!==m.default.dacpacExtension)throw new Error(`Invalid dacpac file path provided as input ${n}`);if(!r)throw new Error("Missing server name or address in the configuration.");return{serverName:r,connectionString:t,dacpacPackage:n,sqlpackageAction:d.SqlPackageAction.Publish,actionType:d.ActionType.DacpacAction,additionalArguments:i}}let o=c.getInput("sql-file");if(o){if(o=g.default.resolveFilePath(o),".sql"!==l.extname(o).toLowerCase())throw new Error(`Invalid sql file path provided as input ${o}`);if(!r)throw new Error("Missing server name or address in the configuration.");return{serverName:r,connectionString:t,sqlFile:o,actionType:d.ActionType.SqlAction,additionalArguments:i}}let s=c.getInput("project-file");if(s){if(s=g.default.resolveFilePath(s),l.extname(s).toLowerCase()!==m.default.sqlprojExtension)throw new Error(`Invalid database project file path provided as input ${s}`);const e=c.getInput("build-arguments");return{serverName:r,connectionString:t,actionType:d.ActionType.BuildAndPublish,additionalArguments:i,projectFile:s,buildArguments:e}}throw new Error("Required SQL file, DACPAC package, or database project file to execute action.")}(),n=new d.default(i);const o=yield v.default.detectIPAddress(i.serverName,i.connectionString);if(o){let t=yield h.AuthorizerFactory.getAuthorizer(),r=yield f.default.getResourceManager(i.serverName,t);e=new p.default(r),yield e.addFirewallRule(o)}yield n.execute()}catch(e){c.setFailed(e.message)}finally{e&&(yield e.removeFirewallRule()),c.exportVariable("AZURE_HTTP_USER_AGENT",_)}}))}t.default=w,w()},6149:(e,t,r)=>{e.exports=r(5468)},5468:(e,t,r)=>{"use strict";r(1808);var i,n=r(4404),o=r(3685),s=r(5687),a=r(2361),c=r(9491),u=r(3837);function l(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",(function(e,r,i,n){for(var o=d(r,i,n),s=0,a=t.requests.length;s<a;++s){var c=t.requests[s];if(c.host===o.host&&c.port===o.port)return t.requests.splice(s,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)}))}function h(e,t){var r=this;l.prototype.createSocket.call(r,e,(function(i){var o=e.request.getHeader("host"),s=f({},r.options,{socket:i,servername:o?o.replace(/:.*$/,""):e.host}),a=n.connect(0,s);r.sockets[r.sockets.indexOf(i)]=a,t(a)}))}function d(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function f(e){for(var t=1,r=arguments.length;t<r;++t){var i=arguments[t];if("object"==typeof i)for(var n=Object.keys(i),o=0,s=n.length;o<s;++o){var a=n[o];void 0!==i[a]&&(e[a]=i[a])}}return e}t.httpOverHttp=function(e){var t=new l(e);return t.request=o.request,t},t.httpsOverHttp=function(e){var t=new l(e);return t.request=o.request,t.createSocket=h,t},t.httpOverHttps=function(e){var t=new l(e);return t.request=s.request,t},t.httpsOverHttps=function(e){var t=new l(e);return t.request=s.request,t.createSocket=h,t},u.inherits(l,a.EventEmitter),l.prototype.addRequest=function(e,t,r,i){var n=this,o=f({request:e},n.options,d(t,r,i));n.sockets.length>=this.maxSockets?n.requests.push(o):n.createSocket(o,(function(t){function r(){n.emit("free",t,o)}function i(e){n.removeSocket(t),t.removeListener("free",r),t.removeListener("close",i),t.removeListener("agentRemove",i)}t.on("free",r),t.on("close",i),t.on("agentRemove",i),e.onSocket(t)}))},l.prototype.createSocket=function(e,t){var r=this,n={};r.sockets.push(n);var o=f({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1});o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),i("making CONNECT request");var s=r.request(o);function a(o,a,u){if(s.removeAllListeners(),a.removeAllListeners(),200===o.statusCode)c.equal(u.length,0),i("tunneling connection has established"),r.sockets[r.sockets.indexOf(n)]=a,t(a);else{i("tunneling socket could not be established, statusCode=%d",o.statusCode);var l=new Error("tunneling socket could not be established, statusCode="+o.statusCode);l.code="ECONNRESET",e.request.emit("error",l),r.removeSocket(n)}}s.useChunkedEncodingByDefault=!1,s.once("response",(function(e){e.upgrade=!0})),s.once("upgrade",(function(e,t,r){process.nextTick((function(){a(e,t,r)}))})),s.once("connect",a),s.once("error",(function(t){s.removeAllListeners(),i("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, cause="+t.message);o.code="ECONNRESET",e.request.emit("error",o),r.removeSocket(n)})),s.end()},l.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,(function(e){r.request.onSocket(e)}))}},i=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=i},7723:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(7310),o=r(3685),s=r(5687);let a,c;var u;!function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"}(u=t.HttpCodes||(t.HttpCodes={}));const l=[u.MovedPermanently,u.ResourceMoved,u.SeeOther,u.TemporaryRedirect,u.PermanentRedirect],h=[u.BadGateway,u.ServiceUnavailable,u.GatewayTimeout],d=["OPTIONS","GET","DELETE","HEAD"];class f{constructor(e){this.message=e}readBody(){return new Promise(((e,t)=>i(this,void 0,void 0,(function*(){let t="";this.message.on("data",(e=>{t+=e})),this.message.on("end",(()=>{e(t)}))}))))}}var p;t.HttpClientResponse=f,t.isHttps=function(e){return"https:"===n.parse(e).protocol},function(e){e.HTTP_PROXY="HTTP_PROXY",e.HTTPS_PROXY="HTTPS_PROXY"}(p||(p={})),t.HttpClient=class{constructor(e,t,i){this._ignoreSslError=!1,this._allowRedirects=!0,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[],this.requestOptions=i,i&&(null!=i.ignoreSslError&&(this._ignoreSslError=i.ignoreSslError),this._socketTimeout=i.socketTimeout,this._httpProxy=i.proxy,i.proxy&&i.proxy.proxyBypassHosts&&(this._httpProxyBypassHosts=[],i.proxy.proxyBypassHosts.forEach((e=>{this._httpProxyBypassHosts.push(new RegExp(e,"i"))}))),this._certConfig=i.cert,this._certConfig&&(a=r(7147),this._certConfig.caFile&&a.existsSync(this._certConfig.caFile)&&(this._ca=a.readFileSync(this._certConfig.caFile,"utf8")),this._certConfig.certFile&&a.existsSync(this._certConfig.certFile)&&(this._cert=a.readFileSync(this._certConfig.certFile,"utf8")),this._certConfig.keyFile&&a.existsSync(this._certConfig.keyFile)&&(this._key=a.readFileSync(this._certConfig.keyFile,"utf8"))),null!=i.allowRedirects&&(this._allowRedirects=i.allowRedirects),null!=i.maxRedirects&&(this._maxRedirects=Math.max(i.maxRedirects,0)),null!=i.keepAlive&&(this._keepAlive=i.keepAlive),null!=i.allowRetries&&(this._allowRetries=i.allowRetries),null!=i.maxRetries&&(this._maxRetries=i.maxRetries))}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,r){return this.request("POST",e,t,r||{})}patch(e,t,r){return this.request("PATCH",e,t,r||{})}put(e,t,r){return this.request("PUT",e,t,r||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,r,i){return this.request(e,t,r,i)}request(e,t,r,n){return i(this,void 0,void 0,(function*(){if(this._disposed)throw new Error("Client has already been disposed.");let i,o=this._prepareRequest(e,t,n),s=this._allowRetries&&-1!=d.indexOf(e)?this._maxRetries+1:1,a=0;for(;a<s;){if(i=yield this.requestRaw(o,r),i&&i.message&&i.message.statusCode===u.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++)if(this.handlers[t].canHandleAuthentication(i)){e=this.handlers[t];break}return e?e.handleAuthentication(this,o,r):i}let t=this._maxRedirects;for(;-1!=l.indexOf(i.message.statusCode)&&this._allowRedirects&&t>0;){const s=i.message.headers.location;if(!s)break;yield i.readBody(),o=this._prepareRequest(e,s,n),i=yield this.requestRaw(o,r),t--}if(-1==h.indexOf(i.message.statusCode))return i;a+=1,a<s&&(yield i.readBody(),yield this._performExponentialBackoff(a))}return i}))}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return new Promise(((r,i)=>{this.requestRawWithCallback(e,t,(function(e,t){e&&i(e),r(t)}))}))}requestRawWithCallback(e,t,r){let i;"string"==typeof t&&(e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let n=!1,o=(e,t)=>{n||(n=!0,r(e,t))},s=e.httpModule.request(e.options,(e=>{let t=new f(e);o(null,t)}));s.on("socket",(e=>{i=e})),s.setTimeout(this._socketTimeout||18e4,(()=>{i&&i.end(),o(new Error("Request timeout: "+e.options.path),null)})),s.on("error",(function(e){o(e,null)})),t&&"string"==typeof t&&s.write(t,"utf8"),t&&"string"!=typeof t?(t.on("close",(function(){s.end()})),t.pipe(s)):s.end()}_prepareRequest(e,t,r){const i={};i.parsedUrl=n.parse(t);const a="https:"===i.parsedUrl.protocol;i.httpModule=a?s:o;const c=a?443:80;return i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):c,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=e,i.options.headers=this._mergeHeaders(r),i.options.headers["user-agent"]=this.userAgent,i.options.agent=this._getAgent(t),this.handlers&&!this._isPresigned(t)&&this.handlers.forEach((e=>{e.prepareRequest(i.options)})),i}_isPresigned(e){if(this.requestOptions&&this.requestOptions.presignedUrlPatterns){const t=this.requestOptions.presignedUrlPatterns;for(let r=0;r<t.length;r++)if(e.match(t[r]))return!0}return!1}_mergeHeaders(e){const t=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},t(this.requestOptions.headers),t(e)):t(e||{})}_getAgent(e){let t,i=this._getProxy(e),a=i.proxyUrl&&i.proxyUrl.hostname&&!this._isBypassProxy(e);if(this._keepAlive&&a&&(t=this._proxyAgent),this._keepAlive&&!a&&(t=this._agent),t)return t;const u="https:"===n.parse(e).protocol;let l=100;if(this.requestOptions&&(l=this.requestOptions.maxSockets||o.globalAgent.maxSockets),a){c||(c=r(6149));const e={maxSockets:l,keepAlive:this._keepAlive,proxy:{proxyAuth:i.proxyAuth,host:i.proxyUrl.hostname,port:i.proxyUrl.port}};let n;const o="https:"===i.proxyUrl.protocol;n=u?o?c.httpsOverHttps:c.httpsOverHttp:o?c.httpOverHttps:c.httpOverHttp,t=n(e),this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:l};t=u?new s.Agent(e):new o.Agent(e),this._agent=t}return t||(t=u?s.globalAgent:o.globalAgent),u&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),u&&this._certConfig&&(t.options=Object.assign(t.options||{},{ca:this._ca,cert:this._cert,key:this._key,passphrase:this._certConfig.passphrase})),t}_getProxy(e){let t,r,i="https:"===n.parse(e).protocol,o=this._httpProxy,s=process.env[p.HTTPS_PROXY],a=process.env[p.HTTP_PROXY];return o||(s&&i?o={proxyUrl:s}:a&&(o={proxyUrl:a})),o&&(o.proxyUrl.length>0&&(t=n.parse(o.proxyUrl)),(o.proxyUsername||o.proxyPassword)&&(r=o.proxyUsername+":"+o.proxyPassword)),{proxyUrl:t,proxyAuth:r}}_isBypassProxy(e){if(!this._httpProxyBypassHosts)return!1;let t=!1;return this._httpProxyBypassHosts.forEach((r=>{r.test(e)&&(t=!0)})),t}_performExponentialBackoff(e){e=Math.min(10,e);const t=5*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}}},1283:(e,t,r)=>{var i=r(3837),n=r(1017),o=r(2081).spawn,s="HKLM",a="HKCU",c="HKCR",u="HKCC",l=[s,a,c,"HKU",u],h="REG_SZ",d="REG_MULTI_SZ",f="REG_EXPAND_SZ",p="REG_DWORD",g="REG_QWORD",y="REG_BINARY",v="REG_NONE",m=[h,d,f,p,g,y,v],_=/(\\[a-zA-Z0-9_\s]+)*/,w=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,b=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function S(e,t){if(!(this instanceof S))return new S(e,t);Error.captureStackTrace(this,S),this.__defineGetter__("name",(function(){return S.name})),this.__defineGetter__("message",(function(){return e})),this.__defineGetter__("code",(function(){return t}))}function E(e){var t={stdout:"",stderr:""};return e.stdout.on("data",(function(e){t.stdout+=e.toString()})),e.stderr.on("data",(function(e){t.stderr+=e.toString()})),t}function x(e,t,r){var n=r.stdout.trim(),o=r.stderr.trim();return new S(i.format("%s command exited with code %d:\n%s\n%s",e,t,n,o),t)}function O(e,t){t&&e.push("/reg:"+function(e){if("x64"==e)return"64";if("x86"==e)return"32";throw new Error("illegal architecture: "+e+" (use x86 or x64)")}(t))}function A(){return"win32"===process.platform?n.join(process.env.windir,"system32","reg.exe"):"REG"}function k(e,t,r,i,n,o,s){if(!(this instanceof k))return new k(e,t,r,i,n,o,s);var a=e,c=t,u=r,l=i,h=n,d=o,f=s;this.__defineGetter__("host",(function(){return a})),this.__defineGetter__("hive",(function(){return c})),this.__defineGetter__("key",(function(){return u})),this.__defineGetter__("name",(function(){return l})),this.__defineGetter__("type",(function(){return h})),this.__defineGetter__("value",(function(){return d})),this.__defineGetter__("arch",(function(){return f}))}function P(e){if(!(this instanceof P))return new P(e);var t=e||{},r=""+(t.host||""),i=""+(t.hive||s),n=""+(t.key||""),o=t.arch||null;if(this.__defineGetter__("host",(function(){return r})),this.__defineGetter__("hive",(function(){return i})),this.__defineGetter__("key",(function(){return n})),this.__defineGetter__("path",(function(){return(0==r.length?"":"\\\\"+r+"\\")+i+n})),this.__defineGetter__("arch",(function(){return o})),this.__defineGetter__("parent",(function(){var e=n.lastIndexOf("\\");return new P({host:this.host,hive:this.hive,key:-1==e?"":n.substring(0,e),arch:this.arch})})),-1==l.indexOf(i))throw new Error("illegal hive specified.");if(!_.test(n))throw new Error("illegal key specified.");if(o&&"x64"!=o&&"x86"!=o)throw new Error("illegal architecture specified (use x86 or x64)")}i.inherits(S,Error),i.inherits(k,Object),P.HKLM=s,P.HKCU=a,P.HKCR=c,P.HKU="HKU",P.HKCC=u,P.HIVES=l,P.REG_SZ=h,P.REG_MULTI_SZ=d,P.REG_EXPAND_SZ=f,P.REG_DWORD=p,P.REG_QWORD=g,P.REG_BINARY=y,P.REG_NONE=v,P.REG_TYPES=m,P.DEFAULT_VALUE="",P.prototype.values=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];O(t,this.arch);var r=o(A(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",n=this,s=null,a=E(r);return r.on("close",(function(t){if(!s)if(0!==t)e(x("QUERY",t,a),null);else{for(var r=[],o=[],c=i.split("\n"),u=0,l=0,h=c.length;l<h;l++){var d=c[l].trim();d.length>0&&(0!=u&&r.push(d),++u)}for(l=0,h=r.length;l<h;l++){var f,p,g,y=b.exec(r[l]);y&&(f=y[1].trim(),p=y[2].trim(),g=y[3],o.push(new k(n.host,n.hive,n.key,f,p,g,n.arch)))}e(null,o)}})),r.stdout.on("data",(function(e){i+=e.toString()})),r.on("error",(function(t){s=t,e(t)})),this},P.prototype.keys=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];O(t,this.arch);var r=o(A(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",n=this,s=null,a=E(r);return r.on("close",(function(t){s||0!==t&&e(x("QUERY",t,a),null)})),r.stdout.on("data",(function(e){i+=e.toString()})),r.stdout.on("end",(function(){for(var t=[],r=[],o=i.split("\n"),s=0,a=o.length;s<a;s++){var c=o[s].trim();c.length>0&&t.push(c)}for(s=0,a=t.length;s<a;s++){var u,l=w.exec(t[s]);l&&(l[1],(u=l[2])&&u!==n.key&&r.push(new P({host:n.host,hive:n.hive,key:u,arch:n.arch})))}e(null,r)})),r.on("error",(function(t){s=t,e(t)})),this},P.prototype.get=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var r=["QUERY",this.path];""==e?r.push("/ve"):r=r.concat(["/v",e]),O(r,this.arch);var i=o(A(),r,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n="",s=this,a=null,c=E(i);return i.on("close",(function(e){if(!a)if(0!==e)t(x("QUERY",e,c),null);else{for(var r=[],i=null,o=n.split("\n"),u=0,l=0,h=o.length;l<h;l++){var d=o[l].trim();d.length>0&&(0!=u&&r.push(d),++u)}var f,p,g,y=r[r.length-1]||"",v=b.exec(y);v&&(f=v[1].trim(),p=v[2].trim(),g=v[3],i=new k(s.host,s.hive,s.key,f,p,g,s.arch)),t(null,i)}})),i.stdout.on("data",(function(e){n+=e.toString()})),i.on("error",(function(e){a=e,t(e)})),this},P.prototype.set=function(e,t,r,i){if("function"!=typeof i)throw new TypeError("must specify a callback");if(-1==m.indexOf(t))throw Error("illegal type specified.");var n=["ADD",this.path];""==e?n.push("/ve"):n=n.concat(["/v",e]),O(n=n.concat(["/t",t,"/d",r,"/f"]),this.arch);var s=o(A(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),a=null,c=E(s);return s.on("close",(function(e){a||i(0!==e?x("ADD",e,c):null)})),s.stdout.on("data",(function(e){})),s.on("error",(function(e){a=e,i(e)})),this},P.prototype.remove=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var r=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"];O(r,this.arch);var i=o(A(),r,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),n=null,s=E(i);return i.on("close",(function(e){n||(0!==e?t(x("DELETE",e,s),null):t(null))})),i.stdout.on("data",(function(e){})),i.on("error",(function(e){n=e,t(e)})),this},P.prototype.clear=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"];O(t,this.arch);var r=o(A(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,n=E(r);return r.on("close",(function(t){i||(0!==t?e(x("DELETE",t,n),null):e(null))})),r.stdout.on("data",(function(e){})),r.on("error",(function(t){i=t,e(t)})),this},P.prototype.erase=P.prototype.clear,P.prototype.destroy=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f"];O(t,this.arch);var r=o(A(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,n=E(r);return r.on("close",(function(t){i||(0!==t?e(x("DELETE",t,n),null):e(null))})),r.stdout.on("data",(function(e){})),r.on("error",(function(t){i=t,e(t)})),this},P.prototype.create=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"];O(t,this.arch);var r=o(A(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,n=E(r);return r.on("close",(function(t){i||(0!==t?e(x("ADD",t,n),null):e(null))})),r.stdout.on("data",(function(e){})),r.on("error",(function(t){i=t,e(t)})),this},P.prototype.keyExists=function(e){return this.values((function(t,r){if(t)return 1==t.code?e(null,!1):e(t);e(null,!0)})),this},P.prototype.valueExists=function(e,t){return this.get(e,(function(e,r){if(e)return 1==e.code?t(null,!1):t(e);t(null,!0)})),this},e.exports=P},2479:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var i=t.apply(this,e),n=e[e.length-1];return"function"==typeof i&&i!==n&&Object.keys(n).forEach((function(e){i[e]=n[e]})),i}}},9491:e=>{"use strict";e.exports=require("assert")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")}},t={};!function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}(8519)})();