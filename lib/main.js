/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={5265:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(2037)),o=n(4570);function s(e,t,n){const r=new a(e,t,n);process.stdout.write(r.toString()+i.EOL)}t.issueCommand=s,t.issue=function(e,t=""){s(e,{},t)};class a{constructor(e,t,n){e||(e="missing.command"),this.command=e,this.properties=t,this.message=n}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let n=!0;for(const r in this.properties)if(this.properties.hasOwnProperty(r)){const i=this.properties[r];i&&(n?n=!1:e+=",",e+=`${r}=${t=i,o.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var t;return e+=`::${function(e){return o.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}},2225:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5265),s=n(3108),a=n(4570),c=i(n(2037)),u=i(n(1017));var l;function h(e){o.issue("error",e instanceof Error?e.toString():e)}function d(e){o.issue("group",e)}function f(){o.issue("endgroup")}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(l=t.ExitCode||(t.ExitCode={})),t.exportVariable=function(e,t){const n=a.toCommandValue(t);if(process.env[e]=n,process.env.GITHUB_ENV){const t="_GitHubActionsFileCommandDelimeter_",r=`${e}<<${t}${c.EOL}${n}${c.EOL}${t}`;s.issueCommand("ENV",r)}else o.issueCommand("set-env",{name:e},n)},t.setSecret=function(e){o.issueCommand("add-mask",{},e)},t.addPath=function(e){process.env.GITHUB_PATH?s.issueCommand("PATH",e):o.issueCommand("add-path",{},e),process.env.PATH=`${e}${u.delimiter}${process.env.PATH}`},t.getInput=function(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n)throw new Error(`Input required and not supplied: ${e}`);return n.trim()},t.setOutput=function(e,t){o.issueCommand("set-output",{name:e},t)},t.setCommandEcho=function(e){o.issue("echo",e?"on":"off")},t.setFailed=function(e){process.exitCode=l.Failure,h(e)},t.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},t.debug=function(e){o.issueCommand("debug",{},e)},t.error=h,t.warning=function(e){o.issue("warning",e instanceof Error?e.toString():e)},t.info=function(e){process.stdout.write(e+c.EOL)},t.startGroup=d,t.endGroup=f,t.group=function(e,t){return r(this,void 0,void 0,(function*(){let n;d(e);try{n=yield t()}finally{f()}return n}))},t.saveState=function(e,t){o.issueCommand("save-state",{name:e},t)},t.getState=function(e){return process.env[`STATE_${e}`]||""}},3108:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(7147)),o=r(n(2037)),s=n(4570);t.issueCommand=function(e,t){const n=process.env[`GITHUB_${e}`];if(!n)throw new Error(`Unable to find environment variable for file command ${e}`);if(!i.existsSync(n))throw new Error(`Missing file at path: ${n}`);i.appendFileSync(n,`${s.toCommandValue(t)}${o.EOL}`,{encoding:"utf8"})}},4570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCommandValue=function(e){return null==e?"":"string"==typeof e||e instanceof String?e:JSON.stringify(e)}},27:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4171);t.exec=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=i.argStringToArray(e);if(0===r.length)throw new Error("Parameter 'commandLine' cannot be null or empty.");const o=r[0];return t=r.slice(1).concat(t||[]),new i.ToolRunner(o,t,n).exec()}))}},4171:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2037),o=n(2361),s=n(2081),a="win32"===process.platform;class c extends o.EventEmitter{constructor(e,t,n){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=t||[],this.options=n||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,t){const n=this._getSpawnFileName(),r=this._getSpawnArgs(e);let i=t?"":"[command]";if(a)if(this._isCmdFile()){i+=n;for(const e of r)i+=` ${e}`}else if(e.windowsVerbatimArguments){i+=`"${n}"`;for(const e of r)i+=` ${e}`}else{i+=this._windowsQuoteCmdArg(n);for(const e of r)i+=` ${this._windowsQuoteCmdArg(e)}`}else{i+=n;for(const e of r)i+=` ${e}`}return i}_processLineBuffer(e,t,n){try{let r=t+e.toString(),o=r.indexOf(i.EOL);for(;o>-1;)n(r.substring(0,o)),r=r.substring(o+i.EOL.length),o=r.indexOf(i.EOL);t=r}catch(e){this._debug(`error processing line. Failed with error ${e}`)}}_getSpawnFileName(){return a&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(a&&this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const n of this.args)t+=" ",t+=e.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return t+='"',[t]}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){const e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';const t=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let n=!1;for(const r of e)if(t.some((e=>e===r))){n=!0;break}if(!n)return e;let r='"',i=!0;for(let t=e.length;t>0;t--)r+=e[t-1],i&&"\\"===e[t-1]?r+="\\":'"'===e[t-1]?(i=!0,r+='"'):i=!1;return r+='"',r.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("\t")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let t='"',n=!0;for(let r=e.length;r>0;r--)t+=e[r-1],n&&"\\"===e[r-1]?t+="\\":'"'===e[r-1]?(n=!0,t+="\\"):n=!1;return t+='"',t.split("").reverse().join("")}_cloneExecOptions(e){const t={cwd:(e=e||{}).cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return t.outStream=e.outStream||process.stdout,t.errStream=e.errStream||process.stderr,t}_getSpawnOptions(e,t){e=e||{};const n={};return n.cwd=e.cwd,n.env=e.env,n.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(n.argv0=`"${t}"`),n}exec(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(const e of this.args)this._debug(`   ${e}`);const n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+i.EOL);const r=new u(n,this.toolPath);r.on("debug",(e=>{this._debug(e)}));const o=this._getSpawnFileName(),a=s.spawn(o,this._getSpawnArgs(n),this._getSpawnOptions(this.options,o));a.stdout&&a.stdout.on("data",(e=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(e),!n.silent&&n.outStream&&n.outStream.write(e),this._processLineBuffer(e,"",(e=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(e)}))})),a.stderr&&a.stderr.on("data",(e=>{r.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(e),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(e),this._processLineBuffer(e,"",(e=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(e)}))})),a.on("error",(e=>{r.processError=e.message,r.processExited=!0,r.processClosed=!0,r.CheckComplete()})),a.on("exit",(e=>{r.processExitCode=e,r.processExited=!0,this._debug(`Exit code ${e} received from tool '${this.toolPath}'`),r.CheckComplete()})),a.on("close",(e=>{r.processExitCode=e,r.processExited=!0,r.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),r.CheckComplete()})),r.on("done",((n,r)=>{"".length>0&&this.emit("stdline",""),"".length>0&&this.emit("errline",""),a.removeAllListeners(),n?t(n):e(r)}))}))}))}}t.ToolRunner=c,t.argStringToArray=function(e){const t=[];let n=!1,r=!1,i="";function o(e){r&&'"'!==e&&(i+="\\"),i+=e,r=!1}for(let s=0;s<e.length;s++){const a=e.charAt(s);'"'!==a?"\\"===a&&r?o(a):"\\"===a&&n?r=!0:" "!==a||n?o(a):i.length>0&&(t.push(i),i=""):r?o(a):n=!n}return i.length>0&&t.push(i.trim()),t};class u extends o.EventEmitter{constructor(e,t){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!t)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=t,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=setTimeout(u.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):0===this.processExitCode||this.options.ignoreReturnCode?this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)):e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){const t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}}},4635:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=t.isHttps=t.HttpClientResponse=t.HttpClientError=t.getProxyUrl=t.MediaTypes=t.Headers=t.HttpCodes=void 0;const a=o(n(3685)),c=o(n(5687)),u=o(n(7960)),l=o(n(6149));var h,d,f;!function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"}(h=t.HttpCodes||(t.HttpCodes={})),function(e){e.Accept="accept",e.ContentType="content-type"}(d=t.Headers||(t.Headers={})),function(e){e.ApplicationJson="application/json"}(f=t.MediaTypes||(t.MediaTypes={})),t.getProxyUrl=function(e){const t=u.getProxyUrl(new URL(e));return t?t.href:""};const p=[h.MovedPermanently,h.ResourceMoved,h.SeeOther,h.TemporaryRedirect,h.PermanentRedirect],m=[h.BadGateway,h.ServiceUnavailable,h.GatewayTimeout],g=["OPTIONS","GET","DELETE","HEAD"];class y extends Error{constructor(e,t){super(e),this.name="HttpClientError",this.statusCode=t,Object.setPrototypeOf(this,y.prototype)}}t.HttpClientError=y;class _{constructor(e){this.message=e}readBody(){return s(this,void 0,void 0,(function*(){return new Promise((e=>s(this,void 0,void 0,(function*(){let t=Buffer.alloc(0);this.message.on("data",(e=>{t=Buffer.concat([t,e])})),this.message.on("end",(()=>{e(t.toString())}))}))))}))}}t.HttpClientResponse=_,t.isHttps=function(e){return"https:"===new URL(e).protocol},t.HttpClient=class{constructor(e,t,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[],this.requestOptions=n,n&&(null!=n.ignoreSslError&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,null!=n.allowRedirects&&(this._allowRedirects=n.allowRedirects),null!=n.allowRedirectDowngrade&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),null!=n.maxRedirects&&(this._maxRedirects=Math.max(n.maxRedirects,0)),null!=n.keepAlive&&(this._keepAlive=n.keepAlive),null!=n.allowRetries&&(this._allowRetries=n.allowRetries),null!=n.maxRetries&&(this._maxRetries=n.maxRetries))}options(e,t){return s(this,void 0,void 0,(function*(){return this.request("OPTIONS",e,null,t||{})}))}get(e,t){return s(this,void 0,void 0,(function*(){return this.request("GET",e,null,t||{})}))}del(e,t){return s(this,void 0,void 0,(function*(){return this.request("DELETE",e,null,t||{})}))}post(e,t,n){return s(this,void 0,void 0,(function*(){return this.request("POST",e,t,n||{})}))}patch(e,t,n){return s(this,void 0,void 0,(function*(){return this.request("PATCH",e,t,n||{})}))}put(e,t,n){return s(this,void 0,void 0,(function*(){return this.request("PUT",e,t,n||{})}))}head(e,t){return s(this,void 0,void 0,(function*(){return this.request("HEAD",e,null,t||{})}))}sendStream(e,t,n,r){return s(this,void 0,void 0,(function*(){return this.request(e,t,n,r)}))}getJson(e,t={}){return s(this,void 0,void 0,(function*(){t[d.Accept]=this._getExistingOrDefaultHeader(t,d.Accept,f.ApplicationJson);const n=yield this.get(e,t);return this._processResponse(n,this.requestOptions)}))}postJson(e,t,n={}){return s(this,void 0,void 0,(function*(){const r=JSON.stringify(t,null,2);n[d.Accept]=this._getExistingOrDefaultHeader(n,d.Accept,f.ApplicationJson),n[d.ContentType]=this._getExistingOrDefaultHeader(n,d.ContentType,f.ApplicationJson);const i=yield this.post(e,r,n);return this._processResponse(i,this.requestOptions)}))}putJson(e,t,n={}){return s(this,void 0,void 0,(function*(){const r=JSON.stringify(t,null,2);n[d.Accept]=this._getExistingOrDefaultHeader(n,d.Accept,f.ApplicationJson),n[d.ContentType]=this._getExistingOrDefaultHeader(n,d.ContentType,f.ApplicationJson);const i=yield this.put(e,r,n);return this._processResponse(i,this.requestOptions)}))}patchJson(e,t,n={}){return s(this,void 0,void 0,(function*(){const r=JSON.stringify(t,null,2);n[d.Accept]=this._getExistingOrDefaultHeader(n,d.Accept,f.ApplicationJson),n[d.ContentType]=this._getExistingOrDefaultHeader(n,d.ContentType,f.ApplicationJson);const i=yield this.patch(e,r,n);return this._processResponse(i,this.requestOptions)}))}request(e,t,n,r){return s(this,void 0,void 0,(function*(){if(this._disposed)throw new Error("Client has already been disposed.");const i=new URL(t);let o=this._prepareRequest(e,i,r);const s=this._allowRetries&&g.includes(e)?this._maxRetries+1:1;let a,c=0;do{if(a=yield this.requestRaw(o,n),a&&a.message&&a.message.statusCode===h.Unauthorized){let e;for(const t of this.handlers)if(t.canHandleAuthentication(a)){e=t;break}return e?e.handleAuthentication(this,o,n):a}let t=this._maxRedirects;for(;a.message.statusCode&&p.includes(a.message.statusCode)&&this._allowRedirects&&t>0;){const s=a.message.headers.location;if(!s)break;const c=new URL(s);if("https:"===i.protocol&&i.protocol!==c.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),c.hostname!==i.hostname)for(const e in r)"authorization"===e.toLowerCase()&&delete r[e];o=this._prepareRequest(e,c,r),a=yield this.requestRaw(o,n),t--}if(!a.message.statusCode||!m.includes(a.message.statusCode))return a;c+=1,c<s&&(yield a.readBody(),yield this._performExponentialBackoff(c))}while(c<s);return a}))}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{this.requestRawWithCallback(e,t,(function(e,t){e?r(e):t?n(t):r(new Error("Unknown error"))}))}))}))}requestRawWithCallback(e,t,n){"string"==typeof t&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let r=!1;function i(e,t){r||(r=!0,n(e,t))}const o=e.httpModule.request(e.options,(e=>{i(void 0,new _(e))}));let s;o.on("socket",(e=>{s=e})),o.setTimeout(this._socketTimeout||18e4,(()=>{s&&s.end(),i(new Error(`Request timeout: ${e.options.path}`))})),o.on("error",(function(e){i(e)})),t&&"string"==typeof t&&o.write(t,"utf8"),t&&"string"!=typeof t?(t.on("close",(function(){o.end()})),t.pipe(o)):o.end()}getAgent(e){const t=new URL(e);return this._getAgent(t)}_prepareRequest(e,t,n){const r={};r.parsedUrl=t;const i="https:"===r.parsedUrl.protocol;r.httpModule=i?c:a;const o=i?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):o,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=e,r.options.headers=this._mergeHeaders(n),null!=this.userAgent&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(const e of this.handlers)e.prepareRequest(r.options);return r}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},v(this.requestOptions.headers),v(e||{})):v(e||{})}_getExistingOrDefaultHeader(e,t,n){let r;return this.requestOptions&&this.requestOptions.headers&&(r=v(this.requestOptions.headers)[t]),e[t]||r||n}_getAgent(e){let t;const n=u.getProxyUrl(e),r=n&&n.hostname;if(this._keepAlive&&r&&(t=this._proxyAgent),this._keepAlive&&!r&&(t=this._agent),t)return t;const i="https:"===e.protocol;let o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||a.globalAgent.maxSockets),n&&n.hostname){const e={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})};let r;const s="https:"===n.protocol;r=i?s?l.httpsOverHttps:l.httpsOverHttp:s?l.httpOverHttps:l.httpOverHttp,t=r(e),this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:o};t=i?new c.Agent(e):new a.Agent(e),this._agent=t}return t||(t=i?c.globalAgent:a.globalAgent),i&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),t}_performExponentialBackoff(e){return s(this,void 0,void 0,(function*(){e=Math.min(10,e);const t=5*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}))}_processResponse(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((n,r)=>s(this,void 0,void 0,(function*(){const i=e.message.statusCode||0,o={statusCode:i,result:null,headers:{}};let s,a;i===h.NotFound&&n(o);try{a=yield e.readBody(),a&&a.length>0&&(s=t&&t.deserializeDates?JSON.parse(a,(function(e,t){if("string"==typeof t){const e=new Date(t);if(!isNaN(e.valueOf()))return e}return t})):JSON.parse(a),o.result=s),o.headers=e.message.headers}catch(e){}if(i>299){let e;e=s&&s.message?s.message:a&&a.length>0?a:`Failed request: (${i})`;const t=new y(e,i);t.result=o.result,r(t)}else n(o)}))))}))}};const v=e=>Object.keys(e).reduce(((t,n)=>(t[n.toLowerCase()]=e[n],t)),{})},7960:(e,t)=>{"use strict";function n(e){if(!e.hostname)return!1;const t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let n;e.port?n=Number(e.port):"http:"===e.protocol?n=80:"https:"===e.protocol&&(n=443);const r=[e.hostname.toUpperCase()];"number"==typeof n&&r.push(`${r[0]}:${n}`);for(const e of t.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e)))if(r.some((t=>t===e)))return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.checkBypass=t.getProxyUrl=void 0,t.getProxyUrl=function(e){const t="https:"===e.protocol;if(n(e))return;const r=t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;return r?new URL(r):void 0},t.checkBypass=n},7564:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getCmdPath=t.tryGetExecutablePath=t.isRooted=t.isDirectory=t.exists=t.IS_WINDOWS=t.unlink=t.symlink=t.stat=t.rmdir=t.rename=t.readlink=t.readdir=t.mkdir=t.lstat=t.copyFile=t.chmod=void 0;const c=s(n(7147)),u=s(n(1017));function l(e){return(1&e.mode)>0||(8&e.mode)>0&&e.gid===process.getgid()||(64&e.mode)>0&&e.uid===process.getuid()}r=c.promises,t.chmod=r.chmod,t.copyFile=r.copyFile,t.lstat=r.lstat,t.mkdir=r.mkdir,t.readdir=r.readdir,t.readlink=r.readlink,t.rename=r.rename,t.rmdir=r.rmdir,t.stat=r.stat,t.symlink=r.symlink,t.unlink=r.unlink,t.IS_WINDOWS="win32"===process.platform,t.exists=function(e){return a(this,void 0,void 0,(function*(){try{yield t.stat(e)}catch(e){if("ENOENT"===e.code)return!1;throw e}return!0}))},t.isDirectory=function(e,n=!1){return a(this,void 0,void 0,(function*(){return(n?yield t.stat(e):yield t.lstat(e)).isDirectory()}))},t.isRooted=function(e){if(!(e=function(e){return e=e||"",t.IS_WINDOWS?(e=e.replace(/\//g,"\\")).replace(/\\\\+/g,"\\"):e.replace(/\/\/+/g,"/")}(e)))throw new Error('isRooted() parameter "p" cannot be empty');return t.IS_WINDOWS?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")},t.tryGetExecutablePath=function(e,n){return a(this,void 0,void 0,(function*(){let r;try{r=yield t.stat(e)}catch(t){"ENOENT"!==t.code&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}if(r&&r.isFile())if(t.IS_WINDOWS){const t=u.extname(e).toUpperCase();if(n.some((e=>e.toUpperCase()===t)))return e}else if(l(r))return e;const i=e;for(const o of n){e=i+o,r=void 0;try{r=yield t.stat(e)}catch(t){"ENOENT"!==t.code&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}if(r&&r.isFile()){if(t.IS_WINDOWS){try{const n=u.dirname(e),r=u.basename(e).toUpperCase();for(const i of yield t.readdir(n))if(r===i.toUpperCase()){e=u.join(n,i);break}}catch(t){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${t}`)}return e}if(l(r))return e}}return""}))},t.getCmdPath=function(){var e;return null!==(e=process.env.COMSPEC)&&void 0!==e?e:"cmd.exe"}},484:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.findInPath=t.which=t.mkdirP=t.rmRF=t.mv=t.cp=void 0;const a=n(9491),c=o(n(2081)),u=o(n(1017)),l=n(3837),h=o(n(7564)),d=l.promisify(c.exec),f=l.promisify(c.execFile);function p(e){return s(this,void 0,void 0,(function*(){if(h.IS_WINDOWS){if(/[*"<>|]/.test(e))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{const t=h.getCmdPath();(yield h.isDirectory(e,!0))?yield d(`${t} /s /c "rd /s /q "%inputPath%""`,{env:{inputPath:e}}):yield d(`${t} /s /c "del /f /a "%inputPath%""`,{env:{inputPath:e}})}catch(e){if("ENOENT"!==e.code)throw e}try{yield h.unlink(e)}catch(e){if("ENOENT"!==e.code)throw e}}else{let t=!1;try{t=yield h.isDirectory(e)}catch(e){if("ENOENT"!==e.code)throw e;return}t?yield f("rm",["-rf",`${e}`]):yield h.unlink(e)}}))}function m(e){return s(this,void 0,void 0,(function*(){a.ok(e,"a path argument must be provided"),yield h.mkdir(e,{recursive:!0})}))}function g(e){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("parameter 'tool' is required");const t=[];if(h.IS_WINDOWS&&process.env.PATHEXT)for(const e of process.env.PATHEXT.split(u.delimiter))e&&t.push(e);if(h.isRooted(e)){const n=yield h.tryGetExecutablePath(e,t);return n?[n]:[]}if(e.includes(u.sep))return[];const n=[];if(process.env.PATH)for(const e of process.env.PATH.split(u.delimiter))e&&n.push(e);const r=[];for(const i of n){const n=yield h.tryGetExecutablePath(u.join(i,e),t);n&&r.push(n)}return r}))}function y(e,t,n,r){return s(this,void 0,void 0,(function*(){if(n>=255)return;n++,yield m(t);const i=yield h.readdir(e);for(const o of i){const i=`${e}/${o}`,s=`${t}/${o}`;(yield h.lstat(i)).isDirectory()?yield y(i,s,n,r):yield _(i,s,r)}yield h.chmod(t,(yield h.stat(e)).mode)}))}function _(e,t,n){return s(this,void 0,void 0,(function*(){if((yield h.lstat(e)).isSymbolicLink()){try{yield h.lstat(t),yield h.unlink(t)}catch(e){"EPERM"===e.code&&(yield h.chmod(t,"0666"),yield h.unlink(t))}const n=yield h.readlink(e);yield h.symlink(n,t,h.IS_WINDOWS?"junction":null)}else(yield h.exists(t))&&!n||(yield h.copyFile(e,t))}))}t.cp=function(e,t,n={}){return s(this,void 0,void 0,(function*(){const{force:r,recursive:i,copySourceDirectory:o}=function(e){return{force:null==e.force||e.force,recursive:Boolean(e.recursive),copySourceDirectory:null==e.copySourceDirectory||Boolean(e.copySourceDirectory)}}(n),s=(yield h.exists(t))?yield h.stat(t):null;if(s&&s.isFile()&&!r)return;const a=s&&s.isDirectory()&&o?u.join(t,u.basename(e)):t;if(!(yield h.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield h.stat(e)).isDirectory()){if(!i)throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);yield y(e,a,0,r)}else{if(""===u.relative(e,a))throw new Error(`'${a}' and '${e}' are the same file`);yield _(e,a,r)}}))},t.mv=function(e,t,n={}){return s(this,void 0,void 0,(function*(){if(yield h.exists(t)){let r=!0;if((yield h.isDirectory(t))&&(t=u.join(t,u.basename(e)),r=yield h.exists(t)),r){if(null!=n.force&&!n.force)throw new Error("Destination already exists");yield p(t)}}yield m(u.dirname(t)),yield h.rename(e,t)}))},t.rmRF=p,t.mkdirP=m,t.which=function e(t,n){return s(this,void 0,void 0,(function*(){if(!t)throw new Error("parameter 'tool' is required");if(n){const n=yield e(t,!1);if(!n)throw h.IS_WINDOWS?new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return n}const r=yield g(t);return r&&r.length>0?r[0]:""}))},t.findInPath=g},3361:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._readLinuxVersionFile=t._getOsVersion=t._findMatch=void 0;const a=o(n(647)),c=n(2225),u=n(2037),l=n(2081),h=n(7147);t._findMatch=function(t,n,r,i){return s(this,void 0,void 0,(function*(){const o=u.platform();let s,l,h;for(const s of r){const r=s.version;if(c.debug(`check ${r} satisfies ${t}`),a.satisfies(r,t)&&(!n||s.stable===n)&&(h=s.files.find((t=>{c.debug(`${t.arch}===${i} && ${t.platform}===${o}`);let n=t.arch===i&&t.platform===o;if(n&&t.platform_version){const r=e.exports._getOsVersion();n=r===t.platform_version||a.satisfies(r,t.platform_version)}return n})),h)){c.debug(`matched ${s.version}`),l=s;break}}return l&&h&&(s=Object.assign({},l),s.files=[h]),s}))},t._getOsVersion=function(){const t=u.platform();let n="";if("darwin"===t)n=l.execSync("sw_vers -productVersion").toString();else if("linux"===t){const t=e.exports._readLinuxVersionFile();if(t){const e=t.split("\n");for(const t of e){const e=t.split("=");if(2===e.length&&("VERSION_ID"===e[0].trim()||"DISTRIB_RELEASE"===e[0].trim())){n=e[1].trim().replace(/^"/,"").replace(/"$/,"");break}}}}return n},t._readLinuxVersionFile=function(){const e="/etc/lsb-release",t="/etc/os-release";let n="";return h.existsSync(e)?n=h.readFileSync(e).toString():h.existsSync(t)&&(n=h.readFileSync(t).toString()),n}},1804:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RetryHelper=void 0;const a=o(n(2225));t.RetryHelper=class{constructor(e,t,n){if(e<1)throw new Error("max attempts should be greater than or equal to 1");if(this.maxAttempts=e,this.minSeconds=Math.floor(t),this.maxSeconds=Math.floor(n),this.minSeconds>this.maxSeconds)throw new Error("min seconds should be less than or equal to max seconds")}execute(e,t){return s(this,void 0,void 0,(function*(){let n=1;for(;n<this.maxAttempts;){try{return yield e()}catch(e){if(t&&!t(e))throw e;a.info(e.message)}const r=this.getSleepAmount();a.info(`Waiting ${r} seconds before trying again`),yield this.sleep(r),n++}return yield e()}))}getSleepAmount(){return Math.floor(Math.random()*(this.maxSeconds-this.minSeconds+1))+this.minSeconds}sleep(e){return s(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,1e3*e)))}))}}},4392:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateVersions=t.isExplicitVersion=t.findFromManifest=t.getManifestFromRepo=t.findAllVersions=t.find=t.cacheFile=t.cacheDir=t.extractZip=t.extractXar=t.extractTar=t.extract7z=t.downloadTool=t.HTTPError=void 0;const c=o(n(2225)),u=o(n(484)),l=o(n(7147)),h=o(n(3361)),d=o(n(2037)),f=o(n(1017)),p=o(n(4635)),m=o(n(647)),g=o(n(2781)),y=o(n(3837)),_=n(9491),v=a(n(1171)),E=n(27),w=n(1804);class b extends Error{constructor(e){super(`Unexpected HTTP response: ${e}`),this.httpStatusCode=e,Object.setPrototypeOf(this,new.target.prototype)}}t.HTTPError=b;const T="win32"===process.platform,S="darwin"===process.platform;function A(e,t){const n=[];t=t||d.arch();const r=f.join(P(),e);if(l.existsSync(r)){const e=l.readdirSync(r);for(const i of e)if(R(i)){const e=f.join(r,i,t||"");l.existsSync(e)&&l.existsSync(`${e}.complete`)&&n.push(i)}}return n}function O(e){return s(this,void 0,void 0,(function*(){return e||(e=f.join(D(),v.default())),yield u.mkdirP(e),e}))}function C(e,t,n){return s(this,void 0,void 0,(function*(){const r=f.join(P(),e,m.clean(t)||t,n||"");c.debug(`destination ${r}`);const i=`${r}.complete`;return yield u.rmRF(r),yield u.rmRF(i),yield u.mkdirP(r),r}))}function I(e,t,n){const r=`${f.join(P(),e,m.clean(t)||t,n||"")}.complete`;l.writeFileSync(r,""),c.debug("finished caching tool")}function R(e){const t=m.clean(e)||"";c.debug(`isExplicit: ${t}`);const n=null!=m.valid(t);return c.debug(`explicit? ${n}`),n}function N(e,t){let n="";c.debug(`evaluating ${e.length} versions`);for(let r=(e=e.sort(((e,t)=>m.gt(e,t)?1:-1))).length-1;r>=0;r--){const i=e[r];if(m.satisfies(i,t)){n=i;break}}return n?c.debug(`matched: ${n}`):c.debug("match not found"),n}function P(){const e=process.env.RUNNER_TOOL_CACHE||"";return _.ok(e,"Expected RUNNER_TOOL_CACHE to be defined"),e}function D(){const e=process.env.RUNNER_TEMP||"";return _.ok(e,"Expected RUNNER_TEMP to be defined"),e}function k(e,t){const n=global[e];return void 0!==n?n:t}t.downloadTool=function(e,t,n,r){return s(this,void 0,void 0,(function*(){t=t||f.join(D(),v.default()),yield u.mkdirP(f.dirname(t)),c.debug(`Downloading ${e}`),c.debug(`Destination ${t}`);const i=k("TEST_DOWNLOAD_TOOL_RETRY_MIN_SECONDS",10),o=k("TEST_DOWNLOAD_TOOL_RETRY_MAX_SECONDS",20),a=new w.RetryHelper(3,i,o);return yield a.execute((()=>s(this,void 0,void 0,(function*(){return yield function(e,t,n,r){return s(this,void 0,void 0,(function*(){if(l.existsSync(t))throw new Error(`Destination file path ${t} already exists`);const i=new p.HttpClient("actions/tool-cache",[],{allowRetries:!1});n&&(c.debug("set auth"),void 0===r&&(r={}),r.authorization=n);const o=yield i.get(e,r);if(200!==o.message.statusCode){const t=new b(o.message.statusCode);throw c.debug(`Failed to download from "${e}". Code(${o.message.statusCode}) Message(${o.message.statusMessage})`),t}const s=y.promisify(g.pipeline),a=k("TEST_DOWNLOAD_TOOL_RESPONSE_MESSAGE_FACTORY",(()=>o.message))();let h=!1;try{return yield s(a,l.createWriteStream(t)),c.debug("download complete"),h=!0,t}finally{if(!h){c.debug("download failed");try{yield u.rmRF(t)}catch(e){c.debug(`Failed to delete '${t}'. ${e.message}`)}}}}))}(e,t||"",n,r)}))),(e=>!(e instanceof b&&e.httpStatusCode&&e.httpStatusCode<500&&408!==e.httpStatusCode&&429!==e.httpStatusCode)))}))},t.extract7z=function(e,t,n){return s(this,void 0,void 0,(function*(){_.ok(T,"extract7z() not supported on current OS"),_.ok(e,'parameter "file" is required'),t=yield O(t);const r=process.cwd();if(process.chdir(t),n)try{const t=["x",c.isDebug()?"-bb1":"-bb0","-bd","-sccUTF-8",e],i={silent:!0};yield E.exec(`"${n}"`,t,i)}finally{process.chdir(r)}else{const n=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",`& '${f.join(__dirname,"..","scripts","Invoke-7zdec.ps1").replace(/'/g,"''").replace(/"|\n|\r/g,"")}' -Source '${e.replace(/'/g,"''").replace(/"|\n|\r/g,"")}' -Target '${t.replace(/'/g,"''").replace(/"|\n|\r/g,"")}'`],i={silent:!0};try{const e=yield u.which("powershell",!0);yield E.exec(`"${e}"`,n,i)}finally{process.chdir(r)}}return t}))},t.extractTar=function(e,t,n="xz"){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("parameter 'file' is required");t=yield O(t),c.debug("Checking tar --version");let r="";yield E.exec("tar --version",[],{ignoreReturnCode:!0,silent:!0,listeners:{stdout:e=>r+=e.toString(),stderr:e=>r+=e.toString()}}),c.debug(r.trim());const i=r.toUpperCase().includes("GNU TAR");let o;o=n instanceof Array?n:[n],c.isDebug()&&!n.includes("v")&&o.push("-v");let s=t,a=e;return T&&i&&(o.push("--force-local"),s=t.replace(/\\/g,"/"),a=e.replace(/\\/g,"/")),i&&(o.push("--warning=no-unknown-keyword"),o.push("--overwrite")),o.push("-C",s,"-f",a),yield E.exec("tar",o),t}))},t.extractXar=function(e,t,n=[]){return s(this,void 0,void 0,(function*(){let r;_.ok(S,"extractXar() not supported on current OS"),_.ok(e,'parameter "file" is required'),t=yield O(t),r=n instanceof Array?n:[n],r.push("-x","-C",t,"-f",e),c.isDebug()&&r.push("-v");const i=yield u.which("xar",!0);var o;return yield E.exec(`"${i}"`,(o=r,Array.from(new Set(o)))),t}))},t.extractZip=function(e,t){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("parameter 'file' is required");return t=yield O(t),T?yield function(e,t){return s(this,void 0,void 0,(function*(){const n=e.replace(/'/g,"''").replace(/"|\n|\r/g,""),r=t.replace(/'/g,"''").replace(/"|\n|\r/g,""),i=yield u.which("pwsh",!1);if(i){const e=["-NoLogo","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",["$ErrorActionPreference = 'Stop' ;","try { Add-Type -AssemblyName System.IO.Compression.ZipFile } catch { } ;",`try { [System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${r}', $true) }`,`catch { if (($_.Exception.GetType().FullName -eq 'System.Management.Automation.MethodException') -or ($_.Exception.GetType().FullName -eq 'System.Management.Automation.RuntimeException') ){ Expand-Archive -LiteralPath '${n}' -DestinationPath '${r}' -Force } else { throw $_ } } ;`].join(" ")];c.debug(`Using pwsh at path: ${i}`),yield E.exec(`"${i}"`,e)}else{const e=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",["$ErrorActionPreference = 'Stop' ;","try { Add-Type -AssemblyName System.IO.Compression.FileSystem } catch { } ;",`if ((Get-Command -Name Expand-Archive -Module Microsoft.PowerShell.Archive -ErrorAction Ignore)) { Expand-Archive -LiteralPath '${n}' -DestinationPath '${r}' -Force }`,`else {[System.IO.Compression.ZipFile]::ExtractToDirectory('${n}', '${r}', $true) }`].join(" ")],t=yield u.which("powershell",!0);c.debug(`Using powershell at path: ${t}`),yield E.exec(`"${t}"`,e)}}))}(e,t):yield function(e,t){return s(this,void 0,void 0,(function*(){const n=yield u.which("unzip",!0),r=[e];c.isDebug()||r.unshift("-q"),r.unshift("-o"),yield E.exec(`"${n}"`,r,{cwd:t})}))}(e,t),t}))},t.cacheDir=function(e,t,n,r){return s(this,void 0,void 0,(function*(){if(n=m.clean(n)||n,r=r||d.arch(),c.debug(`Caching tool ${t} ${n} ${r}`),c.debug(`source dir: ${e}`),!l.statSync(e).isDirectory())throw new Error("sourceDir is not a directory");const i=yield C(t,n,r);for(const t of l.readdirSync(e)){const n=f.join(e,t);yield u.cp(n,i,{recursive:!0})}return I(t,n,r),i}))},t.cacheFile=function(e,t,n,r,i){return s(this,void 0,void 0,(function*(){if(r=m.clean(r)||r,i=i||d.arch(),c.debug(`Caching tool ${n} ${r} ${i}`),c.debug(`source file: ${e}`),!l.statSync(e).isFile())throw new Error("sourceFile is not a file");const o=yield C(n,r,i),s=f.join(o,t);return c.debug(`destination file ${s}`),yield u.cp(e,s),I(n,r,i),o}))},t.find=function(e,t,n){if(!e)throw new Error("toolName parameter is required");if(!t)throw new Error("versionSpec parameter is required");n=n||d.arch(),R(t)||(t=N(A(e,n),t));let r="";if(t){t=m.clean(t)||"";const i=f.join(P(),e,t,n);c.debug(`checking cache: ${i}`),l.existsSync(i)&&l.existsSync(`${i}.complete`)?(c.debug(`Found tool in cache ${e} ${t} ${n}`),r=i):c.debug("not found")}return r},t.findAllVersions=A,t.getManifestFromRepo=function(e,t,n,r="master"){return s(this,void 0,void 0,(function*(){let i=[];const o=`https://api.github.com/repos/${e}/${t}/git/trees/${r}`,s=new p.HttpClient("tool-cache"),a={};n&&(c.debug("set auth"),a.authorization=n);const u=yield s.getJson(o,a);if(!u.result)return i;let l="";for(const e of u.result.tree)if("versions-manifest.json"===e.path){l=e.url;break}a.accept="application/vnd.github.VERSION.raw";let h=yield(yield s.get(l,a)).readBody();if(h){h=h.replace(/^\uFEFF/,"");try{i=JSON.parse(h)}catch(e){c.debug("Invalid json")}}return i}))},t.findFromManifest=function(e,t,n,r=d.arch()){return s(this,void 0,void 0,(function*(){return yield h._findMatch(e,t,n,r)}))},t.isExplicitVersion=R,t.evaluateVersions=N},647:(e,t)=>{var n;t=e.exports=h,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=t.tokens={},a=0;function c(e){s[e]=a++}c("NUMERICIDENTIFIER"),o[s.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),o[s.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),o[s.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),o[s.MAINVERSION]="("+o[s.NUMERICIDENTIFIER]+")\\.("+o[s.NUMERICIDENTIFIER]+")\\.("+o[s.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),o[s.MAINVERSIONLOOSE]="("+o[s.NUMERICIDENTIFIERLOOSE]+")\\.("+o[s.NUMERICIDENTIFIERLOOSE]+")\\.("+o[s.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),o[s.PRERELEASEIDENTIFIER]="(?:"+o[s.NUMERICIDENTIFIER]+"|"+o[s.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),o[s.PRERELEASEIDENTIFIERLOOSE]="(?:"+o[s.NUMERICIDENTIFIERLOOSE]+"|"+o[s.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),o[s.PRERELEASE]="(?:-("+o[s.PRERELEASEIDENTIFIER]+"(?:\\."+o[s.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),o[s.PRERELEASELOOSE]="(?:-?("+o[s.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+o[s.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),o[s.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),o[s.BUILD]="(?:\\+("+o[s.BUILDIDENTIFIER]+"(?:\\."+o[s.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),o[s.FULLPLAIN]="v?"+o[s.MAINVERSION]+o[s.PRERELEASE]+"?"+o[s.BUILD]+"?",o[s.FULL]="^"+o[s.FULLPLAIN]+"$",c("LOOSEPLAIN"),o[s.LOOSEPLAIN]="[v=\\s]*"+o[s.MAINVERSIONLOOSE]+o[s.PRERELEASELOOSE]+"?"+o[s.BUILD]+"?",c("LOOSE"),o[s.LOOSE]="^"+o[s.LOOSEPLAIN]+"$",c("GTLT"),o[s.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),o[s.XRANGEIDENTIFIERLOOSE]=o[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),o[s.XRANGEIDENTIFIER]=o[s.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),o[s.XRANGEPLAIN]="[v=\\s]*("+o[s.XRANGEIDENTIFIER]+")(?:\\.("+o[s.XRANGEIDENTIFIER]+")(?:\\.("+o[s.XRANGEIDENTIFIER]+")(?:"+o[s.PRERELEASE]+")?"+o[s.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),o[s.XRANGEPLAINLOOSE]="[v=\\s]*("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:"+o[s.PRERELEASELOOSE]+")?"+o[s.BUILD]+"?)?)?",c("XRANGE"),o[s.XRANGE]="^"+o[s.GTLT]+"\\s*"+o[s.XRANGEPLAIN]+"$",c("XRANGELOOSE"),o[s.XRANGELOOSE]="^"+o[s.GTLT]+"\\s*"+o[s.XRANGEPLAINLOOSE]+"$",c("COERCE"),o[s.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),i[s.COERCERTL]=new RegExp(o[s.COERCE],"g"),c("LONETILDE"),o[s.LONETILDE]="(?:~>?)",c("TILDETRIM"),o[s.TILDETRIM]="(\\s*)"+o[s.LONETILDE]+"\\s+",i[s.TILDETRIM]=new RegExp(o[s.TILDETRIM],"g"),c("TILDE"),o[s.TILDE]="^"+o[s.LONETILDE]+o[s.XRANGEPLAIN]+"$",c("TILDELOOSE"),o[s.TILDELOOSE]="^"+o[s.LONETILDE]+o[s.XRANGEPLAINLOOSE]+"$",c("LONECARET"),o[s.LONECARET]="(?:\\^)",c("CARETTRIM"),o[s.CARETTRIM]="(\\s*)"+o[s.LONECARET]+"\\s+",i[s.CARETTRIM]=new RegExp(o[s.CARETTRIM],"g"),c("CARET"),o[s.CARET]="^"+o[s.LONECARET]+o[s.XRANGEPLAIN]+"$",c("CARETLOOSE"),o[s.CARETLOOSE]="^"+o[s.LONECARET]+o[s.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),o[s.COMPARATORLOOSE]="^"+o[s.GTLT]+"\\s*("+o[s.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),o[s.COMPARATOR]="^"+o[s.GTLT]+"\\s*("+o[s.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),o[s.COMPARATORTRIM]="(\\s*)"+o[s.GTLT]+"\\s*("+o[s.LOOSEPLAIN]+"|"+o[s.XRANGEPLAIN]+")",i[s.COMPARATORTRIM]=new RegExp(o[s.COMPARATORTRIM],"g"),c("HYPHENRANGE"),o[s.HYPHENRANGE]="^\\s*("+o[s.XRANGEPLAIN]+")\\s+-\\s+("+o[s.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),o[s.HYPHENRANGELOOSE]="^\\s*("+o[s.XRANGEPLAINLOOSE]+")\\s+-\\s+("+o[s.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),o[s.STAR]="(<|>)?=?\\s*\\*";for(var u=0;u<a;u++)n(u,o[u]),i[u]||(i[u]=new RegExp(o[u]));function l(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[s.LOOSE]:i[s.FULL]).test(e))return null;try{return new h(e,t)}catch(e){return null}}function h(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof h))return new h(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[s.LOOSE]:i[s.FULL]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=l,t.valid=function(e,t){var n=l(e,t);return n?n.version:null},t.clean=function(e,t){var n=l(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=h,h.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},h.prototype.toString=function(){return this.version},h.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof h||(e=new h(e,this.options)),this.compareMain(e)||this.comparePre(e)},h.prototype.compareMain=function(e){return e instanceof h||(e=new h(e,this.options)),f(this.major,e.major)||f(this.minor,e.minor)||f(this.patch,e.patch)},h.prototype.comparePre=function(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return f(r,i)}while(++t)},h.prototype.compareBuild=function(e){e instanceof h||(e=new h(e,this.options));var t=0;do{var r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return f(r,i)}while(++t)},h.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new h(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(y(e,t))return null;var n=l(e),r=l(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=f;var d=/^[0-9]+$/;function f(e,t){var n=d.test(e),r=d.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function p(e,t,n){return new h(e,n).compare(new h(t,n))}function m(e,t,n){return p(e,t,n)>0}function g(e,t,n){return p(e,t,n)<0}function y(e,t,n){return 0===p(e,t,n)}function _(e,t,n){return 0!==p(e,t,n)}function v(e,t,n){return p(e,t,n)>=0}function E(e,t,n){return p(e,t,n)<=0}function w(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return y(e,n,r);case"!=":return _(e,n,r);case">":return m(e,n,r);case">=":return v(e,n,r);case"<":return g(e,n,r);case"<=":return E(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function b(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof b){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof b))return new b(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===T?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return f(t,e)},t.major=function(e,t){return new h(e,t).major},t.minor=function(e,t){return new h(e,t).minor},t.patch=function(e,t){return new h(e,t).patch},t.compare=p,t.compareLoose=function(e,t){return p(e,t,!0)},t.compareBuild=function(e,t,n){var r=new h(e,n),i=new h(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return p(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=m,t.lt=g,t.eq=y,t.neq=_,t.gte=v,t.lte=E,t.cmp=w,t.Comparator=b;var T={};function S(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof S)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new S(e.raw,t);if(e instanceof b)return new S(e.value,t);if(!(this instanceof S))return new S(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function A(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function O(e){return!e||"x"===e.toLowerCase()||"*"===e}function C(e,t,n,r,i,o,s,a,c,u,l,h,d){return((t=O(n)?"":O(r)?">="+n+".0.0":O(i)?">="+n+"."+r+".0":">="+t)+" "+(a=O(c)?"":O(u)?"<"+(+c+1)+".0.0":O(l)?"<"+c+"."+(+u+1)+".0":h?"<="+c+"."+u+"."+l+"-"+h:"<="+a)).trim()}function I(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==T&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function R(e,t,n){try{t=new S(t,n)}catch(e){return!1}return t.test(e)}function N(e,t,n,r){var i,o,s,a,c;switch(e=new h(e,r),t=new S(t,r),n){case">":i=m,o=E,s=g,a=">",c=">=";break;case"<":i=g,o=v,s=m,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(R(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,f=null;if(l.forEach((function(e){e.semver===T&&(e=new b(">=0.0.0")),d=d||e,f=f||e,i(e.semver,d.semver,r)?d=e:s(e.semver,f.semver,r)&&(f=e)})),d.operator===a||d.operator===c)return!1;if((!f.operator||f.operator===a)&&o(e,f.semver))return!1;if(f.operator===c&&s(e,f.semver))return!1}return!0}b.prototype.parse=function(e){var t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new h(n[2],this.options.loose):this.semver=T},b.prototype.toString=function(){return this.value},b.prototype.test=function(e){if(n("Comparator.test",e,this.options.loose),this.semver===T||e===T)return!0;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}return w(e,this.operator,this.semver,this.options)},b.prototype.intersects=function(e,t){if(!(e instanceof b))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new S(e.value,t),R(this.value,n,t));if(""===e.operator)return""===e.value||(n=new S(this.value,t),R(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=w(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=w(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=S,S.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},S.prototype.toString=function(){return this.range},S.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?i[s.HYPHENRANGELOOSE]:i[s.HYPHENRANGE];e=e.replace(r,C),n("hyphen replace",e),e=e.replace(i[s.COMPARATORTRIM],"$1$2$3"),n("comparator trim",e,i[s.COMPARATORTRIM]),e=(e=(e=e.replace(i[s.TILDETRIM],"$1~")).replace(i[s.CARETTRIM],"$1^")).split(/\s+/).join(" ");var o=t?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],a=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?i[s.CARETLOOSE]:i[s.CARET];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),O(r)?a="":O(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":O(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?i[s.TILDELOOSE]:i[s.TILDE];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),O(r)?a="":O(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":O(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?i[s.XRANGELOOSE]:i[s.XRANGE];return e.replace(r,(function(r,i,o,s,a,c){n("xRange",e,r,i,o,s,a,c);var u=O(o),l=u||O(s),h=l||O(a),d=h;return"="===i&&d&&(i=""),c=t.includePrerelease?"-0":"",u?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(l&&(s=0),a=0,">"===i?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",l?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a+c):l?r=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:h&&(r=">="+o+"."+s+".0"+c+" <"+o+"."+(+s+1)+".0"+c),n("xRange return",r),r}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[s.STAR],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a.map((function(e){return new b(e,this.options)}),this)},S.prototype.intersects=function(e,t){if(!(e instanceof S))throw new TypeError("a Range is required");return this.set.some((function(n){return A(n,t)&&e.set.some((function(e){return A(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new S(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},S.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(I(this.set[t],e,this.options))return!0;return!1},t.satisfies=R,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new S(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new h(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new S(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new h(r=e,n)))})),r},t.minVersion=function(e,t){e=new S(e,t);var n=new h("0.0.0");if(e.test(n))return n;if(n=new h("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new h(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!m(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new S(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return N(e,t,"<",n)},t.gtr=function(e,t,n){return N(e,t,">",n)},t.outside=N,t.prerelease=function(e,t){var n=l(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new S(e,n),t=new S(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof h)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=i[s.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),i[s.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;i[s.COERCERTL].lastIndex=-1}else n=e.match(i[s.COERCE]);return null===n?null:l(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}},493:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AggregateAuthenticationError:()=>Ra,AggregateAuthenticationErrorName:()=>Ia,AuthenticationError:()=>Ca,AuthenticationErrorName:()=>Oa,AuthenticationRequiredError:()=>Pa,AuthorizationCodeCredential:()=>md,AzureAuthorityHosts:()=>ka,AzureCliCredential:()=>zl,AzurePowerShellCredential:()=>nh,ChainedTokenCredential:()=>Bl,ClientAssertionCredential:()=>ed,ClientCertificateCredential:()=>dh,ClientSecretCredential:()=>oh,CredentialUnavailableError:()=>Aa,CredentialUnavailableErrorName:()=>Sa,DefaultAzureCredential:()=>Xh,DeviceCodeCredential:()=>dd,EnvironmentCredential:()=>_h,InteractiveBrowserCredential:()=>cd,ManagedIdentityCredential:()=>Kh,OnBehalfOfCredential:()=>_d,UsernamePasswordCredential:()=>mh,VisualStudioCodeCredential:()=>Ll,deserializeAuthenticationRecord:()=>gl,getDefaultAzureCredential:()=>vd,logger:()=>xa,serializeAuthenticationRecord:()=>ml,useIdentityPlugin:()=>Ul});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var u,l,h,d,f,p={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},m=[p.OPENID_SCOPE,p.PROFILE_SCOPE,p.OFFLINE_ACCESS_SCOPE],g=c(m,[p.EMAIL_SCOPE]);!function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox",e.WWWAuthenticate="WWW-Authenticate",e.AuthenticationInfo="Authentication-Info",e.X_MS_REQUEST_ID="x-ms-request-id",e.X_MS_HTTP_VERSION="x-ms-httpver"}(u||(u={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account",e.ACTIVE_ACCOUNT_FILTERS="active-account-filters"}(l||(l={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(h||(h={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_APP_NAME="x-app-name",e.X_APP_VER="x-app-ver",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox",e.RETURN_SPA_CODE="return_spa_code",e.NATIVE_BROKER="nativebroker",e.LOGOUT_HINT="logout_hint"}(d||(d={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(f||(f={}));var y,_={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(y||(y={}));var v,E,w,b,T,S,A={PLAIN:"plain",S256:"S256"};!function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(v||(v={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(E||(E={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(w||(w={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(b||(b={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(T||(T={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(S||(S={}));var O,C="appmetadata",I="1",R="authority-metadata";!function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network",e.HARDCODED_VALUES="hardcoded_values"}(O||(O={}));var N,P={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};!function(e){e.BEARER="Bearer",e.POP="pop",e.SSH="ssh-cert"}(N||(N={}));var D,k,M,L,x,U,F,B,q="throttling";!function(e){e.username="username",e.password="password"}(D||(D={})),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(k||(k={})),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(M||(M={})),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}(L||(L={})),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4",e.CLAIMS_REQUESTED_CACHE_SKIPPED="5"}(x||(x={})),function(e){e.Jwt="JWT",e.Jwk="JWK",e.Pop="pop"}(U||(U={})),function(e){e.AAD="AAD",e.OIDC="OIDC"}(F||(F={})),function(e){e[e.None=0]="None",e.AzurePublic="https://login.microsoftonline.com",e.AzurePpe="https://login.windows-ppe.net",e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureUsGovernment="https://login.microsoftonline.us"}(B||(B={}));var j,H="unexpected_error",Y="Unexpected error in authentication.",V="post_request_failed",$="Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details.",z=function(e){function t(n,r,i){var o=this,s=r?n+": "+r:n;return o=e.call(this,s)||this,Object.setPrototypeOf(o,t.prototype),o.errorCode=n||p.EMPTY_STRING,o.errorMessage=r||p.EMPTY_STRING,o.subError=i||p.EMPTY_STRING,o.name="AuthError",o}return i(t,e),t.prototype.setCorrelationId=function(e){this.correlationId=e},t.createUnexpectedError=function(e){return new t(H,Y+": "+e)},t.createPostRequestFailed=function(e){return new t(V,$+": "+e)},t}(Error),G="client_info_decoding_error",W="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",K="client_info_empty_error",Q="The client info was empty. Please review the trace to determine the root cause.",X="token_parsing_error",Z="Token cannot be parsed. Please review stack trace to determine root cause.",J="null_or_empty_token",ee="The token is null or empty. Please review the trace to determine the root cause.",te="endpoints_resolution_error",ne="Error: could not resolve endpoints. Please check network and try again.",re="network_error",ie="Network request failed. Please check network trace to determine root cause.",oe="openid_config_error",se="Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",ae="hash_not_deserialized",ce="The hash parameters could not be deserialized. Please review the trace to determine the root cause.",ue="invalid_state",le="State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState().",he="state_mismatch",de="State mismatch error. Please check your network. Continued requests may cause cache overflow.",fe="state_not_found",pe="State not found",me="nonce_mismatch",ge="Nonce mismatch error. This may be caused by a race condition in concurrent requests.",ye="nonce_not_found",_e="nonce not found",ve="auth_time_not_found",Ee="Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",we="max_age_transpired",be="Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",Te="multiple_matching_tokens",Se="The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",Ae="multiple_matching_accounts",Oe="The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",Ce="multiple_matching_appMetadata",Ie="The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",Re="request_cannot_be_made",Ne="Token request cannot be made without authorization code or refresh token.",Pe="cannot_append_empty_scope",De="Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info.",ke="cannot_remove_empty_scope",Me="Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info.",Le="cannot_append_scopeset",xe="Cannot append ScopeSet due to error.",Ue="empty_input_scopeset",Fe="Empty input ScopeSet cannot be processed.",Be="device_code_polling_cancelled",qe="Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",je="device_code_expired",He="Device code is expired.",Ye="device_code_unknown_error",Ve="Device code stopped polling for unknown reasons.",$e="no_account_in_silent_request",ze="Please pass an account object, silent flow is not supported without account information",Ge="invalid_cache_record",We="Cache record object was null or undefined.",Ke="invalid_cache_environment",Qe="Invalid environment when attempting to create cache entry",Xe="no_account_found",Ze="No account found in cache for given key.",Je="no cache plugin set on CacheManager",et="ICachePlugin needs to be set before using readFromStorage or writeFromStorage",tt="no_crypto_object",nt="No crypto object detected. This is required for the following operation: ",rt="invalid_cache_type",it="Invalid cache type",ot="unexpected_account_type",st="Unexpected account type.",at="unexpected_credential_type",ct="Unexpected credential type.",ut="invalid_assertion",lt="Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",ht="invalid_client_credential",dt="Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",ft="token_refresh_required",pt="Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",mt="user_timeout_reached",gt="User defined timeout for device code polling reached",yt="token_claims_cnf_required_for_signedjwt",_t="Cannot generate a POP jwt if the token_claims are not populated",vt="authorization_code_missing_from_server_response",Et="Server response does not contain an authorization code to proceed",wt="binding_key_not_removed",bt="Could not remove the credential's binding key from storage.",Tt="end_session_endpoint_not_supported",St="Provided authority does not support logout.",At="key_id_missing",Ot="A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",Ct="no_network_connectivity",It="No network connectivity. Check your internet connection.",Rt="user_canceled",Nt="User canceled the flow.",Pt=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientAuthError",Object.setPrototypeOf(i,t.prototype),i}return i(t,e),t.createClientInfoDecodingError=function(e){return new t(G,W+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(K,""+Q)},t.createTokenParsingError=function(e){return new t(X,Z+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(J,ee+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t(te,ne+" Detail: "+e)},t.createNetworkError=function(e,n){return new t(re,ie+" | Fetch client threw: "+n+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(oe,se+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(ae,ce+" Given Object: "+e)},t.createInvalidStateError=function(e,n){return new t(ue,le+" Invalid State: "+e+", Root Err: "+n)},t.createStateMismatchError=function(){return new t(he,de)},t.createStateNotFoundError=function(e){return new t(fe,pe+":  "+e)},t.createNonceMismatchError=function(){return new t(me,ge)},t.createAuthTimeNotFoundError=function(){return new t(ve,Ee)},t.createMaxAgeTranspiredError=function(){return new t(we,be)},t.createNonceNotFoundError=function(e){return new t(ye,_e+":  "+e)},t.createMultipleMatchingTokensInCacheError=function(){return new t(Te,Se+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(Ae,Oe)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(Ce,Ie)},t.createTokenRequestCannotBeMadeError=function(){return new t(Re,Ne)},t.createAppendEmptyScopeToSetError=function(e){return new t(Pe,De+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(ke,Me+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(Le,xe+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(Ue,""+Fe)},t.createDeviceCodeCancelledError=function(){return new t(Be,""+qe)},t.createDeviceCodeExpiredError=function(){return new t(je,""+He)},t.createDeviceCodeUnknownError=function(){return new t(Ye,""+Ve)},t.createNoAccountInSilentRequestError=function(){return new t($e,""+ze)},t.createNullOrUndefinedCacheRecord=function(){return new t(Ge,We)},t.createInvalidCacheEnvironmentError=function(){return new t(Ke,Qe)},t.createNoAccountFoundError=function(){return new t(Xe,Ze)},t.createCachePluginError=function(){return new t(Je,""+et)},t.createNoCryptoObjectError=function(e){return new t(tt,""+nt+e)},t.createInvalidCacheTypeError=function(){return new t(rt,""+it)},t.createUnexpectedAccountTypeError=function(){return new t(ot,""+st)},t.createUnexpectedCredentialTypeError=function(){return new t(at,""+ct)},t.createInvalidAssertionError=function(){return new t(ut,""+lt)},t.createInvalidCredentialError=function(){return new t(ht,""+dt)},t.createRefreshRequiredError=function(){return new t(ft,pt)},t.createUserTimeoutReachedError=function(){return new t(mt,gt)},t.createTokenClaimsRequiredError=function(){return new t(yt,_t)},t.createNoAuthCodeInServerResponseError=function(){return new t(vt,Et)},t.createBindingKeyNotRemovedError=function(){return new t(wt,bt)},t.createLogoutNotSupportedError=function(){return new t(Tt,St)},t.createKeyIdMissingError=function(){return new t(At,Ot)},t.createNoNetworkConnectivityError=function(){return new t(Ct,It)},t.createUserCanceledError=function(){return new t(Rt,Nt)},t}(z),Dt=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw Pt.createTokenNullOrEmptyError(t);var n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Pt.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:n[1],JWSPayload:n[2],JWSSig:n[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var n=JSON.parse(t);return 0===Object.keys(n).length}catch(e){}return!0},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t={},n=e.split("&"),r=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return n.forEach((function(e){if(e.trim()){var n=e.split(/=(.+)/g,2),i=n[0],o=n[1];i&&o&&(t[r(i)]=r(o))}})),t},e.trimArrayEntries=function(e){return e.map((function(e){return e.trim()}))},e.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!e.isEmpty(t)}))},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(e){return null}},e.matchPattern=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)},e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(j||(j={}));var kt,Mt=function(){function e(t,n,r){this.level=j.Info;var i=t||e.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||function(){},this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:j.Info,this.correlationId=i.correlationId||p.EMPTY_STRING,this.packageName=n||p.EMPTY_STRING,this.packageVersion=r||p.EMPTY_STRING}return e.createDefaultLoggerOptions=function(){return{loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:j.Info}},e.prototype.clone=function(t,n,r){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},t,n)},e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var n=(new Date).toUTCString(),r=(Dt.isEmpty(t.correlationId)?Dt.isEmpty(this.correlationId)?"["+n+"]":"["+n+"] : ["+this.correlationId+"]":"["+n+"] : ["+t.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+j[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,r,t.containsPii||!1)}},e.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:j.Error,containsPii:!1,correlationId:t||p.EMPTY_STRING})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:j.Error,containsPii:!0,correlationId:t||p.EMPTY_STRING})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:j.Warning,containsPii:!1,correlationId:t||p.EMPTY_STRING})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:j.Warning,containsPii:!0,correlationId:t||p.EMPTY_STRING})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:j.Info,containsPii:!1,correlationId:t||p.EMPTY_STRING})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:j.Info,containsPii:!0,correlationId:t||p.EMPTY_STRING})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:j.Verbose,containsPii:!1,correlationId:t||p.EMPTY_STRING})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:j.Verbose,containsPii:!0,correlationId:t||p.EMPTY_STRING})},e.prototype.trace=function(e,t){this.logMessage(e,{logLevel:j.Trace,containsPii:!1,correlationId:t||p.EMPTY_STRING})},e.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:j.Trace,containsPii:!0,correlationId:t||p.EMPTY_STRING})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},e}();function Lt(e,t){if(Dt.isEmpty(e))throw Pt.createClientInfoEmptyError();try{var n=t.base64Decode(e);return JSON.parse(n)}catch(e){throw Pt.createClientInfoDecodingError(e.message)}}function xt(e){if(Dt.isEmpty(e))throw Pt.createClientInfoDecodingError("Home account ID was empty.");var t=e.split(b.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?p.EMPTY_STRING:t[1]}}!function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs",e[e.Dsts=2]="Dsts",e[e.Ciam=3]="Ciam"}(kt||(kt={}));var Ut,Ft=function(){function e(){}return e.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(b.CACHE_KEY_SEPARATOR).toLowerCase()},e.prototype.generateAccountKey=function(){return e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},e.prototype.generateType=function(){switch(this.authorityType){case w.ADFS_ACCOUNT_TYPE:return S.ADFS;case w.MSAV1_ACCOUNT_TYPE:return S.MSA;case w.MSSTS_ACCOUNT_TYPE:return S.MSSTS;case w.GENERIC_ACCOUNT_TYPE:return S.GENERIC;default:throw Pt.createUnexpectedAccountTypeError()}},e.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}},e.generateAccountCacheKey=function(e){return[e.homeAccountId,e.environment||p.EMPTY_STRING,e.tenantId||p.EMPTY_STRING].join(b.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAccount=function(t,n,r,i,o,s,a,c){var u,l,h,d,f,m,g=new e;g.authorityType=w.MSSTS_ACCOUNT_TYPE,g.clientInfo=t,g.homeAccountId=n,g.nativeAccountId=c;var y=a||i&&i.getPreferredCache();if(!y)throw Pt.createInvalidCacheEnvironmentError();if(g.environment=y,g.realm=(null===(u=null==r?void 0:r.claims)||void 0===u?void 0:u.tid)||p.EMPTY_STRING,r){g.idTokenClaims=r.claims,g.localAccountId=(null===(l=null==r?void 0:r.claims)||void 0===l?void 0:l.oid)||(null===(h=null==r?void 0:r.claims)||void 0===h?void 0:h.sub)||p.EMPTY_STRING;var _=null===(d=null==r?void 0:r.claims)||void 0===d?void 0:d.preferred_username,v=(null===(f=null==r?void 0:r.claims)||void 0===f?void 0:f.emails)?r.claims.emails[0]:null;g.username=_||v||p.EMPTY_STRING,g.name=null===(m=null==r?void 0:r.claims)||void 0===m?void 0:m.name}return g.cloudGraphHostName=o,g.msGraphHost=s,g},e.createGenericAccount=function(t,n,r,i,o,s){var a,c,u,l,h=new e;h.authorityType=r&&r.authorityType===kt.Adfs?w.ADFS_ACCOUNT_TYPE:w.GENERIC_ACCOUNT_TYPE,h.homeAccountId=t,h.realm=p.EMPTY_STRING;var d=s||r&&r.getPreferredCache();if(!d)throw Pt.createInvalidCacheEnvironmentError();return n&&(h.localAccountId=(null===(a=null==n?void 0:n.claims)||void 0===a?void 0:a.oid)||(null===(c=null==n?void 0:n.claims)||void 0===c?void 0:c.sub)||p.EMPTY_STRING,h.username=(null===(u=null==n?void 0:n.claims)||void 0===u?void 0:u.upn)||p.EMPTY_STRING,h.name=(null===(l=null==n?void 0:n.claims)||void 0===l?void 0:l.name)||p.EMPTY_STRING,h.idTokenClaims=null==n?void 0:n.claims),h.environment=d,h.cloudGraphHostName=i,h.msGraphHost=o,h},e.generateHomeAccountId=function(e,t,n,r,i){var o,s=(null===(o=null==i?void 0:i.claims)||void 0===o?void 0:o.sub)?i.claims.sub:p.EMPTY_STRING;if(t===kt.Adfs||t===kt.Dsts)return s;if(e)try{var a=Lt(e,r);if(!Dt.isEmpty(a.uid)&&!Dt.isEmpty(a.utid))return""+a.uid+b.CLIENT_INFO_SEPARATOR+a.utid}catch(e){}return n.verbose("No client info in response"),s},e.isAccountEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")},e.accountInfoIsEqual=function(e,t,n){if(!e||!t)return!1;var r=!0;if(n){var i=e.idTokenClaims||{},o=t.idTokenClaims||{};r=i.iat===o.iat&&i.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r},e}(),Bt="redirect_uri_empty",qt="A redirect URI is required for all calls, and none has been set.",jt="post_logout_uri_empty",Ht="A post logout redirect has not been set.",Yt="claims_request_parsing_error",Vt="Could not parse the given claims request object.",$t="authority_uri_insecure",zt="Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",Gt="url_parse_error",Wt="URL could not be parsed into appropriate segments.",Kt="empty_url_error",Qt="URL was empty or null.",Xt="empty_input_scopes_error",Zt="Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",Jt="clientid_input_scopes_error",en="Client ID can only be provided as a single scope.",tn="invalid_prompt_value",nn="Supported prompt values are 'login', 'select_account', 'consent', 'create', 'none' and 'no_session'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",rn="invalid_claims",on="Given claims parameter must be a stringified JSON object.",sn="token_request_empty",an="Token request was empty and not found in cache.",cn="logout_request_empty",un="The logout request was null or undefined.",ln="invalid_code_challenge_method",hn='code_challenge_method passed is invalid. Valid values are "plain" and "S256".',dn="pkce_params_missing",fn="Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",pn="invalid_cloud_discovery_metadata",mn="Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",gn="invalid_authority_metadata",yn="Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",_n="untrusted_authority",vn="The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",En="invalid_azure_cloud_instance",wn="Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values",bn="missing_ssh_jwk",Tn="Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",Sn="missing_ssh_kid",An="Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",On="missing_nonce_authentication_header",Cn="Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",In="invalid_authentication_header",Rn="Invalid authentication header provided",Nn="authority_mismatch",Pn="Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",Dn=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientConfigurationError",Object.setPrototypeOf(i,t.prototype),i}return i(t,e),t.createRedirectUriEmptyError=function(){return new t(Bt,qt)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(jt,Ht)},t.createClaimsRequestParsingError=function(e){return new t(Yt,Vt+" Given value: "+e)},t.createInsecureAuthorityUriError=function(e){return new t($t,zt+" Given URI: "+e)},t.createUrlParseError=function(e){return new t(Gt,Wt+" Given Error: "+e)},t.createUrlEmptyError=function(){return new t(Kt,Qt)},t.createEmptyScopesArrayError=function(){return new t(Xt,""+Zt)},t.createClientIdSingleScopeError=function(e){return new t(Jt,en+" Given Scopes: "+e)},t.createInvalidPromptError=function(e){return new t(tn,nn+" Given value: "+e)},t.createInvalidClaimsRequestError=function(){return new t(rn,on)},t.createEmptyLogoutRequestError=function(){return new t(cn,un)},t.createEmptyTokenRequestError=function(){return new t(sn,an)},t.createInvalidCodeChallengeMethodError=function(){return new t(ln,hn)},t.createInvalidCodeChallengeParamsError=function(){return new t(dn,fn)},t.createInvalidCloudDiscoveryMetadataError=function(){return new t(pn,mn)},t.createInvalidAuthorityMetadataError=function(){return new t(gn,yn)},t.createUntrustedAuthorityError=function(){return new t(_n,vn)},t.createInvalidAzureCloudInstanceError=function(){return new t(En,wn)},t.createMissingSshJwkError=function(){return new t(bn,Tn)},t.createMissingSshKidError=function(){return new t(Sn,An)},t.createMissingNonceAuthenticationHeadersError=function(){return new t(On,Cn)},t.createInvalidAuthenticationHeaderError=function(e,n){return new t(In,Rn+". Invalid header: "+e+". Details: "+n)},t.createAuthorityMismatchError=function(){return new t(Nn,Pn)},t}(Pt),kn=function(){function e(e){var t=this,n=e?Dt.trimArrayEntries(c(e)):[],r=n?Dt.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach((function(e){return t.scopes.add(e)}))}return e.fromString=function(t){return new e((t||p.EMPTY_STRING).split(" "))},e.createSearchScopes=function(t){var n=new e(t);return n.containsOnlyOIDCScopes()?n.removeScope(p.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n},e.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw Dn.createEmptyScopesArrayError()},e.prototype.containsScope=function(t){var n=new e(this.printScopesLowerCase().split(" "));return!Dt.isEmpty(t)&&n.scopes.has(t.toLowerCase())},e.prototype.containsScopeSet=function(e){var t=this;return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every((function(e){return t.containsScope(e)}))},e.prototype.containsOnlyOIDCScopes=function(){var e=this,t=0;return g.forEach((function(n){e.containsScope(n)&&(t+=1)})),this.scopes.size===t},e.prototype.appendScope=function(e){Dt.isEmpty(e)||this.scopes.add(e.trim())},e.prototype.appendScopes=function(e){var t=this;try{e.forEach((function(e){return t.appendScope(e)}))}catch(e){throw Pt.createAppendScopeSetError(e)}},e.prototype.removeScope=function(e){if(Dt.isEmpty(e))throw Pt.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},e.prototype.removeOIDCScopes=function(){var e=this;g.forEach((function(t){e.scopes.delete(t)}))},e.prototype.unionScopeSets=function(e){if(!e)throw Pt.createEmptyInputScopeSetError();var t=new Set;return e.scopes.forEach((function(e){return t.add(e.toLowerCase())})),this.scopes.forEach((function(e){return t.add(e.toLowerCase())})),t},e.prototype.intersectingScopeSets=function(e){if(!e)throw Pt.createEmptyInputScopeSetError();e.containsOnlyOIDCScopes()||e.removeOIDCScopes();var t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n},e.prototype.getScopeCount=function(){return this.scopes.size},e.prototype.asArray=function(){var e=[];return this.scopes.forEach((function(t){return e.push(t)})),e},e.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):p.EMPTY_STRING},e.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},e}(),Mn=function(){function e(t,n){if(Dt.isEmpty(t))throw Pt.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=e.extractTokenClaims(t,n)}return e.extractTokenClaims=function(e,t){var n=Dt.decodeAuthToken(e);try{var r=n.JWSPayload,i=t.base64Decode(r);return JSON.parse(i)}catch(e){throw Pt.createTokenParsingError(e)}},e.checkMaxAge=function(e,t){if(0===t||Date.now()-3e5>e+t)throw Pt.createMaxAgeTranspiredError()},e}(),Ln="@azure/msal-common",xn="13.3.1",Un=function(){function e(e,t,n){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Ln,xn)}return e.prototype.getAllAccounts=function(){var e=this,t=this.getAccountKeys();if(t.length<1)return[];var n=t.reduce((function(t,n){var r=e.getAccount(n);return r?(t.push(r),t):t}),[]);return n.length<1?[]:n.map((function(t){return e.getAccountInfoFromEntity(t)}))},e.prototype.getAccountInfoFilteredBy=function(e){var t=this.getAccountsFilteredBy(e);return t.length>0?this.getAccountInfoFromEntity(t[0]):null},e.prototype.getAccountInfoFromEntity=function(e){var t=e.getAccountInfo(),n=this.getIdToken(t);return n&&(t.idToken=n.secret,t.idTokenClaims=new Mn(n.secret,this.cryptoImpl).claims),t},e.prototype.saveCacheRecord=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:if(!e)throw Pt.createNullOrUndefinedCacheRecord();return e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken?[4,this.saveAccessToken(e.accessToken)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata),[2]}}))}))},e.prototype.saveAccessToken=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o=this;return a(this,(function(s){switch(s.label){case 0:return t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),r=kn.fromString(e.target),i=[],n.accessToken.forEach((function(e){if(o.accessTokenKeyMatchesFilter(e,t,!1)){var n=o.getAccessTokenCredential(e);n&&o.credentialMatchesFilter(n,t)&&kn.fromString(n.target).intersectingScopeSets(r)&&i.push(o.removeAccessToken(e))}})),[4,Promise.all(i)];case 1:return s.sent(),this.setAccessTokenCredential(e),[2]}}))}))},e.prototype.getAccountsFilteredBy=function(e){var t=this,n=this.getAccountKeys(),r=[];return n.forEach((function(n){if(t.isAccountKey(n,e.homeAccountId,e.realm)){var i=t.getAccount(n);i&&(e.homeAccountId&&!t.matchHomeAccountId(i,e.homeAccountId)||e.localAccountId&&!t.matchLocalAccountId(i,e.localAccountId)||e.username&&!t.matchUsername(i,e.username)||e.environment&&!t.matchEnvironment(i,e.environment)||e.realm&&!t.matchRealm(i,e.realm)||e.nativeAccountId&&!t.matchNativeAccountId(i,e.nativeAccountId)||r.push(i))}})),r},e.prototype.isAccountKey=function(e,t,n){return!(e.split(b.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))},e.prototype.isCredentialKey=function(e){if(e.split(b.CACHE_KEY_SEPARATOR).length<6)return!1;var t=e.toLowerCase();if(-1===t.indexOf(T.ID_TOKEN.toLowerCase())&&-1===t.indexOf(T.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(T.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(T.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(T.REFRESH_TOKEN.toLowerCase())>-1){var n=""+T.REFRESH_TOKEN+b.CACHE_KEY_SEPARATOR+this.clientId+b.CACHE_KEY_SEPARATOR,r=""+T.REFRESH_TOKEN+b.CACHE_KEY_SEPARATOR+I+b.CACHE_KEY_SEPARATOR;if(-1===t.indexOf(n.toLowerCase())&&-1===t.indexOf(r.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0},e.prototype.credentialMatchesFilter=function(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===T.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===N.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0},e.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},e.prototype.getAppMetadataFilteredByInternal=function(e,t){var n=this,r=this.getKeys(),i={};return r.forEach((function(r){if(n.isAppMetadata(r)){var o=n.getAppMetadata(r);o&&(e&&!n.matchEnvironment(o,e)||t&&!n.matchClientId(o,t)||(i[r]=o))}})),i},e.prototype.getAuthorityMetadataByAlias=function(e){var t=this,n=this.getAuthorityMetadataKeys(),r=null;return n.forEach((function(n){if(t.isAuthorityMetadata(n)&&-1!==n.indexOf(t.clientId)){var i=t.getAuthorityMetadata(n);i&&-1!==i.aliases.indexOf(e)&&(r=i)}})),r},e.prototype.removeAllAccounts=function(){return s(this,void 0,void 0,(function(){var e,t,n=this;return a(this,(function(r){switch(r.label){case 0:return e=this.getAccountKeys(),t=[],e.forEach((function(e){t.push(n.removeAccount(e))})),[4,Promise.all(t)];case 1:return r.sent(),[2]}}))}))},e.prototype.removeAccount=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:if(!(t=this.getAccount(e)))throw Pt.createNoAccountFoundError();return[4,this.removeAccountContext(t)];case 1:return n.sent(),this.removeItem(e),[2]}}))}))},e.prototype.removeAccountContext=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return t=this.getTokenKeys(),n=e.generateAccountId(),r=[],t.idToken.forEach((function(e){0===e.indexOf(n)&&i.removeIdToken(e)})),t.accessToken.forEach((function(e){0===e.indexOf(n)&&r.push(i.removeAccessToken(e))})),t.refreshToken.forEach((function(e){0===e.indexOf(n)&&i.removeRefreshToken(e)})),[4,Promise.all(r)];case 1:return o.sent(),[2]}}))}))},e.prototype.removeAccessToken=function(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:if(!(t=this.getAccessTokenCredential(e)))return[2];if(t.credentialType.toLowerCase()!==T.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(t.tokenType!==N.POP)return[3,4];if(!(n=t.keyId))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(n)];case 2:return r.sent(),[3,4];case 3:throw r.sent(),Pt.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(e)]}}))}))},e.prototype.removeAppMetadata=function(){var e=this;return this.getKeys().forEach((function(t){e.isAppMetadata(t)&&e.removeItem(t)})),!0},e.prototype.readCacheRecord=function(e,t,n){var r=this.getTokenKeys(),i=this.readAccountFromCache(e),o=this.getIdToken(e,r),s=this.getAccessToken(e,t,r),a=this.getRefreshToken(e,!1,r),c=this.readAppMetadataFromCache(n);return i&&o&&(i.idTokenClaims=new Mn(o.secret,this.cryptoImpl).claims),{account:i,idToken:o,accessToken:s,refreshToken:a,appMetadata:c}},e.prototype.readAccountFromCache=function(e){var t=Ft.generateAccountCacheKey(e);return this.getAccount(t)},e.prototype.getIdToken=function(e,t){var n=this;this.commonLogger.trace("CacheManager - getIdToken called");var r={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:T.ID_TOKEN,clientId:this.clientId,realm:e.tenantId},i=this.getIdTokensByFilter(r,t),o=i.length;return o<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):o>1?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),i.forEach((function(e){n.removeIdToken(e.generateCredentialKey())})),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),i[0])},e.prototype.getIdTokensByFilter=function(e,t){var n=this,r=t&&t.idToken||this.getTokenKeys().idToken,i=[];return r.forEach((function(t){if(n.idTokenKeyMatchesFilter(t,o({clientId:n.clientId},e))){var r=n.getIdTokenCredential(t);r&&n.credentialMatchesFilter(r,e)&&i.push(r)}})),i},e.prototype.idTokenKeyMatchesFilter=function(e,t){var n=e.toLowerCase();return!(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))},e.prototype.removeIdToken=function(e){this.removeItem(e)},e.prototype.removeRefreshToken=function(e){this.removeItem(e)},e.prototype.getAccessToken=function(e,t,n){var r=this;this.commonLogger.trace("CacheManager - getAccessToken called");var i=kn.createSearchScopes(t.scopes),o=t.authenticationScheme||N.BEARER,s=o&&o.toLowerCase()!==N.BEARER.toLowerCase()?T.ACCESS_TOKEN_WITH_AUTH_SCHEME:T.ACCESS_TOKEN,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:e.tenantId,target:i,tokenType:o,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=n&&n.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach((function(e){if(r.accessTokenKeyMatchesFilter(e,a,!0)){var t=r.getAccessTokenCredential(e);t&&r.credentialMatchesFilter(t,a)&&u.push(t)}}));var l=u.length;return l<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):l>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),u.forEach((function(e){r.removeAccessToken(e.generateCredentialKey())})),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),u[0])},e.prototype.accessTokenKeyMatchesFilter=function(e,t,n){var r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target)for(var i=t.target.asArray(),o=0;o<i.length;o++){if(n&&!r.includes(i[o].toLowerCase()))return!1;if(!n&&r.includes(i[o].toLowerCase()))return!0}return!0},e.prototype.getAccessTokensByFilter=function(e){var t=this,n=this.getTokenKeys(),r=[];return n.accessToken.forEach((function(n){if(t.accessTokenKeyMatchesFilter(n,e,!0)){var i=t.getAccessTokenCredential(n);i&&t.credentialMatchesFilter(i,e)&&r.push(i)}})),r},e.prototype.getRefreshToken=function(e,t,n){var r=this;this.commonLogger.trace("CacheManager - getRefreshToken called");var i=t?I:void 0,o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:T.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,a=[];return s.forEach((function(e){if(r.refreshTokenKeyMatchesFilter(e,o)){var t=r.getRefreshTokenCredential(e);t&&r.credentialMatchesFilter(t,o)&&a.push(t)}})),a.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),a[0])},e.prototype.refreshTokenKeyMatchesFilter=function(e,t){var n=e.toLowerCase();return!(t.familyId&&-1===n.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))},e.prototype.readAppMetadataFromCache=function(e){var t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((function(e){return n[e]})),i=r.length;if(i<1)return null;if(i>1)throw Pt.createMultipleMatchingAppMetadataInCacheError();return r[0]},e.prototype.isAppMetadataFOCI=function(e){var t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==I)},e.prototype.matchHomeAccountId=function(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)},e.prototype.matchLocalAccountId=function(e,t){return!("string"!=typeof e.localAccountId||t!==e.localAccountId)},e.prototype.matchUsername=function(e,t){return!("string"!=typeof e.username||t.toLowerCase()!==e.username.toLowerCase())},e.prototype.matchUserAssertionHash=function(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)},e.prototype.matchEnvironment=function(e,t){var n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)},e.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},e.prototype.matchClientId=function(e,t){return!(!e.clientId||t!==e.clientId)},e.prototype.matchFamilyId=function(e,t){return!(!e.familyId||t!==e.familyId)},e.prototype.matchRealm=function(e,t){return!(!e.realm||t!==e.realm)},e.prototype.matchNativeAccountId=function(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)},e.prototype.matchTarget=function(e,t){return!(e.credentialType!==T.ACCESS_TOKEN&&e.credentialType!==T.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&kn.fromString(e.target).containsScopeSet(t)},e.prototype.matchTokenType=function(e,t){return!(!e.tokenType||e.tokenType!==t)},e.prototype.matchKeyId=function(e,t){return!(!e.keyId||e.keyId!==t)},e.prototype.isAppMetadata=function(e){return-1!==e.indexOf(C)},e.prototype.isAuthorityMetadata=function(e){return-1!==e.indexOf(R)},e.prototype.generateAuthorityMetadataCacheKey=function(e){return"authority-metadata-"+this.clientId+"-"+e},e.toObject=function(e,t){for(var n in t)e[n]=t[n];return e},e}(),Fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.setAccount=function(){throw z.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw z.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw z.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw z.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw z.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw z.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw z.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw z.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw z.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw z.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw z.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw z.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setAuthorityMetadata=function(){throw z.createUnexpectedError("Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadata=function(){throw z.createUnexpectedError("Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadataKeys=function(){throw z.createUnexpectedError("Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw z.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw z.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw z.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw z.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw z.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getAccountKeys=function(){throw z.createUnexpectedError("Storage interface - getAccountKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getTokenKeys=function(){throw z.createUnexpectedError("Storage interface - getTokenKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")}))}))},t.prototype.updateCredentialCacheKey=function(){throw z.createUnexpectedError("Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.")},t}(Un),Bn=function(){function e(){}return e.prototype.generateAccountId=function(){return e.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},e.prototype.generateCredentialId=function(){return e.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},e.prototype.generateTarget=function(){return e.generateTargetForCacheKey(this.target)},e.prototype.generateCredentialKey=function(){return e.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},e.prototype.generateType=function(){switch(this.credentialType){case T.ID_TOKEN:return S.ID_TOKEN;case T.ACCESS_TOKEN:case T.ACCESS_TOKEN_WITH_AUTH_SCHEME:return S.ACCESS_TOKEN;case T.REFRESH_TOKEN:return S.REFRESH_TOKEN;default:throw Pt.createUnexpectedCredentialTypeError()}},e.generateCredentialCacheKey=function(e,t,n,r,i,o,s,a,c){return[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(n,r,i,s),this.generateTargetForCacheKey(o),this.generateClaimsHashForCacheKey(c),this.generateSchemeForCacheKey(a)].join(b.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateAccountIdForCacheKey=function(e,t){return[e,t].join(b.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateCredentialIdForCacheKey=function(e,t,n,r){return[e,e===T.REFRESH_TOKEN&&r||t,n||p.EMPTY_STRING].join(b.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateTargetForCacheKey=function(e){return(e||p.EMPTY_STRING).toLowerCase()},e.generateClaimsHashForCacheKey=function(e){return(e||p.EMPTY_STRING).toLowerCase()},e.generateSchemeForCacheKey=function(e){return e&&e.toLowerCase()!==N.BEARER.toLowerCase()?e.toLowerCase():p.EMPTY_STRING},e}(),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.createIdTokenEntity=function(e,n,r,i,o){var s=new t;return s.credentialType=T.ID_TOKEN,s.homeAccountId=e,s.environment=n,s.clientId=i,s.secret=r,s.realm=o,s},t.isIdTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===T.ID_TOKEN},t}(Bn),jn=function(){function e(){}return e.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)},e.isTokenExpired=function(t,n){var r=Number(t)||0;return e.nowSeconds()+n>r},e.wasClockTurnedBack=function(t){return Number(t)>e.nowSeconds()},e.delay=function(e,t){return new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))},e}(),Hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.createAccessTokenEntity=function(e,n,r,i,o,s,a,c,u,l,h,d,f,p,m){var g,y,_=new t;_.homeAccountId=e,_.credentialType=T.ACCESS_TOKEN,_.secret=r;var v=jn.nowSeconds();if(_.cachedAt=v.toString(),_.expiresOn=a.toString(),_.extendedExpiresOn=c.toString(),l&&(_.refreshOn=l.toString()),_.environment=n,_.clientId=i,_.realm=o,_.target=s,_.userAssertionHash=d,_.tokenType=Dt.isEmpty(h)?N.BEARER:h,p&&(_.requestedClaims=p,_.requestedClaimsHash=m),(null===(g=_.tokenType)||void 0===g?void 0:g.toLowerCase())!==N.BEARER.toLowerCase())switch(_.credentialType=T.ACCESS_TOKEN_WITH_AUTH_SCHEME,_.tokenType){case N.POP:var E=Mn.extractTokenClaims(r,u);if(!(null===(y=null==E?void 0:E.cnf)||void 0===y?void 0:y.kid))throw Pt.createTokenClaimsRequiredError();_.keyId=E.cnf.kid;break;case N.SSH:_.keyId=f}return _},t.isAccessTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.hasOwnProperty("target")&&(e.credentialType===T.ACCESS_TOKEN||e.credentialType===T.ACCESS_TOKEN_WITH_AUTH_SCHEME)},t}(Bn),Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.createRefreshTokenEntity=function(e,n,r,i,o,s){var a=new t;return a.clientId=i,a.credentialType=T.REFRESH_TOKEN,a.environment=n,a.homeAccountId=e,a.secret=r,a.userAssertionHash=s,o&&(a.familyId=o),a},t.isRefreshTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===T.REFRESH_TOKEN},t}(Bn),Vn=function(){function e(){}return e.prototype.generateAppMetadataKey=function(){return e.generateAppMetadataCacheKey(this.environment,this.clientId)},e.generateAppMetadataCacheKey=function(e,t){return[C,e,t].join(b.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAppMetadataEntity=function(t,n,r){var i=new e;return i.clientId=t,i.environment=n,r&&(i.familyId=r),i},e.isAppMetadataEntity=function(e,t){return!!t&&0===e.indexOf(C)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")},e}(),$n=function(){function e(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return e.isServerTelemetryEntity=function(e,t){var n=0===e.indexOf(P.CACHE_KEY),r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r},e}(),zn=function(){function e(){this.expiresAt=jn.nowSeconds()+86400}return e.prototype.updateCloudDiscoveryMetadata=function(e,t){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=t},e.prototype.updateEndpointMetadata=function(e,t){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=t,this.jwks_uri=e.jwks_uri},e.prototype.updateCanonicalAuthority=function(e){this.canonical_authority=e},e.prototype.resetExpiresAt=function(){this.expiresAt=jn.nowSeconds()+86400},e.prototype.isExpired=function(){return this.expiresAt<=jn.nowSeconds()},e.isAuthorityMetadataEntity=function(e,t){return!!t&&0===e.indexOf(R)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")},e}(),Gn=function(){function e(){}return e.isThrottlingEntity=function(e,t){var n=!1;e&&(n=0===e.indexOf(q));var r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r},e}(),Wn=function(){function e(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(e.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),e}(),Kn={createNewGuid:function(){throw z.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw z.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw z.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")}))}))},getPublicKeyThumbprint:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")}))}))},removeTokenBindingKey:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Crypto interface - removeTokenBindingKey() has not been implemented")}))}))},clearKeystore:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Crypto interface - clearKeystore() has not been implemented")}))}))},signJwt:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Crypto interface - signJwt() has not been implemented")}))}))},hashString:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Crypto interface - hashString() has not been implemented")}))}))}},Qn={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Xn={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:j.Info,correlationId:p.EMPTY_STRING},Zn={claimsBasedCachingEnabled:!0},Jn={sendGetRequestAsync:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")}))}))},sendPostRequestAsync:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw z.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")}))}))}},er={sku:p.SKU,version:xn,cpu:p.EMPTY_STRING,os:p.EMPTY_STRING},tr={clientSecret:p.EMPTY_STRING,clientAssertion:void 0},nr={azureCloudInstance:B.None,tenant:""+p.DEFAULT_COMMON_TENANT},rr={application:{appName:"",appVersion:""}},ir=function(e){function t(n,r,i){var o=e.call(this,n,r,i)||this;return o.name="ServerError",Object.setPrototypeOf(o,t.prototype),o}return i(t,e),t}(z),or=function(){function e(){}return e.generateThrottlingStorageKey=function(e){return"throttling."+JSON.stringify(e)},e.preProcess=function(t,n){var r,i=e.generateThrottlingStorageKey(n),o=t.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now())return void t.removeItem(i);throw new ir((null===(r=o.errorCodes)||void 0===r?void 0:r.join(" "))||p.EMPTY_STRING,o.errorMessage,o.subError)}},e.postProcess=function(t,n,r){if(e.checkResponseStatus(r)||e.checkResponseForRetryAfter(r)){var i={throttleTime:e.calculateThrottleTime(parseInt(r.headers[u.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};t.setThrottlingCache(e.generateThrottlingStorageKey(n),i)}},e.checkResponseStatus=function(e){return 429===e.status||e.status>=500&&e.status<600},e.checkResponseForRetryAfter=function(e){return!!e.headers&&e.headers.hasOwnProperty(u.RETRY_AFTER)&&(e.status<200||e.status>=300)},e.calculateThrottleTime=function(e){var t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||60),n+3600))},e.removeThrottle=function(e,t,n,r){var i={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},o=this.generateThrottlingStorageKey(i);e.removeItem(o)},e}(),sr=function(){function e(e,t){this.networkClient=e,this.cacheManager=t}return e.prototype.sendPostRequest=function(e,t,n){return s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:or.preProcess(this.cacheManager,e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(t,n)];case 2:return r=o.sent(),[3,4];case 3:throw(i=o.sent())instanceof z?i:Pt.createNetworkError(t,i);case 4:return or.postProcess(this.cacheManager,e,r),[2,r]}}))}))},e}();!function(e){e.HOME_ACCOUNT_ID="home_account_id",e.UPN="UPN"}(Ut||(Ut={}));var ar,cr,ur,lr=function(){function e(){}return e.validateRedirectUri=function(e){if(Dt.isEmpty(e))throw Dn.createRedirectUriEmptyError()},e.validatePrompt=function(e){var t=[];for(var n in _)t.push(_[n]);if(t.indexOf(e)<0)throw Dn.createInvalidPromptError(e)},e.validateClaims=function(e){try{JSON.parse(e)}catch(e){throw Dn.createInvalidClaimsRequestError()}},e.validateCodeChallengeParams=function(e,t){if(Dt.isEmpty(e)||Dt.isEmpty(t))throw Dn.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},e.validateCodeChallengeMethod=function(e){if([A.PLAIN,A.S256].indexOf(e)<0)throw Dn.createInvalidCodeChallengeMethodError()},e.sanitizeEQParams=function(e,t){return e?(t.forEach((function(t,n){e[n]&&delete e[n]})),Object.fromEntries(Object.entries(e).filter((function(e){return""!==e[1]})))):{}},e}(),hr=function(){function e(){this.parameters=new Map}return e.prototype.addResponseTypeCode=function(){this.parameters.set(d.RESPONSE_TYPE,encodeURIComponent(p.CODE_RESPONSE_TYPE))},e.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(d.RESPONSE_TYPE,encodeURIComponent(p.TOKEN_RESPONSE_TYPE+" "+p.ID_TOKEN_RESPONSE_TYPE))},e.prototype.addResponseMode=function(e){this.parameters.set(d.RESPONSE_MODE,encodeURIComponent(e||v.QUERY))},e.prototype.addNativeBroker=function(){this.parameters.set(d.NATIVE_BROKER,encodeURIComponent("1"))},e.prototype.addScopes=function(e,t){void 0===t&&(t=!0);var n=t?c(e||[],m):e||[],r=new kn(n);this.parameters.set(d.SCOPE,encodeURIComponent(r.printScopes()))},e.prototype.addClientId=function(e){this.parameters.set(d.CLIENT_ID,encodeURIComponent(e))},e.prototype.addRedirectUri=function(e){lr.validateRedirectUri(e),this.parameters.set(d.REDIRECT_URI,encodeURIComponent(e))},e.prototype.addPostLogoutRedirectUri=function(e){lr.validateRedirectUri(e),this.parameters.set(d.POST_LOGOUT_URI,encodeURIComponent(e))},e.prototype.addIdTokenHint=function(e){this.parameters.set(d.ID_TOKEN_HINT,encodeURIComponent(e))},e.prototype.addDomainHint=function(e){this.parameters.set(y.DOMAIN_HINT,encodeURIComponent(e))},e.prototype.addLoginHint=function(e){this.parameters.set(y.LOGIN_HINT,encodeURIComponent(e))},e.prototype.addCcsUpn=function(e){this.parameters.set(u.CCS_HEADER,encodeURIComponent("UPN:"+e))},e.prototype.addCcsOid=function(e){this.parameters.set(u.CCS_HEADER,encodeURIComponent("Oid:"+e.uid+"@"+e.utid))},e.prototype.addSid=function(e){this.parameters.set(y.SID,encodeURIComponent(e))},e.prototype.addClaims=function(e,t){var n=this.addClientCapabilitiesToClaims(e,t);lr.validateClaims(n),this.parameters.set(d.CLAIMS,encodeURIComponent(n))},e.prototype.addCorrelationId=function(e){this.parameters.set(d.CLIENT_REQUEST_ID,encodeURIComponent(e))},e.prototype.addLibraryInfo=function(e){this.parameters.set(d.X_CLIENT_SKU,e.sku),this.parameters.set(d.X_CLIENT_VER,e.version),e.os&&this.parameters.set(d.X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(d.X_CLIENT_CPU,e.cpu)},e.prototype.addApplicationTelemetry=function(e){(null==e?void 0:e.appName)&&this.parameters.set(d.X_APP_NAME,e.appName),(null==e?void 0:e.appVersion)&&this.parameters.set(d.X_APP_VER,e.appVersion)},e.prototype.addPrompt=function(e){lr.validatePrompt(e),this.parameters.set(""+d.PROMPT,encodeURIComponent(e))},e.prototype.addState=function(e){Dt.isEmpty(e)||this.parameters.set(d.STATE,encodeURIComponent(e))},e.prototype.addNonce=function(e){this.parameters.set(d.NONCE,encodeURIComponent(e))},e.prototype.addCodeChallengeParams=function(e,t){if(lr.validateCodeChallengeParams(e,t),!e||!t)throw Dn.createInvalidCodeChallengeParamsError();this.parameters.set(d.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(d.CODE_CHALLENGE_METHOD,encodeURIComponent(t))},e.prototype.addAuthorizationCode=function(e){this.parameters.set(d.CODE,encodeURIComponent(e))},e.prototype.addDeviceCode=function(e){this.parameters.set(d.DEVICE_CODE,encodeURIComponent(e))},e.prototype.addRefreshToken=function(e){this.parameters.set(d.REFRESH_TOKEN,encodeURIComponent(e))},e.prototype.addCodeVerifier=function(e){this.parameters.set(d.CODE_VERIFIER,encodeURIComponent(e))},e.prototype.addClientSecret=function(e){this.parameters.set(d.CLIENT_SECRET,encodeURIComponent(e))},e.prototype.addClientAssertion=function(e){Dt.isEmpty(e)||this.parameters.set(d.CLIENT_ASSERTION,encodeURIComponent(e))},e.prototype.addClientAssertionType=function(e){Dt.isEmpty(e)||this.parameters.set(d.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},e.prototype.addOboAssertion=function(e){this.parameters.set(d.OBO_ASSERTION,encodeURIComponent(e))},e.prototype.addRequestTokenUse=function(e){this.parameters.set(d.REQUESTED_TOKEN_USE,encodeURIComponent(e))},e.prototype.addGrantType=function(e){this.parameters.set(d.GRANT_TYPE,encodeURIComponent(e))},e.prototype.addClientInfo=function(){this.parameters.set("client_info","1")},e.prototype.addExtraQueryParameters=function(e){var t=this,n=lr.sanitizeEQParams(e,this.parameters);Object.keys(n).forEach((function(n){t.parameters.set(n,e[n])}))},e.prototype.addClientCapabilitiesToClaims=function(e,t){var n;if(e)try{n=JSON.parse(e)}catch(e){throw Dn.createInvalidClaimsRequestError()}else n={};return t&&t.length>0&&(n.hasOwnProperty(f.ACCESS_TOKEN)||(n[f.ACCESS_TOKEN]={}),n[f.ACCESS_TOKEN][f.XMS_CC]={values:t}),JSON.stringify(n)},e.prototype.addUsername=function(e){this.parameters.set(D.username,encodeURIComponent(e))},e.prototype.addPassword=function(e){this.parameters.set(D.password,encodeURIComponent(e))},e.prototype.addPopToken=function(e){Dt.isEmpty(e)||(this.parameters.set(d.TOKEN_TYPE,N.POP),this.parameters.set(d.REQ_CNF,encodeURIComponent(e)))},e.prototype.addSshJwk=function(e){Dt.isEmpty(e)||(this.parameters.set(d.TOKEN_TYPE,N.SSH),this.parameters.set(d.REQ_CNF,encodeURIComponent(e)))},e.prototype.addServerTelemetry=function(e){this.parameters.set(d.X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(d.X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())},e.prototype.addThrottling=function(){this.parameters.set(d.X_MS_LIB_CAPABILITY,"retry-after, h429")},e.prototype.addLogoutHint=function(e){this.parameters.set(d.LOGOUT_HINT,encodeURIComponent(e))},e.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach((function(t,n){e.push(n+"="+t)})),e.join("&")},e}(),dr=function(){function e(e,t){this.config=function(e){var t,n=e.authOptions,r=e.systemOptions,i=e.loggerOptions,s=e.cacheOptions,a=e.storageInterface,c=e.networkInterface,u=e.cryptoInterface,l=e.clientCredentials,h=e.libraryInfo,d=e.telemetry,f=e.serverTelemetryManager,p=e.persistencePlugin,m=e.serializableCache,g=o(o({},Xn),i);return{authOptions:(t=n,o({clientCapabilities:[],azureCloudOptions:nr,skipAuthorityMetadataCache:!1},t)),systemOptions:o(o({},Qn),r),loggerOptions:g,cacheOptions:o(o({},Zn),s),storageInterface:a||new Fn(n.clientId,Kn,new Mt(g)),networkInterface:c||Jn,cryptoInterface:u||Kn,clientCredentials:l||tr,libraryInfo:o(o({},er),h),telemetry:o(o({},rr),d),serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:m||null}}(e),this.logger=new Mt(this.config.loggerOptions,Ln,xn),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new sr(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}return e.prototype.createTokenRequestHeaders=function(e){var t={};if(t[u.CONTENT_TYPE]=p.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ut.HOME_ACCOUNT_ID:try{var n=xt(e.credential);t[u.CCS_HEADER]="Oid:"+n.uid+"@"+n.utid}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Ut.UPN:t[u.CCS_HEADER]="UPN: "+e.credential}return t},e.prototype.executePostToTokenEndpoint=function(e,t,n,r){return s(this,void 0,void 0,(function(){var i;return a(this,(function(o){switch(o.label){case 0:return[4,this.networkManager.sendPostRequest(r,e,{body:t,headers:n})];case 1:return i=o.sent(),this.config.serverTelemetryManager&&i.status<500&&429!==i.status&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,i]}}))}))},e.prototype.updateAuthority=function(e){if(!e.discoveryComplete())throw Pt.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=e},e.prototype.createTokenQueryParameters=function(e){var t=new hr;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()},e}(),fr=["interaction_required","consent_required","login_required"],pr=["message_only","additional_action","basic_action","user_password_expired","consent_required"],mr="no_tokens_found",gr="No refresh token found in the cache. Please sign-in.",yr="native_account_unavailable",_r="The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",vr=function(e){function t(n,r,i,o,s,a,c){var u=e.call(this,n,r,i)||this;return Object.setPrototypeOf(u,t.prototype),u.timestamp=o||p.EMPTY_STRING,u.traceId=s||p.EMPTY_STRING,u.correlationId=a||p.EMPTY_STRING,u.claims=c||p.EMPTY_STRING,u.name="InteractionRequiredAuthError",u}return i(t,e),t.isInteractionRequiredError=function(e,t,n){var r=!!e&&fr.indexOf(e)>-1,i=!!n&&pr.indexOf(n)>-1,o=!!t&&fr.some((function(e){return t.indexOf(e)>-1}));return r||o||i},t.createNoTokensFoundError=function(){return new t(mr,gr)},t.createNativeAccountUnavailableError=function(){return new t(yr,_r)},t}(z),Er=function(e,t,n,r,i){this.account=e||null,this.idToken=t||null,this.accessToken=n||null,this.refreshToken=r||null,this.appMetadata=i||null},wr=function(){function e(){}return e.setRequestState=function(t,n,r){var i=e.generateLibraryState(t,r);return Dt.isEmpty(n)?i:""+i+p.RESOURCE_DELIM+n},e.generateLibraryState=function(e,t){if(!e)throw Pt.createNoCryptoObjectError("generateLibraryState");var n={id:e.createNewGuid()};t&&(n.meta=t);var r=JSON.stringify(n);return e.base64Encode(r)},e.parseRequestState=function(e,t){if(!e)throw Pt.createNoCryptoObjectError("parseRequestState");if(Dt.isEmpty(t))throw Pt.createInvalidStateError(t,"Null, undefined or empty state");try{var n=t.split(p.RESOURCE_DELIM),r=n[0],i=n.length>1?n.slice(1).join(p.RESOURCE_DELIM):p.EMPTY_STRING,o=e.base64Decode(r),s=JSON.parse(o);return{userRequestState:Dt.isEmpty(i)?p.EMPTY_STRING:i,libraryState:s}}catch(e){throw Pt.createInvalidStateError(t,e)}},e}(),br=function(){function e(t){if(this._urlString=t,Dt.isEmpty(this._urlString))throw Dn.createUrlEmptyError();Dt.isEmpty(this.getHash())&&(this._urlString=e.canonicalizeUri(t))}return Object.defineProperty(e.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),e.canonicalizeUri=function(e){if(e){var t=e.toLowerCase();return Dt.endsWith(t,"?")?t=t.slice(0,-1):Dt.endsWith(t,"?/")&&(t=t.slice(0,-2)),Dt.endsWith(t,"/")||(t+="/"),t}return e},e.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(e){throw Dn.createUrlParseError(e)}if(!e.HostNameAndPort||!e.PathSegments)throw Dn.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Dn.createInsecureAuthorityUriError(this.urlString)},e.appendQueryString=function(e,t){return Dt.isEmpty(t)?e:e.indexOf("?")<0?e+"?"+t:e+"&"+t},e.removeHashFromUrl=function(t){return e.canonicalizeUri(t.split("#")[0])},e.prototype.replaceTenantPath=function(t){var n=this.getUrlComponents(),r=n.PathSegments;return!t||0===r.length||r[0]!==h.COMMON&&r[0]!==h.ORGANIZATIONS||(r[0]=t),e.constructAuthorityUriFromObject(n)},e.prototype.getHash=function(){return e.parseHash(this.urlString)},e.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Dn.createUrlParseError("Given url string: "+this.urlString);var n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},r=n.AbsolutePath.split("/");return r=r.filter((function(e){return e&&e.length>0})),n.PathSegments=r,!Dt.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n},e.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Dn.createUrlParseError("Given url string: "+e);return n[2]},e.getAbsoluteUrl=function(t,n){if(t[0]===p.FORWARD_SLASH){var r=new e(n).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+t}return t},e.parseHash=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):p.EMPTY_STRING},e.parseQueryString=function(e){var t=e.indexOf("?"),n=e.indexOf("/?");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):p.EMPTY_STRING},e.constructAuthorityUriFromObject=function(t){return new e(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},e.getDeserializedHash=function(t){if(Dt.isEmpty(t))return{};var n=e.parseHash(t),r=Dt.queryStringToObject(Dt.isEmpty(n)?t:n);if(!r)throw Pt.createHashNotDeserializedError(JSON.stringify(r));return r},e.getDeserializedQueryString=function(t){if(Dt.isEmpty(t))return{};var n=e.parseQueryString(t),r=Dt.queryStringToObject(Dt.isEmpty(n)?t:n);if(!r)throw Pt.createHashNotDeserializedError(JSON.stringify(r));return r},e.hashContainsKnownProperties=function(t){if(Dt.isEmpty(t)||t.indexOf("=")<0)return!1;var n=e.getDeserializedHash(t);return!!(n.code||n.error_description||n.error||n.state)},e}();!function(e){e.AcquireTokenByCode="acquireTokenByCode",e.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",e.AcquireTokenSilent="acquireTokenSilent",e.AcquireTokenSilentAsync="acquireTokenSilentAsync",e.AcquireTokenPopup="acquireTokenPopup",e.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",e.CryptoOptsSignJwt="cryptoOptsSignJwt",e.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",e.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",e.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",e.SsoSilent="ssoSilent",e.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",e.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",e.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken",e.BaseClientCreateTokenRequestHeaders="baseClientCreateTokenRequestHeaders",e.BrokerHandhshake="brokerHandshake",e.AcquireTokenByRefreshTokenInBroker="acquireTokenByRefreshTokenInBroker",e.AcquireTokenByBroker="acquireTokenByBroker",e.RefreshTokenClientExecuteTokenRequest="refreshTokenClientExecuteTokenRequest",e.RefreshTokenClientAcquireToken="refreshTokenClientAcquireToken",e.RefreshTokenClientAcquireTokenWithCachedRefreshToken="refreshTokenClientAcquireTokenWithCachedRefreshToken",e.RefreshTokenClientAcquireTokenByRefreshToken="refreshTokenClientAcquireTokenByRefreshToken",e.RefreshTokenClientCreateTokenRequestBody="refreshTokenClientCreateTokenRequestBody",e.AcquireTokenFromCache="acquireTokenFromCache",e.AcquireTokenBySilentIframe="acquireTokenBySilentIframe",e.InitializeBaseRequest="initializeBaseRequest",e.InitializeSilentRequest="initializeSilentRequest",e.InitializeClientApplication="initializeClientApplication",e.SilentIframeClientTokenHelper="silentIframeClientTokenHelper",e.SilentHandlerInitiateAuthRequest="silentHandlerInitiateAuthRequest",e.SilentHandlerMonitorIframeForHash="silentHandlerMonitorIframeForHash",e.SilentHandlerLoadFrame="silentHandlerLoadFrame",e.StandardInteractionClientCreateAuthCodeClient="standardInteractionClientCreateAuthCodeClient",e.StandardInteractionClientGetClientConfiguration="standardInteractionClientGetClientConfiguration",e.StandardInteractionClientInitializeAuthorizationRequest="standardInteractionClientInitializeAuthorizationRequest",e.StandardInteractionClientInitializeAuthorizationCodeRequest="standardInteractionClientInitializeAuthorizationCodeRequest",e.GetAuthCodeUrl="getAuthCodeUrl",e.HandleCodeResponseFromServer="handleCodeResponseFromServer",e.HandleCodeResponseFromHash="handleCodeResponseFromHash",e.UpdateTokenEndpointAuthority="updateTokenEndpointAuthority",e.AuthClientAcquireToken="authClientAcquireToken",e.AuthClientExecuteTokenRequest="authClientExecuteTokenRequest",e.AuthClientCreateTokenRequestBody="authClientCreateTokenRequestBody",e.AuthClientCreateQueryString="authClientCreateQueryString",e.PopTokenGenerateCnf="popTokenGenerateCnf",e.PopTokenGenerateKid="popTokenGenerateKid",e.HandleServerTokenResponse="handleServerTokenResponse",e.AuthorityFactoryCreateDiscoveredInstance="authorityFactoryCreateDiscoveredInstance",e.AuthorityResolveEndpointsAsync="authorityResolveEndpointsAsync",e.AuthorityGetCloudDiscoveryMetadataFromNetwork="authorityGetCloudDiscoveryMetadataFromNetwork",e.AuthorityUpdateCloudDiscoveryMetadata="authorityUpdateCloudDiscoveryMetadata",e.AuthorityGetEndpointMetadataFromNetwork="authorityGetEndpointMetadataFromNetwork",e.AuthorityUpdateEndpointMetadata="authorityUpdateEndpointMetadata",e.AuthorityUpdateMetadataWithRegionalInformation="authorityUpdateMetadataWithRegionalInformation",e.RegionDiscoveryDetectRegion="regionDiscoveryDetectRegion",e.RegionDiscoveryGetRegionFromIMDS="regionDiscoveryGetRegionFromIMDS",e.RegionDiscoveryGetCurrentVersion="regionDiscoveryGetCurrentVersion",e.AcquireTokenByCodeAsync="acquireTokenByCodeAsync",e.GetEndpointMetadataFromNetwork="getEndpointMetadataFromNetwork",e.GetCloudDiscoveryMetadataFromNetworkMeasurement="getCloudDiscoveryMetadataFromNetworkMeasurement",e.HandleRedirectPromiseMeasurement="handleRedirectPromiseMeasurement",e.UpdateCloudDiscoveryMetadataMeasurement="updateCloudDiscoveryMetadataMeasurement",e.UsernamePasswordClientAcquireToken="usernamePasswordClientAcquireToken",e.NativeMessageHandlerHandshake="nativeMessageHandlerHandshake",e.ClearTokensAndKeysWithClaims="clearTokensAndKeysWithClaims"}(ar||(ar={})),function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"}(cr||(cr={})),new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status"]),function(e){e.SW="sw",e.UHW="uhw"}(ur||(ur={}));var Tr=function(){function e(e,t){this.cryptoUtils=e,this.performanceClient=t}return e.prototype.generateCnf=function(e){var t,n;return s(this,void 0,void 0,(function(){var r,i,o;return a(this,(function(s){switch(s.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.PopTokenGenerateCnf,e.correlationId),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.PopTokenGenerateKid,e.correlationId),[4,this.generateKid(e)];case 1:return r=s.sent(),i=this.cryptoUtils.base64Encode(JSON.stringify(r)),o={kid:r.kid,reqCnfString:i},[4,this.cryptoUtils.hashString(i)];case 2:return[2,(o.reqCnfHash=s.sent(),o)]}}))}))},e.prototype.generateKid=function(e){var t;return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.PopTokenGenerateKid,e.correlationId),[4,this.cryptoUtils.getPublicKeyThumbprint(e)];case 1:return[2,{kid:n.sent(),xms_ksl:ur.SW}]}}))}))},e.prototype.signPopToken=function(e,t,n){return s(this,void 0,void 0,(function(){return a(this,(function(r){return[2,this.signPayload(e,t,n)]}))}))},e.prototype.signPayload=function(e,t,n,r){return s(this,void 0,void 0,(function(){var i,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return i=n.resourceRequestMethod,s=n.resourceRequestUri,c=n.shrClaims,u=n.shrNonce,l=s?new br(s):void 0,h=null==l?void 0:l.getUrlComponents(),[4,this.cryptoUtils.signJwt(o({at:e,ts:jn.nowSeconds(),m:null==i?void 0:i.toUpperCase(),u:null==h?void 0:h.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:null==h?void 0:h.AbsolutePath,q:(null==h?void 0:h.QueryString)?[[],h.QueryString]:void 0,client_claims:c||void 0},r),t,n.correlationId)];case 1:return[2,a.sent()]}}))}))},e}(),Sr=function(){function e(e,t,n,r,i,o,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=s}return e.prototype.validateServerAuthorizationCodeResponse=function(e,t,n){if(!e.state||!t)throw e.state?Pt.createStateNotFoundError("Cached State"):Pt.createStateNotFoundError("Server State");if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw Pt.createStateMismatchError();if(e.error||e.error_description||e.suberror){if(vr.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new vr(e.error||p.EMPTY_STRING,e.error_description,e.suberror,e.timestamp||p.EMPTY_STRING,e.trace_id||p.EMPTY_STRING,e.correlation_id||p.EMPTY_STRING,e.claims||p.EMPTY_STRING);throw new ir(e.error||p.EMPTY_STRING,e.error_description,e.suberror)}e.client_info&&Lt(e.client_info,n)},e.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(vr.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new vr(e.error,e.error_description,e.suberror,e.timestamp||p.EMPTY_STRING,e.trace_id||p.EMPTY_STRING,e.correlation_id||p.EMPTY_STRING,e.claims||p.EMPTY_STRING);var t=e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id;throw new ir(e.error,t,e.suberror)}},e.prototype.handleServerTokenResponse=function(t,n,r,i,o,c,u,l,h){var d;return s(this,void 0,void 0,(function(){var s,f,m,g,y,_;return a(this,(function(a){switch(a.label){case 0:if(null===(d=this.performanceClient)||void 0===d||d.addQueueMeasurement(ar.HandleServerTokenResponse,t.correlation_id),t.id_token){if(s=new Mn(t.id_token||p.EMPTY_STRING,this.cryptoObj),o&&!Dt.isEmpty(o.nonce)&&s.claims.nonce!==o.nonce)throw Pt.createNonceMismatchError();if(i.maxAge||0===i.maxAge){if(!(f=s.claims.auth_time))throw Pt.createAuthTimeNotFoundError();Mn.checkMaxAge(f,i.maxAge)}}this.homeAccountIdentifier=Ft.generateHomeAccountId(t.client_info||p.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,s),o&&o.state&&(m=wr.parseRequestState(this.cryptoObj,o.state)),t.key_id=t.key_id||i.sshKid||void 0,g=this.generateCacheRecord(t,n,r,i,s,c,o),a.label=1;case 1:return a.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),y=new Wn(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(y)]):[3,3];case 2:a.sent(),a.label=3;case 3:return!u||l||!g.account||(_=g.account.generateAccountKey(),this.cacheStorage.getAccount(_))?[4,this.cacheStorage.saveCacheRecord(g)]:(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,e.generateAuthenticationResult(this.cryptoObj,n,g,!1,i,s,m,void 0,h)]);case 4:return a.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&y?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(y)]):[3,7];case 6:a.sent(),a.label=7;case 7:return[7];case 8:return[2,e.generateAuthenticationResult(this.cryptoObj,n,g,!1,i,s,m,t,h)]}}))}))},e.prototype.generateCacheRecord=function(e,t,n,r,i,o,s){var a,c,u=t.getPreferredCache();if(Dt.isEmpty(u))throw Pt.createInvalidCacheEnvironmentError();!Dt.isEmpty(e.id_token)&&i&&(a=qn.createIdTokenEntity(this.homeAccountIdentifier,u,e.id_token||p.EMPTY_STRING,this.clientId,i.claims.tid||p.EMPTY_STRING),c=this.generateAccountEntity(e,i,t,s));var l=null;if(!Dt.isEmpty(e.access_token)){var h=e.scope?kn.fromString(e.scope):new kn(r.scopes||[]),d=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,f=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,m=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,g=n+d,y=g+f,_=m&&m>0?n+m:void 0;l=Hn.createAccessTokenEntity(this.homeAccountIdentifier,u,e.access_token||p.EMPTY_STRING,this.clientId,i?i.claims.tid||p.EMPTY_STRING:t.tenant,h.printScopes(),g,y,this.cryptoObj,_,e.token_type,o,e.key_id,r.claims,r.requestedClaimsHash)}var v=null;Dt.isEmpty(e.refresh_token)||(v=Yn.createRefreshTokenEntity(this.homeAccountIdentifier,u,e.refresh_token||p.EMPTY_STRING,this.clientId,e.foci,o));var E=null;return Dt.isEmpty(e.foci)||(E=Vn.createAppMetadataEntity(this.clientId,u,e.foci)),new Er(c,a,l,v,E)},e.prototype.generateAccountEntity=function(e,t,n,r){var i=n.authorityType,o=r?r.cloud_graph_host_name:p.EMPTY_STRING,s=r?r.msgraph_host:p.EMPTY_STRING;if(i===kt.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),Ft.createGenericAccount(this.homeAccountIdentifier,t,n,o,s);if(Dt.isEmpty(e.client_info)&&"AAD"===n.protocolMode)throw Pt.createClientInfoEmptyError();return e.client_info?Ft.createAccount(e.client_info,this.homeAccountIdentifier,t,n,o,s):Ft.createGenericAccount(this.homeAccountIdentifier,t,n,o,s)},e.generateAuthenticationResult=function(e,t,n,r,i,o,c,u,l){var h,d,f;return s(this,void 0,void 0,(function(){var s,m,g,y,_,v,E,w,b,T,S;return a(this,(function(a){switch(a.label){case 0:if(s=p.EMPTY_STRING,m=[],g=null,_=p.EMPTY_STRING,!n.accessToken)return[3,4];if(n.accessToken.tokenType!==N.POP)return[3,2];if(v=new Tr(e),E=n.accessToken,w=E.secret,!(b=E.keyId))throw Pt.createKeyIdMissingError();return[4,v.signPopToken(w,b,i)];case 1:return s=a.sent(),[3,3];case 2:s=n.accessToken.secret,a.label=3;case 3:m=kn.fromString(n.accessToken.target).asArray(),g=new Date(1e3*Number(n.accessToken.expiresOn)),y=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),a.label=4;case 4:return n.appMetadata&&(_=n.appMetadata.familyId===I?I:p.EMPTY_STRING),T=(null==o?void 0:o.claims.oid)||(null==o?void 0:o.claims.sub)||p.EMPTY_STRING,S=(null==o?void 0:o.claims.tid)||p.EMPTY_STRING,(null==u?void 0:u.spa_accountid)&&n.account&&(n.account.nativeAccountId=null==u?void 0:u.spa_accountid),[2,{authority:t.canonicalAuthority,uniqueId:T,tenantId:S,scopes:m,account:n.account?n.account.getAccountInfo():null,idToken:o?o.rawToken:p.EMPTY_STRING,idTokenClaims:o?o.claims:{},accessToken:s,fromCache:r,expiresOn:g,correlationId:i.correlationId,requestId:l||p.EMPTY_STRING,extExpiresOn:y,familyId:_,tokenType:(null===(h=n.accessToken)||void 0===h?void 0:h.tokenType)||p.EMPTY_STRING,state:c?c.userRequestState:p.EMPTY_STRING,cloudGraphHostName:(null===(d=n.account)||void 0===d?void 0:d.cloudGraphHostName)||p.EMPTY_STRING,msGraphHost:(null===(f=n.account)||void 0===f?void 0:f.msGraphHost)||p.EMPTY_STRING,code:null==u?void 0:u.spa_code,fromNativeBroker:!1}]}}))}))},e}(),Ar=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.includeRedirectUri=!0,r}return i(t,e),t.prototype.getAuthCodeUrl=function(e){var t,n;return s(this,void 0,void 0,(function(){var r;return a(this,(function(i){switch(i.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.GetAuthCodeUrl,e.correlationId),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.AuthClientCreateQueryString,e.correlationId),[4,this.createAuthCodeUrlQueryString(e)];case 1:return r=i.sent(),[2,br.appendQueryString(this.authority.authorizationEndpoint,r)]}}))}))},t.prototype.acquireToken=function(e,t){var n,r,i,o,c,l;return s(this,void 0,void 0,(function(){var s,h,d,f,p,m,g=this;return a(this,(function(a){switch(a.label){case 0:if(!e||!e.code)throw Pt.createTokenRequestCannotBeMadeError();return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ar.AuthClientAcquireToken,e.correlationId),s=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement("AuthCodeClientAcquireToken",e.correlationId),this.logger.info("in acquireToken call in auth-code client"),h=jn.nowSeconds(),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.AuthClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(this.authority,e)];case 1:return d=a.sent(),f=null===(o=d.headers)||void 0===o?void 0:o[u.X_MS_REQUEST_ID],(p=null===(c=d.headers)||void 0===c?void 0:c[u.X_MS_HTTP_VERSION])&&(null==s||s.addStaticFields({httpVerAuthority:p})),(m=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient)).validateTokenResponse(d.body),null===(l=this.performanceClient)||void 0===l||l.setPreQueueTime(ar.HandleServerTokenResponse,e.correlationId),[2,m.handleServerTokenResponse(d.body,this.authority,h,e,t,void 0,void 0,void 0,f).then((function(e){return null==s||s.endMeasurement({success:!0}),e})).catch((function(t){throw g.logger.verbose("Error in fetching token in ACC",e.correlationId),null==s||s.endMeasurement({errorCode:t.errorCode,subErrorCode:t.subError,success:!1}),t}))]}}))}))},t.prototype.handleFragmentResponse=function(e,t){var n=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),r=new br(e),i=br.getDeserializedHash(r.getHash());if(n.validateServerAuthorizationCodeResponse(i,t,this.cryptoUtils),!i.code)throw Pt.createNoAuthCodeInServerResponseError();return o(o({},i),{code:i.code})},t.prototype.getLogoutUri=function(e){if(!e)throw Dn.createEmptyLogoutRequestError();var t=this.createLogoutUrlQueryString(e);return br.appendQueryString(this.authority.endSessionEndpoint,t)},t.prototype.executeTokenRequest=function(e,t){var n,r;return s(this,void 0,void 0,(function(){var i,o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ar.AuthClientExecuteTokenRequest,t.correlationId),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(ar.AuthClientCreateTokenRequestBody,t.correlationId),i=this.createTokenQueryParameters(t),o=br.appendQueryString(e.tokenEndpoint,i),[4,this.createTokenRequestBody(t)];case 1:if(s=a.sent(),c=void 0,t.clientInfo)try{u=Lt(t.clientInfo,this.cryptoUtils),c={credential:""+u.uid+b.CLIENT_INFO_SEPARATOR+u.utid,type:Ut.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}return l=this.createTokenRequestHeaders(c||t.ccsCredential),h={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[2,this.executePostToTokenEndpoint(o,s,l,h)]}}))}))},t.prototype.createTokenRequestBody=function(e){var t,n;return s(this,void 0,void 0,(function(){var r,i,o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.AuthClientCreateTokenRequestBody,e.correlationId),(r=new hr).addClientId(this.config.authOptions.clientId),this.includeRedirectUri?r.addRedirectUri(e.redirectUri):lr.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&r.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(i=this.config.clientCredentials.clientAssertion,r.addClientAssertion(i.assertion),r.addClientAssertionType(i.assertionType)),r.addGrantType(E.AUTHORIZATION_CODE_GRANT),r.addClientInfo(),e.authenticationScheme!==N.POP?[3,2]:(o=new Tr(this.cryptoUtils,this.performanceClient),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.PopTokenGenerateCnf,e.correlationId),[4,o.generateCnf(e)]);case 1:return s=a.sent(),r.addPopToken(s.reqCnfString),[3,3];case 2:if(e.authenticationScheme===N.SSH){if(!e.sshJwk)throw Dn.createMissingSshJwkError();r.addSshJwk(e.sshJwk)}a.label=3;case 3:if(c=e.correlationId||this.config.cryptoInterface.createNewGuid(),r.addCorrelationId(c),(!Dt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),u=void 0,e.clientInfo)try{l=Lt(e.clientInfo,this.cryptoUtils),u={credential:""+l.uid+b.CLIENT_INFO_SEPARATOR+l.utid,type:Ut.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else u=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&u)switch(u.type){case Ut.HOME_ACCOUNT_ID:try{l=xt(u.credential),r.addCcsOid(l)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Ut.UPN:r.addCcsUpn(u.credential)}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[d.RETURN_SPA_CODE]||r.addExtraQueryParameters(((h={})[d.RETURN_SPA_CODE]="1",h)),[2,r.createQueryString()]}}))}))},t.prototype.createAuthCodeUrlQueryString=function(e){var t;return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,l;return a(this,(function(a){switch(a.label){case 0:if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.AuthClientCreateQueryString,e.correlationId),(n=new hr).addClientId(this.config.authOptions.clientId),r=c(e.scopes||[],e.extraScopesToConsent||[]),n.addScopes(r),n.addRedirectUri(e.redirectUri),i=e.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(i),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&n.addDomainHint(e.domainHint),e.prompt!==_.SELECT_ACCOUNT)if(e.sid&&e.prompt===_.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid);else if(e.account){if(o=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account)){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(s);try{u=xt(e.account.homeAccountId),n.addCcsOid(u)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(o&&e.prompt===_.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(o);try{u=xt(e.account.homeAccountId),n.addCcsOid(u)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username);try{u=xt(e.account.homeAccountId),n.addCcsOid(u)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(!Dt.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker?(n.addNativeBroker(),e.authenticationScheme!==N.POP?[3,2]:[4,new Tr(this.cryptoUtils).generateCnf(e)]):[3,2];case 1:l=a.sent(),n.addPopToken(l.reqCnfString),a.label=2;case 2:return[2,n.createQueryString()]}}))}))},t.prototype.createLogoutUrlQueryString=function(e){var t=new hr;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()},t.prototype.extractAccountSid=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null},t.prototype.extractLoginHint=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null},t}(dr),Or=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.acquireToken=function(e){var t,n,r,i,o,c,l;return s(this,void 0,void 0,(function(){var s,h,d,f,p,m,g=this;return a(this,(function(a){switch(a.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.RefreshTokenClientAcquireToken,e.correlationId),s=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(ar.RefreshTokenClientAcquireToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireToken called",e.correlationId),h=jn.nowSeconds(),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(ar.RefreshTokenClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(e,this.authority)];case 1:return d=a.sent(),f=null===(i=d.headers)||void 0===i?void 0:i[u.X_MS_HTTP_VERSION],null==s||s.addStaticFields({refreshTokenSize:(null===(o=d.body.refresh_token)||void 0===o?void 0:o.length)||0}),f&&(null==s||s.addStaticFields({httpVerToken:f})),p=null===(c=d.headers)||void 0===c?void 0:c[u.X_MS_REQUEST_ID],(m=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(d.body),null===(l=this.performanceClient)||void 0===l||l.setPreQueueTime(ar.HandleServerTokenResponse,e.correlationId),[2,m.handleServerTokenResponse(d.body,this.authority,h,e,void 0,void 0,!0,e.forceCache,p).then((function(e){return null==s||s.endMeasurement({success:!0}),e})).catch((function(t){throw g.logger.verbose("Error in fetching refresh token",e.correlationId),null==s||s.endMeasurement({errorCode:t.errorCode,subErrorCode:t.subError,success:!1}),t}))]}}))}))},t.prototype.acquireTokenByRefreshToken=function(e){var t,n,r,i;return s(this,void 0,void 0,(function(){var o,s;return a(this,(function(a){if(!e)throw Dn.createEmptyTokenRequestError();if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Pt.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!0)]}catch(t){if(o=t instanceof vr&&t.errorCode===mr,s=t instanceof ir&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError,o||s)return null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)];throw t}return null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)]}))}))},t.prototype.acquireTokenWithCachedRefreshToken=function(e,t){var n,r,i;return s(this,void 0,void 0,(function(){var s,c,u;return a(this,(function(a){if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),s=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireTokenWithCachedRefreshToken called",e.correlationId),!(c=this.cacheManager.getRefreshToken(e.account,t)))throw null==s||s.discardMeasurement(),vr.createNoTokensFoundError();return null==s||s.endMeasurement({success:!0}),u=o(o({},e),{refreshToken:c.secret,authenticationScheme:e.authenticationScheme||N.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ut.HOME_ACCOUNT_ID}}),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.RefreshTokenClientAcquireToken,e.correlationId),[2,this.acquireToken(u)]}))}))},t.prototype.executeTokenRequest=function(e,t){var n,r,i;return s(this,void 0,void 0,(function(){var o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ar.RefreshTokenClientExecuteTokenRequest,e.correlationId),o=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(ar.RefreshTokenClientExecuteTokenRequest,e.correlationId),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.RefreshTokenClientCreateTokenRequestBody,e.correlationId),s=this.createTokenQueryParameters(e),c=br.appendQueryString(t.tokenEndpoint,s),[4,this.createTokenRequestBody(e)];case 1:return u=a.sent(),l=this.createTokenRequestHeaders(e.ccsCredential),h={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},[2,this.executePostToTokenEndpoint(c,u,l,h).then((function(e){return null==o||o.endMeasurement({success:!0}),e})).catch((function(e){throw null==o||o.endMeasurement({success:!1}),e}))]}}))}))},t.prototype.createTokenRequestBody=function(e){var t,n,r;return s(this,void 0,void 0,(function(){var i,o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.RefreshTokenClientCreateTokenRequestBody,e.correlationId),i=e.correlationId,o=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(ar.BaseClientCreateTokenRequestHeaders,i),(s=new hr).addClientId(this.config.authOptions.clientId),s.addScopes(e.scopes),s.addGrantType(E.REFRESH_TOKEN_GRANT),s.addClientInfo(),s.addLibraryInfo(this.config.libraryInfo),s.addApplicationTelemetry(this.config.telemetry.application),s.addThrottling(),this.serverTelemetryManager&&s.addServerTelemetry(this.serverTelemetryManager),s.addCorrelationId(i),s.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&s.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(c=this.config.clientCredentials.clientAssertion,s.addClientAssertion(c.assertion),s.addClientAssertionType(c.assertionType)),e.authenticationScheme!==N.POP?[3,2]:(u=new Tr(this.cryptoUtils,this.performanceClient),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(ar.PopTokenGenerateCnf,e.correlationId),[4,u.generateCnf(e)]);case 1:return l=a.sent(),s.addPopToken(l.reqCnfString),[3,3];case 2:if(e.authenticationScheme===N.SSH){if(!e.sshJwk)throw null==o||o.endMeasurement({success:!1}),Dn.createMissingSshJwkError();s.addSshJwk(e.sshJwk)}a.label=3;case 3:if((!Dt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&s.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ut.HOME_ACCOUNT_ID:try{h=xt(e.ccsCredential.credential),s.addCcsOid(h)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Ut.UPN:s.addCcsUpn(e.ccsCredential.credential)}return null==o||o.endMeasurement({success:!0}),[2,s.createQueryString()]}}))}))},t}(dr),Cr=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.acquireToken=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.acquireCachedToken(e)];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof Pt&&t.errorCode===ft)return[2,new Or(this.config,this.performanceClient).acquireTokenByRefreshToken(e)];throw t;case 3:return[2]}}))}))},t.prototype.acquireCachedToken=function(e){var t,n,r,i,o;return s(this,void 0,void 0,(function(){var s,c;return a(this,(function(a){switch(a.label){case 0:if(!e)throw Dn.createEmptyTokenRequestError();if(e.forceRefresh)throw null===(t=this.serverTelemetryManager)||void 0===t||t.setCacheOutcome(x.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),Pt.createRefreshRequiredError();if(!this.config.cacheOptions.claimsBasedCachingEnabled&&!Dt.isEmptyObj(e.claims))throw null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(x.CLAIMS_REQUESTED_CACHE_SKIPPED),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because claims-based caching is disabled and claims were requested."),Pt.createRefreshRequiredError();if(!e.account)throw Pt.createNoAccountInSilentRequestError();if(s=e.authority||this.authority.getPreferredCache(),!(c=this.cacheManager.readCacheRecord(e.account,e,s)).accessToken)throw null===(r=this.serverTelemetryManager)||void 0===r||r.setCacheOutcome(x.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Pt.createRefreshRequiredError();if(jn.wasClockTurnedBack(c.accessToken.cachedAt)||jn.isTokenExpired(c.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw null===(i=this.serverTelemetryManager)||void 0===i||i.setCacheOutcome(x.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),Pt.createRefreshRequiredError();if(c.accessToken.refreshOn&&jn.isTokenExpired(c.accessToken.refreshOn,0))throw null===(o=this.serverTelemetryManager)||void 0===o||o.setCacheOutcome(x.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),Pt.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(c,e)];case 1:return[2,a.sent()]}}))}))},t.prototype.generateResultFromCacheRecord=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:if(e.idToken&&(n=new Mn(e.idToken.secret,this.config.cryptoInterface)),t.maxAge||0===t.maxAge){if(!(r=null==n?void 0:n.claims.auth_time))throw Pt.createAuthTimeNotFoundError();Mn.checkMaxAge(r,t.maxAge)}return[4,Sr.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)];case 1:return[2,i.sent()]}}))}))},t}(dr),Ir=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.acquireToken=function(e){var t,n;return s(this,void 0,void 0,(function(){var r,i,o,s,c;return a(this,(function(a){switch(a.label){case 0:return r=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement("UsernamePasswordClientAcquireToken",e.correlationId),this.logger.info("in acquireToken call in username-password client"),i=jn.nowSeconds(),[4,this.executeTokenRequest(this.authority,e)];case 1:return o=a.sent(),s=null===(n=o.headers)||void 0===n?void 0:n[u.X_MS_HTTP_VERSION],null==r||r.addStaticFields({httpVerToken:s}),(c=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(o.body),[2,c.handleServerTokenResponse(o.body,this.authority,i,e)]}}))}))},t.prototype.executeTokenRequest=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,s;return a(this,(function(a){return n=this.createTokenQueryParameters(t),r=br.appendQueryString(e.tokenEndpoint,n),i=this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:Ut.UPN}),s={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[2,this.executePostToTokenEndpoint(r,i,o,s)]}))}))},t.prototype.createTokenRequestBody=function(e){var t=new hr;t.addClientId(this.config.authOptions.clientId),t.addUsername(e.username),t.addPassword(e.password),t.addScopes(e.scopes),t.addResponseTypeForTokenAndIdToken(),t.addGrantType(E.RESOURCE_OWNER_PASSWORD_GRANT),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);var n=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var r=this.config.clientCredentials.clientAssertion;t.addClientAssertion(r.assertion),t.addClientAssertionType(r.assertionType)}return(!Dt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&t.addCcsUpn(e.username),t.createQueryString()},t}(dr),Rr=function(){function e(e,t){this.cacheOutcome=x.NO_CACHE_HIT,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||p.EMPTY_STRING,this.wrapperVer=e.wrapperVer||p.EMPTY_STRING,this.telemetryCacheKey=P.CACHE_KEY+b.CACHE_KEY_SEPARATOR+e.clientId}return e.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+P.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(P.VALUE_SEPARATOR),n=[e,this.getRegionDiscoveryFields()].join(P.VALUE_SEPARATOR);return[P.SCHEMA_VERSION,n,t].join(P.CATEGORY_SEPARATOR)},e.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),n=e.maxErrorsToSend(t),r=t.failedRequests.slice(0,2*n).join(P.VALUE_SEPARATOR),i=t.errors.slice(0,n).join(P.VALUE_SEPARATOR),o=t.errors.length,s=[o,n<o?P.OVERFLOW_TRUE:P.OVERFLOW_FALSE].join(P.VALUE_SEPARATOR);return[P.SCHEMA_VERSION,t.cacheHits,r,i,s].join(P.CATEGORY_SEPARATOR)},e.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.errors.length>=P.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),Dt.isEmpty(e.subError)?Dt.isEmpty(e.errorCode)?e&&e.toString()?t.errors.push(e.toString()):t.errors.push(P.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},e.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},e.prototype.getLastRequests=function(){var e=new $n;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e},e.prototype.clearTelemetryCache=function(){var t=this.getLastRequests(),n=e.maxErrorsToSend(t);if(n===t.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{var r=new $n;r.failedRequests=t.failedRequests.slice(2*n),r.errors=t.errors.slice(n),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}},e.maxErrorsToSend=function(e){var t,n=0,r=0,i=e.errors.length;for(t=0;t<i;t++){var o=e.failedRequests[2*t]||p.EMPTY_STRING,s=e.failedRequests[2*t+1]||p.EMPTY_STRING,a=e.errors[t]||p.EMPTY_STRING;if(!((r+=o.toString().length+s.toString().length+a.length+3)<P.MAX_LAST_HEADER_BYTES))break;n+=1}return n},e.prototype.getRegionDiscoveryFields=function(){var e=[];return e.push(this.regionUsed||p.EMPTY_STRING),e.push(this.regionSource||p.EMPTY_STRING),e.push(this.regionOutcome||p.EMPTY_STRING),e.join(",")},e.prototype.updateRegionDiscoveryMetadata=function(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome},e.prototype.setCacheOutcome=function(e){this.cacheOutcome=e},e}();function Nr(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}var Pr={"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},Dr={"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},kr=function(){function e(e,t,n){this.networkInterface=e,this.performanceClient=t,this.correlationId=n}return e.prototype.detectRegion=function(t,n){var r,i,o,c;return s(this,void 0,void 0,(function(){var s,u,l,h,d;return a(this,(function(a){switch(a.label){case 0:if(null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(ar.RegionDiscoveryDetectRegion,this.correlationId),s=t)return[3,8];u=e.IMDS_OPTIONS,a.label=1;case 1:return a.trys.push([1,6,,7]),null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(p.IMDS_VERSION,u)];case 2:return(l=a.sent()).status===k.httpSuccess&&(s=l.body,n.region_source=M.IMDS),l.status!==k.httpBadRequest?[3,5]:(null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(ar.RegionDiscoveryGetCurrentVersion,this.correlationId),[4,this.getCurrentVersion(u)]);case 3:return(h=a.sent())?(null===(c=this.performanceClient)||void 0===c||c.setPreQueueTime(ar.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(h,u)]):(n.region_source=M.FAILED_AUTO_DETECTION,[2,null]);case 4:(d=a.sent()).status===k.httpSuccess&&(s=d.body,n.region_source=M.IMDS),a.label=5;case 5:return[3,7];case 6:return a.sent(),n.region_source=M.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:n.region_source=M.ENVIRONMENT_VARIABLE,a.label=9;case 9:return s||(n.region_source=M.FAILED_AUTO_DETECTION),[2,s||null]}}))}))},e.prototype.getRegionFromIMDS=function(e,t){var n;return s(this,void 0,void 0,(function(){return a(this,(function(r){return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ar.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[2,this.networkInterface.sendGetRequestAsync(p.IMDS_ENDPOINT+"?api-version="+e+"&format=text",t,p.IMDS_TIMEOUT)]}))}))},e.prototype.getCurrentVersion=function(e){var t;return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.RegionDiscoveryGetCurrentVersion,this.correlationId),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(p.IMDS_ENDPOINT+"?format=json",e)];case 2:return(n=r.sent()).status===k.httpBadRequest&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?[2,n.body["newest-versions"][0]]:[2,null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},e.IMDS_OPTIONS={headers:{Metadata:"true"}},e}(),Mr=function(){function e(e,t,n,r,i,o,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=o,this.correlationId=s,this.regionDiscovery=new kr(t,this.performanceClient,this.correlationId)}return e.prototype.getAuthorityType=function(e){if(e.HostNameAndPort.endsWith(p.CIAM_AUTH_URL))return kt.Ciam;var t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case p.ADFS:return kt.Adfs;case p.DSTS:return kt.Dsts}return kt.Default},Object.defineProperty(e.prototype,"authorityType",{get:function(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new br(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Pt.createLogoutNotSupportedError();return this.replacePath(this.metadata.end_session_endpoint)}throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jwksUri",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),e.prototype.canReplaceTenant=function(t){return 1===t.PathSegments.length&&!e.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===kt.Default&&this.protocolMode===F.AAD},e.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},e.prototype.replacePath=function(e){var t=this,n=e,r=new br(this.metadata.canonical_authority).getUrlComponents(),i=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((function(e,o){var s=i[o];if(0===o&&t.canReplaceTenant(r)){var a=new br(t.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];s!==a&&(t.logger.verbose("Replacing tenant domain name "+s+" with id "+a),s=a)}e!==s&&(n=n.replace("/"+s+"/","/"+e+"/"))})),this.replaceTenant(n)},Object.defineProperty(e.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===kt.Adfs||this.authorityType===kt.Dsts||this.protocolMode===F.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),e.prototype.discoveryComplete=function(){return!!this.metadata},e.prototype.resolveEndpointsAsync=function(){var e,t,n;return s(this,void 0,void 0,(function(){var r,i,o,s;return a(this,(function(a){switch(a.label){case 0:return null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(ar.AuthorityResolveEndpointsAsync,this.correlationId),(r=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort))||(r=new zn).updateCanonicalAuthority(this.canonicalAuthority),null===(t=this.performanceClient)||void 0===t||t.setPreQueueTime(ar.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),[4,this.updateCloudDiscoveryMetadata(r)];case 1:return i=a.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,r.preferred_network),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.AuthorityUpdateEndpointMetadata,this.correlationId),[4,this.updateEndpointMetadata(r)];case 2:return o=a.sent(),i!==O.CACHE&&o!==O.CACHE&&(r.resetExpiresAt(),r.updateCanonicalAuthority(this.canonicalAuthority)),s=this.cacheManager.generateAuthorityMetadataCacheKey(r.preferred_cache),this.cacheManager.setAuthorityMetadata(s,r),this.metadata=r,[2]}}))}))},e.prototype.updateEndpointMetadata=function(e){var t,n,r,i,o,c;return s(this,void 0,void 0,(function(){var s,u;return a(this,(function(a){switch(a.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.AuthorityUpdateEndpointMetadata,this.correlationId),(s=this.getEndpointMetadataFromConfig())?(e.updateEndpointMetadata(s,!1),[2,O.CONFIG]):this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!e.isExpired()?[2,O.CACHE]:(null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),[4,this.getEndpointMetadataFromNetwork()]);case 1:return(s=a.sent())?(null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.azureRegion)?(null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(s)]):[3,3]:[3,4];case 2:s=a.sent(),a.label=3;case 3:return e.updateEndpointMetadata(s,!0),[2,O.NETWORK];case 4:return!(u=this.getEndpointMetadataFromHardcodedValues())||this.authorityOptions.skipAuthorityMetadataCache?[3,7]:(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.azureRegion)?(null===(c=this.performanceClient)||void 0===c||c.setPreQueueTime(ar.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(u)]):[3,6];case 5:u=a.sent(),a.label=6;case 6:return e.updateEndpointMetadata(u,!1),[2,O.HARDCODED_VALUES];case 7:throw Pt.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}}))}))},e.prototype.isAuthoritySameType=function(e){return new br(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length},e.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Dn.createInvalidAuthorityMetadataError()}return null},e.prototype.getEndpointMetadataFromNetwork=function(){var e;return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(ar.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),t={},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,t)];case 2:return[2,Nr((n=r.sent()).body)?n.body:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},e.prototype.getEndpointMetadataFromHardcodedValues=function(){return this.canonicalAuthority in Pr?Pr[this.canonicalAuthority]:null},e.prototype.updateMetadataWithRegionalInformation=function(t){var n,r,i,o;return s(this,void 0,void 0,(function(){var s,c;return a(this,(function(a){switch(a.label){case 0:return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ar.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),(s=null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.azureRegion)?s!==p.AZURE_REGION_AUTO_DISCOVER_FLAG?(this.regionDiscoveryMetadata.region_outcome=L.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=s,[2,e.replaceWithRegionalInformation(t,s)]):(null===(i=this.performanceClient)||void 0===i||i.setPreQueueTime(ar.RegionDiscoveryDetectRegion,this.correlationId),[4,this.regionDiscovery.detectRegion(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.environmentRegion,this.regionDiscoveryMetadata)]):[3,2];case 1:if(c=a.sent())return this.regionDiscoveryMetadata.region_outcome=L.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,[2,e.replaceWithRegionalInformation(t,c)];this.regionDiscoveryMetadata.region_outcome=L.AUTO_DETECTION_REQUESTED_FAILED,a.label=2;case 2:return[2,t]}}))}))},e.prototype.updateCloudDiscoveryMetadata=function(e){var t,n;return s(this,void 0,void 0,(function(){var r,i,o;return a(this,(function(s){switch(s.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),this.logger.verbose("Attempting to get cloud discovery metadata in the config"),this.logger.verbosePii("Known Authorities: "+(this.authorityOptions.knownAuthorities||p.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: "+(this.authorityOptions.authorityMetadata||p.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: "+(e.canonical_authority||p.NOT_APPLICABLE)),(r=this.getCloudDiscoveryMetadataFromConfig())?(this.logger.verbose("Found cloud discovery metadata in the config."),e.updateCloudDiscoveryMetadata(r,!1),[2,O.CONFIG]):(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the cache."),i=e.isExpired(),this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!i?(this.logger.verbose("Found metadata in the cache."),[2,O.CACHE]):(i&&this.logger.verbose("The metadata entity is expired."),this.logger.verbose("Did not find cloud discovery metadata in the cache... Attempting to get cloud discovery metadata from the network."),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(ar.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),[4,this.getCloudDiscoveryMetadataFromNetwork()]));case 1:if(r=s.sent())return this.logger.verbose("cloud discovery metadata was successfully returned from getCloudDiscoveryMetadataFromNetwork()"),e.updateCloudDiscoveryMetadata(r,!0),[2,O.NETWORK];if(this.logger.verbose("Did not find cloud discovery metadata from the network... Attempting to get cloud discovery metadata from hardcoded values."),(o=this.getCloudDiscoveryMetadataFromHarcodedValues())&&!this.options.skipAuthorityMetadataCache)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),e.updateCloudDiscoveryMetadata(o,!1),[2,O.HARDCODED_VALUES];throw this.logger.error("Did not find cloud discovery metadata from hardcoded values... Metadata could not be obtained from config, cache, network or hardcoded values. Throwing Untrusted Authority Error."),Dn.createUntrustedAuthorityError()}}))}))},e.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityType===kt.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=e.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Dn.createInvalidCloudDiscoveryMetadataError()}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null},e.prototype.getCloudDiscoveryMetadataFromNetwork=function(){var t;return s(this,void 0,void 0,(function(){var n,r,i,o,s,c,u,l;return a(this,(function(a){switch(a.label){case 0:null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ar.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),n=""+p.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",r={},i=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(n,r)];case 2:if(o=a.sent(),s=void 0,c=void 0,function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(o.body))s=o.body,c=s.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: "+s.tenant_discovery_endpoint);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(o.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),[2,null];if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: "+o.status),(s=o.body).error===p.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),[2,null];this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is "+s.error),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is "+s.error_description),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),c=[]}return this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),i=e.getCloudDiscoveryMetadataFromNetworkResponse(c,this.hostnameAndPort),[3,4];case 3:return(u=a.sent())instanceof z?this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: "+u.errorCode+"\nError Description: "+u.errorMessage):(l=u,this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: "+l.name+"\nError Description: "+l.message)),[2,null];case 4:return i||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),i=e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,i]}}))}))},e.prototype.getCloudDiscoveryMetadataFromHarcodedValues=function(){return this.canonicalAuthority in Dr?Dr[this.canonicalAuthority]:null},e.prototype.isInKnownAuthorities=function(){var e=this;return this.authorityOptions.knownAuthorities.filter((function(t){return br.getDomainFromUrl(t).toLowerCase()===e.hostnameAndPort})).length>0},e.generateAuthority=function(e,t){var n;if(t&&t.azureCloudInstance!==B.None){var r=t.tenant?t.tenant:p.DEFAULT_COMMON_TENANT;n=t.azureCloudInstance+"/"+r+"/"}return n||e},e.createCloudDiscoveryMetadataFromHost=function(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}},e.getCloudDiscoveryMetadataFromNetworkResponse=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.aliases.indexOf(t)>-1)return r}return null},e.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw Pt.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},e.prototype.isAlias=function(e){return this.metadata.aliases.indexOf(e)>-1},e.isPublicCloudAuthority=function(e){return p.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0},e.buildRegionalAuthorityString=function(e,t,n){var r=new br(e);r.validateAsUri();var i=r.getUrlComponents(),s=t+"."+i.HostNameAndPort;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=t+"."+p.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX);var a=br.constructAuthorityUriFromObject(o(o({},r.getUrlComponents()),{HostNameAndPort:s})).urlString;return n?a+"?"+n:a},e.replaceWithRegionalInformation=function(t,n){return t.authorization_endpoint=e.buildRegionalAuthorityString(t.authorization_endpoint,n),t.token_endpoint=e.buildRegionalAuthorityString(t.token_endpoint,n,p.REGIONAL_AUTH_NON_MSI_QUERY_STRING),t.end_session_endpoint&&(t.end_session_endpoint=e.buildRegionalAuthorityString(t.end_session_endpoint,n)),t},e.transformCIAMAuthority=function(e){var t=e.endsWith(p.FORWARD_SLASH)?e:""+e+p.FORWARD_SLASH,n=new br(e).getUrlComponents();return 0===n.PathSegments.length&&n.HostNameAndPort.endsWith(p.CIAM_AUTH_URL)&&(t=""+t+n.HostNameAndPort.split(".")[0]+p.AAD_TENANT_DOMAIN_SUFFIX),t},e.reservedTenantDomains=new Set(["{tenant}","{tenantid}",h.COMMON,h.CONSUMERS,h.ORGANIZATIONS]),e}(),Lr=function(){function e(){}return e.createDiscoveredInstance=function(t,n,r,i,o,c,u){return s(this,void 0,void 0,(function(){var s,l,h;return a(this,(function(a){switch(a.label){case 0:null==c||c.addQueueMeasurement(ar.AuthorityFactoryCreateDiscoveredInstance,u),s=Mr.transformCIAMAuthority(t),l=e.createInstance(s,n,r,i,o,c,u),a.label=1;case 1:return a.trys.push([1,3,,4]),null==c||c.setPreQueueTime(ar.AuthorityResolveEndpointsAsync,u),[4,l.resolveEndpointsAsync()];case 2:return a.sent(),[2,l];case 3:throw h=a.sent(),Pt.createEndpointDiscoveryIncompleteError(h);case 4:return[2]}}))}))},e.createInstance=function(e,t,n,r,i,o,s){if(Dt.isEmpty(e))throw Dn.createUrlEmptyError();return new Mr(e,t,n,r,i,o,s)},e}(),xr=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.acquireToken=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,this.getDeviceCode(e)];case 1:return t=o.sent(),e.deviceCodeCallback(t),n=jn.nowSeconds(),[4,this.acquireTokenWithDeviceCode(e,t)];case 2:return r=o.sent(),(i=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(r),[4,i.handleServerTokenResponse(r,this.authority,n,e)];case 3:return[2,o.sent()]}}))}))},t.prototype.getDeviceCode=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o;return a(this,(function(s){return t=this.createExtraQueryParameters(e),n=br.appendQueryString(this.authority.deviceCodeEndpoint,t),r=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},[2,this.executePostRequestToDeviceCodeEndpoint(n,r,i,o)]}))}))},t.prototype.createExtraQueryParameters=function(e){var t=new hr;return e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()},t.prototype.executePostRequestToDeviceCodeEndpoint=function(e,t,n,r){return s(this,void 0,void 0,(function(){var i,o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return[4,this.networkManager.sendPostRequest(r,e,{body:t,headers:n})];case 1:return i=a.sent().body,o=i.user_code,s=i.device_code,c=i.verification_uri,u=i.expires_in,l=i.interval,h=i.message,[2,{userCode:o,deviceCode:s,verificationUri:c,expiresIn:u,interval:l,message:h}]}}))}))},t.prototype.createQueryString=function(e){var t=new hr;return t.addScopes(e.scopes),t.addClientId(this.config.authOptions.clientId),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),(!Dt.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()},t.prototype.continuePolling=function(e,t,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Pt.createDeviceCodeCancelledError();if(t&&t<e&&jn.nowSeconds()>t)throw this.logger.error("User defined timeout for device code polling reached. The timeout was set for "+t),Pt.createUserTimeoutReachedError();if(jn.nowSeconds()>e)throw t&&this.logger.verbose("User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for "+t),this.logger.error("Device code expired. Expiration time of device code was "+e),Pt.createDeviceCodeExpiredError();return!0},t.prototype.acquireTokenWithDeviceCode=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:n=this.createTokenQueryParameters(e),r=br.appendQueryString(this.authority.tokenEndpoint,n),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),s=e.timeout?jn.nowSeconds()+e.timeout:void 0,c=jn.nowSeconds()+t.expiresIn,u=1e3*t.interval,a.label=1;case 1:return this.continuePolling(c,s,e.cancel)?(l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},[4,this.executePostToTokenEndpoint(r,i,o,l)]):[3,8];case 2:return(h=a.sent()).body&&h.body.error?h.body.error!==p.AUTHORIZATION_PENDING?[3,4]:(this.logger.info("Authorization pending. Continue polling."),[4,jn.delay(u)]):[3,6];case 3:return a.sent(),[3,5];case 4:throw this.logger.info("Unexpected error in polling from the server"),ir.createPostRequestFailed(h.body.error);case 5:return[3,7];case 6:return this.logger.verbose("Authorization completed successfully. Polling stopped."),[2,h.body];case 7:return[3,1];case 8:throw this.logger.error("Polling stopped for unknown reasons."),Pt.createDeviceCodeUnknownError()}}))}))},t.prototype.createTokenRequestBody=function(e,t){var n=new hr;n.addScopes(e.scopes),n.addClientId(this.config.authOptions.clientId),n.addGrantType(E.DEVICE_CODE_GRANT),n.addDeviceCode(t.deviceCode);var r=e.correlationId||this.config.cryptoInterface.createNewGuid();return n.addCorrelationId(r),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),(!Dt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),n.createQueryString()},t}(dr),Ur=function(e){function t(t,n){var r=e.call(this,t)||this;return r.appTokenProvider=n,r}return i(t,e),t.prototype.acquireToken=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this.scopeSet=new kn(e.scopes||[]),e.skipCache?[4,this.executeTokenRequest(e,this.authority)]:[3,2];case 1:case 5:return[2,n.sent()];case 2:return[4,this.getCachedAuthenticationResult(e)];case 3:return(t=n.sent())?[2,t]:[3,4];case 4:return[4,this.executeTokenRequest(e,this.authority)]}}))}))},t.prototype.getCachedAuthenticationResult=function(e){var t,n;return s(this,void 0,void 0,(function(){var r;return a(this,(function(i){switch(i.label){case 0:return(r=this.readAccessTokenFromCache())?jn.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?(null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(x.CACHED_ACCESS_TOKEN_EXPIRED),[2,null]):[4,Sr.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:null,idToken:null,accessToken:r,refreshToken:null,appMetadata:null},!0,e)]:(null===(t=this.serverTelemetryManager)||void 0===t||t.setCacheOutcome(x.NO_CACHED_ACCESS_TOKEN),[2,null]);case 1:return[2,i.sent()]}}))}))},t.prototype.readAccessTokenFromCache=function(){var e={homeAccountId:p.EMPTY_STRING,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:T.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:kn.createSearchScopes(this.scopeSet.asArray())},t=this.cacheManager.getAccessTokensByFilter(e);if(t.length<1)return null;if(t.length>1)throw Pt.createMultipleMatchingTokensInCacheError();return t[0]},t.prototype.executeTokenRequest=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,s,c,u,l,h,d,f;return a(this,(function(a){switch(a.label){case 0:return this.appTokenProvider?(this.logger.info("Using appTokenProvider extensibility."),i={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims},r=jn.nowSeconds(),[4,this.appTokenProvider(i)]):[3,2];case 1:return o=a.sent(),n={access_token:o.accessToken,expires_in:o.expiresInSeconds,refresh_in:o.refreshInSeconds,token_type:N.BEARER},[3,4];case 2:return s=this.createTokenQueryParameters(e),c=br.appendQueryString(t.tokenEndpoint,s),u=this.createTokenRequestBody(e),l=this.createTokenRequestHeaders(),h={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},r=jn.nowSeconds(),[4,this.executePostToTokenEndpoint(c,u,l,h)];case 3:d=a.sent(),n=d.body,a.label=4;case 4:return(f=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(n),[4,f.handleServerTokenResponse(n,this.authority,r,e)];case 5:return[2,a.sent()]}}))}))},t.prototype.createTokenRequestBody=function(e){var t=new hr;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes,!1),t.addGrantType(E.CLIENT_CREDENTIALS_GRANT),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);var n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);var r=e.clientAssertion||this.config.clientCredentials.clientAssertion;return r&&(t.addClientAssertion(r.assertion),t.addClientAssertionType(r.assertionType)),(!Dt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()},t}(dr),Fr=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.acquireToken=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this.scopeSet=new kn(e.scopes||[]),t=this,[4,this.cryptoUtils.hashString(e.oboAssertion)];case 1:return t.userAssertionHash=n.sent(),e.skipCache?[4,this.executeTokenRequest(e,this.authority,this.userAssertionHash)]:[3,3];case 2:case 4:case 6:return[2,n.sent()];case 3:return n.trys.push([3,5,,7]),[4,this.getCachedAuthenticationResult(e)];case 5:return n.sent(),[4,this.executeTokenRequest(e,this.authority,this.userAssertionHash)];case 7:return[2]}}))}))},t.prototype.getCachedAuthenticationResult=function(e){var t,n;return s(this,void 0,void 0,(function(){var r,i,o,s,c,u;return a(this,(function(a){switch(a.label){case 0:if(!(r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e)))throw null===(t=this.serverTelemetryManager)||void 0===t||t.setCacheOutcome(x.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Pt.createRefreshRequiredError();if(jn.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(x.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),Pt.createRefreshRequiredError();return i=this.readIdTokenFromCacheForOBO(r.homeAccountId),s=null,i&&(o=new Mn(i.secret,this.config.cryptoInterface),c=o.claims.oid?o.claims.oid:o.claims.sub,u={homeAccountId:i.homeAccountId,environment:i.environment,tenantId:i.realm,username:p.EMPTY_STRING,localAccountId:c||p.EMPTY_STRING},s=this.cacheManager.readAccountFromCache(u)),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,Sr.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:r,idToken:i,refreshToken:null,appMetadata:null},!0,e,o)];case 1:return[2,a.sent()]}}))}))},t.prototype.readIdTokenFromCacheForOBO=function(e){var t={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:T.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(t);return n.length<1?null:n[0]},t.prototype.readAccessTokenFromCacheForOBO=function(e,t){var n=t.authenticationScheme||N.BEARER,r={credentialType:n&&n.toLowerCase()!==N.BEARER.toLowerCase()?T.ACCESS_TOKEN_WITH_AUTH_SCHEME:T.ACCESS_TOKEN,clientId:e,target:kn.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(r),o=i.length;if(o<1)return null;if(o>1)throw Pt.createMultipleMatchingTokensInCacheError();return i[0]},t.prototype.executeTokenRequest=function(e,t,n){return s(this,void 0,void 0,(function(){var r,i,o,s,c,u,l,h;return a(this,(function(a){switch(a.label){case 0:return r=this.createTokenQueryParameters(e),i=br.appendQueryString(t.tokenEndpoint,r),o=this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=jn.nowSeconds(),[4,this.executePostToTokenEndpoint(i,o,s,c)];case 1:return l=a.sent(),(h=new Sr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(l.body),[4,h.handleServerTokenResponse(l.body,this.authority,u,e,void 0,n)];case 2:return[2,a.sent()]}}))}))},t.prototype.createTokenRequestBody=function(e){var t=new hr;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType(E.JWT_BEARER),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);var n=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(n),t.addRequestTokenUse(d.ON_BEHALF_OF),t.addOboAssertion(e.oboAssertion),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var r=this.config.clientCredentials.clientAssertion;t.addClientAssertion(r.assertion),t.addClientAssertionType(r.assertionType)}return(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()},t}(dr),Br=n(3685),qr=n.n(Br),jr=n(5687),Hr=n.n(jr),Yr=n(6113),Vr=n.n(Yr);const $r=new Uint8Array(256);let zr=$r.length;function Gr(){return zr>$r.length-16&&(Vr().randomFillSync($r),zr=0),$r.slice(zr,zr+=16)}const Wr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Kr=[];for(let e=0;e<256;++e)Kr.push((e+256).toString(16).substr(1));const Qr=function(e,t=0){const n=(Kr[e[t+0]]+Kr[e[t+1]]+Kr[e[t+2]]+Kr[e[t+3]]+"-"+Kr[e[t+4]]+Kr[e[t+5]]+"-"+Kr[e[t+6]]+Kr[e[t+7]]+"-"+Kr[e[t+8]]+Kr[e[t+9]]+"-"+Kr[e[t+10]]+Kr[e[t+11]]+Kr[e[t+12]]+Kr[e[t+13]]+Kr[e[t+14]]+Kr[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Wr.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},Xr=function(e,t,n){const r=(e=e||{}).random||(e.rng||Gr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return Qr(r)};var Zr,Jr,ei,ti=n(9704);!function(e){e.GET="get",e.POST="post"}(Zr||(Zr={})),function(e){e[e.SUCCESS_RANGE_START=200]="SUCCESS_RANGE_START",e[e.SUCCESS_RANGE_END=299]="SUCCESS_RANGE_END",e[e.REDIRECT=302]="REDIRECT",e[e.CLIENT_ERROR_RANGE_START=400]="CLIENT_ERROR_RANGE_START",e[e.CLIENT_ERROR_RANGE_END=499]="CLIENT_ERROR_RANGE_END",e[e.SERVER_ERROR_RANGE_START=500]="SERVER_ERROR_RANGE_START",e[e.SERVER_ERROR_RANGE_END=599]="SERVER_ERROR_RANGE_END"}(Jr||(Jr={})),function(e){e[e.SUCCESS_RANGE_START=200]="SUCCESS_RANGE_START",e[e.SUCCESS_RANGE_END=299]="SUCCESS_RANGE_END",e[e.SERVER_ERROR=500]="SERVER_ERROR"}(ei||(ei={}));const ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",ri="urn:ietf:params:oauth:client-assertion-type:jwt-bearer",ii="authorization_pending";var oi;!function(e){e[e.acquireTokenSilent=62]="acquireTokenSilent",e[e.acquireTokenByUsernamePassword=371]="acquireTokenByUsernamePassword",e[e.acquireTokenByDeviceCode=671]="acquireTokenByDeviceCode",e[e.acquireTokenByClientCredential=771]="acquireTokenByClientCredential",e[e.acquireTokenByCode=871]="acquireTokenByCode",e[e.acquireTokenByRefreshToken=872]="acquireTokenByRefreshToken"}(oi||(oi={}));class si{static getNetworkResponse(e,t,n){return{headers:e,body:t,status:n}}static urlToHttpOptions(e){const t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}class ai{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t){return this.proxyUrl?ci(e,this.proxyUrl,Zr.GET,t,this.customAgentOptions):ui(e,Zr.GET,t,this.customAgentOptions)}async sendPostRequestAsync(e,t,n){return this.proxyUrl?ci(e,this.proxyUrl,Zr.POST,t,this.customAgentOptions,n):ui(e,Zr.POST,t,this.customAgentOptions,n)}}const ci=(e,t,n,r,i,o)=>{const s=new URL(e),a=new URL(t),c=(null==r?void 0:r.headers)||{},u={host:a.hostname,port:a.port,method:"CONNECT",path:s.hostname,headers:c};o&&(u.timeout=o),i&&Object.keys(i).length&&(u.agent=new(qr().Agent)(i));let l="";if(n===Zr.POST){const e=(null==r?void 0:r.body)||"";l=`Content-Type: application/x-www-form-urlencoded\r\nContent-Length: ${e.length}\r\n\r\n${e}`}const h=`${n.toUpperCase()} ${s.href} HTTP/1.1\r\nHost: ${s.host}\r\nConnection: close\r\n`+l+"\r\n";return new Promise(((e,t)=>{const n=qr().request(u);u.timeout&&n.on("timeout",(()=>{n.destroy(),t(new Error("Request time out"))})),n.end(),n.on("connect",((r,i)=>{const o=(null==r?void 0:r.statusCode)||ei.SERVER_ERROR;(o<ei.SUCCESS_RANGE_START||o>ei.SUCCESS_RANGE_END)&&(n.destroy(),i.destroy(),t(new Error(`Error connecting to proxy. Http status code: ${r.statusCode}. Http status message: ${(null==r?void 0:r.statusMessage)||"Unknown"}`))),u.timeout&&(i.setTimeout(u.timeout),i.on("timeout",(()=>{n.destroy(),i.destroy(),t(new Error("Request time out"))}))),i.write(h);const s=[];i.on("data",(e=>{s.push(e)})),i.on("end",(()=>{const t=Buffer.concat([...s]).toString().split("\r\n"),r=parseInt(t[0].split(" ")[1]),i=t[0].split(" ").slice(2).join(" "),o=t[t.length-1],a=t.slice(1,t.length-2),c=new Map;a.forEach((e=>{const t=e.split(new RegExp(/:\s(.*)/s)),n=t[0];let r=t[1];try{const e=JSON.parse(r);e&&"object"==typeof e&&(r=e)}catch(e){}c.set(n,r)}));const u=Object.fromEntries(c),l=si.getNetworkResponse(u,li(r,i,u,o),r);(r<Jr.SUCCESS_RANGE_START||r>Jr.SUCCESS_RANGE_END)&&l.body.error!==ii&&n.destroy(),e(l)})),i.on("error",(e=>{n.destroy(),i.destroy(),t(new Error(e.toString()))}))})),n.on("error",(e=>{n.destroy(),t(new Error(e.toString()))}))}))},ui=(e,t,n,r,i)=>{const o=t===Zr.POST,s=(null==n?void 0:n.body)||"",a=new URL(e),c={method:t,headers:(null==n?void 0:n.headers)||{},...si.urlToHttpOptions(a)};return i&&(c.timeout=i),r&&Object.keys(r).length&&(c.agent=new(Hr().Agent)(r)),o&&(c.headers={...c.headers,"Content-Length":s.length}),new Promise(((e,t)=>{const n=Hr().request(c);i&&n.on("timeout",(()=>{n.destroy(),t(new Error("Request time out"))})),o&&n.write(s),n.end(),n.on("response",(t=>{const r=t.headers,i=t.statusCode,o=t.statusMessage,s=[];t.on("data",(e=>{s.push(e)})),t.on("end",(()=>{const t=Buffer.concat([...s]).toString(),a=r,c=si.getNetworkResponse(a,li(i,o,a,t),i);(i<Jr.SUCCESS_RANGE_START||i>Jr.SUCCESS_RANGE_END)&&c.body.error!==ii&&n.destroy(),e(c)}))})),n.on("error",(e=>{n.destroy(),t(new Error(e.toString()))}))}))},li=(e,t,n,r)=>{let i;try{i=JSON.parse(r)}catch(r){let o,s;e>=Jr.CLIENT_ERROR_RANGE_START&&e<=Jr.CLIENT_ERROR_RANGE_END?(o="client_error",s="A client"):e>=Jr.SERVER_ERROR_RANGE_START&&e<=Jr.SERVER_ERROR_RANGE_END?(o="server_error",s="A server"):(o="unknown_error",s="An unknown"),i={error:o,error_description:`${s} error occured.\nHttp status code: ${e}\nHttp status message: ${t||"Unknown"}\nHeaders: ${JSON.stringify(n)}`}}return i},hi={clientId:p.EMPTY_STRING,authority:p.DEFAULT_AUTHORITY,clientSecret:p.EMPTY_STRING,clientAssertion:p.EMPTY_STRING,clientCertificate:{thumbprint:p.EMPTY_STRING,privateKey:p.EMPTY_STRING,x5c:p.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:p.EMPTY_STRING,authorityMetadata:p.EMPTY_STRING,clientCapabilities:[],protocolMode:F.AAD,azureCloudOptions:{azureCloudInstance:B.None,tenant:p.EMPTY_STRING},skipAuthorityMetadataCache:!1},di={claimsBasedCachingEnabled:!0},fi={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:j.Info},pi={loggerOptions:fi,networkClient:new ai,proxyUrl:p.EMPTY_STRING,customAgentOptions:{}},mi={application:{appName:p.EMPTY_STRING,appVersion:p.EMPTY_STRING}};class gi{generateGuid(){return Xr()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class yi{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return yi.base64Encode(e,t).replace(/=/g,p.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return yi.base64Decode(t)}}class _i{sha256(e){return Vr().createHash("sha256").update(e).digest()}}class vi{constructor(){this.hashUtils=new _i}async generatePkceCodes(){const e=this.generateCodeVerifier();return{verifier:e,challenge:this.generateCodeChallengeFromVerifier(e)}}generateCodeVerifier(){const e=[],t=256-256%ni.length;for(;e.length<=32;){const n=Vr().randomBytes(1)[0];if(n>=t)continue;const r=n%ni.length;e.push(ni[r])}const n=e.join(p.EMPTY_STRING);return yi.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return yi.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}class Ei{constructor(){this.pkceGenerator=new vi,this.guidGenerator=new gi,this.hashUtils=new _i}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return yi.base64Encode(e)}base64Decode(e){return yi.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return yi.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}class wi{static deserializeJSONBlob(e){return Dt.isEmpty(e)?{}:JSON.parse(e)}static deserializeAccounts(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,realm:r.realm,localAccountId:r.local_account_id,username:r.username,authorityType:r.authority_type,name:r.name,clientInfo:r.client_info,lastModificationTime:r.last_modification_time,lastModificationApp:r.last_modification_app},o=new Ft;Un.toObject(o,i),t[n]=o})),t}static deserializeIdTokens(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,realm:r.realm},o=new qn;Un.toObject(o,i),t[n]=o})),t}static deserializeAccessTokens(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,realm:r.realm,target:r.target,cachedAt:r.cached_at,expiresOn:r.expires_on,extendedExpiresOn:r.extended_expires_on,refreshOn:r.refresh_on,keyId:r.key_id,tokenType:r.token_type,requestedClaims:r.requestedClaims,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:r.userAssertionHash},o=new Hn;Un.toObject(o,i),t[n]=o})),t}static deserializeRefreshTokens(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,familyId:r.family_id,target:r.target,realm:r.realm},o=new Yn;Un.toObject(o,i),t[n]=o})),t}static deserializeAppMetadata(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={clientId:r.client_id,environment:r.environment,familyId:r.family_id},o=new Vn;Un.toObject(o,i),t[n]=o})),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}class bi{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,realm:r.realm,local_account_id:r.localAccountId,username:r.username,authority_type:r.authorityType,name:r.name,client_info:r.clientInfo,last_modification_time:r.lastModificationTime,last_modification_app:r.lastModificationApp}})),t}static serializeIdTokens(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,realm:r.realm}})),t}static serializeAccessTokens(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,realm:r.realm,target:r.target,cached_at:r.cachedAt,expires_on:r.expiresOn,extended_expires_on:r.extendedExpiresOn,refresh_on:r.refreshOn,key_id:r.keyId,token_type:r.tokenType,requestedClaims:r.requestedClaims,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:r.userAssertionHash}})),t}static serializeRefreshTokens(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,family_id:r.familyId,target:r.target,realm:r.realm}})),t}static serializeAppMetadata(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={client_id:r.clientId,environment:r.environment,family_id:r.familyId}})),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}class Ti extends Un{constructor(e,t,n){super(t,n,e),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach((e=>e.call(null)))}cacheToInMemoryCache(e){const t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const n in e)if(e[n]instanceof Ft)t.accounts[n]=e[n];else if(e[n]instanceof qn)t.idTokens[n]=e[n];else if(e[n]instanceof Hn)t.accessTokens[n]=e[n];else if(e[n]instanceof Yn)t.refreshTokens[n]=e[n];else{if(!(e[n]instanceof Vn))continue;t.appMetadata[n]=e[n]}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");const t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);const n=this.getCache();n[e]=t,this.setCache(n)}getAccountKeys(){const e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){const e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){const t=this.getItem(e);return Ft.isAccountEntity(t)?t:null}setAccount(e){const t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){const t=this.getItem(e);return qn.isIdTokenEntity(t)?t:null}setIdTokenCredential(e){const t=e.generateCredentialKey();this.setItem(t,e)}getAccessTokenCredential(e){const t=this.getItem(e);return Hn.isAccessTokenEntity(t)?t:null}setAccessTokenCredential(e){const t=e.generateCredentialKey();this.setItem(t,e)}getRefreshTokenCredential(e){const t=this.getItem(e);return Yn.isRefreshTokenEntity(t)?t:null}setRefreshTokenCredential(e){const t=e.generateCredentialKey();this.setItem(t,e)}getAppMetadata(e){const t=this.getItem(e);return Vn.isAppMetadataEntity(e,t)?t:null}setAppMetadata(e){const t=e.generateAppMetadataKey();this.setItem(t,e)}getServerTelemetry(e){const t=this.getItem(e);return t&&$n.isServerTelemetryEntity(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){const t=this.getItem(e);return t&&zn.isAuthorityMetadataEntity(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){const t=this.getItem(e);return t&&Gn.isThrottlingEntity(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1;const n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");const e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach((e=>{this.removeItem(e)})),this.emitChange()}static generateInMemoryCache(e){return wi.deserializeAllCache(wi.deserializeJSONBlob(e))}static generateJsonCache(e){return bi.serializeAllCache(e)}updateCredentialCacheKey(e,t){const n=t.generateCredentialKey();if(e!==n){const r=this.getItem(e);if(r)return this.removeItem(e),this.setItem(n,r),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}const Si={},Ai={},Oi={},Ci={},Ii={};class Ri{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=bi.serializeAllCache(this.storage.getInMemoryCache());return Dt.isEmpty(this.cacheSnapshot)?this.logger.trace("No cache snapshot to merge"):(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,Dt.isEmpty(this.cacheSnapshot))this.logger.trace("No cache snapshot to deserialize");else{this.logger.trace("Reading cache snapshot from disk");const e=wi.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}}getKVStore(){return this.storage.getCache()}async getAllAccounts(){let e;this.logger.trace("getAllAccounts called");try{return this.persistence&&(e=new Wn(this,!1),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){const t=await this.getAllAccounts();return!Dt.isEmpty(e)&&t&&t.length&&t.filter((t=>t.homeAccountId===e))[0]||null}async getAccountByLocalId(e){const t=await this.getAllAccounts();return!Dt.isEmpty(e)&&t&&t.length&&t.filter((t=>t.localAccountId===e))[0]||null}async removeAccount(e){let t;this.logger.trace("removeAccount called");try{this.persistence&&(t=new Wn(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount(Ft.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");const n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach((n=>{const r=t[n];if(e.hasOwnProperty(n)){const t=null!==r,i="object"==typeof r,o=!Array.isArray(r),s=void 0!==e[n]&&null!==e[n];t&&i&&o&&s?this.mergeUpdates(e[n],r):e[n]=r}else null!==r&&(e[n]=r)})),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");const n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,r=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,s=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:r,RefreshToken:i,IdToken:o,AppMetadata:s}}mergeRemovalsDict(e,t){const n={...e};return Object.keys(e).forEach((e=>{t&&t.hasOwnProperty(e)||delete n[e]})),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...Si,...e.Account},IdToken:{...Ai,...e.IdToken},AccessToken:{...Oi,...e.AccessToken},RefreshToken:{...Ci,...e.RefreshToken},AppMetadata:{...Ii,...e.AppMetadata}}}}const Ni="1.18.4",Pi="invalid_loopback_server_address_type",Di="Loopback server address is not type string. This is unexpected.",ki="unable_to_load_redirectUrl",Mi="Loopback server callback was invoked without a url. This is unexpected.",Li="no_auth_code_in_response",xi="No auth code found in the server response. Please check your network trace to determine what happened.",Ui="no_loopback_server_exists",Fi="No loopback server exists yet.",Bi="loopback_server_already_exists",qi="Loopback server already exists. Cannot create another.",ji="loopback_server_timeout",Hi="Timed out waiting for auth code listener to be registered.",Yi="state_not_found",Vi="State not found. Please verify that the request originated from msal.";class $i extends z{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new $i(Pi,`${Di}`)}static createUnableToLoadRedirectUrlError(){return new $i(ki,`${Mi}`)}static createNoAuthCodeInResponseError(){return new $i(Li,`${xi}`)}static createNoLoopbackServerExistsError(){return new $i(Ui,`${Fi}`)}static createLoopbackServerAlreadyExistsError(){return new $i(Bi,`${qi}`)}static createLoopbackServerTimeoutError(){return new $i(ji,`${Hi}`)}static createStateNotFoundError(){return new $i(Yi,Vi)}}class zi{constructor(e){this.config=function({auth:e,broker:t,cache:n,system:r,telemetry:i}){const o={...pi,networkClient:new ai(null==r?void 0:r.proxyUrl,null==r?void 0:r.customAgentOptions),loggerOptions:(null==r?void 0:r.loggerOptions)||fi};return{auth:{...hi,...e},broker:{...t},cache:{...di,...n},system:{...o,...r},telemetry:{...mi,...i}}}(e),this.cryptoProvider=new Ei,this.logger=new Mt(this.config.system.loggerOptions,"@azure/msal-node",Ni),this.storage=new Ti(this.logger,this.config.auth.clientId,this.cryptoProvider),this.tokenCache=new Ri(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||v.QUERY,authenticationScheme:N.BEARER},n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),r=new Ar(n);return this.logger.verbose("Auth code client created",t.correlationId),r.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});const n={...e,...await this.initializeBaseRequest(e),authenticationScheme:N.BEARER},r=this.initializeServerTelemetryManager(oi.acquireTokenByCode,n.correlationId);try{const i=await this.buildOauthClientConfiguration(n.authority,n.correlationId,r,void 0,e.azureCloudOptions),o=new Ar(i);return this.logger.verbose("Auth code client created",n.correlationId),o.acquireToken(n,t)}catch(e){throw e instanceof z&&e.setCorrelationId(n.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),authenticationScheme:N.BEARER},n=this.initializeServerTelemetryManager(oi.acquireTokenByRefreshToken,t.correlationId);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new Or(r);return this.logger.verbose("Refresh token client created",t.correlationId),i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenSilent(e){const t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(oi.acquireTokenSilent,t.correlationId,t.forceRefresh);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new Cr(r);return this.logger.verbose("Silent flow client created",t.correlationId),i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(oi.acquireTokenByUsernamePassword,t.correlationId);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new Ir(r);return this.logger.verbose("Username password client created",t.correlationId),i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw $i.createStateNotFoundError();if(e!==t)throw Pt.createStateMismatchError()}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,r,i){this.logger.verbose("buildOauthClientConfiguration called",t);const o=i||this.config.auth.azureCloudOptions;this.logger.verbose(`building oauth client configuration with the authority: ${e}`,t);const s=await this.createAuthority(e,r,t,o);return null==n||n.updateRegionDiscoveryMetadata(s.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:this.clientAssertion?this.getClientAssertion(s):void 0},libraryInfo:{sku:"msal.js.node",version:Ni,cpu:process.arch||p.EMPTY_STRING,os:process.platform||p.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}getClientAssertion(e){return{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:ri}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===N.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=N.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Dt.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...m],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){const r={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1};return new Rr(r,this.storage)}async createAuthority(e,t,n,r){this.logger.verbose("createAuthority called",n);const i=Mr.generateAuthority(e,r),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:t,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return await Lr.createDiscoveredInstance(i,this.config.system.networkClient,this.storage,o,this.logger)}clearCache(){this.storage.clear()}}class Gi{async listenForAuthCode(e,t){if(this.server)throw $i.createLoopbackServerAlreadyExistsError();const n=new Promise(((n,r)=>{this.server=(0,Br.createServer)((async(i,o)=>{const s=i.url;if(!s)return o.end(t||"Error occurred loading redirectUrl"),void r($i.createUnableToLoadRedirectUrlError());if(s===p.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.");const a=br.getDeserializedQueryString(s);if(a.code){const e=await this.getRedirectUri();o.writeHead(Jr.REDIRECT,{location:e}),o.end()}n(a)})),this.server.listen(0)}));return await new Promise((e=>{let t=0;const n=setInterval((()=>{if(50<t)throw $i.createLoopbackServerTimeoutError();this.server.listening&&(clearInterval(n),e()),t++}),100)})),n}getRedirectUri(){if(!this.server)throw $i.createNoLoopbackServerExistsError();const e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),$i.createInvalidLoopbackAddressTypeError();return`http://localhost:${e&&e.port}`}closeServer(){this.server&&this.server.close()}}class Wi extends zi{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable."))}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);const t=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(oi.acquireTokenByDeviceCode,t.correlationId);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new xr(r);return this.logger.verbose("Device code client created",t.correlationId),i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);const{openBrowser:n,successTemplate:r,errorTemplate:i,windowHandle:o,loopbackClient:s,...a}=e;if(this.nativeBrokerPlugin){var c;const n={...a,clientId:this.config.auth.clientId,scopes:e.scopes||m,redirectUri:"http://localhost",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...a.extraQueryParameters,...a.tokenQueryParameters},accountId:null==(c=a.account)?void 0:c.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(n,o)}const{verifier:u,challenge:l}=await this.cryptoProvider.generatePkceCodes(),h=s||new Gi;try{const o=h.listenForAuthCode(r,i),s=h.getRedirectUri(),c={...a,correlationId:t,scopes:e.scopes||m,redirectUri:s,responseMode:v.QUERY,codeChallenge:l,codeChallengeMethod:A.S256},d=await this.getAuthCodeUrl(c);await n(d);const f=await o.finally((()=>{h.closeServer()}));if(f.error)throw new ir(f.error,f.error_description,f.suberror);if(!f.code)throw $i.createNoAuthCodeInResponseError();const g=f.client_info,y={code:f.code,codeVerifier:u,clientInfo:g||p.EMPTY_STRING,...c};return this.acquireTokenByCode(y)}catch(e){throw h.closeServer(),e}}async acquireTokenSilent(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){const n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||m,redirectUri:"http://localhost",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:e.tokenQueryParameters,accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){const t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){const e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}}class Ki{static fromAssertion(e){const t=new Ki;return t.jwt=e,t}static fromCertificate(e,t,n){const r=new Ki;return r.privateKey=t,r.thumbprint=e,n&&(r.publicCertificate=this.parseCertificate(n)),r}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw Pt.createInvalidAssertionError()}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;const r=jn.nowSeconds();this.expirationTime=r+600;const i={alg:"RS256",x5t:yi.base64EncodeUrl(this.thumbprint,"hex")};this.publicCertificate&&Object.assign(i,{x5c:this.publicCertificate});const o={aud:this.jwtAudience,exp:this.expirationTime,iss:this.issuer,sub:this.issuer,nbf:r,jti:e.createNewGuid()};return this.jwt=(0,ti.sign)(o,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<jn.nowSeconds()}static parseCertificate(e){const t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[];let r;for(;null!==(r=t.exec(e));)n.push(r[1].replace(/\r*\n/g,p.EMPTY_STRING));return n}}class Qi extends zi{constructor(e){super(e),this.setClientCredential(this.config),this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:e.clientAssertion,assertionType:ri});const n=await this.initializeBaseRequest(e),r={...n,scopes:n.scopes.filter((e=>!m.includes(e)))},i={...e,...r,clientAssertion:t},o={azureRegion:i.azureRegion,environmentRegion:process.env.REGION_NAME},s=this.initializeServerTelemetryManager(oi.acquireTokenByClientCredential,i.correlationId,i.skipCache);try{const t=await this.buildOauthClientConfiguration(i.authority,i.correlationId,s,o,e.azureCloudOptions),n=new Ur(t,this.appTokenProvider);return this.logger.verbose("Client credential client created",i.correlationId),n.acquireToken(i)}catch(e){throw e instanceof z&&e.setCorrelationId(i.correlationId),s.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)};try{const n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),r=new Fr(n);return this.logger.verbose("On behalf of client created",t.correlationId),r.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),e}}setClientCredential(e){const t=!Dt.isEmpty(e.auth.clientSecret),n=!Dt.isEmpty(e.auth.clientAssertion),r=e.auth.clientCertificate||{thumbprint:p.EMPTY_STRING,privateKey:p.EMPTY_STRING},i=!Dt.isEmpty(r.thumbprint)||!Dt.isEmpty(r.privateKey);if(!this.appTokenProvider){if(t&&n||n&&i||t&&i)throw Pt.createInvalidCredentialError();if(e.auth.clientSecret)this.clientSecret=e.auth.clientSecret;else if(e.auth.clientAssertion)this.clientAssertion=Ki.fromAssertion(e.auth.clientAssertion);else{if(!i)throw Pt.createInvalidCredentialError();var o;this.clientAssertion=Ki.fromCertificate(r.thumbprint,r.privateKey,null==(o=e.auth.clientCertificate)?void 0:o.x5c)}}}}const Xi="Sequence",Zi="Stream",Ji=new Set(["Deserialize","Serialize","Retry","Sign"]);class eo{constructor(e){var t;this._policies=[],this._policies=null!==(t=null==e?void 0:e.slice(0))&&void 0!==t?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!Ji.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!Ji.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter((n=>!(e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase)||(t.push(n.policy),!1))),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight(((e,t)=>n=>t.sendRequest(n,e)),(t=>e.sendRequest(t)))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new eo(this._policies)}static create(){return new eo}orderPolicies(){const e=[],t=new Map;function n(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const r=n("Serialize"),i=n("None"),o=n("Deserialize"),s=n("Retry"),a=n("Sign"),c=[r,i,o,s,a];function u(e){return"Retry"===e?s:"Serialize"===e?r:"Deserialize"===e?o:"Sign"===e?a:i}for(const e of this._policies){const n=e.policy,r=e.options,i=n.name;if(t.has(i))throw new Error("Duplicate policy names not allowed in pipeline");const o={policy:n,dependsOn:new Set,dependants:new Set};r.afterPhase&&(o.afterPhase=u(r.afterPhase),o.afterPhase.hasAfterPolicies=!0),t.set(i,o),u(r.phase).policies.add(o)}for(const e of this._policies){const{policy:n,options:r}=e,i=n.name,o=t.get(i);if(!o)throw new Error(`Missing node for policy ${i}`);if(r.afterPolicies)for(const e of r.afterPolicies){const n=t.get(e);n&&(o.dependsOn.add(n),n.dependants.add(o))}if(r.beforePolicies)for(const e of r.beforePolicies){const n=t.get(e);n&&(n.dependsOn.add(o),o.dependants.add(n))}}function l(n){n.hasRun=!0;for(const r of n.policies)if((!r.afterPhase||r.afterPhase.hasRun&&!r.afterPhase.policies.size)&&0===r.dependsOn.size){e.push(r.policy);for(const e of r.dependants)e.dependsOn.delete(r);t.delete(r.policy.name),n.policies.delete(r)}}function h(){for(const e of c){if(l(e),e.policies.size>0&&e!==i)return void(i.hasRun||l(i));e.hasAfterPolicies&&l(i)}}let d=0;for(;t.size>0;){d++;const t=e.length;if(h(),e.length<=t&&d>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}const to=require("node:os"),no=require("node:util"),ro=require("node:process"),io="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let oo,so=[],ao=[];const co=[];io&&lo(io);const uo=Object.assign((e=>fo(e)),{enable:lo,enabled:ho,disable:function(){const e=oo||"";return lo(""),e},log:function(e,...t){ro.stderr.write(`${no.format(e,...t)}${to.EOL}`)}});function lo(e){oo=e,so=[],ao=[];const t=/\*/g,n=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const e of n)e.startsWith("-")?ao.push(new RegExp(`^${e.substr(1)}$`)):so.push(new RegExp(`^${e}$`));for(const e of co)e.enabled=ho(e.namespace)}function ho(e){if(e.endsWith("*"))return!0;for(const t of ao)if(t.test(e))return!1;for(const t of so)if(t.test(e))return!0;return!1}function fo(e){const t=Object.assign((function(...n){t.enabled&&(n.length>0&&(n[0]=`${e} ${n[0]}`),t.log(...n))}),{enabled:ho(e),destroy:po,log:uo.log,namespace:e,extend:mo});return co.push(t),t}function po(){const e=co.indexOf(this);return e>=0&&(co.splice(e,1),!0)}function mo(e){const t=fo(`${this.namespace}:${e}`);return t.log=this.log,t}const go=uo,yo=new Set,_o="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let vo;const Eo=go("azure");Eo.log=(...e)=>{go.log(...e)};const wo=["verbose","info","warning","error"];_o&&(Co(_o)?function(e){if(e&&!Co(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${wo.join(",")}`);vo=e;const t=[];for(const e of yo)Oo(e)&&t.push(e.namespace);go.enable(t.join(","))}(_o):console.error(`AZURE_LOG_LEVEL set to unknown log level '${_o}'; logging is not enabled. Acceptable values: ${wo.join(", ")}.`));const bo={verbose:400,info:300,warning:200,error:100};function To(e){const t=Eo.extend(e);return So(Eo,t),{error:Ao(t,"error"),warning:Ao(t,"warning"),info:Ao(t,"info"),verbose:Ao(t,"verbose")}}function So(e,t){t.log=(...t)=>{e.log(...t)}}function Ao(e,t){const n=Object.assign(e.extend(t),{level:t});if(So(e,n),Oo(n)){const e=go.disable();go.enable(e+","+n.namespace)}return yo.add(n),n}function Oo(e){return Boolean(vo&&bo[e.level]<=bo[vo])}function Co(e){return wo.includes(e)}const Io=To("core-rest-pipeline");class Ro extends Error{constructor(e){super(e),this.name="AbortError"}}function No(e,t){let n;const{abortSignal:r,abortErrorMsg:i}=null!=t?t:{};return function(t,r){const{cleanupBeforeAbort:i,abortSignal:o,abortErrorMsg:s}=null!=r?r:{};return new Promise(((t,r)=>{function a(){r(new Ro(null!=s?s:"The operation was aborted."))}function c(){null==o||o.removeEventListener("abort",u)}function u(){null==i||i(),c(),a()}if(null==o?void 0:o.aborted)return a();try{(t=>{n=setTimeout(t,e)})((e=>{c(),t(e)}))}catch(e){r(e)}null==o||o.addEventListener("abort",u)}))}(0,{cleanupBeforeAbort:()=>clearTimeout(n),abortSignal:r,abortErrorMsg:null!=i?i:"The delay was aborted."})}function Po(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function Do(e){if(Po(e)){const t="string"==typeof e.name,n="string"==typeof e.message;return t&&n}return!1}function ko(e){if(Do(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}}var Mo;const Lo="function"==typeof(null===(Mo=null===globalThis||void 0===globalThis?void 0:globalThis.crypto)||void 0===Mo?void 0:Mo.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):Yr.randomUUID;function xo(){return Lo()}var Uo,Fo,Bo,qo;"undefined"!=typeof window&&window.document,"object"==typeof self&&"function"==typeof(null===self||void 0===self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(Uo=self.constructor)||void 0===Uo?void 0:Uo.name)||"ServiceWorkerGlobalScope"===(null===(Fo=self.constructor)||void 0===Fo?void 0:Fo.name)||null===(Bo=self.constructor)||void 0===Bo||Bo.name),"undefined"!=typeof Deno&&void 0!==Deno.version&&Deno.version.deno,"undefined"!=typeof Bun&&Bun.version;const jo=void 0!==globalThis.process&&Boolean(globalThis.process.version)&&Boolean(null===(qo=globalThis.process.versions)||void 0===qo?void 0:qo.node),Ho=jo;function Yo(e,t){return Buffer.from(e,t)}"undefined"!=typeof navigator&&(null===navigator||void 0===navigator||navigator.product);const Vo="REDACTED",$o=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],zo=["api-version"];class Go{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=$o.concat(e),t=zo.concat(t),this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,n)=>{if(n instanceof Error)return Object.assign(Object.assign({},n),{name:n.name,message:n.message});if("headers"===e)return this.sanitizeHeaders(n);if("url"===e)return this.sanitizeUrl(n);if("query"===e)return this.sanitizeQuery(n);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(n)||Po(n)){if(t.has(n))return"[Circular]";t.add(n)}return n}}),2)}sanitizeHeaders(e){const t={};for(const n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=Vo;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;const t={};for(const n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=Vo;return t}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;const t=new URL(e);if(!t.search)return e;for(const[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,Vo);return t.toString()}}const Wo=["GET","HEAD"];function Ko(e={}){const{maxRetries:t=20}=e;return{name:"redirectPolicy",async sendRequest(e,n){const r=await n(e);return Qo(n,r,t)}}}async function Qo(e,t,n,r=0){const{request:i,status:o,headers:s}=t,a=s.get("location");if(a&&(300===o||301===o&&Wo.includes(i.method)||302===o&&Wo.includes(i.method)||303===o&&"POST"===i.method||307===o)&&r<n){const t=new URL(a,i.url);i.url=t.toString(),303===o&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");const s=await e(i);return Qo(e,s,n,r+1)}return t}const Xo="1.16.0";function Zo(e){const t=new Map;t.set("core-rest-pipeline",Xo),function(e){const t=ro.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node),e.set("OS",`(${to.arch()}-${to.type()}-${to.release()})`)}(t);const n=function(e){const t=[];for(const[n,r]of e){const e=r?`${n}/${r}`:n;t.push(e)}return t.join(" ")}(t);return e?`${e} ${n}`:n}const Jo="User-Agent";function es(e){return this instanceof es?(this.v=e,this):new es(e)}function ts(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof es?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function ns(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var rs=n(4492);function is(e){return"function"==typeof e.stream}const os=Symbol("rawContent");function ss(){return ts(this,arguments,(function*(){const e=this.getReader();try{for(;;){const{done:t,value:n}=yield es(e.read());if(t)return yield es(void 0);yield yield es(n)}}finally{e.releaseLock()}}))}function as(e){return e instanceof Uint8Array?rs.Readable.from(Buffer.from(e)):is(e)?as("function"==typeof(r=e)[os]?r[os]():r.stream()):(t=e)instanceof ReadableStream?((n=t)[Symbol.asyncIterator]||(n[Symbol.asyncIterator]=ss.bind(n)),n.values||(n.values=ss.bind(n)),rs.Readable.fromWeb(t)):t;var t,n,r}function cs(e){let t="";for(const[n,r]of e)t+=`${n}: ${r}\r\n`;return t}function us(e){return e instanceof Uint8Array?e.byteLength:is(e)?-1===e.size?void 0:e.size:void 0}const ls="multipartPolicy",hs=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function ds(){return{name:ls,async sendRequest(e,t){var n;if(!e.multipartBody)return t(e);if(e.body)throw new Error("multipartBody and regular body cannot be set at the same time");let r=e.multipartBody.boundary;const i=null!==(n=e.headers.get("Content-Type"))&&void 0!==n?n:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);const[,s,a]=o;if(a&&r&&a!==r)throw new Error(`Multipart boundary was specified as ${a} in the header, but got ${r} in the request body`);return null!=r||(r=a),r?function(e){if(e.length>70)throw new Error(`Multipart boundary "${e}" exceeds maximum length of 70 characters`);if(Array.from(e).some((e=>!hs.has(e))))throw new Error(`Multipart boundary "${e}" contains invalid characters`)}(r):r=`----AzSDKFormBoundary${xo()}`,e.headers.set("Content-Type",`${s}; boundary=${r}`),await async function(e,t,n){const r=[Yo(`--${n}`,"utf-8"),...t.flatMap((e=>[Yo("\r\n","utf-8"),Yo(cs(e.headers),"utf-8"),Yo("\r\n","utf-8"),e.body,Yo(`\r\n--${n}`,"utf-8")])),Yo("--\r\n\r\n","utf-8")],i=function(e){let t=0;for(const n of e){const e=us(n);if(void 0===e)return;t+=e}return t}(r);i&&e.headers.set("Content-Length",i),e.body=await async function(e){return function(){const t=e.map((e=>"function"==typeof e?e():e)).map(as);return rs.Readable.from(function(){return ts(this,arguments,(function*(){var e,n,r,i;for(const c of t)try{for(var o,s=!0,a=(n=void 0,ns(c));!(e=(o=yield es(a.next())).done);s=!0){i=o.value,s=!1;const e=i;yield yield es(e)}}catch(e){n={error:e}}finally{try{s||e||!(r=a.return)||(yield es(r.call(a)))}finally{if(n)throw n.error}}}))}())}}(r)}(e,e.multipartBody.parts,r),e.multipartBody=void 0,t(e)}}}class fs extends Error{constructor(e){super(e),this.name="AbortError"}}function ps(e,t,n){return new Promise(((r,i)=>{let o,s;const a=()=>i(new fs((null==n?void 0:n.abortErrorMsg)?null==n?void 0:n.abortErrorMsg:"The operation was aborted.")),c=()=>{(null==n?void 0:n.abortSignal)&&s&&n.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),c(),a()),(null==n?void 0:n.abortSignal)&&n.abortSignal.aborted)return a();o=setTimeout((()=>{c(),r(t)}),e),(null==n?void 0:n.abortSignal)&&n.abortSignal.addEventListener("abort",s)}))}function ms(e,t){const n=e.headers.get(t);if(!n)return;const r=Number(n);return Number.isNaN(r)?void 0:r}const gs="Retry-After",ys=["retry-after-ms","x-ms-retry-after-ms",gs];function _s(e){if(e&&[429,503].includes(e.status))try{for(const t of ys){const n=ms(e,t);if(0===n||n)return n*(t===gs?1e3:1)}const t=e.headers.get(gs);if(!t)return;const n=Date.parse(t)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch(e){return}}function vs(e={}){var t,n;const r=null!==(t=e.retryDelayInMs)&&void 0!==t?t:1e3,i=null!==(n=e.maxRetryDelayInMs)&&void 0!==n?n:64e3;let o=r;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:n,responseError:r}){const s=!!(h=r)&&("ETIMEDOUT"===h.code||"ESOCKETTIMEDOUT"===h.code||"ECONNREFUSED"===h.code||"ECONNRESET"===h.code||"ENOENT"===h.code||"ENOTFOUND"===h.code),a=s&&e.ignoreSystemErrors,c=function(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}(n),u=c&&e.ignoreHttpStatusCodes,l=n&&(function(e){return Number.isFinite(_s(e))}(n)||!c);var h;if(l||u||a)return{skipStrategy:!0};if(r&&!s&&!c)return{errorToThrow:r};const d=o*Math.pow(2,t),f=Math.min(i,d);var p,m;return o=f/2+(p=0,m=f/2,p=Math.ceil(p),m=Math.floor(m),Math.floor(Math.random()*(m-p+1))+p),{retryAfterInMs:o}}}}const Es=To("core-rest-pipeline retryPolicy");function ws(e,t={maxRetries:3}){const n=t.logger||Es;return{name:"retryPolicy",async sendRequest(r,i){var o,s;let a,c,u=-1;e:for(;;){u+=1,a=void 0,c=void 0;try{n.info(`Retry ${u}: Attempting to send request`,r.requestId),a=await i(r),n.info(`Retry ${u}: Received a response from request`,r.requestId)}catch(e){if(n.error(`Retry ${u}: Received an error from request`,r.requestId),c=e,!e||"RestError"!==c.name)throw e;a=c.response}if(null===(o=r.abortSignal)||void 0===o?void 0:o.aborted)throw n.error(`Retry ${u}: Request aborted.`),new fs;if(u>=(null!==(s=t.maxRetries)&&void 0!==s?s:3)){if(n.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}n.info(`Retry ${u}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||Es;e.info(`Retry ${u}: Processing retry strategy ${t.name}.`);const n=t.retry({retryCount:u,response:a,responseError:c});if(n.skipStrategy){e.info(`Retry ${u}: Skipped.`);continue t}const{errorToThrow:i,retryAfterInMs:o,redirectTo:s}=n;if(i)throw e.error(`Retry ${u}: Retry strategy ${t.name} throws error:`,i),i;if(o||0===o){e.info(`Retry ${u}: Retry strategy ${t.name} retries after ${o}`),await ps(o,void 0,{abortSignal:r.abortSignal});continue e}if(s){e.info(`Retry ${u}: Retry strategy ${t.name} redirects to ${s}`),r.url=s;continue e}}if(c)throw n.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return n.info("None of the retry strategies could work with the received response. Returning it."),a}}}}function bs(e){return e.toLowerCase()}class Ts{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(bs(e),{name:e,value:String(t).trim()})}get(e){var t;return null===(t=this._headersMap.get(bs(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(bs(e))}delete(e){this._headersMap.delete(bs(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const e of this._headersMap.values())t[e.name]=e.value;else for(const[e,n]of this._headersMap)t[e]=n.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(const t of e.values())yield[t.name,t.value]}(this._headersMap)}}function Ss(e){return new Ts(e)}var As=n(6018),Os=n(9201);const Cs=[];let Is=!1;const Rs=new Map;function Ns(e){return process.env[e]?process.env[e]:process.env[e.toLowerCase()]?process.env[e.toLowerCase()]:void 0}function Ps(e){let t;try{t=new URL(e.host)}catch(t){throw new Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}return t.port=String(e.port),e.username&&(t.username=e.username),e.password&&(t.password=e.password),t}function Ds(e,t,n){if(e.agent)return;const r="https:"!==new URL(e.url).protocol;e.tlsSettings&&Io.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");const i=e.headers.toJSON();r?(t.httpProxyAgent||(t.httpProxyAgent=new Os.HttpProxyAgent(n,{headers:i})),e.agent=t.httpProxyAgent):(t.httpsProxyAgent||(t.httpsProxyAgent=new As.HttpsProxyAgent(n,{headers:i})),e.agent=t.httpsProxyAgent)}function ks(e,t){Is||Cs.push(...function(){const e=Ns("NO_PROXY");return Is=!0,e?e.split(",").map((e=>e.trim())).filter((e=>e.length)):[]}());const n=e?Ps(e):function(){const e=function(){if(!process)return;const e=Ns("HTTPS_PROXY"),t=Ns("ALL_PROXY"),n=Ns("HTTP_PROXY");return e||t||n}();return e?new URL(e):void 0}(),r={};return{name:"proxyPolicy",async sendRequest(e,i){var o;return e.proxySettings||!n||function(e,t,n){if(0===t.length)return!1;const r=new URL(e).hostname;if(null==n?void 0:n.has(r))return n.get(r);let i=!1;for(const e of t)"."===e[0]?(r.endsWith(e)||r.length===e.length-1&&r===e.slice(1))&&(i=!0):r===e&&(i=!0);return null==n||n.set(r,i),i}(e.url,null!==(o=null==t?void 0:t.customNoProxyList)&&void 0!==o?o:Cs,(null==t?void 0:t.customNoProxyList)?void 0:Rs)?e.proxySettings&&Ds(e,r,Ps(e.proxySettings)):Ds(e,r,n),i(e)}}}const Ms={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function Ls(e={}){let t=new xs(e.parentContext);return e.span&&(t=t.setValue(Ms.span,e.span)),e.namespace&&(t=t.setValue(Ms.namespace,e.namespace)),t}class xs{constructor(e){this._contextMap=e instanceof xs?new Map(e._contextMap):new Map}setValue(e,t){const n=new xs(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new xs(this);return t._contextMap.delete(e),t}}const Us=n(6308).S;function Fs(){return Us.instrumenterImplementation||(Us.instrumenterImplementation={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:Ls({parentContext:t.tracingContext})}),withContext:(e,t,...n)=>t(...n)}),Us.instrumenterImplementation}function Bs(e){const{namespace:t,packageName:n,packageVersion:r}=e;function i(e,i,o){var s;const a=Fs().startSpan(e,Object.assign(Object.assign({},o),{packageName:n,packageVersion:r,tracingContext:null===(s=null==i?void 0:i.tracingOptions)||void 0===s?void 0:s.tracingContext}));let c=a.tracingContext;const u=a.span;return c.getValue(Ms.namespace)||(c=c.setValue(Ms.namespace,t)),u.setAttribute("az.namespace",c.getValue(Ms.namespace)),{span:u,updatedOptions:Object.assign({},i,{tracingOptions:Object.assign(Object.assign({},null==i?void 0:i.tracingOptions),{tracingContext:c})})}}function o(e,t,...n){return Fs().withContext(e,t,...n)}return{startSpan:i,withSpan:async function(e,t,n,r){const{span:s,updatedOptions:a}=i(e,t,r);try{const e=await o(a.tracingOptions.tracingContext,(()=>Promise.resolve(n(a,s))));return s.setStatus({status:"success"}),e}catch(e){throw s.setStatus({status:"error",error:e}),e}finally{s.end()}},withContext:o,parseTraceparentHeader:function(e){return Fs().parseTraceparentHeader(e)},createRequestHeaders:function(e){return Fs().createRequestHeaders(e)}}}const qs=no.inspect.custom,js=new Go;class Hs extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,this.request=t.request,this.response=t.response,Object.setPrototypeOf(this,Hs.prototype)}[qs](){return`RestError: ${this.message} \n ${js.sanitize(this)}`}}function Ys(e){var t;const n=eo.create();var r;return jo&&(e.tlsOptions&&n.addPolicy((r=e.tlsOptions,{name:"tlsPolicy",sendRequest:async(e,t)=>(e.tlsSettings||(e.tlsSettings=r),t(e))})),n.addPolicy(ks(e.proxyOptions)),n.addPolicy({name:"decompressResponsePolicy",sendRequest:async(e,t)=>("HEAD"!==e.method&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e))})),n.addPolicy({name:"formDataPolicy",async sendRequest(e,t){if(jo&&"undefined"!=typeof FormData&&e.body instanceof FormData&&(e.formData=function(e){var t;const n={};for(const[r,i]of e.entries())null!==(t=n[r])&&void 0!==t||(n[r]=[]),n[r].push(i);return n}(e.body),e.body=void 0),e.formData){const t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?e.body=function(e){const t=new URLSearchParams;for(const[n,r]of Object.entries(e))if(Array.isArray(r))for(const e of r)t.append(n,e.toString());else t.append(n,r.toString());return t.toString()}(e.formData):await async function(e,t){const n=t.headers.get("Content-Type");if(n&&!n.startsWith("multipart/form-data"))return;t.headers.set("Content-Type",null!=n?n:"multipart/form-data");const r=[];for(const[t,n]of Object.entries(e))for(const e of Array.isArray(n)?n:[n])if("string"==typeof e)r.push({headers:Ss({"Content-Disposition":`form-data; name="${t}"`}),body:Yo(e,"utf-8")});else{if(null==e||"object"!=typeof e)throw new Error(`Unexpected value for key ${t}: ${e}. Value should be serialized to string first.`);{const n=e.name||"blob",i=Ss();i.set("Content-Disposition",`form-data; name="${t}"; filename="${n}"`),i.set("Content-Type",e.type||"application/octet-stream"),r.push({headers:i,body:e})}}t.multipartBody={parts:r}}(e.formData,e),e.formData=void 0}return t(e)}},{beforePolicies:[ls]}),n.addPolicy(function(e={}){const t=Zo(e.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:async(e,n)=>(e.headers.has(Jo)||e.headers.set(Jo,t),n(e))}}(e.userAgentOptions)),n.addPolicy(function(e="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:async(t,n)=>(t.headers.has(e)||t.headers.set(e,t.requestId),n(t))}}(null===(t=e.telemetryOptions)||void 0===t?void 0:t.clientRequestIdHeaderName)),n.addPolicy(ds(),{afterPhase:"Deserialize"}),n.addPolicy(function(e={}){var t;return{name:"defaultRetryPolicy",sendRequest:ws([{name:"throttlingRetryStrategy",retry({response:e}){const t=_s(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}},vs(e)],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:3}).sendRequest}}(e.retryOptions),{phase:"Retry"}),n.addPolicy(function(e={}){const t=Zo(e.userAgentPrefix),n=function(){try{return Bs({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:Xo})}catch(e){return void Io.warning(`Error when creating the TracingClient: ${ko(e)}`)}}();return{name:"tracingPolicy",async sendRequest(e,r){var i,o;if(!n||!(null===(i=e.tracingOptions)||void 0===i?void 0:i.tracingContext))return r(e);const{span:s,tracingContext:a}=null!==(o=function(e,t,n){try{const{span:r,updatedOptions:i}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":t.method,"http.url":t.url,requestId:t.requestId}});if(!r.isRecording())return void r.end();n&&r.setAttribute("http.user_agent",n);const o=e.createRequestHeaders(i.tracingOptions.tracingContext);for(const[e,n]of Object.entries(o))t.headers.set(e,n);return{span:r,tracingContext:i.tracingOptions.tracingContext}}catch(e){return void Io.warning(`Skipping creating a tracing span due to an error: ${ko(e)}`)}}(n,e,t))&&void 0!==o?o:{};if(!s||!a)return r(e);try{const t=await n.withContext(a,r,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);const n=t.headers.get("x-ms-request-id");n&&e.setAttribute("serviceRequestId",n),e.setStatus({status:"success"}),e.end()}catch(e){Io.warning(`Skipping tracing span processing due to an error: ${ko(e)}`)}}(s,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:Do(t)?t:void 0}),((n=t)instanceof Hs||Do(n)&&"RestError"===n.name)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(n){Io.warning(`Skipping tracing span processing due to an error: ${ko(n)}`)}var n}(s,e),e}}}}(e.userAgentOptions),{afterPhase:"Retry"}),jo&&n.addPolicy(Ko(e.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(function(e={}){var t;const n=null!==(t=e.logger)&&void 0!==t?t:Io.info,r=new Go({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:"logPolicy",async sendRequest(e,t){if(!n.enabled)return t(e);n(`Request: ${r.sanitize(e)}`);const i=await t(e);return n(`Response status code: ${i.status}`),n(`Headers: ${r.sanitize(i.headers)}`),i}}}(e.loggingOptions),{afterPhase:"Sign"}),n}Hs.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",Hs.PARSE_ERROR="PARSE_ERROR";const Vs=require("node:http"),$s=require("node:https"),zs=require("node:zlib"),Gs={};function Ws(e){return e&&"function"==typeof e.pipe}function Ks(e){return new Promise((t=>{e.on("close",t),e.on("end",t),e.on("error",t)}))}function Qs(e){return e&&"number"==typeof e.byteLength}class Xs extends rs.Transform{_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(e){n(e)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}}class Zs{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,r;const i=new AbortController;let o;if(e.abortSignal){if(e.abortSignal.aborted)throw new fs("The operation was aborted.");o=e=>{"abort"===e.type&&i.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout((()=>{i.abort()}),e.timeout);const s=e.headers.get("Accept-Encoding"),a=(null==s?void 0:s.includes("gzip"))||(null==s?void 0:s.includes("deflate"));let c,u="function"==typeof e.body?e.body():e.body;if(u&&!e.headers.has("Content-Length")){const t=function(e){return e?Buffer.isBuffer(e)?e.length:Ws(e)?null:Qs(e)?e.byteLength:"string"==typeof e?Buffer.from(e).length:null:0}(u);null!==t&&e.headers.set("Content-Length",t)}try{if(u&&e.onUploadProgress){const t=e.onUploadProgress,n=new Xs(t);n.on("error",(e=>{Io.error("Error in upload progress",e)})),Ws(u)?u.pipe(n):n.end(u),u=n}const s=await this.makeRequest(e,i,u),h=function(e){const t=Ss();for(const n of Object.keys(e.headers)){const r=e.headers[n];Array.isArray(r)?r.length>0&&t.set(n,r[0]):r&&t.set(n,r)}return t}(s),d={status:null!==(t=s.statusCode)&&void 0!==t?t:0,headers:h,request:e};if("HEAD"===e.method)return s.resume(),d;c=a?function(e,t){const n=t.get("Content-Encoding");if("gzip"===n){const t=zs.createGunzip();return e.pipe(t),t}if("deflate"===n){const t=zs.createInflate();return e.pipe(t),t}return e}(s,h):s;const f=e.onDownloadProgress;if(f){const e=new Xs(f);e.on("error",(e=>{Io.error("Error in download progress",e)})),c.pipe(e),c=e}return(null===(n=e.streamResponseStatusCodes)||void 0===n?void 0:n.has(Number.POSITIVE_INFINITY))||(null===(r=e.streamResponseStatusCodes)||void 0===r?void 0:r.has(d.status))?d.readableStreamBody=c:d.bodyAsText=await(l=c,new Promise(((e,t)=>{const n=[];l.on("data",(e=>{Buffer.isBuffer(e)?n.push(e):n.push(Buffer.from(e))})),l.on("end",(()=>{e(Buffer.concat(n).toString("utf8"))})),l.on("error",(e=>{e&&"AbortError"===(null==e?void 0:e.name)?t(e):t(new Hs(`Error reading response as text: ${e.message}`,{code:Hs.PARSE_ERROR}))}))}))),d}finally{if(e.abortSignal&&o){let t=Promise.resolve();Ws(u)&&(t=Ks(u));let n=Promise.resolve();Ws(c)&&(n=Ks(c)),Promise.all([t,n]).then((()=>{var t;o&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",o))})).catch((e=>{Io.warning("Error when cleaning up abortListener on httpRequest",e)}))}}var l}makeRequest(e,t,n){var r;const i=new URL(e.url),o="https:"!==i.protocol;if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);const s={agent:null!==(r=e.agent)&&void 0!==r?r:this.getOrCreateAgent(e,o),hostname:i.hostname,path:`${i.pathname}${i.search}`,port:i.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise(((r,i)=>{const a=o?Vs.request(s,r):$s.request(s,r);a.once("error",(t=>{var n;i(new Hs(t.message,{code:null!==(n=t.code)&&void 0!==n?n:Hs.REQUEST_SEND_ERROR,request:e}))})),t.signal.addEventListener("abort",(()=>{const e=new fs("The operation was aborted.");a.destroy(e),i(e)})),n&&Ws(n)?n.pipe(a):n?"string"==typeof n||Buffer.isBuffer(n)?a.end(n):Qs(n)?a.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Io.error("Unrecognized body type",n),i(new Hs("Unrecognized body type"))):a.end()}))}getOrCreateAgent(e,t){var n;const r=e.disableKeepAlive;if(t)return r?Vs.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Vs.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(r&&!e.tlsSettings)return $s.globalAgent;const t=null!==(n=e.tlsSettings)&&void 0!==n?n:Gs;let i=this.cachedHttpsAgents.get(t);return i&&i.options.keepAlive===!r||(Io.info("No cached TLS Agent exist, creating a new Agent"),i=new $s.Agent(Object.assign({keepAlive:!r},t)),this.cachedHttpsAgents.set(t,i)),i}}}class Js{constructor(e){var t,n,r,i,o,s,a;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:Ss(),this.method=null!==(n=e.method)&&void 0!==n?n:"GET",this.timeout=null!==(r=e.timeout)&&void 0!==r?r:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=null!==(i=e.disableKeepAlive)&&void 0!==i&&i,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(o=e.withCredentials)&&void 0!==o&&o,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||xo(),this.allowInsecureConnection=null!==(s=e.allowInsecureConnection)&&void 0!==s&&s,this.enableBrowserStreams=null!==(a=e.enableBrowserStreams)&&void 0!==a&&a}}function ea(e){return new Js(e)}const ta={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function na(e){const{scopes:t,getAccessToken:n,request:r}=e,i={abortSignal:r.abortSignal,tracingOptions:r.tracingOptions},o=await n(t,i);o&&e.request.headers.set("Authorization",`Bearer ${o.token}`)}const ra=n(4637).S;function ia(e,t,n){let r=t.parameterPath;const i=t.mapper;let o;if("string"==typeof r&&(r=[r]),Array.isArray(r)){if(r.length>0)if(i.isConstant)o=i.defaultValue;else{let t=oa(e,r);!t.propertyFound&&n&&(t=oa(n,r));let s=!1;t.propertyFound||(s=i.required||"options"===r[0]&&2===r.length),o=s?i.defaultValue:t.propertyValue}}else{i.required&&(o={});for(const t in r){const s=i.type.modelProperties[t],a=ia(e,{parameterPath:r[t],mapper:s},n);void 0!==a&&(o||(o={}),o[t]=a)}}return o}function oa(e,t){const n={propertyFound:!1};let r=0;for(;r<t.length;++r){const n=t[r];if(!e||!(n in e))break;e=e[n]}return r===t.length&&(n.propertyValue=e,n.propertyFound=!0),n}const sa=Symbol.for("@azure/core-client original request");function aa(e){if(function(e){return sa in e}(e))return aa(e[sa]);let t=ra.operationRequestMap.get(e);return t||(t={},ra.operationRequestMap.set(e,t)),t}const ca=["application/json","text/json"],ua=["application/xml","application/atom+xml"];function la(e){const{parameterPath:t,mapper:n}=e;let r;return r="string"==typeof t?t:Array.isArray(t)?t.join("."):n.serializedName,r}function ha(e={}){const t=Ys(null!=e?e:{});return e.credentialOptions&&t.addPolicy(function(e){var t;const{credential:n,scopes:r,challengeCallbacks:i}=e,o=e.logger||Io,s=Object.assign({authorizeRequest:null!==(t=null==i?void 0:i.authorizeRequest)&&void 0!==t?t:na,authorizeRequestOnChallenge:null==i?void 0:i.authorizeRequestOnChallenge},i),a=n?function(e,t){let n,r=null,i=null;const o=Object.assign(Object.assign({},ta),t),s={get isRefreshing(){return null!==r},get shouldRefresh(){var e;return!s.isRefreshing&&(null!==(e=null==i?void 0:i.expiresOnTimestamp)&&void 0!==e?e:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return null===i||i.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(t,a){var c;return s.isRefreshing||(r=async function(e,t,n){async function r(){if(!(Date.now()<n)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let i=await r();for(;null===i;)await ps(t),i=await r();return i}((()=>e.getToken(t,a)),o.retryIntervalInMs,null!==(c=null==i?void 0:i.expiresOnTimestamp)&&void 0!==c?c:Date.now()).then((e=>(r=null,i=e,n=a.tenantId,i))).catch((e=>{throw r=null,i=null,n=void 0,e}))),r}return async(e,t)=>n!==t.tenantId||Boolean(t.claims)||s.mustRefresh?a(e,t):(s.shouldRefresh&&a(e,t),i)}(n):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let n,i;await s.authorizeRequest({scopes:Array.isArray(r)?r:[r],request:e,getAccessToken:a,logger:o});try{n=await t(e)}catch(e){i=e,n=e.response}if(s.authorizeRequestOnChallenge&&401===(null==n?void 0:n.status)&&function(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(n)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(r)?r:[r],request:e,response:n,getAccessToken:a,logger:o}))return t(e);if(i)throw i;return n}}}({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy(function(e={}){const t=e.stringifyXML;return{name:"serializationPolicy",async sendRequest(e,n){const r=aa(e),i=null==r?void 0:r.operationSpec,o=null==r?void 0:r.operationArguments;return i&&o&&(function(e,t,n){var r,i;if(n.headerParameters)for(const r of n.headerParameters){let i=ia(t,r);if(null!=i||r.mapper.required){i=n.serializer.serialize(r.mapper,i,la(r));const t=r.mapper.headerCollectionPrefix;if(t)for(const n of Object.keys(i))e.headers.set(t+n,i[n]);else e.headers.set(r.mapper.serializedName||la(r),i)}}const o=null===(i=null===(r=t.options)||void 0===r?void 0:r.requestOptions)||void 0===i?void 0:i.customHeaders;if(o)for(const t of Object.keys(o))e.headers.set(t,o[t])}(e,o,i),function(e,t,n,r=function(){throw new Error("XML serialization unsupported!")}){var i,o,s,a,c;const u=null===(i=t.options)||void 0===i?void 0:i.serializerOptions,l={xml:{rootName:null!==(o=null==u?void 0:u.xml.rootName)&&void 0!==o?o:"",includeRoot:null!==(s=null==u?void 0:u.xml.includeRoot)&&void 0!==s&&s,xmlCharKey:null!==(a=null==u?void 0:u.xml.xmlCharKey)&&void 0!==a?a:"_"}},h=l.xml.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){e.body=ia(t,n.requestBody);const i=n.requestBody.mapper,{required:o,serializedName:s,xmlName:a,xmlElementName:u,xmlNamespace:d,xmlNamespacePrefix:f,nullable:p}=i,m=i.type.name;try{if(void 0!==e.body&&null!==e.body||p&&null===e.body||o){const t=la(n.requestBody);e.body=n.serializer.serialize(i,e.body,t,l);const o=m===Zi;if(n.isXML){const t=f?`xmlns:${f}`:"xmlns",n=function(e,t,n,r,i){if(e&&!["Composite","Sequence","Dictionary"].includes(n)){const n={};return n[i.xml.xmlCharKey]=r,n.$={[t]:e},n}return r}(d,t,m,e.body,l);m===Xi?e.body=r(function(e,t,n,r){if(Array.isArray(e)||(e=[e]),!n||!r)return{[t]:e};const i={[t]:e};return i.$={[n]:r},i}(n,u||a||s,t,d),{rootName:a||s,xmlCharKey:h}):o||(e.body=r(n,{rootName:a||s,xmlCharKey:h}))}else{if("String"===m&&((null===(c=n.contentType)||void 0===c?void 0:c.match("text/plain"))||"text"===n.mediaType))return;o||(e.body=JSON.stringify(e.body))}}}catch(e){throw new Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(s,void 0,"  ")}.`)}}else if(n.formDataParameters&&n.formDataParameters.length>0){e.formData={};for(const r of n.formDataParameters){const i=ia(t,r);if(null!=i){const t=r.mapper.serializedName||la(r);e.formData[t]=n.serializer.serialize(r.mapper,i,la(r),l)}}}}(e,o,i,t)),n(e)}}}(e.serializationOptions),{phase:"Serialize"}),t.addPolicy(function(e={}){var t,n,r,i,o,s,a;const c=null!==(n=null===(t=e.expectedContentTypes)||void 0===t?void 0:t.json)&&void 0!==n?n:ca,u=null!==(i=null===(r=e.expectedContentTypes)||void 0===r?void 0:r.xml)&&void 0!==i?i:ua,l=e.parseXML,h=e.serializerOptions,d={xml:{rootName:null!==(o=null==h?void 0:h.xml.rootName)&&void 0!==o?o:"",includeRoot:null!==(s=null==h?void 0:h.xml.includeRoot)&&void 0!==s&&s,xmlCharKey:null!==(a=null==h?void 0:h.xml.xmlCharKey)&&void 0!==a?a:"_"}};return{name:"deserializationPolicy",async sendRequest(e,t){const n=await t(e);return async function(e,t,n,r,i){const o=await async function(e,t,n,r,i){var o;if(!(null===(o=n.request.streamResponseStatusCodes)||void 0===o?void 0:o.has(n.status))&&n.bodyAsText){const o=n.bodyAsText,s=n.headers.get("Content-Type")||"",a=s?s.split(";").map((e=>e.toLowerCase())):[];try{if(0===a.length||a.some((t=>-1!==e.indexOf(t))))return n.parsedBody=JSON.parse(o),n;if(a.some((e=>-1!==t.indexOf(e)))){if(!i)throw new Error("Parsing XML not supported.");const e=await i(o,r.xml);return n.parsedBody=e,n}}catch(e){const t=`Error "${e}" occurred while parsing the response body - ${n.bodyAsText}.`,r=e.code||Hs.PARSE_ERROR;throw new Hs(t,{code:r,statusCode:n.status,request:n.request,response:n})}}return n}(e,t,n,r,i);if(!function(e){const t=aa(e.request),n=null==t?void 0:t.shouldDeserialize;let r;return r=void 0===n||("boolean"==typeof n?n:n(e)),r}(o))return o;const s=aa(o.request),a=null==s?void 0:s.operationSpec;if(!a||!a.responses)return o;const c=function(e){let t;const n=aa(e.request),r=null==n?void 0:n.operationSpec;return r&&(t=(null==n?void 0:n.operationResponseGetter)?null==n?void 0:n.operationResponseGetter(r,e):r.responses[e.status]),t}(o),{error:u,shouldReturnResponse:l}=function(e,t,n,r){var i;const o=200<=e.status&&e.status<300;if(function(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?o:n){if(!n)return{error:null,shouldReturnResponse:!1};if(!n.isError)return{error:null,shouldReturnResponse:!1}}const s=null!=n?n:t.responses.default,a=(null===(i=e.request.streamResponseStatusCodes)||void 0===i?void 0:i.has(e.status))?`Unexpected status code: ${e.status}`:e.bodyAsText,c=new Hs(a,{statusCode:e.status,request:e.request,response:e});if(!s)throw c;const u=s.bodyMapper,l=s.headersMapper;try{if(e.parsedBody){const n=e.parsedBody;let i;if(u){let e=n;if(t.isXML&&u.type.name===Xi){e=[];const t=u.xmlElementName;"object"==typeof n&&t&&(e=n[t])}i=t.serializer.deserialize(u,e,"error.response.parsedBody",r)}const o=n.error||i||n;c.code=o.code,o.message&&(c.message=o.message),u&&(c.response.parsedBody=i)}e.headers&&l&&(c.response.parsedHeaders=t.serializer.deserialize(l,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(t){c.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:c,shouldReturnResponse:!1}}(o,a,c,r);if(u)throw u;if(l)return o;if(c){if(c.bodyMapper){let e=o.parsedBody;a.isXML&&c.bodyMapper.type.name===Xi&&(e="object"==typeof e?e[c.bodyMapper.xmlElementName]:[]);try{o.parsedBody=a.serializer.deserialize(c.bodyMapper,e,"operationRes.parsedBody",r)}catch(e){throw new Hs(`Error ${e} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else"HEAD"===a.httpMethod&&(o.parsedBody=n.status>=200&&n.status<300);c.headersMapper&&(o.parsedHeaders=a.serializer.deserialize(c.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}(c,u,n,d,l)}}}(e.deserializationOptions),{phase:"Deserialize"}),t}function da(e,t){var n,r;const i=e.parsedHeaders;if("HEAD"===e.request.method)return Object.assign(Object.assign({},i),{body:e.parsedBody});const o=t&&t.bodyMapper,s=Boolean(null==o?void 0:o.nullable),a=null==o?void 0:o.type.name;if("Stream"===a)return Object.assign(Object.assign({},i),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody});const c="Composite"===a&&o.type.modelProperties||{},u=Object.keys(c).some((e=>""===c[e].serializedName));if("Sequence"===a||u){const t=null!==(n=e.parsedBody)&&void 0!==n?n:[];for(const n of Object.keys(c))c[n].serializedName&&(t[n]=null===(r=e.parsedBody)||void 0===r?void 0:r[n]);if(i)for(const e of Object.keys(i))t[e]=i[e];return!s||e.parsedBody||i||0!==Object.getOwnPropertyNames(c).length?t:null}return function(e){const t=Object.assign(Object.assign({},e.headers),e.body);return e.hasNullableType&&0===Object.getOwnPropertyNames(t).length?e.shouldWrapBody?{body:null}:null:e.shouldWrapBody?Object.assign(Object.assign({},e.headers),{body:e.body}):t}({body:e.parsedBody,headers:i,hasNullableType:s,shouldWrapBody:(l=e.parsedBody,h=a,"Composite"!==h&&"Dictionary"!==h&&("string"==typeof l||"number"==typeof l||"boolean"==typeof l||null!==(null==h?void 0:h.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==l))});var l,h}let fa;const pa={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function ma(e,t,n,r){const i=function(e,t,n){var r;const i=new Map;if(null===(r=e.urlParameters)||void 0===r?void 0:r.length)for(const r of e.urlParameters){let o=ia(t,r,n);const s=la(r);o=e.serializer.serialize(r.mapper,o,s),r.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${r.mapper.serializedName||s}}`,o)}return i}(t,n,r);let o=!1,s=ga(e,i);if(t.path){let e=ga(t.path,i);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),e.includes("://")?(s=e,o=!0):s=function(e,t){if(!t)return e;const n=new URL(e);let r=n.pathname;r.endsWith("/")||(r=`${r}/`),t.startsWith("/")&&(t=t.substring(1));const i=t.indexOf("?");if(-1!==i){const e=t.substring(0,i),o=t.substring(i+1);r+=e,o&&(n.search=n.search?`${n.search}&${o}`:o)}else r+=t;return n.pathname=r,n.toString()}(s,e)}const{queryParams:a,sequenceParams:c}=function(e,t,n){var r;const i=new Map,o=new Set;if(null===(r=e.queryParameters)||void 0===r?void 0:r.length)for(const r of e.queryParameters){"Sequence"===r.mapper.type.name&&r.mapper.serializedName&&o.add(r.mapper.serializedName);let s=ia(t,r,n);if(null!=s||r.mapper.required){s=e.serializer.serialize(r.mapper,s,la(r));const t=r.collectionFormat?pa[r.collectionFormat]:"";if(Array.isArray(s)&&(s=s.map((e=>null==e?"":e))),"Multi"===r.collectionFormat&&0===s.length)continue;!Array.isArray(s)||"SSV"!==r.collectionFormat&&"TSV"!==r.collectionFormat||(s=s.join(t)),r.skipEncoding||(s=Array.isArray(s)?s.map((e=>encodeURIComponent(e))):encodeURIComponent(s)),!Array.isArray(s)||"CSV"!==r.collectionFormat&&"Pipes"!==r.collectionFormat||(s=s.join(t)),i.set(r.mapper.serializedName||la(r),s)}}return{queryParams:i,sequenceParams:o}}(t,n,r);return s=function(e,t,n,r=!1){if(0===t.size)return e;const i=new URL(e),o=function(e){const t=new Map;if(!e||"?"!==e[0])return t;const n=(e=e.slice(1)).split("&");for(const e of n){const[n,r]=e.split("=",2),i=t.get(n);i?Array.isArray(i)?i.push(r):t.set(n,[i,r]):t.set(n,r)}return t}(i.search);for(const[e,i]of t){const t=o.get(e);if(Array.isArray(t))if(Array.isArray(i)){t.push(...i);const n=new Set(t);o.set(e,Array.from(n))}else t.push(i);else t?(Array.isArray(i)?i.unshift(t):n.has(e)&&o.set(e,[t,i]),r||o.set(e,i)):o.set(e,i)}const s=[];for(const[e,t]of o)if("string"==typeof t)s.push(`${e}=${t}`);else if(Array.isArray(t))for(const n of t)s.push(`${e}=${n}`);else s.push(`${e}=${t}`);return i.search=s.length?`?${s.join("&")}`:"",i.toString()}(s,a,c,o),s}function ga(e,t){let n=e;for(const[e,r]of t)n=n.split(e).join(r);return n}const ya=To("core-client"),_a=new WeakMap,va=new WeakMap;class Ea{constructor(){this.onabort=null,_a.set(this,[]),va.set(this,!1)}get aborted(){if(!va.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return va.get(this)}static get none(){return new Ea}addEventListener(e,t){if(!_a.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");_a.get(this).push(t)}removeEventListener(e,t){if(!_a.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const n=_a.get(this),r=n.indexOf(t);r>-1&&n.splice(r,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function wa(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);const t=_a.get(e);t&&t.slice().forEach((t=>{t.call(e,{type:"abort"})})),va.set(e,!0)}class ba extends Error{constructor(e){super(e),this.name="AbortError"}}class Ta{constructor(e){if(this._signal=new Ea,e){Array.isArray(e)||(e=arguments);for(const t of e)t.aborted?this.abort():t.addEventListener("abort",(()=>{this.abort()}))}}get signal(){return this._signal}abort(){wa(this._signal)}static timeout(e){const t=new Ea,n=setTimeout(wa,e,t);return"function"==typeof n.unref&&n.unref(),t}}const Sa="CredentialUnavailableError";class Aa extends Error{constructor(e){super(e),this.name=Sa}}const Oa="AuthenticationError";class Ca extends Error{constructor(e,t){let n={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(function(e){return e&&"string"==typeof e.error&&"string"==typeof e.error_description}(t))n=Na(t);else if("string"==typeof t)try{n=Na(JSON.parse(t))}catch(r){n=400===e?{error:"authority_not_found",errorDescription:"The specified authority URL was not found."}:{error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:\n\n${t}`}}else n={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${n.error} Status code: ${e}\nMore details:\n${n.errorDescription}`),this.statusCode=e,this.errorResponse=n,this.name=Oa}}const Ia="AggregateAuthenticationError";class Ra extends Error{constructor(e,t){super(`${t}\n${e.join("\n")}`),this.errors=e,this.name=Ia}}function Na(e){return{error:e.error,errorDescription:e.error_description,correlationId:e.correlation_id,errorCodes:e.error_codes,timestamp:e.timestamp,traceId:e.trace_id}}class Pa extends Error{constructor(e){super(e.message),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}}const Da="04b07795-8ddb-461a-bbee-02f9e1bf7b46";var ka;!function(e){e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com"}(ka||(ka={}));const Ma=ka.AzurePublicCloud,La=Bs({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:"2.1.0"}),xa=To("identity");function Ua(e){return`SUCCESS. Scopes: ${Array.isArray(e)?e.join(", "):e}.`}function Fa(e,t){let n="ERROR.";return(null==e?void 0:e.length)&&(n+=` Scopes: ${Array.isArray(e)?e.join(", "):e}.`),`${n} Error message: ${"string"==typeof t?t:t.message}.`}function Ba(e,t,n=xa){const r=t?`${t.fullTitle} ${e}`:e;return{title:e,fullTitle:r,info:function(e){n.info(`${r} =>`,e)},warning:function(e){n.warning(`${r} =>`,e)}}}function qa(e,t=xa){const n=Ba(e,void 0,t);return Object.assign(Object.assign({},n),{parent:t,getToken:Ba("=> getToken()",n,t)})}const ja="noCorrelationId";class Ha extends class{constructor(e={}){var t,n;if(this._requestContentType=e.requestContentType,this._endpoint=null!==(t=e.endpoint)&&void 0!==t?t:e.baseUri,e.baseUri&&ya.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(fa||(fa=new Zs),fa),this.pipeline=e.pipeline||function(e){const t=function(e){if(e.credentialScopes)return e.credentialScopes;if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(e),n=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return ha(Object.assign(Object.assign({},e),{credentialOptions:n}))}(e),null===(n=e.additionalPolicies)||void 0===n?void 0:n.length)for(const{policy:t,position:n}of e.additionalPolicies){const e="perRetry"===n?"Sign":void 0;this.pipeline.addPolicy(t,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){const n=t.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const r=ea({url:ma(n,t,e,this)});r.method=t.httpMethod;const i=aa(r);i.operationSpec=t,i.operationArguments=e;const o=t.contentType||this._requestContentType;o&&t.requestBody&&r.headers.set("Content-Type",o);const s=e.options;if(s){const e=s.requestOptions;e&&(e.timeout&&(r.timeout=e.timeout),e.onUploadProgress&&(r.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(r.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(i.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(r.allowInsecureConnection=!0)),s.abortSignal&&(r.abortSignal=s.abortSignal),s.tracingOptions&&(r.tracingOptions=s.tracingOptions)}this._allowInsecureConnection&&(r.allowInsecureConnection=!0),void 0===r.streamResponseStatusCodes&&(r.streamResponseStatusCodes=function(e){const t=new Set;for(const n in e.responses){const r=e.responses[n];r.bodyMapper&&r.bodyMapper.type.name===Zi&&t.add(Number(n))}return t}(t));try{const e=await this.sendRequest(r),n=da(e,t.responses[e.status]);return(null==s?void 0:s.onResponse)&&s.onResponse(e,n),n}catch(e){if("object"==typeof e&&(null==e?void 0:e.response)){const n=e.response,r=da(n,t.responses[e.statusCode]||t.responses.default);e.details=r,(null==s?void 0:s.onResponse)&&s.onResponse(n,r,e)}throw e}}}{constructor(e){var t,n;const r="azsdk-js-identity/2.1.0",i=(null===(t=null==e?void 0:e.userAgentOptions)||void 0===t?void 0:t.userAgentPrefix)?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,o=function(e){let t=null==e?void 0:e.authorityHost;return Ho&&(t=null!=t?t:process.env.AZURE_AUTHORITY_HOST),null!=t?t:Ma}(e);if(!o.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:i},baseUri:o})),this.authorityHost=o,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=null===(n=null==e?void 0:e.loggingOptions)||void 0===n?void 0:n.allowLoggingAccountIdentifiers}async sendTokenRequest(e,t){xa.info(`IdentityClient: sending token request to [${e.url}]`);const n=await this.sendRequest(e);if(t=t||(e=>Date.now()+1e3*e.expires_in),!n.bodyAsText||200!==n.status&&201!==n.status){const e=new Ca(n.status,n.bodyAsText);throw xa.warning(`IdentityClient: authentication error. HTTP status: ${n.status}, ${e.errorResponse.errorDescription}`),e}{const r=JSON.parse(n.bodyAsText);if(!r.access_token)return null;this.logIdentifiers(n);const i={accessToken:{token:r.access_token,expiresOnTimestamp:t(r)},refreshToken:r.refresh_token};return xa.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}}async refreshAccessToken(e,t,n,r,i,o,s={}){if(void 0===r)return null;xa.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${n} started`);const a={grant_type:"refresh_token",client_id:t,refresh_token:r,scope:n};void 0!==i&&(a.client_secret=i);const c=new URLSearchParams(a);return La.withSpan("IdentityClient.refreshAccessToken",s,(async n=>{try{const r=function(e){return"adfs"===e?"oauth2/token":"oauth2/v2.0/token"}(e),i=ea({url:`${this.authorityHost}/${e}/${r}`,method:"POST",body:c.toString(),abortSignal:s.abortSignal,headers:Ss({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:n.tracingOptions}),a=await this.sendTokenRequest(i,o);return xa.info(`IdentityClient: refreshed token for client ID: ${t}`),a}catch(e){if(e.name===Oa&&"interaction_required"===e.errorResponse.error)return xa.info(`IdentityClient: interaction required for client ID: ${t}`),null;throw xa.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${e}`),e}}))}generateAbortSignal(e){const t=new Ta,n=this.abortControllers.get(e)||[];n.push(t),this.abortControllers.set(e,n);const r=t.signal.onabort;return t.signal.onabort=(...t)=>{this.abortControllers.set(e,void 0),r&&r(...t)},t.signal}abortRequests(e){const t=e||ja,n=[...this.abortControllers.get(t)||[],...this.abortControllers.get(ja)||[]];if(n.length){for(const e of n)e.abort();this.abortControllers.set(t,void 0)}}getCorrelationId(e){var t;const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.split("&").map((e=>e.split("="))).find((([e])=>"client-request-id"===e));return n&&n.length&&n[1]||ja}async sendGetRequestAsync(e,t){const n=ea({url:e,method:"GET",body:null==t?void 0:t.body,headers:Ss(null==t?void 0:t.headers),abortSignal:this.generateAbortSignal(ja)}),r=await this.sendRequest(n);return this.logIdentifiers(r),{body:r.bodyAsText?JSON.parse(r.bodyAsText):void 0,headers:r.headers.toJSON(),status:r.status}}async sendPostRequestAsync(e,t){const n=ea({url:e,method:"POST",body:null==t?void 0:t.body,headers:Ss(null==t?void 0:t.headers),abortSignal:this.generateAbortSignal(this.getCorrelationId(t))}),r=await this.sendRequest(n);return this.logIdentifiers(r),{body:r.bodyAsText?JSON.parse(r.bodyAsText):void 0,headers:r.headers.toJSON(),status:r.status}}logIdentifiers(e){if(this.allowLoggingAccountIdentifiers&&e.bodyAsText)try{const t=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!t)return;const n=t.split(".")[1],{appid:r,upn:i,tid:o,oid:s}=JSON.parse(Buffer.from(n,"base64").toString("utf8"));xa.info(`[Authenticated account] Client ID: ${r}. Tenant ID: ${o}. User Principal Name: ${i||"No User Principal Name available"}. Object ID (user): ${s}`)}catch(e){xa.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",e.message)}}}function Ya(e,t){if(!t.match(/^[0-9a-zA-Z-.:/]+$/)){const t=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://docs.microsoft.com/partner-center/find-ids-and-domain-names.");throw e.info(Fa("",t)),t}}function Va(e,t,n){return t?(Ya(e,t),t):(n||(n=Da),n!==Da?"common":"organizations")}var $a=function(e,t){return $a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},$a(e,t)};function za(e,t){function n(){this.constructor=e}$a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ga,Wa,Ka,Qa,Xa,Za,Ja,ec,tc,nc,rc,ic,oc,sc,ac,cc,uc,lc,hc,dc,fc,pc="";!function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s]}(["openid","profile","offline_access"],["email"]),function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox",e.WWWAuthenticate="WWW-Authenticate",e.AuthenticationInfo="Authentication-Info",e.X_MS_REQUEST_ID="x-ms-request-id"}(Ga||(Ga={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account",e.ACTIVE_ACCOUNT_FILTERS="active-account-filters"}(Wa||(Wa={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(Ka||(Ka={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_APP_NAME="x-app-name",e.X_APP_VER="x-app-ver",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox",e.RETURN_SPA_CODE="return_spa_code",e.NATIVE_BROKER="nativebroker",e.LOGOUT_HINT="logout_hint"}(Qa||(Qa={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(Xa||(Xa={})),function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(Za||(Za={})),function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(Ja||(Ja={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(ec||(ec={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(tc||(tc={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(nc||(nc={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(rc||(rc={})),function(e){e.ACCOUNT="Account",e.CREDENTIAL="Credential",e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.REFRESH_TOKEN="RefreshToken",e.APP_METADATA="AppMetadata",e.TEMPORARY="TempCache",e.TELEMETRY="Telemetry",e.UNDEFINED="Undefined",e.THROTTLING="Throttling"}(ic||(ic={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(oc||(oc={})),function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network",e.HARDCODED_VALUES="hardcoded_values"}(sc||(sc={})),function(e){e.BEARER="Bearer",e.POP="pop",e.SSH="ssh-cert"}(ac||(ac={})),function(e){e.username="username",e.password="password"}(cc||(cc={})),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(uc||(uc={})),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(lc||(lc={})),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}(hc||(hc={})),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4"}(dc||(dc={})),function(e){e.Jwt="JWT",e.Jwk="JWK"}(fc||(fc={}));var mc,gc="unexpected_error",yc="Unexpected error in authentication.",_c="post_request_failed",vc="Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details.",Ec=function(e){function t(n,r,i){var o=this,s=r?n+": "+r:n;return o=e.call(this,s)||this,Object.setPrototypeOf(o,t.prototype),o.errorCode=n||pc,o.errorMessage=r||pc,o.subError=i||pc,o.name="AuthError",o}return za(t,e),t.prototype.setCorrelationId=function(e){this.correlationId=e},t.createUnexpectedError=function(e){return new t(gc,yc+": "+e)},t.createPostRequestFailed=function(e){return new t(_c,vc+": "+e)},t}(Error),wc="client_info_decoding_error",bc="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",Tc="client_info_empty_error",Sc="The client info was empty. Please review the trace to determine the root cause.",Ac="token_parsing_error",Oc="Token cannot be parsed. Please review stack trace to determine root cause.",Cc="null_or_empty_token",Ic="The token is null or empty. Please review the trace to determine the root cause.",Rc="endpoints_resolution_error",Nc="Error: could not resolve endpoints. Please check network and try again.",Pc="network_error",Dc="Network request failed. Please check network trace to determine root cause.",kc="openid_config_error",Mc="Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",Lc="hash_not_deserialized",xc="The hash parameters could not be deserialized. Please review the trace to determine the root cause.",Uc="invalid_state",Fc="State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState().",Bc="state_mismatch",qc="State mismatch error. Please check your network. Continued requests may cause cache overflow.",jc="state_not_found",Hc="State not found",Yc="nonce_mismatch",Vc="Nonce mismatch error. This may be caused by a race condition in concurrent requests.",$c="nonce_not_found",zc="nonce not found",Gc="auth_time_not_found",Wc="Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",Kc="max_age_transpired",Qc="Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",Xc="multiple_matching_tokens",Zc="The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",Jc="multiple_matching_accounts",eu="The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",tu="multiple_matching_appMetadata",nu="The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",ru="request_cannot_be_made",iu="Token request cannot be made without authorization code or refresh token.",ou="cannot_append_empty_scope",su="Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info.",au="cannot_remove_empty_scope",cu="Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info.",uu="cannot_append_scopeset",lu="Cannot append ScopeSet due to error.",hu="empty_input_scopeset",du="Empty input ScopeSet cannot be processed.",fu="device_code_polling_cancelled",pu="Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",mu="device_code_expired",gu="Device code is expired.",yu="device_code_unknown_error",_u="Device code stopped polling for unknown reasons.",vu="no_account_in_silent_request",Eu="Please pass an account object, silent flow is not supported without account information",wu="invalid_cache_record",bu="Cache record object was null or undefined.",Tu="invalid_cache_environment",Su="Invalid environment when attempting to create cache entry",Au="no_account_found",Ou="No account found in cache for given key.",Cu="no cache plugin set on CacheManager",Iu="ICachePlugin needs to be set before using readFromStorage or writeFromStorage",Ru="no_crypto_object",Nu="No crypto object detected. This is required for the following operation: ",Pu="invalid_cache_type",Du="Invalid cache type",ku="unexpected_account_type",Mu="Unexpected account type.",Lu="unexpected_credential_type",xu="Unexpected credential type.",Uu="invalid_assertion",Fu="Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",Bu="invalid_client_credential",qu="Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",ju="token_refresh_required",Hu="Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",Yu="user_timeout_reached",Vu="User defined timeout for device code polling reached",$u="token_claims_cnf_required_for_signedjwt",zu="Cannot generate a POP jwt if the token_claims are not populated",Gu="authorization_code_missing_from_server_response",Wu="Server response does not contain an authorization code to proceed",Ku="binding_key_not_removed",Qu="Could not remove the credential's binding key from storage.",Xu="end_session_endpoint_not_supported",Zu="Provided authority does not support logout.",Ju="key_id_missing",el="A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",tl=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientAuthError",Object.setPrototypeOf(i,t.prototype),i}return za(t,e),t.createClientInfoDecodingError=function(e){return new t(wc,bc+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(Tc,""+Sc)},t.createTokenParsingError=function(e){return new t(Ac,Oc+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(Cc,Ic+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t(Rc,Nc+" Detail: "+e)},t.createNetworkError=function(e,n){return new t(Pc,Dc+" | Fetch client threw: "+n+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(kc,Mc+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(Lc,xc+" Given Object: "+e)},t.createInvalidStateError=function(e,n){return new t(Uc,Fc+" Invalid State: "+e+", Root Err: "+n)},t.createStateMismatchError=function(){return new t(Bc,qc)},t.createStateNotFoundError=function(e){return new t(jc,Hc+":  "+e)},t.createNonceMismatchError=function(){return new t(Yc,Vc)},t.createAuthTimeNotFoundError=function(){return new t(Gc,Wc)},t.createMaxAgeTranspiredError=function(){return new t(Kc,Qc)},t.createNonceNotFoundError=function(e){return new t($c,zc+":  "+e)},t.createMultipleMatchingTokensInCacheError=function(){return new t(Xc,Zc+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(Jc,eu)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(tu,nu)},t.createTokenRequestCannotBeMadeError=function(){return new t(ru,iu)},t.createAppendEmptyScopeToSetError=function(e){return new t(ou,su+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(au,cu+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(uu,lu+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(hu,""+du)},t.createDeviceCodeCancelledError=function(){return new t(fu,""+pu)},t.createDeviceCodeExpiredError=function(){return new t(mu,""+gu)},t.createDeviceCodeUnknownError=function(){return new t(yu,""+_u)},t.createNoAccountInSilentRequestError=function(){return new t(vu,""+Eu)},t.createNullOrUndefinedCacheRecord=function(){return new t(wu,bu)},t.createInvalidCacheEnvironmentError=function(){return new t(Tu,Su)},t.createNoAccountFoundError=function(){return new t(Au,Ou)},t.createCachePluginError=function(){return new t(Cu,""+Iu)},t.createNoCryptoObjectError=function(e){return new t(Ru,""+Nu+e)},t.createInvalidCacheTypeError=function(){return new t(Pu,""+Du)},t.createUnexpectedAccountTypeError=function(){return new t(ku,""+Mu)},t.createUnexpectedCredentialTypeError=function(){return new t(Lu,""+xu)},t.createInvalidAssertionError=function(){return new t(Uu,""+Fu)},t.createInvalidCredentialError=function(){return new t(Bu,""+qu)},t.createRefreshRequiredError=function(){return new t(ju,Hu)},t.createUserTimeoutReachedError=function(){return new t(Yu,Vu)},t.createTokenClaimsRequiredError=function(){return new t($u,zu)},t.createNoAuthCodeInServerResponseError=function(){return new t(Gu,Wu)},t.createBindingKeyNotRemovedError=function(){return new t(Ku,Qu)},t.createLogoutNotSupportedError=function(){return new t(Xu,Zu)},t.createKeyIdMissingError=function(){return new t(Ju,el)},t}(Ec),nl=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw tl.createTokenNullOrEmptyError(t);var n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw tl.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:n[1],JWSPayload:n[2],JWSSig:n[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var n=JSON.parse(t);return 0===Object.keys(n).length}catch(e){}return!0},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t={},n=e.split("&"),r=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return n.forEach((function(e){if(e.trim()){var n=e.split(/=(.+)/g,2),i=n[0],o=n[1];i&&o&&(t[r(i)]=r(o))}})),t},e.trimArrayEntries=function(e){return e.map((function(e){return e.trim()}))},e.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!e.isEmpty(t)}))},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(e){return null}},e.matchPattern=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)},e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(mc||(mc={})),function(){function e(e,t,n){this.level=mc.Info,this.localCallback=e.loggerCallback||function(){},this.piiLoggingEnabled=e.piiLoggingEnabled||!1,this.level="number"==typeof e.logLevel?e.logLevel:mc.Info,this.correlationId=e.correlationId||pc,this.packageName=t||pc,this.packageVersion=n||pc}e.prototype.clone=function(t,n,r){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},t,n)},e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var n=(new Date).toUTCString(),r=(nl.isEmpty(t.correlationId)?nl.isEmpty(this.correlationId)?"["+n+"]":"["+n+"] : ["+this.correlationId+"]":"["+n+"] : ["+t.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+mc[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,r,t.containsPii||!1)}},e.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:mc.Error,containsPii:!1,correlationId:t||pc})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:mc.Error,containsPii:!0,correlationId:t||pc})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:mc.Warning,containsPii:!1,correlationId:t||pc})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:mc.Warning,containsPii:!0,correlationId:t||pc})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:mc.Info,containsPii:!1,correlationId:t||pc})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:mc.Info,containsPii:!0,correlationId:t||pc})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:mc.Verbose,containsPii:!1,correlationId:t||pc})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:mc.Verbose,containsPii:!0,correlationId:t||pc})},e.prototype.trace=function(e,t){this.logMessage(e,{logLevel:mc.Trace,containsPii:!1,correlationId:t||pc})},e.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:mc.Trace,containsPii:!0,correlationId:t||pc})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1}}();const rl=new Uint8Array(256);let il=rl.length;function ol(){return il>rl.length-16&&(Vr().randomFillSync(rl),il=0),rl.slice(il,il+=16)}const sl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,al=[];for(let e=0;e<256;++e)al.push((e+256).toString(16).substr(1));const cl=function(e,t=0){const n=(al[e[t+0]]+al[e[t+1]]+al[e[t+2]]+al[e[t+3]]+"-"+al[e[t+4]]+al[e[t+5]]+"-"+al[e[t+6]]+al[e[t+7]]+"-"+al[e[t+8]]+al[e[t+9]]+"-"+al[e[t+10]]+al[e[t+11]]+al[e[t+12]]+al[e[t+13]]+al[e[t+14]]+al[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&sl.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},ul=function(e,t,n){const r=(e=e||{}).random||(e.rng||ol)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return cl(r)};function ll(e,t){return t||(t=Ma),new RegExp(`${e}/?$`).test(t)?t:t.endsWith("/")?t+e:`${t}/${e}`}function hl(e,t){return"adfs"===e&&t?[t]:[]}const dl=(e,t=(Ho?"Node":"Browser"))=>(n,r,i)=>{if(!i)switch(n){case mc.Error:return void e.info(`MSAL ${t} V2 error: ${r}`);case mc.Info:return void e.info(`MSAL ${t} V2 info message: ${r}`);case mc.Verbose:return void e.info(`MSAL ${t} V2 verbose message: ${r}`);case mc.Warning:return void e.info(`MSAL ${t} V2 warning: ${r}`)}};function fl(e){const[t]=e.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[];return Object.assign(Object.assign({},e),{localAccountId:e.homeAccountId,environment:t})}function pl(e,t){return{authority:ll(t.tenantId,t.environment),homeAccountId:t.homeAccountId,tenantId:t.tenantId||"common",username:t.username,clientId:e,version:"1.0"}}function ml(e){return JSON.stringify(e)}function gl(e){const t=JSON.parse(e);if(t.version&&"1.0"!==t.version)throw Error("Unsupported AuthenticationRecord version");return t}function yl(e,t){if(!(null==t?void 0:t.tenantId))return e;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH)throw new Error("A getToken request was attempted with a tenant different than the tenant configured at the initialization of the credential, but multi-tenant authentication has been disabled by the environment variable AZURE_IDENTITY_DISABLE_MULTITENANTAUTH.");if("adfs"===e)throw new Error("A new tenant Id can't be assigned through the GetTokenOptions when a credential has been originally configured to use the tenant `adfs`.");return null==t?void 0:t.tenantId}var _l;let vl;!function(e){e.AutoDiscoverRegion="AutoDiscoverRegion",e.USWest="westus",e.USWest2="westus2",e.USCentral="centralus",e.USEast="eastus",e.USEast2="eastus2",e.USNorthCentral="northcentralus",e.USSouthCentral="southcentralus",e.USWestCentral="westcentralus",e.CanadaCentral="canadacentral",e.CanadaEast="canadaeast",e.BrazilSouth="brazilsouth",e.EuropeNorth="northeurope",e.EuropeWest="westeurope",e.UKSouth="uksouth",e.UKWest="ukwest",e.FranceCentral="francecentral",e.FranceSouth="francesouth",e.SwitzerlandNorth="switzerlandnorth",e.SwitzerlandWest="switzerlandwest",e.GermanyNorth="germanynorth",e.GermanyWestCentral="germanywestcentral",e.NorwayWest="norwaywest",e.NorwayEast="norwayeast",e.AsiaEast="eastasia",e.AsiaSouthEast="southeastasia",e.JapanEast="japaneast",e.JapanWest="japanwest",e.AustraliaEast="australiaeast",e.AustraliaSouthEast="australiasoutheast",e.AustraliaCentral="australiacentral",e.AustraliaCentral2="australiacentral2",e.IndiaCentral="centralindia",e.IndiaSouth="southindia",e.IndiaWest="westindia",e.KoreaSouth="koreasouth",e.KoreaCentral="koreacentral",e.UAECentral="uaecentral",e.UAENorth="uaenorth",e.SouthAfricaNorth="southafricanorth",e.SouthAfricaWest="southafricawest",e.ChinaNorth="chinanorth",e.ChinaEast="chinaeast",e.ChinaNorth2="chinanorth2",e.ChinaEast2="chinaeast2",e.GermanyCentral="germanycentral",e.GermanyNorthEast="germanynortheast",e.GovernmentUSVirginia="usgovvirginia",e.GovernmentUSIowa="usgoviowa",e.GovernmentUSArizona="usgovarizona",e.GovernmentUSTexas="usgovtexas",e.GovernmentUSDodEast="usdodeast",e.GovernmentUSDodCentral="usdodcentral"}(_l||(_l={}));const El={setPersistence(e){vl=e}};class wl extends class{constructor(e){this.logger=e.logger,this.account=e.authenticationRecord}generateUuid(){return ul()}handleResult(e,t,n,r){return(null==n?void 0:n.account)&&(this.account=pl(t,n.account)),function(e,t,n,r){const i=n=>(t.getToken.info(n),new Pa({scopes:Array.isArray(e)?e:[e],getTokenOptions:r,message:n}));if(!n)throw i("No response");if(!n.expiresOn)throw i('Response had no "expiresOn" property.');if(!n.accessToken)throw i('Response had no "accessToken" property.')}(e,this.logger,n,r),this.logger.getToken.info(Ua(e)),{token:n.accessToken,expiresOnTimestamp:n.expiresOn.getTime()}}handleError(e,t,n){if("AuthError"===t.name||"ClientAuthError"===t.name||"BrowserAuthError"===t.name){const n=t;switch(n.errorCode){case"endpoints_resolution_error":return this.logger.info(Fa(e,t.message)),new Aa(t.message);case"device_code_polling_cancelled":return new ba("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":this.logger.info(Fa(e,`Authentication returned errorCode ${n.errorCode}`));break;default:this.logger.info(Fa(e,`Failed to acquire token: ${t.message}`))}}return"ClientConfigurationError"===t.name||"BrowserConfigurationAuthError"===t.name||"AbortError"===t.name?t:new Pa({scopes:e,getTokenOptions:n,message:t.message})}}{constructor(e){var t,n,r;if(super(e),this.requiresConfidential=!1,this.msalConfig=this.defaultNodeMsalConfig(e),this.tenantId=Va(e.logger,e.tenantId,e.clientId),this.clientId=this.msalConfig.auth.clientId,(null==e?void 0:e.getAssertion)&&(this.getAssertion=e.getAssertion),void 0!==vl&&(null===(t=e.tokenCachePersistenceOptions)||void 0===t?void 0:t.enabled))this.createCachePlugin=()=>vl(e.tokenCachePersistenceOptions);else if(null===(n=e.tokenCachePersistenceOptions)||void 0===n?void 0:n.enabled)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));this.azureRegion=null!==(r=e.regionalAuthority)&&void 0!==r?r:process.env.AZURE_REGIONAL_AUTHORITY_NAME,this.azureRegion===_l.AutoDiscoverRegion&&(this.azureRegion="AUTO_DISCOVER")}defaultNodeMsalConfig(e){const t=e.clientId||Da,n=Va(e.logger,e.tenantId,e.clientId);this.authorityHost=e.authorityHost||process.env.AZURE_AUTHORITY_HOST;const r=ll(n,this.authorityHost);this.identityClient=new Ha(Object.assign(Object.assign({},e.tokenCredentialOptions),{authorityHost:r,loggingOptions:e.loggingOptions}));let i=["cp1"];return process.env.AZURE_IDENTITY_DISABLE_CP1&&(i=[]),{auth:{clientId:t,authority:r,knownAuthorities:hl(n,r),clientCapabilities:i},system:{networkClient:this.identityClient,loggerOptions:{loggerCallback:dl(e.logger)}}}}async init(e){if((null==e?void 0:e.abortSignal)&&e.abortSignal.addEventListener("abort",(()=>{this.identityClient.abortRequests(e.correlationId)})),!this.publicApp&&!this.confidentialApp)if(void 0!==this.createCachePlugin&&(this.msalConfig.cache={cachePlugin:await this.createCachePlugin()}),this.publicApp=new Wi(this.msalConfig),this.getAssertion&&(this.msalConfig.auth.clientAssertion=await this.getAssertion()),this.msalConfig.auth.clientSecret||this.msalConfig.auth.clientAssertion||this.msalConfig.auth.clientCertificate)this.confidentialApp=new Qi(this.msalConfig);else if(this.requiresConfidential)throw new Error("Unable to generate the MSAL confidential client. Missing either the client's secret, certificate or assertion.")}withCancellation(e,t,n){return new Promise(((r,i)=>{e.then((e=>r(e))).catch(i),t&&t.addEventListener("abort",(()=>{null==n||n()}))}))}async getActiveAccount(){var e,t,n;if(this.account)return this.account;const r=null!==(t=null===(e=this.confidentialApp)||void 0===e?void 0:e.getTokenCache())&&void 0!==t?t:null===(n=this.publicApp)||void 0===n?void 0:n.getTokenCache(),i=await(null==r?void 0:r.getAllAccounts());if(i){if(1===i.length)return this.account=pl(this.clientId,i[0]),this.account;this.logger.info('More than one account was found authenticated for this Client ID and Tenant ID.\nHowever, no "authenticationRecord" has been provided for this credential,\ntherefore we\'re unable to pick between these accounts.\nA new login attempt will be requested, to ensure the correct account is picked.\nTo work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing a credential to prevent this from happening.')}}async getTokenSilent(e,t){var n,r;if(await this.getActiveAccount(),!this.account)throw new Pa({scopes:e,getTokenOptions:t,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."});const i={account:fl(this.account),correlationId:null==t?void 0:t.correlationId,scopes:e,authority:null==t?void 0:t.authority,claims:null==t?void 0:t.claims};try{this.logger.info("Attempting to acquire token silently");const t=null!==(r=await(null===(n=this.confidentialApp)||void 0===n?void 0:n.acquireTokenSilent(i)))&&void 0!==r?r:await this.publicApp.acquireTokenSilent(i);return this.handleResult(e,this.clientId,t||void 0)}catch(n){throw this.handleError(e,n,t)}}async getToken(e,t={}){const n=yl(this.tenantId,t)||this.tenantId;t.authority=ll(n,this.authorityHost),t.correlationId=(null==t?void 0:t.correlationId)||this.generateUuid(),await this.init(t);try{const n=t.claims;return n&&(this.cachedClaims=n),this.cachedClaims&&!n&&(t.claims=this.cachedClaims),await this.getTokenSilent(e,t)}catch(n){if("AuthenticationRequiredError"!==n.name)throw n;if(null==t?void 0:t.disableAutomaticAuthentication)throw new Pa({scopes:e,getTokenOptions:t,message:"Automatic authentication has been disabled. You may call the authentication() method."});return this.logger.info("Silent authentication failed, falling back to interactive method."),this.doGetToken(e,t)}}}var bl=n(7147),Tl=n.n(bl),Sl=n(2037),Al=n.n(Sl),Ol=n(1017),Cl=n.n(Ol);const Il=qa("VisualStudioCodeCredential");let Rl;const Nl={setVsCodeCredentialFinder(e){Rl=e}},Pl={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function Dl(e){const t=Pl[e];if(t)throw new Aa(t)}const kl={AzureCloud:ka.AzurePublicCloud,AzureChina:ka.AzureChina,AzureGermanCloud:ka.AzureGermany,AzureUSGovernment:ka.AzureGovernment};function Ml(e){const t=["User","settings.json"],n=Al().homedir();function r(...n){const r=Cl().join(...n,"Code",...t);return JSON.parse(Tl().readFileSync(r,{encoding:"utf8"}))[e]}try{let e;switch(process.platform){case"win32":return e=process.env.APPDATA,e?r(e):void 0;case"darwin":return r(n,"Library","Application Support");case"linux":return r(n,".config");default:return}}catch(e){return void Il.info(`Failed to load the Visual Studio Code configuration file. Error: ${e.message}`)}}class Ll{constructor(e){this.cloudName=Ml("azure.cloud")||"AzureCloud";const t=kl[this.cloudName];this.identityClient=new Ha(Object.assign({authorityHost:t},e)),e&&e.tenantId?(Ya(Il,e.tenantId),this.tenantId=e.tenantId):this.tenantId="common",Dl(this.tenantId)}async prepare(){const e=Ml("azure.tenant");e&&(this.tenantId=e),Dl(this.tenantId)}prepareOnce(){return this.preparePromise||(this.preparePromise=this.prepare()),this.preparePromise}async getToken(e,t){var n,r;await this.prepareOnce();const i=yl(this.tenantId,t)||this.tenantId;if(void 0===Rl)throw new Aa(["No implementation of `VisualStudioCodeCredential` is available.","You must install the identity-vscode plugin package (`npm install --save-dev @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before creating a `VisualStudioCodeCredential`."].join(" "));let o="string"==typeof e?e:e.join(" ");if(!o.match(/^[0-9a-zA-Z-.:/]+$/)){const t=new Error("Invalid scope was specified by the user or calling client");throw Il.getToken.info(Fa(e,t)),t}o.indexOf("offline_access")<0&&(o+=" offline_access");const s=await Rl(),{password:a}=null!==(r=null!==(n=s.find((({account:e})=>e===this.cloudName)))&&void 0!==n?n:s[0])&&void 0!==r?r:{};if(a){const t=await this.identityClient.refreshAccessToken(i,"aebc6443-996d-45c2-90f0-388ff96faa56",o,a,void 0);if(t)return Il.getToken.info(Ua(e)),t.accessToken;{const t=new Aa("Could not retrieve the token associated with Visual Studio Code. Have you connected using the 'Azure Account' extension recently? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw Il.getToken.info(Fa(e,t)),t}}{const t=new Aa("Could not retrieve the token associated with Visual Studio Code. Did you connect using the 'Azure Account' extension? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw Il.getToken.info(Fa(e,t)),t}}}const xl={cachePluginControl:El,vsCodeCredentialControl:Nl};function Ul(e){e(xl)}const Fl=qa("ChainedTokenCredential");class Bl{constructor(...e){this.UnavailableMessage="ChainedTokenCredential => failed to retrieve a token from the included credentials",this._sources=[],this._sources=e}async getToken(e,t={}){let n=null,r="";const i=[];return La.withSpan("ChainedTokenCredential.getToken",t,(async t=>{for(let o=0;o<this._sources.length&&null===n;o++)try{n=await this._sources[o].getToken(e,t),r=this._sources[o].constructor.name}catch(t){if("CredentialUnavailableError"!==t.name&&"AuthenticationRequiredError"!==t.name)throw Fl.getToken.info(Fa(e,t)),t;i.push(t)}if(!n&&i.length>0){const t=new Ra(i,"ChainedTokenCredential authentication failed.");throw Fl.getToken.info(Fa(e,t)),t}if(Fl.getToken.info(`Result for ${r}: ${Ua(e)}`),null===n)throw new Aa("Failed to retrieve a valid token");return n}))}}var ql=n(2081),jl=n.n(ql);function Hl(e,t){if(!e.match(/^[0-9a-zA-Z-.:/]+$/)){const n=new Error("Invalid scope was specified by the user or calling client");throw t.getToken.info(Fa(e,n)),n}}function Yl(e){return e.replace(/\/.default$/,"")}const Vl={getSafeWorkingDir(){if("win32"===process.platform){if(!process.env.SystemRoot)throw new Error("Azure CLI credential expects a 'SystemRoot' environment variable");return process.env.SystemRoot}return"/bin"},async getAzureCliAccessToken(e,t){let n=[];return t&&(n=["--tenant",t]),new Promise(((t,r)=>{try{jl().execFile("az",["account","get-access-token","--output","json","--resource",e,...n],{cwd:Vl.getSafeWorkingDir(),shell:!0},((e,n,r)=>{t({stdout:n,stderr:r,error:e})}))}catch(e){r(e)}}))}},$l=qa("AzureCliCredential");class zl{constructor(e){this.tenantId=null==e?void 0:e.tenantId}async getToken(e,t={}){const n=yl(this.tenantId,t);n&&Ya($l,n);const r="string"==typeof e?e:e[0];$l.getToken.info(`Using the scope ${r}`),Hl(r,$l);const i=Yl(r);return La.withSpan(`${this.constructor.name}.getToken`,t,(async()=>{var t,r,o,s;try{const a=await Vl.getAzureCliAccessToken(i,n),c=null===(t=a.stderr)||void 0===t?void 0:t.match("(.*)az login --scope(.*)"),u=(null===(r=a.stderr)||void 0===r?void 0:r.match("(.*)az login(.*)"))&&!c;if((null===(o=a.stderr)||void 0===o?void 0:o.match("az:(.*)not found"))||(null===(s=a.stderr)||void 0===s?void 0:s.startsWith("'az' is not recognized"))){const t=new Aa("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw $l.getToken.info(Fa(e,t)),t}if(u){const t=new Aa("Please run 'az login' from a command prompt to authenticate before using this credential.");throw $l.getToken.info(Fa(e,t)),t}try{const t=a.stdout,n=JSON.parse(t);return $l.getToken.info(Ua(e)),{token:n.accessToken,expiresOnTimestamp:new Date(n.expiresOn).getTime()}}catch(e){if(a.stderr)throw new Aa(a.stderr);throw e}}catch(t){const n="CredentialUnavailableError"===t.name?t:new Aa(t.message||"Unknown error while trying to retrieve the access token");throw $l.getToken.info(Fa(e,n)),n}}))}}const Gl=(e,t,n)=>new Promise(((r,i)=>{ql.execFile(e,t,n,((e,t,n)=>{Buffer.isBuffer(t)&&(t=t.toString("utf8")),Buffer.isBuffer(n)&&(n=n.toString("utf8")),n||e?i(n?new Error(n):e):r(t)}))})),Wl=qa("AzurePowerShellCredential"),Kl="win32"===process.platform;function Ql(e){return Kl?`${e}.exe`:e}async function Xl(e){const t=[];for(const n of e){const[e,...r]=n,i=await Gl(e,r,{encoding:"utf8"});t.push(i)}return t}const Zl="Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",Jl="The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: \"Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force\".",eh="To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot.",th=[Ql("pwsh")];Kl&&th.push(Ql("powershell"));class nh{constructor(e){this.tenantId=null==e?void 0:e.tenantId}async getAzurePowerShellAccessToken(e,t){for(const n of[...th]){try{await Xl([[n,"/?"]])}catch(e){th.shift();continue}let r="";t&&(r=`-TenantId "${t}"`);const i=(await Xl([[n,"-Command","Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru"],[n,"-Command",`Get-AzAccessToken ${r} -ResourceUrl "${e}" | ConvertTo-Json`]]))[1];try{return JSON.parse(i)}catch(e){throw new Error(`Unable to parse the output of PowerShell. Received output: ${i}`)}}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async()=>{const n=yl(this.tenantId,t);n&&Ya(Wl,n);const r="string"==typeof e?e:e[0];Hl(r,Wl),Wl.getToken.info(`Using the scope ${r}`);const i=Yl(r);try{const t=await this.getAzurePowerShellAccessToken(i,n);return Wl.getToken.info(Ua(e)),{token:t.Token,expiresOnTimestamp:new Date(t.ExpiresOn).getTime()}}catch(e){if((e=>e.message.match("The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"))(e)){const e=new Aa(Jl);throw Wl.getToken.info(Fa(r,e)),e}if((e=>e.message.match("(.*)Run Connect-AzAccount to login(.*)"))(e)){const e=new Aa(Zl);throw Wl.getToken.info(Fa(r,e)),e}const t=new Aa(`${e}. ${eh}`);throw Wl.getToken.info(Fa(r,t)),t}}))}}class rh extends wl{constructor(e){super(e),this.requiresConfidential=!0,this.msalConfig.auth.clientSecret=e.clientSecret}async doGetToken(e,t={}){try{const n=await this.confidentialApp.acquireTokenByClientCredential({scopes:e,correlationId:t.correlationId,azureRegion:this.azureRegion,authority:t.authority,claims:t.claims});return this.handleResult(e,this.clientId,n||void 0)}catch(n){throw this.handleError(e,n,t)}}}const ih=qa("ClientSecretCredential");class oh{constructor(e,t,n,r={}){if(!e||!t||!n)throw new Error("ClientSecretCredential: tenantId, clientId, and clientSecret are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.msalFlow=new rh(Object.assign(Object.assign({},r),{logger:ih,clientId:t,tenantId:e,clientSecret:n,tokenCredentialOptions:r}))}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,t)}))}}var sh=n(3837);const ah=(0,sh.promisify)(bl.readFile);async function ch(e,t){const n={},r=e.certificate,i=e.certificatePath;n.certificateContents=r||await ah(i,"utf8"),t&&(n.x5c=n.certificateContents);const o=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,s=[];let a;do{a=o.exec(n.certificateContents),a&&s.push(a[3])}while(a);if(0===s.length)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");return n.thumbprint=(0,Yr.createHash)("sha1").update(Buffer.from(s[0],"base64")).digest("hex").toUpperCase(),n}class uh extends wl{constructor(e){super(e),this.requiresConfidential=!0,this.configuration=e.configuration,this.sendCertificateChain=e.sendCertificateChain}async init(e){try{const e=await ch(this.configuration,this.sendCertificateChain);this.msalConfig.auth.clientCertificate={thumbprint:e.thumbprint,privateKey:e.certificateContents,x5c:e.x5c}}catch(e){throw this.logger.info(Fa("",e)),e}return super.init(e)}async doGetToken(e,t={}){try{const n={scopes:e,correlationId:t.correlationId,azureRegion:this.azureRegion,authority:t.authority,claims:t.claims},r=await this.confidentialApp.acquireTokenByClientCredential(n);return this.handleResult(e,this.clientId,r||void 0)}catch(n){throw this.handleError(e,n,t)}}}const lh="ClientCertificateCredential",hh=qa(lh);class dh{constructor(e,t,n,r={}){if(!e||!t)throw new Error(`${lh}: tenantId and clientId are required parameters.`);const i=Object.assign({},"string"==typeof n?{certificatePath:n}:n),o=i.certificate,s=i.certificatePath;if(!i||!o&&!s)throw new Error(`${lh}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&s)throw new Error(`${lh}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalFlow=new uh(Object.assign(Object.assign({},r),{configuration:i,logger:hh,clientId:t,tenantId:e,sendCertificateChain:r.sendCertificateChain,tokenCredentialOptions:r}))}async getToken(e,t={}){return La.withSpan(`${lh}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,t)}))}}class fh extends wl{constructor(e){super(e),this.username=e.username,this.password=e.password}async doGetToken(e,t){try{const n={scopes:e,username:this.username,password:this.password,correlationId:null==t?void 0:t.correlationId,authority:null==t?void 0:t.authority,claims:null==t?void 0:t.claims},r=await this.publicApp.acquireTokenByUsernamePassword(n);return this.handleResult(e,this.clientId,r||void 0)}catch(n){throw this.handleError(e,n,t)}}}const ph=qa("UsernamePasswordCredential");class mh{constructor(e,t,n,r,i={}){if(!(e&&t&&n&&r))throw new Error("UsernamePasswordCredential: tenantId, clientId, username and password are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.msalFlow=new fh(Object.assign(Object.assign({},i),{logger:ph,clientId:t,tenantId:e,username:n,password:r,tokenCredentialOptions:i||{}}))}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,t)}))}}const gh=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_USERNAME","AZURE_PASSWORD"],yh=qa("EnvironmentCredential");class _h{constructor(e){this._credential=void 0;const t=(n=gh,n.reduce(((e,t)=>(process.env[t]?e.assigned.push(t):e.missing.push(t),e)),{missing:[],assigned:[]})).assigned.join(", ");var n;yh.info(`Found the following environment variables: ${t}`);const r=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET;if(r&&Ya(yh,r),r&&i&&o)return yh.info(`Invoking ClientSecretCredential with tenant ID: ${r}, clientId: ${i} and clientSecret: [REDACTED]`),void(this._credential=new oh(r,i,o,e));const s=process.env.AZURE_CLIENT_CERTIFICATE_PATH;if(r&&i&&s)return yh.info(`Invoking ClientCertificateCredential with tenant ID: ${r}, clientId: ${i} and certificatePath: ${s}`),void(this._credential=new dh(r,i,{certificatePath:s},e));const a=process.env.AZURE_USERNAME,c=process.env.AZURE_PASSWORD;r&&i&&a&&c&&(yh.info(`Invoking UsernamePasswordCredential with tenant ID: ${r}, clientId: ${i} and username: ${a}`),this._credential=new mh(r,i,a,c,e))}async getToken(e,t={}){return La.withSpan("EnvironmentCredential.getToken",t,(async t=>{if(this._credential)try{const n=await this._credential.getToken(e,t);return yh.getToken.info(Ua(e)),n}catch(t){const n=new Ca(400,{error:"EnvironmentCredential authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.",error_description:t.message.toString().split("More details:").join("")});throw yh.getToken.info(Fa(e,n)),n}throw new Aa("EnvironmentCredential is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.")}))}}const vh="/.default";function Eh(e){let t="";if(Array.isArray(e)){if(1!==e.length)return;t=e[0]}else"string"==typeof e&&(t=e);return t.endsWith(vh)?t.substr(0,t.lastIndexOf(vh)):t}const wh="ManagedIdentityCredential - AppServiceMSI 2017",bh=qa(wh);function Th(e){return Date.parse(e.expires_on)}const Sh={async isAvailable({scopes:e}){if(!Eh(e))return bh.info(`${wh}: Unavailable. Multiple scopes are not supported.`),!1;const t=process.env,n=Boolean(t.MSI_ENDPOINT&&t.MSI_SECRET);return n||bh.info(`${wh}: Unavailable. The environment variables needed are: MSI_ENDPOINT and MSI_SECRET.`),n},async getToken(e,t={}){const{identityClient:n,scopes:r,clientId:i,resourceId:o}=e;o&&bh.warning(`${wh}: managed Identity by resource Id is not supported. Argument resourceId might be ignored by the service.`),bh.info(`${wh}: Using the endpoint and the secret coming form the environment variables: MSI_ENDPOINT=${process.env.MSI_ENDPOINT} and MSI_SECRET=[REDACTED].`);const s=ea(Object.assign(Object.assign({abortSignal:t.abortSignal},function(e,t){const n=Eh(e);if(!n)throw new Error(`${wh}: Multiple scopes are not supported.`);const r={resource:n,"api-version":"2017-09-01"};t&&(r.clientid=t);const i=new URLSearchParams(r);if(!process.env.MSI_ENDPOINT)throw new Error(`${wh}: Missing environment variable: MSI_ENDPOINT`);if(!process.env.MSI_SECRET)throw new Error(`${wh}: Missing environment variable: MSI_SECRET`);return{url:`${process.env.MSI_ENDPOINT}?${i.toString()}`,method:"GET",headers:Ss({Accept:"application/json",secret:process.env.MSI_SECRET})}}(r,i)),{allowInsecureConnection:!0})),a=await n.sendTokenRequest(s,Th);return a&&a.accessToken||null}},Ah="ManagedIdentityCredential - CloudShellMSI",Oh=qa(Ah),Ch={async isAvailable({scopes:e}){if(!Eh(e))return Oh.info(`${Ah}: Unavailable. Multiple scopes are not supported.`),!1;const t=Boolean(process.env.MSI_ENDPOINT);return t||Oh.info(`${Ah}: Unavailable. The environment variable MSI_ENDPOINT is needed.`),t},async getToken(e,t={}){const{identityClient:n,scopes:r,clientId:i,resourceId:o}=e;i&&Oh.warning(`${Ah}: user-assigned identities not supported. The argument clientId might be ignored by the service.`),o&&Oh.warning(`${Ah}: user defined managed Identity by resource Id not supported. The argument resourceId might be ignored by the service.`),Oh.info(`${Ah}: Using the endpoint coming form the environment variable MSI_ENDPOINT = ${process.env.MSI_ENDPOINT}.`);const s=ea(Object.assign(Object.assign({abortSignal:t.abortSignal},function(e,t,n){const r=Eh(e);if(!r)throw new Error(`${Ah}: Multiple scopes are not supported.`);const i={resource:r};if(t&&(i.client_id=t),n&&(i.msi_res_id=n),!process.env.MSI_ENDPOINT)throw new Error(`${Ah}: Missing environment variable: MSI_ENDPOINT`);const o=new URLSearchParams(i);return{url:process.env.MSI_ENDPOINT,method:"POST",body:o.toString(),headers:Ss({Accept:"application/json",Metadata:"true","Content-Type":"application/x-www-form-urlencoded"})}}(r,i,o)),{allowInsecureConnection:!0})),a=await n.sendTokenRequest(s);return a&&a.accessToken||null}},Ih="ManagedIdentityCredential - IMDS",Rh=qa(Ih);function Nh(e){if(e.expires_on){const t=1e3*+e.expires_on;return Rh.info(`${Ih}: Using expires_on: ${t} (original value: ${e.expires_on})`),t}{const t=Date.now()+1e3*e.expires_in;return Rh.info(`${Ih}: IMDS using expires_in: ${t} (original value: ${e.expires_in})`),t}}function Ph(e,t,n,r){var i;const o=Eh(e);if(!o)throw new Error(`${Ih}: Multiple scopes are not supported.`);const{skipQuery:s,skipMetadataHeader:a}=r||{};let c="";if(!s){const e={resource:o,"api-version":"2018-02-01"};t&&(e.client_id=t),n&&(e.msi_res_id=n),c=`?${new URLSearchParams(e).toString()}`}const u=new URL("/metadata/identity/oauth2/token",null!==(i=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)&&void 0!==i?i:"http://169.254.169.254"),l={Accept:"application/json",Metadata:"true"};return a&&delete l.Metadata,{url:`${u}${c}`,method:"GET",headers:Ss(l)}}const Dh={async isAvailable({scopes:e,identityClient:t,clientId:n,resourceId:r,getTokenOptions:i={}}){const o=Eh(e);if(!o)return Rh.info(`${Ih}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!t)throw new Error("Missing IdentityClient");const s=Ph(o,n,r,{skipMetadataHeader:!0,skipQuery:!0});return La.withSpan("ManagedIdentityCredential-pingImdsEndpoint",i,(async e=>{var n,r;s.tracingOptions=e.tracingOptions;try{const i=ea(s);i.timeout=null!==(r=null===(n=e.requestOptions)||void 0===n?void 0:n.timeout)&&void 0!==r?r:300,i.allowInsecureConnection=!0;try{Rh.info(`${Ih}: Pinging the Azure IMDS endpoint`),await t.sendRequest(i)}catch(e){if("RestError"===e.name&&e.code===Hs.REQUEST_SEND_ERROR||"AbortError"===e.name||"ENETUNREACH"===e.code||"ECONNREFUSED"===e.code||"EHOSTDOWN"===e.code)return Rh.info(`${Ih}: The Azure IMDS endpoint is unavailable`),!1}return Rh.info(`${Ih}: The Azure IMDS endpoint is available`),!0}catch(e){throw Rh.info(`${Ih}: Error when creating the WebResource for the Azure IMDS endpoint: ${e.message}`),e}}))},async getToken(e,t={}){const{identityClient:n,scopes:r,clientId:i,resourceId:o}=e;Rh.info(`${Ih}: Using the Azure IMDS endpoint coming from the environment variable MSI_ENDPOINT=${process.env.MSI_ENDPOINT}, and using the cloud shell to proceed with the authentication.`);let s=800;for(let e=0;e<3;e++)try{const e=ea(Object.assign(Object.assign({abortSignal:t.abortSignal},Ph(r,i,o)),{allowInsecureConnection:!0})),s=await n.sendTokenRequest(e,Nh);return s&&s.accessToken||null}catch(e){if(404===e.statusCode){await No(s),s*=2;continue}throw e}throw new Ca(404,`${Ih}: Failed to retrieve IMDS token after 3 retries.`)}},kh="ManagedIdentityCredential - Azure Arc MSI",Mh=qa(kh),Lh={async isAvailable({scopes:e}){if(!Eh(e))return Mh.info(`${kh}: Unavailable. Multiple scopes are not supported.`),!1;const t=Boolean(process.env.IMDS_ENDPOINT&&process.env.IDENTITY_ENDPOINT);return t||Mh.info(`${kh}: The environment variables needed are: IMDS_ENDPOINT and IDENTITY_ENDPOINT`),t},async getToken(e,t={}){var n;const{identityClient:r,scopes:i,clientId:o,resourceId:s}=e;o&&Mh.warning(`${kh}: user-assigned identities not supported. The argument clientId might be ignored by the service.`),s&&Mh.warning(`${kh}: user defined managed Identity by resource Id is not supported. Argument resourceId will be ignored.`),Mh.info(`${kh}: Authenticating.`);const a=Object.assign(Object.assign({disableJsonStringifyOnBody:!0,deserializationMapper:void 0,abortSignal:t.abortSignal},function(e,t,n){const r=Eh(e);if(!r)throw new Error(`${kh}: Multiple scopes are not supported.`);const i={resource:r,"api-version":"2019-11-01"};if(t&&(i.client_id=t),n&&(i.msi_res_id=n),!process.env.IDENTITY_ENDPOINT)throw new Error(`${kh}: Missing environment variable: IDENTITY_ENDPOINT`);const o=new URLSearchParams(i);return ea({url:`${process.env.IDENTITY_ENDPOINT}?${o.toString()}`,method:"GET",headers:Ss({Accept:"application/json",Metadata:"true"})})}(i,o,s)),{allowInsecureConnection:!0}),c=await async function(e,t){const n=await e.sendRequest(ea(t));if(401!==n.status){let e="";throw n.bodyAsText&&(e=` Response: ${n.bodyAsText}`),new Ca(n.status,`${kh}: To authenticate with Azure Arc MSI, status code 401 is expected on the first request. ${e}`)}const r=n.headers.get("www-authenticate")||"";try{return r.split("=").slice(1)[0]}catch(e){throw Error(`Invalid www-authenticate header format: ${r}`)}}(r,a);if(!c)throw new Error(`${kh}: Failed to find the token file.`);const u=await(l=c,h={encoding:"utf-8"},new Promise(((e,t)=>(0,bl.readFile)(l,h,((n,r)=>{n&&t(n),e(r)})))));var l,h;null===(n=a.headers)||void 0===n||n.set("Authorization",`Basic ${u}`);const d=ea(Object.assign(Object.assign({},a),{allowInsecureConnection:!0})),f=await r.sendTokenRequest(d);return f&&f.accessToken||null}},xh="ManagedIdentityCredential - Token Exchange",Uh=qa(xh),Fh=(0,sh.promisify)(Tl().readFile);function Bh(){const e=process.env.AZURE_FEDERATED_TOKEN_FILE;let t,n;return{async isAvailable({clientId:t}){const n=process.env,r=Boolean((t||n.AZURE_CLIENT_ID)&&n.AZURE_TENANT_ID&&e);return r||Uh.info(`${xh}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(r,i={}){const{identityClient:o,scopes:s,clientId:a}=r;let c;Uh.info(`${xh}: Using the client assertion coming from environment variables.`);try{c=await async function(){if(void 0!==n&&Date.now()-n>=3e5&&(t=void 0),!t){const r=(await Fh(e,"utf8")).trim();if(!r)throw new Error(`No content on the file ${e}, indicated by the environment variable AZURE_FEDERATED_TOKEN_FILE`);t=r,n=Date.now()}return t}()}catch(t){throw new Error(`${xh}: Failed to read ${e}, indicated by the environment variable AZURE_FEDERATED_TOKEN_FILE`)}const u=ea(Object.assign(Object.assign({abortSignal:i.abortSignal},function(e,t,n){var r;const i={scope:Array.isArray(e)?e.join(" "):e,client_assertion:t,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",client_id:n,grant_type:"client_credentials"},o=new URLSearchParams(i);return{url:new URL(`${process.env.AZURE_TENANT_ID}/oauth2/v2.0/token`,null!==(r=process.env.AZURE_AUTHORITY_HOST)&&void 0!==r?r:Ma).toString(),method:"POST",body:o.toString(),headers:Ss({Accept:"application/json"})}}(s,c,a||process.env.AZURE_CLIENT_ID)),{allowInsecureConnection:!0})),l=await o.sendTokenRequest(u);return l&&l.accessToken||null}}}const qh="ManagedIdentityCredential - Fabric MSI",jh=qa(qh);function Hh(e){return Number(e.expires_on)}const Yh={async isAvailable({scopes:e}){if(!Eh(e))return jh.info(`${qh}: Unavailable. Multiple scopes are not supported.`),!1;const t=process.env,n=Boolean(t.IDENTITY_ENDPOINT&&t.IDENTITY_HEADER&&t.IDENTITY_SERVER_THUMBPRINT);return n||jh.info(`${qh}: Unavailable. The environment variables needed are: IDENTITY_ENDPOINT, IDENTITY_HEADER and IDENTITY_SERVER_THUMBPRINT`),n},async getToken(e,t={}){const{scopes:n,identityClient:r,clientId:i,resourceId:o}=e;o&&jh.warning(`${qh}: user defined managed Identity by resource Id is not supported. Argument resourceId might be ignored by the service.`),jh.info([`${qh}:`,"Using the endpoint and the secret coming from the environment variables:",`IDENTITY_ENDPOINT=${process.env.IDENTITY_ENDPOINT},`,"IDENTITY_HEADER=[REDACTED] and","IDENTITY_SERVER_THUMBPRINT=[REDACTED]."].join(" "));const s=ea(Object.assign({abortSignal:t.abortSignal},function(e,t,n){const r=Eh(e);if(!r)throw new Error(`${qh}: Multiple scopes are not supported.`);const i={resource:r,"api-version":"2019-07-01-preview"};t&&(i.client_id=t),n&&(i.msi_res_id=n);const o=new URLSearchParams(i);if(!process.env.IDENTITY_ENDPOINT)throw new Error("Missing environment variable: IDENTITY_ENDPOINT");if(!process.env.IDENTITY_HEADER)throw new Error("Missing environment variable: IDENTITY_HEADER");return{url:`${process.env.IDENTITY_ENDPOINT}?${o.toString()}`,method:"GET",headers:Ss({Accept:"application/json",secret:process.env.IDENTITY_HEADER})}}(n,i,o)));s.agent=new(Hr().Agent)({rejectUnauthorized:!1});const a=await r.sendTokenRequest(s,Hh);return a&&a.accessToken||null}},Vh="ManagedIdentityCredential - AppServiceMSI 2019",$h=qa(Vh);function zh(e){return Date.parse(e.expires_on)}const Gh={async isAvailable({scopes:e}){if(!Eh(e))return $h.info(`${Vh}: Unavailable. Multiple scopes are not supported.`),!1;const t=process.env,n=Boolean(t.IDENTITY_ENDPOINT&&t.IDENTITY_HEADER);return n||$h.info(`${Vh}: Unavailable. The environment variables needed are: IDENTITY_ENDPOINT and IDENTITY_HEADER.`),n},async getToken(e,t={}){const{identityClient:n,scopes:r,clientId:i,resourceId:o}=e;$h.info(`${Vh}: Using the endpoint and the secret coming form the environment variables: IDENTITY_ENDPOINT=${process.env.IDENTITY_ENDPOINT} and IDENTITY_HEADER=[REDACTED].`);const s=ea(Object.assign(Object.assign({abortSignal:t.abortSignal},function(e,t,n){const r=Eh(e);if(!r)throw new Error(`${Vh}: Multiple scopes are not supported.`);const i={resource:r,"api-version":"2019-08-01"};t&&(i.client_id=t),n&&(i.mi_res_id=n);const o=new URLSearchParams(i);if(!process.env.IDENTITY_ENDPOINT)throw new Error(`${Vh}: Missing environment variable: IDENTITY_ENDPOINT`);if(!process.env.IDENTITY_HEADER)throw new Error(`${Vh}: Missing environment variable: IDENTITY_HEADER`);return{url:`${process.env.IDENTITY_ENDPOINT}?${o.toString()}`,method:"GET",headers:Ss({Accept:"application/json","X-IDENTITY-HEADER":process.env.IDENTITY_HEADER})}}(r,i,o)),{allowInsecureConnection:!0})),a=await n.sendTokenRequest(s,zh);return a&&a.accessToken||null}},Wh=qa("ManagedIdentityCredential");class Kh{constructor(e,t){let n;if(this.isEndpointUnavailable=null,"string"==typeof e?(this.clientId=e,n=t):(this.clientId=null==e?void 0:e.clientId,n=e),this.resourceId=null==n?void 0:n.resourceId,this.clientId&&this.resourceId)throw new Error(`${Kh.name} - Client Id and Resource Id can't be provided at the same time.`);this.identityClient=new Ha(n),this.isAvailableIdentityClient=new Ha(Object.assign(Object.assign({},n),{retryOptions:{maxRetries:0}}))}async cachedAvailableMSI(e,t){if(this.cachedMSI)return this.cachedMSI;const n=[Lh,Yh,Gh,Sh,Ch,Bh(),Dh];for(const r of n)if(await r.isAvailable({scopes:e,identityClient:this.isAvailableIdentityClient,clientId:this.clientId,resourceId:this.resourceId,getTokenOptions:t}))return this.cachedMSI=r,r;throw new Aa(`${Kh.name} - No MSI credential available`)}async authenticateManagedIdentity(e,t){const{span:n,updatedOptions:r}=La.startSpan(`${Kh.name}.authenticateManagedIdentity`,t);try{return(await this.cachedAvailableMSI(e,r)).getToken({identityClient:this.identityClient,scopes:e,clientId:this.clientId,resourceId:this.resourceId},r)}catch(e){throw n.setStatus({status:"error",error:e}),e}finally{n.end()}}async getToken(e,t){let n=null;const{span:r,updatedOptions:i}=La.startSpan(`${Kh.name}.getToken`,t);try{if(!0===this.isEndpointUnavailable){const t=new Aa("The managed identity endpoint is not currently available");throw Wh.getToken.info(Fa(e,t)),t}if(n=await this.authenticateManagedIdentity(e,i),null===n){this.isEndpointUnavailable=!0;const t=new Aa("The managed identity endpoint was reached, yet no tokens were received.");throw Wh.getToken.info(Fa(e,t)),t}return this.isEndpointUnavailable=!1,Wh.getToken.info(Ua(e)),n}catch(t){if("AuthenticationRequiredError"===t.name)throw t;if(r.setStatus({status:"error",error:t}),"ENETUNREACH"===t.code){const n=new Aa(`${Kh.name}: Unavailable. Network unreachable. Message: ${t.message}`);throw Wh.getToken.info(Fa(e,n)),n}if("EHOSTUNREACH"===t.code){const n=new Aa(`${Kh.name}: Unavailable. No managed identity endpoint found. Message: ${t.message}`);throw Wh.getToken.info(Fa(e,n)),n}if(400===t.statusCode)throw new Aa(`${Kh.name}: The managed identity endpoint is indicating there's no available identity. Message: ${t.message}`);if(void 0===t.statusCode)throw new Aa(`${Kh.name}: Authentication failed. Message ${t.message}`);throw new Ca(t.statusCode,{error:`${Kh.name} authentication failed.`,error_description:t.message})}finally{r.end()}}}const Qh=[_h,class extends Kh{constructor(e){var t;const n=null!==(t=null==e?void 0:e.managedIdentityClientId)&&void 0!==t?t:process.env.AZURE_CLIENT_ID,r=null==e?void 0:e.managedIdentityResourceId;super(r?Object.assign(Object.assign({},e),{resourceId:r}):n?Object.assign(Object.assign({},e),{clientId:n}):e)}},Ll,zl,nh];class Xh extends Bl{constructor(e){super(...Qh.map((t=>new t(e)))),this.UnavailableMessage="DefaultAzureCredential => failed to retrieve a token from the included credentials. To troubleshoot, visit https://aka.ms/azsdk/js/identity/defaultazurecredential/troubleshoot."}}class Zh extends wl{constructor(e){super(e),this.requiresConfidential=!0,this.getAssertion=e.getAssertion}async doGetToken(e,t={}){try{const n=await this.getAssertion(),r=await this.confidentialApp.acquireTokenByClientCredential({scopes:e,correlationId:t.correlationId,azureRegion:this.azureRegion,authority:t.authority,claims:t.claims,clientAssertion:n});return this.handleResult(e,this.clientId,r||void 0)}catch(n){let r=n;throw r=null==n?new Error(JSON.stringify(n)):Do(n)?n:new Error(String(n)),this.handleError(e,r,t)}}}const Jh=qa("ClientAssertionCredential");class ed{constructor(e,t,n,r={}){if(!e||!t||!n)throw new Error("ClientAssertionCredential: tenantId, clientId, and clientAssertion are required parameters.");this.tenantId=e,this.clientId=t,this.options=r,this.msalFlow=new Zh(Object.assign(Object.assign({},r),{logger:Jh,clientId:this.clientId,tenantId:this.tenantId,tokenCredentialOptions:this.options,getAssertion:n}))}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,t)}))}}var td=n(8318),nd=n.n(td),rd=n(6353),id=n.n(rd);const od={open:nd()};class sd extends wl{constructor(e){super(e),this.logger=qa("Node.js MSAL Open Browser"),this.redirectUri=e.redirectUri,this.loginHint=e.loginHint;const t=new URL(this.redirectUri);this.port=parseInt(t.port),isNaN(this.port)&&(this.port=80),this.hostname=t.hostname}async acquireTokenByCode(e){return this.publicApp.acquireTokenByCode(e)}doGetToken(e,t){return new Promise(((n,r)=>{const i=[],o=qr().createServer(((i,o)=>{var s;if(!i.url)return void r(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"'));let a;try{a=new URL(i.url,this.redirectUri)}catch(e){return void r(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"'))}const u={code:a.searchParams.get("code"),redirectUri:this.redirectUri,scopes:e,authority:null==t?void 0:t.authority,codeVerifier:null===(s=this.pkceCodes)||void 0===s?void 0:s.verifier};this.acquireTokenByCode(u).then((t=>{if((null==t?void 0:t.account)&&(this.account=pl(this.clientId,t.account)),t&&t.expiresOn){const r=null==t?void 0:t.expiresOn.valueOf();o.writeHead(200),o.end("Authentication Complete. You can close the browser and return to the application."),this.logger.getToken.info(Ua(e)),n({expiresOnTimestamp:r,token:t.accessToken})}else{const t=Fa(e,`${a.searchParams.get("error")}. ${a.searchParams.get("error_description")}`);o.writeHead(500),o.end(t),this.logger.getToken.info(t),r(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"'))}c()})).catch((()=>{const t=Fa(e,`${a.searchParams.get("error")}. ${a.searchParams.get("error_description")}`);o.writeHead(500),o.end(t),this.logger.getToken.info(t),r(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"')),c()}))})),s=id()(o),a=o.listen(this.port,this.hostname,(()=>this.logger.info(`InteractiveBrowserCredential listening on port ${this.port}!`)));function c(){a&&a.close();for(const e of i)e.destroy();s&&(s.close(),s.stop())}o.on("connection",(e=>i.push(e))),o.on("error",(e=>{c();const t=e.code;r(new Aa("EACCES"===t||"EADDRINUSE"===t?[`InteractiveBrowserCredential: Access denied to port ${this.port}.`,"Try sending a redirect URI with a different port, as follows:",'`new InteractiveBrowserCredential({ redirectUri: "http://localhost:1337" })`'].join(" "):`InteractiveBrowserCredential: Failed to start the necessary web server. Error: ${e.message}`))})),o.on("listening",(()=>{const n=this.openAuthCodeUrl(e,t),i=null==t?void 0:t.abortSignal;i&&i.addEventListener("abort",(()=>{c(),r(new Error("Aborted"))})),n.then().catch((e=>{c(),r(e)}))}))}))}async openAuthCodeUrl(e,t){const n=new Ei;this.pkceCodes=await n.generatePkceCodes();const r={scopes:e,correlationId:null==t?void 0:t.correlationId,redirectUri:this.redirectUri,authority:null==t?void 0:t.authority,claims:null==t?void 0:t.claims,loginHint:this.loginHint,codeChallenge:this.pkceCodes.challenge,codeChallengeMethod:"S256"},i=await this.publicApp.getAuthCodeUrl(r);try{await od.open(i,{wait:!0,newInstance:!0})}catch(e){throw new Aa(`InteractiveBrowserCredential: Could not open a browser window. Error: ${e.message}`)}}}const ad=qa("InteractiveBrowserCredential");class cd{constructor(e={}){const t="function"==typeof e.redirectUri?e.redirectUri():e.redirectUri||"http://localhost";this.msalFlow=new sd(Object.assign(Object.assign({},e),{tokenCredentialOptions:e,logger:ad,redirectUri:t})),this.disableAutomaticAuthentication=null==e?void 0:e.disableAutomaticAuthentication}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,Object.assign(Object.assign({},t),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}async authenticate(e,t={}){return La.withSpan(`${this.constructor.name}.authenticate`,t,(async t=>{const n=Array.isArray(e)?e:[e];return await this.msalFlow.getToken(n,t),this.msalFlow.getActiveAccount()}))}}class ud extends wl{constructor(e){super(e),this.userPromptCallback=e.userPromptCallback}async doGetToken(e,t){try{const n={deviceCodeCallback:this.userPromptCallback,scopes:e,cancel:!1,correlationId:null==t?void 0:t.correlationId,authority:null==t?void 0:t.authority,claims:null==t?void 0:t.claims},r=this.publicApp.acquireTokenByDeviceCode(n),i=await this.withCancellation(r,null==t?void 0:t.abortSignal,(()=>{n.cancel=!0}));return this.handleResult(e,this.clientId,i||void 0)}catch(n){throw this.handleError(e,n,t)}}}const ld=qa("DeviceCodeCredential");function hd(e){console.log(e.message)}class dd{constructor(e){this.msalFlow=new ud(Object.assign(Object.assign({},e),{logger:ld,userPromptCallback:(null==e?void 0:e.userPromptCallback)||hd,tokenCredentialOptions:e||{}})),this.disableAutomaticAuthentication=null==e?void 0:e.disableAutomaticAuthentication}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,Object.assign(Object.assign({},t),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}async authenticate(e,t={}){return La.withSpan(`${this.constructor.name}.authenticate`,t,(async t=>{const n=Array.isArray(e)?e:[e];return await this.msalFlow.getToken(n,t),this.msalFlow.getActiveAccount()}))}}class fd extends wl{constructor(e){super(e),this.logger=qa("Node.js MSAL Authorization Code"),this.redirectUri=e.redirectUri,this.authorizationCode=e.authorizationCode,e.clientSecret&&(this.msalConfig.auth.clientSecret=e.clientSecret)}async getAuthCodeUrl(e){return await this.init(),(this.confidentialApp||this.publicApp).getAuthCodeUrl(e)}async doGetToken(e,t){var n;try{const r=await(null===(n=this.confidentialApp||this.publicApp)||void 0===n?void 0:n.acquireTokenByCode({scopes:e,redirectUri:this.redirectUri,code:this.authorizationCode,correlationId:null==t?void 0:t.correlationId,authority:null==t?void 0:t.authority,claims:null==t?void 0:t.claims}));return this.handleResult(e,this.clientId,r||void 0)}catch(n){throw this.handleError(e,n,t)}}}const pd=qa("AuthorizationCodeCredential");class md{constructor(e,t,n,r,i,o){Ya(pd,e);let s=n;"string"==typeof i?(this.authorizationCode=r,this.redirectUri=i):(this.authorizationCode=n,this.redirectUri=r,s=void 0,o=i),this.msalFlow=new fd(Object.assign(Object.assign({},o),{clientSecret:s,clientId:t,tenantId:e,tokenCredentialOptions:o||{},logger:pd,redirectUri:this.redirectUri,authorizationCode:this.authorizationCode}))}async getToken(e,t={}){return La.withSpan(`${this.constructor.name}.getToken`,t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,Object.assign(Object.assign({},t),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}}class gd extends wl{constructor(e){super(e),this.logger.info("Initialized MSAL's On-Behalf-Of flow"),this.requiresConfidential=!0,this.userAssertionToken=e.userAssertionToken,this.certificatePath=e.certificatePath,this.sendCertificateChain=e.sendCertificateChain,this.clientSecret=e.clientSecret}async init(e){if(this.certificatePath)try{const e=await ch({certificatePath:this.certificatePath},this.sendCertificateChain);this.msalConfig.auth.clientCertificate={thumbprint:e.thumbprint,privateKey:e.certificateContents,x5c:e.x5c}}catch(e){throw this.logger.info(Fa("",e)),e}else this.msalConfig.auth.clientSecret=this.clientSecret;return super.init(e)}async doGetToken(e,t={}){try{const n=await this.confidentialApp.acquireTokenOnBehalfOf({scopes:e,correlationId:t.correlationId,authority:t.authority,claims:t.claims,oboAssertion:this.userAssertionToken});return this.handleResult(e,this.clientId,n||void 0)}catch(n){throw this.handleError(e,n,t)}}}const yd=qa("OnBehalfOfCredential");class _d{constructor(e){this.options=e;const{clientSecret:t}=e,{certificatePath:n}=e,{tenantId:r,clientId:i,userAssertionToken:o}=e;if(!r||!i||!t&&!n||!o)throw new Error("OnBehalfOfCredential: tenantId, clientId, clientSecret (or certificatePath) and userAssertionToken are required parameters.");this.msalFlow=new gd(Object.assign(Object.assign({},this.options),{logger:yd,tokenCredentialOptions:this.options}))}async getToken(e,t={}){return La.withSpan("OnBehalfOfCredential.getToken",t,(async t=>{const n=Array.isArray(e)?e:[e];return this.msalFlow.getToken(n,t)}))}}function vd(){return new Xh}},3266:(e,t,n)=>{"use strict";function r(e,t,n){function r(e){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,t&&t.apply(this,arguments),this.toString=function(){return this.name+": "+this.message}}return void 0===n&&(n=Error),r.prototype=Object.create(n.prototype),r.prototype.name=e,r.prototype.constructor=r,r}n.r(t),n.d(t,{ArithmeticException:()=>a,ChronoField:()=>N,ChronoLocalDate:()=>$,ChronoLocalDateTime:()=>lt,ChronoUnit:()=>C,ChronoZonedDateTime:()=>it,Clock:()=>mt,DateTimeException:()=>i,DateTimeFormatter:()=>Ge,DateTimeFormatterBuilder:()=>je,DateTimeParseException:()=>o,DayOfWeek:()=>U,DecimalStyle:()=>ye,Duration:()=>A,IllegalArgumentException:()=>c,IllegalStateException:()=>u,Instant:()=>pt,IsoChronology:()=>nt,IsoFields:()=>re,LocalDate:()=>ut,LocalDateTime:()=>ht,LocalTime:()=>dt,Month:()=>F,MonthDay:()=>We,NullPointerException:()=>l,OffsetDateTime:()=>st,OffsetTime:()=>rt,ParsePosition:()=>j,Period:()=>q,ResolverStyle:()=>Y,SignStyle:()=>_e,Temporal:()=>V,TemporalAccessor:()=>D,TemporalAdjuster:()=>Xe,TemporalAdjusters:()=>Ze,TemporalAmount:()=>T,TemporalField:()=>I,TemporalQueries:()=>P,TemporalQuery:()=>k,TemporalUnit:()=>S,TextStyle:()=>ve,UnsupportedTemporalTypeException:()=>s,ValueRange:()=>R,Year:()=>Qe,YearConstants:()=>O,YearMonth:()=>Ke,ZoneId:()=>G,ZoneOffset:()=>Z,ZoneOffsetTransition:()=>vt,ZoneRegion:()=>Le,ZoneRules:()=>W,ZoneRulesProvider:()=>Me,ZonedDateTime:()=>ot,_:()=>Nt,convert:()=>Ot,nativeJs:()=>Ct,use:()=>Dt});var i=r("DateTimeException",(function(e,t){void 0===t&&(t=null);var n=e||this.name;null!==t&&t instanceof Error&&(n+="\n-------\nCaused by: "+t.stack+"\n-------\n"),this.message=n})),o=r("DateTimeParseException",(function(e,t,n,r){void 0===t&&(t=""),void 0===n&&(n=0),void 0===r&&(r=null);var i=e||this.name;i+=": "+t+", at index: "+n,null!==r&&r instanceof Error&&(i+="\n-------\nCaused by: "+r.stack+"\n-------\n"),this.message=i,this.parsedString=function(){return t},this.errorIndex=function(){return n}})),s=r("UnsupportedTemporalTypeException",null,i),a=r("ArithmeticException"),c=r("IllegalArgumentException"),u=r("IllegalStateException"),l=r("NullPointerException");function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){if(!e)throw n?new n(t):new Error(t)}function m(e,t){if(null==e)throw new l(t+" must not be null");return e}function g(e,t,n){if(!(e instanceof t))throw new c(n+" must be an instance of "+(t.name?t.name:t)+(e&&e.constructor&&e.constructor.name?", but is "+e.constructor.name:""));return e}function y(e){throw new TypeError('abstract method "'+e+'" is not implemented')}var _=Object.freeze({__proto__:null,assert:p,requireNonNull:m,requireInstance:g,abstractMethodFail:y}),v=9007199254740991,E=-9007199254740991,w=function(){function e(){}return e.intDiv=function(t,n){var r=t/n;return r=e.roundDown(r),e.safeZero(r)},e.intMod=function(t,n){var r=t-e.intDiv(t,n)*n;return r=e.roundDown(r),e.safeZero(r)},e.roundDown=function(e){return e<0?Math.ceil(e):Math.floor(e)},e.floorDiv=function(t,n){var r=Math.floor(t/n);return e.safeZero(r)},e.floorMod=function(t,n){var r=t-e.floorDiv(t,n)*n;return e.safeZero(r)},e.safeAdd=function(t,n){if(e.verifyInt(t),e.verifyInt(n),0===t)return e.safeZero(n);if(0===n)return e.safeZero(t);var r=e.safeToInt(t+n);if(r===t||r===n)throw new a("Invalid addition beyond MAX_SAFE_INTEGER!");return r},e.safeSubtract=function(t,n){return e.verifyInt(t),e.verifyInt(n),0===t&&0===n?0:0===t?e.safeZero(-1*n):0===n?e.safeZero(t):e.safeToInt(t-n)},e.safeMultiply=function(t,n){if(e.verifyInt(t),e.verifyInt(n),1===t)return e.safeZero(n);if(1===n)return e.safeZero(t);if(0===t||0===n)return 0;var r=e.safeToInt(t*n);if(r/n!==t||t===E&&-1===n||n===E&&-1===t)throw new a("Multiplication overflows: "+t+" * "+n);return r},e.parseInt=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){var n=parseInt(t);return e.safeToInt(n)})),e.safeToInt=function(t){return e.verifyInt(t),e.safeZero(t)},e.verifyInt=function(e){if(null==e)throw new a("Invalid value: '"+e+"', using null or undefined as argument");if(isNaN(e))throw new a("Invalid int value, using NaN as argument");if(e%1!=0)throw new a("Invalid value: '"+e+"' is a float");if(e>v||e<E)throw new a("Calculation overflows an int: "+e)},e.safeZero=function(e){return 0===e?0:+e},e.compareNumbers=function(e,t){return e<t?-1:e>t?1:0},e.smi=function(e){return e>>>1&1073741824|3221225471&e},e.hash=function(t){if(t!=t||t===1/0)return 0;for(var n=t;t>4294967295;)n^=t/=4294967295;return e.smi(n)},e.hashCode=function(){for(var t=17,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var a=s[o];t=(t<<5)-t+e.hash(a)}return e.hash(t)},e}();w.MAX_SAFE_INTEGER=v,w.MIN_SAFE_INTEGER=E;var b=function(){function e(e){this._name=e}var t=e.prototype;return t.equals=function(e){return this===e},t.toString=function(){return this._name},t.toJSON=function(){return this.toString()},e}(),T=function(){function e(){}var t=e.prototype;return t.get=function(e){y("get")},t.units=function(){y("units")},t.addTo=function(e){y("addTo")},t.subtractFrom=function(e){y("subtractFrom")},e}();"undefined"!=typeof Symbol&&Symbol.toPrimitive&&(T.prototype[Symbol.toPrimitive]=function(e){if("number"!==e)return this.toString();throw new TypeError("A conversion from TemporalAmount to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var S=function(){function e(){}var t=e.prototype;return t.duration=function(){y("duration")},t.isDurationEstimated=function(){y("isDurationEstimated")},t.isDateBased=function(){y("isDateBased")},t.isTimeBased=function(){y("isTimeBased")},t.isSupportedBy=function(e){y("isSupportedBy")},t.addTo=function(e,t){y("addTo")},t.between=function(e,t){y("between")},e}(),A=function(e){function t(t,n){var r;return(r=e.call(this)||this)._seconds=w.safeToInt(t),r._nanos=w.safeToInt(n),r}h(t,e),t.ofDays=function(e){return t._create(w.safeMultiply(e,dt.SECONDS_PER_DAY),0)},t.ofHours=function(e){return t._create(w.safeMultiply(e,dt.SECONDS_PER_HOUR),0)},t.ofMinutes=function(e){return t._create(w.safeMultiply(e,dt.SECONDS_PER_MINUTE),0)},t.ofSeconds=function(e,n){void 0===n&&(n=0);var r=w.safeAdd(e,w.floorDiv(n,dt.NANOS_PER_SECOND)),i=w.floorMod(n,dt.NANOS_PER_SECOND);return t._create(r,i)},t.ofMillis=function(e){var n=w.intDiv(e,1e3),r=w.intMod(e,1e3);return r<0&&(r+=1e3,n--),t._create(n,1e6*r)},t.ofNanos=function(e){var t=w.intDiv(e,dt.NANOS_PER_SECOND),n=w.intMod(e,dt.NANOS_PER_SECOND);return n<0&&(n+=dt.NANOS_PER_SECOND,t--),this._create(t,n)},t.of=function(e,n){return t.ZERO.plus(e,n)},t.from=function(e){m(e,"amount"),g(e,T);var n=t.ZERO;return e.units().forEach((function(t){n=n.plus(e.get(t),t)})),n},t.between=function(e,t){m(e,"startInclusive"),m(t,"endExclusive");var n=e.until(t,C.SECONDS),r=0;if(e.isSupported(N.NANO_OF_SECOND)&&t.isSupported(N.NANO_OF_SECOND))try{var i=e.getLong(N.NANO_OF_SECOND);if(r=t.getLong(N.NANO_OF_SECOND)-i,n>0&&r<0)r+=dt.NANOS_PER_SECOND;else if(n<0&&r>0)r-=dt.NANOS_PER_SECOND;else if(0===n&&0!==r){var o=t.with(N.NANO_OF_SECOND,i);n=e.until(o,C.SECONDS)}}catch(e){}return this.ofSeconds(n,r)},t.parse=function(e){m(e,"text");var n=new RegExp("([-+]?)P(?:([-+]?[0-9]+)D)?(T(?:([-+]?[0-9]+)H)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)(?:[.,]([0-9]{0,9}))?S)?)?","i").exec(e);if(null!==n&&"T"===n[3]==0){var r="-"===n[1],i=n[2],s=n[4],a=n[5],c=n[6],u=n[7];if(null!=i||null!=s||null!=a||null!=c){var l=t._parseNumber(e,i,dt.SECONDS_PER_DAY,"days"),h=t._parseNumber(e,s,dt.SECONDS_PER_HOUR,"hours"),d=t._parseNumber(e,a,dt.SECONDS_PER_MINUTE,"minutes"),f=t._parseNumber(e,c,1,"seconds"),p=null!=c&&"-"===c.charAt(0),g=t._parseFraction(e,u,p?-1:1);try{return t._create(r,l,h,d,f,g)}catch(t){throw new o("Text cannot be parsed to a Duration: overflow",e,0,t)}}}throw new o("Text cannot be parsed to a Duration",e,0)},t._parseNumber=function(e,t,n,r){if(null==t)return 0;try{return"+"===t[0]&&(t=t.substring(1)),w.safeMultiply(parseFloat(t),n)}catch(t){throw new o("Text cannot be parsed to a Duration: "+r,e,0,t)}},t._parseFraction=function(e,t,n){return null==t||0===t.length?0:(t=(t+"000000000").substring(0,9),parseFloat(t)*n)},t._create=function(){return arguments.length<=2?t._createSecondsNanos(arguments[0],arguments[1]):t._createNegateDaysHoursMinutesSecondsNanos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},t._createNegateDaysHoursMinutesSecondsNanos=function(e,n,r,i,o,s){var a=w.safeAdd(n,w.safeAdd(r,w.safeAdd(i,o)));return e?t.ofSeconds(a,s).negated():t.ofSeconds(a,s)},t._createSecondsNanos=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=0),0===e&&0===n?t.ZERO:new t(e,n)};var n=t.prototype;return n.get=function(e){if(e===C.SECONDS)return this._seconds;if(e===C.NANOS)return this._nanos;throw new s("Unsupported unit: "+e)},n.units=function(){return[C.SECONDS,C.NANOS]},n.isZero=function(){return 0===this._seconds&&0===this._nanos},n.isNegative=function(){return this._seconds<0},n.seconds=function(){return this._seconds},n.nano=function(){return this._nanos},n.withSeconds=function(e){return t._create(e,this._nanos)},n.withNanos=function(e){return N.NANO_OF_SECOND.checkValidIntValue(e),t._create(this._seconds,e)},n.plusDuration=function(e){return m(e,"duration"),this.plus(e.seconds(),e.nano())},n.plus=function(e,t){return 1===arguments.length?this.plusDuration(e):2===arguments.length&&t instanceof S?this.plusAmountUnit(e,t):this.plusSecondsNanos(e,t)},n.plusAmountUnit=function(e,t){if(m(e,"amountToAdd"),m(t,"unit"),t===C.DAYS)return this.plusSecondsNanos(w.safeMultiply(e,dt.SECONDS_PER_DAY),0);if(t.isDurationEstimated())throw new s("Unit must not have an estimated duration");if(0===e)return this;if(t instanceof C){switch(t){case C.NANOS:return this.plusNanos(e);case C.MICROS:return this.plusSecondsNanos(1e3*w.intDiv(e,1e9),1e3*w.intMod(e,1e9));case C.MILLIS:return this.plusMillis(e);case C.SECONDS:return this.plusSeconds(e)}return this.plusSecondsNanos(w.safeMultiply(t.duration().seconds(),e),0)}var n=t.duration().multipliedBy(e);return this.plusSecondsNanos(n.seconds(),n.nano())},n.plusDays=function(e){return this.plusSecondsNanos(w.safeMultiply(e,dt.SECONDS_PER_DAY),0)},n.plusHours=function(e){return this.plusSecondsNanos(w.safeMultiply(e,dt.SECONDS_PER_HOUR),0)},n.plusMinutes=function(e){return this.plusSecondsNanos(w.safeMultiply(e,dt.SECONDS_PER_MINUTE),0)},n.plusSeconds=function(e){return this.plusSecondsNanos(e,0)},n.plusMillis=function(e){return this.plusSecondsNanos(w.intDiv(e,1e3),1e6*w.intMod(e,1e3))},n.plusNanos=function(e){return this.plusSecondsNanos(0,e)},n.plusSecondsNanos=function(e,n){if(m(e,"secondsToAdd"),m(n,"nanosToAdd"),0===e&&0===n)return this;var r=w.safeAdd(this._seconds,e);r=w.safeAdd(r,w.intDiv(n,dt.NANOS_PER_SECOND)),n=w.intMod(n,dt.NANOS_PER_SECOND);var i=w.safeAdd(this._nanos,n);return t.ofSeconds(r,i)},n.minus=function(e,t){return 1===arguments.length?this.minusDuration(e):this.minusAmountUnit(e,t)},n.minusDuration=function(e){m(e,"duration");var t=e.seconds(),n=e.nano();return t===E?this.plus(v,-n):this.plus(-t,-n)},n.minusAmountUnit=function(e,t){return m(e,"amountToSubtract"),m(t,"unit"),e===E?this.plusAmountUnit(v,t):this.plusAmountUnit(-e,t)},n.minusDays=function(e){return e===E?this.plusDays(v):this.plusDays(-e)},n.minusHours=function(e){return e===E?this.plusHours(v):this.plusHours(-e)},n.minusMinutes=function(e){return e===E?this.plusMinutes(v):this.plusMinutes(-e)},n.minusSeconds=function(e){return e===E?this.plusSeconds(v):this.plusSeconds(-e)},n.minusMillis=function(e){return e===E?this.plusMillis(v):this.plusMillis(-e)},n.minusNanos=function(e){return e===E?this.plusNanos(v):this.plusNanos(-e)},n.multipliedBy=function(e){if(0===e)return t.ZERO;if(1===e)return this;var n=w.safeMultiply(this._seconds,e),r=w.safeMultiply(this._nanos,e);return n+=w.intDiv(r,dt.NANOS_PER_SECOND),r=w.intMod(r,dt.NANOS_PER_SECOND),t.ofSeconds(n,r)},n.dividedBy=function(e){if(0===e)throw new a("Cannot divide by zero");if(1===e)return this;var n=w.intDiv(this._seconds,e),r=w.roundDown((this._seconds/e-n)*dt.NANOS_PER_SECOND),i=w.intDiv(this._nanos,e);return i=r+i,t.ofSeconds(n,i)},n.negated=function(){return this.multipliedBy(-1)},n.abs=function(){return this.isNegative()?this.negated():this},n.addTo=function(e){return m(e,"temporal"),0!==this._seconds&&(e=e.plus(this._seconds,C.SECONDS)),0!==this._nanos&&(e=e.plus(this._nanos,C.NANOS)),e},n.subtractFrom=function(e){return m(e,"temporal"),0!==this._seconds&&(e=e.minus(this._seconds,C.SECONDS)),0!==this._nanos&&(e=e.minus(this._nanos,C.NANOS)),e},n.toDays=function(){return w.intDiv(this._seconds,dt.SECONDS_PER_DAY)},n.toHours=function(){return w.intDiv(this._seconds,dt.SECONDS_PER_HOUR)},n.toMinutes=function(){return w.intDiv(this._seconds,dt.SECONDS_PER_MINUTE)},n.toMillis=function(){var e=Math.round(w.safeMultiply(this._seconds,1e3));return w.safeAdd(e,w.intDiv(this._nanos,1e6))},n.toNanos=function(){var e=w.safeMultiply(this._seconds,dt.NANOS_PER_SECOND);return w.safeAdd(e,this._nanos)},n.compareTo=function(e){m(e,"otherDuration"),g(e,t,"otherDuration");var n=w.compareNumbers(this._seconds,e.seconds());return 0!==n?n:this._nanos-e.nano()},n.equals=function(e){return this===e||e instanceof t&&this.seconds()===e.seconds()&&this.nano()===e.nano()},n.toString=function(){if(this===t.ZERO)return"PT0S";var e,n=w.intDiv(this._seconds,dt.SECONDS_PER_HOUR),r=w.intDiv(w.intMod(this._seconds,dt.SECONDS_PER_HOUR),dt.SECONDS_PER_MINUTE),i=w.intMod(this._seconds,dt.SECONDS_PER_MINUTE),o="PT";if(0!==n&&(o+=n+"H"),0!==r&&(o+=r+"M"),0===i&&0===this._nanos&&o.length>2)return o;if(i<0&&this._nanos>0?o+=-1===i?"-0":i+1:o+=i,this._nanos>0)for(o+=".",o+=e=(e=i<0?""+(2*dt.NANOS_PER_SECOND-this._nanos):""+(dt.NANOS_PER_SECOND+this._nanos)).slice(1,e.length);"0"===o.charAt(o.length-1);)o=o.slice(0,o.length-1);return o+"S"},n.toJSON=function(){return this.toString()},t}(T),O=function(){},C=function(e){function t(t,n){var r;return(r=e.call(this)||this)._name=t,r._duration=n,r}h(t,e);var n=t.prototype;return n.duration=function(){return this._duration},n.isDurationEstimated=function(){return this.isDateBased()||this===t.FOREVER},n.isDateBased=function(){return this.compareTo(t.DAYS)>=0&&this!==t.FOREVER},n.isTimeBased=function(){return this.compareTo(t.DAYS)<0},n.isSupportedBy=function(e){if(this===t.FOREVER)return!1;try{return e.plus(1,this),!0}catch(t){try{return e.plus(-1,this),!0}catch(e){return!1}}},n.addTo=function(e,t){return e.plus(t,this)},n.between=function(e,t){return e.until(t,this)},n.toString=function(){return this._name},n.compareTo=function(e){return this.duration().compareTo(e.duration())},t}(S),I=function(){function e(){}var t=e.prototype;return t.isDateBased=function(){y("isDateBased")},t.isTimeBased=function(){y("isTimeBased")},t.baseUnit=function(){y("baseUnit")},t.rangeUnit=function(){y("rangeUnit")},t.range=function(){y("range")},t.rangeRefinedBy=function(e){y("rangeRefinedBy")},t.getFrom=function(e){y("getFrom")},t.adjustInto=function(e,t){y("adjustInto")},t.isSupportedBy=function(e){y("isSupportedBy")},t.displayName=function(){y("displayName")},t.equals=function(e){y("equals")},t.name=function(){y("name")},e}(),R=function(){function e(e,t,n,r){p(!(e>t),"Smallest minimum value '"+e+"' must be less than largest minimum value '"+t+"'",c),p(!(n>r),"Smallest maximum value '"+n+"' must be less than largest maximum value '"+r+"'",c),p(!(t>r),"Minimum value '"+t+"' must be less than maximum value '"+r+"'",c),this._minSmallest=e,this._minLargest=t,this._maxLargest=r,this._maxSmallest=n}var t=e.prototype;return t.isFixed=function(){return this._minSmallest===this._minLargest&&this._maxSmallest===this._maxLargest},t.minimum=function(){return this._minSmallest},t.largestMinimum=function(){return this._minLargest},t.maximum=function(){return this._maxLargest},t.smallestMaximum=function(){return this._maxSmallest},t.isValidValue=function(e){return this.minimum()<=e&&e<=this.maximum()},t.checkValidValue=function(e,t){return this.isValidValue(e)?e:p(!1,null!=t?"Invalid value for "+t+" (valid values "+this.toString()+"): "+e:"Invalid value (valid values "+this.toString()+"): "+e,i)},t.checkValidIntValue=function(e,t){if(!1===this.isValidIntValue(e))throw new i("Invalid int value for "+t+": "+e);return e},t.isValidIntValue=function(e){return this.isIntValue()&&this.isValidValue(e)},t.isIntValue=function(){return this.minimum()>=w.MIN_SAFE_INTEGER&&this.maximum()<=w.MAX_SAFE_INTEGER},t.equals=function(t){return t===this||t instanceof e&&this._minSmallest===t._minSmallest&&this._minLargest===t._minLargest&&this._maxSmallest===t._maxSmallest&&this._maxLargest===t._maxLargest},t.hashCode=function(){return w.hashCode(this._minSmallest,this._minLargest,this._maxSmallest,this._maxLargest)},t.toString=function(){var e=this.minimum()+(this.minimum()!==this.largestMinimum()?"/"+this.largestMinimum():"");return(e+=" - ")+(this.smallestMaximum()+(this.smallestMaximum()!==this.maximum()?"/"+this.maximum():""))},e.of=function(){return 2===arguments.length?new e(arguments[0],arguments[0],arguments[1],arguments[1]):3===arguments.length?new e(arguments[0],arguments[0],arguments[1],arguments[2]):4===arguments.length?new e(arguments[0],arguments[1],arguments[2],arguments[3]):p(!1,"Invalid number of arguments "+arguments.length,c)},e}(),N=function(e){function t(t,n,r,i){var o;return(o=e.call(this)||this)._name=t,o._baseUnit=n,o._rangeUnit=r,o._range=i,o}h(t,e),t.byName=function(e){for(var n in t)if(t[n]&&t[n]instanceof t&&t[n].name()===e)return t[n]};var n=t.prototype;return n.name=function(){return this._name},n.baseUnit=function(){return this._baseUnit},n.rangeUnit=function(){return this._rangeUnit},n.range=function(){return this._range},n.displayName=function(){return this.toString()},n.checkValidValue=function(e){return this.range().checkValidValue(e,this)},n.checkValidIntValue=function(e){return this.range().checkValidIntValue(e,this)},n.isDateBased=function(){return this===t.DAY_OF_WEEK||this===t.ALIGNED_DAY_OF_WEEK_IN_MONTH||this===t.ALIGNED_DAY_OF_WEEK_IN_YEAR||this===t.DAY_OF_MONTH||this===t.DAY_OF_YEAR||this===t.EPOCH_DAY||this===t.ALIGNED_WEEK_OF_MONTH||this===t.ALIGNED_WEEK_OF_YEAR||this===t.MONTH_OF_YEAR||this===t.PROLEPTIC_MONTH||this===t.YEAR_OF_ERA||this===t.YEAR||this===t.ERA},n.isTimeBased=function(){return this===t.NANO_OF_SECOND||this===t.NANO_OF_DAY||this===t.MICRO_OF_SECOND||this===t.MICRO_OF_DAY||this===t.MILLI_OF_SECOND||this===t.MILLI_OF_DAY||this===t.SECOND_OF_MINUTE||this===t.SECOND_OF_DAY||this===t.MINUTE_OF_HOUR||this===t.MINUTE_OF_DAY||this===t.HOUR_OF_AMPM||this===t.CLOCK_HOUR_OF_AMPM||this===t.HOUR_OF_DAY||this===t.CLOCK_HOUR_OF_DAY||this===t.AMPM_OF_DAY},n.rangeRefinedBy=function(e){return e.range(this)},n.getFrom=function(e){return e.getLong(this)},n.toString=function(){return this.name()},n.equals=function(e){return this===e},n.adjustInto=function(e,t){return e.with(this,t)},n.isSupportedBy=function(e){return e.isSupported(this)},t}(I),P=function(){function e(){}return e.zoneId=function(){return e.ZONE_ID},e.chronology=function(){return e.CHRONO},e.precision=function(){return e.PRECISION},e.zone=function(){return e.ZONE},e.offset=function(){return e.OFFSET},e.localDate=function(){return e.LOCAL_DATE},e.localTime=function(){return e.LOCAL_TIME},e}(),D=function(){function e(){}var t=e.prototype;return t.query=function(e){return e===P.zoneId()||e===P.chronology()||e===P.precision()?null:e.queryFrom(this)},t.get=function(e){return this.range(e).checkValidIntValue(this.getLong(e),e)},t.getLong=function(e){y("getLong")},t.range=function(e){if(e instanceof N){if(this.isSupported(e))return e.range();throw new s("Unsupported field: "+e)}return e.rangeRefinedBy(this)},t.isSupported=function(e){y("isSupported")},e}(),k=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.queryFrom=function(e){y("queryFrom")},t}(b);function M(e,t){var n=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t}(k);return n.prototype.queryFrom=t,new n(e)}var L,x,U=function(e){function t(t,n){var r;return(r=e.call(this)||this)._ordinal=t,r._name=n,r}h(t,e);var n=t.prototype;return n.ordinal=function(){return this._ordinal},n.name=function(){return this._name},t.values=function(){return L.slice()},t.valueOf=function(e){for(var n=0;n<L.length&&L[n].name()!==e;n++);return t.of(n+1)},t.of=function(e){if(e<1||e>7)throw new i("Invalid value for DayOfWeek: "+e);return L[e-1]},t.from=function(e){if(p(null!=e,"temporal",l),e instanceof t)return e;try{return t.of(e.get(N.DAY_OF_WEEK))}catch(t){throw t instanceof i?new i("Unable to obtain DayOfWeek from TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""),t):t}},n.value=function(){return this._ordinal+1},n.displayName=function(e,t){throw new c("Pattern using (localized) text not implemented yet!")},n.isSupported=function(e){return e instanceof N?e===N.DAY_OF_WEEK:null!=e&&e.isSupportedBy(this)},n.range=function(e){if(e===N.DAY_OF_WEEK)return e.range();if(e instanceof N)throw new s("Unsupported field: "+e);return e.rangeRefinedBy(this)},n.get=function(e){return e===N.DAY_OF_WEEK?this.value():this.range(e).checkValidIntValue(this.getLong(e),e)},n.getLong=function(e){if(e===N.DAY_OF_WEEK)return this.value();if(e instanceof N)throw new s("Unsupported field: "+e);return e.getFrom(this)},n.plus=function(e){var t=w.floorMod(e,7);return L[w.floorMod(this._ordinal+(t+7),7)]},n.minus=function(e){return this.plus(-1*w.floorMod(e,7))},n.query=function(e){return e===P.precision()?C.DAYS:e===P.localDate()||e===P.localTime()||e===P.chronology()||e===P.zone()||e===P.zoneId()||e===P.offset()?null:(p(null!=e,"query",l),e.queryFrom(this))},n.adjustInto=function(e){return m(e,"temporal"),e.with(N.DAY_OF_WEEK,this.value())},n.equals=function(e){return this===e},n.toString=function(){return this._name},n.compareTo=function(e){return m(e,"other"),g(e,t,"other"),this._ordinal-e._ordinal},n.toJSON=function(){return this.toString()},t}(D),F=function(e){function t(t,n){var r;return(r=e.call(this)||this)._value=w.safeToInt(t),r._name=n,r}h(t,e);var n=t.prototype;return n.value=function(){return this._value},n.ordinal=function(){return this._value-1},n.name=function(){return this._name},n.displayName=function(e,t){throw new c("Pattern using (localized) text not implemented yet!")},n.isSupported=function(e){return null!==e&&(e instanceof N?e===N.MONTH_OF_YEAR:null!=e&&e.isSupportedBy(this))},n.get=function(e){return e===N.MONTH_OF_YEAR?this.value():this.range(e).checkValidIntValue(this.getLong(e),e)},n.getLong=function(e){if(e===N.MONTH_OF_YEAR)return this.value();if(e instanceof N)throw new s("Unsupported field: "+e);return e.getFrom(this)},n.plus=function(e){var n=w.intMod(e,12)+12,r=w.intMod(this.value()+n,12);return r=0===r?12:r,t.of(r)},n.minus=function(e){return this.plus(-1*w.intMod(e,12))},n.length=function(e){switch(this){case t.FEBRUARY:return e?29:28;case t.APRIL:case t.JUNE:case t.SEPTEMBER:case t.NOVEMBER:return 30;default:return 31}},n.minLength=function(){switch(this){case t.FEBRUARY:return 28;case t.APRIL:case t.JUNE:case t.SEPTEMBER:case t.NOVEMBER:return 30;default:return 31}},n.maxLength=function(){switch(this){case t.FEBRUARY:return 29;case t.APRIL:case t.JUNE:case t.SEPTEMBER:case t.NOVEMBER:return 30;default:return 31}},n.firstDayOfYear=function(e){var n=e?1:0;switch(this){case t.JANUARY:return 1;case t.FEBRUARY:return 32;case t.MARCH:return 60+n;case t.APRIL:return 91+n;case t.MAY:return 121+n;case t.JUNE:return 152+n;case t.JULY:return 182+n;case t.AUGUST:return 213+n;case t.SEPTEMBER:return 244+n;case t.OCTOBER:return 274+n;case t.NOVEMBER:return 305+n;case t.DECEMBER:default:return 335+n}},n.firstMonthOfQuarter=function(){switch(this){case t.JANUARY:case t.FEBRUARY:case t.MARCH:return t.JANUARY;case t.APRIL:case t.MAY:case t.JUNE:return t.APRIL;case t.JULY:case t.AUGUST:case t.SEPTEMBER:return t.JULY;case t.OCTOBER:case t.NOVEMBER:case t.DECEMBER:default:return t.OCTOBER}},n.query=function(t){return p(null!=t,"query() parameter must not be null",i),t===P.chronology()?nt.INSTANCE:t===P.precision()?C.MONTHS:e.prototype.query.call(this,t)},n.toString=function(){switch(this){case t.JANUARY:return"JANUARY";case t.FEBRUARY:return"FEBRUARY";case t.MARCH:return"MARCH";case t.APRIL:return"APRIL";case t.MAY:return"MAY";case t.JUNE:return"JUNE";case t.JULY:return"JULY";case t.AUGUST:return"AUGUST";case t.SEPTEMBER:return"SEPTEMBER";case t.OCTOBER:return"OCTOBER";case t.NOVEMBER:return"NOVEMBER";case t.DECEMBER:return"DECEMBER";default:return"unknown Month, value: "+this.value()}},n.toJSON=function(){return this.toString()},n.adjustInto=function(e){return e.with(N.MONTH_OF_YEAR,this.value())},n.compareTo=function(e){return m(e,"other"),g(e,t,"other"),this._value-e._value},n.equals=function(e){return this===e},t.valueOf=function(e){for(var n=0;n<x.length&&x[n].name()!==e;n++);return t.of(n+1)},t.values=function(){return x.slice()},t.of=function(e){return(e<1||e>12)&&p(!1,"Invalid value for MonthOfYear: "+e,i),x[e-1]},t.from=function(e){if(e instanceof t)return e;try{return t.of(e.get(N.MONTH_OF_YEAR))}catch(t){throw new i("Unable to obtain Month from TemporalAccessor: "+e+" of type "+(e&&null!=e.constructor?e.constructor.name:""),t)}},t}(D),B=/([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?/,q=function(e){function t(n,r,i){var o;o=e.call(this)||this;var s=w.safeToInt(n),a=w.safeToInt(r),c=w.safeToInt(i);return 0===s&&0===a&&0===c?(t.ZERO||(o._years=s,o._months=a,o._days=c,t.ZERO=f(o)),t.ZERO||f(o)):(o._years=s,o._months=a,o._days=c,o)}h(t,e),t.ofYears=function(e){return t.create(e,0,0)},t.ofMonths=function(e){return t.create(0,e,0)},t.ofWeeks=function(e){return t.create(0,0,w.safeMultiply(e,7))},t.ofDays=function(e){return t.create(0,0,e)},t.of=function(e,n,r){return t.create(e,n,r)},t.from=function(e){if(e instanceof t)return e;m(e,"amount");for(var n=0,r=0,o=0,s=e.units(),a=0;a<s.length;a++){var c=s[a],u=e.get(c);if(c===C.YEARS)n=w.safeToInt(u);else if(c===C.MONTHS)r=w.safeToInt(u);else{if(c!==C.DAYS)throw new i("Unit must be Years, Months or Days, but was "+c);o=w.safeToInt(u)}}return t.create(n,r,o)},t.between=function(e,t){return m(e,"startDate"),m(t,"endDate"),g(e,ut,"startDate"),g(t,ut,"endDate"),e.until(t)},t.parse=function(e){m(e,"text");try{return t._parse(e)}catch(t){throw t instanceof a?new o("Text cannot be parsed to a Period",e,0,t):t}},t._parse=function(e){var n=B.exec(e);if(null!=n){var r="-"===n[1]?-1:1,i=n[2],s=n[3],a=n[4],c=n[5];if(null!=i||null!=s||null!=a||null!=c){var u=t._parseNumber(e,i,r),l=t._parseNumber(e,s,r),h=t._parseNumber(e,a,r),d=t._parseNumber(e,c,r);return d=w.safeAdd(d,w.safeMultiply(h,7)),t.create(u,l,d)}}throw new o("Text cannot be parsed to a Period",e,0)},t._parseNumber=function(e,t,n){if(null==t)return 0;var r=w.parseInt(t);return w.safeMultiply(r,n)},t.create=function(e,n,r){return new t(e,n,r)};var n=t.prototype;return n.units=function(){return[C.YEARS,C.MONTHS,C.DAYS]},n.chronology=function(){return nt.INSTANCE},n.get=function(e){if(e===C.YEARS)return this._years;if(e===C.MONTHS)return this._months;if(e===C.DAYS)return this._days;throw new s("Unsupported unit: "+e)},n.isZero=function(){return this===t.ZERO},n.isNegative=function(){return this._years<0||this._months<0||this._days<0},n.years=function(){return this._years},n.months=function(){return this._months},n.days=function(){return this._days},n.withYears=function(e){return e===this._years?this:t.create(e,this._months,this._days)},n.withMonths=function(e){return e===this._months?this:t.create(this._years,e,this._days)},n.withDays=function(e){return e===this._days?this:t.create(this._years,this._months,e)},n.plus=function(e){var n=t.from(e);return t.create(w.safeAdd(this._years,n._years),w.safeAdd(this._months,n._months),w.safeAdd(this._days,n._days))},n.plusYears=function(e){return 0===e?this:t.create(w.safeToInt(w.safeAdd(this._years,e)),this._months,this._days)},n.plusMonths=function(e){return 0===e?this:t.create(this._years,w.safeToInt(w.safeAdd(this._months,e)),this._days)},n.plusDays=function(e){return 0===e?this:t.create(this._years,this._months,w.safeToInt(w.safeAdd(this._days,e)))},n.minus=function(e){var n=t.from(e);return t.create(w.safeSubtract(this._years,n._years),w.safeSubtract(this._months,n._months),w.safeSubtract(this._days,n._days))},n.minusYears=function(e){return this.plusYears(-1*e)},n.minusMonths=function(e){return this.plusMonths(-1*e)},n.minusDays=function(e){return this.plusDays(-1*e)},n.multipliedBy=function(e){return this===t.ZERO||1===e?this:t.create(w.safeMultiply(this._years,e),w.safeMultiply(this._months,e),w.safeMultiply(this._days,e))},n.negated=function(){return this.multipliedBy(-1)},n.normalized=function(){var e=this.toTotalMonths(),n=w.intDiv(e,12),r=w.intMod(e,12);return n===this._years&&r===this._months?this:t.create(w.safeToInt(n),r,this._days)},n.toTotalMonths=function(){return 12*this._years+this._months},n.addTo=function(e){return m(e,"temporal"),0!==this._years?e=0!==this._months?e.plus(this.toTotalMonths(),C.MONTHS):e.plus(this._years,C.YEARS):0!==this._months&&(e=e.plus(this._months,C.MONTHS)),0!==this._days&&(e=e.plus(this._days,C.DAYS)),e},n.subtractFrom=function(e){return m(e,"temporal"),0!==this._years?e=0!==this._months?e.minus(this.toTotalMonths(),C.MONTHS):e.minus(this._years,C.YEARS):0!==this._months&&(e=e.minus(this._months,C.MONTHS)),0!==this._days&&(e=e.minus(this._days,C.DAYS)),e},n.equals=function(e){if(this===e)return!0;if(e instanceof t){var n=e;return this._years===n._years&&this._months===n._months&&this._days===n._days}return!1},n.hashCode=function(){return w.hashCode(this._years,this._months,this._days)},n.toString=function(){if(this===t.ZERO)return"P0D";var e="P";return 0!==this._years&&(e+=this._years+"Y"),0!==this._months&&(e+=this._months+"M"),0!==this._days&&(e+=this._days+"D"),e},n.toJSON=function(){return this.toString()},t}(T),j=function(){function e(e){this._index=e,this._errorIndex=-1}var t=e.prototype;return t.getIndex=function(){return this._index},t.setIndex=function(e){this._index=e},t.getErrorIndex=function(){return this._errorIndex},t.setErrorIndex=function(e){this._errorIndex=e},e}(),H=function(){function e(){this._map={}}var t=e.prototype;return t.putAll=function(e){for(var t in e._map)this._map[t]=e._map[t];return this},t.containsKey=function(e){return this._map.hasOwnProperty(e.name())&&void 0!==this.get(e)},t.get=function(e){return this._map[e.name()]},t.put=function(e,t){return this.set(e,t)},t.set=function(e,t){return this._map[e.name()]=t,this},t.retainAll=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n].name();t[r]=this._map[r]}return this._map=t,this},t.remove=function(e){var t=e.name(),n=this._map[t];return this._map[t]=void 0,n},t.keySet=function(){return this._map},t.clear=function(){this._map={}},e}(),Y=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t}(b);Y.STRICT=new Y("STRICT"),Y.SMART=new Y("SMART"),Y.LENIENT=new Y("LENIENT");var V=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.isSupported=function(e){y("isSupported")},n.minus=function(e,t){return arguments.length<2?this._minusAmount(e):this._minusUnit(e,t)},n._minusAmount=function(e){return m(e,"amount"),g(e,T,"amount"),e.subtractFrom(this)},n._minusUnit=function(e,t){return m(e,"amountToSubtract"),m(t,"unit"),g(t,S,"unit"),this._plusUnit(-e,t)},n.plus=function(e,t){return arguments.length<2?this._plusAmount(e):this._plusUnit(e,t)},n._plusAmount=function(e){return m(e,"amount"),g(e,T,"amount"),e.addTo(this)},n._plusUnit=function(e,t){y("_plusUnit")},n.until=function(e,t){y("until")},n.with=function(e,t){return arguments.length<2?this._withAdjuster(e):this._withField(e,t)},n._withAdjuster=function(e){return m(e,"adjuster"),p("function"==typeof e.adjustInto,"adjuster must be a TemporalAdjuster",c),e.adjustInto(this)},n._withField=function(e,t){y("_withField")},t}(D);"undefined"!=typeof Symbol&&Symbol.toPrimitive&&(V.prototype[Symbol.toPrimitive]=function(e){if("number"!==e)return this.toString();throw new TypeError("A conversion from Temporal to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var $=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.isSupported=function(e){return e instanceof N||e instanceof C?e.isDateBased():null!=e&&e.isSupportedBy(this)},n.query=function(t){return t===P.chronology()?this.chronology():t===P.precision()?C.DAYS:t===P.localDate()?ut.ofEpochDay(this.toEpochDay()):t===P.localTime()||t===P.zone()||t===P.zoneId()||t===P.offset()?null:e.prototype.query.call(this,t)},n.adjustInto=function(e){return e.with(N.EPOCH_DAY,this.toEpochDay())},n.format=function(e){return m(e,"formatter"),g(e,Ge,"formatter"),e.format(this)},t}(V),z=function(){function e(){}return e.startsWith=function(e,t){return 0===e.indexOf(t)},e.hashCode=function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=0;r<t;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return w.smi(n)},e}(),G=function(){function e(){}e.systemDefault=function(){throw new i("not supported operation")},e.getAvailableZoneIds=function(){throw new i("not supported operation")},e.of=function(e){throw new i("not supported operation"+e)},e.ofOffset=function(e,t){throw new i("not supported operation"+e+t)},e.from=function(e){throw new i("not supported operation"+e)};var t=e.prototype;return t.id=function(){y("ZoneId.id")},t.rules=function(){y("ZoneId.rules")},t.normalized=function(){var e=this.rules();return e.isFixedOffset()?e.offset(pt.EPOCH):this},t.equals=function(t){return this===t||t instanceof e&&this.id()===t.id()},t.hashCode=function(){return z.hashCode(this.id())},t.toString=function(){return this.id()},t.toJSON=function(){return this.toString()},e}(),W=function(){function e(){}e.of=function(e){return m(e,"offset"),new K(e)};var t=e.prototype;return t.isFixedOffset=function(){y("ZoneRules.isFixedOffset")},t.offset=function(e){return e instanceof pt?this.offsetOfInstant(e):this.offsetOfLocalDateTime(e)},t.offsetOfInstant=function(e){y("ZoneRules.offsetInstant")},t.offsetOfEpochMilli=function(e){y("ZoneRules.offsetOfEpochMilli")},t.offsetOfLocalDateTime=function(e){y("ZoneRules.offsetLocalDateTime")},t.validOffsets=function(e){y("ZoneRules.validOffsets")},t.transition=function(e){y("ZoneRules.transition")},t.standardOffset=function(e){y("ZoneRules.standardOffset")},t.daylightSavings=function(e){y("ZoneRules.daylightSavings")},t.isDaylightSavings=function(e){y("ZoneRules.isDaylightSavings")},t.isValidOffset=function(e,t){y("ZoneRules.isValidOffset")},t.nextTransition=function(e){y("ZoneRules.nextTransition")},t.previousTransition=function(e){y("ZoneRules.previousTransition")},t.transitions=function(){y("ZoneRules.transitions")},t.transitionRules=function(){y("ZoneRules.transitionRules")},t.toString=function(){y("ZoneRules.toString")},t.toJSON=function(){return this.toString()},e}(),K=function(e){function t(t){var n;return(n=e.call(this)||this)._offset=t,n}h(t,e);var n=t.prototype;return n.isFixedOffset=function(){return!0},n.offsetOfInstant=function(){return this._offset},n.offsetOfEpochMilli=function(){return this._offset},n.offsetOfLocalDateTime=function(){return this._offset},n.validOffsets=function(){return[this._offset]},n.transition=function(){return null},n.standardOffset=function(){return this._offset},n.daylightSavings=function(){return A.ZERO},n.isDaylightSavings=function(){return!1},n.isValidOffset=function(e,t){return this._offset.equals(t)},n.nextTransition=function(){return null},n.previousTransition=function(){return null},n.transitions=function(){return[]},n.transitionRules=function(){return[]},n.equals=function(e){return this===e||e instanceof t&&this._offset.equals(e._offset)},n.toString=function(){return"FixedRules:"+this._offset.toString()},t}(W),Q={},X={},Z=function(e){function t(n){var r;return r=e.call(this)||this,t._validateTotalSeconds(n),r._totalSeconds=w.safeToInt(n),r._rules=W.of(f(r)),r._id=t._buildId(n),r}h(t,e);var n=t.prototype;return n.totalSeconds=function(){return this._totalSeconds},n.id=function(){return this._id},t._buildId=function(e){if(0===e)return"Z";var t=Math.abs(e),n=w.intDiv(t,dt.SECONDS_PER_HOUR),r=w.intMod(w.intDiv(t,dt.SECONDS_PER_MINUTE),dt.MINUTES_PER_HOUR),i=(e<0?"-":"+")+(n<10?"0":"")+n+(r<10?":0":":")+r,o=w.intMod(t,dt.SECONDS_PER_MINUTE);return 0!==o&&(i+=(o<10?":0":":")+o),i},t._validateTotalSeconds=function(e){if(Math.abs(e)>t.MAX_SECONDS)throw new i("Zone offset not in valid range: -18:00 to +18:00")},t._validate=function(e,t,n){if(e<-18||e>18)throw new i("Zone offset hours not in valid range: value "+e+" is not in the range -18 to 18");if(e>0){if(t<0||n<0)throw new i("Zone offset minutes and seconds must be positive because hours is positive")}else if(e<0){if(t>0||n>0)throw new i("Zone offset minutes and seconds must be negative because hours is negative")}else if(t>0&&n<0||t<0&&n>0)throw new i("Zone offset minutes and seconds must have the same sign");if(Math.abs(t)>59)throw new i("Zone offset minutes not in valid range: abs(value) "+Math.abs(t)+" is not in the range 0 to 59");if(Math.abs(n)>59)throw new i("Zone offset seconds not in valid range: abs(value) "+Math.abs(n)+" is not in the range 0 to 59");if(18===Math.abs(e)&&(Math.abs(t)>0||Math.abs(n)>0))throw new i("Zone offset not in valid range: -18:00 to +18:00")},t.of=function(e){m(e,"offsetId");var n,r,o,s=X[e];if(null!=s)return s;switch(e.length){case 2:e=e[0]+"0"+e[1];case 3:n=t._parseNumber(e,1,!1),r=0,o=0;break;case 5:n=t._parseNumber(e,1,!1),r=t._parseNumber(e,3,!1),o=0;break;case 6:n=t._parseNumber(e,1,!1),r=t._parseNumber(e,4,!0),o=0;break;case 7:n=t._parseNumber(e,1,!1),r=t._parseNumber(e,3,!1),o=t._parseNumber(e,5,!1);break;case 9:n=t._parseNumber(e,1,!1),r=t._parseNumber(e,4,!0),o=t._parseNumber(e,7,!0);break;default:throw new i("Invalid ID for ZoneOffset, invalid format: "+e)}var a=e[0];if("+"!==a&&"-"!==a)throw new i("Invalid ID for ZoneOffset, plus/minus not found when expected: "+e);return"-"===a?t.ofHoursMinutesSeconds(-n,-r,-o):t.ofHoursMinutesSeconds(n,r,o)},t._parseNumber=function(e,t,n){if(n&&":"!==e[t-1])throw new i("Invalid ID for ZoneOffset, colon not found when expected: "+e);var r=e[t],o=e[t+1];if(r<"0"||r>"9"||o<"0"||o>"9")throw new i("Invalid ID for ZoneOffset, non numeric characters found: "+e);return 10*(r.charCodeAt(0)-48)+(o.charCodeAt(0)-48)},t.ofHours=function(e){return t.ofHoursMinutesSeconds(e,0,0)},t.ofHoursMinutes=function(e,n){return t.ofHoursMinutesSeconds(e,n,0)},t.ofHoursMinutesSeconds=function(e,n,r){t._validate(e,n,r);var i=e*dt.SECONDS_PER_HOUR+n*dt.SECONDS_PER_MINUTE+r;return t.ofTotalSeconds(i)},t.ofTotalMinutes=function(e){var n=e*dt.SECONDS_PER_MINUTE;return t.ofTotalSeconds(n)},t.ofTotalSeconds=function(e){if(e%(15*dt.SECONDS_PER_MINUTE)==0){var n=e,r=Q[n];return null==r&&(r=new t(e),Q[n]=r,X[r.id()]=r),r}return new t(e)},n.rules=function(){return this._rules},n.get=function(e){return this.getLong(e)},n.getLong=function(e){if(e===N.OFFSET_SECONDS)return this._totalSeconds;if(e instanceof N)throw new i("Unsupported field: "+e);return e.getFrom(this)},n.query=function(e){return m(e,"query"),e===P.offset()||e===P.zone()?this:e===P.localDate()||e===P.localTime()||e===P.precision()||e===P.chronology()||e===P.zoneId()?null:e.queryFrom(this)},n.adjustInto=function(e){return e.with(N.OFFSET_SECONDS,this._totalSeconds)},n.compareTo=function(e){return m(e,"other"),e._totalSeconds-this._totalSeconds},n.equals=function(e){return this===e||e instanceof t&&this._totalSeconds===e._totalSeconds},n.hashCode=function(){return this._totalSeconds},n.toString=function(){return this._id},t}(G),J=function(e){function t(){var t;return(t=e.call(this)||this).fieldValues=new H,t.chrono=null,t.zone=null,t.date=null,t.time=null,t.leapSecond=!1,t.excessDays=null,t}h(t,e),t.create=function(e,n){var r=new t;return r._addFieldValue(e,n),r};var n=t.prototype;return n.getFieldValue0=function(e){return this.fieldValues.get(e)},n._addFieldValue=function(e,t){m(e,"field");var n=this.getFieldValue0(e);if(null!=n&&n!==t)throw new i("Conflict found: "+e+" "+n+" differs from "+e+" "+t+": "+this);return this._putFieldValue0(e,t)},n._putFieldValue0=function(e,t){return this.fieldValues.put(e,t),this},n.resolve=function(e,t){return null!=t&&this.fieldValues.retainAll(t),this._mergeDate(e),this._mergeTime(e),this._resolveTimeInferZeroes(e),null!=this.excessDays&&!1===this.excessDays.isZero()&&null!=this.date&&null!=this.time&&(this.date=this.date.plus(this.excessDays),this.excessDays=q.ZERO),this._resolveInstant(),this},n._mergeDate=function(e){this._checkDate(nt.INSTANCE.resolveDate(this.fieldValues,e))},n._checkDate=function(e){if(null!=e)for(var t in this._addObject(e),this.fieldValues.keySet()){var n=N.byName(t);if(n&&void 0!==this.fieldValues.get(n)&&n.isDateBased()){var r=void 0;try{r=e.getLong(n)}catch(e){if(e instanceof i)continue;throw e}var o=this.fieldValues.get(n);if(r!==o)throw new i("Conflict found: Field "+n+" "+r+" differs from "+n+" "+o+" derived from "+e)}}},n._mergeTime=function(e){if(this.fieldValues.containsKey(N.CLOCK_HOUR_OF_DAY)){var t=this.fieldValues.remove(N.CLOCK_HOUR_OF_DAY);e!==Y.LENIENT&&(e===Y.SMART&&0===t||N.CLOCK_HOUR_OF_DAY.checkValidValue(t)),this._addFieldValue(N.HOUR_OF_DAY,24===t?0:t)}if(this.fieldValues.containsKey(N.CLOCK_HOUR_OF_AMPM)){var n=this.fieldValues.remove(N.CLOCK_HOUR_OF_AMPM);e!==Y.LENIENT&&(e===Y.SMART&&0===n||N.CLOCK_HOUR_OF_AMPM.checkValidValue(n)),this._addFieldValue(N.HOUR_OF_AMPM,12===n?0:n)}if(e!==Y.LENIENT&&(this.fieldValues.containsKey(N.AMPM_OF_DAY)&&N.AMPM_OF_DAY.checkValidValue(this.fieldValues.get(N.AMPM_OF_DAY)),this.fieldValues.containsKey(N.HOUR_OF_AMPM)&&N.HOUR_OF_AMPM.checkValidValue(this.fieldValues.get(N.HOUR_OF_AMPM))),this.fieldValues.containsKey(N.AMPM_OF_DAY)&&this.fieldValues.containsKey(N.HOUR_OF_AMPM)){var r=this.fieldValues.remove(N.AMPM_OF_DAY),i=this.fieldValues.remove(N.HOUR_OF_AMPM);this._addFieldValue(N.HOUR_OF_DAY,12*r+i)}if(this.fieldValues.containsKey(N.NANO_OF_DAY)){var o=this.fieldValues.remove(N.NANO_OF_DAY);e!==Y.LENIENT&&N.NANO_OF_DAY.checkValidValue(o),this._addFieldValue(N.SECOND_OF_DAY,w.intDiv(o,1e9)),this._addFieldValue(N.NANO_OF_SECOND,w.intMod(o,1e9))}if(this.fieldValues.containsKey(N.MICRO_OF_DAY)){var s=this.fieldValues.remove(N.MICRO_OF_DAY);e!==Y.LENIENT&&N.MICRO_OF_DAY.checkValidValue(s),this._addFieldValue(N.SECOND_OF_DAY,w.intDiv(s,1e6)),this._addFieldValue(N.MICRO_OF_SECOND,w.intMod(s,1e6))}if(this.fieldValues.containsKey(N.MILLI_OF_DAY)){var a=this.fieldValues.remove(N.MILLI_OF_DAY);e!==Y.LENIENT&&N.MILLI_OF_DAY.checkValidValue(a),this._addFieldValue(N.SECOND_OF_DAY,w.intDiv(a,1e3)),this._addFieldValue(N.MILLI_OF_SECOND,w.intMod(a,1e3))}if(this.fieldValues.containsKey(N.SECOND_OF_DAY)){var c=this.fieldValues.remove(N.SECOND_OF_DAY);e!==Y.LENIENT&&N.SECOND_OF_DAY.checkValidValue(c),this._addFieldValue(N.HOUR_OF_DAY,w.intDiv(c,3600)),this._addFieldValue(N.MINUTE_OF_HOUR,w.intMod(w.intDiv(c,60),60)),this._addFieldValue(N.SECOND_OF_MINUTE,w.intMod(c,60))}if(this.fieldValues.containsKey(N.MINUTE_OF_DAY)){var u=this.fieldValues.remove(N.MINUTE_OF_DAY);e!==Y.LENIENT&&N.MINUTE_OF_DAY.checkValidValue(u),this._addFieldValue(N.HOUR_OF_DAY,w.intDiv(u,60)),this._addFieldValue(N.MINUTE_OF_HOUR,w.intMod(u,60))}if(e!==Y.LENIENT&&(this.fieldValues.containsKey(N.MILLI_OF_SECOND)&&N.MILLI_OF_SECOND.checkValidValue(this.fieldValues.get(N.MILLI_OF_SECOND)),this.fieldValues.containsKey(N.MICRO_OF_SECOND)&&N.MICRO_OF_SECOND.checkValidValue(this.fieldValues.get(N.MICRO_OF_SECOND))),this.fieldValues.containsKey(N.MILLI_OF_SECOND)&&this.fieldValues.containsKey(N.MICRO_OF_SECOND)){var l=this.fieldValues.remove(N.MILLI_OF_SECOND),h=this.fieldValues.get(N.MICRO_OF_SECOND);this._putFieldValue0(N.MICRO_OF_SECOND,1e3*l+w.intMod(h,1e3))}if(this.fieldValues.containsKey(N.MICRO_OF_SECOND)&&this.fieldValues.containsKey(N.NANO_OF_SECOND)){var d=this.fieldValues.get(N.NANO_OF_SECOND);this._putFieldValue0(N.MICRO_OF_SECOND,w.intDiv(d,1e3)),this.fieldValues.remove(N.MICRO_OF_SECOND)}if(this.fieldValues.containsKey(N.MILLI_OF_SECOND)&&this.fieldValues.containsKey(N.NANO_OF_SECOND)){var f=this.fieldValues.get(N.NANO_OF_SECOND);this._putFieldValue0(N.MILLI_OF_SECOND,w.intDiv(f,1e6)),this.fieldValues.remove(N.MILLI_OF_SECOND)}if(this.fieldValues.containsKey(N.MICRO_OF_SECOND)){var p=this.fieldValues.remove(N.MICRO_OF_SECOND);this._putFieldValue0(N.NANO_OF_SECOND,1e3*p)}else if(this.fieldValues.containsKey(N.MILLI_OF_SECOND)){var m=this.fieldValues.remove(N.MILLI_OF_SECOND);this._putFieldValue0(N.NANO_OF_SECOND,1e6*m)}},n._resolveTimeInferZeroes=function(e){var t=this.fieldValues.get(N.HOUR_OF_DAY),n=this.fieldValues.get(N.MINUTE_OF_HOUR),r=this.fieldValues.get(N.SECOND_OF_MINUTE),i=this.fieldValues.get(N.NANO_OF_SECOND);if(null!=t&&(null!=n||null==r&&null==i)&&(null==n||null!=r||null==i)){if(e!==Y.LENIENT){if(null!=t){e!==Y.SMART||24!==t||null!=n&&0!==n||null!=r&&0!==r||null!=i&&0!==i||(t=0,this.excessDays=q.ofDays(1));var o=N.HOUR_OF_DAY.checkValidIntValue(t);if(null!=n){var s=N.MINUTE_OF_HOUR.checkValidIntValue(n);if(null!=r){var a=N.SECOND_OF_MINUTE.checkValidIntValue(r);if(null!=i){var c=N.NANO_OF_SECOND.checkValidIntValue(i);this._addObject(dt.of(o,s,a,c))}else this._addObject(dt.of(o,s,a))}else null==i&&this._addObject(dt.of(o,s))}else null==r&&null==i&&this._addObject(dt.of(o,0))}}else if(null!=t){var u=t;if(null!=n)if(null!=r){null==i&&(i=0);var l=w.safeMultiply(u,36e11);l=w.safeAdd(l,w.safeMultiply(n,6e10)),l=w.safeAdd(l,w.safeMultiply(r,1e9)),l=w.safeAdd(l,i);var h=w.floorDiv(l,864e11),d=w.floorMod(l,864e11);this._addObject(dt.ofNanoOfDay(d)),this.excessDays=q.ofDays(h)}else{var f=w.safeMultiply(u,3600);f=w.safeAdd(f,w.safeMultiply(n,60));var p=w.floorDiv(f,86400),m=w.floorMod(f,86400);this._addObject(dt.ofSecondOfDay(m)),this.excessDays=q.ofDays(p)}else{var g=w.safeToInt(w.floorDiv(u,24));u=w.floorMod(u,24),this._addObject(dt.of(u,0)),this.excessDays=q.ofDays(g)}}this.fieldValues.remove(N.HOUR_OF_DAY),this.fieldValues.remove(N.MINUTE_OF_HOUR),this.fieldValues.remove(N.SECOND_OF_MINUTE),this.fieldValues.remove(N.NANO_OF_SECOND)}},n._addObject=function(e){e instanceof $?this.date=e:e instanceof dt&&(this.time=e)},n._resolveInstant=function(){if(null!=this.date&&null!=this.time){var e=this.fieldValues.get(N.OFFSET_SECONDS);if(null!=e){var t=Z.ofTotalSeconds(e),n=this.date.atTime(this.time).atZone(t).getLong(N.INSTANT_SECONDS);this.fieldValues.put(N.INSTANT_SECONDS,n)}else if(null!=this.zone){var r=this.date.atTime(this.time).atZone(this.zone).getLong(N.INSTANT_SECONDS);this.fieldValues.put(N.INSTANT_SECONDS,r)}}},n.build=function(e){return e.queryFrom(this)},n.isSupported=function(e){return null!=e&&(this.fieldValues.containsKey(e)&&void 0!==this.fieldValues.get(e)||null!=this.date&&this.date.isSupported(e)||null!=this.time&&this.time.isSupported(e))},n.getLong=function(e){m(e,"field");var t=this.getFieldValue0(e);if(null==t){if(null!=this.date&&this.date.isSupported(e))return this.date.getLong(e);if(null!=this.time&&this.time.isSupported(e))return this.time.getLong(e);throw new i("Field not found: "+e)}return t},n.query=function(e){return e===P.zoneId()?this.zone:e===P.chronology()?this.chrono:e===P.localDate()?null!=this.date?ut.from(this.date):null:e===P.localTime()?this.time:e===P.zone()||e===P.offset()?e.queryFrom(this):e===P.precision()?null:e.queryFrom(this)},t}(D),ee=function(){function e(){if(1===arguments.length){if(arguments[0]instanceof e)return void this._constructorSelf.apply(this,arguments);this._constructorFormatter.apply(this,arguments)}else this._constructorParam.apply(this,arguments);this._caseSensitive=!0,this._strict=!0,this._parsed=[new te(this)]}var t=e.prototype;return t._constructorParam=function(e,t,n){this._locale=e,this._symbols=t,this._overrideChronology=n},t._constructorFormatter=function(e){this._locale=e.locale(),this._symbols=e.decimalStyle(),this._overrideChronology=e.chronology()},t._constructorSelf=function(e){this._locale=e._locale,this._symbols=e._symbols,this._overrideChronology=e._overrideChronology,this._overrideZone=e._overrideZone,this._caseSensitive=e._caseSensitive,this._strict=e._strict,this._parsed=[new te(this)]},t.copy=function(){return new e(this)},t.symbols=function(){return this._symbols},t.isStrict=function(){return this._strict},t.setStrict=function(e){this._strict=e},t.locale=function(){return this._locale},t.setLocale=function(e){this._locale=e},t.startOptional=function(){this._parsed.push(this.currentParsed().copy())},t.endOptional=function(e){e?this._parsed.splice(this._parsed.length-2,1):this._parsed.splice(this._parsed.length-1,1)},t.isCaseSensitive=function(){return this._caseSensitive},t.setCaseSensitive=function(e){this._caseSensitive=e},t.subSequenceEquals=function(e,t,n,r,i){if(t+i>e.length||r+i>n.length)return!1;this.isCaseSensitive()||(e=e.toLowerCase(),n=n.toLowerCase());for(var o=0;o<i;o++)if(e[t+o]!==n[r+o])return!1;return!0},t.charEquals=function(e,t){return this.isCaseSensitive()?e===t:this.charEqualsIgnoreCase(e,t)},t.charEqualsIgnoreCase=function(e,t){return e===t||e.toLowerCase()===t.toLowerCase()},t.setParsedField=function(e,t,n,r){var i=this.currentParsed().fieldValues,o=i.get(e);return i.set(e,t),null!=o&&o!==t?~n:r},t.setParsedZone=function(e){m(e,"zone"),this.currentParsed().zone=e},t.getParsed=function(e){return this.currentParsed().fieldValues.get(e)},t.toParsed=function(){return this.currentParsed()},t.currentParsed=function(){return this._parsed[this._parsed.length-1]},t.setParsedLeapSecond=function(){this.currentParsed().leapSecond=!0},t.getEffectiveChronology=function(){var e=this.currentParsed().chrono;return null==e&&null==(e=this._overrideChronology)&&(e=nt.INSTANCE),e},e}(),te=function(e){function t(t){var n;return(n=e.call(this)||this).chrono=null,n.zone=null,n.fieldValues=new H,n.leapSecond=!1,n.dateTimeParseContext=t,n}h(t,e);var n=t.prototype;return n.copy=function(){var e=new t;return e.chrono=this.chrono,e.zone=this.zone,e.fieldValues.putAll(this.fieldValues),e.leapSecond=this.leapSecond,e.dateTimeParseContext=this.dateTimeParseContext,e},n.toString=function(){return this.fieldValues+", "+this.chrono+", "+this.zone},n.isSupported=function(e){return this.fieldValues.containsKey(e)},n.get=function(e){var t=this.fieldValues.get(e);return p(null!=t),t},n.query=function(t){return t===P.chronology()?this.chrono:t===P.zoneId()||t===P.zone()?this.zone:e.prototype.query.call(this,t)},n.toBuilder=function(){var e=new J;return e.fieldValues.putAll(this.fieldValues),e.chrono=this.dateTimeParseContext.getEffectiveChronology(),null!=this.zone?e.zone=this.zone:e.zone=this.overrideZone,e.leapSecond=this.leapSecond,e.excessDays=this.excessDays,e},t}(V),ne=function(){function e(t,n,r){2===arguments.length&&arguments[1]instanceof Ge?(this._temporal=e.adjust(t,n),this._locale=n.locale(),this._symbols=n.decimalStyle()):(this._temporal=t,this._locale=n,this._symbols=r),this._optional=0}e.adjust=function(e,t){return e};var t=e.prototype;return t.symbols=function(){return this._symbols},t.startOptional=function(){this._optional++},t.endOptional=function(){this._optional--},t.getValueQuery=function(e){var t=this._temporal.query(e);if(null==t&&0===this._optional)throw new i("Unable to extract value: "+this._temporal);return t},t.getValue=function(e){try{return this._temporal.getLong(e)}catch(e){if(e instanceof i&&this._optional>0)return null;throw e}},t.temporal=function(){return this._temporal},t.locale=function(){return this._locale},t.setDateTime=function(e){this._temporal=e},t.setLocale=function(e){this._locale=e},e}(),re={},ie=[0,90,181,273,0,91,182,274],oe=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.isDateBased=function(){return!0},n.isTimeBased=function(){return!1},n._isIso=function(){return!0},t._getWeekRangeByLocalDate=function(e){var n=t._getWeekBasedYear(e);return R.of(1,t._getWeekRangeByYear(n))},t._getWeekRangeByYear=function(e){var t=ut.of(e,1,1);return t.dayOfWeek()===U.THURSDAY||t.dayOfWeek()===U.WEDNESDAY&&t.isLeapYear()?53:52},t._getWeek=function(e){var n=e.dayOfWeek().ordinal(),r=e.dayOfYear()-1,i=r+(3-n),o=i-7*w.intDiv(i,7)-3;if(o<-3&&(o+=7),r<o)return t._getWeekRangeByLocalDate(e.withDayOfYear(180).minusYears(1)).maximum();var s=w.intDiv(r-o,7)+1;return 53===s&&!1===(-3===o||-2===o&&e.isLeapYear())&&(s=1),s},t._getWeekBasedYear=function(e){var t=e.year(),n=e.dayOfYear();if(n<=3)n-e.dayOfWeek().ordinal()<-2&&t--;else if(n>=363){var r=e.dayOfWeek().ordinal();(n=n-363-(e.isLeapYear()?1:0))-r>=0&&t++}return t},n.displayName=function(){return this.toString()},n.resolve=function(){return null},n.name=function(){return this.toString()},t}(I),se=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.toString=function(){return"DayOfQuarter"},n.baseUnit=function(){return C.DAYS},n.rangeUnit=function(){return ge},n.range=function(){return R.of(1,90,92)},n.isSupportedBy=function(e){return e.isSupported(N.DAY_OF_YEAR)&&e.isSupported(N.MONTH_OF_YEAR)&&e.isSupported(N.YEAR)&&this._isIso(e)},n.rangeRefinedBy=function(e){if(!1===e.isSupported(this))throw new s("Unsupported field: DayOfQuarter");var t=e.getLong(de);if(1===t){var n=e.getLong(N.YEAR);return nt.isLeapYear(n)?R.of(1,91):R.of(1,90)}return 2===t?R.of(1,91):3===t||4===t?R.of(1,92):this.range()},n.getFrom=function(e){if(!1===e.isSupported(this))throw new s("Unsupported field: DayOfQuarter");var t=e.get(N.DAY_OF_YEAR),n=e.get(N.MONTH_OF_YEAR),r=e.getLong(N.YEAR);return t-ie[w.intDiv(n-1,3)+(nt.isLeapYear(r)?4:0)]},n.adjustInto=function(e,t){var n=this.getFrom(e);return this.range().checkValidValue(t,this),e.with(N.DAY_OF_YEAR,e.getLong(N.DAY_OF_YEAR)+(t-n))},n.resolve=function(e,t,n){var r=e.get(N.YEAR),i=e.get(de);if(null==r||null==i)return null;var o,s=N.YEAR.checkValidIntValue(r),a=e.get(he);if(n===Y.LENIENT){var c=i;o=(o=(o=ut.of(s,1,1)).plusMonths(w.safeMultiply(w.safeSubtract(c,1),3))).plusDays(w.safeSubtract(a,1))}else{var u=de.range().checkValidIntValue(i,de);if(n===Y.STRICT){var l=92;1===u?l=nt.isLeapYear(s)?91:90:2===u&&(l=91),R.of(1,l).checkValidValue(a,this)}else this.range().checkValidValue(a,this);o=ut.of(s,3*(u-1)+1,1).plusDays(a-1)}return e.remove(this),e.remove(N.YEAR),e.remove(de),o},t}(oe),ae=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.toString=function(){return"QuarterOfYear"},n.baseUnit=function(){return ge},n.rangeUnit=function(){return C.YEARS},n.range=function(){return R.of(1,4)},n.isSupportedBy=function(e){return e.isSupported(N.MONTH_OF_YEAR)&&this._isIso(e)},n.rangeRefinedBy=function(e){return this.range()},n.getFrom=function(e){if(!1===e.isSupported(this))throw new s("Unsupported field: QuarterOfYear");var t=e.getLong(N.MONTH_OF_YEAR);return w.intDiv(t+2,3)},n.adjustInto=function(e,t){var n=this.getFrom(e);return this.range().checkValidValue(t,this),e.with(N.MONTH_OF_YEAR,e.getLong(N.MONTH_OF_YEAR)+3*(t-n))},t}(oe),ce=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.toString=function(){return"WeekOfWeekBasedYear"},n.baseUnit=function(){return C.WEEKS},n.rangeUnit=function(){return me},n.range=function(){return R.of(1,52,53)},n.isSupportedBy=function(e){return e.isSupported(N.EPOCH_DAY)&&this._isIso(e)},n.rangeRefinedBy=function(e){if(!1===e.isSupported(this))throw new s("Unsupported field: WeekOfWeekBasedYear");return oe._getWeekRangeByLocalDate(ut.from(e))},n.getFrom=function(e){if(!1===e.isSupported(this))throw new s("Unsupported field: WeekOfWeekBasedYear");return oe._getWeek(ut.from(e))},n.adjustInto=function(e,t){return this.range().checkValidValue(t,this),e.plus(w.safeSubtract(t,this.getFrom(e)),C.WEEKS)},n.resolve=function(e,t,n){var r=e.get(pe),i=e.get(N.DAY_OF_WEEK);if(null==r||null==i)return null;var o,s=pe.range().checkValidIntValue(r,pe),a=e.get(fe);if(n===Y.LENIENT){var c=i,u=0;c>7?(u=w.intDiv(c-1,7),c=w.intMod(c-1,7)+1):c<1&&(u=w.intDiv(c,7)-1,c=w.intMod(c,7)+7),o=ut.of(s,1,4).plusWeeks(a-1).plusWeeks(u).with(N.DAY_OF_WEEK,c)}else{var l=N.DAY_OF_WEEK.checkValidIntValue(i);if(n===Y.STRICT){var h=ut.of(s,1,4);oe._getWeekRangeByLocalDate(h).checkValidValue(a,this)}else this.range().checkValidValue(a,this);o=ut.of(s,1,4).plusWeeks(a-1).with(N.DAY_OF_WEEK,l)}return e.remove(this),e.remove(pe),e.remove(N.DAY_OF_WEEK),o},n.displayName=function(){return"Week"},t}(oe),ue=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.toString=function(){return"WeekBasedYear"},n.baseUnit=function(){return me},n.rangeUnit=function(){return C.FOREVER},n.range=function(){return N.YEAR.range()},n.isSupportedBy=function(e){return e.isSupported(N.EPOCH_DAY)&&this._isIso(e)},n.rangeRefinedBy=function(e){return N.YEAR.range()},n.getFrom=function(e){if(!1===e.isSupported(this))throw new s("Unsupported field: WeekBasedYear");return oe._getWeekBasedYear(ut.from(e))},n.adjustInto=function(e,t){if(!1===this.isSupportedBy(e))throw new s("Unsupported field: WeekBasedYear");var n=this.range().checkValidIntValue(t,pe),r=ut.from(e),i=r.get(N.DAY_OF_WEEK),o=oe._getWeek(r);53===o&&52===oe._getWeekRangeByYear(n)&&(o=52);var a=ut.of(n,1,4),c=i-a.get(N.DAY_OF_WEEK)+7*(o-1);return a=a.plusDays(c),e.with(a)},t}(oe),le=function(e){function t(t,n){var r;return(r=e.call(this)||this)._name=t,r._duration=n,r}h(t,e);var n=t.prototype;return n.duration=function(){return this._duration},n.isDurationEstimated=function(){return!0},n.isDateBased=function(){return!0},n.isTimeBased=function(){return!1},n.isSupportedBy=function(e){return e.isSupported(N.EPOCH_DAY)},n.addTo=function(e,t){switch(this){case me:var n=w.safeAdd(e.get(pe),t);return e.with(pe,n);case ge:return e.plus(w.intDiv(t,256),C.YEARS).plus(3*w.intMod(t,256),C.MONTHS);default:throw new u("Unreachable")}},n.between=function(e,t){switch(this){case me:return w.safeSubtract(t.getLong(pe),e.getLong(pe));case ge:return w.intDiv(e.until(t,C.MONTHS),3);default:throw new u("Unreachable")}},n.toString=function(){return this._name},t}(S),he=null,de=null,fe=null,pe=null,me=null,ge=null,ye=function(){function e(e,t,n,r){this._zeroDigit=e,this._zeroDigitCharCode=e.charCodeAt(0),this._positiveSign=t,this._negativeSign=n,this._decimalSeparator=r}var t=e.prototype;return t.positiveSign=function(){return this._positiveSign},t.withPositiveSign=function(t){return t===this._positiveSign?this:new e(this._zeroDigit,t,this._negativeSign,this._decimalSeparator)},t.negativeSign=function(){return this._negativeSign},t.withNegativeSign=function(t){return t===this._negativeSign?this:new e(this._zeroDigit,this._positiveSign,t,this._decimalSeparator)},t.zeroDigit=function(){return this._zeroDigit},t.withZeroDigit=function(t){return t===this._zeroDigit?this:new e(t,this._positiveSign,this._negativeSign,this._decimalSeparator)},t.decimalSeparator=function(){return this._decimalSeparator},t.withDecimalSeparator=function(t){return t===this._decimalSeparator?this:new e(this._zeroDigit,this._positiveSign,this._negativeSign,t)},t.convertToDigit=function(e){var t=e.charCodeAt(0)-this._zeroDigitCharCode;return t>=0&&t<=9?t:-1},t.convertNumberToI18N=function(e){if("0"===this._zeroDigit)return e;for(var t=this._zeroDigitCharCode-"0".charCodeAt(0),n="",r=0;r<e.length;r++)n+=String.fromCharCode(e.charCodeAt(r)+t);return n},t.equals=function(t){return this===t||t instanceof e&&this._zeroDigit===t._zeroDigit&&this._positiveSign===t._positiveSign&&this._negativeSign===t._negativeSign&&this._decimalSeparator===t._decimalSeparator},t.hashCode=function(){return this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator},t.toString=function(){return"DecimalStyle["+this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator+"]"},e.of=function(){throw new Error("not yet supported")},e.availableLocales=function(){throw new Error("not yet supported")},e}();ye.STANDARD=new ye("0","+","-",".");var _e=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.parse=function(e,n,r){switch(this){case t.NORMAL:return!e||!n;case t.ALWAYS:case t.EXCEEDS_PAD:return!0;default:return!n&&!r}},t}(b);_e.NORMAL=new _e("NORMAL"),_e.NEVER=new _e("NEVER"),_e.ALWAYS=new _e("ALWAYS"),_e.EXCEEDS_PAD=new _e("EXCEEDS_PAD"),_e.NOT_NEGATIVE=new _e("NOT_NEGATIVE");var ve=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.isStandalone=function(){switch(this){case t.FULL_STANDALONE:case t.SHORT_STANDALONE:case t.NARROW_STANDALONE:return!0;default:return!1}},n.asStandalone=function(){switch(this){case t.FULL:return t.FULL_STANDALONE;case t.SHORT:return t.SHORT_STANDALONE;case t.NARROW:return t.NARROW_STANDALONE;default:return this}},n.asNormal=function(){switch(this){case t.FULL_STANDALONE:return t.FULL;case t.SHORT_STANDALONE:return t.SHORT;case t.NARROW_STANDALONE:return t.NARROW;default:return this}},t}(b);ve.FULL=new ve("FULL"),ve.FULL_STANDALONE=new ve("FULL_STANDALONE"),ve.SHORT=new ve("SHORT"),ve.SHORT_STANDALONE=new ve("SHORT_STANDALONE"),ve.NARROW=new ve("NARROW"),ve.NARROW_STANDALONE=new ve("NARROW_STANDALONE");var Ee=function(){function e(e){if(e.length>1)throw new c('invalid literal, too long: "'+e+'"');this._literal=e}var t=e.prototype;return t.print=function(e,t){return t.append(this._literal),!0},t.parse=function(e,t,n){if(n===t.length)return~n;var r=t.charAt(n);return!1===e.charEquals(this._literal,r)?~n:n+this._literal.length},t.toString=function(){return"'"===this._literal?"''":"'"+this._literal+"'"},e}(),we=function(){function e(e,t){this._printerParsers=e,this._optional=t}var t=e.prototype;return t.withOptional=function(t){return t===this._optional?this:new e(this._printerParsers,t)},t.print=function(e,t){var n=t.length();this._optional&&e.startOptional();try{for(var r=0;r<this._printerParsers.length;r++)if(!1===this._printerParsers[r].print(e,t))return t.setLength(n),!0}finally{this._optional&&e.endOptional()}return!0},t.parse=function(e,t,n){if(this._optional){e.startOptional();for(var r=n,i=0;i<this._printerParsers.length;i++)if((r=this._printerParsers[i].parse(e,t,r))<0)return e.endOptional(!1),n;return e.endOptional(!0),r}for(var o=0;o<this._printerParsers.length&&!((n=this._printerParsers[o].parse(e,t,n))<0);o++);return n},t.toString=function(){var e="";if(null!=this._printerParsers){e+=this._optional?"[":"(";for(var t=0;t<this._printerParsers.length;t++)e+=this._printerParsers[t].toString();e+=this._optional?"]":")"}return e},e}(),be=function(){function e(e,t,n,r){if(m(e,"field"),!1===e.range().isFixed())throw new c("Field must have a fixed set of values: "+e);if(t<0||t>9)throw new c("Minimum width must be from 0 to 9 inclusive but was "+t);if(n<1||n>9)throw new c("Maximum width must be from 1 to 9 inclusive but was "+n);if(n<t)throw new c("Maximum width must exceed or equal the minimum width but "+n+" < "+t);this.field=e,this.minWidth=t,this.maxWidth=n,this.decimalPoint=r}var t=e.prototype;return t.print=function(e,t){var n=e.getValue(this.field);if(null===n)return!1;var r=e.symbols();if(0===n){if(this.minWidth>0){this.decimalPoint&&t.append(r.decimalSeparator());for(var i=0;i<this.minWidth;i++)t.append(r.zeroDigit())}}else{var o=this.convertToFraction(n,r.zeroDigit()),s=Math.min(Math.max(o.length,this.minWidth),this.maxWidth);if(1*(o=o.substr(0,s))>0)for(;o.length>this.minWidth&&"0"===o[o.length-1];)o=o.substr(0,o.length-1);var a=o;a=r.convertNumberToI18N(a),this.decimalPoint&&t.append(r.decimalSeparator()),t.append(a)}return!0},t.parse=function(e,t,n){var r=e.isStrict()?this.minWidth:0,i=e.isStrict()?this.maxWidth:9,o=t.length;if(n===o)return r>0?~n:n;if(this.decimalPoint){if(t[n]!==e.symbols().decimalSeparator())return r>0?~n:n;n++}var s=n+r;if(s>o)return~n;for(var a=Math.min(n+i,o),c=0,u=n;u<a;){var l=t.charAt(u++),h=e.symbols().convertToDigit(l);if(h<0){if(u<s)return~n;u--;break}c=10*c+h}var d=u-n,f=Math.pow(10,d),p=this.convertFromFraction(c,f);return e.setParsedField(this.field,p,n,u)},t.convertToFraction=function(e,t){var n=this.field.range();n.checkValidValue(e,this.field);for(var r=n.minimum(),i=n.maximum()-r+1,o=e-r,s=""+w.intDiv(1e9*o,i);s.length<9;)s=t+s;return s},t.convertFromFraction=function(e,t){var n=this.field.range(),r=n.minimum(),i=n.maximum()-r+1;return w.intDiv(e*i,t)},t.toString=function(){var e=this.decimalPoint?",DecimalPoint":"";return"Fraction("+this.field+","+this.minWidth+","+this.maxWidth+e+")"},e}(),Te=[0,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],Se=function(){function e(e,t,n,r,i){void 0===i&&(i=0),this._field=e,this._minWidth=t,this._maxWidth=n,this._signStyle=r,this._subsequentWidth=i}var t=e.prototype;return t.field=function(){return this._field},t.minWidth=function(){return this._minWidth},t.maxWidth=function(){return this._maxWidth},t.signStyle=function(){return this._signStyle},t.withFixedWidth=function(){return-1===this._subsequentWidth?this:new e(this._field,this._minWidth,this._maxWidth,this._signStyle,-1)},t.withSubsequentWidth=function(t){return new e(this._field,this._minWidth,this._maxWidth,this._signStyle,this._subsequentWidth+t)},t._isFixedWidth=function(){return-1===this._subsequentWidth||this._subsequentWidth>0&&this._minWidth===this._maxWidth&&this._signStyle===_e.NOT_NEGATIVE},t.print=function(e,t){var n=e.getValue(this._field);if(null==n)return!1;var r=this._getValue(e,n),o=e.symbols(),s=""+Math.abs(r);if(s.length>this._maxWidth)throw new i("Field "+this._field+" cannot be printed as the value "+r+" exceeds the maximum print width of "+this._maxWidth);if(s=o.convertNumberToI18N(s),r>=0)switch(this._signStyle){case _e.EXCEEDS_PAD:this._minWidth<15&&r>=Te[this._minWidth]&&t.append(o.positiveSign());break;case _e.ALWAYS:t.append(o.positiveSign())}else switch(this._signStyle){case _e.NORMAL:case _e.EXCEEDS_PAD:case _e.ALWAYS:t.append(o.negativeSign());break;case _e.NOT_NEGATIVE:throw new i("Field "+this._field+" cannot be printed as the value "+r+" cannot be negative according to the SignStyle")}for(var a=0;a<this._minWidth-s.length;a++)t.append(o.zeroDigit());return t.append(s),!0},t.parse=function(e,t,n){var r=t.length;if(n===r)return~n;p(n>=0&&n<r);var i=t.charAt(n),o=!1,s=!1;if(i===e.symbols().positiveSign()){if(!1===this._signStyle.parse(!0,e.isStrict(),this._minWidth===this._maxWidth))return~n;s=!0,n++}else if(i===e.symbols().negativeSign()){if(!1===this._signStyle.parse(!1,e.isStrict(),this._minWidth===this._maxWidth))return~n;o=!0,n++}else if(this._signStyle===_e.ALWAYS&&e.isStrict())return~n;var c=e.isStrict()||this._isFixedWidth()?this._minWidth:1,u=n+c;if(u>r)return~n;for(var l=(e.isStrict()||this._isFixedWidth()?this._maxWidth:9)+Math.max(this._subsequentWidth,0),h=0,d=n,f=0;f<2;f++){for(var m=Math.min(d+l,r);d<m;){var g=t.charAt(d++),y=e.symbols().convertToDigit(g);if(y<0){if(--d<u)return~n;break}if(d-n>15)throw new a("number text exceeds length");h=10*h+y}if(!(this._subsequentWidth>0&&0===f))break;var _=d-n;l=Math.max(c,_-this._subsequentWidth),d=n,h=0}if(o){if(0===h&&e.isStrict())return~(n-1);0!==h&&(h=-h)}else if(this._signStyle===_e.EXCEEDS_PAD&&e.isStrict()){var v=d-n;if(s){if(v<=this._minWidth)return~(n-1)}else if(v>this._minWidth)return~n}return this._setValue(e,h,n,d)},t._getValue=function(e,t){return t},t._setValue=function(e,t,n,r){return e.setParsedField(this._field,t,n,r)},t.toString=function(){return 1===this._minWidth&&15===this._maxWidth&&this._signStyle===_e.NORMAL?"Value("+this._field+")":this._minWidth===this._maxWidth&&this._signStyle===_e.NOT_NEGATIVE?"Value("+this._field+","+this._minWidth+")":"Value("+this._field+","+this._minWidth+","+this._maxWidth+","+this._signStyle+")"},e}(),Ae=function(e){function t(t,n,r,o,s){var a;if(a=e.call(this,t,n,r,_e.NOT_NEGATIVE)||this,n<1||n>10)throw new c("The width must be from 1 to 10 inclusive but was "+n);if(r<1||r>10)throw new c("The maxWidth must be from 1 to 10 inclusive but was "+r);if(r<n)throw new c("The maxWidth must be greater than the width");if(null===s){if(!1===t.range().isValidValue(o))throw new c("The base value must be within the range of the field");if(o+Te[n]>w.MAX_SAFE_INTEGER)throw new i("Unable to add printer-parser as the range exceeds the capacity of an int")}return a._baseValue=o,a._baseDate=s,a}h(t,e);var n=t.prototype;return n._getValue=function(e,t){var n=Math.abs(t),r=this._baseValue;return null!==this._baseDate&&(e.temporal(),r=nt.INSTANCE.date(this._baseDate).get(this._field)),t>=r&&t<r+Te[this._minWidth]?n%Te[this._minWidth]:n%Te[this._maxWidth]},n._setValue=function(e,t,n,r){var i=this._baseValue;if(null!=this._baseDate&&(i=e.getEffectiveChronology().date(this._baseDate).get(this._field)),r-n===this._minWidth&&t>=0){var o=Te[this._minWidth],s=i-i%o;(t=i>0?s+t:s-t)<i&&(t+=o)}return e.setParsedField(this._field,t,n,r)},n.withFixedWidth=function(){return-1===this._subsequentWidth?this:new t(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate)},n.withSubsequentWidth=function(e){return new t(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,this._subsequentWidth+e)},n.isFixedWidth=function(t){return!1!==t.isStrict()&&e.prototype.isFixedWidth.call(this,t)},n.toString=function(){return"ReducedValue("+this._field+","+this._minWidth+","+this._maxWidth+","+(null!=this._baseDate?this._baseDate:this._baseValue)+")"},t}(Se),Oe=["+HH","+HHmm","+HH:mm","+HHMM","+HH:MM","+HHMMss","+HH:MM:ss","+HHMMSS","+HH:MM:SS"],Ce=function(){function e(e,t){m(e,"noOffsetText"),m(t,"pattern"),this.noOffsetText=e,this.type=this._checkPattern(t)}var t=e.prototype;return t._checkPattern=function(e){for(var t=0;t<Oe.length;t++)if(Oe[t]===e)return t;throw new c("Invalid zone offset pattern: "+e)},t.print=function(e,t){var n=e.getValue(N.OFFSET_SECONDS);if(null==n)return!1;var r=w.safeToInt(n);if(0===r)t.append(this.noOffsetText);else{var i=Math.abs(w.intMod(w.intDiv(r,3600),100)),o=Math.abs(w.intMod(w.intDiv(r,60),60)),s=Math.abs(w.intMod(r,60)),a=t.length(),c=i;t.append(r<0?"-":"+").appendChar(w.intDiv(i,10)+"0").appendChar(w.intMod(i,10)+"0"),(this.type>=3||this.type>=1&&o>0)&&(t.append(this.type%2==0?":":"").appendChar(w.intDiv(o,10)+"0").appendChar(o%10+"0"),c+=o,(this.type>=7||this.type>=5&&s>0)&&(t.append(this.type%2==0?":":"").appendChar(w.intDiv(s,10)+"0").appendChar(s%10+"0"),c+=s)),0===c&&(t.setLength(a),t.append(this.noOffsetText))}return!0},t.parse=function(e,t,n){var r=t.length,i=this.noOffsetText.length;if(0===i){if(n===r)return e.setParsedField(N.OFFSET_SECONDS,0,n,n)}else{if(n===r)return~n;if(e.subSequenceEquals(t,n,this.noOffsetText,0,i))return e.setParsedField(N.OFFSET_SECONDS,0,n,n+i)}var o=t[n];if("+"===o||"-"===o){var s="-"===o?-1:1,a=[0,0,0,0];if(a[0]=n+1,!1===(this._parseNumber(a,1,t,!0)||this._parseNumber(a,2,t,this.type>=3)||this._parseNumber(a,3,t,!1))){var c=w.safeZero(s*(3600*a[1]+60*a[2]+a[3]));return e.setParsedField(N.OFFSET_SECONDS,c,n,a[0])}}return 0===i?e.setParsedField(N.OFFSET_SECONDS,0,n,n+i):~n},t._parseNumber=function(e,t,n,r){if((this.type+3)/2<t)return!1;var i=e[0];if(this.type%2==0&&t>1){if(i+1>n.length||":"!==n[i])return r;i++}if(i+2>n.length)return r;var o=n[i++],s=n[i++];if(o<"0"||o>"9"||s<"0"||s>"9")return r;var a=10*(o.charCodeAt(0)-48)+(s.charCodeAt(0)-48);return a<0||a>59?r:(e[t]=a,e[0]=i,!1)},t.toString=function(){var e=this.noOffsetText.replace("'","''");return"Offset("+Oe[this.type]+",'"+e+"')"},e}();Ce.INSTANCE_ID=new Ce("Z","+HH:MM:ss"),Ce.PATTERNS=Oe;var Ie=function(){function e(e,t,n){this._printerParser=e,this._padWidth=t,this._padChar=n}var t=e.prototype;return t.print=function(e,t){var n=t.length();if(!1===this._printerParser.print(e,t))return!1;var r=t.length()-n;if(r>this._padWidth)throw new i("Cannot print as output of "+r+" characters exceeds pad width of "+this._padWidth);for(var o=0;o<this._padWidth-r;o++)t.insert(n,this._padChar);return!0},t.parse=function(e,t,n){var r=e.isStrict(),i=e.isCaseSensitive();if(p(!(n>t.length)),p(n>=0),n===t.length)return~n;var o=n+this._padWidth;if(o>t.length){if(r)return~n;o=t.length}for(var s=n;s<o&&(i?t[s]===this._padChar:e.charEquals(t[s],this._padChar));)s++;t=t.substring(0,o);var a=this._printerParser.parse(e,t,s);return a!==o&&r?~(n+s):a},t.toString=function(){return"Pad("+this._printerParser+","+this._padWidth+(" "===this._padChar?")":",'"+this._padChar+"')")},e}(),Re=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.print=function(){return!0},n.parse=function(e,n,r){switch(this){case t.SENSITIVE:e.setCaseSensitive(!0);break;case t.INSENSITIVE:e.setCaseSensitive(!1);break;case t.STRICT:e.setStrict(!0);break;case t.LENIENT:e.setStrict(!1)}return r},n.toString=function(){switch(this){case t.SENSITIVE:return"ParseCaseSensitive(true)";case t.INSENSITIVE:return"ParseCaseSensitive(false)";case t.STRICT:return"ParseStrict(true)";case t.LENIENT:return"ParseStrict(false)"}},t}(b);Re.SENSITIVE=new Re("SENSITIVE"),Re.INSENSITIVE=new Re("INSENSITIVE"),Re.STRICT=new Re("STRICT"),Re.LENIENT=new Re("LENIENT");var Ne,Pe,De,ke=function(){function e(e){this._literal=e}var t=e.prototype;return t.print=function(e,t){return t.append(this._literal),!0},t.parse=function(e,t,n){return p(!(n>t.length||n<0)),!1===e.subSequenceEquals(t,n,this._literal,0,this._literal.length)?~n:n+this._literal.length},t.toString=function(){return"'"+this._literal.replace("'","''")+"'"},e}(),Me=function(){function e(){}return e.getRules=function(e){throw new i("unsupported ZoneId:"+e)},e.getAvailableZoneIds=function(){return[]},e}(),Le=function(e){function t(t,n){var r;return(r=e.call(this)||this)._id=t,r._rules=n,r}h(t,e),t.ofId=function(e){return new t(e,Me.getRules(e))};var n=t.prototype;return n.id=function(){return this._id},n.rules=function(){return this._rules},t}(G),xe=function(){function e(e,t){this.query=e,this.description=t}var t=e.prototype;return t.print=function(e,t){var n=e.getValueQuery(this.query);return null!=n&&(t.append(n.id()),!0)},t.parse=function(e,t,n){var r=t.length;if(n>r)return~n;if(n===r)return~n;var i=t.charAt(n);if("+"===i||"-"===i){var o=e.copy(),s=Ce.INSTANCE_ID.parse(o,t,n);if(s<0)return s;var a=o.getParsed(N.OFFSET_SECONDS),c=Z.ofTotalSeconds(a);return e.setParsedZone(c),s}if(r>=n+2){var u=t.charAt(n+1);if(e.charEquals(i,"U")&&e.charEquals(u,"T"))return r>=n+3&&e.charEquals(t.charAt(n+2),"C")?this._parsePrefixedOffset(e,t,n,n+3):this._parsePrefixedOffset(e,t,n,n+2);if(e.charEquals(i,"G")&&r>=n+3&&e.charEquals(u,"M")&&e.charEquals(t.charAt(n+2),"T"))return this._parsePrefixedOffset(e,t,n,n+3)}if("SYSTEM"===t.substr(n,6))return e.setParsedZone(G.systemDefault()),n+6;if(e.charEquals(i,"Z"))return e.setParsedZone(Z.UTC),n+1;var l=Me.getAvailableZoneIds();Be.size!==l.length&&(Be=Ue.createTreeMap(l));for(var h=r-n,d=Be.treeMap,f=null,p=0;null!=d;){var m=t.substr(n,Math.min(d.length,h));null!=(d=d.get(m))&&d.isLeaf&&(f=m,p=d.length)}return null!=f?(e.setParsedZone(Le.ofId(f)),n+p):~n},t._parsePrefixedOffset=function(e,t,n,r){var i=t.substring(n,r).toUpperCase(),o=e.copy();if(r<t.length&&e.charEquals(t.charAt(r),"Z"))return e.setParsedZone(G.ofOffset(i,Z.UTC)),r;var s=Ce.INSTANCE_ID.parse(o,t,r);if(s<0)return e.setParsedZone(G.ofOffset(i,Z.UTC)),r;var a=o.getParsed(N.OFFSET_SECONDS),c=Z.ofTotalSeconds(a);return e.setParsedZone(G.ofOffset(i,c)),s},t.toString=function(){return this.description},e}(),Ue=function(){function e(e,t){this.size=e,this.treeMap=t}return e.createTreeMap=function(t){for(var n=t.sort((function(e,t){return e.length-t.length})),r=new Fe(n[0].length,!1),i=0;i<n.length;i++)r.add(n[i]);return new e(n.length,r)},e}(),Fe=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=!1),this.length=e,this.isLeaf=t,this._treeMap={}}var t=e.prototype;return t.add=function(t){var n=t.length;if(n===this.length)this._treeMap[t]=new e(n,!0);else if(n>this.length){var r=t.substr(0,this.length),i=this._treeMap[r];null==i&&(i=new e(n,!1),this._treeMap[r]=i),i.add(t)}},t.get=function(e){return this._treeMap[e]},e}(),Be=new Ue([]),qe=15,je=function(){function e(){this._active=this,this._parent=null,this._printerParsers=[],this._optional=!1,this._padNextWidth=0,this._padNextChar=null,this._valueParserIndex=-1}e._of=function(t,n){m(t,"parent"),m(n,"optional");var r=new e;return r._parent=t,r._optional=n,r};var t=e.prototype;return t.parseCaseSensitive=function(){return this._appendInternalPrinterParser(Re.SENSITIVE),this},t.parseCaseInsensitive=function(){return this._appendInternalPrinterParser(Re.INSENSITIVE),this},t.parseStrict=function(){return this._appendInternalPrinterParser(Re.STRICT),this},t.parseLenient=function(){return this._appendInternalPrinterParser(Re.LENIENT),this},t.parseDefaulting=function(e,t){return m(e),this._appendInternal(new $e(e,t)),this},t.appendValue=function(){return 1===arguments.length?this._appendValue1.apply(this,arguments):2===arguments.length?this._appendValue2.apply(this,arguments):this._appendValue4.apply(this,arguments)},t._appendValue1=function(e){return m(e),this._appendValuePrinterParser(new Se(e,1,qe,_e.NORMAL)),this},t._appendValue2=function(e,t){if(m(e),t<1||t>qe)throw new c("The width must be from 1 to 15 inclusive but was "+t);var n=new Se(e,t,t,_e.NOT_NEGATIVE);return this._appendValuePrinterParser(n),this},t._appendValue4=function(e,t,n,r){if(m(e),m(r),t===n&&r===_e.NOT_NEGATIVE)return this._appendValue2(e,n);if(t<1||t>qe)throw new c("The minimum width must be from 1 to 15 inclusive but was "+t);if(n<1||n>qe)throw new c("The minimum width must be from 1 to 15 inclusive but was "+n);if(n<t)throw new c("The maximum width must exceed or equal the minimum width but "+n+" < "+t);var i=new Se(e,t,n,r);return this._appendValuePrinterParser(i),this},t.appendValueReduced=function(){return 4===arguments.length&&arguments[3]instanceof $?this._appendValueReducedFieldWidthMaxWidthBaseDate.apply(this,arguments):this._appendValueReducedFieldWidthMaxWidthBaseValue.apply(this,arguments)},t._appendValueReducedFieldWidthMaxWidthBaseValue=function(e,t,n,r){m(e,"field");var i=new Ae(e,t,n,r,null);return this._appendValuePrinterParser(i),this},t._appendValueReducedFieldWidthMaxWidthBaseDate=function(e,t,n,r){m(e,"field"),m(r,"baseDate"),g(r,$,"baseDate");var i=new Ae(e,t,n,0,r);return this._appendValuePrinterParser(i),this},t._appendValuePrinterParser=function(e){if(p(null!=e),this._active._valueParserIndex>=0&&this._active._printerParsers[this._active._valueParserIndex]instanceof Se){var t=this._active._valueParserIndex,n=this._active._printerParsers[t];e.minWidth()===e.maxWidth()&&e.signStyle()===_e.NOT_NEGATIVE?(n=n.withSubsequentWidth(e.maxWidth()),this._appendInternal(e.withFixedWidth()),this._active._valueParserIndex=t):(n=n.withFixedWidth(),this._active._valueParserIndex=this._appendInternal(e)),this._active._printerParsers[t]=n}else this._active._valueParserIndex=this._appendInternal(e);return this},t.appendFraction=function(e,t,n,r){return this._appendInternal(new be(e,t,n,r)),this},t.appendInstant=function(e){if(void 0===e&&(e=-2),e<-2||e>9)throw new c("Invalid fractional digits: "+e);return this._appendInternal(new Ve(e)),this},t.appendOffsetId=function(){return this._appendInternal(Ce.INSTANCE_ID),this},t.appendOffset=function(e,t){return this._appendInternalPrinterParser(new Ce(t,e)),this},t.appendZoneId=function(){return this._appendInternal(new xe(P.zoneId(),"ZoneId()")),this},t.appendPattern=function(e){return m(e,"pattern"),this._parsePattern(e),this},t.appendZoneText=function(){throw new c("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t.appendText=function(){throw new c("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t.appendLocalizedOffset=function(){throw new c("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t.appendWeekField=function(){throw new c("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t._parsePattern=function(e){for(var t={G:N.ERA,y:N.YEAR_OF_ERA,u:N.YEAR,Q:re.QUARTER_OF_YEAR,q:re.QUARTER_OF_YEAR,M:N.MONTH_OF_YEAR,L:N.MONTH_OF_YEAR,D:N.DAY_OF_YEAR,d:N.DAY_OF_MONTH,F:N.ALIGNED_DAY_OF_WEEK_IN_MONTH,E:N.DAY_OF_WEEK,c:N.DAY_OF_WEEK,e:N.DAY_OF_WEEK,a:N.AMPM_OF_DAY,H:N.HOUR_OF_DAY,k:N.CLOCK_HOUR_OF_DAY,K:N.HOUR_OF_AMPM,h:N.CLOCK_HOUR_OF_AMPM,m:N.MINUTE_OF_HOUR,s:N.SECOND_OF_MINUTE,S:N.NANO_OF_SECOND,A:N.MILLI_OF_DAY,n:N.NANO_OF_SECOND,N:N.NANO_OF_DAY},n=0;n<e.length;n++){var r=e.charAt(n);if(r>="A"&&r<="Z"||r>="a"&&r<="z"){for(var i=n++;n<e.length&&e.charAt(n)===r;n++);var o=n-i;if("p"===r){var s=0;if(n<e.length&&((r=e.charAt(n))>="A"&&r<="Z"||r>="a"&&r<="z")){for(s=o,i=n++;n<e.length&&e.charAt(n)===r;n++);o=n-i}if(0===s)throw new c("Pad letter 'p' must be followed by valid pad pattern: "+e);this.padNext(s)}var a=t[r];if(null!=a)this._parseField(r,o,a);else if("z"===r){if(o>4)throw new c("Too many pattern letters: "+r);4===o?this.appendZoneText(ve.FULL):this.appendZoneText(ve.SHORT)}else if("V"===r){if(2!==o)throw new c("Pattern letter count must be 2: "+r);this.appendZoneId()}else if("Z"===r)if(o<4)this.appendOffset("+HHMM","+0000");else if(4===o)this.appendLocalizedOffset(ve.FULL);else{if(5!==o)throw new c("Too many pattern letters: "+r);this.appendOffset("+HH:MM:ss","Z")}else if("O"===r)if(1===o)this.appendLocalizedOffset(ve.SHORT);else{if(4!==o)throw new c("Pattern letter count must be 1 or 4: "+r);this.appendLocalizedOffset(ve.FULL)}else if("X"===r){if(o>5)throw new c("Too many pattern letters: "+r);this.appendOffset(Ce.PATTERNS[o+(1===o?0:1)],"Z")}else if("x"===r){if(o>5)throw new c("Too many pattern letters: "+r);var u=1===o?"+00":o%2==0?"+0000":"+00:00";this.appendOffset(Ce.PATTERNS[o+(1===o?0:1)],u)}else if("W"===r){if(o>1)throw new c("Too many pattern letters: "+r);this.appendWeekField("W",o)}else if("w"===r){if(o>2)throw new c("Too many pattern letters: "+r);this.appendWeekField("w",o)}else{if("Y"!==r)throw new c("Unknown pattern letter: "+r);this.appendWeekField("Y",o)}n--}else if("'"===r){for(var l=n++;n<e.length;n++)if("'"===e.charAt(n)){if(!(n+1<e.length&&"'"===e.charAt(n+1)))break;n++}if(n>=e.length)throw new c("Pattern ends with an incomplete string literal: "+e);var h=e.substring(l+1,n);0===h.length?this.appendLiteral("'"):this.appendLiteral(h.replace("''","'"))}else if("["===r)this.optionalStart();else if("]"===r){if(null===this._active._parent)throw new c("Pattern invalid as it contains ] without previous [");this.optionalEnd()}else{if("{"===r||"}"===r||"#"===r)throw new c("Pattern includes reserved character: '"+r+"'");this.appendLiteral(r)}}},t._parseField=function(e,t,n){switch(e){case"u":case"y":2===t?this.appendValueReduced(n,2,2,Ae.BASE_DATE):t<4?this.appendValue(n,t,qe,_e.NORMAL):this.appendValue(n,t,qe,_e.EXCEEDS_PAD);break;case"M":case"Q":switch(t){case 1:this.appendValue(n);break;case 2:this.appendValue(n,2);break;case 3:this.appendText(n,ve.SHORT);break;case 4:this.appendText(n,ve.FULL);break;case 5:this.appendText(n,ve.NARROW);break;default:throw new c("Too many pattern letters: "+e)}break;case"L":case"q":switch(t){case 1:this.appendValue(n);break;case 2:this.appendValue(n,2);break;case 3:this.appendText(n,ve.SHORT_STANDALONE);break;case 4:this.appendText(n,ve.FULL_STANDALONE);break;case 5:this.appendText(n,ve.NARROW_STANDALONE);break;default:throw new c("Too many pattern letters: "+e)}break;case"e":switch(t){case 1:case 2:this.appendWeekField("e",t);break;case 3:this.appendText(n,ve.SHORT);break;case 4:this.appendText(n,ve.FULL);break;case 5:this.appendText(n,ve.NARROW);break;default:throw new c("Too many pattern letters: "+e)}break;case"c":switch(t){case 1:this.appendWeekField("c",t);break;case 2:throw new c("Invalid number of pattern letters: "+e);case 3:this.appendText(n,ve.SHORT_STANDALONE);break;case 4:this.appendText(n,ve.FULL_STANDALONE);break;case 5:this.appendText(n,ve.NARROW_STANDALONE);break;default:throw new c("Too many pattern letters: "+e)}break;case"a":if(1!==t)throw new c("Too many pattern letters: "+e);this.appendText(n,ve.SHORT);break;case"E":case"G":switch(t){case 1:case 2:case 3:this.appendText(n,ve.SHORT);break;case 4:this.appendText(n,ve.FULL);break;case 5:this.appendText(n,ve.NARROW);break;default:throw new c("Too many pattern letters: "+e)}break;case"S":this.appendFraction(N.NANO_OF_SECOND,t,t,!1);break;case"F":if(1!==t)throw new c("Too many pattern letters: "+e);this.appendValue(n);break;case"d":case"h":case"H":case"k":case"K":case"m":case"s":if(1===t)this.appendValue(n);else{if(2!==t)throw new c("Too many pattern letters: "+e);this.appendValue(n,t)}break;case"D":if(1===t)this.appendValue(n);else{if(!(t<=3))throw new c("Too many pattern letters: "+e);this.appendValue(n,t)}break;default:1===t?this.appendValue(n):this.appendValue(n,t)}},t.padNext=function(){return 1===arguments.length?this._padNext1.apply(this,arguments):this._padNext2.apply(this,arguments)},t._padNext1=function(e){return this._padNext2(e," ")},t._padNext2=function(e,t){if(e<1)throw new c("The pad width must be at least one but was "+e);return this._active._padNextWidth=e,this._active._padNextChar=t,this._active._valueParserIndex=-1,this},t.optionalStart=function(){return this._active._valueParserIndex=-1,this._active=e._of(this._active,!0),this},t.optionalEnd=function(){if(null==this._active._parent)throw new u("Cannot call optionalEnd() as there was no previous call to optionalStart()");if(this._active._printerParsers.length>0){var e=new we(this._active._printerParsers,this._active._optional);this._active=this._active._parent,this._appendInternal(e)}else this._active=this._active._parent;return this},t._appendInternal=function(e){return p(null!=e),this._active._padNextWidth>0&&(null!=e&&(e=new Ie(e,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(e),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},t.appendLiteral=function(e){return p(null!=e),e.length>0&&(1===e.length?this._appendInternalPrinterParser(new Ee(e.charAt(0))):this._appendInternalPrinterParser(new ke(e))),this},t._appendInternalPrinterParser=function(e){return p(null!=e),this._active._padNextWidth>0&&(null!=e&&(e=new Ie(e,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(e),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},t.append=function(e){return m(e,"formatter"),this._appendInternal(e._toPrinterParser(!1)),this},t.toFormatter=function(e){for(void 0===e&&(e=Y.SMART);null!=this._active._parent;)this.optionalEnd();var t=new we(this._printerParsers,!1);return new Ge(t,null,ye.STANDARD,e,null,null,null)},e}(),He=31556952e4,Ye=62167219200,Ve=function(){function e(e){this.fractionalDigits=e}var t=e.prototype;return t.print=function(e,t){var n=e.getValue(N.INSTANT_SECONDS),r=0;if(e.temporal().isSupported(N.NANO_OF_SECOND)&&(r=e.temporal().getLong(N.NANO_OF_SECOND)),null==n)return!1;var i=n,o=N.NANO_OF_SECOND.checkValidIntValue(r);if(i>=-62167219200){var s=i-He+Ye,a=w.floorDiv(s,He)+1,c=w.floorMod(s,He),u=ht.ofEpochSecond(c-Ye,0,Z.UTC);a>0&&t.append("+").append(a),t.append(u.toString()),0===u.second()&&t.append(":00")}else{var l=i+Ye,h=w.intDiv(l,He),d=w.intMod(l,He),f=ht.ofEpochSecond(d-Ye,0,Z.UTC),p=t.length();t.append(f.toString()),0===f.second()&&t.append(":00"),h<0&&(-1e4===f.year()?t.replace(p,p+2,""+(h-1)):0===d?t.insert(p,h):t.insert(p+1,Math.abs(h)))}if(-2===this.fractionalDigits)0!==o&&(t.append("."),0===w.intMod(o,1e6)?t.append((""+(w.intDiv(o,1e6)+1e3)).substring(1)):0===w.intMod(o,1e3)?t.append((""+(w.intDiv(o,1e3)+1e6)).substring(1)):t.append((""+(o+1e9)).substring(1)));else if(this.fractionalDigits>0||-1===this.fractionalDigits&&o>0){t.append(".");for(var m=1e8,g=0;-1===this.fractionalDigits&&o>0||g<this.fractionalDigits;g++){var y=w.intDiv(o,m);t.append(y),o-=y*m,m=w.intDiv(m,10)}}return t.append("Z"),!0},t.parse=function(e,t,n){var r=e.copy(),i=this.fractionalDigits<0?0:this.fractionalDigits,o=this.fractionalDigits<0?9:this.fractionalDigits,s=(new je).append(Ge.ISO_LOCAL_DATE).appendLiteral("T").appendValue(N.HOUR_OF_DAY,2).appendLiteral(":").appendValue(N.MINUTE_OF_HOUR,2).appendLiteral(":").appendValue(N.SECOND_OF_MINUTE,2).appendFraction(N.NANO_OF_SECOND,i,o,!0).appendLiteral("Z").toFormatter()._toPrinterParser(!1).parse(r,t,n);if(s<0)return s;var a,c=r.getParsed(N.YEAR),u=r.getParsed(N.MONTH_OF_YEAR),l=r.getParsed(N.DAY_OF_MONTH),h=r.getParsed(N.HOUR_OF_DAY),d=r.getParsed(N.MINUTE_OF_HOUR),f=r.getParsed(N.SECOND_OF_MINUTE),p=r.getParsed(N.NANO_OF_SECOND),m=null!=f?f:0,g=null!=p?p:0,y=w.intMod(c,1e4),_=0;24===h&&0===d&&0===m&&0===g?(h=0,_=1):23===h&&59===d&&60===m&&(e.setParsedLeapSecond(),m=59);try{a=ht.of(y,u,l,h,d,m,0).plusDays(_).toEpochSecond(Z.UTC),a+=w.safeMultiply(w.intDiv(c,1e4),He)}catch(e){return~n}var v=s;return v=e.setParsedField(N.INSTANT_SECONDS,a,n,v),e.setParsedField(N.NANO_OF_SECOND,g,n,v)},t.toString=function(){return"Instant()"},e}(),$e=function(){function e(e,t){this._field=e,this._value=t}var t=e.prototype;return t.print=function(){return!0},t.parse=function(e,t,n){return null==e.getParsed(this._field)&&e.setParsedField(this._field,this._value,n,n),n},e}(),ze=function(){function e(){this._str=""}var t=e.prototype;return t.append=function(e){return this._str+=e,this},t.appendChar=function(e){return this._str+=e[0],this},t.insert=function(e,t){return this._str=this._str.slice(0,e)+t+this._str.slice(e),this},t.replace=function(e,t,n){return this._str=this._str.slice(0,e)+n+this._str.slice(t),this},t.length=function(){return this._str.length},t.setLength=function(e){return this._str=this._str.slice(0,e),this},t.toString=function(){return this._str},e}(),Ge=function(){function e(e,t,n,r,i,o,s){void 0===o&&(o=nt.INSTANCE),p(null!=e),p(null!=n),p(null!=r),this._printerParser=e,this._locale=t,this._decimalStyle=n,this._resolverStyle=r,this._resolverFields=i,this._chrono=o,this._zone=s}e.parsedExcessDays=function(){return e.PARSED_EXCESS_DAYS},e.parsedLeapSecond=function(){return e.PARSED_LEAP_SECOND},e.ofPattern=function(e){return(new je).appendPattern(e).toFormatter()};var t=e.prototype;return t.locale=function(){return this._locale},t.decimalStyle=function(){return this._decimalStyle},t.chronology=function(){return this._chrono},t.withChronology=function(t){return null!=this._chrono&&this._chrono.equals(t)?this:new e(this._printerParser,this._locale,this._decimalStyle,this._resolverStyle,this._resolverFields,t,this._zone)},t.withLocale=function(){return this},t.withResolverStyle=function(t){return m(t,"resolverStyle"),t.equals(this._resolverStyle)?this:new e(this._printerParser,this._locale,this._decimalStyle,t,this._resolverFields,this._chrono,this._zone)},t.format=function(e){var t=new ze(32);return this._formatTo(e,t),t.toString()},t._formatTo=function(e,t){m(e,"temporal"),m(t,"appendable");var n=new ne(e,this);this._printerParser.print(n,t)},t.parse=function(e,t){return 1===arguments.length?this.parse1(e):this.parse2(e,t)},t.parse1=function(e){m(e,"text");try{return this._parseToBuilder(e,null).resolve(this._resolverStyle,this._resolverFields)}catch(t){throw t instanceof o?t:this._createError(e,t)}},t.parse2=function(e,t){m(e,"text"),m(t,"type");try{return this._parseToBuilder(e,null).resolve(this._resolverStyle,this._resolverFields).build(t)}catch(t){throw t instanceof o?t:this._createError(e,t)}},t._createError=function(e,t){var n;return n=e.length>64?e.substring(0,64)+"...":e,new o("Text '"+n+"' could not be parsed: "+t.message,e,0,t)},t._parseToBuilder=function(e,t){var n=null!=t?t:new j(0),r=this._parseUnresolved0(e,n);if(null==r||n.getErrorIndex()>=0||null==t&&n.getIndex()<e.length){var i;throw i=e.length>64?e.substr(0,64).toString()+"...":e,n.getErrorIndex()>=0?new o("Text '"+i+"' could not be parsed at index "+n.getErrorIndex(),e,n.getErrorIndex()):new o("Text '"+i+"' could not be parsed, unparsed text found at index "+n.getIndex(),e,n.getIndex())}return r.toBuilder()},t.parseUnresolved=function(e,t){return this._parseUnresolved0(e,t)},t._parseUnresolved0=function(e,t){p(null!=e,"text",l),p(null!=t,"position",l);var n=new ee(this),r=t.getIndex();return(r=this._printerParser.parse(n,e,r))<0?(t.setErrorIndex(~r),null):(t.setIndex(r),n.toParsed())},t._toPrinterParser=function(e){return this._printerParser.withOptional(e)},t.toString=function(){var e=this._printerParser.toString();return 0===e.indexOf("[")?e:e.substring(1,e.length-1)},e}(),We=function(e){function t(t,n){var r;return(r=e.call(this)||this)._month=w.safeToInt(t),r._day=w.safeToInt(n),r}h(t,e),t.now=function(e){return 0===arguments.length?t.now0():1===arguments.length&&e instanceof G?t.nowZoneId(e):t.nowClock(e)},t.now0=function(){return this.nowClock(mt.systemDefaultZone())},t.nowZoneId=function(e){return m(e,"zone"),this.nowClock(mt.system(e))},t.nowClock=function(e){m(e,"clock");var n=ut.now(e);return t.of(n.month(),n.dayOfMonth())},t.of=function(e,n){return 2===arguments.length&&e instanceof F?t.ofMonthNumber(e,n):t.ofNumberNumber(e,n)},t.ofMonthNumber=function(e,n){if(m(e,"month"),N.DAY_OF_MONTH.checkValidValue(n),n>e.maxLength())throw new i("Illegal value for DayOfMonth field, value "+n+" is not valid for month "+e.toString());return new t(e.value(),n)},t.ofNumberNumber=function(e,n){return m(e,"month"),m(n,"dayOfMonth"),t.of(F.of(e),n)},t.from=function(e){if(m(e,"temporal"),g(e,D,"temporal"),e instanceof t)return e;try{return t.of(e.get(N.MONTH_OF_YEAR),e.get(N.DAY_OF_MONTH))}catch(t){throw new i("Unable to obtain MonthDay from TemporalAccessor: "+e+", type "+(e&&null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,n){return 1===arguments.length?t.parseString(e):t.parseStringFormatter(e,n)},t.parseString=function(e){return t.parseStringFormatter(e,Ne)},t.parseStringFormatter=function(e,n){return m(e,"text"),m(n,"formatter"),g(n,Ge,"formatter"),n.parse(e,t.FROM)};var n=t.prototype;return n.monthValue=function(){return this._month},n.month=function(){return F.of(this._month)},n.dayOfMonth=function(){return this._day},n.isSupported=function(e){return e instanceof N?e===N.MONTH_OF_YEAR||e===N.DAY_OF_MONTH:null!=e&&e.isSupportedBy(this)},n.range=function(t){return t===N.MONTH_OF_YEAR?t.range():t===N.DAY_OF_MONTH?R.of(1,this.month().minLength(),this.month().maxLength()):e.prototype.range.call(this,t)},n.get=function(e){return this.range(e).checkValidIntValue(this.getLong(e),e)},n.getLong=function(e){if(m(e,"field"),e instanceof N){switch(e){case N.DAY_OF_MONTH:return this._day;case N.MONTH_OF_YEAR:return this._month}throw new s("Unsupported field: "+e)}return e.getFrom(this)},n.isValidYear=function(e){return 0==(29===this._day&&2===this._month&&!1===Qe.isLeap(e))},n.withMonth=function(e){return this.with(F.of(e))},n.with=function(e){if(m(e,"month"),e.value()===this._month)return this;var n=Math.min(this._day,e.maxLength());return new t(e.value(),n)},n.withDayOfMonth=function(e){return e===this._day?this:t.of(this._month,e)},n.query=function(t){return m(t,"query"),g(t,k,"query"),t===P.chronology()?nt.INSTANCE:e.prototype.query.call(this,t)},n.adjustInto=function(e){return m(e,"temporal"),(e=e.with(N.MONTH_OF_YEAR,this._month)).with(N.DAY_OF_MONTH,Math.min(e.range(N.DAY_OF_MONTH).maximum(),this._day))},n.atYear=function(e){return ut.of(e,this._month,this.isValidYear(e)?this._day:28)},n.compareTo=function(e){m(e,"other"),g(e,t,"other");var n=this._month-e.monthValue();return 0===n&&(n=this._day-e.dayOfMonth()),n},n.isAfter=function(e){return m(e,"other"),g(e,t,"other"),this.compareTo(e)>0},n.isBefore=function(e){return m(e,"other"),g(e,t,"other"),this.compareTo(e)<0},n.equals=function(e){if(this===e)return!0;if(e instanceof t){var n=e;return this.monthValue()===n.monthValue()&&this.dayOfMonth()===n.dayOfMonth()}return!1},n.toString=function(){return"--"+(this._month<10?"0":"")+this._month+(this._day<10?"-0":"-")+this._day},n.toJSON=function(){return this.toString()},n.format=function(e){return m(e,"formatter"),g(e,Ge,"formatter"),e.format(this)},t}(D),Ke=function(e){function t(t,n){var r;return(r=e.call(this)||this)._year=w.safeToInt(t),r._month=w.safeToInt(n),r}h(t,e),t.now=function(e){return 0===arguments.length?t.now0():1===arguments.length&&e instanceof G?t.nowZoneId(e):t.nowClock(e)},t.now0=function(){return t.nowClock(mt.systemDefaultZone())},t.nowZoneId=function(e){return t.nowClock(mt.system(e))},t.nowClock=function(e){var n=ut.now(e);return t.of(n.year(),n.month())},t.of=function(e,n){return 2===arguments.length&&n instanceof F?t.ofNumberMonth(e,n):t.ofNumberNumber(e,n)},t.ofNumberMonth=function(e,n){return m(n,"month"),g(n,F,"month"),t.ofNumberNumber(e,n.value())},t.ofNumberNumber=function(e,n){return m(e,"year"),m(n,"month"),N.YEAR.checkValidValue(e),N.MONTH_OF_YEAR.checkValidValue(n),new t(e,n)},t.from=function(e){if(m(e,"temporal"),e instanceof t)return e;try{return t.of(e.get(N.YEAR),e.get(N.MONTH_OF_YEAR))}catch(t){throw new i("Unable to obtain YearMonth from TemporalAccessor: "+e+", type "+(e&&null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,n){return 1===arguments.length?t.parseString(e):t.parseStringFormatter(e,n)},t.parseString=function(e){return t.parseStringFormatter(e,Pe)},t.parseStringFormatter=function(e,n){return m(n,"formatter"),n.parse(e,t.FROM)};var n=t.prototype;return n.isSupported=function(e){return 1===arguments.length&&e instanceof I?this.isSupportedField(e):this.isSupportedUnit(e)},n.isSupportedField=function(e){return e instanceof N?e===N.YEAR||e===N.MONTH_OF_YEAR||e===N.PROLEPTIC_MONTH||e===N.YEAR_OF_ERA||e===N.ERA:null!=e&&e.isSupportedBy(this)},n.isSupportedUnit=function(e){return e instanceof C?e===C.MONTHS||e===C.YEARS||e===C.DECADES||e===C.CENTURIES||e===C.MILLENNIA||e===C.ERAS:null!=e&&e.isSupportedBy(this)},n.range=function(t){return t===N.YEAR_OF_ERA?this.year()<=0?R.of(1,Qe.MAX_VALUE+1):R.of(1,Qe.MAX_VALUE):e.prototype.range.call(this,t)},n.get=function(e){return m(e,"field"),g(e,I,"field"),this.range(e).checkValidIntValue(this.getLong(e),e)},n.getLong=function(e){if(m(e,"field"),g(e,I,"field"),e instanceof N){switch(e){case N.MONTH_OF_YEAR:return this._month;case N.PROLEPTIC_MONTH:return this._getProlepticMonth();case N.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case N.YEAR:return this._year;case N.ERA:return this._year<1?0:1}throw new s("Unsupported field: "+e)}return e.getFrom(this)},n._getProlepticMonth=function(){return w.safeAdd(w.safeMultiply(this._year,12),this._month-1)},n.year=function(){return this._year},n.monthValue=function(){return this._month},n.month=function(){return F.of(this._month)},n.isLeapYear=function(){return nt.isLeapYear(this._year)},n.isValidDay=function(e){return e>=1&&e<=this.lengthOfMonth()},n.lengthOfMonth=function(){return this.month().length(this.isLeapYear())},n.lengthOfYear=function(){return this.isLeapYear()?366:365},n.with=function(e,t){return 1===arguments.length?this._withAdjuster(e):this._withField(e,t)},n._withField=function(e,t){if(m(e,"field"),g(e,I,"field"),e instanceof N){var n=e;switch(n.checkValidValue(t),n){case N.MONTH_OF_YEAR:return this.withMonth(t);case N.PROLEPTIC_MONTH:return this.plusMonths(t-this.getLong(N.PROLEPTIC_MONTH));case N.YEAR_OF_ERA:return this.withYear(this._year<1?1-t:t);case N.YEAR:return this.withYear(t);case N.ERA:return this.getLong(N.ERA)===t?this:this.withYear(1-this._year)}throw new s("Unsupported field: "+e)}return e.adjustInto(this,t)},n.withYear=function(e){return N.YEAR.checkValidValue(e),new t(e,this._month)},n.withMonth=function(e){return N.MONTH_OF_YEAR.checkValidValue(e),new t(this._year,e)},n._plusUnit=function(e,t){if(m(t,"unit"),g(t,S,"unit"),t instanceof C){switch(t){case C.MONTHS:return this.plusMonths(e);case C.YEARS:return this.plusYears(e);case C.DECADES:return this.plusYears(w.safeMultiply(e,10));case C.CENTURIES:return this.plusYears(w.safeMultiply(e,100));case C.MILLENNIA:return this.plusYears(w.safeMultiply(e,1e3));case C.ERAS:return this.with(N.ERA,w.safeAdd(this.getLong(N.ERA),e))}throw new s("Unsupported unit: "+t)}return t.addTo(this,e)},n.plusYears=function(e){if(0===e)return this;var t=N.YEAR.checkValidIntValue(this._year+e);return this.withYear(t)},n.plusMonths=function(e){if(0===e)return this;var n=12*this._year+(this._month-1)+e;return new t(N.YEAR.checkValidIntValue(w.floorDiv(n,12)),w.floorMod(n,12)+1)},n.minusYears=function(e){return e===w.MIN_SAFE_INTEGER?this.plusYears(w.MIN_SAFE_INTEGER).plusYears(1):this.plusYears(-e)},n.minusMonths=function(e){return e===w.MIN_SAFE_INTEGER?this.plusMonths(Math.MAX_SAFE_INTEGER).plusMonths(1):this.plusMonths(-e)},n.query=function(t){return m(t,"query"),g(t,k,"query"),t===P.chronology()?nt.INSTANCE:t===P.precision()?C.MONTHS:t===P.localDate()||t===P.localTime()||t===P.zone()||t===P.zoneId()||t===P.offset()?null:e.prototype.query.call(this,t)},n.adjustInto=function(e){return m(e,"temporal"),g(e,V,"temporal"),e.with(N.PROLEPTIC_MONTH,this._getProlepticMonth())},n.until=function(e,n){m(e,"endExclusive"),m(n,"unit"),g(e,V,"endExclusive"),g(n,S,"unit");var r=t.from(e);if(n instanceof C){var i=r._getProlepticMonth()-this._getProlepticMonth();switch(n){case C.MONTHS:return i;case C.YEARS:return w.intDiv(i,12);case C.DECADES:return w.intDiv(i,120);case C.CENTURIES:return w.intDiv(i,1200);case C.MILLENNIA:return w.intDiv(i,12e3);case C.ERAS:return r.getLong(N.ERA)-this.getLong(N.ERA)}throw new s("Unsupported unit: "+n)}return n.between(this,r)},n.atDay=function(e){return m(e,"dayOfMonth"),ut.of(this._year,this._month,e)},n.atEndOfMonth=function(){return ut.of(this._year,this._month,this.lengthOfMonth())},n.compareTo=function(e){m(e,"other"),g(e,t,"other");var n=this._year-e.year();return 0===n&&(n=this._month-e.monthValue()),n},n.isAfter=function(e){return this.compareTo(e)>0},n.isBefore=function(e){return this.compareTo(e)<0},n.equals=function(e){if(this===e)return!0;if(e instanceof t){var n=e;return this.year()===n.year()&&this.monthValue()===n.monthValue()}return!1},n.toString=function(){return Pe.format(this)},n.toJSON=function(){return this.toString()},n.format=function(e){return m(e,"formatter"),e.format(this)},t}(V),Qe=function(e){function t(t){var n;return(n=e.call(this)||this)._year=w.safeToInt(t),n}h(t,e);var n=t.prototype;return n.value=function(){return this._year},t.now=function(e){return void 0===e&&(e=void 0),void 0===e?t.now0():e instanceof G?t.nowZoneId(e):t.nowClock(e)},t.now0=function(){return t.nowClock(mt.systemDefaultZone())},t.nowZoneId=function(e){return m(e,"zone"),g(e,G,"zone"),t.nowClock(mt.system(e))},t.nowClock=function(e){m(e,"clock"),g(e,mt,"clock");var n=ut.now(e);return t.of(n.year())},t.of=function(e){return m(e,"isoYear"),N.YEAR.checkValidValue(e),new t(e)},t.from=function(e){if(m(e,"temporal"),g(e,D,"temporal"),e instanceof t)return e;try{return t.of(e.get(N.YEAR))}catch(t){throw new i("Unable to obtain Year from TemporalAccessor: "+e+", type "+(e&&null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,n){return arguments.length<=1?t.parseText(e):t.parseTextFormatter(e,n)},t.parseText=function(e){return m(e,"text"),t.parse(e,De)},t.parseTextFormatter=function(e,n){return void 0===n&&(n=De),m(e,"text"),m(n,"formatter"),g(n,Ge,"formatter"),n.parse(e,t.FROM)},t.isLeap=function(e){return 0===w.intMod(e,4)&&(0!==w.intMod(e,100)||0===w.intMod(e,400))},n.isSupported=function(e){return 1===arguments.length&&e instanceof I?this.isSupportedField(e):this.isSupportedUnit(e)},n.isSupportedField=function(e){return e instanceof N?e===N.YEAR||e===N.YEAR_OF_ERA||e===N.ERA:null!=e&&e.isSupportedBy(this)},n.isSupportedUnit=function(e){return e instanceof C?e===C.YEARS||e===C.DECADES||e===C.CENTURIES||e===C.MILLENNIA||e===C.ERAS:null!=e&&e.isSupportedBy(this)},n.range=function(t){if(this.isSupported(t))return t.range();if(t instanceof N)throw new s("Unsupported field: "+t);return e.prototype.range.call(this,t)},n.get=function(e){return this.range(e).checkValidIntValue(this.getLong(e),e)},n.getLong=function(e){if(m(e,"field"),e instanceof N){switch(e){case N.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case N.YEAR:return this._year;case N.ERA:return this._year<1?0:1}throw new s("Unsupported field: "+e)}return e.getFrom(this)},n.isLeap=function(){return t.isLeap(this._year)},n._withField=function(e,n){if(m(e,"field"),g(e,I,"field"),e instanceof N){switch(e.checkValidValue(n),e){case N.YEAR_OF_ERA:return t.of(this._year<1?1-n:n);case N.YEAR:return t.of(n);case N.ERA:return this.getLong(N.ERA)===n?this:t.of(1-this._year)}throw new s("Unsupported field: "+e)}return e.adjustInto(this,n)},n._plusUnit=function(e,t){if(m(e,"amountToAdd"),m(t,"unit"),g(t,S,"unit"),t instanceof C){switch(t){case C.YEARS:return this.plusYears(e);case C.DECADES:return this.plusYears(w.safeMultiply(e,10));case C.CENTURIES:return this.plusYears(w.safeMultiply(e,100));case C.MILLENNIA:return this.plusYears(w.safeMultiply(e,1e3));case C.ERAS:return this.with(N.ERA,w.safeAdd(this.getLong(N.ERA),e))}throw new s("Unsupported unit: "+t)}return t.addTo(this,e)},n.plusYears=function(e){return 0===e?this:t.of(N.YEAR.checkValidIntValue(w.safeAdd(this._year,e)))},n.minusYears=function(e){return e===w.MIN_SAFE_INTEGER?this.plusYears(w.MAX_SAFE_INTEGER).plusYears(1):this.plusYears(-e)},n.adjustInto=function(e){return m(e,"temporal"),e.with(N.YEAR,this._year)},n.isValidMonthDay=function(e){return null!=e&&e.isValidYear(this._year)},n.length=function(){return this.isLeap()?366:365},n.atDay=function(e){return ut.ofYearDay(this._year,e)},n.atMonth=function(e){return 1===arguments.length&&e instanceof F?this.atMonthMonth(e):this.atMonthNumber(e)},n.atMonthMonth=function(e){return m(e,"month"),g(e,F,"month"),Ke.of(this._year,e)},n.atMonthNumber=function(e){return m(e,"month"),Ke.of(this._year,e)},n.atMonthDay=function(e){return m(e,"monthDay"),g(e,We,"monthDay"),e.atYear(this._year)},n.query=function(t){return m(t,"query()"),g(t,k,"query()"),t===P.chronology()?nt.INSTANCE:t===P.precision()?C.YEARS:t===P.localDate()||t===P.localTime()||t===P.zone()||t===P.zoneId()||t===P.offset()?null:e.prototype.query.call(this,t)},n.compareTo=function(e){return m(e,"other"),g(e,t,"other"),this._year-e._year},n.isAfter=function(e){return m(e,"other"),g(e,t,"other"),this._year>e._year},n.isBefore=function(e){return m(e,"other"),g(e,t,"other"),this._year<e._year},n.format=function(e){return m(e,"formatter"),g(e,Ge,"formatter"),e.format(this)},n.equals=function(e){return this===e||e instanceof t&&this.value()===e.value()},n.toString=function(){return""+this._year},n.toJSON=function(){return this.toString()},n.until=function(e,n){var r=t.from(e);if(n instanceof C){var i=r.value()-this.value();switch(n){case C.YEARS:return i;case C.DECADES:return w.intDiv(i,10);case C.CENTURIES:return w.intDiv(i,100);case C.MILLENNIA:return w.intDiv(i,1e3);case C.ERAS:return r.getLong(N.ERA)-this.getLong(N.ERA)}throw new s("Unsupported unit: "+n)}return n.between(this,r)},t}(V),Xe=function(){function e(){}return e.prototype.adjustInto=function(e){y("adjustInto")},e}(),Ze=function(){function e(){}return e.firstDayOfMonth=function(){return Je.FIRST_DAY_OF_MONTH},e.lastDayOfMonth=function(){return Je.LAST_DAY_OF_MONTH},e.firstDayOfNextMonth=function(){return Je.FIRST_DAY_OF_NEXT_MONTH},e.firstDayOfYear=function(){return Je.FIRST_DAY_OF_YEAR},e.lastDayOfYear=function(){return Je.LAST_DAY_OF_YEAR},e.firstDayOfNextYear=function(){return Je.FIRST_DAY_OF_NEXT_YEAR},e.firstInMonth=function(e){return m(e,"dayOfWeek"),new et(1,e)},e.lastInMonth=function(e){return m(e,"dayOfWeek"),new et(-1,e)},e.dayOfWeekInMonth=function(e,t){return m(t,"dayOfWeek"),new et(e,t)},e.next=function(e){return new tt(2,e)},e.nextOrSame=function(e){return new tt(0,e)},e.previous=function(e){return new tt(3,e)},e.previousOrSame=function(e){return new tt(1,e)},e}(),Je=function(e){function t(t){var n;return(n=e.call(this)||this)._ordinal=t,n}return h(t,e),t.prototype.adjustInto=function(e){switch(this._ordinal){case 0:return e.with(N.DAY_OF_MONTH,1);case 1:return e.with(N.DAY_OF_MONTH,e.range(N.DAY_OF_MONTH).maximum());case 2:return e.with(N.DAY_OF_MONTH,1).plus(1,C.MONTHS);case 3:return e.with(N.DAY_OF_YEAR,1);case 4:return e.with(N.DAY_OF_YEAR,e.range(N.DAY_OF_YEAR).maximum());case 5:return e.with(N.DAY_OF_YEAR,1).plus(1,C.YEARS)}throw new u("Unreachable")},t}(Xe);Je.FIRST_DAY_OF_MONTH=new Je(0),Je.LAST_DAY_OF_MONTH=new Je(1),Je.FIRST_DAY_OF_NEXT_MONTH=new Je(2),Je.FIRST_DAY_OF_YEAR=new Je(3),Je.LAST_DAY_OF_YEAR=new Je(4),Je.FIRST_DAY_OF_NEXT_YEAR=new Je(5);var et=function(e){function t(t,n){var r;return(r=e.call(this)||this)._ordinal=t,r._dowValue=n.value(),r}return h(t,e),t.prototype.adjustInto=function(e){if(this._ordinal>=0){var t=e.with(N.DAY_OF_MONTH,1),n=t.get(N.DAY_OF_WEEK),r=w.intMod(this._dowValue-n+7,7);return r+=7*(this._ordinal-1),t.plus(r,C.DAYS)}var i=e.with(N.DAY_OF_MONTH,e.range(N.DAY_OF_MONTH).maximum()),o=i.get(N.DAY_OF_WEEK),s=this._dowValue-o;return s=0===s?0:s>0?s-7:s,s-=7*(-this._ordinal-1),i.plus(s,C.DAYS)},t}(Xe),tt=function(e){function t(t,n){var r;return r=e.call(this)||this,m(n,"dayOfWeek"),r._relative=t,r._dowValue=n.value(),r}return h(t,e),t.prototype.adjustInto=function(e){var t=e.get(N.DAY_OF_WEEK);if(this._relative<2&&t===this._dowValue)return e;if(0==(1&this._relative)){var n=t-this._dowValue;return e.plus(n>=0?7-n:-n,C.DAYS)}var r=this._dowValue-t;return e.minus(r>=0?7-r:-r,C.DAYS)},t}(Xe),nt=function(e){function t(){return e.apply(this,arguments)||this}h(t,e),t.isLeapYear=function(e){return 0==(3&e)&&(e%100!=0||e%400==0)};var n=t.prototype;return n._updateResolveMap=function(e,t,n){m(e,"fieldValues"),m(t,"field");var r=e.get(t);if(null!=r&&r!==n)throw new i("Invalid state, field: "+t+" "+r+" conflicts with "+t+" "+n);e.put(t,n)},n.resolveDate=function(e,t){if(e.containsKey(N.EPOCH_DAY))return ut.ofEpochDay(e.remove(N.EPOCH_DAY));var n=e.remove(N.PROLEPTIC_MONTH);null!=n&&(t!==Y.LENIENT&&N.PROLEPTIC_MONTH.checkValidValue(n),this._updateResolveMap(e,N.MONTH_OF_YEAR,w.floorMod(n,12)+1),this._updateResolveMap(e,N.YEAR,w.floorDiv(n,12)));var r=e.remove(N.YEAR_OF_ERA);if(null!=r){t!==Y.LENIENT&&N.YEAR_OF_ERA.checkValidValue(r);var o=e.remove(N.ERA);if(null==o){var s=e.get(N.YEAR);t===Y.STRICT?null!=s?this._updateResolveMap(e,N.YEAR,s>0?r:w.safeSubtract(1,r)):e.put(N.YEAR_OF_ERA,r):this._updateResolveMap(e,N.YEAR,null==s||s>0?r:w.safeSubtract(1,r))}else if(1===o)this._updateResolveMap(e,N.YEAR,r);else{if(0!==o)throw new i("Invalid value for era: "+o);this._updateResolveMap(e,N.YEAR,w.safeSubtract(1,r))}}else e.containsKey(N.ERA)&&N.ERA.checkValidValue(e.get(N.ERA));if(e.containsKey(N.YEAR)){if(e.containsKey(N.MONTH_OF_YEAR)&&e.containsKey(N.DAY_OF_MONTH)){var a=N.YEAR.checkValidIntValue(e.remove(N.YEAR)),c=e.remove(N.MONTH_OF_YEAR),u=e.remove(N.DAY_OF_MONTH);if(t===Y.LENIENT){var l=c-1,h=u-1;return ut.of(a,1,1).plusMonths(l).plusDays(h)}return t===Y.SMART?(N.DAY_OF_MONTH.checkValidValue(u),4===c||6===c||9===c||11===c?u=Math.min(u,30):2===c&&(u=Math.min(u,F.FEBRUARY.length(Qe.isLeap(a)))),ut.of(a,c,u)):ut.of(a,c,u)}if(e.containsKey(N.DAY_OF_YEAR)){var d=N.YEAR.checkValidIntValue(e.remove(N.YEAR));if(t===Y.LENIENT){var f=w.safeSubtract(e.remove(N.DAY_OF_YEAR),1);return ut.ofYearDay(d,1).plusDays(f)}var p=N.DAY_OF_YEAR.checkValidIntValue(e.remove(N.DAY_OF_YEAR));return ut.ofYearDay(d,p)}if(e.containsKey(N.ALIGNED_WEEK_OF_YEAR)){if(e.containsKey(N.ALIGNED_DAY_OF_WEEK_IN_YEAR)){var m=N.YEAR.checkValidIntValue(e.remove(N.YEAR));if(t===Y.LENIENT){var g=w.safeSubtract(e.remove(N.ALIGNED_WEEK_OF_YEAR),1),y=w.safeSubtract(e.remove(N.ALIGNED_DAY_OF_WEEK_IN_YEAR),1);return ut.of(m,1,1).plusWeeks(g).plusDays(y)}var _=N.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(e.remove(N.ALIGNED_WEEK_OF_YEAR)),v=N.ALIGNED_DAY_OF_WEEK_IN_YEAR.checkValidIntValue(e.remove(N.ALIGNED_DAY_OF_WEEK_IN_YEAR)),E=ut.of(m,1,1).plusDays(7*(_-1)+(v-1));if(t===Y.STRICT&&E.get(N.YEAR)!==m)throw new i("Strict mode rejected date parsed to a different year");return E}if(e.containsKey(N.DAY_OF_WEEK)){var b=N.YEAR.checkValidIntValue(e.remove(N.YEAR));if(t===Y.LENIENT){var T=w.safeSubtract(e.remove(N.ALIGNED_WEEK_OF_YEAR),1),S=w.safeSubtract(e.remove(N.DAY_OF_WEEK),1);return ut.of(b,1,1).plusWeeks(T).plusDays(S)}var A=N.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(e.remove(N.ALIGNED_WEEK_OF_YEAR)),O=N.DAY_OF_WEEK.checkValidIntValue(e.remove(N.DAY_OF_WEEK)),C=ut.of(b,1,1).plusWeeks(A-1).with(Ze.nextOrSame(U.of(O)));if(t===Y.STRICT&&C.get(N.YEAR)!==b)throw new i("Strict mode rejected date parsed to a different month");return C}}}return null},n.date=function(e){return ut.from(e)},t}(b),rt=function(e){function t(t,n){var r;return r=e.call(this)||this,m(t,"time"),g(t,dt,"time"),m(n,"offset"),g(n,Z,"offset"),r._time=t,r._offset=n,r}h(t,e),t.from=function(e){if(m(e,"temporal"),e instanceof t)return e;if(e instanceof st)return e.toOffsetTime();try{return new t(dt.from(e),Z.from(e))}catch(t){throw new i("Unable to obtain OffsetTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""))}},t.now=function(e){return 0===arguments.length?t._now(mt.systemDefaultZone()):e instanceof mt?t._now(e):t._now(mt.system(e))},t._now=function(e){m(e,"clock");var n=e.instant();return t.ofInstant(n,e.zone().rules().offset(n))},t.of=function(){return arguments.length<=2?t.ofTimeAndOffset.apply(this,arguments):t.ofNumbers.apply(this,arguments)},t.ofNumbers=function(e,n,r,i,o){return new t(dt.of(e,n,r,i),o)},t.ofTimeAndOffset=function(e,n){return new t(e,n)},t.ofInstant=function(e,n){m(e,"instant"),g(e,pt,"instant"),m(n,"zone"),g(n,G,"zone");var r=n.rules().offset(e),i=e.epochSecond()%dt.SECONDS_PER_DAY;return(i=(i+r.totalSeconds())%dt.SECONDS_PER_DAY)<0&&(i+=dt.SECONDS_PER_DAY),new t(dt.ofSecondOfDay(i,e.nano()),r)},t.parse=function(e,n){return void 0===n&&(n=Ge.ISO_OFFSET_TIME),m(n,"formatter"),n.parse(e,t.FROM)};var n=t.prototype;return n.adjustInto=function(e){return e.with(N.NANO_OF_DAY,this._time.toNanoOfDay()).with(N.OFFSET_SECONDS,this.offset().totalSeconds())},n.atDate=function(e){return st.of(e,this._time,this._offset)},n.format=function(e){return m(e,"formatter"),e.format(this,t.FROM)},n.get=function(t){return e.prototype.get.call(this,t)},n.getLong=function(e){return e instanceof N?e===N.OFFSET_SECONDS?this._offset.totalSeconds():this._time.getLong(e):e.getFrom(this)},n.hour=function(){return this._time.hour()},n.minute=function(){return this._time.minute()},n.second=function(){return this._time.second()},n.nano=function(){return this._time.nano()},n.offset=function(){return this._offset},n.isAfter=function(e){return m(e,"other"),this._toEpochNano()>e._toEpochNano()},n.isBefore=function(e){return m(e,"other"),this._toEpochNano()<e._toEpochNano()},n.isEqual=function(e){return m(e,"other"),this._toEpochNano()===e._toEpochNano()},n.isSupported=function(e){return e instanceof N?e.isTimeBased()||e===N.OFFSET_SECONDS:e instanceof C?e.isTimeBased():null!=e&&e.isSupportedBy(this)},n.minusHours=function(e){return this._withLocalTimeOffset(this._time.minusHours(e),this._offset)},n.minusMinutes=function(e){return this._withLocalTimeOffset(this._time.minusMinutes(e),this._offset)},n.minusSeconds=function(e){return this._withLocalTimeOffset(this._time.minusSeconds(e),this._offset)},n.minusNanos=function(e){return this._withLocalTimeOffset(this._time.minusNanos(e),this._offset)},n._minusAmount=function(e){return m(e),e.subtractFrom(this)},n._minusUnit=function(e,t){return this.plus(-1*e,t)},n._plusAmount=function(e){return m(e),e.addTo(this)},n._plusUnit=function(e,t){return t instanceof C?this._withLocalTimeOffset(this._time.plus(e,t),this._offset):t.addTo(this,e)},n.plusHours=function(e){return this._withLocalTimeOffset(this._time.plusHours(e),this._offset)},n.plusMinutes=function(e){return this._withLocalTimeOffset(this._time.plusMinutes(e),this._offset)},n.plusSeconds=function(e){return this._withLocalTimeOffset(this._time.plusSeconds(e),this._offset)},n.plusNanos=function(e){return this._withLocalTimeOffset(this._time.plusNanos(e),this._offset)},n.query=function(t){return m(t,"query"),t===P.precision()?C.NANOS:t===P.offset()||t===P.zone()?this.offset():t===P.localTime()?this._time:t===P.chronology()||t===P.localDate()||t===P.zoneId()?null:e.prototype.query.call(this,t)},n.range=function(e){return e instanceof N?e===N.OFFSET_SECONDS?e.range():this._time.range(e):e.rangeRefinedBy(this)},n.toLocalTime=function(){return this._time},n.truncatedTo=function(e){return this._withLocalTimeOffset(this._time.truncatedTo(e),this._offset)},n.until=function(e,n){m(e,"endExclusive"),m(n,"unit");var r=t.from(e);if(n instanceof C){var i=r._toEpochNano()-this._toEpochNano();switch(n){case C.NANOS:return i;case C.MICROS:return w.intDiv(i,1e3);case C.MILLIS:return w.intDiv(i,1e6);case C.SECONDS:return w.intDiv(i,dt.NANOS_PER_SECOND);case C.MINUTES:return w.intDiv(i,dt.NANOS_PER_MINUTE);case C.HOURS:return w.intDiv(i,dt.NANOS_PER_HOUR);case C.HALF_DAYS:return w.intDiv(i,12*dt.NANOS_PER_HOUR)}throw new s("Unsupported unit: "+n)}return n.between(this,r)},n.withHour=function(e){return this._withLocalTimeOffset(this._time.withHour(e),this._offset)},n.withMinute=function(e){return this._withLocalTimeOffset(this._time.withMinute(e),this._offset)},n.withSecond=function(e){return this._withLocalTimeOffset(this._time.withSecond(e),this._offset)},n.withNano=function(e){return this._withLocalTimeOffset(this._time.withNano(e),this._offset)},n.withOffsetSameInstant=function(e){if(m(e,"offset"),e.equals(this._offset))return this;var n=e.totalSeconds()-this._offset.totalSeconds();return new t(this._time.plusSeconds(n),e)},n.withOffsetSameLocal=function(e){return null!=e&&e.equals(this._offset)?this:new t(this._time,e)},n._toEpochNano=function(){return this._time.toNanoOfDay()-this._offset.totalSeconds()*dt.NANOS_PER_SECOND},n._withAdjuster=function(e){return m(e,"adjuster"),e instanceof dt?this._withLocalTimeOffset(e,this._offset):e instanceof Z?this._withLocalTimeOffset(this._time,e):e instanceof t?e:e.adjustInto(this)},n._withField=function(e,t){return m(e,"field"),e instanceof N?e===N.OFFSET_SECONDS?this._withLocalTimeOffset(this._time,Z.ofTotalSeconds(e.checkValidIntValue(t))):this._withLocalTimeOffset(this._time.with(e,t),this._offset):e.adjustInto(this,t)},n._withLocalTimeOffset=function(e,n){return this._time===e&&this._offset.equals(n)?this:new t(e,n)},n.compareTo=function(e){if(m(e,"other"),g(e,t,"other"),this._offset.equals(e._offset))return this._time.compareTo(e._time);var n=w.compareNumbers(this._toEpochNano(),e._toEpochNano());return 0===n?this._time.compareTo(e._time):n},n.equals=function(e){return this===e||e instanceof t&&this._time.equals(e._time)&&this._offset.equals(e._offset)},n.hashCode=function(){return this._time.hashCode()^this._offset.hashCode()},n.toString=function(){return this._time.toString()+this._offset.toString()},n.toJSON=function(){return this.toString()},t}(V),it=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.query=function(t){return t===P.zoneId()||t===P.zone()?this.zone():t===P.chronology()?this.toLocalDate().chronology():t===P.precision()?C.NANOS:t===P.offset()?this.offset():t===P.localDate()?ut.ofEpochDay(this.toLocalDate().toEpochDay()):t===P.localTime()?this.toLocalTime():e.prototype.query.call(this,t)},n.format=function(e){return m(e,"formatter"),e.format(this)},n.toInstant=function(){return pt.ofEpochSecond(this.toEpochSecond(),this.toLocalTime().nano())},n.toEpochSecond=function(){return 86400*this.toLocalDate().toEpochDay()+this.toLocalTime().toSecondOfDay()-this.offset().totalSeconds()},n.compareTo=function(e){m(e,"other");var t,n,r=w.compareNumbers(this.toEpochSecond(),e.toEpochSecond());return 0===r&&0==(r=this.toLocalTime().nano()-e.toLocalTime().nano())&&0===(r=this.toLocalDateTime().compareTo(e.toLocalDateTime()))&&(t=this.zone().id(),n=e.zone().id(),r=t<n?-1:t>n?1:0),r},n.isAfter=function(e){m(e,"other");var t=this.toEpochSecond(),n=e.toEpochSecond();return t>n||t===n&&this.toLocalTime().nano()>e.toLocalTime().nano()},n.isBefore=function(e){m(e,"other");var t=this.toEpochSecond(),n=e.toEpochSecond();return t<n||t===n&&this.toLocalTime().nano()<e.toLocalTime().nano()},n.isEqual=function(e){return m(e,"other"),this.toEpochSecond()===e.toEpochSecond()&&this.toLocalTime().nano()===e.toLocalTime().nano()},n.equals=function(e){return this===e||e instanceof t&&0===this.compareTo(e)},t}(V),ot=function(e){function t(t,n,r){var i;return m(t,"dateTime"),m(n,"offset"),m(r,"zone"),(i=e.call(this)||this)._dateTime=t,i._offset=n,i._zone=r,i}h(t,e),t.now=function(e){var n;return n=e instanceof G?mt.system(e):null==e?mt.systemDefaultZone():e,t.ofInstant(n.instant(),n.zone())},t.of=function(){return arguments.length<=2?t.of2.apply(this,arguments):3===arguments.length&&arguments[0]instanceof ut?t.of3.apply(this,arguments):t.of8.apply(this,arguments)},t.of3=function(e,n,r){return t.of2(ht.of(e,n),r)},t.of2=function(e,n){return t.ofLocal(e,n,null)},t.of8=function(e,n,r,i,o,s,a,c){var u=ht.of(e,n,r,i,o,s,a);return t.ofLocal(u,c,null)},t.ofLocal=function(e,n,r){if(m(e,"localDateTime"),m(n,"zone"),n instanceof Z)return new t(e,n,n);var i=null,o=n.rules(),s=o.validOffsets(e);if(1===s.length)i=s[0];else if(0===s.length){var a=o.transition(e);e=e.plusSeconds(a.duration().seconds()),i=a.offsetAfter()}else i=null!=r&&s.some((function(e){return e.equals(r)}))?r:m(s[0],"offset");return new t(e,i,n)},t.ofInstant=function(){return 2===arguments.length?t.ofInstant2.apply(this,arguments):t.ofInstant3.apply(this,arguments)},t.ofInstant2=function(e,n){return m(e,"instant"),m(n,"zone"),t._create(e.epochSecond(),e.nano(),n)},t.ofInstant3=function(e,n,r){return m(e,"localDateTime"),m(n,"offset"),m(r,"zone"),t._create(e.toEpochSecond(n),e.nano(),r)},t._create=function(e,n,r){var i=r.rules(),o=pt.ofEpochSecond(e,n),s=i.offset(o);return new t(ht.ofEpochSecond(e,n,s),s,r)},t.ofStrict=function(e,n,r){m(e,"localDateTime"),m(n,"offset"),m(r,"zone");var o=r.rules();if(!1===o.isValidOffset(e,n)){var s=o.transition(e);if(null!=s&&s.isGap())throw new i("LocalDateTime "+e+" does not exist in zone "+r+" due to a gap in the local time-line, typically caused by daylight savings");throw new i('ZoneOffset "'+n+'" is not valid for LocalDateTime "'+e+'" in zone "'+r+'"')}return new t(e,n,r)},t.ofLenient=function(e,n,r){if(m(e,"localDateTime"),m(n,"offset"),m(r,"zone"),r instanceof Z&&!1===n.equals(r))throw new c("ZoneId must match ZoneOffset");return new t(e,n,r)},t.from=function(e){if(m(e,"temporal"),e instanceof t)return e;var n=G.from(e);if(e.isSupported(N.INSTANT_SECONDS)){var r=t._from(e,n);if(null!=r)return r}var i=ht.from(e);return t.of2(i,n)},t._from=function(e,n){try{return t.__from(e,n)}catch(e){if(!(e instanceof i))throw e}},t.__from=function(e,n){var r=e.getLong(N.INSTANT_SECONDS),i=e.get(N.NANO_OF_SECOND);return t._create(r,i,n)},t.parse=function(e,n){return void 0===n&&(n=Ge.ISO_ZONED_DATE_TIME),m(n,"formatter"),n.parse(e,t.FROM)};var n=t.prototype;return n._resolveLocal=function(e){return m(e,"newDateTime"),t.ofLocal(e,this._zone,this._offset)},n._resolveInstant=function(e){return t.ofInstant3(e,this._offset,this._zone)},n._resolveOffset=function(e){return!1===e.equals(this._offset)&&this._zone.rules().isValidOffset(this._dateTime,e)?new t(this._dateTime,e,this._zone):this},n.isSupported=function(e){return e instanceof N||(e instanceof C?e.isDateBased()||e.isTimeBased():null!=e&&e.isSupportedBy(this))},n.range=function(e){return e instanceof N?e===N.INSTANT_SECONDS||e===N.OFFSET_SECONDS?e.range():this._dateTime.range(e):e.rangeRefinedBy(this)},n.get=function(e){return this.getLong(e)},n.getLong=function(e){if(e instanceof N){switch(e){case N.INSTANT_SECONDS:return this.toEpochSecond();case N.OFFSET_SECONDS:return this._offset.totalSeconds()}return this._dateTime.getLong(e)}return m(e,"field"),e.getFrom(this)},n.offset=function(){return this._offset},n.withEarlierOffsetAtOverlap=function(){var e=this._zone.rules().transition(this._dateTime);if(null!=e&&e.isOverlap()){var n=e.offsetBefore();if(!1===n.equals(this._offset))return new t(this._dateTime,n,this._zone)}return this},n.withLaterOffsetAtOverlap=function(){var e=this._zone.rules().transition(this.toLocalDateTime());if(null!=e){var n=e.offsetAfter();if(!1===n.equals(this._offset))return new t(this._dateTime,n,this._zone)}return this},n.zone=function(){return this._zone},n.withZoneSameLocal=function(e){return m(e,"zone"),this._zone.equals(e)?this:t.ofLocal(this._dateTime,e,this._offset)},n.withZoneSameInstant=function(e){return m(e,"zone"),this._zone.equals(e)?this:t._create(this._dateTime.toEpochSecond(this._offset),this._dateTime.nano(),e)},n.withFixedOffsetZone=function(){return this._zone.equals(this._offset)?this:new t(this._dateTime,this._offset,this._offset)},n.year=function(){return this._dateTime.year()},n.monthValue=function(){return this._dateTime.monthValue()},n.month=function(){return this._dateTime.month()},n.dayOfMonth=function(){return this._dateTime.dayOfMonth()},n.dayOfYear=function(){return this._dateTime.dayOfYear()},n.dayOfWeek=function(){return this._dateTime.dayOfWeek()},n.hour=function(){return this._dateTime.hour()},n.minute=function(){return this._dateTime.minute()},n.second=function(){return this._dateTime.second()},n.nano=function(){return this._dateTime.nano()},n._withAdjuster=function(n){if(n instanceof ut)return this._resolveLocal(ht.of(n,this._dateTime.toLocalTime()));if(n instanceof dt)return this._resolveLocal(ht.of(this._dateTime.toLocalDate(),n));if(n instanceof ht)return this._resolveLocal(n);if(n instanceof pt){var r=n;return t._create(r.epochSecond(),r.nano(),this._zone)}return n instanceof Z?this._resolveOffset(n):e.prototype._withAdjuster.call(this,n)},n._withField=function(e,n){if(e instanceof N){switch(e){case N.INSTANT_SECONDS:return t._create(n,this.nano(),this._zone);case N.OFFSET_SECONDS:var r=Z.ofTotalSeconds(e.checkValidIntValue(n));return this._resolveOffset(r)}return this._resolveLocal(this._dateTime.with(e,n))}return e.adjustInto(this,n)},n.withYear=function(e){return this._resolveLocal(this._dateTime.withYear(e))},n.withMonth=function(e){return this._resolveLocal(this._dateTime.withMonth(e))},n.withDayOfMonth=function(e){return this._resolveLocal(this._dateTime.withDayOfMonth(e))},n.withDayOfYear=function(e){return this._resolveLocal(this._dateTime.withDayOfYear(e))},n.withHour=function(e){return this._resolveLocal(this._dateTime.withHour(e))},n.withMinute=function(e){return this._resolveLocal(this._dateTime.withMinute(e))},n.withSecond=function(e){return this._resolveLocal(this._dateTime.withSecond(e))},n.withNano=function(e){return this._resolveLocal(this._dateTime.withNano(e))},n.truncatedTo=function(e){return this._resolveLocal(this._dateTime.truncatedTo(e))},n._plusUnit=function(e,t){return t instanceof C?t.isDateBased()?this._resolveLocal(this._dateTime.plus(e,t)):this._resolveInstant(this._dateTime.plus(e,t)):(m(t,"unit"),t.addTo(this,e))},n.plusYears=function(e){return this._resolveLocal(this._dateTime.plusYears(e))},n.plusMonths=function(e){return this._resolveLocal(this._dateTime.plusMonths(e))},n.plusWeeks=function(e){return this._resolveLocal(this._dateTime.plusWeeks(e))},n.plusDays=function(e){return this._resolveLocal(this._dateTime.plusDays(e))},n.plusHours=function(e){return this._resolveInstant(this._dateTime.plusHours(e))},n.plusMinutes=function(e){return this._resolveInstant(this._dateTime.plusMinutes(e))},n.plusSeconds=function(e){return this._resolveInstant(this._dateTime.plusSeconds(e))},n.plusNanos=function(e){return this._resolveInstant(this._dateTime.plusNanos(e))},n._minusUnit=function(e,t){return this._plusUnit(-1*e,t)},n.minusYears=function(e){return this.plusYears(-1*e)},n.minusMonths=function(e){return this.plusMonths(-1*e)},n.minusWeeks=function(e){return this.plusWeeks(-1*e)},n.minusDays=function(e){return this.plusDays(-1*e)},n.minusHours=function(e){return this.plusHours(-1*e)},n.minusMinutes=function(e){return this.plusMinutes(-1*e)},n.minusSeconds=function(e){return this.plusSeconds(-1*e)},n.minusNanos=function(e){return this.plusNanos(-1*e)},n.query=function(t){return t===P.localDate()?this.toLocalDate():(m(t,"query"),e.prototype.query.call(this,t))},n.until=function(e,n){var r=t.from(e);if(n instanceof C){if(r=r.withZoneSameInstant(this._zone),n.isDateBased())return this._dateTime.until(r._dateTime,n);var i=this._offset.totalSeconds()-r._offset.totalSeconds(),o=r._dateTime.plusSeconds(i);return this._dateTime.until(o,n)}return n.between(this,r)},n.toLocalDateTime=function(){return this._dateTime},n.toLocalDate=function(){return this._dateTime.toLocalDate()},n.toLocalTime=function(){return this._dateTime.toLocalTime()},n.toOffsetDateTime=function(){return st.of(this._dateTime,this._offset)},n.equals=function(e){return this===e||e instanceof t&&this._dateTime.equals(e._dateTime)&&this._offset.equals(e._offset)&&this._zone.equals(e._zone)},n.hashCode=function(){return w.hashCode(this._dateTime.hashCode(),this._offset.hashCode(),this._zone.hashCode())},n.toString=function(){var e=this._dateTime.toString()+this._offset.toString();return this._offset!==this._zone&&(e+="["+this._zone.toString()+"]"),e},n.toJSON=function(){return this.toString()},n.format=function(t){return e.prototype.format.call(this,t)},t}(it),st=function(e){function t(t,n){var r;return r=e.call(this)||this,m(t,"dateTime"),g(t,ht,"dateTime"),m(n,"offset"),g(n,Z,"offset"),r._dateTime=t,r._offset=n,r}h(t,e),t.from=function(e){if(m(e,"temporal"),e instanceof t)return e;try{var n=Z.from(e);try{var r=ht.from(e);return t.of(r,n)}catch(r){var o=pt.from(e);return t.ofInstant(o,n)}}catch(t){throw new i("Unable to obtain OffsetDateTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""))}},t.now=function(e){if(0===arguments.length)return t.now(mt.systemDefaultZone());if(m(e,"clockOrZone"),e instanceof G)return t.now(mt.system(e));if(e instanceof mt){var n=e.instant();return t.ofInstant(n,e.zone().rules().offset(n))}throw new c("clockOrZone must be an instance of ZoneId or Clock")},t.of=function(){return arguments.length<=2?t.ofDateTime.apply(this,arguments):3===arguments.length?t.ofDateAndTime.apply(this,arguments):t.ofNumbers.apply(this,arguments)},t.ofDateTime=function(e,n){return new t(e,n)},t.ofDateAndTime=function(e,n,r){return new t(ht.of(e,n),r)},t.ofNumbers=function(e,n,r,i,o,s,a,c){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),new t(ht.of(e,n,r,i,o,s,a),c)},t.ofInstant=function(e,n){m(e,"instant"),m(n,"zone");var r=n.rules().offset(e);return new t(ht.ofEpochSecond(e.epochSecond(),e.nano(),r),r)},t.parse=function(e,n){return void 0===n&&(n=Ge.ISO_OFFSET_DATE_TIME),m(n,"formatter"),n.parse(e,t.FROM)};var n=t.prototype;return n.adjustInto=function(e){return e.with(N.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(N.NANO_OF_DAY,this.toLocalTime().toNanoOfDay()).with(N.OFFSET_SECONDS,this.offset().totalSeconds())},n.until=function(e,n){var r=t.from(e);return n instanceof C?(r=r.withOffsetSameInstant(this._offset),this._dateTime.until(r._dateTime,n)):n.between(this,r)},n.atZoneSameInstant=function(e){return ot.ofInstant(this._dateTime,this._offset,e)},n.atZoneSimilarLocal=function(e){return ot.ofLocal(this._dateTime,e,this._offset)},n.query=function(t){return m(t,"query"),t===P.chronology()?nt.INSTANCE:t===P.precision()?C.NANOS:t===P.offset()||t===P.zone()?this.offset():t===P.localDate()?this.toLocalDate():t===P.localTime()?this.toLocalTime():t===P.zoneId()?null:e.prototype.query.call(this,t)},n.get=function(t){if(t instanceof N){switch(t){case N.INSTANT_SECONDS:throw new i("Field too large for an int: "+t);case N.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.get(t)}return e.prototype.get.call(this,t)},n.getLong=function(e){if(e instanceof N){switch(e){case N.INSTANT_SECONDS:return this.toEpochSecond();case N.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.getLong(e)}return e.getFrom(this)},n.offset=function(){return this._offset},n.year=function(){return this._dateTime.year()},n.monthValue=function(){return this._dateTime.monthValue()},n.month=function(){return this._dateTime.month()},n.dayOfMonth=function(){return this._dateTime.dayOfMonth()},n.dayOfYear=function(){return this._dateTime.dayOfYear()},n.dayOfWeek=function(){return this._dateTime.dayOfWeek()},n.hour=function(){return this._dateTime.hour()},n.minute=function(){return this._dateTime.minute()},n.second=function(){return this._dateTime.second()},n.nano=function(){return this._dateTime.nano()},n.toLocalDateTime=function(){return this._dateTime},n.toLocalDate=function(){return this._dateTime.toLocalDate()},n.toLocalTime=function(){return this._dateTime.toLocalTime()},n.toOffsetTime=function(){return rt.of(this._dateTime.toLocalTime(),this._offset)},n.toZonedDateTime=function(){return ot.of(this._dateTime,this._offset)},n.toInstant=function(){return this._dateTime.toInstant(this._offset)},n.toEpochSecond=function(){return this._dateTime.toEpochSecond(this._offset)},n.isSupported=function(e){return e instanceof N||e instanceof C?e.isDateBased()||e.isTimeBased():null!=e&&e.isSupportedBy(this)},n.range=function(e){return e instanceof N?e===N.INSTANT_SECONDS||e===N.OFFSET_SECONDS?e.range():this._dateTime.range(e):e.rangeRefinedBy(this)},n._withAdjuster=function(e){return m(e),e instanceof ut||e instanceof dt||e instanceof ht?this._withDateTimeOffset(this._dateTime.with(e),this._offset):e instanceof pt?t.ofInstant(e,this._offset):e instanceof Z?this._withDateTimeOffset(this._dateTime,e):e instanceof t?e:e.adjustInto(this)},n._withField=function(e,n){if(m(e),e instanceof N){var r=e;switch(r){case N.INSTANT_SECONDS:return t.ofInstant(pt.ofEpochSecond(n,this.nano()),this._offset);case N.OFFSET_SECONDS:return this._withDateTimeOffset(this._dateTime,Z.ofTotalSeconds(r.checkValidIntValue(n)))}return this._withDateTimeOffset(this._dateTime.with(e,n),this._offset)}return e.adjustInto(this,n)},n._withDateTimeOffset=function(e,n){return this._dateTime===e&&this._offset.equals(n)?this:new t(e,n)},n.withYear=function(e){return this._withDateTimeOffset(this._dateTime.withYear(e),this._offset)},n.withMonth=function(e){return this._withDateTimeOffset(this._dateTime.withMonth(e),this._offset)},n.withDayOfMonth=function(e){return this._withDateTimeOffset(this._dateTime.withDayOfMonth(e),this._offset)},n.withDayOfYear=function(e){return this._withDateTimeOffset(this._dateTime.withDayOfYear(e),this._offset)},n.withHour=function(e){return this._withDateTimeOffset(this._dateTime.withHour(e),this._offset)},n.withMinute=function(e){return this._withDateTimeOffset(this._dateTime.withMinute(e),this._offset)},n.withSecond=function(e){return this._withDateTimeOffset(this._dateTime.withSecond(e),this._offset)},n.withNano=function(e){return this._withDateTimeOffset(this._dateTime.withNano(e),this._offset)},n.withOffsetSameLocal=function(e){return m(e,"offset"),this._withDateTimeOffset(this._dateTime,e)},n.withOffsetSameInstant=function(e){if(m(e,"offset"),e.equals(this._offset))return this;var n=e.totalSeconds()-this._offset.totalSeconds();return new t(this._dateTime.plusSeconds(n),e)},n.truncatedTo=function(e){return this._withDateTimeOffset(this._dateTime.truncatedTo(e),this._offset)},n._plusAmount=function(e){return m(e,"amount"),e.addTo(this)},n._plusUnit=function(e,t){return t instanceof C?this._withDateTimeOffset(this._dateTime.plus(e,t),this._offset):t.addTo(this,e)},n.plusYears=function(e){return this._withDateTimeOffset(this._dateTime.plusYears(e),this._offset)},n.plusMonths=function(e){return this._withDateTimeOffset(this._dateTime.plusMonths(e),this._offset)},n.plusWeeks=function(e){return this._withDateTimeOffset(this._dateTime.plusWeeks(e),this._offset)},n.plusDays=function(e){return this._withDateTimeOffset(this._dateTime.plusDays(e),this._offset)},n.plusHours=function(e){return this._withDateTimeOffset(this._dateTime.plusHours(e),this._offset)},n.plusMinutes=function(e){return this._withDateTimeOffset(this._dateTime.plusMinutes(e),this._offset)},n.plusSeconds=function(e){return this._withDateTimeOffset(this._dateTime.plusSeconds(e),this._offset)},n.plusNanos=function(e){return this._withDateTimeOffset(this._dateTime.plusNanos(e),this._offset)},n._minusAmount=function(e){return m(e),e.subtractFrom(this)},n._minusUnit=function(e,t){return this.plus(-1*e,t)},n.minusYears=function(e){return this._withDateTimeOffset(this._dateTime.minusYears(e),this._offset)},n.minusMonths=function(e){return this._withDateTimeOffset(this._dateTime.minusMonths(e),this._offset)},n.minusWeeks=function(e){return this._withDateTimeOffset(this._dateTime.minusWeeks(e),this._offset)},n.minusDays=function(e){return this._withDateTimeOffset(this._dateTime.minusDays(e),this._offset)},n.minusHours=function(e){return this._withDateTimeOffset(this._dateTime.minusHours(e),this._offset)},n.minusMinutes=function(e){return this._withDateTimeOffset(this._dateTime.minusMinutes(e),this._offset)},n.minusSeconds=function(e){return this._withDateTimeOffset(this._dateTime.minusSeconds(e),this._offset)},n.minusNanos=function(e){return this._withDateTimeOffset(this._dateTime.minusNanos(e),this._offset)},n.compareTo=function(e){if(m(e,"other"),g(e,t,"other"),this.offset().equals(e.offset()))return this.toLocalDateTime().compareTo(e.toLocalDateTime());var n=w.compareNumbers(this.toEpochSecond(),e.toEpochSecond());return 0===n&&0==(n=this.toLocalTime().nano()-e.toLocalTime().nano())&&(n=this.toLocalDateTime().compareTo(e.toLocalDateTime())),n},n.isAfter=function(e){m(e,"other");var t=this.toEpochSecond(),n=e.toEpochSecond();return t>n||t===n&&this.toLocalTime().nano()>e.toLocalTime().nano()},n.isBefore=function(e){m(e,"other");var t=this.toEpochSecond(),n=e.toEpochSecond();return t<n||t===n&&this.toLocalTime().nano()<e.toLocalTime().nano()},n.isEqual=function(e){return m(e,"other"),this.toEpochSecond()===e.toEpochSecond()&&this.toLocalTime().nano()===e.toLocalTime().nano()},n.equals=function(e){return this===e||e instanceof t&&this._dateTime.equals(e._dateTime)&&this._offset.equals(e._offset)},n.hashCode=function(){return this._dateTime.hashCode()^this._offset.hashCode()},n.toString=function(){return this._dateTime.toString()+this._offset.toString()},n.toJSON=function(){return this.toString()},n.format=function(e){return m(e,"formatter"),e.format(this)},t}(V),at=146097,ct=719528,ut=function(e){function t(n,r,i){var o;return o=e.call(this)||this,m(n,"year"),m(r,"month"),m(i,"dayOfMonth"),r instanceof F&&(r=r.value()),o._year=w.safeToInt(n),o._month=w.safeToInt(r),o._day=w.safeToInt(i),t._validate(o._year,o._month,o._day),o}h(t,e),t.now=function(e){var n;return n=null==e?mt.systemDefaultZone():e instanceof G?mt.system(e):e,t.ofInstant(n.instant(),n.zone())},t.ofInstant=function(e,n){void 0===n&&(n=G.systemDefault()),m(e,"instant");var r=n.rules().offset(e),i=e.epochSecond()+r.totalSeconds(),o=w.floorDiv(i,dt.SECONDS_PER_DAY);return t.ofEpochDay(o)},t.of=function(e,n,r){return new t(e,n,r)},t.ofYearDay=function(e,n){N.YEAR.checkValidValue(e);var r=nt.isLeapYear(e);366===n&&!1===r&&p(!1,"Invalid date 'DayOfYear 366' as '"+e+"' is not a leap year",i);var o=F.of(Math.floor((n-1)/31+1));n>o.firstDayOfYear(r)+o.length(r)-1&&(o=o.plus(1));var s=n-o.firstDayOfYear(r)+1;return new t(e,o.value(),s)},t.ofEpochDay=function(e){var n,r,i,o,s;void 0===e&&(e=0),s=e+ct,n=0,(s-=60)<0&&(n=400*(r=w.intDiv(s+1,at)-1),s+=-r*at),(i=s-(365*(o=w.intDiv(400*s+591,at))+w.intDiv(o,4)-w.intDiv(o,100)+w.intDiv(o,400)))<0&&(i=s-(365*--o+w.intDiv(o,4)-w.intDiv(o,100)+w.intDiv(o,400))),o+=n;var a=i,c=w.intDiv(5*a+2,153),u=(c+2)%12+1,l=a-w.intDiv(306*c+5,10)+1;return new t(o+=w.intDiv(c,10),u,l)},t.from=function(e){m(e,"temporal");var t=e.query(P.localDate());if(null==t)throw new i("Unable to obtain LocalDate from TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""));return t},t.parse=function(e,n){return void 0===n&&(n=Ge.ISO_LOCAL_DATE),p(null!=n,"formatter",l),n.parse(e,t.FROM)},t._resolvePreviousValid=function(e,n,r){switch(n){case 2:r=Math.min(r,nt.isLeapYear(e)?29:28);break;case 4:case 6:case 9:case 11:r=Math.min(r,30)}return t.of(e,n,r)},t._validate=function(e,t,n){var r;if(N.YEAR.checkValidValue(e),N.MONTH_OF_YEAR.checkValidValue(t),N.DAY_OF_MONTH.checkValidValue(n),n>28){switch(r=31,t){case 2:r=nt.isLeapYear(e)?29:28;break;case 4:case 6:case 9:case 11:r=30}n>r&&p(!1,29===n?"Invalid date 'February 29' as '"+e+"' is not a leap year":"Invalid date '"+e+"' '"+t+"' '"+n+"'",i)}};var n=t.prototype;return n.isSupported=function(t){return e.prototype.isSupported.call(this,t)},n.range=function(e){if(e instanceof N){if(e.isDateBased()){switch(e){case N.DAY_OF_MONTH:return R.of(1,this.lengthOfMonth());case N.DAY_OF_YEAR:return R.of(1,this.lengthOfYear());case N.ALIGNED_WEEK_OF_MONTH:return R.of(1,this.month()===F.FEBRUARY&&!1===this.isLeapYear()?4:5);case N.YEAR_OF_ERA:return this._year<=0?R.of(1,Qe.MAX_VALUE+1):R.of(1,Qe.MAX_VALUE)}return e.range()}throw new s("Unsupported field: "+e)}return e.rangeRefinedBy(this)},n.get=function(e){return this.getLong(e)},n.getLong=function(e){return p(null!=e,"",l),e instanceof N?this._get0(e):e.getFrom(this)},n._get0=function(e){switch(e){case N.DAY_OF_WEEK:return this.dayOfWeek().value();case N.ALIGNED_DAY_OF_WEEK_IN_MONTH:return w.intMod(this._day-1,7)+1;case N.ALIGNED_DAY_OF_WEEK_IN_YEAR:return w.intMod(this.dayOfYear()-1,7)+1;case N.DAY_OF_MONTH:return this._day;case N.DAY_OF_YEAR:return this.dayOfYear();case N.EPOCH_DAY:return this.toEpochDay();case N.ALIGNED_WEEK_OF_MONTH:return w.intDiv(this._day-1,7)+1;case N.ALIGNED_WEEK_OF_YEAR:return w.intDiv(this.dayOfYear()-1,7)+1;case N.MONTH_OF_YEAR:return this._month;case N.PROLEPTIC_MONTH:return this._prolepticMonth();case N.YEAR_OF_ERA:return this._year>=1?this._year:1-this._year;case N.YEAR:return this._year;case N.ERA:return this._year>=1?1:0}throw new s("Unsupported field: "+e)},n._prolepticMonth=function(){return 12*this._year+(this._month-1)},n.chronology=function(){return nt.INSTANCE},n.year=function(){return this._year},n.monthValue=function(){return this._month},n.month=function(){return F.of(this._month)},n.dayOfMonth=function(){return this._day},n.dayOfYear=function(){return this.month().firstDayOfYear(this.isLeapYear())+this._day-1},n.dayOfWeek=function(){var e=w.floorMod(this.toEpochDay()+3,7);return U.of(e+1)},n.isLeapYear=function(){return nt.isLeapYear(this._year)},n.lengthOfMonth=function(){switch(this._month){case 2:return this.isLeapYear()?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},n.lengthOfYear=function(){return this.isLeapYear()?366:365},n._withAdjuster=function(n){return m(n,"adjuster"),n instanceof t?n:e.prototype._withAdjuster.call(this,n)},n._withField=function(e,n){if(p(null!=e,"field",l),e instanceof N){var r=e;switch(r.checkValidValue(n),r){case N.DAY_OF_WEEK:return this.plusDays(n-this.dayOfWeek().value());case N.ALIGNED_DAY_OF_WEEK_IN_MONTH:return this.plusDays(n-this.getLong(N.ALIGNED_DAY_OF_WEEK_IN_MONTH));case N.ALIGNED_DAY_OF_WEEK_IN_YEAR:return this.plusDays(n-this.getLong(N.ALIGNED_DAY_OF_WEEK_IN_YEAR));case N.DAY_OF_MONTH:return this.withDayOfMonth(n);case N.DAY_OF_YEAR:return this.withDayOfYear(n);case N.EPOCH_DAY:return t.ofEpochDay(n);case N.ALIGNED_WEEK_OF_MONTH:return this.plusWeeks(n-this.getLong(N.ALIGNED_WEEK_OF_MONTH));case N.ALIGNED_WEEK_OF_YEAR:return this.plusWeeks(n-this.getLong(N.ALIGNED_WEEK_OF_YEAR));case N.MONTH_OF_YEAR:return this.withMonth(n);case N.PROLEPTIC_MONTH:return this.plusMonths(n-this.getLong(N.PROLEPTIC_MONTH));case N.YEAR_OF_ERA:return this.withYear(this._year>=1?n:1-n);case N.YEAR:return this.withYear(n);case N.ERA:return this.getLong(N.ERA)===n?this:this.withYear(1-this._year)}throw new s("Unsupported field: "+e)}return e.adjustInto(this,n)},n.withYear=function(e){return this._year===e?this:(N.YEAR.checkValidValue(e),t._resolvePreviousValid(e,this._month,this._day))},n.withMonth=function(e){var n=e instanceof F?e.value():e;return this._month===n?this:(N.MONTH_OF_YEAR.checkValidValue(n),t._resolvePreviousValid(this._year,n,this._day))},n.withDayOfMonth=function(e){return this._day===e?this:t.of(this._year,this._month,e)},n.withDayOfYear=function(e){return this.dayOfYear()===e?this:t.ofYearDay(this._year,e)},n._plusUnit=function(e,t){if(m(e,"amountToAdd"),m(t,"unit"),t instanceof C){switch(t){case C.DAYS:return this.plusDays(e);case C.WEEKS:return this.plusWeeks(e);case C.MONTHS:return this.plusMonths(e);case C.YEARS:return this.plusYears(e);case C.DECADES:return this.plusYears(w.safeMultiply(e,10));case C.CENTURIES:return this.plusYears(w.safeMultiply(e,100));case C.MILLENNIA:return this.plusYears(w.safeMultiply(e,1e3));case C.ERAS:return this.with(N.ERA,w.safeAdd(this.getLong(N.ERA),e))}throw new s("Unsupported unit: "+t)}return t.addTo(this,e)},n.plusYears=function(e){if(0===e)return this;var n=N.YEAR.checkValidIntValue(this._year+e);return t._resolvePreviousValid(n,this._month,this._day)},n.plusMonths=function(e){if(0===e)return this;var n=12*this._year+(this._month-1)+e,r=N.YEAR.checkValidIntValue(w.floorDiv(n,12)),i=w.floorMod(n,12)+1;return t._resolvePreviousValid(r,i,this._day)},n.plusWeeks=function(e){return this.plusDays(w.safeMultiply(e,7))},n.plusDays=function(e){if(0===e)return this;var n=w.safeAdd(this.toEpochDay(),e);return t.ofEpochDay(n)},n._minusUnit=function(e,t){return m(e,"amountToSubtract"),m(t,"unit"),this._plusUnit(-1*e,t)},n.minusYears=function(e){return this.plusYears(-1*e)},n.minusMonths=function(e){return this.plusMonths(-1*e)},n.minusWeeks=function(e){return this.plusWeeks(-1*e)},n.minusDays=function(e){return this.plusDays(-1*e)},n.query=function(t){return m(t,"query"),t===P.localDate()?this:e.prototype.query.call(this,t)},n.adjustInto=function(t){return e.prototype.adjustInto.call(this,t)},n.until=function(e,t){return arguments.length<2?this.until1(e):this.until2(e,t)},n.until2=function(e,n){var r=t.from(e);if(n instanceof C){switch(n){case C.DAYS:return this.daysUntil(r);case C.WEEKS:return w.intDiv(this.daysUntil(r),7);case C.MONTHS:return this._monthsUntil(r);case C.YEARS:return w.intDiv(this._monthsUntil(r),12);case C.DECADES:return w.intDiv(this._monthsUntil(r),120);case C.CENTURIES:return w.intDiv(this._monthsUntil(r),1200);case C.MILLENNIA:return w.intDiv(this._monthsUntil(r),12e3);case C.ERAS:return r.getLong(N.ERA)-this.getLong(N.ERA)}throw new s("Unsupported unit: "+n)}return n.between(this,r)},n.daysUntil=function(e){return e.toEpochDay()-this.toEpochDay()},n._monthsUntil=function(e){var t=32*this._prolepticMonth()+this.dayOfMonth(),n=32*e._prolepticMonth()+e.dayOfMonth();return w.intDiv(n-t,32)},n.until1=function(e){var n=t.from(e),r=n._prolepticMonth()-this._prolepticMonth(),i=n._day-this._day;if(r>0&&i<0){r--;var o=this.plusMonths(r);i=n.toEpochDay()-o.toEpochDay()}else r<0&&i>0&&(r++,i-=n.lengthOfMonth());var s=w.intDiv(r,12),a=w.intMod(r,12);return q.of(s,a,i)},n.atTime=function(){return 1===arguments.length?this.atTime1.apply(this,arguments):this.atTime4.apply(this,arguments)},n.atTime1=function(e){if(m(e,"time"),e instanceof dt)return ht.of(this,e);if(e instanceof rt)return this._atTimeOffsetTime(e);throw new c("time must be an instance of LocalTime or OffsetTime"+(e&&e.constructor&&e.constructor.name?", but is "+e.constructor.name:""))},n.atTime4=function(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),this.atTime1(dt.of(e,t,n,r))},n._atTimeOffsetTime=function(e){return st.of(ht.of(this,e.toLocalTime()),e.offset())},n.atStartOfDay=function(e){return null!=e?this._atStartOfDayWithZone(e):ht.of(this,dt.MIDNIGHT)},n._atStartOfDayWithZone=function(e){m(e,"zone");var t=this.atTime(dt.MIDNIGHT);if(e instanceof Z==0){var n=e.rules().transition(t);null!=n&&n.isGap()&&(t=n.dateTimeAfter())}return ot.of(t,e)},n.toEpochDay=function(){var e=this._year,t=this._month,n=0;return n+=365*e,e>=0?n+=w.intDiv(e+3,4)-w.intDiv(e+99,100)+w.intDiv(e+399,400):n-=w.intDiv(e,-4)-w.intDiv(e,-100)+w.intDiv(e,-400),n+=w.intDiv(367*t-362,12),n+=this.dayOfMonth()-1,t>2&&(n--,nt.isLeapYear(e)||n--),n-ct},n.compareTo=function(e){return m(e,"other"),g(e,t,"other"),this._compareTo0(e)},n._compareTo0=function(e){var t=this._year-e._year;return 0===t&&0==(t=this._month-e._month)&&(t=this._day-e._day),t},n.isAfter=function(e){return this.compareTo(e)>0},n.isBefore=function(e){return this.compareTo(e)<0},n.isEqual=function(e){return 0===this.compareTo(e)},n.equals=function(e){return this===e||e instanceof t&&0===this._compareTo0(e)},n.hashCode=function(){var e=this._year,t=this._month,n=this._day;return w.hash(4294965248&e^(e<<11)+(t<<6)+n)},n.toString=function(){var e=this._year,t=this._month,n=this._day;return(Math.abs(e)<1e3?e<0?"-"+(""+(e-1e4)).slice(-4):(""+(e+1e4)).slice(-4):e>9999?"+"+e:""+e)+(t<10?"-0"+t:"-"+t)+(n<10?"-0"+n:"-"+n)},n.toJSON=function(){return this.toString()},n.format=function(t){return m(t,"formatter"),g(t,Ge,"formatter"),e.prototype.format.call(this,t)},t}($),lt=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.chronology=function(){return this.toLocalDate().chronology()},n.query=function(t){return t===P.chronology()?this.chronology():t===P.precision()?C.NANOS:t===P.localDate()?ut.ofEpochDay(this.toLocalDate().toEpochDay()):t===P.localTime()?this.toLocalTime():t===P.zone()||t===P.zoneId()||t===P.offset()?null:e.prototype.query.call(this,t)},n.adjustInto=function(e){return e.with(N.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(N.NANO_OF_DAY,this.toLocalTime().toNanoOfDay())},n.toInstant=function(e){return g(e,Z,"zoneId"),pt.ofEpochSecond(this.toEpochSecond(e),this.toLocalTime().nano())},n.toEpochSecond=function(e){m(e,"offset");var t=86400*this.toLocalDate().toEpochDay()+this.toLocalTime().toSecondOfDay();return t-=e.totalSeconds(),w.safeToInt(t)},t}(V),ht=function(e){function t(t,n){var r;return r=e.call(this)||this,g(t,ut,"date"),g(n,dt,"time"),r._date=t,r._time=n,r}h(t,e),t.now=function(e){return null==e?t._now(mt.systemDefaultZone()):e instanceof mt?t._now(e):t._now(mt.system(e))},t._now=function(e){return m(e,"clock"),t.ofInstant(e.instant(),e.zone())},t._ofEpochMillis=function(e,n){var r=w.floorDiv(e,1e3)+n.totalSeconds(),i=w.floorDiv(r,dt.SECONDS_PER_DAY),o=w.floorMod(r,dt.SECONDS_PER_DAY),s=1e6*w.floorMod(e,1e3);return new t(ut.ofEpochDay(i),dt.ofSecondOfDay(o,s))},t.of=function(){return arguments.length<=2?t.ofDateAndTime.apply(this,arguments):t.ofNumbers.apply(this,arguments)},t.ofNumbers=function(e,n,r,i,o,s,a){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),new t(ut.of(e,n,r),dt.of(i,o,s,a))},t.ofDateAndTime=function(e,n){return m(e,"date"),m(n,"time"),new t(e,n)},t.ofInstant=function(e,n){void 0===n&&(n=G.systemDefault()),m(e,"instant"),g(e,pt,"instant"),m(n,"zone");var r=n.rules().offset(e);return t.ofEpochSecond(e.epochSecond(),e.nano(),r)},t.ofEpochSecond=function(e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),2===arguments.length&&n instanceof Z&&(r=n,n=0),m(r,"offset");var i=e+r.totalSeconds(),o=w.floorDiv(i,dt.SECONDS_PER_DAY),s=w.floorMod(i,dt.SECONDS_PER_DAY),a=ut.ofEpochDay(o),c=dt.ofSecondOfDay(s,n);return new t(a,c)},t.from=function(e){if(m(e,"temporal"),e instanceof t)return e;if(e instanceof ot)return e.toLocalDateTime();try{return new t(ut.from(e),dt.from(e))}catch(t){throw new i("Unable to obtain LocalDateTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,n){return void 0===n&&(n=Ge.ISO_LOCAL_DATE_TIME),m(n,"formatter"),n.parse(e,t.FROM)};var n=t.prototype;return n._withDateTime=function(e,n){return this._date.equals(e)&&this._time.equals(n)?this:new t(e,n)},n.isSupported=function(e){return e instanceof N||e instanceof C?e.isDateBased()||e.isTimeBased():null!=e&&e.isSupportedBy(this)},n.range=function(e){return e instanceof N?e.isTimeBased()?this._time.range(e):this._date.range(e):e.rangeRefinedBy(this)},n.get=function(t){return t instanceof N?t.isTimeBased()?this._time.get(t):this._date.get(t):e.prototype.get.call(this,t)},n.getLong=function(e){return m(e,"field"),e instanceof N?e.isTimeBased()?this._time.getLong(e):this._date.getLong(e):e.getFrom(this)},n.year=function(){return this._date.year()},n.monthValue=function(){return this._date.monthValue()},n.month=function(){return this._date.month()},n.dayOfMonth=function(){return this._date.dayOfMonth()},n.dayOfYear=function(){return this._date.dayOfYear()},n.dayOfWeek=function(){return this._date.dayOfWeek()},n.hour=function(){return this._time.hour()},n.minute=function(){return this._time.minute()},n.second=function(){return this._time.second()},n.nano=function(){return this._time.nano()},n._withAdjuster=function(n){return m(n,"adjuster"),n instanceof ut?this._withDateTime(n,this._time):n instanceof dt?this._withDateTime(this._date,n):n instanceof t?n:e.prototype._withAdjuster.call(this,n)},n._withField=function(e,t){return m(e,"field"),e instanceof N?e.isTimeBased()?this._withDateTime(this._date,this._time.with(e,t)):this._withDateTime(this._date.with(e,t),this._time):e.adjustInto(this,t)},n.withYear=function(e){return this._withDateTime(this._date.withYear(e),this._time)},n.withMonth=function(e){return this._withDateTime(this._date.withMonth(e),this._time)},n.withDayOfMonth=function(e){return this._withDateTime(this._date.withDayOfMonth(e),this._time)},n.withDayOfYear=function(e){return this._withDateTime(this._date.withDayOfYear(e),this._time)},n.withHour=function(e){var t=this._time.withHour(e);return this._withDateTime(this._date,t)},n.withMinute=function(e){var t=this._time.withMinute(e);return this._withDateTime(this._date,t)},n.withSecond=function(e){var t=this._time.withSecond(e);return this._withDateTime(this._date,t)},n.withNano=function(e){var t=this._time.withNano(e);return this._withDateTime(this._date,t)},n.truncatedTo=function(e){return this._withDateTime(this._date,this._time.truncatedTo(e))},n._plusUnit=function(e,t){if(m(t,"unit"),t instanceof C){switch(t){case C.NANOS:return this.plusNanos(e);case C.MICROS:return this.plusDays(w.intDiv(e,dt.MICROS_PER_DAY)).plusNanos(1e3*w.intMod(e,dt.MICROS_PER_DAY));case C.MILLIS:return this.plusDays(w.intDiv(e,dt.MILLIS_PER_DAY)).plusNanos(1e6*w.intMod(e,dt.MILLIS_PER_DAY));case C.SECONDS:return this.plusSeconds(e);case C.MINUTES:return this.plusMinutes(e);case C.HOURS:return this.plusHours(e);case C.HALF_DAYS:return this.plusDays(w.intDiv(e,256)).plusHours(12*w.intMod(e,256))}return this._withDateTime(this._date.plus(e,t),this._time)}return t.addTo(this,e)},n.plusYears=function(e){var t=this._date.plusYears(e);return this._withDateTime(t,this._time)},n.plusMonths=function(e){var t=this._date.plusMonths(e);return this._withDateTime(t,this._time)},n.plusWeeks=function(e){var t=this._date.plusWeeks(e);return this._withDateTime(t,this._time)},n.plusDays=function(e){var t=this._date.plusDays(e);return this._withDateTime(t,this._time)},n.plusHours=function(e){return this._plusWithOverflow(this._date,e,0,0,0,1)},n.plusMinutes=function(e){return this._plusWithOverflow(this._date,0,e,0,0,1)},n.plusSeconds=function(e){return this._plusWithOverflow(this._date,0,0,e,0,1)},n.plusNanos=function(e){return this._plusWithOverflow(this._date,0,0,0,e,1)},n._minusUnit=function(e,t){return m(t,"unit"),this._plusUnit(-1*e,t)},n.minusYears=function(e){return this.plusYears(-1*e)},n.minusMonths=function(e){return this.plusMonths(-1*e)},n.minusWeeks=function(e){return this.plusWeeks(-1*e)},n.minusDays=function(e){return this.plusDays(-1*e)},n.minusHours=function(e){return this._plusWithOverflow(this._date,e,0,0,0,-1)},n.minusMinutes=function(e){return this._plusWithOverflow(this._date,0,e,0,0,-1)},n.minusSeconds=function(e){return this._plusWithOverflow(this._date,0,0,e,0,-1)},n.minusNanos=function(e){return this._plusWithOverflow(this._date,0,0,0,e,-1)},n._plusWithOverflow=function(e,t,n,r,i,o){if(0===t&&0===n&&0===r&&0===i)return this._withDateTime(e,this._time);var s=w.intDiv(i,dt.NANOS_PER_DAY)+w.intDiv(r,dt.SECONDS_PER_DAY)+w.intDiv(n,dt.MINUTES_PER_DAY)+w.intDiv(t,dt.HOURS_PER_DAY);s*=o;var a=w.intMod(i,dt.NANOS_PER_DAY)+w.intMod(r,dt.SECONDS_PER_DAY)*dt.NANOS_PER_SECOND+w.intMod(n,dt.MINUTES_PER_DAY)*dt.NANOS_PER_MINUTE+w.intMod(t,dt.HOURS_PER_DAY)*dt.NANOS_PER_HOUR,c=this._time.toNanoOfDay();a=a*o+c,s+=w.floorDiv(a,dt.NANOS_PER_DAY);var u=w.floorMod(a,dt.NANOS_PER_DAY),l=u===c?this._time:dt.ofNanoOfDay(u);return this._withDateTime(e.plusDays(s),l)},n.query=function(t){return m(t,"query"),t===P.localDate()?this.toLocalDate():e.prototype.query.call(this,t)},n.adjustInto=function(t){return e.prototype.adjustInto.call(this,t)},n.until=function(e,n){m(e,"endExclusive"),m(n,"unit");var r=t.from(e);if(n instanceof C){if(n.isTimeBased()){var i=this._date.daysUntil(r._date),o=r._time.toNanoOfDay()-this._time.toNanoOfDay();i>0&&o<0?(i--,o+=dt.NANOS_PER_DAY):i<0&&o>0&&(i++,o-=dt.NANOS_PER_DAY);var a=i;switch(n){case C.NANOS:return a=w.safeMultiply(a,dt.NANOS_PER_DAY),w.safeAdd(a,o);case C.MICROS:return a=w.safeMultiply(a,dt.MICROS_PER_DAY),w.safeAdd(a,w.intDiv(o,1e3));case C.MILLIS:return a=w.safeMultiply(a,dt.MILLIS_PER_DAY),w.safeAdd(a,w.intDiv(o,1e6));case C.SECONDS:return a=w.safeMultiply(a,dt.SECONDS_PER_DAY),w.safeAdd(a,w.intDiv(o,dt.NANOS_PER_SECOND));case C.MINUTES:return a=w.safeMultiply(a,dt.MINUTES_PER_DAY),w.safeAdd(a,w.intDiv(o,dt.NANOS_PER_MINUTE));case C.HOURS:return a=w.safeMultiply(a,dt.HOURS_PER_DAY),w.safeAdd(a,w.intDiv(o,dt.NANOS_PER_HOUR));case C.HALF_DAYS:return a=w.safeMultiply(a,2),w.safeAdd(a,w.intDiv(o,12*dt.NANOS_PER_HOUR))}throw new s("Unsupported unit: "+n)}var c=r._date,u=r._time;return c.isAfter(this._date)&&u.isBefore(this._time)?c=c.minusDays(1):c.isBefore(this._date)&&u.isAfter(this._time)&&(c=c.plusDays(1)),this._date.until(c,n)}return n.between(this,r)},n.atOffset=function(e){return st.of(this,e)},n.atZone=function(e){return ot.of(this,e)},n.toLocalDate=function(){return this._date},n.toLocalTime=function(){return this._time},n.compareTo=function(e){return m(e,"other"),g(e,t,"other"),this._compareTo0(e)},n._compareTo0=function(e){var t=this._date.compareTo(e.toLocalDate());return 0===t&&(t=this._time.compareTo(e.toLocalTime())),t},n.isAfter=function(e){return this.compareTo(e)>0},n.isBefore=function(e){return this.compareTo(e)<0},n.isEqual=function(e){return 0===this.compareTo(e)},n.equals=function(e){return this===e||e instanceof t&&this._date.equals(e._date)&&this._time.equals(e._time)},n.hashCode=function(){return this._date.hashCode()^this._time.hashCode()},n.toString=function(){return this._date.toString()+"T"+this._time.toString()},n.toJSON=function(){return this.toString()},n.format=function(e){return m(e,"formatter"),e.format(this)},t}(lt),dt=function(e){function t(n,r,i,o){var s;void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),s=e.call(this)||this;var a=w.safeToInt(n),c=w.safeToInt(r),u=w.safeToInt(i),l=w.safeToInt(o);return t._validate(a,c,u,l),0===c&&0===u&&0===l?(t.HOURS[a]||(s._hour=a,s._minute=c,s._second=u,s._nano=l,t.HOURS[a]=f(s)),t.HOURS[a]||f(s)):(s._hour=a,s._minute=c,s._second=u,s._nano=l,s)}h(t,e),t.now=function(e){return null==e?t._now(mt.systemDefaultZone()):e instanceof mt?t._now(e):t._now(mt.system(e))},t._now=function(e){return void 0===e&&(e=mt.systemDefaultZone()),m(e,"clock"),t.ofInstant(e.instant(),e.zone())},t.ofInstant=function(e,n){void 0===n&&(n=G.systemDefault());var r=n.rules().offset(e),i=w.intMod(e.epochSecond(),t.SECONDS_PER_DAY);return(i=w.intMod(i+r.totalSeconds(),t.SECONDS_PER_DAY))<0&&(i+=t.SECONDS_PER_DAY),t.ofSecondOfDay(i,e.nano())},t.of=function(e,n,r,i){return new t(e,n,r,i)},t.ofSecondOfDay=function(e,n){void 0===e&&(e=0),void 0===n&&(n=0),N.SECOND_OF_DAY.checkValidValue(e),N.NANO_OF_SECOND.checkValidValue(n);var r=w.intDiv(e,t.SECONDS_PER_HOUR);e-=r*t.SECONDS_PER_HOUR;var i=w.intDiv(e,t.SECONDS_PER_MINUTE);return new t(r,i,e-=i*t.SECONDS_PER_MINUTE,n)},t.ofNanoOfDay=function(e){void 0===e&&(e=0),N.NANO_OF_DAY.checkValidValue(e);var n=w.intDiv(e,t.NANOS_PER_HOUR);e-=n*t.NANOS_PER_HOUR;var r=w.intDiv(e,t.NANOS_PER_MINUTE);e-=r*t.NANOS_PER_MINUTE;var i=w.intDiv(e,t.NANOS_PER_SECOND);return new t(n,r,i,e-=i*t.NANOS_PER_SECOND)},t.from=function(e){m(e,"temporal");var t=e.query(P.localTime());if(null==t)throw new i("Unable to obtain LocalTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""));return t},t.parse=function(e,n){return void 0===n&&(n=Ge.ISO_LOCAL_TIME),m(n,"formatter"),n.parse(e,t.FROM)},t._validate=function(e,t,n,r){N.HOUR_OF_DAY.checkValidValue(e),N.MINUTE_OF_HOUR.checkValidValue(t),N.SECOND_OF_MINUTE.checkValidValue(n),N.NANO_OF_SECOND.checkValidValue(r)};var n=t.prototype;return n.isSupported=function(e){return e instanceof N||e instanceof C?e.isTimeBased():null!=e&&e.isSupportedBy(this)},n.range=function(t){return m(t),e.prototype.range.call(this,t)},n.get=function(e){return this.getLong(e)},n.getLong=function(e){return m(e,"field"),e instanceof N?this._get0(e):e.getFrom(this)},n._get0=function(e){switch(e){case N.NANO_OF_SECOND:return this._nano;case N.NANO_OF_DAY:return this.toNanoOfDay();case N.MICRO_OF_SECOND:return w.intDiv(this._nano,1e3);case N.MICRO_OF_DAY:return w.intDiv(this.toNanoOfDay(),1e3);case N.MILLI_OF_SECOND:return w.intDiv(this._nano,1e6);case N.MILLI_OF_DAY:return w.intDiv(this.toNanoOfDay(),1e6);case N.SECOND_OF_MINUTE:return this._second;case N.SECOND_OF_DAY:return this.toSecondOfDay();case N.MINUTE_OF_HOUR:return this._minute;case N.MINUTE_OF_DAY:return 60*this._hour+this._minute;case N.HOUR_OF_AMPM:return w.intMod(this._hour,12);case N.CLOCK_HOUR_OF_AMPM:var t=w.intMod(this._hour,12);return t%12==0?12:t;case N.HOUR_OF_DAY:return this._hour;case N.CLOCK_HOUR_OF_DAY:return 0===this._hour?24:this._hour;case N.AMPM_OF_DAY:return w.intDiv(this._hour,12)}throw new s("Unsupported field: "+e)},n.hour=function(){return this._hour},n.minute=function(){return this._minute},n.second=function(){return this._second},n.nano=function(){return this._nano},n._withAdjuster=function(n){return m(n,"adjuster"),n instanceof t?n:e.prototype._withAdjuster.call(this,n)},n._withField=function(e,n){if(m(e,"field"),g(e,I,"field"),e instanceof N){switch(e.checkValidValue(n),e){case N.NANO_OF_SECOND:return this.withNano(n);case N.NANO_OF_DAY:return t.ofNanoOfDay(n);case N.MICRO_OF_SECOND:return this.withNano(1e3*n);case N.MICRO_OF_DAY:return t.ofNanoOfDay(1e3*n);case N.MILLI_OF_SECOND:return this.withNano(1e6*n);case N.MILLI_OF_DAY:return t.ofNanoOfDay(1e6*n);case N.SECOND_OF_MINUTE:return this.withSecond(n);case N.SECOND_OF_DAY:return this.plusSeconds(n-this.toSecondOfDay());case N.MINUTE_OF_HOUR:return this.withMinute(n);case N.MINUTE_OF_DAY:return this.plusMinutes(n-(60*this._hour+this._minute));case N.HOUR_OF_AMPM:return this.plusHours(n-w.intMod(this._hour,12));case N.CLOCK_HOUR_OF_AMPM:return this.plusHours((12===n?0:n)-w.intMod(this._hour,12));case N.HOUR_OF_DAY:return this.withHour(n);case N.CLOCK_HOUR_OF_DAY:return this.withHour(24===n?0:n);case N.AMPM_OF_DAY:return this.plusHours(12*(n-w.intDiv(this._hour,12)))}throw new s("Unsupported field: "+e)}return e.adjustInto(this,n)},n.withHour=function(e){return void 0===e&&(e=0),this._hour===e?this:new t(e,this._minute,this._second,this._nano)},n.withMinute=function(e){return void 0===e&&(e=0),this._minute===e?this:new t(this._hour,e,this._second,this._nano)},n.withSecond=function(e){return void 0===e&&(e=0),this._second===e?this:new t(this._hour,this._minute,e,this._nano)},n.withNano=function(e){return void 0===e&&(e=0),this._nano===e?this:new t(this._hour,this._minute,this._second,e)},n.truncatedTo=function(e){if(m(e,"unit"),e===C.NANOS)return this;var n=e.duration();if(n.seconds()>t.SECONDS_PER_DAY)throw new i("Unit is too large to be used for truncation");var r=n.toNanos();if(0!==w.intMod(t.NANOS_PER_DAY,r))throw new i("Unit must divide into a standard day without remainder");var o=this.toNanoOfDay();return t.ofNanoOfDay(w.intDiv(o,r)*r)},n._plusUnit=function(e,n){if(m(n,"unit"),n instanceof C){switch(n){case C.NANOS:return this.plusNanos(e);case C.MICROS:return this.plusNanos(1e3*w.intMod(e,t.MICROS_PER_DAY));case C.MILLIS:return this.plusNanos(1e6*w.intMod(e,t.MILLIS_PER_DAY));case C.SECONDS:return this.plusSeconds(e);case C.MINUTES:return this.plusMinutes(e);case C.HOURS:return this.plusHours(e);case C.HALF_DAYS:return this.plusHours(12*w.intMod(e,2))}throw new s("Unsupported unit: "+n)}return n.addTo(this,e)},n.plusHours=function(e){return 0===e?this:new t(w.intMod(w.intMod(e,t.HOURS_PER_DAY)+this._hour+t.HOURS_PER_DAY,t.HOURS_PER_DAY),this._minute,this._second,this._nano)},n.plusMinutes=function(e){if(0===e)return this;var n=this._hour*t.MINUTES_PER_HOUR+this._minute,r=w.intMod(w.intMod(e,t.MINUTES_PER_DAY)+n+t.MINUTES_PER_DAY,t.MINUTES_PER_DAY);return n===r?this:new t(w.intDiv(r,t.MINUTES_PER_HOUR),w.intMod(r,t.MINUTES_PER_HOUR),this._second,this._nano)},n.plusSeconds=function(e){if(0===e)return this;var n=this._hour*t.SECONDS_PER_HOUR+this._minute*t.SECONDS_PER_MINUTE+this._second,r=w.intMod(w.intMod(e,t.SECONDS_PER_DAY)+n+t.SECONDS_PER_DAY,t.SECONDS_PER_DAY);return n===r?this:new t(w.intDiv(r,t.SECONDS_PER_HOUR),w.intMod(w.intDiv(r,t.SECONDS_PER_MINUTE),t.MINUTES_PER_HOUR),w.intMod(r,t.SECONDS_PER_MINUTE),this._nano)},n.plusNanos=function(e){if(0===e)return this;var n=this.toNanoOfDay(),r=w.intMod(w.intMod(e,t.NANOS_PER_DAY)+n+t.NANOS_PER_DAY,t.NANOS_PER_DAY);return n===r?this:new t(w.intDiv(r,t.NANOS_PER_HOUR),w.intMod(w.intDiv(r,t.NANOS_PER_MINUTE),t.MINUTES_PER_HOUR),w.intMod(w.intDiv(r,t.NANOS_PER_SECOND),t.SECONDS_PER_MINUTE),w.intMod(r,t.NANOS_PER_SECOND))},n._minusUnit=function(e,t){return m(t,"unit"),this._plusUnit(-1*e,t)},n.minusHours=function(e){return this.plusHours(-1*w.intMod(e,t.HOURS_PER_DAY))},n.minusMinutes=function(e){return this.plusMinutes(-1*w.intMod(e,t.MINUTES_PER_DAY))},n.minusSeconds=function(e){return this.plusSeconds(-1*w.intMod(e,t.SECONDS_PER_DAY))},n.minusNanos=function(e){return this.plusNanos(-1*w.intMod(e,t.NANOS_PER_DAY))},n.query=function(e){return m(e,"query"),e===P.precision()?C.NANOS:e===P.localTime()?this:e===P.chronology()||e===P.zoneId()||e===P.zone()||e===P.offset()||e===P.localDate()?null:e.queryFrom(this)},n.adjustInto=function(e){return e.with(t.NANO_OF_DAY,this.toNanoOfDay())},n.until=function(e,n){m(e,"endExclusive"),m(n,"unit");var r=t.from(e);if(n instanceof C){var i=r.toNanoOfDay()-this.toNanoOfDay();switch(n){case C.NANOS:return i;case C.MICROS:return w.intDiv(i,1e3);case C.MILLIS:return w.intDiv(i,1e6);case C.SECONDS:return w.intDiv(i,t.NANOS_PER_SECOND);case C.MINUTES:return w.intDiv(i,t.NANOS_PER_MINUTE);case C.HOURS:return w.intDiv(i,t.NANOS_PER_HOUR);case C.HALF_DAYS:return w.intDiv(i,12*t.NANOS_PER_HOUR)}throw new s("Unsupported unit: "+n)}return n.between(this,r)},n.atDate=function(e){return ht.of(e,this)},n.atOffset=function(e){return rt.of(this,e)},n.toSecondOfDay=function(){var e=this._hour*t.SECONDS_PER_HOUR;return(e+=this._minute*t.SECONDS_PER_MINUTE)+this._second},n.toNanoOfDay=function(){var e=this._hour*t.NANOS_PER_HOUR;return e+=this._minute*t.NANOS_PER_MINUTE,(e+=this._second*t.NANOS_PER_SECOND)+this._nano},n.compareTo=function(e){m(e,"other"),g(e,t,"other");var n=w.compareNumbers(this._hour,e._hour);return 0===n&&0===(n=w.compareNumbers(this._minute,e._minute))&&0===(n=w.compareNumbers(this._second,e._second))&&(n=w.compareNumbers(this._nano,e._nano)),n},n.isAfter=function(e){return this.compareTo(e)>0},n.isBefore=function(e){return this.compareTo(e)<0},n.equals=function(e){return this===e||e instanceof t&&this._hour===e._hour&&this._minute===e._minute&&this._second===e._second&&this._nano===e._nano},n.hashCode=function(){var e=this.toNanoOfDay();return w.hash(e)},n.toString=function(){var e="",t=this._hour,n=this._minute,r=this._second,i=this._nano;return e+=t<10?"0":"",e+=t,e+=n<10?":0":":",e+=n,(r>0||i>0)&&(e+=r<10?":0":":",e+=r,i>0&&(e+=".",0===w.intMod(i,1e6)?e+=(""+(w.intDiv(i,1e6)+1e3)).substring(1):0===w.intMod(i,1e3)?e+=(""+(w.intDiv(i,1e3)+1e6)).substring(1):e+=(""+(i+1e9)).substring(1))),e},n.toJSON=function(){return this.toString()},n.format=function(e){return m(e,"formatter"),e.format(this)},t}(V);dt.HOURS_PER_DAY=24,dt.MINUTES_PER_HOUR=60,dt.MINUTES_PER_DAY=dt.MINUTES_PER_HOUR*dt.HOURS_PER_DAY,dt.SECONDS_PER_MINUTE=60,dt.SECONDS_PER_HOUR=dt.SECONDS_PER_MINUTE*dt.MINUTES_PER_HOUR,dt.SECONDS_PER_DAY=dt.SECONDS_PER_HOUR*dt.HOURS_PER_DAY,dt.MILLIS_PER_DAY=1e3*dt.SECONDS_PER_DAY,dt.MICROS_PER_DAY=1e6*dt.SECONDS_PER_DAY,dt.NANOS_PER_SECOND=1e9,dt.NANOS_PER_MINUTE=dt.NANOS_PER_SECOND*dt.SECONDS_PER_MINUTE,dt.NANOS_PER_HOUR=dt.NANOS_PER_MINUTE*dt.MINUTES_PER_HOUR,dt.NANOS_PER_DAY=dt.NANOS_PER_HOUR*dt.HOURS_PER_DAY;var ft=1e6,pt=function(e){function t(n,r){var i;return i=e.call(this)||this,t._validate(n,r),i._seconds=w.safeToInt(n),i._nanos=w.safeToInt(r),i}h(t,e),t.now=function(e){return void 0===e&&(e=mt.systemUTC()),e.instant()},t.ofEpochSecond=function(e,n){void 0===n&&(n=0);var r=e+w.floorDiv(n,dt.NANOS_PER_SECOND),i=w.floorMod(n,dt.NANOS_PER_SECOND);return t._create(r,i)},t.ofEpochMilli=function(e){var n=w.floorDiv(e,1e3),r=w.floorMod(e,1e3);return t._create(n,1e6*r)},t.ofEpochMicro=function(e){var n=w.floorDiv(e,1e6),r=w.floorMod(e,1e6);return t._create(n,1e3*r)},t.from=function(e){try{var n=e.getLong(N.INSTANT_SECONDS),r=e.get(N.NANO_OF_SECOND);return t.ofEpochSecond(n,r)}catch(t){throw new i("Unable to obtain Instant from TemporalAccessor: "+e+", type "+typeof e,t)}},t.parse=function(e){return Ge.ISO_INSTANT.parse(e,t.FROM)},t._create=function(e,n){return 0===e&&0===n?t.EPOCH:new t(e,n)},t._validate=function(e,n){if(e<t.MIN_SECONDS||e>t.MAX_SECONDS)throw new i("Instant exceeds minimum or maximum instant");if(n<0||n>dt.NANOS_PER_SECOND)throw new i("Instant exceeds minimum or maximum instant")};var n=t.prototype;return n.isSupported=function(e){return e instanceof N?e===N.INSTANT_SECONDS||e===N.NANO_OF_SECOND||e===N.MICRO_OF_SECOND||e===N.MILLI_OF_SECOND:e instanceof C?e.isTimeBased()||e===C.DAYS:null!=e&&e.isSupportedBy(this)},n.range=function(t){return e.prototype.range.call(this,t)},n.get=function(e){return this.getLong(e)},n.getLong=function(e){if(e instanceof N){switch(e){case N.NANO_OF_SECOND:return this._nanos;case N.MICRO_OF_SECOND:return w.intDiv(this._nanos,1e3);case N.MILLI_OF_SECOND:return w.intDiv(this._nanos,ft);case N.INSTANT_SECONDS:return this._seconds}throw new s("Unsupported field: "+e)}return e.getFrom(this)},n.epochSecond=function(){return this._seconds},n.nano=function(){return this._nanos},n._withField=function(e,n){if(m(e,"field"),e instanceof N){switch(e.checkValidValue(n),e){case N.MILLI_OF_SECOND:var r=n*ft;return r!==this._nanos?t._create(this._seconds,r):this;case N.MICRO_OF_SECOND:var i=1e3*n;return i!==this._nanos?t._create(this._seconds,i):this;case N.NANO_OF_SECOND:return n!==this._nanos?t._create(this._seconds,n):this;case N.INSTANT_SECONDS:return n!==this._seconds?t._create(n,this._nanos):this}throw new s("Unsupported field: "+e)}return e.adjustInto(this,n)},n.truncatedTo=function(e){if(m(e,"unit"),e===C.NANOS)return this;var t=e.duration();if(t.seconds()>dt.SECONDS_PER_DAY)throw new i("Unit is too large to be used for truncation");var n=t.toNanos();if(0!==w.intMod(dt.NANOS_PER_DAY,n))throw new i("Unit must divide into a standard day without remainder");var r=w.intMod(this._seconds,dt.SECONDS_PER_DAY)*dt.NANOS_PER_SECOND+this._nanos,o=w.intDiv(r,n)*n;return this.plusNanos(o-r)},n._plusUnit=function(e,t){if(m(e,"amountToAdd"),m(t,"unit"),g(t,S),t instanceof C){switch(t){case C.NANOS:return this.plusNanos(e);case C.MICROS:return this.plusMicros(e);case C.MILLIS:return this.plusMillis(e);case C.SECONDS:return this.plusSeconds(e);case C.MINUTES:return this.plusSeconds(w.safeMultiply(e,dt.SECONDS_PER_MINUTE));case C.HOURS:return this.plusSeconds(w.safeMultiply(e,dt.SECONDS_PER_HOUR));case C.HALF_DAYS:return this.plusSeconds(w.safeMultiply(e,dt.SECONDS_PER_DAY/2));case C.DAYS:return this.plusSeconds(w.safeMultiply(e,dt.SECONDS_PER_DAY))}throw new s("Unsupported unit: "+t)}return t.addTo(this,e)},n.plusSeconds=function(e){return this._plus(e,0)},n.plusMillis=function(e){return this._plus(w.intDiv(e,1e3),w.intMod(e,1e3)*ft)},n.plusNanos=function(e){return this._plus(0,e)},n.plusMicros=function(e){return this._plus(w.intDiv(e,1e6),1e3*w.intMod(e,1e6))},n._plus=function(e,n){if(0===e&&0===n)return this;var r=this._seconds+e;r+=w.intDiv(n,dt.NANOS_PER_SECOND);var i=this._nanos+n%dt.NANOS_PER_SECOND;return t.ofEpochSecond(r,i)},n._minusUnit=function(e,t){return this._plusUnit(-1*e,t)},n.minusSeconds=function(e){return this.plusSeconds(-1*e)},n.minusMillis=function(e){return this.plusMillis(-1*e)},n.minusNanos=function(e){return this.plusNanos(-1*e)},n.minusMicros=function(e){return this.plusMicros(-1*e)},n.query=function(e){return m(e,"query"),e===P.precision()?C.NANOS:e===P.localDate()||e===P.localTime()||e===P.chronology()||e===P.zoneId()||e===P.zone()||e===P.offset()?null:e.queryFrom(this)},n.adjustInto=function(e){return m(e,"temporal"),e.with(N.INSTANT_SECONDS,this._seconds).with(N.NANO_OF_SECOND,this._nanos)},n.until=function(e,n){m(e,"endExclusive"),m(n,"unit");var r=t.from(e);if(n instanceof C){switch(n){case C.NANOS:return this._nanosUntil(r);case C.MICROS:return this._microsUntil(r);case C.MILLIS:return w.safeSubtract(r.toEpochMilli(),this.toEpochMilli());case C.SECONDS:return this._secondsUntil(r);case C.MINUTES:return w.intDiv(this._secondsUntil(r),dt.SECONDS_PER_MINUTE);case C.HOURS:return w.intDiv(this._secondsUntil(r),dt.SECONDS_PER_HOUR);case C.HALF_DAYS:return w.intDiv(this._secondsUntil(r),12*dt.SECONDS_PER_HOUR);case C.DAYS:return w.intDiv(this._secondsUntil(r),dt.SECONDS_PER_DAY)}throw new s("Unsupported unit: "+n)}return n.between(this,r)},n._microsUntil=function(e){var t=w.safeSubtract(e.epochSecond(),this.epochSecond()),n=w.safeMultiply(t,1e6);return w.safeAdd(n,w.intDiv(e.nano()-this.nano(),1e3))},n._nanosUntil=function(e){var t=w.safeSubtract(e.epochSecond(),this.epochSecond()),n=w.safeMultiply(t,dt.NANOS_PER_SECOND);return w.safeAdd(n,e.nano()-this.nano())},n._secondsUntil=function(e){var t=w.safeSubtract(e.epochSecond(),this.epochSecond()),n=e.nano()-this.nano();return t>0&&n<0?t--:t<0&&n>0&&t++,t},n.atOffset=function(e){return st.ofInstant(this,e)},n.atZone=function(e){return ot.ofInstant(this,e)},n.toEpochMilli=function(){return w.safeMultiply(this._seconds,1e3)+w.intDiv(this._nanos,ft)},n.compareTo=function(e){m(e,"otherInstant"),g(e,t,"otherInstant");var n=w.compareNumbers(this._seconds,e._seconds);return 0!==n?n:this._nanos-e._nanos},n.isAfter=function(e){return this.compareTo(e)>0},n.isBefore=function(e){return this.compareTo(e)<0},n.equals=function(e){return this===e||e instanceof t&&this.epochSecond()===e.epochSecond()&&this.nano()===e.nano()},n.hashCode=function(){return w.hashCode(this._seconds,this._nanos)},n.toString=function(){return Ge.ISO_INSTANT.format(this)},n.toJSON=function(){return this.toString()},t}(V),mt=function(){function e(){}e.systemUTC=function(){return new gt(Z.UTC)},e.systemDefaultZone=function(){return new gt(G.systemDefault())},e.system=function(e){return new gt(e)},e.fixed=function(e,t){return new yt(e,t)},e.offset=function(e,t){return new _t(e,t)};var t=e.prototype;return t.millis=function(){y("Clock.millis")},t.instant=function(){y("Clock.instant")},t.zone=function(){y("Clock.zone")},t.withZone=function(){y("Clock.withZone")},e}(),gt=function(e){function t(t){var n;return m(t,"zone"),(n=e.call(this)||this)._zone=t,n}h(t,e);var n=t.prototype;return n.zone=function(){return this._zone},n.millis=function(){return(new Date).getTime()},n.instant=function(){return pt.ofEpochMilli(this.millis())},n.equals=function(e){return e instanceof t&&this._zone.equals(e._zone)},n.withZone=function(e){return e.equals(this._zone)?this:new t(e)},n.toString=function(){return"SystemClock["+this._zone.toString()+"]"},t}(mt),yt=function(e){function t(t,n){var r;return(r=e.call(this)||this)._instant=t,r._zoneId=n,r}h(t,e);var n=t.prototype;return n.instant=function(){return this._instant},n.millis=function(){return this._instant.toEpochMilli()},n.zone=function(){return this._zoneId},n.toString=function(){return"FixedClock[]"},n.equals=function(e){return e instanceof t&&this._instant.equals(e._instant)&&this._zoneId.equals(e._zoneId)},n.withZone=function(e){return e.equals(this._zoneId)?this:new t(this._instant,e)},t}(mt),_t=function(e){function t(t,n){var r;return(r=e.call(this)||this)._baseClock=t,r._offset=n,r}h(t,e);var n=t.prototype;return n.zone=function(){return this._baseClock.zone()},n.withZone=function(e){return e.equals(this._baseClock.zone())?this:new t(this._baseClock.withZone(e),this._offset)},n.millis=function(){return this._baseClock.millis()+this._offset.toMillis()},n.instant=function(){return this._baseClock.instant().plus(this._offset)},n.equals=function(e){return e instanceof t&&this._baseClock.equals(e._baseClock)&&this._offset.equals(e._offset)},n.toString=function(){return"OffsetClock["+this._baseClock+","+this._offset+"]"},t}(mt),vt=function(){function e(e,t,n){if(m(e,"transition"),m(t,"offsetBefore"),m(n,"offsetAfter"),t.equals(n))throw new c("Offsets must not be equal");if(0!==e.nano())throw new c("Nano-of-second must be zero");this._transition=e instanceof ht?e:ht.ofEpochSecond(e,0,t),this._offsetBefore=t,this._offsetAfter=n}e.of=function(t,n,r){return new e(t,n,r)};var t=e.prototype;return t.instant=function(){return this._transition.toInstant(this._offsetBefore)},t.toEpochSecond=function(){return this._transition.toEpochSecond(this._offsetBefore)},t.dateTimeBefore=function(){return this._transition},t.dateTimeAfter=function(){return this._transition.plusSeconds(this.durationSeconds())},t.offsetBefore=function(){return this._offsetBefore},t.offsetAfter=function(){return this._offsetAfter},t.duration=function(){return A.ofSeconds(this.durationSeconds())},t.durationSeconds=function(){return this._offsetAfter.totalSeconds()-this._offsetBefore.totalSeconds()},t.isGap=function(){return this._offsetAfter.totalSeconds()>this._offsetBefore.totalSeconds()},t.isOverlap=function(){return this._offsetAfter.totalSeconds()<this._offsetBefore.totalSeconds()},t.isValidOffset=function(e){return!this.isGap()&&(this._offsetBefore.equals(e)||this._offsetAfter.equals(e))},t.validOffsets=function(){return this.isGap()?[]:[this._offsetBefore,this._offsetAfter]},t.compareTo=function(e){return this.instant().compareTo(e.instant())},t.equals=function(t){if(t===this)return!0;if(t instanceof e){var n=t;return this._transition.equals(n._transition)&&this._offsetBefore.equals(n.offsetBefore())&&this._offsetAfter.equals(n.offsetAfter())}return!1},t.hashCode=function(){return this._transition.hashCode()^this._offsetBefore.hashCode()^this._offsetAfter.hashCode()>>>16},t.toString=function(){return"Transition["+(this.isGap()?"Gap":"Overlap")+" at "+this._transition.toString()+this._offsetBefore.toString()+" to "+this._offsetAfter+"]"},e}(),Et=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.isFixedOffset=function(){return!1},n.offsetOfInstant=function(e){var t=new Date(e.toEpochMilli()).getTimezoneOffset();return Z.ofTotalMinutes(-1*t)},n.offsetOfEpochMilli=function(e){var t=new Date(e).getTimezoneOffset();return Z.ofTotalMinutes(-1*t)},n.offsetOfLocalDateTime=function(e){var t=1e3*e.toEpochSecond(Z.UTC),n=new Date(t).getTimezoneOffset(),r=new Date(t+6e4*n).getTimezoneOffset();return Z.ofTotalMinutes(-1*r)},n.validOffsets=function(e){return[this.offsetOfLocalDateTime(e)]},n.transition=function(){return null},n.standardOffset=function(e){return this.offsetOfInstant(e)},n.daylightSavings=function(){this._throwNotSupported()},n.isDaylightSavings=function(){this._throwNotSupported()},n.isValidOffset=function(e,t){return this.offsetOfLocalDateTime(e).equals(t)},n.nextTransition=function(){this._throwNotSupported()},n.previousTransition=function(){this._throwNotSupported()},n.transitions=function(){this._throwNotSupported()},n.transitionRules=function(){this._throwNotSupported()},n._throwNotSupported=function(){throw new i("not supported operation")},n.equals=function(e){return this===e||e instanceof t},n.toString=function(){return"SYSTEM"},t}(W),wt=function(e){function t(){var t;return(t=e.call(this)||this)._rules=new Et,t}h(t,e);var n=t.prototype;return n.rules=function(){return this._rules},n.equals=function(e){return this===e},n.id=function(){return"SYSTEM"},t}(G),bt=function(){function e(){}return e.systemDefault=function(){return Tt},e.getAvailableZoneIds=function(){return Me.getAvailableZoneIds()},e.of=function(e){if(m(e,"zoneId"),"Z"===e)return Z.UTC;if(1===e.length)throw new i("Invalid zone: "+e);if(z.startsWith(e,"+")||z.startsWith(e,"-"))return Z.of(e);if("UTC"===e||"GMT"===e||"GMT0"===e||"UT"===e)return new Le(e,Z.UTC.rules());if(z.startsWith(e,"UTC+")||z.startsWith(e,"GMT+")||z.startsWith(e,"UTC-")||z.startsWith(e,"GMT-")){var t=Z.of(e.substring(3));return 0===t.totalSeconds()?new Le(e.substring(0,3),t.rules()):new Le(e.substring(0,3)+t.id(),t.rules())}if(z.startsWith(e,"UT+")||z.startsWith(e,"UT-")){var n=Z.of(e.substring(2));return 0===n.totalSeconds()?new Le("UT",n.rules()):new Le("UT"+n.id(),n.rules())}return"SYSTEM"===e?G.systemDefault():Le.ofId(e)},e.ofOffset=function(e,t){if(m(e,"prefix"),m(t,"offset"),0===e.length)return t;if("GMT"===e||"UTC"===e||"UT"===e)return 0===t.totalSeconds()?new Le(e,t.rules()):new Le(e+t.id(),t.rules());throw new c("Invalid prefix, must be GMT, UTC or UT: "+e)},e.from=function(e){m(e,"temporal");var t=e.query(P.zone());if(null==t)throw new i("Unable to obtain ZoneId from TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""));return t},e}(),Tt=null,St=!1;St||(St=!0,O.MIN_VALUE=-999999,O.MAX_VALUE=999999,A.ZERO=new A(0,0),C.NANOS=new C("Nanos",A.ofNanos(1)),C.MICROS=new C("Micros",A.ofNanos(1e3)),C.MILLIS=new C("Millis",A.ofNanos(1e6)),C.SECONDS=new C("Seconds",A.ofSeconds(1)),C.MINUTES=new C("Minutes",A.ofSeconds(60)),C.HOURS=new C("Hours",A.ofSeconds(3600)),C.HALF_DAYS=new C("HalfDays",A.ofSeconds(43200)),C.DAYS=new C("Days",A.ofSeconds(86400)),C.WEEKS=new C("Weeks",A.ofSeconds(604800)),C.MONTHS=new C("Months",A.ofSeconds(2629746)),C.YEARS=new C("Years",A.ofSeconds(31556952)),C.DECADES=new C("Decades",A.ofSeconds(315569520)),C.CENTURIES=new C("Centuries",A.ofSeconds(3155695200)),C.MILLENNIA=new C("Millennia",A.ofSeconds(31556952e3)),C.ERAS=new C("Eras",A.ofSeconds(31556952*(O.MAX_VALUE+1))),C.FOREVER=new C("Forever",A.ofSeconds(w.MAX_SAFE_INTEGER,999999999)),N.NANO_OF_SECOND=new N("NanoOfSecond",C.NANOS,C.SECONDS,R.of(0,999999999)),N.NANO_OF_DAY=new N("NanoOfDay",C.NANOS,C.DAYS,R.of(0,86399999999999)),N.MICRO_OF_SECOND=new N("MicroOfSecond",C.MICROS,C.SECONDS,R.of(0,999999)),N.MICRO_OF_DAY=new N("MicroOfDay",C.MICROS,C.DAYS,R.of(0,86399999999)),N.MILLI_OF_SECOND=new N("MilliOfSecond",C.MILLIS,C.SECONDS,R.of(0,999)),N.MILLI_OF_DAY=new N("MilliOfDay",C.MILLIS,C.DAYS,R.of(0,86399999)),N.SECOND_OF_MINUTE=new N("SecondOfMinute",C.SECONDS,C.MINUTES,R.of(0,59)),N.SECOND_OF_DAY=new N("SecondOfDay",C.SECONDS,C.DAYS,R.of(0,86399)),N.MINUTE_OF_HOUR=new N("MinuteOfHour",C.MINUTES,C.HOURS,R.of(0,59)),N.MINUTE_OF_DAY=new N("MinuteOfDay",C.MINUTES,C.DAYS,R.of(0,1439)),N.HOUR_OF_AMPM=new N("HourOfAmPm",C.HOURS,C.HALF_DAYS,R.of(0,11)),N.CLOCK_HOUR_OF_AMPM=new N("ClockHourOfAmPm",C.HOURS,C.HALF_DAYS,R.of(1,12)),N.HOUR_OF_DAY=new N("HourOfDay",C.HOURS,C.DAYS,R.of(0,23)),N.CLOCK_HOUR_OF_DAY=new N("ClockHourOfDay",C.HOURS,C.DAYS,R.of(1,24)),N.AMPM_OF_DAY=new N("AmPmOfDay",C.HALF_DAYS,C.DAYS,R.of(0,1)),N.DAY_OF_WEEK=new N("DayOfWeek",C.DAYS,C.WEEKS,R.of(1,7)),N.ALIGNED_DAY_OF_WEEK_IN_MONTH=new N("AlignedDayOfWeekInMonth",C.DAYS,C.WEEKS,R.of(1,7)),N.ALIGNED_DAY_OF_WEEK_IN_YEAR=new N("AlignedDayOfWeekInYear",C.DAYS,C.WEEKS,R.of(1,7)),N.DAY_OF_MONTH=new N("DayOfMonth",C.DAYS,C.MONTHS,R.of(1,28,31),"day"),N.DAY_OF_YEAR=new N("DayOfYear",C.DAYS,C.YEARS,R.of(1,365,366)),N.EPOCH_DAY=new N("EpochDay",C.DAYS,C.FOREVER,R.of(-365961662,364522971)),N.ALIGNED_WEEK_OF_MONTH=new N("AlignedWeekOfMonth",C.WEEKS,C.MONTHS,R.of(1,4,5)),N.ALIGNED_WEEK_OF_YEAR=new N("AlignedWeekOfYear",C.WEEKS,C.YEARS,R.of(1,53)),N.MONTH_OF_YEAR=new N("MonthOfYear",C.MONTHS,C.YEARS,R.of(1,12),"month"),N.PROLEPTIC_MONTH=new N("ProlepticMonth",C.MONTHS,C.FOREVER,R.of(12*O.MIN_VALUE,12*O.MAX_VALUE+11)),N.YEAR_OF_ERA=new N("YearOfEra",C.YEARS,C.FOREVER,R.of(1,O.MAX_VALUE,O.MAX_VALUE+1)),N.YEAR=new N("Year",C.YEARS,C.FOREVER,R.of(O.MIN_VALUE,O.MAX_VALUE),"year"),N.ERA=new N("Era",C.ERAS,C.FOREVER,R.of(0,1)),N.INSTANT_SECONDS=new N("InstantSeconds",C.SECONDS,C.FOREVER,R.of(E,v)),N.OFFSET_SECONDS=new N("OffsetSeconds",C.SECONDS,C.FOREVER,R.of(-64800,64800)),function(){dt.HOURS=[];for(var e=0;e<24;e++)dt.of(e,0,0,0);dt.MIN=dt.HOURS[0],dt.MAX=new dt(23,59,59,999999999),dt.MIDNIGHT=dt.HOURS[0],dt.NOON=dt.HOURS[12],dt.FROM=M("LocalTime.FROM",(function(e){return dt.from(e)}))}(),he=new se,de=new ae,fe=new ce,pe=new ue,me=new le("WeekBasedYears",A.ofSeconds(31556952)),ge=new le("QuarterYears",A.ofSeconds(7889238)),re.DAY_OF_QUARTER=he,re.QUARTER_OF_YEAR=de,re.WEEK_OF_WEEK_BASED_YEAR=fe,re.WEEK_BASED_YEAR=pe,re.WEEK_BASED_YEARS=me,re.QUARTER_YEARS=ge,ut.prototype.isoWeekOfWeekyear=function(){return this.get(re.WEEK_OF_WEEK_BASED_YEAR)},ut.prototype.isoWeekyear=function(){return this.get(re.WEEK_BASED_YEAR)},P.ZONE_ID=M("ZONE_ID",(function(e){return e.query(P.ZONE_ID)})),P.CHRONO=M("CHRONO",(function(e){return e.query(P.CHRONO)})),P.PRECISION=M("PRECISION",(function(e){return e.query(P.PRECISION)})),P.OFFSET=M("OFFSET",(function(e){return e.isSupported(N.OFFSET_SECONDS)?Z.ofTotalSeconds(e.get(N.OFFSET_SECONDS)):null})),P.ZONE=M("ZONE",(function(e){var t=e.query(P.ZONE_ID);return null!=t?t:e.query(P.OFFSET)})),P.LOCAL_DATE=M("LOCAL_DATE",(function(e){return e.isSupported(N.EPOCH_DAY)?ut.ofEpochDay(e.getLong(N.EPOCH_DAY)):null})),P.LOCAL_TIME=M("LOCAL_TIME",(function(e){return e.isSupported(N.NANO_OF_DAY)?dt.ofNanoOfDay(e.getLong(N.NANO_OF_DAY)):null})),U.MONDAY=new U(0,"MONDAY"),U.TUESDAY=new U(1,"TUESDAY"),U.WEDNESDAY=new U(2,"WEDNESDAY"),U.THURSDAY=new U(3,"THURSDAY"),U.FRIDAY=new U(4,"FRIDAY"),U.SATURDAY=new U(5,"SATURDAY"),U.SUNDAY=new U(6,"SUNDAY"),U.FROM=M("DayOfWeek.FROM",(function(e){return U.from(e)})),L=[U.MONDAY,U.TUESDAY,U.WEDNESDAY,U.THURSDAY,U.FRIDAY,U.SATURDAY,U.SUNDAY],pt.MIN_SECONDS=-31619119219200,pt.MAX_SECONDS=31494816403199,pt.EPOCH=new pt(0,0),pt.MIN=pt.ofEpochSecond(pt.MIN_SECONDS,0),pt.MAX=pt.ofEpochSecond(pt.MAX_SECONDS,999999999),pt.FROM=M("Instant.FROM",(function(e){return pt.from(e)})),ut.MIN=ut.of(O.MIN_VALUE,1,1),ut.MAX=ut.of(O.MAX_VALUE,12,31),ut.EPOCH_0=ut.ofEpochDay(0),ut.FROM=M("LocalDate.FROM",(function(e){return ut.from(e)})),ht.MIN=ht.of(ut.MIN,dt.MIN),ht.MAX=ht.of(ut.MAX,dt.MAX),ht.FROM=M("LocalDateTime.FROM",(function(e){return ht.from(e)})),Qe.MIN_VALUE=O.MIN_VALUE,Qe.MAX_VALUE=O.MAX_VALUE,De=(new je).appendValue(N.YEAR,4,10,_e.EXCEEDS_PAD).toFormatter(),Qe.FROM=M("Year.FROM",(function(e){return Qe.from(e)})),F.JANUARY=new F(1,"JANUARY"),F.FEBRUARY=new F(2,"FEBRUARY"),F.MARCH=new F(3,"MARCH"),F.APRIL=new F(4,"APRIL"),F.MAY=new F(5,"MAY"),F.JUNE=new F(6,"JUNE"),F.JULY=new F(7,"JULY"),F.AUGUST=new F(8,"AUGUST"),F.SEPTEMBER=new F(9,"SEPTEMBER"),F.OCTOBER=new F(10,"OCTOBER"),F.NOVEMBER=new F(11,"NOVEMBER"),F.DECEMBER=new F(12,"DECEMBER"),x=[F.JANUARY,F.FEBRUARY,F.MARCH,F.APRIL,F.MAY,F.JUNE,F.JULY,F.AUGUST,F.SEPTEMBER,F.OCTOBER,F.NOVEMBER,F.DECEMBER],Pe=(new je).appendValue(N.YEAR,4,10,_e.EXCEEDS_PAD).appendLiteral("-").appendValue(N.MONTH_OF_YEAR,2).toFormatter(),Ke.FROM=M("YearMonth.FROM",(function(e){return Ke.from(e)})),Ne=(new je).appendLiteral("--").appendValue(N.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(N.DAY_OF_MONTH,2).toFormatter(),We.FROM=M("MonthDay.FROM",(function(e){return We.from(e)})),q.ofDays(0),Z.MAX_SECONDS=18*dt.SECONDS_PER_HOUR,Z.UTC=Z.ofTotalSeconds(0),Z.MIN=Z.ofTotalSeconds(-Z.MAX_SECONDS),Z.MAX=Z.ofTotalSeconds(Z.MAX_SECONDS),ot.FROM=M("ZonedDateTime.FROM",(function(e){return ot.from(e)})),Tt=new wt,G.systemDefault=bt.systemDefault,G.getAvailableZoneIds=bt.getAvailableZoneIds,G.of=bt.of,G.ofOffset=bt.ofOffset,G.from=bt.from,Z.from=bt.from,G.SYSTEM=Tt,G.UTC=Z.ofTotalSeconds(0),nt.INSTANCE=new nt("IsoChronology"),Ge.ISO_LOCAL_DATE=(new je).appendValue(N.YEAR,4,10,_e.EXCEEDS_PAD).appendLiteral("-").appendValue(N.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(N.DAY_OF_MONTH,2).toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_LOCAL_TIME=(new je).appendValue(N.HOUR_OF_DAY,2).appendLiteral(":").appendValue(N.MINUTE_OF_HOUR,2).optionalStart().appendLiteral(":").appendValue(N.SECOND_OF_MINUTE,2).optionalStart().appendFraction(N.NANO_OF_SECOND,0,9,!0).toFormatter(Y.STRICT),Ge.ISO_LOCAL_DATE_TIME=(new je).parseCaseInsensitive().append(Ge.ISO_LOCAL_DATE).appendLiteral("T").append(Ge.ISO_LOCAL_TIME).toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_INSTANT=(new je).parseCaseInsensitive().appendInstant().toFormatter(Y.STRICT),Ge.ISO_OFFSET_DATE_TIME=(new je).parseCaseInsensitive().append(Ge.ISO_LOCAL_DATE_TIME).appendOffsetId().toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_ZONED_DATE_TIME=(new je).append(Ge.ISO_OFFSET_DATE_TIME).optionalStart().appendLiteral("[").parseCaseSensitive().appendZoneId().appendLiteral("]").toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.BASIC_ISO_DATE=(new je).appendValue(N.YEAR,4,10,_e.EXCEEDS_PAD).appendValue(N.MONTH_OF_YEAR,2).appendValue(N.DAY_OF_MONTH,2).toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_OFFSET_DATE=(new je).parseCaseInsensitive().append(Ge.ISO_LOCAL_DATE).appendOffsetId().toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_OFFSET_TIME=(new je).parseCaseInsensitive().append(Ge.ISO_LOCAL_TIME).appendOffsetId().toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_ORDINAL_DATE=(new je).appendValue(N.YEAR,4,10,_e.EXCEEDS_PAD).appendLiteral("-").appendValue(N.DAY_OF_YEAR).toFormatter(Y.STRICT),Ge.ISO_WEEK_DATE=(new je).appendValue(N.YEAR,4,10,_e.EXCEEDS_PAD).appendLiteral("-W").appendValue(N.ALIGNED_WEEK_OF_YEAR).appendLiteral("-").appendValue(N.DAY_OF_WEEK).toFormatter(Y.STRICT),Ge.ISO_DATE=(new je).parseCaseInsensitive().append(Ge.ISO_LOCAL_DATE).optionalStart().appendOffsetId().optionalEnd().toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.ISO_TIME=(new je).parseCaseInsensitive().append(Ge.ISO_LOCAL_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(Y.STRICT),Ge.ISO_DATE_TIME=(new je).append(Ge.ISO_LOCAL_DATE_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(Y.STRICT).withChronology(nt.INSTANCE),Ge.PARSED_EXCESS_DAYS=M("PARSED_EXCESS_DAYS",(function(e){return e instanceof J?e.excessDays:q.ZERO})),Ge.PARSED_LEAP_SECOND=M("PARSED_LEAP_SECOND",(function(e){return e instanceof J&&e.leapSecond})),Ae.BASE_DATE=ut.of(2e3,1,1),je.CompositePrinterParser=we,je.PadPrinterParserDecorator=Ie,je.SettingsParser=Re,je.CharLiteralPrinterParser=ke,je.StringLiteralPrinterParser=ke,je.CharLiteralPrinterParser=Ee,je.NumberPrinterParser=Se,je.ReducedPrinterParser=Ae,je.FractionPrinterParser=be,je.OffsetIdPrinterParser=Ce,je.ZoneIdPrinterParser=xe,st.MIN=ht.MIN.atOffset(Z.MAX),st.MAX=ht.MAX.atOffset(Z.MIN),st.FROM=M("OffsetDateTime.FROM",(function(e){return st.from(e)})),rt.MIN=rt.ofNumbers(0,0,0,0,Z.MAX),rt.MAX=rt.ofNumbers(23,59,59,999999999,Z.MIN),rt.FROM=M("OffsetTime.FROM",(function(e){return rt.from(e)})));var At=function(){function e(e,t){var n;if(e instanceof pt)this.instant=e;else{if(e instanceof ut)t=null==t?G.systemDefault():t,n=e.atStartOfDay(t);else if(e instanceof ht)t=null==t?G.systemDefault():t,n=e.atZone(t);else{if(!(e instanceof ot))throw new c("unsupported instance for convert operation:"+e);n=null==t?e:e.withZoneSameInstant(t)}this.instant=n.toInstant()}}var t=e.prototype;return t.toDate=function(){return new Date(this.instant.toEpochMilli())},t.toEpochMilli=function(){return this.instant.toEpochMilli()},e}();function Ot(e,t){return new At(e,t)}function Ct(e,t){if(void 0===t&&(t=G.systemDefault()),m(e,"date"),m(t,"zone"),e instanceof Date)return pt.ofEpochMilli(e.getTime()).atZone(t);if("function"==typeof e.toDate&&e.toDate()instanceof Date)return pt.ofEpochMilli(e.toDate().getTime()).atZone(t);throw new c("date must be a javascript Date or a moment instance")}var It,Rt,Nt={assert:_,DateTimeBuilder:J,DateTimeParseContext:ee,DateTimePrintContext:ne,MathUtil:w,StringUtil:z,StringBuilder:ze},Pt={_:Nt,convert:Ot,nativeJs:Ct,ArithmeticException:a,DateTimeException:i,DateTimeParseException:o,IllegalArgumentException:c,IllegalStateException:u,UnsupportedTemporalTypeException:s,NullPointerException:l,Clock:mt,DayOfWeek:U,Duration:A,Instant:pt,LocalDate:ut,LocalTime:dt,LocalDateTime:ht,OffsetTime:rt,OffsetDateTime:st,Month:F,MonthDay:We,ParsePosition:j,Period:q,Year:Qe,YearConstants:O,YearMonth:Ke,ZonedDateTime:ot,ZoneOffset:Z,ZoneId:G,ZoneRegion:Le,ZoneOffsetTransition:vt,ZoneRules:W,ZoneRulesProvider:Me,ChronoLocalDate:$,ChronoLocalDateTime:lt,ChronoZonedDateTime:it,IsoChronology:nt,ChronoField:N,ChronoUnit:C,IsoFields:re,Temporal:V,TemporalAccessor:D,TemporalAdjuster:Xe,TemporalAdjusters:Ze,TemporalAmount:T,TemporalField:I,TemporalQueries:P,TemporalQuery:k,TemporalUnit:S,ValueRange:R,DateTimeFormatter:Ge,DateTimeFormatterBuilder:je,DecimalStyle:ye,ResolverStyle:Y,SignStyle:_e,TextStyle:ve},Dt=(It=Pt,Rt=[],function(e){return~Rt.indexOf(e)||(e(It),Rt.push(e)),It});Pt.use=Dt},6544:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildConnectionString=void 0,t.buildConnectionString=function(e){return Object.entries(e).map((([e,t])=>function(e,t){if(null==t)return[e,""];if("boolean"==typeof t)return[e,t?"Yes":"No"];{const i=t.toString();return!function(e){if("{"!==e[0])return!1;for(let t=1;t<e.length;t++)if("}"===e[t]){if(t+1===e.length)return!0;if("}"!==e[t+1])return!1;t++}return!1}(n=i)&&(null===(r=n.match(/\[|]|{|}|\|\(|\)|,|;|\?|\*|=|!|@/))||void 0===r?void 0:r.length)?[e,`{${i.replace(/}/g,"}}")}}`]:[e,i]}var n,r}(e.trim(),t).join("="))).join(";")}},6762:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSqlConnectionString=t.parseConnectionString=void 0;const s=o(n(1674));t.parseConnectionString=s.default;const a=o(n(8861));t.parseSqlConnectionString=a.default,i(n(6544),t)},1674:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.key=0]="key",e[e.value=1]="value"}(n||(n={}));const r=Object.freeze({key:{terminator:"=",quotes:{}},value:{terminator:";",quotes:{'"':'"',"'":"'","{":"}"}}});t.default=function(e,t=r){const i={};let o=n.key,s=!1,a=!1,c=!1,u="",l="",h="",d=0;function f(){return o===n.key?t.key:t.value}function p(e){return f().terminator===e}function m(e){return Object.keys(f().quotes).some((t=>e===t))}function g(e){l+=e}function y(){switch(c||(l=l.trim()),o){case n.key:h=l.toLowerCase(),o=n.value;break;case n.value:o=n.key,i[h]=l,h=""}s=!1,a=!1,c=!1,u="",l=""}for(;d<e.length;){const t=e.charAt(d);if(a){if(p(t))y();else if(t.trim())throw new Error("Malformed connection string")}else s?c&&(c&&t===f().quotes[u])?t===e.charAt(d+1)?(g(t),d++):a=!0:!c&&p(t)?t===e.charAt(d+1)?(g(t),d++):y():g(t):t.trim()&&(s=!0,m(t)?(c=!0,u=t):g(t));d++}if(c&&!a)throw new Error("Connection string terminated unexpectedly");return y(),i}},8861:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SchemaTypes=void 0;const i=r(n(1674));var o;function s(e){if(""===e.trim())return o.STRING;const t=parseInt(e,10);return Number.isNaN(t)||t.toString()!==e?["true","false","yes","no"].includes(e.toLowerCase())?o.BOOL:o.STRING:o.NUMBER}function a(e,t,n){if(n){const t=n(e);if(null!==t)return t}switch(t){case o.BOOL:return!!["true","yes","1"].includes(e.toLowerCase())||!["false","no","0"].includes(e.toLowerCase())&&e;case o.NUMBER:return parseInt(e,10)}return e}!function(e){e[e.BOOL=0]="BOOL",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(o=t.SchemaTypes||(t.SchemaTypes={})),t.SCHEMA={"Application Name":{type:o.STRING,aliases:["App"],validator:e=>"string"==typeof e&&e.length<=128},ApplicationIntent:{type:o.STRING,allowedValues:["ReadOnly","ReadWrite"],default:"ReadWrite"},"Asynchronous Processing":{type:o.BOOL,default:!1,aliases:["Async"]},AttachDBFilename:{type:o.STRING,aliases:["Extended Properties","Initial File Name"]},Authentication:{type:o.STRING,allowedValues:["Active Directory Integrated","Active Directory Password","Sql Password"]},"Column Encryption Setting":{type:o.STRING},"Connection Timeout":{type:o.NUMBER,aliases:["Connect Timeout","Timeout"],default:15},"Connection Lifetime":{type:o.NUMBER,aliases:["Load Balance Timeout"],default:0},ConnectRetryCount:{type:o.NUMBER,default:1,validator:e=>e>0&&e<=255},ConnectRetryInterval:{type:o.NUMBER,default:10},"Context Connection":{type:o.BOOL,default:!1},"Current Language":{aliases:["Language"],type:o.STRING,validator:e=>"string"==typeof e&&e.length<=128},"Data Source":{aliases:["Addr","Address","Server","Network Address"],type:o.STRING},Encrypt:{type:o.BOOL,default:!1},Enlist:{type:o.BOOL,default:!0},"Failover Partner":{type:o.STRING},"Initial Catalog":{type:o.STRING,aliases:["Database"],validator:e=>"string"==typeof e&&e.length<=128},"Integrated Security":{type:o.BOOL,aliases:["Trusted_Connection"],coerce:e=>"sspi"===e||null},"Max Pool Size":{type:o.NUMBER,default:100,validator:e=>e>=1},"Min Pool Size":{type:o.NUMBER,default:0,validator:e=>e>=0},MultipleActiveResultSets:{type:o.BOOL,default:!1},MultiSubnetFailover:{type:o.BOOL,default:!1},"Network Library":{type:o.STRING,aliases:["Network","Net"],allowedValues:["dbnmpntw","dbmsrpcn","dbmsadsn","dbmsgnet","dbmslpcn","dbmsspxn","dbmssocn","Dbmsvinn"]},"Packet Size":{type:o.NUMBER,default:8e3,validator:e=>e>=512&&e<=32768},Password:{type:o.STRING,aliases:["PWD"],validator:e=>"string"==typeof e&&e.length<=128},"Persist Security Info":{type:o.BOOL,aliases:["PersistSecurityInfo"],default:!1},PoolBlockingPeriod:{type:o.NUMBER,default:0,coerce(e){if("string"!=typeof e)return null;switch(e.toLowerCase()){case"alwaysblock":return 1;case"auto":return 0;case"neverblock":return 2}return null}},Pooling:{type:o.BOOL,default:!0},Replication:{type:o.BOOL,default:!1},"Transaction Binding":{type:o.STRING,allowedValues:["Implicit Unbind","Explicit Unbind"],default:"Implicit Unbind"},TransparentNetworkIPResolution:{type:o.BOOL,default:!0},TrustServerCertificate:{type:o.BOOL,default:!1},"Type System Version":{type:o.STRING,allowedValues:["SQL Server 2012","SQL Server 2008","SQL Server 2005","Latest"]},"User ID":{type:o.STRING,aliases:["UID"],validator:e=>"string"==typeof e&&e.length<=128},"User Instance":{type:o.BOOL,default:!1},"Workstation ID":{type:o.STRING,aliases:["WSID"],validator:e=>"string"==typeof e&&e.length<=128}},t.default=function(e,n=!1,r=!1,o=!1,c=t.SCHEMA){const u=Object.entries(c).reduce(((e,[t,n])=>{var r;return Object.assign(e,{[t.toLowerCase()]:n}),(null===(r=n.aliases)||void 0===r?void 0:r.reduce(((e,r)=>Object.assign(e,{[r.toLowerCase()]:{...n,canonical:t.toLowerCase()}})),e))||e}),{});return Object.entries((0,i.default)(e)).reduce(((e,[t,r])=>{if(!Object.prototype.hasOwnProperty.call(u,t))return Object.assign(e,{[t]:a(r,s(r))});let i=a(r,u[t].type,u[t].coerce);o&&!function(e,t,n){let r=!0;return n&&(r=n(e)),r&&(r=(null==t?void 0:t.includes(e))||!1),r}(i,u[t].allowedValues,u[t].validator)&&(i=u[t].default);const c=n&&u[t].canonical||t;return Object.assign(e,{[c]:i})}),{})}},3701:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.req=t.json=t.toBuffer=void 0;const s=o(n(3685)),a=o(n(5687));async function c(e){let t=0;const n=[];for await(const r of e)t+=r.length,n.push(r);return Buffer.concat(n,t)}t.toBuffer=c,t.json=async function(e){const t=(await c(e)).toString("utf8");try{return JSON.parse(t)}catch(e){const n=e;throw n.message+=` (input: ${t})`,n}},t.req=function(e,t={}){const n=(("string"==typeof e?e:e.href).startsWith("https:")?a:s).request(e,t),r=new Promise(((e,t)=>{n.once("response",e).once("error",t).end()}));return n.then=r.then.bind(r),n}},8333:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Agent=void 0;const a=o(n(1808)),c=o(n(3685)),u=n(5687);s(n(3701),t);const l=Symbol("AgentBaseInternalState");class h extends c.Agent{constructor(e){super(e),this[l]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}const{stack:t}=new Error;return"string"==typeof t&&t.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);const t=new a.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||null===t)return;const n=this.sockets[e],r=n.indexOf(t);-1!==r&&(n.splice(r,1),this.totalSocketCount--,0===n.length&&delete this.sockets[e])}getName(e){return("boolean"==typeof e.secureEndpoint?e.secureEndpoint:this.isSecureEndpoint(e))?u.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,n){const r={...t,secureEndpoint:this.isSecureEndpoint(t)},i=this.getName(r),o=this.incrementSockets(i);Promise.resolve().then((()=>this.connect(e,r))).then((s=>{if(this.decrementSockets(i,o),s instanceof c.Agent)return s.addRequest(e,r);this[l].currentSocket=s,super.createSocket(e,t,n)}),(e=>{this.decrementSockets(i,o),n(e)}))}createConnection(){const e=this[l].currentSocket;if(this[l].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[l].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[l]&&(this[l].defaultPort=e)}get protocol(){return this[l].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[l]&&(this[l].protocol=e)}}t.Agent=h},2609:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2225),o=n(4458);t.AuthorizerFactory=class{static getAuthorizer(){return r(this,void 0,void 0,(function*(){i.debug("try-get AzureCLIAuthorizer");try{return yield o.AzureCLIAuthorizer.getAuthorizer()}catch(e){throw i.debug(e),new Error("No credentails found. Add an Azure login script before this action.")}}))}}},4458:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2225),o=n(27),s=n(484);class a{constructor(){this._token="",this._subscriptionId="",this._cloudSuffixes={},this._cloudEndpoints={}}static getAuthorizer(){return r(this,void 0,void 0,(function*(){return this._authorizer||(this._authorizer=new a,yield this._authorizer._initialize()),this._authorizer}))}get subscriptionID(){return this._subscriptionId}get baseUrl(){return this._cloudEndpoints.resourceManager||"https://management.azure.com/"}getCloudSuffixUrl(e){return this._cloudSuffixes[e]}getCloudEndpointUrl(e){return this._cloudEndpoints[e]}getToken(e,t){return r(this,void 0,void 0,(function*(){if(!this._token||e)try{let e=JSON.parse(yield a.executeAzCliCommand("account get-access-token",t||[]));i.setSecret(e),this._token=e.accessToken}catch(e){throw console.log("Failed to fetch Azure access token"),e}return this._token}))}static executeAzCliCommand(e,t){return r(this,void 0,void 0,(function*(){let n=yield a._getAzCliPath(),r="",s="";try{i.debug(`"${n}" ${e}`),yield o.exec(`"${n}" ${e}`,t,{silent:!0,listeners:{stdout:e=>{r+=e.toString()},stderr:e=>{s+=e.toString()}}})}catch(e){throw new Error(s)}return r}))}static _getAzCliPath(){return r(this,void 0,void 0,(function*(){return this._azCliPath||(this._azCliPath=yield s.which("az",!0)),this._azCliPath}))}_initialize(){return r(this,void 0,void 0,(function*(){let e=JSON.parse(yield a.executeAzCliCommand("account show")),t=JSON.parse(yield a.executeAzCliCommand("cloud show"));this._subscriptionId=e.id,this._cloudSuffixes=t.suffixes,this._cloudEndpoints=t.endpoints}))}}t.AzureCLIAuthorizer=a},804:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2225),o=n(5937);class s{constructor(e,t,n,r){this.error=e,this.result=t,this.request=n,this.response=r}}t.ApiResult=s;class a{}function c(e){let t=new a;return t.statusCode=e.statusCode,t.message=e.body,e.body&&e.body.error&&(t.code=e.body.error.code,t.message=e.body.error.message,t.details=e.body.error.details,i.error(t.message)),t}t.AzureError=a,t.ToError=c,t.ServiceClient=class{constructor(e,t){this._webClient=new o.WebClient,this._authorizer=e,this.subscriptionId=this._authorizer.subscriptionID,this.baseUrl=this._authorizer.baseUrl,this.longRunningOperationRetryTimeout=t||0}getRequestUri(e,t,n,r){return this.getRequestUriForbaseUrl(this.baseUrl,e,t,n,r)}getRequestUriForbaseUrl(e,t,n,r,i){let o=e+t;o=o.replace("{subscriptionId}",encodeURIComponent(this.subscriptionId));for(let e in n)o=o.replace(e,encodeURIComponent(n[e]));return o=o.replace(/([^:]\/)\/+/gi,"$1"),r=r||[],i&&r.push("api-version="+encodeURIComponent(i)),r.length>0&&(o+="?"+r.join("&")),o}beginRequest(e,t){return r(this,void 0,void 0,(function*(){let n=yield this._authorizer.getToken(!1,t);e.headers=e.headers||{},e.headers.Authorization=`Bearer ${n}`,e.headers["Content-Type"]="application/json; charset=utf-8";let r=null;try{r=yield this._webClient.sendRequest(e),401===r.statusCode&&r.body&&r.body.error&&"ExpiredAuthenticationToken"===r.body.error.code&&(n=yield this._authorizer.getToken(!0,t),e.headers.Authorization=`Bearer ${n}`,r=yield this._webClient.sendRequest(e))}catch(e){let t=e.toString();if(-1!=t.indexOf("Hostname/IP doesn't match certificates's altnames")||-1!=t.indexOf("unable to verify the first certificate")||-1!=t.indexOf("unable to get local issuer certificate"))throw i.warning("You're probably using a self-signed certificate in the SSL certificate validation chain. To resolve them you need to export a variable named ACTIONS_AZURE_REST_IGNORE_SSL_ERRORS to the value true."),e}return r}))}accumulateResultFromPagedResult(e){return r(this,void 0,void 0,(function*(){let t=[];for(;e;){let n={method:"GET",uri:e},r=yield this.beginRequest(n);if(200!=r.statusCode||!r.body)return new s(c(r));r.body.value&&(t=t.concat(r.body.value)),e=r.body.nextLink}return new s(null,t)}))}}},9490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7723);class i{constructor(){i._options={};let e=`${process.env.ACTIONS_AZURE_REST_IGNORE_SSL_ERRORS}`;i._options.ignoreSslError=!!e&&"true"===e.toLowerCase(),i._instance=new r.HttpClient(`${process.env.AZURE_HTTP_USER_AGENT}`,void 0,i._options)}static GetInstance(){return void 0===i._instance&&new i,i._instance}static SetOptions(e){i._options=e}}t.RequestClient=i},5937:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2225),o=n(7147),s=n(9490),a=["ETIMEDOUT","ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EA_AGAIN"],c=[408,409,500,502,503,504];t.WebClient=class{constructor(){this._httpClient=s.RequestClient.GetInstance()}sendRequest(e,t){return r(this,void 0,void 0,(function*(){let n=0,r=t&&t.retryCount?t.retryCount:5,s=t&&t.retryIntervalInSeconds?t.retryIntervalInSeconds:2,u=t&&t.retriableErrorCodes?t.retriableErrorCodes:a,l=t&&t.retriableStatusCodes?t.retriableStatusCodes:c,h=s;for(;;)try{e.body&&"string"!=typeof e.body&&!e.body.readable&&(e.body=o.createReadStream(e.body.path));let t=yield this._sendRequestInternal(e);if(-1!=l.indexOf(t.statusCode)&&++n<r){i.debug(`Encountered a retriable status code: ${t.statusCode}. Message: '${t.statusMessage}'.`),yield this._sleep(h),h=h*s+s;continue}return t}catch(e){if(!(-1!=u.indexOf(e.code)&&++n<r))throw e.code&&i.error(e.code),e;i.debug(`Encountered a retriable error:${e.code}. Message: ${e.message}.`),yield this._sleep(h),h=h*s+s}}))}_sendRequestInternal(e){return r(this,void 0,void 0,(function*(){i.debug(`[${e.method}] ${e.uri}`);let t=yield this._httpClient.request(e.method,e.uri,e.body||"",e.headers);if(!t)throw new Error(`Unexpected end of request. Http request: [${e.method}] ${e.uri} returned a null Http response.`);return yield this._toWebResponse(t)}))}_toWebResponse(e){return r(this,void 0,void 0,(function*(){let t,n=yield e.readBody();if(n)try{t=JSON.parse(n)}catch(e){i.error(`Could not parse response body: ${n}.`),i.error(JSON.stringify(e))}return{statusCode:e.message.statusCode,statusMessage:e.message.statusMessage,headers:e.message.headers,body:t||n}}))}_sleep(e){return new Promise((t=>{setTimeout(t,1e3*e)}))}}},5623:e=>{"use strict";function t(e,t,i){e instanceof RegExp&&(e=n(e,i)),t instanceof RegExp&&(t=n(t,i));var o=r(e,t,i);return o&&{start:o[0],end:o[1],pre:i.slice(0,o[0]),body:i.slice(o[0]+e.length,o[1]),post:i.slice(o[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function r(e,t,n){var r,i,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),l=c;if(c>=0&&u>0){if(e===t)return[c,u];for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(e,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(t,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}e.exports=t,t.range=r},9668:(e,t,n)=>{"use strict";const{Buffer:r}=n(4300),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){const r=t+this._bufs[n].length;if(e<r||n===this._bufs.length-1)return[n,e-t];t=r}},o.prototype._reverseOffset=function(e){const t=e[0];let n=e[1];for(let e=0;e<t;e++)n+=this._bufs[e].length;return n},o.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||r.alloc(0);if(i<=0)return e||r.alloc(0);const o=!!e,s=this._offset(n),a=i-n;let c=a,u=o&&t||0,l=s[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,u),u+=this._bufs[t].length;return e}if(c<=this._bufs[s[0]].length-l)return o?this._bufs[s[0]].copy(e,t,l,l+c):this._bufs[s[0]].slice(l,l+c);o||(e=r.allocUnsafe(a));for(let t=s[0];t<this._bufs.length;t++){const n=this._bufs[t].length-l;if(!(c>n)){this._bufs[t].copy(e,u,l,l+c),u+=n;break}this._bufs[t].copy(e,u,l),u+=n,c-=n,l&&(l=0)}return e.length>u?e.slice(0,u):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const n=this._offset(e),r=this._offset(t),i=this._bufs.slice(n[0],r[0]+1);return 0===r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!==n[1]&&(i[0]=i[0].slice(n[1])),this._new(i)},o.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(r.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,n){if(void 0===n&&"string"==typeof t&&(n=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;s<t.length;)if(t.length-s>=e.length){const n=t.indexOf(e,s);if(-1!==n)return this._reverseOffset([o,n]);s=t.length-e.length+1}else{const t=this._reverseOffset([o,s]);if(this._match(t,e))return t;s++}s=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n=0){return this.slice(n,n+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},e.exports=o},22:(e,t,n)=>{"use strict";const r=n(1451).Duplex,i=n(4378),o=n(9668);function s(e){if(!(this instanceof s))return new s(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),r.call(this)}i(s,r),Object.assign(s.prototype,o.prototype),s.prototype._new=function(e){return new s(e)},s.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype._isBufferList=function(e){return e instanceof s||e instanceof o||s.isBufferList(e)},s.isBufferList=o.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=o},8500:(e,t,n)=>{"use strict";var r=n(4300).Buffer,i=n(4300).SlowBuffer;function o(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var n=0,i=0;i<e.length;i++)n|=e[i]^t[i];return 0===n}e.exports=o,o.install=function(){r.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=r.prototype.equal,a=i.prototype.equal;o.restore=function(){r.prototype.equal=s,i.prototype.equal=a}},1924:(e,t,n)=>{"use strict";var r=n(210),i=n(5559),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},5559:(e,t,n)=>{"use strict";var r=n(8612),i=n(210),o=n(7771),s=n(4453),a=i("%Function.prototype.apply%"),c=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||r.call(c,a),l=n(4429),h=i("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new s("a function is required");var t=u(r,c,arguments);return o(t,1+h(0,e.length-(arguments.length-1)),!0)};var d=function(){return u(r,a,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(9550),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(1227):e.exports=n(39)},39:(e,t,n)=>{const r=n(6224),i=n(3837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(2130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(2447)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},2296:(e,t,n)=>{"use strict";var r=n(4429),i=n(3464),o=n(4453),s=n(7296);e.exports=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],h=!!s&&s(e,t);if(r)r(e,t,{configurable:null===u&&h?h.configurable:!u,enumerable:null===a&&h?h.enumerable:!a,value:n,writable:null===c&&h?h.writable:!c});else{if(!l&&(a||c||u))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},1906:e=>{"use strict";e.exports=(e,t,n)=>{const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n();return r(e),e},set(e){r(e)}}),e}},4289:(e,t,n)=>{"use strict";var r=n(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=n(2296),c=n(1044)(),u=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if("function"!=typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;c?a(e,t,n,!0):a(e,t,n)},l=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=s.call(o,Object.getOwnPropertySymbols(t)));for(var a=0;a<o.length;a+=1)u(e,o[a],t[o[a]],n[o[a]])};l.supportsDescriptors=!!c,e.exports=l},5015:(e,t,n)=>{"use strict";var r=n(9509).Buffer,i=n(6972);function o(e){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,n){for(var r=0;t+r<n&&0===e[t+r];)++r;return e[t+r]>=128&&--r,r}e.exports={derToJose:function(e,t){e=o(e);var n=i(t),s=n+1,a=e.length,c=0;if(48!==e[c++])throw new Error('Could not find expected "seq"');var u=e[c++];if(129===u&&(u=e[c++]),a-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(a-c)+'" remaining');if(2!==e[c++])throw new Error('Could not find expected "int" for "r"');var l=e[c++];if(a-c-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(a-c-2)+'" available');if(s<l)throw new Error('"r" specified length of "'+l+'", max of "'+s+'" is acceptable');var h=c;if(c+=l,2!==e[c++])throw new Error('Could not find expected "int" for "s"');var d=e[c++];if(a-c!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(a-c)+'"');if(s<d)throw new Error('"s" specified length of "'+d+'", max of "'+s+'" is acceptable');var f=c;if((c+=d)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain');var p=n-l,m=n-d,g=r.allocUnsafe(p+l+m+d);for(c=0;c<p;++c)g[c]=0;e.copy(g,c,h+Math.max(-p,0),h+l);for(var y=c=n;c<y+m;++c)g[c]=0;return e.copy(g,c,f+Math.max(-m,0),f+d),(g=g.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var n=i(t),a=e.length;if(a!==2*n)throw new TypeError('"'+t+'" signatures must be "'+2*n+'" bytes, saw "'+a+'"');var c=s(e,0,n),u=s(e,n,e.length),l=n-c,h=n-u,d=2+l+1+1+h,f=d<128,p=r.allocUnsafe((f?2:3)+d),m=0;return p[m++]=48,f?p[m++]=d:(p[m++]=129,p[m++]=255&d),p[m++]=2,p[m++]=l,c<0?(p[m++]=0,m+=e.copy(p,m,0,n)):m+=e.copy(p,m,c,n),p[m++]=2,p[m++]=h,u<0?(p[m++]=0,e.copy(p,m,n)):e.copy(p,m,n+u),p}}},6972:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var n={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=n[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},9373:(e,t,n)=>{"use strict";var r=n(3489),i=n(8613),o=n(1221),s=n(1044)(),a=n(9480),c=n(9314),u=n(1648);function l(e,t){var n=new u(t);c(n,h),delete n.constructor;var i=a(o(e,"SYNC"));return r(n,"errors",i),n}s&&Object.defineProperty(l,"prototype",{writable:!1});var h=l.prototype;if(!i(h,"constructor",l)||!i(h,"message","")||!i(h,"name","AggregateError"))throw new u("unable to install AggregateError.prototype properties; please report this!");c(l.prototype,Error.prototype),e.exports=l},6630:(e,t,n)=>{"use strict";var r=n(8612),i=n(4289),o=n(8052),s=n(2296),a=n(9373),c=n(7114),u=n(4534),l=c(),h=o(r.call(l),l.name,!0);s(h,"prototype",l.prototype,!0,!0,!0,!0),i(h,{getPolyfill:c,implementation:a,shim:u}),e.exports=h},7114:(e,t,n)=>{"use strict";var r=n(9373);e.exports=function(){return"function"==typeof AggregateError?AggregateError:r}},4534:(e,t,n)=>{"use strict";var r=n(4289),i=n(2503)(),o=n(7114);e.exports=function(){var e=o();return r(i,{AggregateError:e},{AggregateError:function(){return i.AggregateError!==e}}),e}},4429:(e,t,n)=>{"use strict";var r=n(210)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(e){r=!1}e.exports=r},3981:e=>{"use strict";e.exports=EvalError},1648:e=>{"use strict";e.exports=Error},4726:e=>{"use strict";e.exports=RangeError},6712:e=>{"use strict";e.exports=ReferenceError},3464:e=>{"use strict";e.exports=SyntaxError},4453:e=>{"use strict";e.exports=TypeError},3915:e=>{"use strict";e.exports=URIError},7648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",n=Object.prototype.toString,r=Math.max,i="[object Function]",o=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},s=function(e,t){for(var n=[],r=t||0,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n},a=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n};e.exports=function(e){var c=this;if("function"!=typeof c||n.apply(c)!==i)throw new TypeError(t+c);for(var u,l=s(arguments,1),h=function(){if(this instanceof u){var t=c.apply(this,o(l,arguments));return Object(t)===t?t:this}return c.apply(e,o(l,arguments))},d=r(0,c.length-l.length),f=[],p=0;p<d;p++)f[p]="$"+p;if(u=Function("binder","return function ("+a(f,",")+"){ return binder.apply(this,arguments); }")(h),c.prototype){var m=function(){};m.prototype=c.prototype,u.prototype=new m,m.prototype=null}return u}},8612:(e,t,n)=>{"use strict";var r=n(7648);e.exports=Function.prototype.bind||r},5972:e=>{"use strict";var t=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(e){n=null}t.functionsHaveConfigurableNames=function(){if(!t()||!n)return!1;var e=n((function(){}),"name");return!!e&&!!e.configurable};var r=Function.prototype.bind;t.boundFunctionsHaveNames=function(){return t()&&"function"==typeof r&&""!==function(){}.bind().name},e.exports=t},210:(e,t,n)=>{"use strict";var r,i=n(1648),o=n(3981),s=n(4726),a=n(6712),c=n(3464),u=n(4453),l=n(3915),h=Function,d=function(e){try{return h('"use strict"; return ('+e+").constructor;")()}catch(e){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(e){f=null}var p=function(){throw new u},m=f?function(){try{return p}catch(e){try{return f(arguments,"callee").get}catch(e){return p}}}():p,g=n(1405)(),y=n(8185)(),_=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),v={},E="undefined"!=typeof Uint8Array&&_?_(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&_?_([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&_?_(_([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&_?_((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&_?_((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&_?_(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":c,"%ThrowTypeError%":m,"%TypedArray%":E,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(_)try{null.error}catch(e){var b=_(_(e));w["%Error.prototype%"]=b}var T=function e(t){var n;if("%AsyncFunction%"===t)n=d("async function () {}");else if("%GeneratorFunction%"===t)n=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=d("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&_&&(n=_(i.prototype))}return w[t]=n,n},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=n(8612),O=n(8824),C=A.call(Function.call,Array.prototype.concat),I=A.call(Function.apply,Array.prototype.splice),R=A.call(Function.call,String.prototype.replace),N=A.call(Function.call,String.prototype.slice),P=A.call(Function.call,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,M=function(e){var t=N(e,0,1),n=N(e,-1);if("%"===t&&"%"!==n)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var r=[];return R(e,D,(function(e,t,n,i){r[r.length]=n?R(i,k,"$1"):t||e})),r},L=function(e,t){var n,r=e;if(O(S,r)&&(r="%"+(n=S[r])[0]+"%"),O(w,r)){var i=w[r];if(i===v&&(i=T(r)),void 0===i&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=M(e),r=n.length>0?n[0]:"",i=L("%"+r+"%",t),o=i.name,s=i.value,a=!1,l=i.alias;l&&(r=l[0],I(n,C([0,1],l)));for(var h=1,d=!0;h<n.length;h+=1){var p=n[h],m=N(p,0,1),g=N(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==p&&d||(a=!0),O(w,o="%"+(r+="."+p)+"%"))s=w[o];else if(null!=s){if(!(p in s)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(f&&h+1>=n.length){var y=f(s,p);s=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[p]}else d=O(s,p),s=s[p];d&&!a&&(w[o]=s)}}return s}},5146:(e,t,n)=>{var r=n(5623);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),g(function(e){return e.split("\\\\").join(i).split("\\{").join(o).split("\\}").join(s).split("\\,").join(a).split("\\.").join(c)}(e),!0).map(l)):[]};var i="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",s="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function l(e){return e.split(i).join("\\").split(o).join("{").split(s).join("}").split(a).join(",").split(c).join(".")}function h(e){if(!e)return[""];var t=[],n=r("{","}",e);if(!n)return e.split(",");var i=n.pre,o=n.body,s=n.post,a=i.split(",");a[a.length-1]+="{"+o+"}";var c=h(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function d(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function p(e,t){return e<=t}function m(e,t){return e>=t}function g(e,t){var n=[],i=r("{","}",e);if(!i)return[e];var o=i.pre,a=i.post.length?g(i.post,!1):[""];if(/\$$/.test(i.pre))for(var c=0;c<a.length;c++){var l=o+"{"+i.body+"}"+a[c];n.push(l)}else{var y,_,v=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),E=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),w=v||E,b=i.body.indexOf(",")>=0;if(!w&&!b)return i.post.match(/,.*\}/)?g(e=i.pre+"{"+i.body+s+i.post):[e];if(w)y=i.body.split(/\.\./);else if(1===(y=h(i.body)).length&&1===(y=g(y[0],!1).map(d)).length)return a.map((function(e){return i.pre+y[0]+e}));if(w){var T=u(y[0]),S=u(y[1]),A=Math.max(y[0].length,y[1].length),O=3==y.length?Math.abs(u(y[2])):1,C=p;S<T&&(O*=-1,C=m);var I=y.some(f);_=[];for(var R=T;C(R,S);R+=O){var N;if(E)"\\"===(N=String.fromCharCode(R))&&(N="");else if(N=String(R),I){var P=A-N.length;if(P>0){var D=new Array(P+1).join("0");N=R<0?"-"+D+N.slice(1):D+N}}_.push(N)}}else{_=[];for(var k=0;k<y.length;k++)_.push.apply(_,g(y[k],!1))}for(k=0;k<_.length;k++)for(c=0;c<a.length;c++)l=o+_[k]+a[c],(!t||w||l)&&n.push(l)}return n}},6553:e=>{"use strict";e.exports=global},2503:(e,t,n)=>{"use strict";var r=n(4289),i=n(6553),o=n(2168),s=n(9471),a=o(),c=function(){return a};r(c,{getPolyfill:o,implementation:i,shim:s}),e.exports=c},2168:(e,t,n)=>{"use strict";var r=n(6553);e.exports=function(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:r}},9471:(e,t,n)=>{"use strict";var r=n(4289),i=n(7296),o=n(2168);e.exports=function(){var e=o();if(r.supportsDescriptors){var t=i(e,"globalThis");t&&(!t.configurable||!t.enumerable&&t.writable&&globalThis===e)||Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else"object"==typeof globalThis&&globalThis===e||(e.globalThis=e);return e}},7296:(e,t,n)=>{"use strict";var r=n(210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},6560:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},1044:(e,t,n)=>{"use strict";var r=n(4429),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},8185:e=>{"use strict";var t={__proto__:null,foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof n)}},1405:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(5419);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(e,t,n)=>{"use strict";var r=n(5419);e.exports=function(){return r()&&!!Symbol.toStringTag}},8824:(e,t,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(8612);e.exports=o.call(r,i)},9201:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpProxyAgent=void 0;const a=o(n(1808)),c=o(n(4404)),u=s(n(5158)),l=n(2361),h=n(8333),d=n(7310),f=(0,u.default)("http-proxy-agent");class p extends h.Agent{constructor(e,t){super(t),this.proxy="string"==typeof e?new d.URL(e):e,this.proxyHeaders=t?.headers??{},f("Creating new HttpProxyAgent instance: %o",this.proxy.href);const n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),r=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={...t?m(t,"headers"):null,host:n,port:r}}addRequest(e,t){e._header=null,this.setRequestProps(e,t),super.addRequest(e,t)}setRequestProps(e,t){const{proxy:n}=this,r=`${t.secureEndpoint?"https:":"http:"}//${e.getHeader("host")||"localhost"}`,i=new d.URL(e.path,r);80!==t.port&&(i.port=String(t.port)),e.path=String(i);const o="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){const e=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const t of Object.keys(o)){const n=o[t];n&&e.setHeader(t,n)}}async connect(e,t){let n,r,i;return e._header=null,e.path.includes("://")||this.setRequestProps(e,t),f("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(f("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,r=n.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+n.substring(r),f("Output buffer: %o",e.outputData[0].data)),"https:"===this.proxy.protocol?(f("Creating `tls.Socket`: %o",this.connectOpts),i=c.connect(this.connectOpts)):(f("Creating `net.Socket`: %o",this.connectOpts),i=a.connect(this.connectOpts)),await(0,l.once)(i,"connect"),i}}function m(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}p.protocols=["http","https"],t.HttpProxyAgent=p},6018:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpsProxyAgent=void 0;const a=o(n(1808)),c=o(n(4404)),u=s(n(9491)),l=s(n(5158)),h=n(8333),d=n(7310),f=n(9829),p=(0,l.default)("https-proxy-agent");class m extends h.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy="string"==typeof e?new d.URL(e):e,this.proxyHeaders=t?.headers??{},p("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),r=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?y(t,"headers"):null,host:n,port:r}}async connect(e,t){const{proxy:n}=this;if(!t.host)throw new TypeError('No "host" provided');let r;if("https:"===n.protocol){p("Creating `tls.Socket`: %o",this.connectOpts);const e=this.connectOpts.servername||this.connectOpts.host;r=c.connect({...this.connectOpts,servername:e&&a.isIP(e)?void 0:e})}else p("Creating `net.Socket`: %o",this.connectOpts),r=a.connect(this.connectOpts);const i="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},o=a.isIPv6(t.host)?`[${t.host}]`:t.host;let s=`CONNECT ${o}:${t.port} HTTP/1.1\r\n`;if(n.username||n.password){const e=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;i["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}i.Host=`${o}:${t.port}`,i["Proxy-Connection"]||(i["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const e of Object.keys(i))s+=`${e}: ${i[e]}\r\n`;const l=(0,f.parseProxyResponse)(r);r.write(`${s}\r\n`);const{connect:h,buffered:d}=await l;if(e.emit("proxyConnect",h),this.emit("proxyConnect",h,e),200===h.statusCode){if(e.once("socket",g),t.secureEndpoint){p("Upgrading socket connection to TLS");const e=t.servername||t.host;return c.connect({...y(t,"host","path","port"),socket:r,servername:a.isIP(e)?void 0:e})}return r}r.destroy();const m=new a.Socket({writable:!1});return m.readable=!0,e.once("socket",(e=>{p("Replaying proxy buffer for failed request"),(0,u.default)(e.listenerCount("data")>0),e.push(d),e.push(null)})),m}}function g(e){e.resume()}function y(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}m.protocols=["http","https"],t.HttpsProxyAgent=m},9829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseProxyResponse=void 0;const i=(0,r(n(5158)).default)("https-proxy-agent:parse-proxy-response");t.parseProxyResponse=function(e){return new Promise(((t,n)=>{let r=0;const o=[];function s(){const c=e.read();c?function(c){o.push(c),r+=c.length;const u=Buffer.concat(o,r),l=u.indexOf("\r\n\r\n");if(-1===l)return i("have not received end of HTTP headers yet..."),void s();const h=u.slice(0,l).toString("ascii").split("\r\n"),d=h.shift();if(!d)return e.destroy(),n(new Error("No header received from proxy CONNECT response"));const f=d.split(" "),p=+f[1],m=f.slice(2).join(" "),g={};for(const t of h){if(!t)continue;const r=t.indexOf(":");if(-1===r)return e.destroy(),n(new Error(`Invalid header from proxy CONNECT response: "${t}"`));const i=t.slice(0,r).toLowerCase(),o=t.slice(r+1).trimStart(),s=g[i];"string"==typeof s?g[i]=[s,o]:Array.isArray(s)?s.push(o):g[i]=o}i("got proxy server response: %o %o",d,g),a(),t({connect:{statusCode:p,statusText:m,headers:g},buffered:u})}(c):e.once("readable",s)}function a(){e.removeListener("end",c),e.removeListener("error",u),e.removeListener("readable",s)}function c(){a(),i("onend"),n(new Error("Proxy connection ended before receiving CONNECT response"))}function u(e){a(),i("onerror %o",e),n(e)}e.on("error",u),e.on("end",c),s()}))}},688:(e,t,n)=>{"use strict";var r=n(2399).Buffer;t._dbcs=u;for(var i=-1,o=-10,s=-1e3,a=new Array(256),c=0;c<256;c++)a[c]=i;function u(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=a.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);if("function"==typeof e.gb18030){this.gb18030=e.gb18030();var o=this.decodeTables.length;this.decodeTables.push(a.slice(0));var c=this.decodeTables.length;this.decodeTables.push(a.slice(0));var u=this.decodeTables[0];for(r=129;r<=254;r++)for(var l=this.decodeTables[s-u[r]],h=48;h<=57;h++){if(l[h]===i)l[h]=s-o;else if(l[h]>s)throw new Error("gb18030 decode tables conflict at byte 2");for(var d=this.decodeTables[s-l[h]],f=129;f<=254;f++){if(d[f]===i)d[f]=s-c;else{if(d[f]===s-c)continue;if(d[f]>s)throw new Error("gb18030 decode tables conflict at byte 3")}for(var p=this.decodeTables[s-d[f]],m=48;m<=57;m++)p[m]===i&&(p[m]=-2)}}}this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var g={};if(e.encodeSkipVals)for(r=0;r<e.encodeSkipVals.length;r++){var y=e.encodeSkipVals[r];if("number"==typeof y)g[y]=!0;else for(h=y.from;h<=y.to;h++)g[h]=!0}if(this._fillEncodeTable(0,0,g),e.encodeAdd)for(var _ in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,_)&&this._setEncodeChar(_.charCodeAt(0),e.encodeAdd[_]);this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===i&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===i&&(this.defCharSB="?".charCodeAt(0))}function l(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function h(e,t){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function d(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+(r-n+1>>1);e[i]<=t?n=i:r=i}return n}u.prototype.encoder=l,u.prototype.decoder=h,u.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var o=n[t[r]];if(o==i)n[t[r]]=s-this.decodeTables.length,this.decodeTables.push(n=a.slice(0));else{if(!(o<=s))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[s-o]}}return n},u.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var s=0;s<i.length;){var a=i.charCodeAt(s++);if(55296<=a&&a<56320){var c=i.charCodeAt(s++);if(!(56320<=c&&c<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(a-55296)+(c-56320)}else if(4080<a&&a<=4095){for(var u=4095-a+2,l=[],h=0;h<u;h++)l.push(i.charCodeAt(s++));n[t++]=o-this.decodeTableSeq.length,this.decodeTableSeq.push(l)}else n[t++]=a}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);var d=n[t-1]+1;for(s=0;s<i;s++)n[t++]=d++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},u.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=a.slice(0)),this.encodeTable[t]},u.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=o?this.encodeTableSeq[o-n[r]][-1]=t:n[r]==i&&(n[r]=t)},u.prototype._setEncodeSequence=function(e,t){var n,r=e[0],s=this._getEncodeBucket(r),a=255&r;s[a]<=o?n=this.encodeTableSeq[o-s[a]]:(n={},s[a]!==i&&(n[-1]=s[a]),s[a]=o-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var c=1;c<e.length-1;c++){var u=n[r];"object"==typeof u?n=u:(n=n[r]={},void 0!==u&&(n[-1]=u))}n[r=e[e.length-1]]=t},u.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=!1,a={},c=0;c<256;c++){var u=r[c],l=t+c;if(!n[l])if(u>=0)this._setEncodeChar(u,l),i=!0;else if(u<=s){var h=s-u;if(!a[h]){var d=l<<8>>>0;this._fillEncodeTable(h,d,n)?i=!0:a[h]=!0}}else u<=o&&(this._setEncodeSequence(this.decodeTableSeq[o-u],l),i=!0)}return i},l.prototype.write=function(e){for(var t=r.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,s=this.seqObj,a=-1,c=0,u=0;;){if(-1===a){if(c==e.length)break;var l=e.charCodeAt(c++)}else l=a,a=-1;if(55296<=l&&l<57344)if(l<56320){if(-1===n){n=l;continue}n=l,l=i}else-1!==n?(l=65536+1024*(n-55296)+(l-56320),n=-1):l=i;else-1!==n&&(a=l,l=i,n=-1);var h=i;if(void 0!==s&&l!=i){var f=s[l];if("object"==typeof f){s=f;continue}"number"==typeof f?h=f:null==f&&void 0!==(f=s[-1])&&(h=f,a=l),s=void 0}else if(l>=0){var p=this.encodeTable[l>>8];if(void 0!==p&&(h=p[255&l]),h<=o){s=this.encodeTableSeq[o-h];continue}if(h==i&&this.gb18030){var m=d(this.gb18030.uChars,l);if(-1!=m){h=this.gb18030.gbChars[m]+(l-this.gb18030.uChars[m]),t[u++]=129+Math.floor(h/12600),h%=12600,t[u++]=48+Math.floor(h/1260),h%=1260,t[u++]=129+Math.floor(h/10),h%=10,t[u++]=48+h;continue}}}h===i&&(h=this.defaultCharSingleByte),h<256?t[u++]=h:h<65536?(t[u++]=h>>8,t[u++]=255&h):h<16777216?(t[u++]=h>>16,t[u++]=h>>8&255,t[u++]=255&h):(t[u++]=h>>>24,t[u++]=h>>>16&255,t[u++]=h>>>8&255,t[u++]=255&h)}return this.seqObj=s,this.leadSurrogate=n,t.slice(0,u)},l.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=r.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},l.prototype.findIdx=d,h.prototype.write=function(e){for(var t=r.alloc(2*e.length),n=this.nodeIdx,a=this.prevBytes,c=this.prevBytes.length,u=-this.prevBytes.length,l=0,h=0;l<e.length;l++){var f,p=l>=0?e[l]:a[l+c];if((f=this.decodeTables[n][p])>=0);else if(f===i)f=this.defaultCharUnicode.charCodeAt(0),l=u;else if(-2===f){if(l>=3)var m=12600*(e[l-3]-129)+1260*(e[l-2]-48)+10*(e[l-1]-129)+(p-48);else m=12600*(a[l-3+c]-129)+1260*((l-2>=0?e[l-2]:a[l-2+c])-48)+10*((l-1>=0?e[l-1]:a[l-1+c])-129)+(p-48);var g=d(this.gb18030.gbChars,m);f=this.gb18030.uChars[g]+m-this.gb18030.gbChars[g]}else{if(f<=s){n=s-f;continue}if(!(f<=o))throw new Error("iconv-lite internal error: invalid decoding table value "+f+" at "+n+"/"+p);for(var y=this.decodeTableSeq[o-f],_=0;_<y.length-1;_++)f=y[_],t[h++]=255&f,t[h++]=f>>8;f=y[y.length-1]}if(f>=65536){var v=55296|(f-=65536)>>10;t[h++]=255&v,t[h++]=v>>8,f=56320|1023&f}t[h++]=255&f,t[h++]=f>>8,n=0,u=l+1}return this.nodeIdx=n,this.prevBytes=u>=0?Array.prototype.slice.call(e,u):a.slice(u+c).concat(Array.prototype.slice.call(e)),t.slice(0,h).toString("ucs2")},h.prototype.end=function(){for(var e="";this.prevBytes.length>0;){e+=this.defaultCharUnicode;var t=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.prevBytes=[],this.nodeIdx=0,e}},5990:(e,t,n)=>{"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(7014)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(1532)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(3336)}},gbk:{type:"_dbcs",table:function(){return n(3336).concat(n(4346))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(3336).concat(n(4346))},gb18030:function(){return n(6258)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(7348)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(4284)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(4284).concat(n(3480))},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},6934:(e,t,n)=>{"use strict";for(var r=[n(1025),n(7688),n(1279),n(758),n(9068),n(288),n(7018),n(688),n(5990)],i=0;i<r.length;i++){var o=r[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}},1025:(e,t,n)=>{"use strict";var r=n(2399).Buffer;function i(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=u,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=l,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=a,i.prototype.decoder=s;var o=n(1576).StringDecoder;function s(e,t){this.decoder=new o(t.enc)}function a(e,t){this.enc=t.enc}function c(e,t){this.prevStr=""}function u(e,t){}function l(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),s.prototype.write=function(e){return r.isBuffer(e)||(e=r.from(e)),this.decoder.write(e)},s.prototype.end=function(){return this.decoder.end()},a.prototype.write=function(e){return r.from(e,this.enc)},a.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),r.from(e,"base64")},c.prototype.end=function(){return r.from(this.prevStr,"base64")},u.prototype.write=function(e){for(var t=r.alloc(3*e.length),n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=192+(o>>>6),t[n++]=128+(63&o)):(t[n++]=224+(o>>>12),t[n++]=128+(o>>>6&63),t[n++]=128+(63&o))}return t.slice(0,n)},u.prototype.end=function(){},l.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<e.length;o++){var s=e[o];128!=(192&s)?(n>0&&(i+=this.defaultCharUnicode,n=0),s<128?i+=String.fromCharCode(s):s<224?(t=31&s,n=1,r=1):s<240?(t=15&s,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&s,r++,0==--n&&(i+=2===r&&t<128&&t>0||3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},l.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},9068:(e,t,n)=>{"use strict";var r=n(2399).Buffer;function i(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);e.chars=n+e.chars}this.decodeBuf=r.from(e.chars,"ucs2");var o=r.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(i=0;i<e.chars.length;i++)o[e.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function s(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=s,o.prototype.write=function(e){for(var t=r.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},o.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.decodeBuf,n=r.alloc(2*e.length),i=0,o=0,s=0;s<e.length;s++)i=2*e[s],n[o=2*s]=t[i],n[o+1]=t[i+1];return n.toString("ucs2")},s.prototype.end=function(){}},7018:e=>{"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},288:e=>{"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},1279:(e,t,n)=>{"use strict";var r=n(2399).Buffer;function i(){}function o(){}function s(){this.overflowByte=-1}function a(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function u(e,t){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=e||{},this.iconv=t.iconv}function l(e,t){var n=[],r=0,i=0,o=0;e:for(var s=0;s<e.length;s++)for(var a=e[s],c=0;c<a.length;c++)if(n.push(a[c]),2===n.length){if(0===r){if(255===n[0]&&254===n[1])return"utf-16le";if(254===n[0]&&255===n[1])return"utf-16be"}if(0===n[0]&&0!==n[1]&&o++,0!==n[0]&&0===n[1]&&i++,n.length=0,++r>=100)break e}return o>i?"utf-16be":o<i?"utf-16le":t||"utf-16le"}t.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=s,i.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=r.from(e,"ucs2"),n=0;n<t.length;n+=2){var i=t[n];t[n]=t[n+1],t[n+1]=i}return t},o.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return"";var t=r.alloc(e.length+1),n=0,i=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,i=2);n<e.length-1;n+=2,i+=2)t[i]=e[n+1],t[i+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,i).toString("ucs2")},s.prototype.end=function(){this.overflowByte=-1},t.utf16=a,a.prototype.encoder=c,a.prototype.decoder=u,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},u.prototype.write=function(e){if(!this.decoder){if(this.initialBufs.push(e),this.initialBufsLen+=e.length,this.initialBufsLen<16)return"";var t=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var n="",r=0;r<this.initialBufs.length;r++)n+=this.decoder.write(this.initialBufs[r]);return this.initialBufs.length=this.initialBufsLen=0,n}return this.decoder.write(e)},u.prototype.end=function(){if(!this.decoder){var e=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);for(var t="",n=0;n<this.initialBufs.length;n++)t+=this.decoder.write(this.initialBufs[n]);var r=this.decoder.end();return r&&(t+=r),this.initialBufs.length=this.initialBufsLen=0,t}return this.decoder.end()}},7688:(e,t,n)=>{"use strict";var r=n(2399).Buffer;function i(e,t){this.iconv=t,this.bomAware=!0,this.isLE=e.isLE}function o(e,t){this.isLE=t.isLE,this.highSurrogate=0}function s(e,t){this.isLE=t.isLE,this.badChar=t.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}function a(e,t,n,r){if((n<0||n>1114111)&&(n=r),n>=65536){var i=55296|(n-=65536)>>10;e[t++]=255&i,e[t++]=i>>8,n=56320|1023&n}return e[t++]=255&n,e[t++]=n>>8,t}function c(e,t){this.iconv=t}function u(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder(e.defaultEncoding||"utf-32le",e)}function l(e,t){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=e||{},this.iconv=t.iconv}function h(e,t){var n=[],r=0,i=0,o=0,s=0,a=0;e:for(var c=0;c<e.length;c++)for(var u=e[c],l=0;l<u.length;l++)if(n.push(u[l]),4===n.length){if(0===r){if(255===n[0]&&254===n[1]&&0===n[2]&&0===n[3])return"utf-32le";if(0===n[0]&&0===n[1]&&254===n[2]&&255===n[3])return"utf-32be"}if((0!==n[0]||n[1]>16)&&o++,(0!==n[3]||n[2]>16)&&i++,0!==n[0]||0!==n[1]||0===n[2]&&0===n[3]||a++,0===n[0]&&0===n[1]||0!==n[2]||0!==n[3]||s++,n.length=0,++r>=100)break e}return a-o>s-i?"utf-32be":a-o<s-i?"utf-32le":t||"utf-32le"}t._utf32=i,t.utf32le={type:"_utf32",isLE:!0},t.utf32be={type:"_utf32",isLE:!1},t.ucs4le="utf32le",t.ucs4be="utf32be",i.prototype.encoder=o,i.prototype.decoder=s,o.prototype.write=function(e){for(var t=r.from(e,"ucs2"),n=r.alloc(2*t.length),i=this.isLE?n.writeUInt32LE:n.writeUInt32BE,o=0,s=0;s<t.length;s+=2){var a=t.readUInt16LE(s),c=55296<=a&&a<56320,u=56320<=a&&a<57344;if(this.highSurrogate){if(!c&&u){var l=65536+(this.highSurrogate-55296<<10|a-56320);i.call(n,l,o),o+=4,this.highSurrogate=0;continue}i.call(n,this.highSurrogate,o),o+=4}c?this.highSurrogate=a:(i.call(n,a,o),o+=4,this.highSurrogate=0)}return o<n.length&&(n=n.slice(0,o)),n},o.prototype.end=function(){if(this.highSurrogate){var e=r.alloc(4);return this.isLE?e.writeUInt32LE(this.highSurrogate,0):e.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,e}},s.prototype.write=function(e){if(0===e.length)return"";var t=0,n=0,i=r.alloc(e.length+4),o=0,s=this.isLE,c=this.overflow,u=this.badChar;if(c.length>0){for(;t<e.length&&c.length<4;t++)c.push(e[t]);4===c.length&&(n=s?c[t]|c[t+1]<<8|c[t+2]<<16|c[t+3]<<24:c[t+3]|c[t+2]<<8|c[t+1]<<16|c[t]<<24,c.length=0,o=a(i,o,n,u))}for(;t<e.length-3;t+=4)o=a(i,o,n=s?e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24:e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]<<24,u);for(;t<e.length;t++)c.push(e[t]);return i.slice(0,o).toString("ucs2")},s.prototype.end=function(){this.overflow.length=0},t.utf32=c,t.ucs4="utf32",c.prototype.encoder=u,c.prototype.decoder=l,u.prototype.write=function(e){return this.encoder.write(e)},u.prototype.end=function(){return this.encoder.end()},l.prototype.write=function(e){if(!this.decoder){if(this.initialBufs.push(e),this.initialBufsLen+=e.length,this.initialBufsLen<32)return"";var t=h(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var n="",r=0;r<this.initialBufs.length;r++)n+=this.decoder.write(this.initialBufs[r]);return this.initialBufs.length=this.initialBufsLen=0,n}return this.decoder.write(e)},l.prototype.end=function(){if(!this.decoder){var e=h(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);for(var t="",n=0;n<this.initialBufs.length;n++)t+=this.decoder.write(this.initialBufs[n]);var r=this.decoder.end();return r&&(t+=r),this.initialBufs.length=this.initialBufsLen=0,t}return this.decoder.end()}},758:(e,t,n)=>{"use strict";var r=n(2399).Buffer;function i(e,t){this.iconv=t}t.utf7=i,t.unicode11utf7="utf7",i.prototype.encoder=s,i.prototype.decoder=a,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function s(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){return r.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,u=[],l=0;l<256;l++)u[l]=c.test(String.fromCharCode(l));var h="+".charCodeAt(0),d="-".charCodeAt(0),f="&".charCodeAt(0);function p(e,t){this.iconv=t}function m(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function g(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!u[e[s]]){if(s==n&&e[s]==d)t+="+";else{var a=o+this.iconv.decode(e.slice(n,s),"ascii");t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=d&&s--,n=s+1,i=!1,o=""}}else e[s]==h&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+this.iconv.decode(e.slice(n),"ascii")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=p,p.prototype.encoder=m,p.prototype.decoder=g,p.prototype.bomAware=!0,m.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*e.length+10),s=0,a=0;a<e.length;a++){var c=e.charCodeAt(a);32<=c&&c<=126?(t&&(i>0&&(s+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),s),i=0),o[s++]=d,t=!1),t||(o[s++]=c,c===f&&(o[s++]=d))):(t||(o[s++]=f,t=!0),t&&(n[i++]=c>>8,n[i++]=255&c,i==n.length&&(s+=o.write(n.toString("base64").replace(/\//g,","),s),i=0)))}return this.inBase64=t,this.base64AccumIdx=i,o.slice(0,s)},m.prototype.end=function(){var e=r.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=d,this.inBase64=!1),e.slice(0,t)};var y=u.slice();y[",".charCodeAt(0)]=!0,g.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!y[e[s]]){if(s==n&&e[s]==d)t+="&";else{var a=o+this.iconv.decode(e.slice(n,s),"ascii").replace(/,/g,"/");t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=d&&s--,n=s+1,i=!1,o=""}}else e[s]==f&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+this.iconv.decode(e.slice(n),"ascii").replace(/,/g,"/")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},g.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},5395:(e,t)=>{"use strict";function n(e,t){this.encoder=e,this.addBOM=!0}function r(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=n,n.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},n.prototype.end=function(){return this.encoder.end()},t.StripBOM=r,r.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),t},r.prototype.end=function(){return this.decoder.end()}},4914:(e,t,n)=>{"use strict";var r,i=n(2399).Buffer,o=n(5395),s=e.exports;s.encodings=null,s.defaultCharUnicode="",s.defaultCharSingleByte="?",s.encode=function(e,t,n){e=""+(e||"");var r=s.getEncoder(t,n),o=r.write(e),a=r.end();return a&&a.length>0?i.concat([o,a]):o},s.decode=function(e,t,n){"string"==typeof e&&(s.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),s.skipDecodeWarning=!0),e=i.from(""+(e||""),"binary"));var r=s.getDecoder(t,n),o=r.write(e),a=r.end();return a?o+a:o},s.encodingExists=function(e){try{return s.getCodec(e),!0}catch(e){return!1}},s.toEncoding=s.encode,s.fromEncoding=s.decode,s._codecDataCache={},s.getCodec=function(e){s.encodings||(s.encodings=n(6934));for(var t=s._canonicalizeEncoding(e),r={};;){var i=s._codecDataCache[t];if(i)return i;var o=s.encodings[t];switch(typeof o){case"string":t=o;break;case"object":for(var a in o)r[a]=o[a];r.encodingName||(r.encodingName=t),t=o.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new o(r,s),s._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},s._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},s.getEncoder=function(e,t){var n=s.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new o.PrependBOM(r,t)),r},s.getDecoder=function(e,t){var n=s.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(r=new o.StripBOM(r,t)),r},s.enableStreamingAPI=function(e){if(!s.supportsStreams){var t=n(8044)(e);s.IconvLiteEncoderStream=t.IconvLiteEncoderStream,s.IconvLiteDecoderStream=t.IconvLiteDecoderStream,s.encodeStream=function(e,t){return new s.IconvLiteEncoderStream(s.getEncoder(e,t),t)},s.decodeStream=function(e,t){return new s.IconvLiteDecoderStream(s.getDecoder(e,t),t)},s.supportsStreams=!0}};try{r=n(2781)}catch(e){}r&&r.Transform?s.enableStreamingAPI(r):s.encodeStream=s.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}},8044:(e,t,n)=>{"use strict";var r=n(2399).Buffer;e.exports=function(e){var t=e.Transform;function n(e,n){this.conv=e,(n=n||{}).decodeStrings=!1,t.call(this,n)}function i(e,n){this.conv=e,(n=n||{}).encoding=this.encoding="utf8",t.call(this,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),n.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},n.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},n.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",(function(e){t.push(e)})),this.on("end",(function(){e(null,r.concat(t))})),this},i.prototype=Object.create(t.prototype,{constructor:{value:i}}),i.prototype._transform=function(e,t,n){if(!(r.isBuffer(e)||e instanceof Uint8Array))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i,this.encoding),n()}catch(e){n(e)}},i.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},i.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",(function(e){t+=e})),this.on("end",(function(){e(null,t)})),this},{IconvLiteEncoderStream:n,IconvLiteDecoderStream:i}}},4378:(e,t,n)=>{try{var r=n(3837);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(5717)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},9496:(e,t,n)=>{"use strict";var r=n(8824),i=n(7478)(),o=n(4453),s={assert:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`O` is not an object");if("string"!=typeof t)throw new o("`slot` must be a string");if(i.assert(e),!s.has(e,t))throw new o("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`O` is not an object");if("string"!=typeof t)throw new o("`slot` must be a string");var n=i.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`O` is not an object");if("string"!=typeof t)throw new o("`slot` must be a string");var n=i.get(e);return!!n&&r(n,"$"+t)},set:function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`O` is not an object");if("string"!=typeof t)throw new o("`slot` must be a string");var r=i.get(e);r||(r={},i.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(s),e.exports=s},5320:e=>{"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(e){try{var t=r.call(e);return o.test(t)}catch(e){return!1}},a=function(e){try{return!s(e)&&(r.call(e),!0)}catch(e){return!1}},c=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var d=document.all;c.call(d)===c.call(document.all)&&(h=function(e){if((l||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(h(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!s(e)&&a(e)}:function(e){if(h(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return a(e);if(s(e))return!1;var t=c.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&a(e)}},1595:(e,t,n)=>{"use strict";const r=n(7147);let i;e.exports=()=>(void 0===i&&(i=function(){try{return r.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return r.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),i)},9981:(e,t,n)=>{"use strict";var r=String.prototype.valueOf,i=Object.prototype.toString,o=n(6410)();e.exports=function(e){return"string"==typeof e||"object"==typeof e&&(o?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object String]"===i.call(e))}},2818:(e,t,n)=>{"use strict";const r=n(2037),i=n(7147),o=n(1595),s=()=>{if("linux"!==process.platform)return!1;if(r.release().toLowerCase().includes("microsoft"))return!o();try{return!!i.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!o()}catch(e){return!1}};process.env.__IS_WSL_TEST__?e.exports=s:e.exports=s()},5799:(e,t,n)=>{var r;!function(){"use strict";var t="object"==typeof window?window:{},i=!t.JS_MD4_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;i&&(t=global);var o,s=!t.JS_MD4_NO_COMMON_JS&&e.exports,a=n.amdO,c=!t.JS_MD4_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),l=[128,32768,8388608,-2147483648],h=[0,8,16,24],d=["hex","array","digest","buffer","arrayBuffer"],f=[];if(c){var p=new ArrayBuffer(68);o=new Uint8Array(p),f=new Uint32Array(p)}var m=function(e){return function(t){return new g(!0).update(t)[e]()}};function g(e){if(e)f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f,this.buffer8=o;else if(c){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}g.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&c&&e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,i=0,o=e.length||0,s=this.blocks,a=this.buffer8;i<o;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(c)for(r=this.start;i<o&&r<64;++i)a[r++]=e[i];else for(r=this.start;i<o&&r<64;++i)s[r>>2]|=e[i]<<h[3&r++];else if(c)for(r=this.start;i<o&&r<64;++i)(n=e.charCodeAt(i))<128?a[r++]=n:n<2048?(a[r++]=192|n>>6,a[r++]=128|63&n):n<55296||n>=57344?(a[r++]=224|n>>12,a[r++]=128|n>>6&63,a[r++]=128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),a[r++]=240|n>>18,a[r++]=128|n>>12&63,a[r++]=128|n>>6&63,a[r++]=128|63&n);else for(r=this.start;i<o&&r<64;++i)(n=e.charCodeAt(i))<128?s[r>>2]|=n<<h[3&r++]:n<2048?(s[r>>2]|=(192|n>>6)<<h[3&r++],s[r>>2]|=(128|63&n)<<h[3&r++]):n<55296||n>=57344?(s[r>>2]|=(224|n>>12)<<h[3&r++],s[r>>2]|=(128|n>>6&63)<<h[3&r++],s[r>>2]|=(128|63&n)<<h[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),s[r>>2]|=(240|n>>18)<<h[3&r++],s[r>>2]|=(128|n>>12&63)<<h[3&r++],s[r>>2]|=(128|n>>6&63)<<h[3&r++],s[r>>2]|=(128|63&n)<<h[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this}},g.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=l[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,this.hash()}},g.prototype.hash=function(){var e,t,n,r,i,o,s,a,c=this.blocks;this.first?t=(t=((n=(n=((r=(r=(4023233417&(e=(e=c[0]-1)<<3|e>>>29)|2562383102&~e)+c[1]+271733878)<<7|r>>>25)&e|4023233417&~r)+c[2]-1732584194)<<11|n>>>21)&r|~n&e)+c[3]-271733879)<<19|t>>>13:(e=this.h0,t=this.h1,n=this.h2,r=this.h3,t=(t+=((n=(n+=((r=(r+=((e=(e+=(t&n|~t&r)+c[0])<<3|e>>>29)&t|~e&n)+c[1])<<7|r>>>25)&e|~r&t)+c[2])<<11|n>>>21)&r|~n&e)+c[3])<<19|t>>>13),t=(t+=((n=(n+=((r=(r+=((e=(e+=(t&n|~t&r)+c[4])<<3|e>>>29)&t|~e&n)+c[5])<<7|r>>>25)&e|~r&t)+c[6])<<11|n>>>21)&r|~n&e)+c[7])<<19|t>>>13,t=(t+=((n=(n+=((r=(r+=((e=(e+=(t&n|~t&r)+c[8])<<3|e>>>29)&t|~e&n)+c[9])<<7|r>>>25)&e|~r&t)+c[10])<<11|n>>>21)&r|~n&e)+c[11])<<19|t>>>13,t=(t+=((n=(n+=((r=(r+=((e=(e+=(t&n|~t&r)+c[12])<<3|e>>>29)&t|~e&n)+c[13])<<7|r>>>25)&e|~r&t)+c[14])<<11|n>>>21)&r|~n&e)+c[15])<<19|t>>>13,t=(t+=((s=(n=(n+=((a=(r=(r+=((i=(e=(e+=((o=t&n)|t&r|n&r)+c[0]+1518500249)<<3|e>>>29)&t)|e&n|o)+c[4]+1518500249)<<5|r>>>27)&e)|r&t|i)+c[8]+1518500249)<<9|n>>>23)&r)|n&e|a)+c[12]+1518500249)<<13|t>>>19,t=(t+=((s=(n=(n+=((a=(r=(r+=((i=(e=(e+=((o=t&n)|t&r|s)+c[1]+1518500249)<<3|e>>>29)&t)|e&n|o)+c[5]+1518500249)<<5|r>>>27)&e)|r&t|i)+c[9]+1518500249)<<9|n>>>23)&r)|n&e|a)+c[13]+1518500249)<<13|t>>>19,t=(t+=((s=(n=(n+=((a=(r=(r+=((i=(e=(e+=((o=t&n)|t&r|s)+c[2]+1518500249)<<3|e>>>29)&t)|e&n|o)+c[6]+1518500249)<<5|r>>>27)&e)|r&t|i)+c[10]+1518500249)<<9|n>>>23)&r)|n&e|a)+c[14]+1518500249)<<13|t>>>19,t=(t+=((n=(n+=((a=(r=(r+=((i=(e=(e+=((o=t&n)|t&r|s)+c[3]+1518500249)<<3|e>>>29)&t)|e&n|o)+c[7]+1518500249)<<5|r>>>27)&e)|r&t|i)+c[11]+1518500249)<<9|n>>>23)&r|n&e|a)+c[15]+1518500249)<<13|t>>>19,t=(t+=((a=(r=(r+=((o=t^n)^(e=(e+=(o^r)+c[0]+1859775393)<<3|e>>>29))+c[8]+1859775393)<<9|r>>>23)^e)^(n=(n+=(a^t)+c[4]+1859775393)<<11|n>>>21))+c[12]+1859775393)<<15|t>>>17,t=(t+=((a=(r=(r+=((o=t^n)^(e=(e+=(o^r)+c[2]+1859775393)<<3|e>>>29))+c[10]+1859775393)<<9|r>>>23)^e)^(n=(n+=(a^t)+c[6]+1859775393)<<11|n>>>21))+c[14]+1859775393)<<15|t>>>17,t=(t+=((a=(r=(r+=((o=t^n)^(e=(e+=(o^r)+c[1]+1859775393)<<3|e>>>29))+c[9]+1859775393)<<9|r>>>23)^e)^(n=(n+=(a^t)+c[5]+1859775393)<<11|n>>>21))+c[13]+1859775393)<<15|t>>>17,t=(t+=((a=(r=(r+=((o=t^n)^(e=(e+=(o^r)+c[3]+1859775393)<<3|e>>>29))+c[11]+1859775393)<<9|r>>>23)^e)^(n=(n+=(a^t)+c[7]+1859775393)<<11|n>>>21))+c[15]+1859775393)<<15|t>>>17,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},g.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return u[e>>4&15]+u[15&e]+u[e>>12&15]+u[e>>8&15]+u[e>>20&15]+u[e>>16&15]+u[e>>28&15]+u[e>>24&15]+u[t>>4&15]+u[15&t]+u[t>>12&15]+u[t>>8&15]+u[t>>20&15]+u[t>>16&15]+u[t>>28&15]+u[t>>24&15]+u[n>>4&15]+u[15&n]+u[n>>12&15]+u[n>>8&15]+u[n>>20&15]+u[n>>16&15]+u[n>>28&15]+u[n>>24&15]+u[r>>4&15]+u[15&r]+u[r>>12&15]+u[r>>8&15]+u[r>>20&15]+u[r>>16&15]+u[r>>28&15]+u[r>>24&15]},g.prototype.toString=g.prototype.hex,g.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},g.prototype.array=g.prototype.digest,g.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},g.prototype.buffer=g.prototype.arrayBuffer;var y=function(){var e=m("hex");i&&(e=function(e){var t=n(6113),r=n(4300).Buffer;return function(n){if("string"==typeof n)return t.createHash("md4").update(n,"utf8").digest("hex");if(c&&n instanceof ArrayBuffer)n=new Uint8Array(n);else if(void 0===n.length)return e(n);return t.createHash("md4").update(new r(n)).digest("hex")}}(e)),e.create=function(){return new g},e.update=function(t){return e.create().update(t)};for(var t=0;t<d.length;++t){var r=d[t];e[r]=m(r)}return e}();s?e.exports=y:(t.md4=y,a&&(void 0===(r=function(){return y}.call(y,n,y,e))||(e.exports=r)))}()},7626:(e,t,n)=>{var r=n(9828);e.exports=function(e,t){t=t||{};var n=r.decode(e,t);if(!n)return null;var i=n.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:n.header,payload:i,signature:n.signature}:i}},9704:(e,t,n)=>{e.exports={decode:n(7626),verify:n(7030),sign:n(2506),JsonWebTokenError:n(8619),NotBeforeError:n(1826),TokenExpiredError:n(2340)}},8619:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},1826:(e,t,n)=>{var r=n(8619),i=function(e,t){r.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},2340:(e,t,n)=>{var r=n(8619),i=function(e,t){r.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},5599:(e,t,n)=>{const r=n(1249);e.exports=r.satisfies(process.version,">=15.7.0")},4964:(e,t,n)=>{var r=n(1249);e.exports=r.satisfies(process.version,"^6.12.0 || >=8.0.0")},1564:(e,t,n)=>{const r=n(1249);e.exports=r.satisfies(process.version,">=16.9.0")},8034:(e,t,n)=>{var r=n(9550);e.exports=function(e,t){var n=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=r(e);if(void 0===i)return;return Math.floor(n+i/1e3)}return"number"==typeof e?n+e:void 0}},7566:(e,t,n)=>{const r=n(5599),i=n(1564),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},s={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const n=t.asymmetricKeyType;if(!n)return;const a=o[n];if(!a)throw new Error(`Unknown key type "${n}".`);if(!a.includes(e))throw new Error(`"alg" parameter for "${n}" key type must be one of: ${a.join(", ")}.`);if(r)switch(n){case"ec":const n=t.asymmetricKeyDetails.namedCurve,r=s[e];if(n!==r)throw new Error(`"alg" parameter "${e}" requires curve "${r}".`);break;case"rsa-pss":if(i){const n=parseInt(e.slice(-3),10),{hashAlgorithm:r,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(r!==`sha${n}`||i!==r)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>n>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},1464:(e,t,n)=>{var r=n(8500),i=n(9509).Buffer,o=n(6113),s=n(5015),a=n(3837),c="secret must be a string or buffer",u="key must be a string or a buffer",l="function"==typeof o.createPublicKey;function h(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!l)throw m(u);if("object"!=typeof e)throw m(u);if("string"!=typeof e.type)throw m(u);if("string"!=typeof e.asymmetricKeyType)throw m(u);if("function"!=typeof e.export)throw m(u)}}function d(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var n=0;n<t;++n)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1),n=a.format.bind(a,e).apply(null,t);return new TypeError(n)}function g(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,n){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!l)throw m(c);if("object"!=typeof e)throw m(c);if("secret"!==e.type)throw m(c);if("function"!=typeof e.export)throw m(c)}}(n),t=g(t);var r=o.createHmac("sha"+e,n);return f((r.update(t),r.digest("base64")))}}function _(e){return function(t,n,o){var s=y(e)(t,o);return r(i.from(n),i.from(s))}}function v(e){return function(t,n){d(n),t=g(t);var r=o.createSign("RSA-SHA"+e);return f((r.update(t),r.sign(n,"base64")))}}function E(e){return function(t,n,r){h(r),t=g(t),n=p(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(r,n,"base64")}}function w(e){return function(t,n){d(n),t=g(t);var r=o.createSign("RSA-SHA"+e);return f((r.update(t),r.sign({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function b(e){return function(t,n,r){h(r),t=g(t),n=p(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function T(e){var t=v(e);return function(){var n=t.apply(null,arguments);return s.derToJose(n,"ES"+e)}}function S(e){var t=E(e);return function(n,r,i){return r=s.joseToDer(r,"ES"+e).toString("base64"),t(n,r,i)}}function A(){return function(){return""}}function O(){return function(e,t){return""===t}}l&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:y,rs:v,ps:w,es:T,none:A},n={hs:_,rs:E,ps:b,es:S,none:O},r=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!r)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(r[1]||r[3]).toLowerCase(),o=r[2];return{sign:t[i](o),verify:n[i](o)}}},9828:(e,t,n)=>{var r=n(6580),i=n(4744);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=r.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new r(e)},t.createVerify=function(e){return new i(e)}},9961:(e,t,n)=>{var r=n(9509).Buffer,i=n(2781);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=r.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=r.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}n(3837).inherits(o,i),o.prototype.write=function(e){this.buffer=r.concat([this.buffer,r.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},6580:(e,t,n)=>{var r=n(9509).Buffer,i=n(9961),o=n(1464),s=n(2781),a=n(1540),c=n(3837);function u(e,t){return r.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,n=e.payload,r=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),l=function(e,t,n){n=n||"utf8";var r=u(a(e),"binary"),i=u(a(t),n);return c.format("%s.%s",r,i)}(t,n,i),h=s.sign(l,r);return c.format("%s.%s",l,h)}function h(e){var t=e.secret||e.privateKey||e.key,n=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=n,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(h,s),h.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},h.sign=l,e.exports=h},1540:(e,t,n)=>{var r=n(4300).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||r.isBuffer(e)?e.toString():JSON.stringify(e)}},4744:(e,t,n)=>{var r=n(9509).Buffer,i=n(9961),o=n(1464),s=n(2781),a=n(1540),c=n(3837),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(r.from(t,"base64").toString("binary"))}function h(e){return e.split(".")[2]}function d(e){return u.test(e)&&!!l(e)}function f(e,t,n){if(!t){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}var i=h(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,n)}function p(e,t){if(t=t||{},!d(e=a(e)))return null;var n=l(e);if(!n)return null;var i=function(e,t){t=t||"utf8";var n=e.split(".")[1];return r.from(n,"base64").toString(t)}(e);return("JWT"===n.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:n,payload:i,signature:h(e)}}function m(e){var t=(e=e||{}).secret||e.publicKey||e.key,n=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=n,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(m,s),m.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},m.decode=p,m.isValid=d,m.verify=f,e.exports=m},2506:(e,t,n)=>{const r=n(8034),i=n(4964),o=n(7566),s=n(9828),a=n(8922),c=n(8094),u=n(5928),l=n(3126),h=n(8146),d=n(5751),f=n(8917),{KeyObject:p,createSecretKey:m,createPrivateKey:g}=n(6113),y=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&y.splice(3,0,"PS256","PS384","PS512");const _={expiresIn:{isValid:function(e){return u(e)||d(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||d(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return d(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,y),message:'"algorithm" must be a valid string enum value'},header:{isValid:h,message:'"header" must be an object'},encoding:{isValid:d,message:'"encoding" must be a string'},issuer:{isValid:d,message:'"issuer" must be a string'},subject:{isValid:d,message:'"subject" must be a string'},jwtid:{isValid:d,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:d,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},v={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function E(e,t,n,r){if(!h(n))throw new Error('Expected "'+r+'" to be a plain object.');Object.keys(n).forEach((function(i){const o=e[i];if(o){if(!o.isValid(n[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+r+'"')}))}const w={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},b=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,n,i){"function"==typeof n?(i=n,n={}):n=n||{};const a="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:n.algorithm||"HS256",typ:a?"JWT":void 0,kid:n.keyid},n.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==n.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof p))try{t=g(t)}catch(e){try{t=m("string"==typeof t?Buffer.from(t):t)}catch(e){return u(new Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return u(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return u(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!n.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return u(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return u(new Error("payload is required"));if(a){try{!function(e){E(v,!0,e,"payload")}(e)}catch(e){return u(e)}n.mutatePayload||(e=Object.assign({},e))}else{const t=b.filter((function(e){return void 0!==n[e]}));if(t.length>0)return u(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==n.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==n.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){E(_,!1,e,"options")}(n)}catch(e){return u(e)}if(!n.allowInvalidAsymmetricKeyTypes)try{o(c.alg,t)}catch(e){return u(e)}const l=e.iat||Math.floor(Date.now()/1e3);if(n.noTimestamp?delete e.iat:a&&(e.iat=l),void 0!==n.notBefore){try{e.nbf=r(n.notBefore,l)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==n.expiresIn&&"object"==typeof e){try{e.exp=r(n.expiresIn,l)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(w).forEach((function(t){const r=w[t];if(void 0!==n[t]){if(void 0!==e[r])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+r+'" property.'));e[r]=n[t]}}));const h=n.encoding||"utf8";if("function"!=typeof i){let r=s.sign({header:c,payload:e,secret:t,encoding:h});if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&r.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return r}i=i&&f(i),s.createSign({header:c,privateKey:t,payload:e,encoding:h}).once("error",i).once("done",(function(e){if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));i(null,e)}))}},7030:(e,t,n)=>{const r=n(8619),i=n(1826),o=n(2340),s=n(7626),a=n(8034),c=n(7566),u=n(4964),l=n(9828),{KeyObject:h,createSecretKey:d,createPublicKey:f}=n(6113),p=["RS256","RS384","RS512"],m=["ES256","ES384","ES512"],g=["RS256","RS384","RS512"],y=["HS256","HS384","HS512"];u&&(p.splice(p.length,0,"PS256","PS384","PS512"),g.splice(g.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,n,u){let _;if("function"!=typeof n||u||(u=n,n={}),n||(n={}),n=Object.assign({},n),_=u||function(e,t){if(e)throw e;return t},n.clockTimestamp&&"number"!=typeof n.clockTimestamp)return _(new r("clockTimestamp must be a number"));if(void 0!==n.nonce&&("string"!=typeof n.nonce||""===n.nonce.trim()))return _(new r("nonce must be a non-empty string"));if(void 0!==n.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof n.allowInvalidAsymmetricKeyTypes)return _(new r("allowInvalidAsymmetricKeyTypes must be a boolean"));const v=n.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return _(new r("jwt must be provided"));if("string"!=typeof e)return _(new r("jwt must be a string"));const E=e.split(".");if(3!==E.length)return _(new r("jwt malformed"));let w;try{w=s(e,{complete:!0})}catch(e){return _(e)}if(!w)return _(new r("invalid token"));const b=w.header;let T;if("function"==typeof t){if(!u)return _(new r("verify must be called asynchronous if secret or public key is provided as a callback"));T=t}else T=function(e,n){return n(null,t)};return T(b,(function(t,s){if(t)return _(new r("error in secret or public key callback: "+t.message));const u=""!==E[2].trim();if(!u&&s)return _(new r("jwt signature is required"));if(u&&!s)return _(new r("secret or public key must be provided"));if(!u&&!n.algorithms)return _(new r('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=s&&!(s instanceof h))try{s=f(s)}catch(e){try{s=d("string"==typeof s?Buffer.from(s):s)}catch(e){return _(new r("secretOrPublicKey is not valid key material"))}}if(n.algorithms||("secret"===s.type?n.algorithms=y:["rsa","rsa-pss"].includes(s.asymmetricKeyType)?n.algorithms=g:"ec"===s.asymmetricKeyType?n.algorithms=m:n.algorithms=p),-1===n.algorithms.indexOf(w.header.alg))return _(new r("invalid algorithm"));if(b.alg.startsWith("HS")&&"secret"!==s.type)return _(new r(`secretOrPublicKey must be a symmetric key when using ${b.alg}`));if(/^(?:RS|PS|ES)/.test(b.alg)&&"public"!==s.type)return _(new r(`secretOrPublicKey must be an asymmetric key when using ${b.alg}`));if(!n.allowInvalidAsymmetricKeyTypes)try{c(b.alg,s)}catch(e){return _(e)}let T;try{T=l.verify(e,w.header.alg,s)}catch(e){return _(e)}if(!T)return _(new r("invalid signature"));const S=w.payload;if(void 0!==S.nbf&&!n.ignoreNotBefore){if("number"!=typeof S.nbf)return _(new r("invalid nbf value"));if(S.nbf>v+(n.clockTolerance||0))return _(new i("jwt not active",new Date(1e3*S.nbf)))}if(void 0!==S.exp&&!n.ignoreExpiration){if("number"!=typeof S.exp)return _(new r("invalid exp value"));if(v>=S.exp+(n.clockTolerance||0))return _(new o("jwt expired",new Date(1e3*S.exp)))}if(n.audience){const e=Array.isArray(n.audience)?n.audience:[n.audience];if(!(Array.isArray(S.aud)?S.aud:[S.aud]).some((function(t){return e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))})))return _(new r("jwt audience invalid. expected: "+e.join(" or ")))}if(n.issuer&&("string"==typeof n.issuer&&S.iss!==n.issuer||Array.isArray(n.issuer)&&-1===n.issuer.indexOf(S.iss)))return _(new r("jwt issuer invalid. expected: "+n.issuer));if(n.subject&&S.sub!==n.subject)return _(new r("jwt subject invalid. expected: "+n.subject));if(n.jwtid&&S.jti!==n.jwtid)return _(new r("jwt jwtid invalid. expected: "+n.jwtid));if(n.nonce&&S.nonce!==n.nonce)return _(new r("jwt nonce invalid. expected: "+n.nonce));if(n.maxAge){if("number"!=typeof S.iat)return _(new r("iat required when maxAge is specified"));const e=a(n.maxAge,S.iat);if(void 0===e)return _(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(v>=e+(n.clockTolerance||0))return _(new o("maxAge exceeded",new Date(1e3*e)))}if(!0===n.complete){const e=w.signature;return _(null,{header:b,payload:S,signature:e})}return _(null,S)}))}},8922:e=>{var t=9007199254740991,n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=/^(?:0|[1-9]\d*)$/,a=parseInt;function c(e){return e!=e}var u,l,h=Object.prototype,d=h.hasOwnProperty,f=h.toString,p=h.propertyIsEnumerable,m=(u=Object.keys,l=Object,function(e){return u(l(e))}),g=Math.max;function y(e,n){return!!(n=null==n?t:n)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<n}var _=Array.isArray;function v(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}(e.length)&&!function(e){var t=E(e)?f.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function E(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){return!!e&&"object"==typeof e}e.exports=function(e,t,s,u){var l;e=v(e)?e:(l=e)?function(e,t){return function(t,n){for(var r=-1,i=t?t.length:0,o=Array(i);++r<i;)o[r]=(s=t[r],e[s]);var s;return o}(t)}(l,function(e){return v(e)?function(e,t){var n=_(e)||function(e){return function(e){return w(e)&&v(e)}(e)&&d.call(e,"callee")&&(!p.call(e,"callee")||"[object Arguments]"==f.call(e))}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!d.call(e,o)||i&&("length"==o||y(o,r))||n.push(o);return n}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||h))return m(e);var t,n,r=[];for(var i in Object(e))d.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}(l)):[],s=s&&!u?function(e){var t=function(e){return e?Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||w(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(E(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=E(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),s=t%1;return t==t?s?t-s:t:0}(s):0;var b=e.length;return s<0&&(s=g(b+s,0)),function(e){return"string"==typeof e||!_(e)&&w(e)&&"[object String]"==f.call(e)}(e)?s<=b&&e.indexOf(t,s)>-1:!!b&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=n+-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,c,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,s)>-1}},8094:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},5928:e=>{var t=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s=Object.prototype.toString;function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var c=function(e){return e?Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(a(e)){var c="function"==typeof e.valueOf?e.valueOf():e;e=a(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var u=r.test(e);return u||i.test(e)?o(e.slice(2),u?2:8):n.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),u=c%1;return c==c?u?c-u:c:0}(e)}},3126:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},8146:e=>{var t,n,r=Function.prototype,i=Object.prototype,o=r.toString,s=i.hasOwnProperty,a=o.call(Object),c=i.toString,u=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==a}},5751:e=>{var t=Object.prototype.toString,n=Array.isArray;e.exports=function(e){return"string"==typeof e||!n(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},8917:e=>{var t=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s=Object.prototype.toString;function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,c){var u;if("function"!=typeof c)throw new TypeError("Expected a function");return e=function(e){var c=function(e){return e?1/0===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(a(e)){var c="function"==typeof e.valueOf?e.valueOf():e;e=a(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var u=r.test(e);return u||i.test(e)?o(e.slice(2),u?2:8):n.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),u=c%1;return c==c?u?c-u:c:0}(e),function(){return--e>0&&(u=c.apply(this,arguments)),e<=1&&(c=void 0),u}}(2,e)}},9550:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=r?o(a,c,r,"hour"):c>=n?o(a,c,n,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3755:(e,t,n)=>{e.exports=n(8925)},9472:(e,t,n)=>{"use strict";const{EventEmitter:r}=n(2361),i=n(5158)("mssql:base"),{parseSqlConnectionString:o}=n(6762),s=n(2854),{IDS:a}=n(3086),c=n(7691),u=n(2058),l=n(1697),{MSSQLError:h}=n(2547);e.exports=class extends r{constructor(e,t){if(super(),a.add(this,"ConnectionPool"),i("pool(%d): created",a.get(this)),this._connectStack=[],this._closeStack=[],this._connected=!1,this._connecting=!1,this._healthy=!1,"string"==typeof e)try{this.config=this.constructor.parseConnectionString(e)}catch(e){if("function"==typeof t)return setImmediate(t,e);throw e}else this.config=l(e);this.config.port=this.config.port||1433,this.config.options=this.config.options||{},this.config.stream=this.config.stream||!1,this.config.parseJSON=this.config.parseJSON||!1,this.config.arrayRowMode=this.config.arrayRowMode||!1,this.config.validateConnection=!("validateConnection"in this.config)||this.config.validateConnection;const n=/^(.*)\\(.*)$/.exec(this.config.server);if(n&&(this.config.server=n[1],this.config.options.instanceName=n[2]),void 0!==this.config.options.useColumnNames&&!0!==this.config.options.useColumnNames){const e=new h("Invalid options `useColumnNames`, use `arrayRowMode` instead");if("function"==typeof t)return setImmediate(t,e);throw e}"function"==typeof t&&this.connect(t)}get connected(){return this._connected}get connecting(){return this._connecting}get healthy(){return this._healthy}static parseConnectionString(e){return this._parseConnectionString(e)}static _parseAuthenticationType(e,t){switch(e.toLowerCase()){case"active directory integrated":return t.includes("token")?"azure-active-directory-access-token":["client id","client secret","tenant id"].every((e=>t.includes(e)))?"azure-active-directory-service-principal-secret":["client id","msi endpoint","msi secret"].every((e=>t.includes(e)))?"azure-active-directory-msi-app-service":["client id","msi endpoint"].every((e=>t.includes(e)))?"azure-active-directory-msi-vm":"azure-active-directory-default";case"active directory password":return"azure-active-directory-password";case"ntlm":return"ntlm";default:return"default"}}static _parseConnectionString(e){const t=o(e,!0,!0);return Object.entries(t).reduce(((e,[n,r])=>{switch(n){case"application name":case"asynchronous processing":case"attachdbfilename":case"column encryption setting":case"connection lifetime":case"connectretrycount":case"context connection":case"enlist":case"failover partner":case"integrated security":case"multipleactiveresultsets":case"network library":case"persist security info":case"poolblockingperiod":case"pooling":case"replication":case"transparentnetworkipresolution":case"type system version":case"user instance":break;case"applicationintent":Object.assign(e.options,{readOnlyIntent:"readonly"===r});break;case"authentication":Object.assign(e,{authentication_type:this._parseAuthenticationType(r,Object.keys(t))});break;case"connection timeout":Object.assign(e,{connectionTimeout:1e3*r});break;case"connectretryinterval":Object.assign(e.options,{connectionRetryInterval:1e3*r});break;case"client id":Object.assign(e,{clientId:r});break;case"client secret":Object.assign(e,{clientSecret:r});break;case"current language":Object.assign(e.options,{language:r});break;case"data source":{let t,n=r,i=1433;if(/^np:/i.test(n))throw new Error("Connection via Named Pipes is not supported.");/^tcp:/i.test(n)&&(n=n.substr(4));const o=/^(.*)\\(.*)$/.exec(n);o&&(n=o[1].trim(),t=o[2].trim());const s=/^(.*),(.*)$/.exec(n);if(s)n=s[1].trim(),i=parseInt(s[2].trim(),10);else{const e=/^(.*),(.*)$/.exec(t);e&&(t=e[1].trim(),i=parseInt(e[2].trim(),10))}"."!==n&&"(.)"!==n&&"(localdb)"!==n.toLowerCase()&&"(local)"!==n.toLowerCase()||(n="localhost"),Object.assign(e,{port:i,server:n}),t&&Object.assign(e.options,{instanceName:t});break}case"encrypt":Object.assign(e.options,{encrypt:!!r});break;case"initial catalog":Object.assign(e,{database:r});break;case"max pool size":Object.assign(e.pool,{max:r});break;case"min pool size":Object.assign(e.pool,{min:r});break;case"msi endpoint":Object.assign(e,{msiEndpoint:r});break;case"msi secret":Object.assign(e,{msiSecret:r});break;case"multisubnetfailover":Object.assign(e.options,{multiSubnetFailover:r});break;case"packet size":Object.assign(e.options,{packetSize:r});break;case"password":Object.assign(e,{password:r});break;case"tenant id":Object.assign(e,{tenantId:r});break;case"token":Object.assign(e,{token:r});break;case"transaction binding":Object.assign(e.options,{enableImplicitTransactions:"implicit unbind"===r.toLowerCase()});break;case"trustservercertificate":Object.assign(e.options,{trustServerCertificate:r});break;case"user id":{let t,n=r;const i=/^(.*)\\(.*)$/.exec(n);i&&(t=i[1],n=i[2]),t&&Object.assign(e,{domain:t}),n&&Object.assign(e,{user:n});break}case"workstation id":Object.assign(e.options,{workstationId:r});break;case"request timeout":Object.assign(e,{requestTimeout:parseInt(r,10)});break;case"stream":Object.assign(e,{stream:!!r});break;case"useutc":Object.assign(e.options,{useUTC:!!r});break;case"parsejson":Object.assign(e,{parseJSON:!!r})}return e}),{options:{},pool:{}})}acquire(e,t){const n=u.Promise.resolve(this._acquire().promise).catch((e=>{throw this.emit("error",e),e}));return"function"==typeof t?(n.then((e=>t(null,e,this.config))).catch(t),this):n}_acquire(){return this.pool?this.pool.destroyed?u.Promise.reject(new c("Connection is closing","ENOTOPEN")):this.pool.acquire():u.Promise.reject(new c("Connection not yet open.","ENOTOPEN"))}release(e){return i("connection(%d): released",a.get(e)),this.pool&&this.pool.release(e),this}connect(e){return"function"==typeof e?(this._connect(e),this):new u.Promise(((e,t)=>this._connect((n=>{if(n)return t(n);e(this)}))))}_connect(e){if(this._connected)return i("pool(%d): already connected, executing connect callback immediately",a.get(this)),setImmediate(e,null,this);this._connectStack.push(e),this._connecting||(this._connecting=!0,i("pool(%d): connecting",a.get(this)),this._poolCreate().then((e=>(i("pool(%d): connected",a.get(this)),this._healthy=!0,this._poolDestroy(e).then((()=>{this.pool=new s.Pool(Object.assign({create:()=>this._poolCreate().then((e=>(this._healthy=!0,e))).catch((e=>{throw this.pool.numUsed()+this.pool.numFree()<=0&&(this._healthy=!1),e})),validate:this._poolValidate.bind(this),destroy:this._poolDestroy.bind(this),max:10,min:0,idleTimeoutMillis:3e4,propagateCreateError:!0},this.config.pool)),this._connecting=!1,this._connected=!0}))))).then((()=>{this._connectStack.forEach((e=>{setImmediate(e,null,this)}))})).catch((e=>{this._connecting=!1,this._connectStack.forEach((t=>{setImmediate(t,e)}))})).then((()=>{this._connectStack=[]})))}get size(){return this.pool.numFree()+this.pool.numUsed()+this.pool.numPendingCreates()}get available(){return this.pool.numFree()}get pending(){return this.pool.numPendingAcquires()}get borrowed(){return this.pool.numUsed()}close(e){return"function"==typeof e?(this._close(e),this):new u.Promise(((e,t)=>{this._close((n=>{if(n)return t(n);e(this)}))}))}_close(e){if(this._connecting&&(i("pool(%d): close called while connecting",a.get(this)),setImmediate(e,new c("Cannot close a pool while it is connecting"))),!this.pool)return i("pool(%d): already closed, executing close callback immediately",a.get(this)),setImmediate(e,null);this._closeStack.push(e),this.pool.destroyed||(this._connecting=this._connected=this._healthy=!1,this.pool.destroy().then((()=>{i("pool(%d): pool closed, removing pool reference and executing close callbacks",a.get(this)),this.pool=null,this._closeStack.forEach((e=>{setImmediate(e,null)}))})).catch((e=>{this.pool=null,this._closeStack.forEach((t=>{setImmediate(t,e)}))})).then((()=>{this._closeStack=[]})))}request(){return new u.driver.Request(this)}transaction(){return new u.driver.Transaction(this)}query(){if("string"==typeof arguments[0])return new u.driver.Request(this).query(arguments[0],arguments[1]);const e=Array.prototype.slice.call(arguments),t=e.shift();return new u.driver.Request(this)._template(t,e,"query")}batch(){if("string"==typeof arguments[0])return new u.driver.Request(this).batch(arguments[0],arguments[1]);const e=Array.prototype.slice.call(arguments),t=e.shift();return new u.driver.Request(this)._template(t,e,"batch")}}},4526:(e,t,n)=>{"use strict";const r=n(9472),i=n(6525),o=n(5077),s=n(8841),{ConnectionError:a,TransactionError:c,RequestError:u,PreparedStatementError:l,MSSQLError:h}=n(2547),d=n(2058),f=n(5333),p=n(5404),{TYPES:m}=n(3128),{connect:g,close:y,on:_,off:v,removeListener:E,query:w,batch:b}=n(3475);e.exports={ConnectionPool:r,Transaction:s,Request:o,PreparedStatement:i,ConnectionError:a,TransactionError:c,RequestError:u,PreparedStatementError:l,MSSQLError:h,driver:d.driver,exports:{ConnectionError:a,TransactionError:c,RequestError:u,PreparedStatementError:l,MSSQLError:h,Table:f,ISOLATION_LEVEL:p,TYPES:m,MAX:65535,map:d.map,getTypeByValue:d.getTypeByValue,connect:g,close:y,on:_,removeListener:E,off:v,query:w,batch:b}},Object.defineProperty(e.exports,"Promise",{enumerable:!0,get:()=>d.Promise,set:e=>{d.Promise=e}}),Object.defineProperty(e.exports,"valueHandler",{enumerable:!0,value:d.valueHandler,writable:!1,configurable:!1});for(const t in m){const n=m[t];e.exports.exports[t]=n,e.exports.exports[t.toUpperCase()]=n}},6525:(e,t,n)=>{"use strict";const r=n(5158)("mssql:base"),{EventEmitter:i}=n(2361),{IDS:o,objectHasProperty:s}=n(3086),a=n(3475),{TransactionError:c,PreparedStatementError:u}=n(2547),l=n(2058),{TYPES:h,declare:d}=n(3128);e.exports=class extends i{constructor(e){super(),o.add(this,"PreparedStatement"),r("ps(%d): created",o.get(this)),this.parent=e||a.pool,this._handle=0,this.prepared=!1,this.parameters={}}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire(e,t){return this._acquiredConnection?this._activeRequest?(setImmediate(t,new c("Can't acquire connection for the request. There is another request in progress.","EREQINPROG")),this):(this._activeRequest=e,setImmediate(t,null,this._acquiredConnection,this._acquiredConfig),this):(setImmediate(t,new u("Statement is not prepared. Call prepare() first.","ENOTPREPARED")),this)}release(e){return e===this._acquiredConnection&&(this._activeRequest=null),this}input(e,t){if(/(--| |\/\*|\*\/|')/.test(e))throw new u(`SQL injection warning for param '${e}'`,"EINJECT");if(arguments.length<2)throw new u("Invalid number of arguments. 2 arguments expected.","EARGS");if(t instanceof Function&&(t=t()),s(this.parameters,e))throw new u(`The parameter name ${e} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[e]={name:e,type:t.type,io:1,length:t.length,scale:t.scale,precision:t.precision,tvpType:t.tvpType},this}replaceInput(e,t,n){return delete this.parameters[e],this.input(e,t,n)}output(e,t){if(/(--| |\/\*|\*\/|')/.test(e))throw new u(`SQL injection warning for param '${e}'`,"EINJECT");if(arguments.length<2)throw new u("Invalid number of arguments. 2 arguments expected.","EARGS");if(t instanceof Function&&(t=t()),s(this.parameters,e))throw new u(`The parameter name ${e} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[e]={name:e,type:t.type,io:2,length:t.length,scale:t.scale,precision:t.precision},this}replaceOutput(e,t){return delete this.parameters[e],this.output(e,t)}prepare(e,t){return"function"==typeof t?(this._prepare(e,t),this):new l.Promise(((t,n)=>{this._prepare(e,(e=>{if(e)return n(e);t(this)}))}))}_prepare(e,t){if(r("ps(%d): prepare",o.get(this)),"function"==typeof e&&(t=e,e=void 0),this.prepared)return setImmediate(t,new u("Statement is already prepared.","EALREADYPREPARED"));this.statement=e||this.statement,this.parent.acquire(this,((e,n,i)=>{if(e)return t(e);this._acquiredConnection=n,this._acquiredConfig=i;const a=new l.driver.Request(this);a.stream=!1,a.output("handle",h.Int),a.input("params",h.NVarChar,(()=>{const e=[];for(const t in this.parameters){if(!s(this.parameters,t))continue;const n=this.parameters[t];e.push(`@${t} ${d(n.type,n)}${2===n.io?" output":""}`)}return e})().join(",")),a.input("stmt",h.NVarChar,this.statement),a.execute("sp_prepare",((e,n)=>{if(e)return this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,t(e);r("ps(%d): prepared",o.get(this)),this._handle=n.output.handle,this.prepared=!0,t(null)}))}))}execute(e,t){return this.stream||"function"==typeof t?this._execute(e,t):new l.Promise(((t,n)=>{this._execute(e,((e,r)=>{if(e)return n(e);t(r)}))}))}_execute(e,t){const n=new l.driver.Request(this);n.stream=this.stream,n.arrayRowMode=this.arrayRowMode,n.input("handle",h.Int,this._handle);for(const t in this.parameters){if(!s(this.parameters,t))continue;const r=this.parameters[t];n.parameters[t]={name:t,type:r.type,io:r.io,value:e[t],length:r.length,scale:r.scale,precision:r.precision}}return n.execute("sp_execute",((e,n)=>{if(e)return t(e);t(null,n)})),n}unprepare(e){return"function"==typeof e?(this._unprepare(e),this):new l.Promise(((e,t)=>{this._unprepare((n=>{if(n)return t(n);e()}))}))}_unprepare(e){if(r("ps(%d): unprepare",o.get(this)),!this.prepared)return setImmediate(e,new u("Statement is not prepared. Call prepare() first.","ENOTPREPARED"));if(this._activeRequest)return setImmediate(e,new c("Can't unprepare the statement. There is a request in progress.","EREQINPROG"));const t=new l.driver.Request(this);t.stream=!1,t.input("handle",h.Int,this._handle),t.execute("sp_unprepare",(t=>t?e(t):(this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,this._handle=0,this.prepared=!1,r("ps(%d): unprepared",o.get(this)),e(null))))}}},5077:(e,t,n)=>{"use strict";const r=n(5158)("mssql:base"),{EventEmitter:i}=n(2361),{Readable:o}=n(2781),{IDS:s,objectHasProperty:a}=n(3086),c=n(3475),{RequestError:u,ConnectionError:l}=n(2547),{TYPES:h}=n(3128),d=n(2058);e.exports=class extends i{constructor(e){super(),s.add(this,"Request"),r("request(%d): created",s.get(this)),this.canceled=!1,this._paused=!1,this.parent=e||c.pool,this.parameters={},this.stream=null,this.arrayRowMode=null}get paused(){return this._paused}template(){const e=Array.prototype.slice.call(arguments),t=e.shift();return this._template(t,e)}_template(e,t,n){const r=[e[0]];for(let n=0;n<t.length;n++){const i=t[n];if(Array.isArray(i)){for(let e=0;e<i.length;e++)this.input(`param${n+1}_${e}`,i[e]),r.push(`@param${n+1}_${e}`),e<i.length-1&&r.push(", ");r.push(e[n+1])}else this.input(`param${n+1}`,i),r.push(`@param${n+1}`,e[n+1])}return n?this[n](r.join("")):r.join("")}input(e,t,n){if(/(--| |\/\*|\*\/|')/.test(e))throw new u(`SQL injection warning for param '${e}'`,"EINJECT");if(arguments.length<2)throw new u("Invalid number of arguments. At least 2 arguments expected.","EARGS");if(2===arguments.length&&(n=t,t=d.getTypeByValue(n)),!n||"function"!=typeof n.valueOf||n instanceof Date||(n=n.valueOf()),void 0===n&&(n=null),"number"==typeof n&&isNaN(n)&&(n=null),t instanceof Function&&(t=t()),a(this.parameters,e))throw new u(`The parameter name ${e} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[e]={name:e,type:t.type,io:1,value:n,length:t.length,scale:t.scale,precision:t.precision,tvpType:t.tvpType},this}replaceInput(e,t,n){return delete this.parameters[e],this.input(e,t,n)}output(e,t,n){if(t||(t=h.NVarChar),/(--| |\/\*|\*\/|')/.test(e))throw new u(`SQL injection warning for param '${e}'`,"EINJECT");if(t===h.Text||t===h.NText||t===h.Image)throw new u("Deprecated types (Text, NText, Image) are not supported as OUTPUT parameters.","EDEPRECATED");if(!n||"function"!=typeof n.valueOf||n instanceof Date||(n=n.valueOf()),void 0===n&&(n=null),"number"==typeof n&&isNaN(n)&&(n=null),t instanceof Function&&(t=t()),a(this.parameters,e))throw new u(`The parameter name ${e} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[e]={name:e,type:t.type,io:2,value:n,length:t.length,scale:t.scale,precision:t.precision},this}replaceOutput(e,t,n){return delete this.parameters[e],this.output(e,t,n)}batch(e,t){if(null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.rowsAffected=0,"function"==typeof t)return this._batch(e,((e,n,r,i)=>{if(this.stream&&(e&&this.emit("error",e),e=null,this.emit("done",{output:r,rowsAffected:i})),e)return t(e);t(null,{recordsets:n,recordset:n&&n[0],output:r,rowsAffected:i})})),this;if("object"==typeof e){const t=Array.prototype.slice.call(arguments),n=t.shift();e=this._template(n,t)}return new d.Promise(((t,n)=>{this._batch(e,((e,r,i,o)=>{if(this.stream&&(e&&this.emit("error",e),e=null,this.emit("done",{output:i,rowsAffected:o})),e)return n(e);t({recordsets:r,recordset:r&&r[0],output:i,rowsAffected:o})}))}))}_batch(e,t){return this.parent?this.parent.connected?(this.canceled=!1,void setImmediate(t)):setImmediate(t,new l("Connection is closed.","ECONNCLOSED")):setImmediate(t,new u("No connection is specified for that request.","ENOCONN"))}bulk(e,t,n){return"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.stream||"function"==typeof n?(this._bulk(e,t,((e,t)=>this.stream?(e&&this.emit("error",e),this.emit("done",{rowsAffected:t})):e?n(e):void n(null,{rowsAffected:t}))),this):new d.Promise(((n,r)=>{this._bulk(e,t,((e,t)=>{if(e)return r(e);n({rowsAffected:t})}))}))}_bulk(e,t,n){return this.parent?this.parent.connected?(this.canceled=!1,void setImmediate(n)):setImmediate(n,new l("Connection is closed.","ECONNCLOSED")):setImmediate(n,new u("No connection is specified for that request.","ENOCONN"))}toReadableStream(e={}){this.stream=!0,this.pause();const t=new o({...e,objectMode:!0,read:()=>{this.resume()}});return this.on("row",(e=>{t.push(e)||this.pause()})),this.on("error",(e=>{t.emit("error",e)})),this.on("done",(()=>{t.push(null)})),t}pipe(e){return this.toReadableStream().pipe(e)}query(e,t){if(null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.rowsAffected=0,"function"==typeof t)return this._query(e,((e,n,r,i,o)=>{if(this.stream&&(e&&this.emit("error",e),e=null,this.emit("done",{output:r,rowsAffected:i})),e)return t(e);const s={recordsets:n,recordset:n&&n[0],output:r,rowsAffected:i};this.arrayRowMode&&(s.columns=o),t(null,s)})),this;if("object"==typeof e){const t=Array.prototype.slice.call(arguments),n=t.shift();e=this._template(n,t)}return new d.Promise(((t,n)=>{this._query(e,((e,r,i,o,s)=>{if(this.stream&&(e&&this.emit("error",e),e=null,this.emit("done",{output:i,rowsAffected:o})),e)return n(e);const a={recordsets:r,recordset:r&&r[0],output:i,rowsAffected:o};this.arrayRowMode&&(a.columns=s),t(a)}))}))}_query(e,t){return this.parent?this.parent.connected?(this.canceled=!1,void setImmediate(t)):setImmediate(t,new l("Connection is closed.","ECONNCLOSED")):setImmediate(t,new u("No connection is specified for that request.","ENOCONN"))}execute(e,t){return null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.rowsAffected=0,"function"==typeof t?(this._execute(e,((e,n,r,i,o,s)=>{if(this.stream&&(e&&this.emit("error",e),e=null,this.emit("done",{output:r,rowsAffected:o,returnValue:i})),e)return t(e);const a={recordsets:n,recordset:n&&n[0],output:r,rowsAffected:o,returnValue:i};this.arrayRowMode&&(a.columns=s),t(null,a)})),this):new d.Promise(((t,n)=>{this._execute(e,((e,r,i,o,s,a)=>{if(this.stream&&(e&&this.emit("error",e),e=null,this.emit("done",{output:i,rowsAffected:s,returnValue:o})),e)return n(e);const c={recordsets:r,recordset:r&&r[0],output:i,rowsAffected:s,returnValue:o};this.arrayRowMode&&(c.columns=a),t(c)}))}))}_execute(e,t){return this.parent?this.parent.connected?(this.canceled=!1,void setImmediate(t)):setImmediate(t,new l("Connection is closed.","ECONNCLOSED")):setImmediate(t,new u("No connection is specified for that request.","ENOCONN"))}cancel(){return this._cancel(),!0}_cancel(){this.canceled=!0}pause(){return!!this.stream&&(this._pause(),!0)}_pause(){this._paused=!0}resume(){return!!this.stream&&(this._resume(),!0)}_resume(){this._paused=!1}_setCurrentRequest(e){return this._currentRequest=e,this._paused&&this.pause(),this}}},8841:(e,t,n)=>{"use strict";const r=n(5158)("mssql:base"),{EventEmitter:i}=n(2361),{IDS:o}=n(3086),s=n(3475),{TransactionError:a}=n(2547),c=n(2058),u=n(5404);class l extends i{constructor(e){super(),o.add(this,"Transaction"),r("transaction(%d): created",o.get(this)),this.parent=e||s.pool,this.isolationLevel=l.defaultIsolationLevel,this.name=""}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire(e,t){return this._acquiredConnection?this._activeRequest?(setImmediate(t,new a("Can't acquire connection for the request. There is another request in progress.","EREQINPROG")),this):(this._activeRequest=e,setImmediate(t,null,this._acquiredConnection,this._acquiredConfig),this):(setImmediate(t,new a("Transaction has not begun. Call begin() first.","ENOTBEGUN")),this)}release(e){return e===this._acquiredConnection&&(this._activeRequest=null),this}begin(e,t){return e instanceof Function&&(t=e,e=void 0),"function"==typeof t?(this._begin(e,(e=>{e||this.emit("begin"),t(e)})),this):new c.Promise(((t,n)=>{this._begin(e,(e=>{if(e)return n(e);this.emit("begin"),t(this)}))}))}_begin(e,t){if(this._acquiredConnection)return setImmediate(t,new a("Transaction has already begun.","EALREADYBEGUN"));if(this._aborted=!1,this._rollbackRequested=!1,e){if(!Object.keys(u).some((t=>u[t]===e)))throw new a("Invalid isolation level.");this.isolationLevel=e}setImmediate(t)}commit(e){return"function"==typeof e?(this._commit((t=>{t||this.emit("commit"),e(t)})),this):new c.Promise(((e,t)=>{this._commit((n=>{if(n)return t(n);this.emit("commit"),e()}))}))}_commit(e){return this._aborted?setImmediate(e,new a("Transaction has been aborted.","EABORT")):this._acquiredConnection?this._activeRequest?setImmediate(e,new a("Can't commit transaction. There is a request in progress.","EREQINPROG")):void setImmediate(e):setImmediate(e,new a("Transaction has not begun. Call begin() first.","ENOTBEGUN"))}request(){return new c.driver.Request(this)}rollback(e){return"function"==typeof e?(this._rollback((t=>{t||this.emit("rollback",this._aborted),e(t)})),this):new c.Promise(((e,t)=>this._rollback((n=>{if(n)return t(n);this.emit("rollback",this._aborted),e()}))))}_rollback(e){return this._aborted?setImmediate(e,new a("Transaction has been aborted.","EABORT")):this._acquiredConnection?this._activeRequest?setImmediate(e,new a("Can't rollback transaction. There is a request in progress.","EREQINPROG")):(this._rollbackRequested=!0,void setImmediate(e)):setImmediate(e,new a("Transaction has not begun. Call begin() first.","ENOTBEGUN"))}}l.defaultIsolationLevel=u.READ_COMMITTED,e.exports=l},3128:(e,t,n)=>{"use strict";const r=n(3086).objectHasProperty,i=Symbol.for("nodejs.util.inspect.custom"),o={VarChar:e=>({type:o.VarChar,length:e}),NVarChar:e=>({type:o.NVarChar,length:e}),Text:()=>({type:o.Text}),Int:()=>({type:o.Int}),BigInt:()=>({type:o.BigInt}),TinyInt:()=>({type:o.TinyInt}),SmallInt:()=>({type:o.SmallInt}),Bit:()=>({type:o.Bit}),Float:()=>({type:o.Float}),Numeric:(e,t)=>({type:o.Numeric,precision:e,scale:t}),Decimal:(e,t)=>({type:o.Decimal,precision:e,scale:t}),Real:()=>({type:o.Real}),Date:()=>({type:o.Date}),DateTime:()=>({type:o.DateTime}),DateTime2:e=>({type:o.DateTime2,scale:e}),DateTimeOffset:e=>({type:o.DateTimeOffset,scale:e}),SmallDateTime:()=>({type:o.SmallDateTime}),Time:e=>({type:o.Time,scale:e}),UniqueIdentifier:()=>({type:o.UniqueIdentifier}),SmallMoney:()=>({type:o.SmallMoney}),Money:()=>({type:o.Money}),Binary:e=>({type:o.Binary,length:e}),VarBinary:e=>({type:o.VarBinary,length:e}),Image:()=>({type:o.Image}),Xml:()=>({type:o.Xml}),Char:e=>({type:o.Char,length:e}),NChar:e=>({type:o.NChar,length:e}),NText:()=>({type:o.NText}),TVP:e=>({type:o.TVP,tvpType:e}),UDT:()=>({type:o.UDT}),Geography:()=>({type:o.Geography}),Geometry:()=>({type:o.Geometry}),Variant:()=>({type:o.Variant})};e.exports.TYPES=o,e.exports.DECLARATIONS={};const s=function(e,t){if(null==t&&(t=2),(e=String(e)).length<t)for(let n=1;n<=t-e.length;n++)e=`0${e}`;return e};for(const t in o)if(r(o,t)){const n=o[t];n.declaration=t.toLowerCase(),e.exports.DECLARATIONS[n.declaration]=n,((e,t)=>{t[i]=()=>`[sql.${e}]`})(t,n)}e.exports.declare=(e,t)=>{switch(e){case o.VarChar:case o.VarBinary:return`${e.declaration} (${t.length>8e3||null==t.length?"MAX":t.length})`;case o.NVarChar:return`${e.declaration} (${t.length>4e3||null==t.length?"MAX":t.length})`;case o.Char:case o.NChar:case o.Binary:return`${e.declaration} (${null==t.length?1:t.length})`;case o.Decimal:case o.Numeric:return`${e.declaration} (${null==t.precision?18:t.precision}, ${null==t.scale?0:t.scale})`;case o.Time:case o.DateTime2:case o.DateTimeOffset:return`${e.declaration} (${null==t.scale?7:t.scale})`;case o.TVP:return`${t.tvpType} readonly`;default:return e.declaration}},e.exports.cast=(e,t,n)=>{if(null==e)return null;switch(typeof e){case"string":return`N'${e.replace(/'/g,"''")}'`;case"number":return e;case"boolean":return e?1:0;case"object":if(e instanceof Date){let t=e.getUTCMilliseconds()/1e3;null!=e.nanosecondDelta&&(t+=e.nanosecondDelta);const r=null==n.scale?7:n.scale;return t=r>0?String(t).substr(1,r+1):"",`N'${e.getUTCFullYear()}-${s(e.getUTCMonth()+1)}-${s(e.getUTCDate())} ${s(e.getUTCHours())}:${s(e.getUTCMinutes())}:${s(e.getUTCSeconds())}${t}'`}return Buffer.isBuffer(e)?`0x${e.toString("hex")}`:null;default:return null}}},7691:(e,t,n)=>{"use strict";const r=n(850);e.exports=class extends r{constructor(e,t){super(e,t),this.name="ConnectionError"}}},2547:(e,t,n)=>{"use strict";const r=n(7691),i=n(850),o=n(6189),s=n(9689),a=n(8356);e.exports={ConnectionError:r,MSSQLError:i,PreparedStatementError:o,RequestError:s,TransactionError:a}},850:e=>{"use strict";class t extends Error{constructor(e,t){e instanceof Error?(super(e.message),this.code=e.code||t,Error.captureStackTrace(this,this.constructor),Object.defineProperty(this,"originalError",{enumerable:!0,value:e})):(super(e),this.code=t),this.name="MSSQLError"}}e.exports=t},6189:(e,t,n)=>{"use strict";const r=n(850);e.exports=class extends r{constructor(e,t){super(e,t),this.name="PreparedStatementError"}}},9689:(e,t,n)=>{"use strict";const r=n(850);e.exports=class extends r{constructor(e,t){super(e,t),e instanceof Error&&(e.info?(this.number=e.info.number||e.code,this.lineNumber=e.info.lineNumber,this.state=e.info.state||e.sqlstate,this.class=e.info.class,this.serverName=e.info.serverName,this.procName=e.info.procName):(this.number=e.code,this.lineNumber=e.lineNumber,this.state=e.sqlstate,this.class=e.severity,this.serverName=e.serverName,this.procName=e.procName)),this.name="RequestError";const n=/^\[Microsoft\]\[SQL Server Native Client 11\.0\](?:\[SQL Server\])?([\s\S]*)$/.exec(this.message);n&&(this.message=n[1])}}},8356:(e,t,n)=>{"use strict";const r=n(850);e.exports=class extends r{constructor(e,t){super(e,t),this.name="TransactionError"}}},3475:(e,t,n)=>{"use strict";const r=n(2058);let i=null;const o={};function s(e,t){if(!o[e])return i;const n=o[e].indexOf(t);return-1===n||(o[e].splice(n,1),0===o[e].length&&(o[e]=void 0),i&&i.removeListener(e,t)),i}e.exports={batch:function(){if("string"==typeof arguments[0])return(new r.driver.Request).batch(arguments[0],arguments[1]);const e=Array.prototype.slice.call(arguments),t=e.shift();return(new r.driver.Request)._template(t,e,"batch")},close:function(e){if(i){const t=i;return i=null,t.close(e)}return"function"==typeof e?(setImmediate(e),null):new r.Promise((e=>{e(i)}))},connect:function(e,t){if(!i){i=new r.driver.ConnectionPool(e);for(const e in o)for(let t=0,n=o[e].length;t<n;t++)i.on(e,o[e][t]);const t=i.close,n=function(e){for(const e in o)for(let t=0,n=o[e].length;t<n;t++)this.removeListener(e,o[e][t]);return this.on("error",(e=>{if(o.error)for(let t=0,n=o.error.length;t<n;t++)o.error[t].call(this,e)})),i=null,t.call(this,e)};i.close=n.bind(i)}return"function"==typeof t?i.connect(((e,n)=>{e&&(i=null),t(e,n)})):i.connect().catch((e=>(i=null,r.Promise.reject(e))))},off:s,on:function(e,t){return o[e]||(o[e]=[]),o[e].push(t),i&&i.on(e,t),i},query:function(){if("string"==typeof arguments[0])return(new r.driver.Request).query(arguments[0],arguments[1]);const e=Array.prototype.slice.call(arguments),t=e.shift();return(new r.driver.Request)._template(t,e,"query")},removeListener:s},Object.defineProperty(e.exports,"pool",{get:()=>i,set:()=>{}})},5404:e=>{"use strict";e.exports={READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5}},2058:(e,t,n)=>{"use strict";const r=n(3128).TYPES,i=n(5333);let o=Promise;const s=[];s.register=function(e,t){for(let t=0;t<this.length;t++)if(this[t].js===e){this.splice(t,1);break}return this.push({js:e,sql:t}),null},s.register(String,r.NVarChar),s.register(Number,r.Int),s.register(Boolean,r.Bit),s.register(Date,r.DateTime),s.register(Buffer,r.VarBinary),s.register(i,r.TVP),e.exports={driver:{},getTypeByValue:function(e){if(null==e)return r.NVarChar;switch(typeof e){case"string":for(const e of Array.from(s))if(e.js===String)return e.sql;return r.NVarChar;case"number":case"bigint":return e%1==0?e<-2147483648||e>2147483647?r.BigInt:r.Int:r.Float;case"boolean":for(const e of Array.from(s))if(e.js===Boolean)return e.sql;return r.Bit;case"object":for(const t of Array.from(s))if(e instanceof t.js)return t.sql;return r.NVarChar;default:return r.NVarChar}},map:s},Object.defineProperty(e.exports,"Promise",{get:()=>o,set:e=>{o=e}}),Object.defineProperty(e.exports,"valueHandler",{enumerable:!0,value:new Map,writable:!1,configurable:!1})},5333:(e,t,n)=>{"use strict";const r=n(3128).TYPES,i=n(3128).declare,o=n(3086).objectHasProperty;function s(e){if(e){const t=s.parseName(e);this.name=t.name,this.schema=t.schema,this.database=t.database,this.path=(this.database?`[${this.database}].`:"")+(this.schema?`[${this.schema}].`:"")+`[${this.name}]`,this.temporary="#"===this.name.charAt(0)}this.columns=[],this.rows=[],Object.defineProperty(this.columns,"add",{value(e,t,n){if(null==t)throw new Error("Column data type is not defined.");return t instanceof Function&&(t=t()),n=n||{},t.name=e,["nullable","primary","identity","readOnly","length"].forEach((e=>{o(n,e)&&(t[e]=n[e])})),this.push(t)}}),Object.defineProperty(this.rows,"add",{value(){return this.push(Array.prototype.slice.call(arguments))}}),Object.defineProperty(this.rows,"clear",{value(){return this.splice(0,this.length)}})}s.prototype._makeBulk=function(){for(let e=0;e<this.columns.length;e++){const t=this.columns[e];switch(t.type){case r.Date:case r.DateTime:case r.DateTime2:for(let t=0;t<this.rows.length;t++){const n=this.rows[t][e];if("string"==typeof n||"number"==typeof n){const r=new Date(n);if(isNaN(r.getDate()))throw new TypeError("Invalid date value passed to bulk rows");this.rows[t][e]=r}}break;case r.Xml:t.type=r.NVarChar(65535).type;break;case r.UDT:case r.Geography:case r.Geometry:t.type=r.VarBinary(65535).type}}return this},s.prototype.declare=function(){const e=this.columns.filter((e=>!0===e.primary)).map((e=>`[${e.name}]`)),t=this.columns.map((t=>{const n=[`[${t.name}] ${i(t.type,t)}`];return!0===t.nullable?n.push("null"):!1===t.nullable&&n.push("not null"),!0===t.primary&&1===e.length&&n.push("primary key"),n.join(" ")})),n=e.length>1?`, constraint [PK_${this.temporary?this.name.substr(1):this.name}] primary key (${e.join(", ")})`:"";return`create table ${this.path} (${t.join(", ")}${n})`},s.fromRecordset=function(e,t){const n=new this(t);for(const t in e.columns)if(o(e.columns,t)){const r=e.columns[t];n.columns.add(t,{type:r.type,length:r.length,scale:r.scale,precision:r.precision},{nullable:r.nullable,identity:r.identity,readOnly:r.readOnly})}if(1===n.columns.length&&"JSON_F52E2B61-18A1-11d1-B105-00805F49916B"===n.columns[0].name)for(let t=0;t<e.length;t++)n.rows.add(JSON.stringify(e[t]));else for(let t=0;t<e.length;t++)n.rows.add.apply(n.rows,n.columns.map((n=>e[t][n.name])));return n},s.parseName=function(e){const t=e.length;let n=-1,r="",i=!1;const o=[];for(;++n<t;){const t=e.charAt(n);if("["===t)i?r+=t:i=!0;else if("]"===t){if(!i)throw new Error("Invalid table name.");i=!1}else"."===t?i?r+=t:(o.push(r),r=""):r+=t}switch(r&&o.push(r),o.length){case 1:return{name:o[0],schema:null,database:null};case 2:return{name:o[1],schema:o[0],database:null};case 3:return{name:o[2],schema:o[1],database:o[0]};default:throw new Error("Invalid table name.")}},e.exports=s},8270:(e,t,n)=>{"use strict";const r=n(5836),i=n(5158)("mssql:tedi"),o=n(9472),{IDS:s}=n(3086),a=n(2058),c=n(7691);e.exports=class extends o{_config(){const e={server:this.config.server,options:Object.assign({encrypt:"boolean"!=typeof this.config.encrypt||this.config.encrypt,trustServerCertificate:"boolean"==typeof this.config.trustServerCertificate&&this.config.trustServerCertificate},this.config.options),authentication:Object.assign({type:void 0!==this.config.domain?"ntlm":void 0!==this.config.authentication_type?this.config.authentication_type:"default",options:Object.entries({userName:this.config.user,password:this.config.password,domain:this.config.domain,clientId:this.config.clientId,clientSecret:this.config.clientSecret,tenantId:this.config.tenantId,token:this.config.token,msiEndpoint:this.config.msiEndpoint,msiSecret:this.config.msiSecret}).reduce(((e,[t,n])=>void 0!==n?{...e,[t]:n}:e),{})},this.config.authentication)};return e.options.database=e.options.database||this.config.database,e.options.port=e.options.port||this.config.port,e.options.connectTimeout=e.options.connectTimeout??this.config.connectionTimeout??this.config.timeout??15e3,e.options.requestTimeout=e.options.requestTimeout??this.config.requestTimeout??this.config.timeout??15e3,e.options.tdsVersion=e.options.tdsVersion||"7_4",e.options.rowCollectionOnDone=e.options.rowCollectionOnDone||!1,e.options.rowCollectionOnRequestCompletion=e.options.rowCollectionOnRequestCompletion||!1,e.options.useColumnNames=e.options.useColumnNames||!1,e.options.appName=e.options.appName||"node-mssql",e.options.instanceName&&delete e.options.port,isNaN(e.options.requestTimeout)&&(e.options.requestTimeout=15e3),(e.options.requestTimeout===1/0||e.options.requestTimeout<0)&&(e.options.requestTimeout=0),!e.options.debug&&this.config.debug&&(e.options.debug={packet:!0,token:!0,data:!0,payload:!0}),e}_poolCreate(){return new a.Promise(((e,t)=>{const n=n=>{t(n),e=t=()=>{}};let o;try{o=new r.Connection(this._config())}catch(e){return void n(e)}o.connect((r=>{if(r)return r=new c(r),n(r);i("connection(%d): established",s.get(o)),this.collation=o.databaseCollation,e(o),e=t=()=>{}})),s.add(o,"Connection"),i("pool(%d): connection #%d created",s.get(this),s.get(o)),i("connection(%d): establishing",s.get(o)),o.on("end",(()=>{const e=new c("The connection ended without ever completing the connection");n(e)})),o.on("error",(e=>{"ESOCKET"===e.code?o.hasError=!0:this.emit("error",e),n(e)})),this.config.debug&&o.on("debug",this.emit.bind(this,"debug",o)),"function"==typeof this.config.beforeConnect&&this.config.beforeConnect(o)}))}_poolValidate(e){return!(!e||e.closed||e.hasError)&&(!this.config.validateConnection||new a.Promise((t=>{const n=new r.Request("SELECT 1;",(e=>{t(!e)}));e.execSql(n)})))}_poolDestroy(e){return new a.Promise(((t,n)=>{e?(i("connection(%d): destroying",s.get(e)),e.closed?(i("connection(%d): already closed",s.get(e)),t()):(e.once("end",(()=>{i("connection(%d): destroyed",s.get(e)),t()})),e.close())):t()}))}}},8925:(e,t,n)=>{"use strict";const r=n(4526),i=n(8270),o=n(6150),s=n(7172);e.exports=Object.assign({ConnectionPool:i,Transaction:o,Request:s,PreparedStatement:r.PreparedStatement},r.exports),Object.defineProperty(e.exports,"Promise",{enumerable:!0,get:()=>r.Promise,set:e=>{r.Promise=e}}),Object.defineProperty(e.exports,"valueHandler",{enumerable:!0,value:r.valueHandler,writable:!1,configurable:!1}),r.driver.name="tedious",r.driver.ConnectionPool=i,r.driver.Transaction=o,r.driver.Request=s},7172:(e,t,n)=>{"use strict";const r=n(5836),i=n(5158)("mssql:tedi"),o=n(5077),s=n(9689),{IDS:a,objectHasProperty:c}=n(3086),{TYPES:u,DECLARATIONS:l,declare:h,cast:d}=n(3128),f=n(5333),{PARSERS:p}=n(2213),{valueHandler:m}=n(2058),g="JSON_F52E2B61-18A1-11d1-B105-00805F49916B",y="XML_F52E2B61-18A1-11d1-B105-00805F49916B",_=function(e){switch(e){case u.VarChar:return r.TYPES.VarChar;case u.NVarChar:return r.TYPES.NVarChar;case u.Text:return r.TYPES.Text;case u.Int:return r.TYPES.Int;case u.BigInt:return r.TYPES.BigInt;case u.TinyInt:return r.TYPES.TinyInt;case u.SmallInt:return r.TYPES.SmallInt;case u.Bit:return r.TYPES.Bit;case u.Float:return r.TYPES.Float;case u.Decimal:return r.TYPES.Decimal;case u.Numeric:return r.TYPES.Numeric;case u.Real:return r.TYPES.Real;case u.Money:return r.TYPES.Money;case u.SmallMoney:return r.TYPES.SmallMoney;case u.Time:return r.TYPES.Time;case u.Date:return r.TYPES.Date;case u.DateTime:return r.TYPES.DateTime;case u.DateTime2:return r.TYPES.DateTime2;case u.DateTimeOffset:return r.TYPES.DateTimeOffset;case u.SmallDateTime:return r.TYPES.SmallDateTime;case u.UniqueIdentifier:return r.TYPES.UniqueIdentifier;case u.Xml:return r.TYPES.NVarChar;case u.Char:return r.TYPES.Char;case u.NChar:return r.TYPES.NChar;case u.NText:return r.TYPES.NVarChar;case u.Image:return r.TYPES.Image;case u.Binary:return r.TYPES.Binary;case u.VarBinary:return r.TYPES.VarBinary;case u.UDT:case u.Geography:case u.Geometry:return r.TYPES.UDT;case u.TVP:return r.TYPES.TVP;case u.Variant:return r.TYPES.Variant;default:return e}},v=function(e,t){if("object"==typeof e)switch(e){case r.TYPES.Char:return u.Char;case r.TYPES.NChar:return u.NChar;case r.TYPES.VarChar:return u.VarChar;case r.TYPES.NVarChar:return u.NVarChar;case r.TYPES.Text:return u.Text;case r.TYPES.NText:return u.NText;case r.TYPES.Int:return u.Int;case r.TYPES.BigInt:return u.BigInt;case r.TYPES.TinyInt:return u.TinyInt;case r.TYPES.SmallInt:return u.SmallInt;case r.TYPES.Bit:return u.Bit;case r.TYPES.Float:return u.Float;case r.TYPES.Real:return u.Real;case r.TYPES.Money:return u.Money;case r.TYPES.SmallMoney:return u.SmallMoney;case r.TYPES.Numeric:return u.Numeric;case r.TYPES.Decimal:return u.Decimal;case r.TYPES.DateTime:return u.DateTime;case r.TYPES.Time:return u.Time;case r.TYPES.Date:return u.Date;case r.TYPES.DateTime2:return u.DateTime2;case r.TYPES.DateTimeOffset:return u.DateTimeOffset;case r.TYPES.SmallDateTime:return u.SmallDateTime;case r.TYPES.UniqueIdentifier:return u.UniqueIdentifier;case r.TYPES.Image:return u.Image;case r.TYPES.Binary:return u.Binary;case r.TYPES.VarBinary:return u.VarBinary;case r.TYPES.Xml:return u.Xml;case r.TYPES.UDT:return u.UDT;case r.TYPES.TVP:return u.TVP;case r.TYPES.Variant:return u.Variant;default:switch(e.id){case 104:return u.Bit;case 108:return u.Numeric;case 106:return u.Decimal;case 38:return 8===t?u.BigInt:4===t?u.Int:2===t?u.SmallInt:u.TinyInt;case 109:return 8===t?u.Float:u.Real;case 110:return 8===t?u.Money:u.SmallMoney;case 111:return 8===t?u.DateTime:u.SmallDateTime}}},E=function(e,t){let n={};t&&(n=[]);for(let r=0,i=e.length;r<i;r++){const i=e[r],o={index:r,name:i.colName,length:i.dataLength,type:v(i.type,i.dataLength),scale:i.scale,precision:i.precision,nullable:!!(1&i.flags),caseSensitive:!!(2&i.flags),identity:!!(16&i.flags),readOnly:!(12&i.flags)};i.udtInfo&&(o.udt={name:i.udtInfo.typeName,database:i.udtInfo.dbname,schema:i.udtInfo.owningSchema,assembly:i.udtInfo.assemblyName},l[i.udtInfo.typeName]&&(o.type=l[i.udtInfo.typeName])),t?n.push(o):n[i.colName]=o}return n},w=function(e,t){const n=v(t.type);return m.has(n)?m.get(n)(e):t.type===r.TYPES.UDT&&null!=e&&p[t.udtInfo.typeName]?p[t.udtInfo.typeName](e):e},b=function(e){if(e instanceof f){const t={name:e.name,schema:e.schema,columns:[],rows:e.rows};for(const n of e.columns)t.columns.push({name:n.name,type:_(n.type),length:n.length,scale:n.scale,precision:n.precision});return t}return e};e.exports=class extends o{_batch(e,t){this._isBatch=!0,this._query(e,t)}_bulk(e,t,n){super._bulk(e,t,(o=>{if(o)return n(o);try{e._makeBulk()}catch(e){return n(new s(e,"EREQUEST"))}if(!e.name)return n(new s("Table name must be specified for bulk insert.","ENAME"));if("@"===e.name.charAt(0))return n(new s("You can't use table variables for bulk insert.","ENAME"));const c=[],u={};let l=!1;const h=(e,t,r)=>{let i=new Error(r.message);if(i.info=r,i=new s(i,"EREQUEST"),this.stream)this.emit("error",i);else if(e&&!l){if(t){for(const e in u)t.removeListener(e,u[e]);this.parent.release(t)}l=!0,n(i)}c.push(i)},d=e=>{this.emit("info",{message:e.message,number:e.number,state:e.state,class:e.class,lineNumber:e.lineNumber,serverName:e.serverName,procName:e.procName})};this.parent.acquire(this,((o,f)=>{const p=(e,...t)=>{try{this.parent.release(f)}catch(e){}n(e,...t)};if(o)return p(o);if(i("connection(%d): borrowed to request #%d",a.get(f),a.get(this)),this.canceled)return i("request(%d): canceled",a.get(this)),p(new s("Canceled.","ECANCEL"));this._cancel=()=>{i("request(%d): cancel",a.get(this)),f.cancel()},f.on("infoMessage",u.infoMessage=d),f.on("errorMessage",u.errorMessage=h.bind(null,!1,f)),f.on("error",u.error=h.bind(null,!0,f));const m=(e,t)=>{let n;if(e&&(!c.length||c.length&&e.message!==c[c.length-1].message)&&(e=new s(e,"EREQUEST"),this.stream&&this.emit("error",e),c.push(e)),delete this._cancel,c.length&&!this.stream&&(n=c.pop(),n.precedingErrors=c),!l){for(const e in u)f.removeListener(e,u[e]);l=!0,this.stream?p(null,t):p(n,t)}},g=f.newBulkLoad(e.path,t,m);for(const t of e.columns)g.addColumn(t.name,_(t.type),{nullable:t.nullable,length:t.length,scale:t.scale,precision:t.precision});if(e.create){const t=e.temporary?`tempdb..[${e.name}]`:e.path,n=new r.Request(`if object_id('${t.replace(/'/g,"''")}') is null ${e.declare()}`,(t=>{if(t)return m(t);f.execBulkLoad(g,e.rows)}));this._setCurrentRequest(n),f.execSqlBatch(n)}else f.execBulkLoad(g,e.rows)}))}))}_query(e,t){super._query(e,(n=>{if(n)return t(n);const o=[],u=[],l=[],p={},m={},v=[];let T={},S=[],A=null,O=!1,C=!1,I=null,R=!1;const N=(e,n,r)=>{let i=new Error(r.message);if(i.info=r,i=new s(i,"EREQUEST"),this.stream)this.emit("error",i);else if(e&&!R){if(n){for(const e in p)n.removeListener(e,p[e]);this.parent.release(n)}R=!0,t(i)}l.push(i)},P=e=>{this.emit("info",{message:e.message,number:e.number,state:e.state,class:e.class,lineNumber:e.lineNumber,serverName:e.serverName,procName:e.procName})};this.parent.acquire(this,((n,D,k)=>{if(n)return t(n);let M;if(i("connection(%d): borrowed to request #%d",a.get(D),a.get(this)),this.canceled)return i("request(%d): canceled",a.get(this)),this.parent.release(D),t(new s("Canceled.","ECANCEL"));this._cancel=()=>{i("request(%d): cancel",a.get(this)),D.cancel()},D.on("infoMessage",p.infoMessage=P),D.on("errorMessage",p.errorMessage=N.bind(null,!1,D)),D.on("error",p.error=N.bind(null,!0,D)),i("request(%d): query",a.get(this),e);const L=new r.Request(e,(e=>{if((e?.errors?e.errors:[e]).forEach(((e,t,{length:n})=>{e&&(!l.length||l.length&&l.length>=n&&e.message!==l[l.length-n+t].message)&&(e=new s(e,"EREQUEST"),this.stream&&this.emit("error",e),l.push(e))})),O){this.stream||(A=o.pop()[0]);for(const e in A){const t=A[e];"___return___"!==e&&(m[e]=t)}}let n;if(delete this._cancel,l.length&&!this.stream&&(n=l.pop(),n.precedingErrors=l),!R){for(const e in p)D.removeListener(e,p[e]);this.parent.release(D),R=!0,n?i("request(%d): failed",a.get(this),n):i("request(%d): completed",a.get(this)),this.stream?t(null,null,m,v,u):t(n,o,m,v,u)}}));this._setCurrentRequest(L),L.on("columnMetadata",(e=>{T=E(e,this.arrayRowMode),C=!1,1!==e.length||e[0].colName!==g&&e[0].colName!==y||(C=!0,I=[]),this.stream&&(this._isBatch&&T.___return___||this.emit("recordset",T)),this.arrayRowMode&&u.push(T)}));const x=(e,t)=>{if(null!=e&&(v.push(e),this.stream&&this.emit("rowsaffected",e)),0!==Object.keys(T).length){if(C){const e=I.join("");if(T[g]&&!0===k.parseJSON)try{M=""===e?null:JSON.parse(e)}catch(e){M=null;const t=new s(new Error(`Failed to parse incoming JSON. ${e.message}`),"EJSON");this.stream&&this.emit("error",t),l.push(t)}else M={},M[Object.keys(T)[0]]=e;I=null,this.stream?this.emit("row",M):S.push(M)}this.stream||(Object.defineProperty(S,"columns",{enumerable:!1,configurable:!0,value:T}),Object.defineProperty(S,"toTable",{enumerable:!1,configurable:!0,value(e){return f.fromRecordset(this,e)}}),o.push(S)),S=[],T={}}};if(L.on("doneInProc",x),L.on("done",x),L.on("returnValue",((e,t,n)=>{m[e]=t})),L.on("row",(e=>{if(S||(S=[]),C)return I.push(e[0].value);M=this.arrayRowMode?[]:{};for(const t of e)if(t.value=w(t.value,t.metadata),this.arrayRowMode)M.push(t.value);else{const e=M[t.metadata.colName];void 0!==e?e instanceof Array?e.push(t.value):M[t.metadata.colName]=[e,t.value]:M[t.metadata.colName]=t.value}this.stream?this._isBatch&&M.___return___?A=M:this.emit("row",M):S.push(M)})),this._isBatch){if(Object.keys(this.parameters).length){for(const e in this.parameters){if(!c(this.parameters,e))continue;const n=this.parameters[e];try{n.value=_(n.type).validate(n.value,this.parent.collation)}catch(n){n.message=`Validation failed for parameter '${e}'. ${n.message}`;const r=new s(n,"EPARAM");return this.parent.release(D),t(r)}}const e=[];for(const t in this.parameters){if(!c(this.parameters,t))continue;const n=this.parameters[t];e.push(`@${t} ${h(n.type,n)}`)}const n=[];for(const e in this.parameters){if(!c(this.parameters,e))continue;const t=this.parameters[e];n.push(`@${e} = ${d(t.value,t.type,t)}`)}const r=[];for(const e in this.parameters)c(this.parameters,e)&&2===this.parameters[e].io&&r.push(`@${e} as [${e}]`);O=r.length>0,L.sqlTextOrProcedure=`declare ${e.join(", ")};select ${n.join(", ")};${L.sqlTextOrProcedure};${O?`select 1 as [___return___], ${r.join(", ")}`:""}`}}else for(const e in this.parameters){if(!c(this.parameters,e))continue;const t=this.parameters[e];1===t.io?L.addParameter(t.name,_(t.type),b(t.value),{length:t.length,scale:t.scale,precision:t.precision}):L.addOutputParameter(t.name,_(t.type),b(t.value),{length:t.length,scale:t.scale,precision:t.precision})}try{D[this._isBatch?"execSqlBatch":"execSql"](L)}catch(e){N(!0,D,e)}}))}))}_execute(e,t){super._execute(e,(n=>{if(n)return t(n);const o=[],u=[],l=[],h={},d={},p=[];let m={},v=[],T=0,S=!1,A=null,O=!1;const C=(e,n,r)=>{let i=new Error(r.message);if(i.info=r,i=new s(i,"EREQUEST"),this.stream)this.emit("error",i);else if(e&&!O){if(n){for(const e in h)n.removeListener(e,h[e]);this.parent.release(n)}O=!0,t(i)}l.push(i)},I=e=>{this.emit("info",{message:e.message,number:e.number,state:e.state,class:e.class,lineNumber:e.lineNumber,serverName:e.serverName,procName:e.procName})};this.parent.acquire(this,((n,R,N)=>{if(n)return t(n);let P;if(i("connection(%d): borrowed to request #%d",a.get(R),a.get(this)),this.canceled)return i("request(%d): canceled",a.get(this)),this.parent.release(R),t(new s("Canceled.","ECANCEL"));if(this._cancel=()=>{i("request(%d): cancel",a.get(this)),R.cancel()},R.on("infoMessage",h.infoMessage=I),R.on("errorMessage",h.errorMessage=C.bind(null,!1,R)),R.on("error",h.error=C.bind(null,!0,R)),i.enabled){const t=Object.keys(this.parameters).map((e=>this.parameters[e])),n=e=>"string"==typeof e&&e.length>50?e.substring(0,47)+"...":e,r=e=>e.name+" [sql."+e.type.name+"]",o={};t.forEach((e=>{o[r(e)]=n(e.value)})),i("request(%d): execute %s %O",a.get(this),e,o)}const D=new r.Request(e,(e=>{let n;if(e&&(!l.length||l.length&&e.message!==l[l.length-1].message)&&(e=new s(e,"EREQUEST"),this.stream&&this.emit("error",e),l.push(e)),delete this._cancel,l.length&&!this.stream&&(n=l.pop(),n.precedingErrors=l),!O){for(const e in h)R.removeListener(e,h[e]);this.parent.release(R),O=!0,n?i("request(%d): failed",a.get(this),n):i("request(%d): complete",a.get(this)),this.stream?t(null,null,d,T,p,u):t(n,o,d,T,p,u)}}));this._setCurrentRequest(D),D.on("columnMetadata",(e=>{m=E(e,this.arrayRowMode),S=!1,1!==e.length||e[0].colName!==g&&e[0].colName!==y||(S=!0,A=[]),this.stream&&this.emit("recordset",m),this.arrayRowMode&&u.push(m)})),D.on("row",(e=>{if(v||(v=[]),S)return A.push(e[0].value);P=this.arrayRowMode?[]:{};for(const t of e)if(t.value=w(t.value,t.metadata),this.arrayRowMode)P.push(t.value);else{const e=P[t.metadata.colName];null!=e?e instanceof Array?e.push(t.value):P[t.metadata.colName]=[e,t.value]:P[t.metadata.colName]=t.value}this.stream?this.emit("row",P):v.push(P)})),D.on("doneInProc",((e,t)=>{if(null!=e&&(p.push(e),this.stream&&this.emit("rowsaffected",e)),0!==Object.keys(m).length){if(S){if(m[g]&&!0===N.parseJSON)try{P=0===A.length?null:JSON.parse(A.join(""))}catch(e){P=null;const t=new s(new Error(`Failed to parse incoming JSON. ${e.message}`),"EJSON");this.stream&&this.emit("error",t),l.push(t)}else P={},P[Object.keys(m)[0]]=A.join("");A=null,this.stream?this.emit("row",P):v.push(P)}this.stream||(Object.defineProperty(v,"columns",{enumerable:!1,configurable:!0,value:m}),Object.defineProperty(v,"toTable",{enumerable:!1,configurable:!0,value(e){return f.fromRecordset(this,e)}}),o.push(v)),v=[],m={}}})),D.on("doneProc",((e,t,n)=>{T=n})),D.on("returnValue",((e,t,n)=>{d[e]=t}));for(const e in this.parameters){if(!c(this.parameters,e))continue;const t=this.parameters[e];1===t.io?D.addParameter(t.name,_(t.type),b(t.value),{length:t.length,scale:t.scale,precision:t.precision}):D.addOutputParameter(t.name,_(t.type),b(t.value),{length:t.length,scale:t.scale,precision:t.precision})}R.callProcedure(D)}))}))}_pause(){super._pause(),this._currentRequest&&this._currentRequest.pause()}_resume(){super._resume(),this._currentRequest&&this._currentRequest.resume()}}},6150:(e,t,n)=>{"use strict";const r=n(5158)("mssql:tedi"),i=n(8841),{IDS:o}=n(3086),s=n(8356);e.exports=class extends i{constructor(e){super(e),this._abort=()=>{if(!this._rollbackRequested){const e=this._acquiredConnection;setImmediate(this.parent.release.bind(this.parent),e),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this._acquiredConnection=null,this._acquiredConfig=null,this._aborted=!0,this.emit("rollback",!0)}}}_begin(e,t){super._begin(e,(e=>{if(e)return t(e);r("transaction(%d): begin",o.get(this)),this.parent.acquire(this,((e,n,i)=>{if(e)return t(e);this._acquiredConnection=n,this._acquiredConnection.on("rollbackTransaction",this._abort),this._acquiredConfig=i,n.beginTransaction((e=>{e&&(e=new s(e)),r("transaction(%d): begun",o.get(this)),t(e)}),this.name,this.isolationLevel)}))}))}_commit(e){super._commit((t=>{if(t)return e(t);r("transaction(%d): commit",o.get(this)),this._acquiredConnection.commitTransaction((t=>{t&&(t=new s(t)),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,t||r("transaction(%d): commited",o.get(this)),e(t)}))}))}_rollback(e){super._rollback((t=>{if(t)return e(t);r("transaction(%d): rollback",o.get(this)),this._acquiredConnection.rollbackTransaction((t=>{t&&(t=new s(t)),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,t||r("transaction(%d): rolled back",o.get(this)),e(t)}))}))}}},2213:e=>{"use strict";class t{constructor(){this.x=0,this.y=0,this.z=null,this.m=null}}const n=(e,n)=>{const r=e.readInt32LE(0);if(-1===r)return null;const i={srid:r,version:e.readUInt8(4)},o=e.readUInt8(5);e.position=6;const s={Z:(1&o)>0,M:(2&o)>0,V:(4&o)>0,P:(8&o)>0,L:(16&o)>0};let a,c,u;if(2===i.version&&(s.H=(8&o)>0),s.P?a=1:s.L?a=2:(a=e.readUInt32LE(e.position),e.position+=4),i.points=((e,n,r)=>{const i=[];if(n<1)return i;if(r)for(let r=1;r<=n;r++){const n=new t;i.push(n),n.x=e.readDoubleLE(e.position),n.y=e.readDoubleLE(e.position+8),e.position+=16}else for(let r=1;r<=n;r++){const n=new t;i.push(n),n.lat=e.readDoubleLE(e.position),n.lng=e.readDoubleLE(e.position+8),n.x=n.lat,n.y=n.lng,e.position+=16}return i})(e,a,n),s.Z&&((e,t)=>{t<1||t.forEach((t=>{t.z=e.readDoubleLE(e.position),e.position+=8}))})(e,i.points),s.M&&((e,t)=>{t<1||t.forEach((t=>{t.m=e.readDoubleLE(e.position),e.position+=8}))})(e,i.points),s.P||s.L?c=1:(c=e.readUInt32LE(e.position),e.position+=4),i.figures=((e,t,n)=>{const r=[];if(t<1)return r;if(n.P)r.push({attribute:1,pointOffset:0});else if(n.L)r.push({attribute:1,pointOffset:0});else for(let n=1;n<=t;n++)r.push({attribute:e.readUInt8(e.position),pointOffset:e.readInt32LE(e.position+1)}),e.position+=5;return r})(e,c,s),s.P||s.L?u=1:(u=e.readUInt32LE(e.position),e.position+=4),i.shapes=((e,t,n)=>{const r=[];if(t<1)return r;if(n.P)r.push({parentOffset:-1,figureOffset:0,type:1});else if(n.L)r.push({parentOffset:-1,figureOffset:0,type:2});else for(let n=1;n<=t;n++)r.push({parentOffset:e.readInt32LE(e.position),figureOffset:e.readInt32LE(e.position+4),type:e.readUInt8(e.position+8)}),e.position+=9;return r})(e,u,s),2===i.version&&e.position<e.length){const t=e.readUInt32LE(e.position);e.position+=4,i.segments=((e,t)=>{const n=[];if(t<1)return n;for(let r=1;r<=t;r++)n.push({type:e.readUInt8(e.position)}),e.position++;return n})(e,t)}else i.segments=[];return i};e.exports.PARSERS={geography:e=>n(e,!1),geometry:e=>n(e,!0)}},3086:e=>{const t=new WeakMap,n={Connection:1,ConnectionPool:1,Request:1,Transaction:1,PreparedStatement:1};e.exports={objectHasProperty:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),INCREMENT:n,IDS:{get:t.get.bind(t),add:(e,r,i)=>{if(i)return t.set(e,i);t.set(e,n[r]++)}}}},9533:(e,t,n)=>{"use strict";const r=n(2781).Duplex,i=Symbol("Callback"),o=Symbol("Other");class s extends r{constructor(e){super(e),this[i]=null,this[o]=null}_read(){const e=this[i];e&&(this[i]=null,e())}_write(e,t,n){this[o][i]=n,this[o].push(e)}_final(e){this[o].on("end",e),this[o].push(null)}}e.exports=class{constructor(e){this.socket1=new s(e),this.socket2=new s(e),this.socket1[o]=this.socket2,this.socket2[o]=this.socket1}}},3357:(e,t,n)=>{const{EventEmitter:r}=n(2361);class i{constructor(){this.eventEmitter=new r,this.onabort=null,this.aborted=!1,this.reason=void 0}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(e,t){this.eventEmitter.removeListener(e,t)}addEventListener(e,t){this.eventEmitter.on(e,t)}dispatchEvent(e){const t={type:e,target:this},n=`on${e}`;"function"==typeof this[n]&&this[n](t),this.eventEmitter.emit(e,t)}throwIfAborted(){if(this.aborted)throw this.reason}static abort(e){const t=new o;return t.abort(),t.signal}static timeout(e){const t=new o;return setTimeout((()=>t.abort(new Error("TimeoutError"))),e),t.signal}}class o{constructor(){this.signal=new i}abort(e){this.signal.aborted||(this.signal.aborted=!0,this.signal.reason=e||new Error("AbortError"),this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}}e.exports={AbortController:o,AbortSignal:i}},631:(e,t,n)=>{var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,s=r&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&c&&"function"==typeof c.get?c.get:null,l=a&&Set.prototype.forEach,h="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,_=String.prototype.slice,v=String.prototype.replace,E=String.prototype.toUpperCase,w=String.prototype.toLowerCase,b=RegExp.prototype.test,T=Array.prototype.concat,S=Array.prototype.join,A=Array.prototype.slice,O=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,N="function"==typeof Symbol&&"object"==typeof Symbol.iterator,P="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,D=Object.prototype.propertyIsEnumerable,k=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function M(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||b.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-O(-e):O(e);if(r!==e){var i=String(r),o=_.call(t,i.length+1);return v.call(i,n,"$&_")+"."+v.call(v.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(t,n,"$&_")}var L=n(2794),x=L.custom,U=H(x)?x:null;function F(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function B(e){return v.call(String(e),/"/g,"&quot;")}function q(e){return!("[object Array]"!==$(e)||P&&"object"==typeof e&&P in e)}function j(e){return!("[object RegExp]"!==$(e)||P&&"object"==typeof e&&P in e)}function H(e){if(N)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,i){var a=n||{};if(V(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!V(a,"customInspect")||a.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var m=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return G(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var E=String(t);return m?M(t,E):E}if("bigint"==typeof t){var b=String(t)+"n";return m?M(t,b):b}var O=void 0===a.depth?5:a.depth;if(void 0===r&&(r=0),r>=O&&O>0&&"object"==typeof t)return q(t)?"[Array]":"[Object]";var I,x=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=S.call(Array(e.indent+1)," ")}return{base:n,prev:S.call(Array(t+1),n)}}(a,r);if(void 0===i)i=[];else if(z(i,t)>=0)return"[Circular]";function Y(t,n,o){if(n&&(i=A.call(i)).push(n),o){var s={depth:a.depth};return V(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,r+1,i)}return e(t,a,r+1,i)}if("function"==typeof t&&!j(t)){var W=function(e){if(e.name)return e.name;var t=y.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=J(t,Y);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(ee.length>0?" { "+S.call(ee,", ")+" }":"")}if(H(t)){var te=N?v.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!=typeof t||N?te:K(te)}if((I=t)&&"object"==typeof I&&("undefined"!=typeof HTMLElement&&I instanceof HTMLElement||"string"==typeof I.nodeName&&"function"==typeof I.getAttribute)){for(var ne="<"+w.call(String(t.nodeName)),re=t.attributes||[],ie=0;ie<re.length;ie++)ne+=" "+re[ie].name+"="+F(B(re[ie].value),"double",a);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+"</"+w.call(String(t.nodeName))+">"}if(q(t)){if(0===t.length)return"[]";var oe=J(t,Y);return x&&!function(e){for(var t=0;t<e.length;t++)if(z(e[t],"\n")>=0)return!1;return!0}(oe)?"["+Z(oe,x)+"]":"[ "+S.call(oe,", ")+" ]"}if(function(e){return!("[object Error]"!==$(e)||P&&"object"==typeof e&&P in e)}(t)){var se=J(t,Y);return"cause"in Error.prototype||!("cause"in t)||D.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(se,", ")+" }":"{ ["+String(t)+"] "+S.call(T.call("[cause]: "+Y(t.cause),se),", ")+" }"}if("object"==typeof t&&c){if(U&&"function"==typeof t[U]&&L)return L(t,{depth:O-r});if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return s&&s.call(t,(function(e,n){ae.push(Y(n,t,!0)+" => "+Y(e,t))})),X("Map",o.call(t),ae,x)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ce=[];return l&&l.call(t,(function(e){ce.push(Y(e,t))})),X("Set",u.call(t),ce,x)}if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Q("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Q("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return Q("WeakRef");if(function(e){return!("[object Number]"!==$(e)||P&&"object"==typeof e&&P in e)}(t))return K(Y(Number(t)));if(function(e){if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}(t))return K(Y(C.call(t)));if(function(e){return!("[object Boolean]"!==$(e)||P&&"object"==typeof e&&P in e)}(t))return K(p.call(t));if(function(e){return!("[object String]"!==$(e)||P&&"object"==typeof e&&P in e)}(t))return K(Y(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if(t===global)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==$(e)||P&&"object"==typeof e&&P in e)}(t)&&!j(t)){var ue=J(t,Y),le=k?k(t)===Object.prototype:t instanceof Object||t.constructor===Object,he=t instanceof Object?"":"null prototype",de=!le&&P&&Object(t)===t&&P in t?_.call($(t),8,-1):he?"Object":"",fe=(le||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||he?"["+S.call(T.call([],de||[],he||[]),": ")+"] ":"");return 0===ue.length?fe+"{}":x?fe+"{"+Z(ue,x)+"}":fe+"{ "+S.call(ue,", ")+" }"}return String(t)};var Y=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return Y.call(e,t)}function $(e){return m.call(e)}function z(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function G(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return G(_.call(e,0,t.maxStringLength),t)+r}return F(v.call(v.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,W),"single",t)}function W(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+E.call(t.toString(16))}function K(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function X(e,t,n,r){return e+" ("+t+") {"+(r?Z(n,r):S.call(n,", "))+"}"}function Z(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+S.call(e,","+n)+"\n"+t.prev}function J(e,t){var n=q(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=V(e,i)?t(e[i],e):""}var o,s="function"==typeof I?I(e):[];if(N){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in e)V(e,c)&&(n&&String(Number(c))===c&&c<e.length||N&&o["$"+c]instanceof Symbol||(b.call(/[^\w$]/,c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if("function"==typeof I)for(var u=0;u<s.length;u++)D.call(e,s[u])&&r.push("["+t(s[u])+"]: "+t(e[s[u]],e));return r}},2794:(e,t,n)=>{e.exports=n(3837).inspect},8987:(e,t,n)=>{"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(1414),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=s(e),a=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=u&&n;if(a&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(r&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var y in e)p&&"prototype"===y||!i.call(e,y)||d.push(String(y));if(c)for(var _=function(e){if("undefined"==typeof window||!f)return h(e);try{return h(e)}catch(e){return!1}}(e),v=0;v<l.length;++v)_&&"constructor"===l[v]||!i.call(e,l[v])||d.push(l[v]);return d}}e.exports=r},2215:(e,t,n)=>{"use strict";var r=Array.prototype.slice,i=n(1414),o=Object.keys,s=o?function(e){return o(e)}:n(8987),a=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?a(r.call(e)):a(e)})}else Object.keys=s;return Object.keys||s},e.exports=s},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},8318:(e,t,n)=>{const r=n(1017),i=n(2081),{promises:o,constants:s}=n(7147),a=n(2818),c=n(1595),u=n(1906),l=r.join(__dirname,"xdg-open"),{platform:h,arch:d}=process;let f;const p=(()=>{const e="/mnt/";let t;return async function(){if(t)return t;const n="/etc/wsl.conf";let r=!1;try{await o.access(n,s.F_OK),r=!0}catch{}if(!r)return e;const i=await o.readFile(n,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?(t=a.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),m=async(e,t)=>{let n;for(const r of e)try{return await t(r)}catch(e){n=e}throw n},g=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return m(e.app,(t=>g({...e,app:t})));let t,{name:n,arguments:r=[]}=e.app||{};if(r=[...r],Array.isArray(n))return m(n,(t=>g({...e,app:{name:t,arguments:r}})));const u=[],d={};if("darwin"===h)t="open",e.wait&&u.push("--wait-apps"),e.background&&u.push("--background"),e.newInstance&&u.push("--new"),n&&u.push("-a",n);else if("win32"===h||a&&(void 0===f&&(f=(()=>{try{return o.statSync("/run/.containerenv"),!0}catch{return!1}})()||c()),!f)&&!n){const i=await p();t=a?`${i}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,u.push("-NoProfile","-NonInteractive","ExecutionPolicy","Bypass","-EncodedCommand"),a||(d.windowsVerbatimArguments=!0);const o=["Start"];e.wait&&o.push("-Wait"),n?(o.push(`"\`"${n}\`""`,"-ArgumentList"),e.target&&r.unshift(e.target)):e.target&&o.push(`"${e.target}"`),r.length>0&&(r=r.map((e=>`"\`"${e}\`""`)),o.push(r.join(","))),e.target=Buffer.from(o.join(" "),"utf16le").toString("base64")}else{if(n)t=n;else{const e="/"===__dirname;let n=!1;try{await o.access(l,s.X_OK),n=!0}catch{}t=process.versions.electron||"android"===h||e||!n?"xdg-open":l}r.length>0&&u.push(...r),e.wait||(d.stdio="ignore",d.detached=!0)}e.target&&u.push(e.target),"darwin"===h&&r.length>0&&u.push("--args",...r);const y=i.spawn(t,u,d);return e.wait?new Promise(((t,n)=>{y.once("error",n),y.once("close",(r=>{!e.allowNonzeroExitCode&&r>0?n(new Error(`Exited with code ${r}`)):t(y)}))})):(y.unref(),y)},y=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");return g({...t,target:e})};function _(e){if("string"==typeof e||Array.isArray(e))return e;const{[d]:t}=e;if(!t)throw new Error(`${d} is not supported`);return t}function v({[h]:e},{wsl:t}){if(t&&a)return _(t);if(!e)throw new Error(`${h} is not supported`);return _(e)}const E={};u(E,"chrome",(()=>v({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),u(E,"firefox",(()=>v({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),u(E,"edge",(()=>v({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),y.apps=E,y.openApp=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `name`");const{arguments:n=[]}=t||{};if(null!=n&&!Array.isArray(n))throw new TypeError("Expected `appArguments` as Array type");return g({...t,app:{name:e,arguments:n}})},e.exports=y},4012:e=>{"use strict";const t={};function n(e,n,r){r||(r=Error);class i extends r{constructor(e,t,r){super(function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(e,t,r))}}i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){const n=e.length;return e=e.map((e=>String(e))),n>2?`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]:2===n?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){let i;var o;let s;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s=`The ${e} ${i} ${r(t,"type")}`;else{s=`The "${e}" ${"number"!=typeof c&&(c=0),c+".".length>(a=e).length||-1===a.indexOf(".",c)?"argument":"property"} ${i} ${r(t,"type")}`}var a,c;return s+=". Received type "+typeof n,s}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},6753:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var i=n(9481),o=n(4229);n(4378)(u,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var c=s[a];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},2725:(e,t,n)=>{"use strict";e.exports=i;var r=n(4605);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(4378)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},9481:(e,t,n)=>{"use strict";var r;e.exports=S,S.ReadableState=T,n(2361).EventEmitter;var i,o=function(e,t){return e.listeners(t).length},s=n(9740),a=n(4300).Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=n(3837);i=u&&u.debuglog?u.debuglog("stream"):function(){};var l,h,d,f=n(7327),p=n(1195),m=n(2457).getHighWaterMark,g=n(4012).q,y=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,E=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(4378)(S,s);var w=p.errorOrDestroy,b=["error","close","destroy","pause","resume"];function T(e,t,i){r=r||n(6753),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=n(2553).s),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function S(e){if(r=r||n(6753),!(this instanceof S))return new S(e);var t=this instanceof r;this._readableState=new T(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function A(e,t,n,r,o){i("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,N(e)))}}(e,u);else if(o||(s=function(e,t){var n,r;return r=t,a.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(u,t)),s)w(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)u.endEmitted?w(e,new E):O(e,u,t,!0);else if(u.ended)w(e,new _);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?O(e,u,t,!1):P(e,u)):O(e,u,t,!1)}else r||(u.reading=!1,P(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&R(e)),P(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),A(this,e,t,!1,n)},S.prototype.unshift=function(e){return A(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){l||(l=n(2553).s);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(N,e))}function N(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,x(e)}function P(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(i("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function k(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){i("readable nexttick read 0"),e.read(0)}function L(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function F(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function q(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):R(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&F(this),null;var r,o=t.needReadable;return i("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",o=!0),t.ended||t.reading?i("reading or ended",o=!1):o&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(r=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&F(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){w(this,new v("_read()"))},S.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?p:a;function a(){i("onend"),e.end()}r.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",(function t(o,s){i("onunpipe"),o===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,i("cleanup"),e.removeListener("close",d),e.removeListener("finish",f),e.removeListener("drain",c),e.removeListener("error",h),e.removeListener("unpipe",t),n.removeListener("end",a),n.removeListener("end",p),n.removeListener("data",l),u=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,x(e))}}(n);e.on("drain",c);var u=!1;function l(t){i("ondata");var o=e.write(t);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==q(r.pipes,e))&&!u&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(t){i("onerror",t),p(),e.removeListener("error",h),0===o(e,"error")&&w(e,t)}function d(){e.removeListener("finish",f),p()}function f(){i("onfinish"),e.removeListener("close",d),p()}function p(){i("unpipe"),n.unpipe(e)}return n.on("data",l),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",h),e.once("close",d),e.once("finish",f),e.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=q(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?R(this):r.reading||process.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(k,this),n},S.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(k,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(L,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var o in e.on("end",(function(){if(i("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(t.push(o)||(r=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<b.length;s++)e.on(b[s],this.emit.bind(this,b[s]));return this._read=function(t){i("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(5850)),h(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=U,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,t){return void 0===d&&(d=n(6307)),d(S,e,t)})},4605:(e,t,n)=>{"use strict";e.exports=l;var r=n(4012).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(6753);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(4378)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},4229:(e,t,n)=>{"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=S,S.WritableState=T;var o,s={deprecate:n(1159)},a=n(9740),c=n(4300).Buffer,u=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},l=n(1195),h=n(2457).getHighWaterMark,d=n(4012).q,f=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,E=d.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function b(){}function T(e,t,o){i=i||n(6753),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(process.nextTick(i,r),process.nextTick(N,e,t),e._writableState.errorEmitted=!0,w(e,r)):(i(r),e._writableState.errorEmitted=!0,w(e,r),N(e,t))}(e,n,r,t,i);else{var o=I(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||C(e,n),r?process.nextTick(O,e,n,o,i):O(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(e){var t=this instanceof(i=i||n(6753));if(!t&&!o.call(S,this))return new S(e);this._writableState=new T(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function A(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),N(e,t)}function C(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,A(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback;if(A(e,t,!1,t.objectMode?1:u.length,u,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),N(e,t)}))}function N(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(4378)(S,a),T.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(T.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===S&&e&&e._writableState instanceof T}})):o=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,c.isBuffer(r)||r instanceof u);return s&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=b),i.ending?function(e,t){var n=new v;w(e,n),process.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i;return null===n?i=new _:"string"==typeof n||t.objectMode||(i=new f("chunk",["string","Buffer"],n)),!i||(w(e,i),process.nextTick(r,i),!1)}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,a,r,i,o);return u}(this,i,s,e,t,n)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,N(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}},5850:(e,t,n)=>{"use strict";var r;function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(8610),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(f(n,!1)))}}function m(e){process.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[c]?n(e[c]):t(f(void 0,!0))}))}));var n,r=this[l];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(f(void 0,!0)):t[h](n,r)}),r)}}(r,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(f(i,!1));n=new Promise(this[h])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var r=n[d].read();r?(n[l]=null,n[s]=null,n[a]=null,e(f(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[c]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(f(void 0,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}},7327:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=n(4300).Buffer,u=n(3837).inspect,l=u&&u.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,n,r,i=c.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,c.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return u(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},1195:e=>{"use strict";function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):i?(process.nextTick(n,o),i(e)):process.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var r=n(4012).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,h=!0,a||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",d),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)}}},6307:(e,t,n)=>{"use strict";function r(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(4012).q.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,n){var r;if(t&&"function"==typeof t.next)r=t;else if(t&&t[Symbol.asyncIterator])r=t[Symbol.asyncIterator]();else{if(!t||!t[Symbol.iterator])throw new a("iterable",["Iterable"],t);r=t[Symbol.iterator]()}var c=new e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({objectMode:!0},n)),u=!1;function l(){return h.apply(this,arguments)}function h(){return(h=i((function*(){try{var e=yield r.next(),t=e.value;e.done?c.push(null):c.push(yield t)?l():u=!1}catch(e){c.destroy(e)}}))).apply(this,arguments)}return c._read=function(){u||(u=!0,l())},c}},9946:(e,t,n)=>{"use strict";var r,i=n(4012).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(8610)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(u),o||(s.forEach(u),i(r))}))}));return t.reduce(l)}},2457:(e,t,n)=>{"use strict";var r=n(4012).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},9740:(e,t,n)=>{e.exports=n(2781)},1451:(e,t,n)=>{var r=n(2781);"disable"===process.env.READABLE_STREAM&&r?(e.exports=r.Readable,Object.assign(e.exports,r),e.exports.Stream=r):((t=e.exports=n(9481)).Stream=r||t,t.Readable=t,t.Writable=n(4229),t.Duplex=n(6753),t.Transform=n(4605),t.PassThrough=n(2725),t.finished=n(8610),t.pipeline=n(9946))},1697:(e,t,n)=>{"use strict";e.exports=n(3188)()},3188:e=>{"use strict";function t(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(e){return(e=e||{}).circles?function(e){var n=[],r=[];return e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return i(o,e);if(o instanceof Map)return new Map(i(Array.from(o),e));if(o instanceof Set)return new Set(i(Array.from(o),e));var s={};for(var a in n.push(o),r.push(s),o){var c=o[a];if("object"!=typeof c||null===c)s[a]=c;else if(c instanceof Date)s[a]=new Date(c);else if(c instanceof Map)s[a]=new Map(i(Array.from(c),e));else if(c instanceof Set)s[a]=new Set(i(Array.from(c),e));else if(ArrayBuffer.isView(c))s[a]=t(c);else{var u=n.indexOf(c);s[a]=-1!==u?r[u]:e(c)}}return n.pop(),r.pop(),s}:function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return i(o,e);if(o instanceof Map)return new Map(i(Array.from(o),e));if(o instanceof Set)return new Set(i(Array.from(o),e));var s={};for(var a in n.push(o),r.push(s),o)if(!1!==Object.hasOwnProperty.call(o,a)){var c=o[a];if("object"!=typeof c||null===c)s[a]=c;else if(c instanceof Date)s[a]=new Date(c);else if(c instanceof Map)s[a]=new Map(i(Array.from(c),e));else if(c instanceof Set)s[a]=new Set(i(Array.from(c),e));else if(ArrayBuffer.isView(c))s[a]=t(c);else{var u=n.indexOf(c);s[a]=-1!==u?r[u]:e(c)}}return n.pop(),r.pop(),s};function i(e,i){for(var o=Object.keys(e),s=new Array(o.length),a=0;a<o.length;a++){var c=o[a],u=e[c];if("object"!=typeof u||null===u)s[c]=u;else if(u instanceof Date)s[c]=new Date(u);else if(ArrayBuffer.isView(u))s[c]=t(u);else{var l=n.indexOf(u);s[c]=-1!==l?r[l]:i(u)}}return s}}(e):e.proto?function e(r){if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r);if(Array.isArray(r))return n(r,e);if(r instanceof Map)return new Map(n(Array.from(r),e));if(r instanceof Set)return new Set(n(Array.from(r),e));var i={};for(var o in r){var s=r[o];"object"!=typeof s||null===s?i[o]=s:s instanceof Date?i[o]=new Date(s):s instanceof Map?i[o]=new Map(n(Array.from(s),e)):s instanceof Set?i[o]=new Set(n(Array.from(s),e)):ArrayBuffer.isView(s)?i[o]=t(s):i[o]=e(s)}return i}:function e(r){if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r);if(Array.isArray(r))return n(r,e);if(r instanceof Map)return new Map(n(Array.from(r),e));if(r instanceof Set)return new Set(n(Array.from(r),e));var i={};for(var o in r)if(!1!==Object.hasOwnProperty.call(r,o)){var s=r[o];"object"!=typeof s||null===s?i[o]=s:s instanceof Date?i[o]=new Date(s):s instanceof Map?i[o]=new Map(n(Array.from(s),e)):s instanceof Set?i[o]=new Set(n(Array.from(s),e)):ArrayBuffer.isView(s)?i[o]=t(s):i[o]=e(s)}return i};function n(e,n){for(var r=Object.keys(e),i=new Array(r.length),o=0;o<r.length;o++){var s=r[o],a=e[s];"object"!=typeof a||null===a?i[s]=a:a instanceof Date?i[s]=new Date(a):ArrayBuffer.isView(a)?i[s]=t(a):i[s]=n(a)}return i}}},9509:(e,t,n)=>{var r=n(4300),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},2399:(e,t,n)=>{"use strict";var r,i=n(4300),o=i.Buffer,s={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=i[r]);var a=s.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=o[r]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=o(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},2257:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(e.value,t).test(this.value):""===e.operator?""===e.value||new h(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=n(2893),{safeRe:s,t:a}=n(5765),c=n(7539),u=n(4225),l=n(6376),h=n(6902)},6902:(e,t,n)=>{class r{constructor(e,t){if(t=o(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!g(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&y(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&p)|(this.options.loose&&m))+":"+e,n=i.get(t);if(n)return n;const r=this.options.loose,o=r?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,R(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],h),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],d),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>I(e,this.options)));r&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const y=new Map,_=c.map((e=>new s(e,this.options)));for(const e of _){if(g(e))return[e];y.set(e.value,e)}y.size>1&&y.has("")&&y.delete("");const E=[...y.values()];return i.set(t,E),E}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>_(n,t)&&e.set.some((e=>_(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const i=new(n(9659)),o=n(2893),s=n(2257),a=n(4225),c=n(6376),{safeRe:u,t:l,comparatorTrimReplace:h,tildeTrimReplace:d,caretTrimReplace:f}=n(5765),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:m}=n(3295),g=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,_=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},v=(e,t)=>(a("comp",e,t),e=T(e,t),a("caret",e),e=w(e,t),a("tildes",e),e=A(e,t),a("xrange",e),e=C(e,t),a("stars",e),e),E=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>b(e,t))).join(" "),b=(e,t)=>{const n=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(n,((t,n,r,i,o)=>{let s;return a("tilde",e,t,n,r,i,o),E(n)?s="":E(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:E(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,a("tilde return",s),s}))},T=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{a("caret",e,t);const n=t.loose?u[l.CARETLOOSE]:u[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,s)=>{let c;return a("caret",e,t,n,i,o,s),E(n)?c="":E(i)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:E(o)?c="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===n?"0"===i?`>=${n}.${i}.${o}-${s} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${s} <${+n+1}.0.0-0`):(a("no pr"),c="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),a("caret return",c),c}))},A=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>O(e,t))).join(" ")),O=(e,t)=>{e=e.trim();const n=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(n,((n,r,i,o,s,c)=>{a("xRange",e,n,r,i,o,s,c);const u=E(i),l=u||E(o),h=l||E(s),d=h;return"="===r&&d&&(r=""),c=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(c="-0"),n=`${r+i}.${o}.${s}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:h&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),a("xRange return",n),n}))},C=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),I=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),R=e=>(t,n,r,i,o,s,a,c,u,l,h,d)=>`${n=E(r)?"":E(i)?`>=${r}.0.0${e?"-0":""}`:E(o)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=E(u)?"":E(l)?`<${+u+1}.0.0-0`:E(h)?`<${u}.${+l+1}.0-0`:d?`<=${u}.${l}.${h}-${d}`:e?`<${u}.${l}.${+h+1}-0`:`<=${c}`}`.trim(),N=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,n)=>{const r=n(4225),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n(3295),{safeRe:s,t:a}=n(5765),c=n(2893),{compareIdentifiers:u}=n(6742);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("build compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},3507:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},7539:(e,t,n)=>{const r=n(8718),i=n(1194),o=n(1312),s=n(5903),a=n(1544),c=n(2056);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return o(e,n,u);case">=":return s(e,n,u);case"<":return a(e,n,u);case"<=":return c(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,n)=>{const r=n(6376),i=n(3959),{safeRe:o,t:s}=n(5765);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let i;for(;(i=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),r.lastIndex=i.index+i[1].length+i[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===n)return null;const a=n[2],c=n[3]||"0",u=n[4]||"0",l=t.includePrerelease&&n[5]?`-${n[5]}`:"",h=t.includePrerelease&&n[6]?`+${n[6]}`:"";return i(`${a}.${c}.${u}${l}${h}`,t)}},8880:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n)=>{const i=new r(e,n),o=new r(t,n);return i.compare(o)||i.compareBuild(o)}},7880:(e,t,n)=>{const r=n(6269);e.exports=(e,t)=>r(e,t,!0)},6269:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},2378:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e,null,!0),i=r(t,null,!0),o=n.compare(i);if(0===o)return null;const s=o>0,a=s?n:i,c=s?i:n,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return n.major!==i.major?l+"major":n.minor!==i.minor?l+"minor":n.patch!==i.patch?l+"patch":"prerelease"}},8718:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>0===r(e,t,n)},1312:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)>0},5903:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)>=0},253:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n,i,o)=>{"string"==typeof n&&(o=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,o).version}catch(e){return null}}},1544:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)<0},2056:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)<=0},8679:(e,t,n)=>{const r=n(6376);e.exports=(e,t)=>new r(e,t).major},7789:(e,t,n)=>{const r=n(6376);e.exports=(e,t)=>new r(e,t).minor},1194:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>0!==r(e,t,n)},3959:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},2358:(e,t,n)=>{const r=n(6376);e.exports=(e,t)=>new r(e,t).patch},7559:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},9795:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(t,e,n)},3657:(e,t,n)=>{const r=n(8880);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},5712:(e,t,n)=>{const r=n(6902);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},1100:(e,t,n)=>{const r=n(8880);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},6397:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},1249:(e,t,n)=>{const r=n(5765),i=n(3295),o=n(6376),s=n(6742),a=n(3959),c=n(6397),u=n(3507),l=n(253),h=n(2378),d=n(8679),f=n(7789),p=n(2358),m=n(7559),g=n(6269),y=n(9795),_=n(7880),v=n(8880),E=n(1100),w=n(3657),b=n(1312),T=n(1544),S=n(8718),A=n(1194),O=n(5903),C=n(2056),I=n(7539),R=n(9038),N=n(2257),P=n(6902),D=n(5712),k=n(1042),M=n(5775),L=n(1657),x=n(5316),U=n(9042),F=n(6826),B=n(7606),q=n(32),j=n(2937),H=n(7908),Y=n(799);e.exports={parse:a,valid:c,clean:u,inc:l,diff:h,major:d,minor:f,patch:p,prerelease:m,compare:g,rcompare:y,compareLoose:_,compareBuild:v,sort:E,rsort:w,gt:b,lt:T,eq:S,neq:A,gte:O,lte:C,cmp:I,coerce:R,Comparator:N,Range:P,satisfies:D,toComparators:k,maxSatisfying:M,minSatisfying:L,minVersion:x,validRange:U,outside:F,gtr:B,ltr:q,intersects:j,simplifyRange:H,subset:Y,SemVer:o,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},9659:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},2893:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},5765:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=n(3295),s=n(4225),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let h=0;const d=[["\\s",1],["\\d",o],["[a-zA-Z0-9-]",i]],f=(e,t,n)=>{const r=(e=>{for(const[t,n]of d)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=h++;s(e,i,t),l[e]=i,u[i]=t,a[i]=new RegExp(t,n?"g":void 0),c[i]=new RegExp(r,n?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[a-zA-Z0-9-]+"),f("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),f("FULL",`^${u[l.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),f("LOOSE",`^${u[l.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),f("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),f("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",u[l.COERCE],!0),f("COERCERTLFULL",u[l.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7606:(e,t,n)=>{const r=n(6826);e.exports=(e,t,n)=>r(e,t,">",n)},2937:(e,t,n)=>{const r=n(6902);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},32:(e,t,n)=>{const r=n(6826);e.exports=(e,t,n)=>r(e,t,"<",n)},5775:(e,t,n)=>{const r=n(6376),i=n(6902);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},1657:(e,t,n)=>{const r=n(6376),i=n(6902);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},5316:(e,t,n)=>{const r=n(6376),i=n(6902),o=n(1312);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},6826:(e,t,n)=>{const r=n(6376),i=n(2257),{ANY:o}=i,s=n(6902),a=n(5712),c=n(1312),u=n(1544),l=n(2056),h=n(5903);e.exports=(e,t,n,d)=>{let f,p,m,g,y;switch(e=new r(e,d),t=new s(t,d),n){case">":f=c,p=l,m=u,g=">",y=">=";break;case"<":f=u,p=h,m=c,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,d))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,d)?s=e:m(e.semver,a.semver,d)&&(a=e)})),s.operator===g||s.operator===y)return!1;if((!a.operator||a.operator===g)&&p(e,a.semver))return!1;if(a.operator===y&&m(e,a.semver))return!1}return!0}},7908:(e,t,n)=>{const r=n(5712),i=n(6269);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>i(e,t,n)));for(const e of c)r(e,t,n)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return l.length<h.length?l:t}},799:(e,t,n)=>{const r=n(6902),i=n(2257),{ANY:o}=i,s=n(5712),a=n(6269),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=u}const r=new Set;let i,l,f,p,m,g,y;for(const t of e)">"===t.operator||">="===t.operator?i=h(i,t,n):"<"===t.operator||"<="===t.operator?l=d(l,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&l){if(f=a(i.semver,l.semver,n),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const e of r){if(i&&!s(e,String(i),n))return null;if(l&&!s(e,String(l),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let _=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver,v=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;_&&1===_.prerelease.length&&"<"===l.operator&&0===_.prerelease[0]&&(_=!1);for(const e of t){if(y=y||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,i)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),">"===e.operator||">="===e.operator){if(p=h(i,e,n),p===e&&p!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),n))return!1;if(l)if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),"<"===e.operator||"<="===e.operator){if(m=d(l,e,n),m===e&&m!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),n))return!1;if(!e.operator&&(l||i)&&0!==f)return!1}return!(i&&g&&!l&&0!==f||l&&y&&!i&&0!==f||v||_)},h=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=l(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},1042:(e,t,n)=>{const r=n(6902);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,n)=>{const r=n(6902);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},7771:(e,t,n)=>{"use strict";var r=n(210),i=n(2296),o=n(1044)(),s=n(7296),a=n(4453),c=r("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||c(t)!==t)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in e&&s){var l=s(e,"length");l&&!l.configurable&&(r=!1),l&&!l.writable&&(u=!1)}return(r||u||!n)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},8052:(e,t,n)=>{"use strict";var r=n(2296),i=n(1044)(),o=n(5972).functionsHaveConfigurableNames(),s=n(4453);e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return n&&!o||(i?r(e,"name",t,!0,!0):r(e,"name",t)),e}},7478:(e,t,n)=>{"use strict";var r=n(210),i=n(1924),o=n(631),s=r("%TypeError%"),a=r("%WeakMap%",!0),c=r("%Map%",!0),u=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),m=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new s("Side channel does not contain "+o(e))},get:function(r){if(a&&r&&("object"==typeof r||"function"==typeof r)){if(e)return u(e,r)}else if(c){if(t)return d(t,r)}else if(n)return function(e,t){var n=m(e,t);return n&&n.value}(n,r)},has:function(r){if(a&&r&&("object"==typeof r||"function"==typeof r)){if(e)return h(e,r)}else if(c){if(t)return p(t,r)}else if(n)return function(e,t){return!!m(e,t)}(n,r);return!1},set:function(r,i){a&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new a),l(e,r,i)):c?(t||(t=new c),f(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=m(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},8975:(e,t,n)=>{var r;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return a(u(e),arguments)}function s(e,t){return o.apply(null,[e].concat(t||[]))}function a(e,t){var n,r,s,a,c,u,l,h,d,f=1,p=e.length,m="";for(r=0;r<p;r++)if("string"==typeof e[r])m+=e[r];else if("object"==typeof e[r]){if((a=e[r]).keys)for(n=t[f],s=0;s<a.keys.length;s++){if(null==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));n=n[a.keys[s]]}else n=a.param_no?t[a.param_no]:t[f++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&n instanceof Function&&(n=n()),i.numeric_arg.test(a.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(i.number.test(a.type)&&(h=n>=0),a.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,a.width?parseInt(a.width):0);break;case"e":n=a.precision?parseFloat(n).toExponential(a.precision):parseFloat(n).toExponential();break;case"f":n=a.precision?parseFloat(n).toFixed(a.precision):parseFloat(n);break;case"g":n=a.precision?String(Number(n.toPrecision(a.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=a.precision?n.substring(0,a.precision):n;break;case"t":n=String(!!n),n=a.precision?n.substring(0,a.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=a.precision?n.substring(0,a.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=a.precision?n.substring(0,a.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(a.type)?m+=n:(!i.number.test(a.type)||h&&!a.sign?d="":(d=h?"+":"-",n=n.toString().replace(i.sign,"")),u=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(d+n).length,c=a.width&&l>0?u.repeat(l):"",m+=a.align?d+n+c:"0"===u?d+c+n:c+d+n)}return m}var c=Object.create(null);function u(e){if(c[e])return c[e];for(var t,n=e,r=[],o=0;n;){if(null!==(t=i.text.exec(n)))r.push(t[0]);else if(null!==(t=i.modulo.exec(n)))r.push("%");else{if(null===(t=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var s=[],a=t[2],u=[];if(null===(u=i.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=i.key_access.exec(a)))s.push(u[1]);else{if(null===(u=i.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}t[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return c[e]=r}t.sprintf=o,t.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=s,void 0===(r=function(){return{sprintf:o,vsprintf:s}}.call(t,n,t,e))||(e.exports=r))}()},6353:(e,t,n)=>{"use strict";const r=n(5687);e.exports=(e,t)=>{t=void 0===t?1/0:t;const n=new Map;let i=!1,o=!0;return e instanceof r.Server?e.on("secureConnection",s):e.on("connection",s),e.on("request",(function(e,t){n.set(e.socket,n.get(e.socket)+1),t.once("finish",(()=>{const t=n.get(e.socket)-1;n.set(e.socket,t),i&&0===t&&e.socket.end()}))})),e.stop=function(r){setImmediate((()=>{i=!0,t<1/0&&setTimeout(c,t).unref(),e.close((e=>{r&&r(e,o)})),n.forEach(a)}))},e._pendingSockets=n,e;function s(e){n.set(e,0),e.once("close",(()=>n.delete(e)))}function a(e,t){0===e&&t.end()}function c(){o=!1,n.forEach(((e,t)=>t.end())),setImmediate((()=>{n.forEach(((e,t)=>t.destroy()))}))}}},2553:(e,t,n)=>{"use strict";var r=n(9509).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2130:(e,t,n)=>{"use strict";const r=n(2037),i=n(6560),o=process.env;let s;function a(e){const t=function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in o))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},2255:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6471),i=n(1223);t.PendingOperation=class{constructor(e){var t,n;this.timeoutMillis=e,this.deferred=i.defer(),this.possibleTimeoutCause=null,this.isRejected=!1,this.promise=(t=this.deferred.promise,n=e,new Promise(((e,i)=>{const o=setTimeout((()=>i(new r.TimeoutError)),n);t.then((t=>{clearTimeout(o),e(t)})).catch((e=>{clearTimeout(o),i(e)}))}))).catch((e=>(e instanceof r.TimeoutError&&(e=this.possibleTimeoutCause?new r.TimeoutError(this.possibleTimeoutCause.message):new r.TimeoutError("operation timed out for an unknown reason")),this.isRejected=!0,Promise.reject(e))))}abort(){this.reject(new Error("aborted"))}reject(e){this.deferred.reject(e)}resolve(e){this.deferred.resolve(e)}}},4783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2255),i=n(9149),o=n(1223),s=n(2361),a=n(9512);function c(e,t){const n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}t.Pool=class{constructor(e){if(this.destroyed=!1,this.emitter=new s.EventEmitter,!(e=e||{}).create)throw new Error("Tarn: opt.create function most be provided");if(!e.destroy)throw new Error("Tarn: opt.destroy function most be provided");if("number"!=typeof e.min||e.min<0||e.min!==Math.round(e.min))throw new Error("Tarn: opt.min must be an integer >= 0");if("number"!=typeof e.max||e.max<=0||e.max!==Math.round(e.max))throw new Error("Tarn: opt.max must be an integer > 0");if(e.min>e.max)throw new Error("Tarn: opt.max is smaller than opt.min");if(!o.checkOptionalTime(e.acquireTimeoutMillis))throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(e.acquireTimeoutMillis));if(!o.checkOptionalTime(e.createTimeoutMillis))throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(e.createTimeoutMillis));if(!o.checkOptionalTime(e.destroyTimeoutMillis))throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(e.destroyTimeoutMillis));if(!o.checkOptionalTime(e.idleTimeoutMillis))throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(e.idleTimeoutMillis));if(!o.checkOptionalTime(e.reapIntervalMillis))throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(e.reapIntervalMillis));if(!o.checkOptionalTime(e.createRetryIntervalMillis))throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(e.createRetryIntervalMillis));const t={create:!0,validate:!0,destroy:!0,log:!0,min:!0,max:!0,acquireTimeoutMillis:!0,createTimeoutMillis:!0,destroyTimeoutMillis:!0,idleTimeoutMillis:!0,reapIntervalMillis:!0,createRetryIntervalMillis:!0,propagateCreateError:!0};for(const n of Object.keys(e))if(!t[n])throw new Error(`Tarn: unsupported option opt.${n}`);this.creator=e.create,this.destroyer=e.destroy,this.validate="function"==typeof e.validate?e.validate:()=>!0,this.log=e.log||(()=>{}),this.acquireTimeoutMillis=e.acquireTimeoutMillis||3e4,this.createTimeoutMillis=e.createTimeoutMillis||3e4,this.destroyTimeoutMillis=e.destroyTimeoutMillis||5e3,this.idleTimeoutMillis=e.idleTimeoutMillis||3e4,this.reapIntervalMillis=e.reapIntervalMillis||1e3,this.createRetryIntervalMillis=e.createRetryIntervalMillis||200,this.propagateCreateError=!!e.propagateCreateError,this.min=e.min,this.max=e.max,this.used=[],this.free=[],this.pendingCreates=[],this.pendingAcquires=[],this.pendingDestroys=[],this.pendingValidations=[],this.destroyed=!1,this.interval=null,this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){const e=this.eventId++;this._executeEventHandlers("acquireRequest",e);const t=new r.PendingOperation(this.acquireTimeoutMillis);return this.pendingAcquires.push(t),t.promise=t.promise.then((t=>(this._executeEventHandlers("acquireSuccess",e,t),t))).catch((n=>(this._executeEventHandlers("acquireFail",e,n),c(this.pendingAcquires,t),Promise.reject(n)))),this._tryAcquireOrCreate(),t}release(e){this._executeEventHandlers("release",e);for(let t=0,n=this.used.length;t<n;++t){const n=this.used[t];if(n.resource===e)return this.used.splice(t,1),this.free.push(n.resolve()),this._tryAcquireOrCreate(),!0}return!1}isEmpty(){return 0===[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce(((e,t)=>e+t))}check(){const e=o.now(),t=[],n=this.min-this.used.length,r=this.free.length-n;let i=0;this.free.forEach((n=>{o.duration(e,n.timestamp)>=this.idleTimeoutMillis&&i<r?(i++,this._destroy(n.resource)):t.push(n)})),this.free=t,this.isEmpty()&&this._stopReaping()}destroy(){const e=this.eventId++;return this._executeEventHandlers("poolDestroyRequest",e),this._stopReaping(),this.destroyed=!0,o.reflect(Promise.all(this.pendingCreates.map((e=>o.reflect(e.promise)))).then((()=>new Promise(((e,t)=>{if(0===this.numPendingValidations())return void e();const n=setInterval((()=>{0===this.numPendingValidations()&&(a.clearInterval(n),e())}),100)})))).then((()=>Promise.all(this.used.map((e=>o.reflect(e.promise)))))).then((()=>Promise.all(this.pendingAcquires.map((e=>(e.abort(),o.reflect(e.promise))))))).then((()=>Promise.all(this.free.map((e=>o.reflect(this._destroy(e.resource))))))).then((()=>Promise.all(this.pendingDestroys.map((e=>e.promise))))).then((()=>{this.free=[],this.pendingAcquires=[]}))).then((t=>(this._executeEventHandlers("poolDestroySuccess",e),this.emitter.removeAllListeners(),t)))}on(e,t){this.emitter.on(e,t)}removeListener(e,t){this.emitter.removeListener(e,t)}removeAllListeners(e){this.emitter.removeAllListeners(e)}_tryAcquireOrCreate(){this.destroyed||(this._hasFreeResources()?this._doAcquire():this._shouldCreateMoreResources()&&this._doCreate())}_hasFreeResources(){return this.free.length>0}_doAcquire(){for(;this._canAcquire();){const e=this.pendingAcquires.shift(),t=this.free.pop();if(void 0===t||void 0===e){const e="this.free was empty while trying to acquire resource";throw this.log(`Tarn: ${e}`,"warn"),new Error(`Internal error, should never happen. ${e}`)}this.pendingValidations.push(e),this.used.push(t);const n=new r.PendingOperation(this.acquireTimeoutMillis);e.promise.catch((e=>{n.abort()})),n.promise.catch((e=>(this.log("Tarn: resource validator threw an exception "+e.stack,"warn"),!1))).then((n=>{try{n&&!e.isRejected?(this._startReaping(),e.resolve(t.resource)):(c(this.used,t),n?this.free.push(t):(this._destroy(t.resource),setTimeout((()=>{this._tryAcquireOrCreate()}),0)),e.isRejected||this.pendingAcquires.unshift(e))}finally{c(this.pendingValidations,e)}})),this._validateResource(t.resource).then((e=>{n.resolve(e)})).catch((e=>{n.reject(e)}))}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource(e){try{return Promise.resolve(this.validate(e))}catch(e){return Promise.reject(e)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){const e=this.pendingAcquires.slice();this._create().promise.then((()=>(this._tryAcquireOrCreate(),null))).catch((t=>{this.propagateCreateError&&0!==this.pendingAcquires.length&&this.pendingAcquires[0].reject(t),e.forEach((e=>{e.possibleTimeoutCause=t})),o.delay(this.createRetryIntervalMillis).then((()=>this._tryAcquireOrCreate()))}))}_create(){const e=this.eventId++;this._executeEventHandlers("createRequest",e);const t=new r.PendingOperation(this.createTimeoutMillis);var n;return t.promise=t.promise.catch((n=>{throw c(this.pendingCreates,t)&&this._executeEventHandlers("createFail",e,n),n})),this.pendingCreates.push(t),(n=this.creator,new Promise(((e,t)=>{const r=(n,r)=>{n?t(n):e(r)};o.tryPromise((()=>n(r))).then((t=>{t&&e(t)})).catch((e=>{t(e)}))}))).then((n=>t.isRejected?(this.destroyer(n),null):(c(this.pendingCreates,t),this.free.push(new i.Resource(n)),t.resolve(n),this._executeEventHandlers("createSuccess",e,n),null))).catch((n=>(t.isRejected||(c(this.pendingCreates,t)&&this._executeEventHandlers("createFail",e,n),t.reject(n)),null))),t}_destroy(e){const t=this.eventId++;this._executeEventHandlers("destroyRequest",t,e);const n=new r.PendingOperation(this.destroyTimeoutMillis);return Promise.resolve().then((()=>this.destroyer(e))).then((()=>{n.resolve(e)})).catch((e=>{n.reject(e)})),this.pendingDestroys.push(n),n.promise.then((n=>(this._executeEventHandlers("destroySuccess",t,e),n))).catch((n=>this._logDestroyerError(t,e,n))).then((e=>{const t=this.pendingDestroys.findIndex((e=>e===n));return this.pendingDestroys.splice(t,1),e}))}_logDestroyerError(e,t,n){this._executeEventHandlers("destroyFail",e,t,n),this.log("Tarn: resource destroyer threw an exception "+n.stack,"warn")}_startReaping(){this.interval||(this._executeEventHandlers("startReaping"),this.interval=setInterval((()=>this.check()),this.reapIntervalMillis))}_stopReaping(){null!==this.interval&&(this._executeEventHandlers("stopReaping"),a.clearInterval(this.interval)),this.interval=null}_executeEventHandlers(e,...t){this.emitter.listeners(e).forEach((n=>{try{n(...t)}catch(t){this.log(`Tarn: event handler "${e}" threw an exception ${t.stack}`,"warn")}}))}}},2454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseInspection=class{constructor(e){this._value=e.value,this._error=e.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}},9149:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1223);class i{constructor(e){this.resource=e,this.resource=e,this.timestamp=r.now(),this.deferred=r.defer()}get promise(){return this.deferred.promise}resolve(){return this.deferred.resolve(void 0),new i(this.resource)}}t.Resource=i},6471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}t.TimeoutError=n},2854:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4783);t.Pool=r.Pool;const i=n(6471);t.TimeoutError=i.TimeoutError,e.exports={Pool:r.Pool,TimeoutError:i.TimeoutError}},1223:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2454);function i(e){return"number"==typeof e&&e===Math.round(e)&&e>0}t.defer=function(){let e=null,t=null;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}},t.now=function(){return Date.now()},t.duration=function(e,t){return Math.abs(t-e)},t.checkOptionalTime=function(e){return void 0===e||i(e)},t.checkRequiredTime=i,t.delay=function(e){return new Promise((t=>setTimeout(t,e)))},t.reflect=function(e){return e.then((e=>new r.PromiseInspection({value:e}))).catch((e=>new r.PromiseInspection({error:e})))},t.tryPromise=function(e){try{const t=e();return Promise.resolve(t)}catch(e){return Promise.reject(e)}}},2602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeToTrackingBuffer=function(e,t,r){e.writeUInt32LE(0),e.writeUInt32LE(18),e.writeUInt16LE(n),e.writeBuffer(t),e.writeUInt32LE(r);const i=e.data;return i.writeUInt32LE(i.length,0),e};const n=2},415:(e,t)=>{"use strict";let n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.SQLServerStatementColumnEncryptionSetting=t.SQLServerEncryptionType=t.DescribeParameterEncryptionResultSet2=t.DescribeParameterEncryptionResultSet1=void 0,t.SQLServerEncryptionType=n,function(e){e[e.Deterministic=1]="Deterministic",e[e.Randomized=2]="Randomized",e[e.PlainText=0]="PlainText"}(n||(t.SQLServerEncryptionType=n={})),t.DescribeParameterEncryptionResultSet1=r,function(e){e[e.KeyOrdinal=0]="KeyOrdinal",e[e.DbId=1]="DbId",e[e.KeyId=2]="KeyId",e[e.KeyVersion=3]="KeyVersion",e[e.KeyMdVersion=4]="KeyMdVersion",e[e.EncryptedKey=5]="EncryptedKey",e[e.ProviderName=6]="ProviderName",e[e.KeyPath=7]="KeyPath",e[e.KeyEncryptionAlgorithm=8]="KeyEncryptionAlgorithm"}(r||(t.DescribeParameterEncryptionResultSet1=r={})),t.DescribeParameterEncryptionResultSet2=i,function(e){e[e.ParameterOrdinal=0]="ParameterOrdinal",e[e.ParameterName=1]="ParameterName",e[e.ColumnEncryptionAlgorithm=2]="ColumnEncryptionAlgorithm",e[e.ColumnEncrytionType=3]="ColumnEncrytionType",e[e.ColumnEncryptionKeyOrdinal=4]="ColumnEncryptionKeyOrdinal",e[e.NormalizationRuleVersion=5]="NormalizationRuleVersion"}(i||(t.DescribeParameterEncryptionResultSet2=i={})),t.SQLServerStatementColumnEncryptionSetting=o,function(e){e[e.UseConnectionSetting=0]="UseConnectionSetting",e[e.Enabled=1]="Enabled",e[e.ResultSetOnly=2]="ResultSetOnly",e[e.Disabled=3]="Disabled"}(o||(t.SQLServerStatementColumnEncryptionSetting=o={}))},2498:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.BulkLoadPayload=void 0,n=Symbol.asyncIterator,t.BulkLoadPayload=class{constructor(e){this.bulkLoad=void 0,this.iterator=void 0,this.bulkLoad=e,this.iterator=this.bulkLoad.rowToPacketTransform[Symbol.asyncIterator]()}[n](){return this.iterator}toString(e=""){return e+"BulkLoad"}}},6733:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(2361),o=(r=n(9546))&&r.__esModule?r:{default:r},s=n(2781),a=n(5961);const c=Buffer.from([a.TYPE.ROW]),u=Buffer.from([16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),l=Buffer.from([0]);class h extends s.Transform{constructor(e){super({writableObjectMode:!0}),this.columnMetadataWritten=void 0,this.bulkLoad=void 0,this.mainOptions=void 0,this.columns=void 0,this.bulkLoad=e,this.mainOptions=e.options,this.columns=e.columns,this.columnMetadataWritten=!1}_transform(e,t,n){this.columnMetadataWritten||(this.push(this.bulkLoad.getColMetaData()),this.columnMetadataWritten=!0),this.push(c);for(let t=0;t<this.columns.length;t++){const r=this.columns[t];let i=Array.isArray(e)?e[t]:e[r.objName];if(!this.bulkLoad.firstRowWritten)try{i=r.type.validate(i,r.collation)}catch(e){return n(e)}const o={length:r.length,scale:r.scale,precision:r.precision,value:i};if("Text"===r.type.name||"Image"===r.type.name||"NText"===r.type.name){if(null==i){this.push(l);continue}this.push(u)}this.push(r.type.generateParameterLength(o,this.mainOptions));for(const e of r.type.generateParameterData(o,this.mainOptions))this.push(e)}process.nextTick(n)}_flush(e){this.push(this.bulkLoad.createDoneToken()),process.nextTick(e)}}class d extends i.EventEmitter{constructor(e,t,n,{checkConstraints:r=!1,fireTriggers:i=!1,keepNulls:o=!1,lockTable:s=!1,order:a={}},c){if("boolean"!=typeof r)throw new TypeError('The "options.checkConstraints" property must be of type boolean.');if("boolean"!=typeof i)throw new TypeError('The "options.fireTriggers" property must be of type boolean.');if("boolean"!=typeof o)throw new TypeError('The "options.keepNulls" property must be of type boolean.');if("boolean"!=typeof s)throw new TypeError('The "options.lockTable" property must be of type boolean.');if("object"!=typeof a||null===a)throw new TypeError('The "options.order" property must be of type object.');for(const[e,t]of Object.entries(a))if("ASC"!==t&&"DESC"!==t)throw new TypeError('The value of the "'+e+'" key in the "options.order" object must be either "ASC" or "DESC".');super(),this.error=void 0,this.canceled=void 0,this.executionStarted=void 0,this.streamingMode=void 0,this.table=void 0,this.timeout=void 0,this.options=void 0,this.callback=void 0,this.columns=void 0,this.columnsByName=void 0,this.firstRowWritten=void 0,this.rowToPacketTransform=void 0,this.bulkOptions=void 0,this.connection=void 0,this.rows=void 0,this.rst=void 0,this.rowCount=void 0,this.collation=void 0,this.error=void 0,this.canceled=!1,this.executionStarted=!1,this.collation=t,this.table=e,this.options=n,this.callback=c,this.columns=[],this.columnsByName={},this.firstRowWritten=!1,this.streamingMode=!1,this.rowToPacketTransform=new h(this),this.bulkOptions={checkConstraints:r,fireTriggers:i,keepNulls:o,lockTable:s,order:a}}addColumn(e,t,{output:n=!1,length:r,precision:i,scale:o,objName:s=e,nullable:a=!0}){if(this.firstRowWritten)throw new Error("Columns cannot be added to bulk insert after the first row has been written.");if(this.executionStarted)throw new Error("Columns cannot be added to bulk insert after execution has started.");const c={type:t,name:e,value:null,output:n,length:r,precision:i,scale:o,objName:s,nullable:a,collation:this.collation};32==(48&t.id)&&null==c.length&&t.resolveLength&&(c.length=t.resolveLength(c)),t.resolvePrecision&&null==c.precision&&(c.precision=t.resolvePrecision(c)),t.resolveScale&&null==c.scale&&(c.scale=t.resolveScale(c)),this.columns.push(c),this.columnsByName[e]=c}getOptionsSql(){const e=[];if(this.bulkOptions.checkConstraints&&e.push("CHECK_CONSTRAINTS"),this.bulkOptions.fireTriggers&&e.push("FIRE_TRIGGERS"),this.bulkOptions.keepNulls&&e.push("KEEP_NULLS"),this.bulkOptions.lockTable&&e.push("TABLOCK"),this.bulkOptions.order){const t=[];for(const[e,n]of Object.entries(this.bulkOptions.order))t.push(`${e} ${n}`);t.length&&e.push(`ORDER (${t.join(", ")})`)}return e.length>0?` WITH (${e.join(",")})`:""}getBulkInsertSql(){let e="insert bulk "+this.table+"(";for(let t=0,n=this.columns.length;t<n;t++){const n=this.columns[t];0!==t&&(e+=", "),e+="["+n.name+"] "+n.type.declaration(n)}return e+=")",e+=this.getOptionsSql(),e}getTableCreationSql(){let e="CREATE TABLE "+this.table+"(\n";for(let t=0,n=this.columns.length;t<n;t++){const n=this.columns[t];0!==t&&(e+=",\n"),e+="["+n.name+"] "+n.type.declaration(n),void 0!==n.nullable&&(e+=" "+(n.nullable?"NULL":"NOT NULL"))}return e+="\n)",e}getColMetaData(){const e=new o.default(100,null,!0);e.writeUInt8(a.TYPE.COLMETADATA),e.writeUInt16LE(this.columns.length);for(let t=0,n=this.columns.length;t<n;t++){const n=this.columns[t];this.options.tdsVersion<"7_2"?e.writeUInt16LE(0):e.writeUInt32LE(0);let r=4;n.nullable?r|=1:void 0===n.nullable&&this.options.tdsVersion>="7_2"&&(r|=32768),e.writeUInt16LE(r),e.writeBuffer(n.type.generateTypeInfo(n,this.options)),n.type.hasTableName&&e.writeUsVarchar(this.table,"ucs2"),e.writeBVarchar(n.name,"ucs2")}return e.data}setTimeout(e){this.timeout=e}createDoneToken(){const e=new o.default(this.options.tdsVersion<"7_2"?9:13);e.writeUInt8(a.TYPE.DONE);return e.writeUInt16LE(0),e.writeUInt16LE(0),e.writeUInt32LE(0),this.options.tdsVersion>="7_2"&&e.writeUInt32LE(0),e.data}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}}var f=d;t.default=f,e.exports=d},9624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codepageBySortId=t.codepageByLanguageId=t.Flags=t.Collation=void 0;const n={1025:"CP1256",1028:"CP950",1029:"CP1250",1030:"CP1252",1032:"CP1253",1033:"CP1252",1034:"CP1252",1035:"CP1252",1036:"CP1252",1037:"CP1255",1038:"CP1250",1039:"CP1252",1041:"CP932",1042:"CP949",1044:"CP1252",1045:"CP1250",1047:"CP1252",1048:"CP1250",1049:"CP1251",1050:"CP1250",1051:"CP1250",1052:"CP1250",1054:"CP874",1055:"CP1254",1056:"CP1256",1058:"CP1251",1060:"CP1250",1061:"CP1257",1062:"CP1257",1063:"CP1257",1065:"CP1256",1066:"CP1258",1068:"CP1254",1070:"CP1252",1071:"CP1251",1083:"CP1252",1087:"CP1251",1090:"CP1250",1091:"CP1254",1092:"CP1251",1106:"CP1252",1122:"CP1252",1133:"CP1251",1146:"CP1252",1148:"CP1252",1150:"CP1252",1152:"CP1256",1155:"CP1252",1157:"CP1251",1164:"CP1256",2052:"CP936",2074:"CP1250",2092:"CP1251",2107:"CP1252",2143:"CP1252",3076:"CP950",3082:"CP1252",3098:"CP1251",5124:"CP950",5146:"CP1250",8218:"CP1251",1031:"CP1252",1079:"CP1252"};t.codepageByLanguageId=n;const r={30:"CP437",31:"CP437",32:"CP437",33:"CP437",34:"CP437",40:"CP850",41:"CP850",42:"CP850",43:"CP850",44:"CP850",49:"CP850",51:"CP1252",52:"CP1252",53:"CP1252",54:"CP1252",55:"CP850",56:"CP850",57:"CP850",58:"CP850",59:"CP850",60:"CP850",61:"CP850",80:"CP1250",81:"CP1250",82:"CP1250",83:"CP1250",84:"CP1250",85:"CP1250",86:"CP1250",87:"CP1250",88:"CP1250",89:"CP1250",90:"CP1250",91:"CP1250",92:"CP1250",93:"CP1250",94:"CP1250",95:"CP1250",96:"CP1250",104:"CP1251",105:"CP1251",106:"CP1251",107:"CP1251",108:"CP1251",112:"CP1253",113:"CP1253",114:"CP1253",120:"CP1253",121:"CP1253",122:"CP1253",124:"CP1253",128:"CP1254",129:"CP1254",130:"CP1254",136:"CP1255",137:"CP1255",138:"CP1255",144:"CP1256",145:"CP1256",146:"CP1256",152:"CP1257",153:"CP1257",154:"CP1257",155:"CP1257",156:"CP1257",157:"CP1257",158:"CP1257",159:"CP1257",160:"CP1257",183:"CP1252",184:"CP1252",185:"CP1252",186:"CP1252"};t.codepageBySortId=r;const i={IGNORE_CASE:1,IGNORE_ACCENT:2,IGNORE_KANA:4,IGNORE_WIDTH:8,BINARY:16,BINARY2:32,UTF8:64};t.Flags=i,t.Collation=class{static fromBuffer(e,t=0){let n=(15&e[t+2])<<16;n|=e[t+1]<<8,n|=e[t+0];let r=(15&e[t+3])<<4;return r|=(240&e[t+2])>>>4,new this(n,r,(240&e[t+3])>>>4,e[t+4])}constructor(e,t,o,s){if(this.lcid=void 0,this.flags=void 0,this.version=void 0,this.sortId=void 0,this.codepage=void 0,this.buffer=void 0,this.buffer=void 0,this.lcid=e,this.flags=t,this.version=o,this.sortId=s,this.flags&i.UTF8)this.codepage="utf-8";else if(this.sortId)this.codepage=r[this.sortId];else{const e=65535&this.lcid;this.codepage=n[e]}}toBuffer(){return this.buffer||(this.buffer=Buffer.alloc(5),this.buffer[0]=255&this.lcid,this.buffer[1]=this.lcid>>>8&255,this.buffer[2]=this.lcid>>>16&15|(15&this.flags)<<4,this.buffer[3]=(240&this.flags)>>>4|(15&this.version)<<4,this.buffer[4]=255&this.sortId),this.buffer}}},7736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=U(n(6113)),i=U(n(2037)),o=U(n(9523)),s=U(n(2057)),a=n(2781),c=n(493),u=U(n(6733)),l=U(n(5170)),h=n(2361),d=n(4079),f=n(1020),p=n(8037),m=U(n(2415)),g=U(n(6654)),y=U(n(144)),_=U(n(9276)),v=U(n(3091)),E=U(n(8979)),w=U(n(283)),b=n(2418),T=n(3326),S=n(8871),A=n(4415),O=n(1117),C=n(756),I=U(n(1030)),R=n(7439),N=n(3357),P=n(7983),D=n(2498),k=U(n(6630)),M=n(3134),L=n(7310),x=n(2480);function U(e){return e&&e.__esModule?e:{default:e}}class F extends h.EventEmitter{constructor(e){if(super(),this.fedAuthRequired=void 0,this.config=void 0,this.secureContextOptions=void 0,this.inTransaction=void 0,this.transactionDescriptors=void 0,this.transactionDepth=void 0,this.isSqlBatch=void 0,this.curTransientRetryCount=void 0,this.transientErrorLookup=void 0,this.closed=void 0,this.loginError=void 0,this.debug=void 0,this.ntlmpacket=void 0,this.ntlmpacketBuffer=void 0,this.routingData=void 0,this.messageIo=void 0,this.state=void 0,this.resetConnectionOnNextRequest=void 0,this.request=void 0,this.procReturnStatusValue=void 0,this.socket=void 0,this.messageBuffer=void 0,this.connectTimer=void 0,this.cancelTimer=void 0,this.requestTimer=void 0,this.retryTimer=void 0,this._cancelAfterRequestSent=void 0,this.databaseCollation=void 0,"object"!=typeof e||null===e)throw new TypeError('The "config" argument is required and must be of type Object.');if("string"!=typeof e.server)throw new TypeError('The "config.server" property is required and must be of type string.');let t;if(this.fedAuthRequired=!1,void 0!==e.authentication){if("object"!=typeof e.authentication||null===e.authentication)throw new TypeError('The "config.authentication" property must be of type Object.');const n=e.authentication.type,r=void 0===e.authentication.options?{}:e.authentication.options;if("string"!=typeof n)throw new TypeError('The "config.authentication.type" property must be of type string.');if("default"!==n&&"ntlm"!==n&&"azure-active-directory-password"!==n&&"azure-active-directory-access-token"!==n&&"azure-active-directory-msi-vm"!==n&&"azure-active-directory-msi-app-service"!==n&&"azure-active-directory-service-principal-secret"!==n&&"azure-active-directory-default"!==n)throw new TypeError('The "type" property must one of "default", "ntlm", "azure-active-directory-password", "azure-active-directory-access-token", "azure-active-directory-default", "azure-active-directory-msi-vm" or "azure-active-directory-msi-app-service" or "azure-active-directory-service-principal-secret".');if("object"!=typeof r||null===r)throw new TypeError('The "config.authentication.options" property must be of type object.');if("ntlm"===n){if("string"!=typeof r.domain)throw new TypeError('The "config.authentication.options.domain" property must be of type string.');if(void 0!==r.userName&&"string"!=typeof r.userName)throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==r.password&&"string"!=typeof r.password)throw new TypeError('The "config.authentication.options.password" property must be of type string.');t={type:"ntlm",options:{userName:r.userName,password:r.password,domain:r.domain&&r.domain.toUpperCase()}}}else if("azure-active-directory-password"===n){if("string"!=typeof r.clientId)throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');if(void 0!==r.userName&&"string"!=typeof r.userName)throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==r.password&&"string"!=typeof r.password)throw new TypeError('The "config.authentication.options.password" property must be of type string.');if(void 0!==r.tenantId&&"string"!=typeof r.tenantId)throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.');t={type:"azure-active-directory-password",options:{userName:r.userName,password:r.password,tenantId:r.tenantId,clientId:r.clientId}}}else if("azure-active-directory-access-token"===n){if("string"!=typeof r.token)throw new TypeError('The "config.authentication.options.token" property must be of type string.');t={type:"azure-active-directory-access-token",options:{token:r.token}}}else if("azure-active-directory-msi-vm"===n){if(void 0!==r.clientId&&"string"!=typeof r.clientId)throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');t={type:"azure-active-directory-msi-vm",options:{clientId:r.clientId}}}else if("azure-active-directory-default"===n){if(void 0!==r.clientId&&"string"!=typeof r.clientId)throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');t={type:"azure-active-directory-default",options:{clientId:r.clientId}}}else if("azure-active-directory-msi-app-service"===n){if(void 0!==r.clientId&&"string"!=typeof r.clientId)throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');t={type:"azure-active-directory-msi-app-service",options:{clientId:r.clientId}}}else if("azure-active-directory-service-principal-secret"===n){if("string"!=typeof r.clientId)throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');if("string"!=typeof r.clientSecret)throw new TypeError('The "config.authentication.options.clientSecret" property must be of type string.');if("string"!=typeof r.tenantId)throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.');t={type:"azure-active-directory-service-principal-secret",options:{clientId:r.clientId,clientSecret:r.clientSecret,tenantId:r.tenantId}}}else{if(void 0!==r.userName&&"string"!=typeof r.userName)throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==r.password&&"string"!=typeof r.password)throw new TypeError('The "config.authentication.options.password" property must be of type string.');t={type:"default",options:{userName:r.userName,password:r.password}}}}else t={type:"default",options:{userName:void 0,password:void 0}};if(this.config={server:e.server,authentication:t,options:{abortTransactionOnError:!1,appName:void 0,camelCaseColumns:!1,cancelTimeout:5e3,columnEncryptionKeyCacheTTL:72e5,columnEncryptionSetting:!1,columnNameReplacer:void 0,connectionRetryInterval:500,connectTimeout:15e3,connectionIsolationLevel:T.ISOLATION_LEVEL.READ_COMMITTED,cryptoCredentialsDetails:{},database:void 0,datefirst:7,dateFormat:"mdy",debug:{data:!1,packet:!1,payload:!1,token:!1},enableAnsiNull:!0,enableAnsiNullDefault:!0,enableAnsiPadding:!0,enableAnsiWarnings:!0,enableArithAbort:!0,enableConcatNullYieldsNull:!0,enableCursorCloseOnCommit:null,enableImplicitTransactions:!1,enableNumericRoundabort:!1,enableQuotedIdentifier:!0,encrypt:!0,fallbackToDefaultDb:!1,encryptionKeyStoreProviders:void 0,instanceName:void 0,isolationLevel:T.ISOLATION_LEVEL.READ_COMMITTED,language:"us_english",localAddress:void 0,maxRetriesOnTransientErrors:3,multiSubnetFailover:!1,packetSize:4096,port:1433,readOnlyIntent:!1,requestTimeout:15e3,rowCollectionOnDone:!1,rowCollectionOnRequestCompletion:!1,serverName:void 0,serverSupportsColumnEncryption:!1,tdsVersion:"7_4",textsize:2147483647,trustedServerNameAE:void 0,trustServerCertificate:!1,useColumnNames:!1,useUTC:!0,workstationId:void 0,lowerCaseGuids:!1}},e.options){if(e.options.port&&e.options.instanceName)throw new Error("Port and instanceName are mutually exclusive, but "+e.options.port+" and "+e.options.instanceName+" provided");if(void 0!==e.options.abortTransactionOnError){if("boolean"!=typeof e.options.abortTransactionOnError&&null!==e.options.abortTransactionOnError)throw new TypeError('The "config.options.abortTransactionOnError" property must be of type string or null.');this.config.options.abortTransactionOnError=e.options.abortTransactionOnError}if(void 0!==e.options.appName){if("string"!=typeof e.options.appName)throw new TypeError('The "config.options.appName" property must be of type string.');this.config.options.appName=e.options.appName}if(void 0!==e.options.camelCaseColumns){if("boolean"!=typeof e.options.camelCaseColumns)throw new TypeError('The "config.options.camelCaseColumns" property must be of type boolean.');this.config.options.camelCaseColumns=e.options.camelCaseColumns}if(void 0!==e.options.cancelTimeout){if("number"!=typeof e.options.cancelTimeout)throw new TypeError('The "config.options.cancelTimeout" property must be of type number.');this.config.options.cancelTimeout=e.options.cancelTimeout}if(e.options.columnNameReplacer){if("function"!=typeof e.options.columnNameReplacer)throw new TypeError('The "config.options.cancelTimeout" property must be of type function.');this.config.options.columnNameReplacer=e.options.columnNameReplacer}if(void 0!==e.options.connectionIsolationLevel&&((0,T.assertValidIsolationLevel)(e.options.connectionIsolationLevel,"config.options.connectionIsolationLevel"),this.config.options.connectionIsolationLevel=e.options.connectionIsolationLevel),void 0!==e.options.connectTimeout){if("number"!=typeof e.options.connectTimeout)throw new TypeError('The "config.options.connectTimeout" property must be of type number.');this.config.options.connectTimeout=e.options.connectTimeout}if(void 0!==e.options.cryptoCredentialsDetails){if("object"!=typeof e.options.cryptoCredentialsDetails||null===e.options.cryptoCredentialsDetails)throw new TypeError('The "config.options.cryptoCredentialsDetails" property must be of type Object.');this.config.options.cryptoCredentialsDetails=e.options.cryptoCredentialsDetails}if(void 0!==e.options.database){if("string"!=typeof e.options.database)throw new TypeError('The "config.options.database" property must be of type string.');this.config.options.database=e.options.database}if(void 0!==e.options.datefirst){if("number"!=typeof e.options.datefirst&&null!==e.options.datefirst)throw new TypeError('The "config.options.datefirst" property must be of type number.');if(null!==e.options.datefirst&&(e.options.datefirst<1||e.options.datefirst>7))throw new RangeError('The "config.options.datefirst" property must be >= 1 and <= 7');this.config.options.datefirst=e.options.datefirst}if(void 0!==e.options.dateFormat){if("string"!=typeof e.options.dateFormat&&null!==e.options.dateFormat)throw new TypeError('The "config.options.dateFormat" property must be of type string or null.');this.config.options.dateFormat=e.options.dateFormat}if(e.options.debug){if(void 0!==e.options.debug.data){if("boolean"!=typeof e.options.debug.data)throw new TypeError('The "config.options.debug.data" property must be of type boolean.');this.config.options.debug.data=e.options.debug.data}if(void 0!==e.options.debug.packet){if("boolean"!=typeof e.options.debug.packet)throw new TypeError('The "config.options.debug.packet" property must be of type boolean.');this.config.options.debug.packet=e.options.debug.packet}if(void 0!==e.options.debug.payload){if("boolean"!=typeof e.options.debug.payload)throw new TypeError('The "config.options.debug.payload" property must be of type boolean.');this.config.options.debug.payload=e.options.debug.payload}if(void 0!==e.options.debug.token){if("boolean"!=typeof e.options.debug.token)throw new TypeError('The "config.options.debug.token" property must be of type boolean.');this.config.options.debug.token=e.options.debug.token}}if(void 0!==e.options.enableAnsiNull){if("boolean"!=typeof e.options.enableAnsiNull&&null!==e.options.enableAnsiNull)throw new TypeError('The "config.options.enableAnsiNull" property must be of type boolean or null.');this.config.options.enableAnsiNull=e.options.enableAnsiNull}if(void 0!==e.options.enableAnsiNullDefault){if("boolean"!=typeof e.options.enableAnsiNullDefault&&null!==e.options.enableAnsiNullDefault)throw new TypeError('The "config.options.enableAnsiNullDefault" property must be of type boolean or null.');this.config.options.enableAnsiNullDefault=e.options.enableAnsiNullDefault}if(void 0!==e.options.enableAnsiPadding){if("boolean"!=typeof e.options.enableAnsiPadding&&null!==e.options.enableAnsiPadding)throw new TypeError('The "config.options.enableAnsiPadding" property must be of type boolean or null.');this.config.options.enableAnsiPadding=e.options.enableAnsiPadding}if(void 0!==e.options.enableAnsiWarnings){if("boolean"!=typeof e.options.enableAnsiWarnings&&null!==e.options.enableAnsiWarnings)throw new TypeError('The "config.options.enableAnsiWarnings" property must be of type boolean or null.');this.config.options.enableAnsiWarnings=e.options.enableAnsiWarnings}if(void 0!==e.options.enableArithAbort){if("boolean"!=typeof e.options.enableArithAbort&&null!==e.options.enableArithAbort)throw new TypeError('The "config.options.enableArithAbort" property must be of type boolean or null.');this.config.options.enableArithAbort=e.options.enableArithAbort}if(void 0!==e.options.enableConcatNullYieldsNull){if("boolean"!=typeof e.options.enableConcatNullYieldsNull&&null!==e.options.enableConcatNullYieldsNull)throw new TypeError('The "config.options.enableConcatNullYieldsNull" property must be of type boolean or null.');this.config.options.enableConcatNullYieldsNull=e.options.enableConcatNullYieldsNull}if(void 0!==e.options.enableCursorCloseOnCommit){if("boolean"!=typeof e.options.enableCursorCloseOnCommit&&null!==e.options.enableCursorCloseOnCommit)throw new TypeError('The "config.options.enableCursorCloseOnCommit" property must be of type boolean or null.');this.config.options.enableCursorCloseOnCommit=e.options.enableCursorCloseOnCommit}if(void 0!==e.options.enableImplicitTransactions){if("boolean"!=typeof e.options.enableImplicitTransactions&&null!==e.options.enableImplicitTransactions)throw new TypeError('The "config.options.enableImplicitTransactions" property must be of type boolean or null.');this.config.options.enableImplicitTransactions=e.options.enableImplicitTransactions}if(void 0!==e.options.enableNumericRoundabort){if("boolean"!=typeof e.options.enableNumericRoundabort&&null!==e.options.enableNumericRoundabort)throw new TypeError('The "config.options.enableNumericRoundabort" property must be of type boolean or null.');this.config.options.enableNumericRoundabort=e.options.enableNumericRoundabort}if(void 0!==e.options.enableQuotedIdentifier){if("boolean"!=typeof e.options.enableQuotedIdentifier&&null!==e.options.enableQuotedIdentifier)throw new TypeError('The "config.options.enableQuotedIdentifier" property must be of type boolean or null.');this.config.options.enableQuotedIdentifier=e.options.enableQuotedIdentifier}if(void 0!==e.options.encrypt){if("boolean"!=typeof e.options.encrypt)throw new TypeError('The "config.options.encrypt" property must be of type boolean.');this.config.options.encrypt=e.options.encrypt}if(void 0!==e.options.fallbackToDefaultDb){if("boolean"!=typeof e.options.fallbackToDefaultDb)throw new TypeError('The "config.options.fallbackToDefaultDb" property must be of type boolean.');this.config.options.fallbackToDefaultDb=e.options.fallbackToDefaultDb}if(void 0!==e.options.instanceName){if("string"!=typeof e.options.instanceName)throw new TypeError('The "config.options.instanceName" property must be of type string.');this.config.options.instanceName=e.options.instanceName,this.config.options.port=void 0}if(void 0!==e.options.isolationLevel&&((0,T.assertValidIsolationLevel)(e.options.isolationLevel,"config.options.isolationLevel"),this.config.options.isolationLevel=e.options.isolationLevel),void 0!==e.options.language){if("string"!=typeof e.options.language&&null!==e.options.language)throw new TypeError('The "config.options.language" property must be of type string or null.');this.config.options.language=e.options.language}if(void 0!==e.options.localAddress){if("string"!=typeof e.options.localAddress)throw new TypeError('The "config.options.localAddress" property must be of type string.');this.config.options.localAddress=e.options.localAddress}if(void 0!==e.options.multiSubnetFailover){if("boolean"!=typeof e.options.multiSubnetFailover)throw new TypeError('The "config.options.multiSubnetFailover" property must be of type boolean.');this.config.options.multiSubnetFailover=e.options.multiSubnetFailover}if(void 0!==e.options.packetSize){if("number"!=typeof e.options.packetSize)throw new TypeError('The "config.options.packetSize" property must be of type number.');this.config.options.packetSize=e.options.packetSize}if(void 0!==e.options.port){if("number"!=typeof e.options.port)throw new TypeError('The "config.options.port" property must be of type number.');if(e.options.port<=0||e.options.port>=65536)throw new RangeError('The "config.options.port" property must be > 0 and < 65536');this.config.options.port=e.options.port,this.config.options.instanceName=void 0}if(void 0!==e.options.readOnlyIntent){if("boolean"!=typeof e.options.readOnlyIntent)throw new TypeError('The "config.options.readOnlyIntent" property must be of type boolean.');this.config.options.readOnlyIntent=e.options.readOnlyIntent}if(void 0!==e.options.requestTimeout){if("number"!=typeof e.options.requestTimeout)throw new TypeError('The "config.options.requestTimeout" property must be of type number.');this.config.options.requestTimeout=e.options.requestTimeout}if(void 0!==e.options.maxRetriesOnTransientErrors){if("number"!=typeof e.options.maxRetriesOnTransientErrors)throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be of type number.');if(e.options.maxRetriesOnTransientErrors<0)throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be equal or greater than 0.');this.config.options.maxRetriesOnTransientErrors=e.options.maxRetriesOnTransientErrors}if(void 0!==e.options.connectionRetryInterval){if("number"!=typeof e.options.connectionRetryInterval)throw new TypeError('The "config.options.connectionRetryInterval" property must be of type number.');if(e.options.connectionRetryInterval<=0)throw new TypeError('The "config.options.connectionRetryInterval" property must be greater than 0.');this.config.options.connectionRetryInterval=e.options.connectionRetryInterval}if(void 0!==e.options.rowCollectionOnDone){if("boolean"!=typeof e.options.rowCollectionOnDone)throw new TypeError('The "config.options.rowCollectionOnDone" property must be of type boolean.');this.config.options.rowCollectionOnDone=e.options.rowCollectionOnDone}if(void 0!==e.options.rowCollectionOnRequestCompletion){if("boolean"!=typeof e.options.rowCollectionOnRequestCompletion)throw new TypeError('The "config.options.rowCollectionOnRequestCompletion" property must be of type boolean.');this.config.options.rowCollectionOnRequestCompletion=e.options.rowCollectionOnRequestCompletion}if(void 0!==e.options.tdsVersion){if("string"!=typeof e.options.tdsVersion)throw new TypeError('The "config.options.tdsVersion" property must be of type string.');this.config.options.tdsVersion=e.options.tdsVersion}if(void 0!==e.options.textsize){if("number"!=typeof e.options.textsize&&null!==e.options.textsize)throw new TypeError('The "config.options.textsize" property must be of type number or null.');if(e.options.textsize>2147483647)throw new TypeError('The "config.options.textsize" can\'t be greater than 2147483647.');if(e.options.textsize<-1)throw new TypeError('The "config.options.textsize" can\'t be smaller than -1.');this.config.options.textsize=0|e.options.textsize}if(void 0!==e.options.trustServerCertificate){if("boolean"!=typeof e.options.trustServerCertificate)throw new TypeError('The "config.options.trustServerCertificate" property must be of type boolean.');this.config.options.trustServerCertificate=e.options.trustServerCertificate}if(void 0!==e.options.useColumnNames){if("boolean"!=typeof e.options.useColumnNames)throw new TypeError('The "config.options.useColumnNames" property must be of type boolean.');this.config.options.useColumnNames=e.options.useColumnNames}if(void 0!==e.options.useUTC){if("boolean"!=typeof e.options.useUTC)throw new TypeError('The "config.options.useUTC" property must be of type boolean.');this.config.options.useUTC=e.options.useUTC}if(void 0!==e.options.workstationId){if("string"!=typeof e.options.workstationId)throw new TypeError('The "config.options.workstationId" property must be of type string.');this.config.options.workstationId=e.options.workstationId}if(void 0!==e.options.lowerCaseGuids){if("boolean"!=typeof e.options.lowerCaseGuids)throw new TypeError('The "config.options.lowerCaseGuids" property must be of type boolean.');this.config.options.lowerCaseGuids=e.options.lowerCaseGuids}}this.secureContextOptions=this.config.options.cryptoCredentialsDetails,void 0===this.secureContextOptions.secureOptions&&(this.secureContextOptions=Object.create(this.secureContextOptions,{secureOptions:{value:s.default.SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS}})),this.debug=this.createDebug(),this.inTransaction=!1,this.transactionDescriptors=[Buffer.from([0,0,0,0,0,0,0,0])],this.transactionDepth=0,this.isSqlBatch=!1,this.closed=!1,this.messageBuffer=Buffer.alloc(0),this.curTransientRetryCount=0,this.transientErrorLookup=new f.TransientErrorLookup,this.state=this.STATE.INITIALIZED,this._cancelAfterRequestSent=()=>{this.messageIo.sendMessage(p.TYPE.ATTENTION),this.createCancelTimer()}}connect(e){if(this.state!==this.STATE.INITIALIZED)throw new S.ConnectionError("`.connect` can not be called on a Connection in `"+this.state.name+"` state.");if(e){const t=t=>{this.removeListener("error",n),e(t)},n=n=>{this.removeListener("connect",t),e(n)};this.once("connect",t),this.once("error",n)}this.transitionTo(this.STATE.CONNECTING)}on(e,t){return super.on(e,t)}emit(e,...t){return super.emit(e,...t)}close(){this.transitionTo(this.STATE.FINAL)}initialiseConnection(){const e=this.createConnectTimer();return this.config.options.port?this.connectOnPort(this.config.options.port,this.config.options.multiSubnetFailover,e):(0,d.instanceLookup)({server:this.config.server,instanceName:this.config.options.instanceName,timeout:this.config.options.connectTimeout,signal:e}).then((t=>{process.nextTick((()=>{this.connectOnPort(t,this.config.options.multiSubnetFailover,e)}))}),(e=>{this.clearConnectTimer(),"AbortError"!==e.name&&process.nextTick((()=>{this.emit("connect",new S.ConnectionError(e.message,"EINSTLOOKUP"))}))}))}cleanupConnection(e){if(!this.closed){this.clearConnectTimer(),this.clearRequestTimer(),this.clearRetryTimer(),this.closeConnection(),1===e?this.emit("rerouting"):2!==e&&process.nextTick((()=>{this.emit("end")}));const t=this.request;if(t){const e=new S.RequestError("Connection closed before request completed.","ECLOSE");t.callback(e),this.request=void 0}this.closed=!0,this.loginError=void 0}}createDebug(){const e=new l.default(this.config.options.debug);return e.on("debug",(e=>{this.emit("debug",e)})),e}createTokenStreamParser(e,t){return new b.Parser(e,this.debug,t,this.config.options)}connectOnPort(e,t,n){const r={host:this.routingData?this.routingData.server:this.config.server,port:this.routingData?this.routingData.port:e,localAddress:this.config.options.localAddress};(t?A.connectInParallel:A.connectInSequence)(r,o.default.lookup,n).then((e=>{process.nextTick((()=>{e.on("error",(e=>{this.socketError(e)})),e.on("close",(()=>{this.socketClose()})),e.on("end",(()=>{this.socketEnd()})),e.setKeepAlive(!0,3e4),this.messageIo=new w.default(e,this.config.options.packetSize,this.debug),this.messageIo.on("secure",(e=>{this.emit("secure",e)})),this.socket=e,this.closed=!1,this.debug.log("connected to "+this.config.server+":"+this.config.options.port),this.sendPreLogin(),this.transitionTo(this.STATE.SENT_PRELOGIN)}))}),(e=>{this.clearConnectTimer(),"AbortError"!==e.name&&process.nextTick((()=>{this.socketError(e)}))}))}closeConnection(){this.socket&&this.socket.destroy()}createConnectTimer(){const e=new N.AbortController;return this.connectTimer=setTimeout((()=>{e.abort(),this.connectTimeout()}),this.config.options.connectTimeout),e.signal}createCancelTimer(){this.clearCancelTimer();const e=this.config.options.cancelTimeout;e>0&&(this.cancelTimer=setTimeout((()=>{this.cancelTimeout()}),e))}createRequestTimer(){this.clearRequestTimer();const e=this.request,t=void 0!==e.timeout?e.timeout:this.config.options.requestTimeout;t&&(this.requestTimer=setTimeout((()=>{this.requestTimeout()}),t))}createRetryTimer(){this.clearRetryTimer(),this.retryTimer=setTimeout((()=>{this.retryTimeout()}),this.config.options.connectionRetryInterval)}connectTimeout(){const e=`Failed to connect to ${this.config.server}${this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`} in ${this.config.options.connectTimeout}ms`;this.debug.log(e),this.emit("connect",new S.ConnectionError(e,"ETIMEOUT")),this.connectTimer=void 0,this.dispatchEvent("connectTimeout")}cancelTimeout(){const e=`Failed to cancel request in ${this.config.options.cancelTimeout}ms`;this.debug.log(e),this.dispatchEvent("socketError",new S.ConnectionError(e,"ETIMEOUT"))}requestTimeout(){this.requestTimer=void 0;const e=this.request;e.cancel();const t="Timeout: Request failed to complete in "+(void 0!==e.timeout?e.timeout:this.config.options.requestTimeout)+"ms";e.error=new S.RequestError(t,"ETIMEOUT")}retryTimeout(){this.retryTimer=void 0,this.emit("retry"),this.transitionTo(this.STATE.CONNECTING)}clearConnectTimer(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=void 0)}clearCancelTimer(){this.cancelTimer&&(clearTimeout(this.cancelTimer),this.cancelTimer=void 0)}clearRequestTimer(){this.requestTimer&&(clearTimeout(this.requestTimer),this.requestTimer=void 0)}clearRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0)}transitionTo(e){this.state!==e?(this.state&&this.state.exit&&this.state.exit.call(this,e),this.debug.log("State change: "+(this.state?this.state.name:"undefined")+" -> "+e.name),this.state=e,this.state.enter&&this.state.enter.apply(this)):this.debug.log("State is already "+e.name)}getEventHandler(e){const t=this.state.events[e];if(!t)throw new Error(`No event '${e}' in state '${this.state.name}'`);return t}dispatchEvent(e,...t){const n=this.state.events[e];n?n.apply(this,t):(this.emit("error",new Error(`No event '${e}' in state '${this.state.name}'`)),this.close())}socketError(e){if(this.state===this.STATE.CONNECTING||this.state===this.STATE.SENT_TLSSSLNEGOTIATION){const t=`Failed to connect to ${this.config.server}:${this.config.options.port} - ${e.message}`;this.debug.log(t),this.emit("connect",new S.ConnectionError(t,"ESOCKET"))}else{const t=`Connection lost - ${e.message}`;this.debug.log(t),this.emit("error",new S.ConnectionError(t,"ESOCKET"))}this.dispatchEvent("socketError",e)}socketEnd(){if(this.debug.log("socket ended"),this.state!==this.STATE.FINAL){const e=new Error("socket hang up");e.code="ECONNRESET",this.socketError(e)}}socketClose(){if(this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed"),this.state===this.STATE.REROUTING)this.debug.log("Rerouting to "+this.routingData.server+":"+this.routingData.port),this.dispatchEvent("reconnect");else if(this.state===this.STATE.TRANSIENT_FAILURE_RETRY){const e=this.routingData?this.routingData.server:this.config.server,t=this.routingData?this.routingData.port:this.config.options.port;this.debug.log("Retry after transient failure connecting to "+e+":"+t),this.dispatchEvent("retry")}else this.transitionTo(this.STATE.FINAL)}sendPreLogin(){const[,e,t,n]=/^(\d+)\.(\d+)\.(\d+)/.exec(M.version)??["0.0.0","0","0","0"],r=new m.default({encrypt:this.config.options.encrypt,version:{major:Number(e),minor:Number(t),build:Number(n),subbuild:0}});this.messageIo.sendMessage(p.TYPE.PRELOGIN,r.data),this.debug.payload((function(){return r.toString("  ")}))}sendLogin7Packet(){const e=new g.default({tdsVersion:C.versions[this.config.options.tdsVersion],packetSize:this.config.options.packetSize,clientProgVer:0,clientPid:process.pid,connectionId:0,clientTimeZone:(new Date).getTimezoneOffset(),clientLcid:1033}),{authentication:t}=this.config;switch(t.type){case"azure-active-directory-password":e.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"default"};break;case"azure-active-directory-access-token":e.fedAuth={type:"SECURITYTOKEN",echo:this.fedAuthRequired,fedAuthToken:t.options.token};break;case"azure-active-directory-msi-vm":case"azure-active-directory-default":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":e.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"integrated"};break;case"ntlm":e.sspi=(0,R.createNTLMRequest)({domain:t.options.domain});break;default:e.userName=t.options.userName,e.password=t.options.password}e.hostname=this.config.options.workstationId||i.default.hostname(),e.serverName=this.routingData?this.routingData.server:this.config.server,e.appName=this.config.options.appName||"Tedious",e.libraryName=O.name,e.language=this.config.options.language,e.database=this.config.options.database,e.clientId=Buffer.from([1,2,3,4,5,6]),e.readOnlyIntent=this.config.options.readOnlyIntent,e.initDbFatal=!this.config.options.fallbackToDefaultDb,this.routingData=void 0,this.messageIo.sendMessage(p.TYPE.LOGIN7,e.toBuffer()),this.debug.payload((function(){return e.toString("  ")}))}sendFedAuthTokenMessage(e){const t=Buffer.byteLength(e,"ucs2"),n=Buffer.alloc(8+t);let r=0;r=n.writeUInt32LE(t+4,r),r=n.writeUInt32LE(t,r),n.write(e,r,"ucs2"),this.messageIo.sendMessage(p.TYPE.FEDAUTH_TOKEN,n),this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}sendInitialSql(){const e=new E.default(this.getInitialSql(),this.currentTransactionDescriptor(),this.config.options),t=new I.default({type:p.TYPE.SQL_BATCH});this.messageIo.outgoingMessageStream.write(t),a.Readable.from(e).pipe(t)}getInitialSql(){const e=[];return!0===this.config.options.enableAnsiNull?e.push("set ansi_nulls on"):!1===this.config.options.enableAnsiNull&&e.push("set ansi_nulls off"),!0===this.config.options.enableAnsiNullDefault?e.push("set ansi_null_dflt_on on"):!1===this.config.options.enableAnsiNullDefault&&e.push("set ansi_null_dflt_on off"),!0===this.config.options.enableAnsiPadding?e.push("set ansi_padding on"):!1===this.config.options.enableAnsiPadding&&e.push("set ansi_padding off"),!0===this.config.options.enableAnsiWarnings?e.push("set ansi_warnings on"):!1===this.config.options.enableAnsiWarnings&&e.push("set ansi_warnings off"),!0===this.config.options.enableArithAbort?e.push("set arithabort on"):!1===this.config.options.enableArithAbort&&e.push("set arithabort off"),!0===this.config.options.enableConcatNullYieldsNull?e.push("set concat_null_yields_null on"):!1===this.config.options.enableConcatNullYieldsNull&&e.push("set concat_null_yields_null off"),!0===this.config.options.enableCursorCloseOnCommit?e.push("set cursor_close_on_commit on"):!1===this.config.options.enableCursorCloseOnCommit&&e.push("set cursor_close_on_commit off"),null!==this.config.options.datefirst&&e.push(`set datefirst ${this.config.options.datefirst}`),null!==this.config.options.dateFormat&&e.push(`set dateformat ${this.config.options.dateFormat}`),!0===this.config.options.enableImplicitTransactions?e.push("set implicit_transactions on"):!1===this.config.options.enableImplicitTransactions&&e.push("set implicit_transactions off"),null!==this.config.options.language&&e.push(`set language ${this.config.options.language}`),!0===this.config.options.enableNumericRoundabort?e.push("set numeric_roundabort on"):!1===this.config.options.enableNumericRoundabort&&e.push("set numeric_roundabort off"),!0===this.config.options.enableQuotedIdentifier?e.push("set quoted_identifier on"):!1===this.config.options.enableQuotedIdentifier&&e.push("set quoted_identifier off"),null!==this.config.options.textsize&&e.push(`set textsize ${this.config.options.textsize}`),null!==this.config.options.connectionIsolationLevel&&e.push(`set transaction isolation level ${this.getIsolationLevelText(this.config.options.connectionIsolationLevel)}`),!0===this.config.options.abortTransactionOnError?e.push("set xact_abort on"):!1===this.config.options.abortTransactionOnError&&e.push("set xact_abort off"),e.join("\n")}processedInitialSql(){this.clearConnectTimer(),this.emit("connect")}execSqlBatch(e){this.makeRequest(e,p.TYPE.SQL_BATCH,new E.default(e.sqlTextOrProcedure,this.currentTransactionDescriptor(),this.config.options))}execSql(e){try{e.validateParameters(this.databaseCollation)}catch(t){return e.error=t,void process.nextTick((()=>{this.debug.log(t.message),e.callback(t)}))}const t=[];t.push({type:P.TYPES.NVarChar,name:"statement",value:e.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),e.parameters.length&&(t.push({type:P.TYPES.NVarChar,name:"params",value:e.makeParamsParameter(e.parameters),output:!1,length:void 0,precision:void 0,scale:void 0}),t.push(...e.parameters)),this.makeRequest(e,p.TYPE.RPC_REQUEST,new v.default("sp_executesql",t,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}newBulkLoad(e,t,n){let r;if(void 0===n?(n=t,r={}):r=t,"object"!=typeof r)throw new TypeError('"options" argument must be an object');return new u.default(e,this.databaseCollation,this.config.options,r,n)}execBulkLoad(e,t){if(e.executionStarted=!0,t){if(e.streamingMode)throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that was put in streaming mode.");if(e.firstRowWritten)throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that already has rows written to it.");const n=a.Readable.from(t);n.on("error",(t=>{e.rowToPacketTransform.destroy(t)})),e.rowToPacketTransform.on("error",(e=>{n.destroy(e)})),n.pipe(e.rowToPacketTransform)}else e.streamingMode||e.rowToPacketTransform.end();const n=()=>{i.cancel()},r=new D.BulkLoadPayload(e),i=new _.default(e.getBulkInsertSql(),(t=>{if(e.removeListener("cancel",n),t)return"UNKNOWN"===t.code&&(t.message+=" This is likely because the schema of the BulkLoad does not match the schema of the table you are attempting to insert into."),e.error=t,void e.callback(t);this.makeRequest(e,p.TYPE.BULK_LOAD,r)}));e.once("cancel",n),this.execSqlBatch(i)}prepare(e){const t=[];t.push({type:P.TYPES.Int,name:"handle",value:void 0,output:!0,length:void 0,precision:void 0,scale:void 0}),t.push({type:P.TYPES.NVarChar,name:"params",value:e.parameters.length?e.makeParamsParameter(e.parameters):null,output:!1,length:void 0,precision:void 0,scale:void 0}),t.push({type:P.TYPES.NVarChar,name:"stmt",value:e.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),e.preparing=!0,e.on("returnValue",((t,n)=>{"handle"===t?e.handle=n:e.error=new S.RequestError(`Tedious > Unexpected output parameter ${t} from sp_prepare`)})),this.makeRequest(e,p.TYPE.RPC_REQUEST,new v.default("sp_prepare",t,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}unprepare(e){const t=[];t.push({type:P.TYPES.Int,name:"handle",value:e.handle,output:!1,length:void 0,precision:void 0,scale:void 0}),this.makeRequest(e,p.TYPE.RPC_REQUEST,new v.default("sp_unprepare",t,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}execute(e,t){const n=[];n.push({type:P.TYPES.Int,name:"handle",value:e.handle,output:!1,length:void 0,precision:void 0,scale:void 0});try{for(let r=0,i=e.parameters.length;r<i;r++){const i=e.parameters[r];n.push({...i,value:i.type.validate(t?t[i.name]:null,this.databaseCollation)})}}catch(t){return e.error=t,void process.nextTick((()=>{this.debug.log(t.message),e.callback(t)}))}this.makeRequest(e,p.TYPE.RPC_REQUEST,new v.default("sp_execute",n,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}callProcedure(e){try{e.validateParameters(this.databaseCollation)}catch(t){return e.error=t,void process.nextTick((()=>{this.debug.log(t.message),e.callback(t)}))}this.makeRequest(e,p.TYPE.RPC_REQUEST,new v.default(e.sqlTextOrProcedure,e.parameters,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}beginTransaction(e,t="",n=this.config.options.isolationLevel){(0,T.assertValidIsolationLevel)(n,"isolationLevel");const r=new T.Transaction(t,n);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new _.default("SET TRANSACTION ISOLATION LEVEL "+r.isolationLevelToTSQL()+";BEGIN TRAN "+r.name,(t=>{this.transactionDepth++,1===this.transactionDepth&&(this.inTransaction=!0),e(t)})));const i=new _.default(void 0,(t=>e(t,this.currentTransactionDescriptor())));return this.makeRequest(i,p.TYPE.TRANSACTION_MANAGER,r.beginPayload(this.currentTransactionDescriptor()))}commitTransaction(e,t=""){const n=new T.Transaction(t);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new _.default("COMMIT TRAN "+n.name,(t=>{this.transactionDepth--,0===this.transactionDepth&&(this.inTransaction=!1),e(t)})));const r=new _.default(void 0,e);return this.makeRequest(r,p.TYPE.TRANSACTION_MANAGER,n.commitPayload(this.currentTransactionDescriptor()))}rollbackTransaction(e,t=""){const n=new T.Transaction(t);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new _.default("ROLLBACK TRAN "+n.name,(t=>{this.transactionDepth--,0===this.transactionDepth&&(this.inTransaction=!1),e(t)})));const r=new _.default(void 0,e);return this.makeRequest(r,p.TYPE.TRANSACTION_MANAGER,n.rollbackPayload(this.currentTransactionDescriptor()))}saveTransaction(e,t){const n=new T.Transaction(t);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new _.default("SAVE TRAN "+n.name,(t=>{this.transactionDepth++,e(t)})));const r=new _.default(void 0,e);return this.makeRequest(r,p.TYPE.TRANSACTION_MANAGER,n.savePayload(this.currentTransactionDescriptor()))}transaction(e,t){if("function"!=typeof e)throw new TypeError("`cb` must be a function");const n=this.inTransaction,i="_tedious_"+r.default.randomBytes(10).toString("hex"),o=(e,t,...r)=>{e?this.inTransaction&&this.state===this.STATE.LOGGED_IN?this.rollbackTransaction((n=>{t(n||e,...r)}),i):t(e,...r):n?(this.config.options.tdsVersion<"7_2"&&this.transactionDepth--,t(null,...r)):this.commitTransaction((e=>{t(e,...r)}),i)};return n?this.saveTransaction((n=>n?e(n):t?this.execSqlBatch(new _.default("SET transaction isolation level "+this.getIsolationLevelText(t),(t=>e(t,o)))):e(null,o)),i):this.beginTransaction((t=>t?e(t):e(null,o)),i,t)}makeRequest(e,t,n){if(this.state!==this.STATE.LOGGED_IN){const t="Requests can only be made in the "+this.STATE.LOGGED_IN.name+" state, not the "+this.state.name+" state";this.debug.log(t),e.callback(new S.RequestError(t,"EINVALIDSTATE"))}else if(e.canceled)process.nextTick((()=>{e.callback(new S.RequestError("Canceled.","ECANCEL"))}));else{t===p.TYPE.SQL_BATCH?this.isSqlBatch=!0:this.isSqlBatch=!1,this.request=e,e.connection=this,e.rowCount=0,e.rows=[],e.rst=[];const r=()=>{o.unpipe(i),o.destroy(new S.RequestError("Canceled.","ECANCEL")),i.ignore=!0,i.end(),e instanceof _.default&&e.paused&&e.resume()};e.once("cancel",r),this.createRequestTimer();const i=new I.default({type:t,resetConnection:this.resetConnectionOnNextRequest});this.messageIo.outgoingMessageStream.write(i),this.transitionTo(this.STATE.SENT_CLIENT_REQUEST),i.once("finish",(()=>{e.removeListener("cancel",r),e.once("cancel",this._cancelAfterRequestSent),this.resetConnectionOnNextRequest=!1,this.debug.payload((function(){return n.toString("  ")}))}));const o=a.Readable.from(n);o.once("error",(t=>{o.unpipe(i),e.error??(e.error=t),i.ignore=!0,i.end()})),o.pipe(i)}}cancel(){return!!this.request&&!this.request.canceled&&(this.request.cancel(),!0)}reset(e){const t=new _.default(this.getInitialSql(),(t=>{this.config.options.tdsVersion<"7_2"&&(this.inTransaction=!1),e(t)}));this.resetConnectionOnNextRequest=!0,this.execSqlBatch(t)}currentTransactionDescriptor(){return this.transactionDescriptors[this.transactionDescriptors.length-1]}getIsolationLevelText(e){switch(e){case T.ISOLATION_LEVEL.READ_UNCOMMITTED:return"read uncommitted";case T.ISOLATION_LEVEL.REPEATABLE_READ:return"repeatable read";case T.ISOLATION_LEVEL.SERIALIZABLE:return"serializable";case T.ISOLATION_LEVEL.SNAPSHOT:return"snapshot";default:return"read committed"}}}function B(e){return e instanceof k.default&&(e=e.errors[0]),e instanceof S.ConnectionError&&!!e.isTransient}var q=F;t.default=q,e.exports=F,F.prototype.STATE={INITIALIZED:{name:"Initialized",events:{}},CONNECTING:{name:"Connecting",enter:function(){this.initialiseConnection()},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_PRELOGIN:{name:"SentPrelogin",enter:function(){(async()=>{let e,t=Buffer.alloc(0);try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}for await(const n of e)t=Buffer.concat([t,n]);const n=new m.default(t);if(this.debug.payload((function(){return n.toString("  ")})),1===n.fedAuthRequired&&(this.fedAuthRequired=!0),"ON"===n.encryptionString||"REQ"===n.encryptionString){if(!this.config.options.encrypt)return this.emit("connect",new S.ConnectionError("Server requires encryption, set 'encrypt' config option to true.","EENCRYPT")),this.close();try{var r;this.transitionTo(this.STATE.SENT_TLSSSLNEGOTIATION),await this.messageIo.startTls(this.secureContextOptions,(null===(r=this.routingData)||void 0===r?void 0:r.server)??this.config.server,this.config.options.trustServerCertificate)}catch(e){return this.socketError(e)}}this.sendLogin7Packet();const{authentication:i}=this.config;switch(i.type){case"azure-active-directory-password":case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":case"azure-active-directory-default":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_FEDAUTH);break;case"ntlm":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM);break;default:this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}})().catch((e=>{process.nextTick((()=>{throw e}))}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},REROUTING:{name:"ReRouting",enter:function(){this.cleanupConnection(1)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},reconnect:function(){this.transitionTo(this.STATE.CONNECTING)}}},TRANSIENT_FAILURE_RETRY:{name:"TRANSIENT_FAILURE_RETRY",enter:function(){this.curTransientRetryCount++,this.cleanupConnection(2)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},retry:function(){this.createRetryTimer()}}},SENT_TLSSSLNEGOTIATION:{name:"SentTLSSSLNegotiation",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_STANDARD_LOGIN:{name:"SentLogin7WithStandardLogin",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}const t=new x.Login7TokenHandler(this),n=this.createTokenStreamParser(e,t);await(0,h.once)(n,"end"),t.loginAckReceived?t.routingData?(this.routingData=t.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL):this.loginError?B(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new S.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))})().catch((e=>{process.nextTick((()=>{throw e}))}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_NTLM:{name:"SentLogin7WithNTLMLogin",enter:function(){(async()=>{for(;;){let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}const t=new x.Login7TokenHandler(this),n=this.createTokenStreamParser(e,t);if(await(0,h.once)(n,"end"),t.loginAckReceived)return t.routingData?(this.routingData=t.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);if(!this.ntlmpacket)return this.loginError?B(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new S.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL));{const e=this.config.authentication,t=new y.default({domain:e.options.domain,userName:e.options.userName,password:e.options.password,ntlmpacket:this.ntlmpacket});this.messageIo.sendMessage(p.TYPE.NTLMAUTH_PKT,t.data),this.debug.payload((function(){return t.toString("  ")})),this.ntlmpacket=void 0}}})().catch((e=>{process.nextTick((()=>{throw e}))}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_FEDAUTH:{name:"SentLogin7Withfedauth",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}const t=new x.Login7TokenHandler(this),n=this.createTokenStreamParser(e,t);if(await(0,h.once)(n,"end"),t.loginAckReceived)return void(t.routingData?(this.routingData=t.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL));const r=t.fedAuthInfoToken;if(r&&r.stsurl&&r.spn){const e=this.config.authentication,t=new L.URL("/.default",r.spn).toString();let n,i;switch(e.type){case"azure-active-directory-password":n=new c.UsernamePasswordCredential(e.options.tenantId??"common",e.options.clientId,e.options.userName,e.options.password);break;case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":const t=e.options.clientId?[e.options.clientId,{}]:[{}];n=new c.ManagedIdentityCredential(...t);break;case"azure-active-directory-default":const r=e.options.clientId?{managedIdentityClientId:e.options.clientId}:{};n=new c.DefaultAzureCredential(r);break;case"azure-active-directory-service-principal-secret":n=new c.ClientSecretCredential(e.options.tenantId,e.options.clientId,e.options.clientSecret)}try{i=await n.getToken(t)}catch(e){return this.loginError=new k.default([new S.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH"),e]),this.emit("connect",this.loginError),void this.transitionTo(this.STATE.FINAL)}const o=i.token;this.sendFedAuthTokenMessage(o)}else this.loginError?B(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new S.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))})().catch((e=>{process.nextTick((()=>{throw e}))}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN_SENDING_INITIAL_SQL:{name:"LoggedInSendingInitialSql",enter:function(){(async()=>{let e;this.sendInitialSql();try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}const t=this.createTokenStreamParser(e,new x.InitialSqlTokenHandler(this));await(0,h.once)(t,"end"),this.transitionTo(this.STATE.LOGGED_IN),this.processedInitialSql()})().catch((e=>{process.nextTick((()=>{throw e}))}))},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN:{name:"LoggedIn",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_CLIENT_REQUEST:{name:"SentClientRequest",enter:function(){(async()=>{var e,t,n;let r;try{r=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}this.clearRequestTimer();const i=this.createTokenStreamParser(r,new x.RequestTokenHandler(this,this.request));if(null!==(e=this.request)&&void 0!==e&&e.canceled&&this.cancelTimer)return this.transitionTo(this.STATE.SENT_ATTENTION);const o=()=>{i.resume()},s=()=>{var e;i.pause(),null===(e=this.request)||void 0===e||e.once("resume",o)};null===(t=this.request)||void 0===t||t.on("pause",s),this.request instanceof _.default&&this.request.paused&&s();const a=()=>{var e,t;i.removeListener("end",c),this.request instanceof _.default&&this.request.paused&&this.request.resume(),null===(e=this.request)||void 0===e||e.removeListener("pause",s),null===(t=this.request)||void 0===t||t.removeListener("resume",o),this.transitionTo(this.STATE.SENT_ATTENTION)},c=()=>{var e,t,n,r;null===(e=this.request)||void 0===e||e.removeListener("cancel",this._cancelAfterRequestSent),null===(t=this.request)||void 0===t||t.removeListener("cancel",a),null===(n=this.request)||void 0===n||n.removeListener("pause",s),null===(r=this.request)||void 0===r||r.removeListener("resume",o),this.transitionTo(this.STATE.LOGGED_IN);const i=this.request;this.request=void 0,this.config.options.tdsVersion<"7_2"&&i.error&&this.isSqlBatch&&(this.inTransaction=!1),i.callback(i.error,i.rowCount,i.rows)};i.once("end",c),null===(n=this.request)||void 0===n||n.once("cancel",a)})()},exit:function(e){this.clearRequestTimer()},events:{socketError:function(e){const t=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),t.callback(e)}}},SENT_ATTENTION:{name:"SentAttention",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}const t=new x.AttentionTokenHandler(this,this.request),n=this.createTokenStreamParser(e,t);if(await(0,h.once)(n,"end"),t.attentionReceived){this.clearCancelTimer();const e=this.request;this.request=void 0,this.transitionTo(this.STATE.LOGGED_IN),e.error&&e.error instanceof S.RequestError&&"ETIMEOUT"===e.error.code?e.callback(e.error):e.callback(new S.RequestError("Canceled.","ECANCEL"))}})().catch((e=>{process.nextTick((()=>{throw e}))}))},events:{socketError:function(e){const t=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),t.callback(e)}}},FINAL:{name:"Final",enter:function(){this.cleanupConnection(0)},events:{connectTimeout:function(){},message:function(){},socketError:function(){}}}}},4415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectInParallel=async function(e,t,n){if(n.aborted)throw new o.default;const i=await u(e.host,t,n);return await new Promise(((t,a)=>{const c=new Array(i.length),u=[];function l(e){u.push(e),this.removeListener("error",l),this.removeListener("connect",h),this.destroy(),u.length===i.length&&(n.removeEventListener("abort",d),a(new s.default(u,"Could not connect (parallel)")))}function h(){n.removeEventListener("abort",d);for(let e=0;e<c.length;e++){const t=c[e];this!==t&&(t.removeListener("error",l),t.removeListener("connect",h),t.destroy())}t(this)}const d=()=>{for(let e=0;e<c.length;e++){const t=c[e];t.removeListener("error",l),t.removeListener("connect",h),t.destroy()}a(new o.default)};for(let t=0,n=i.length;t<n;t++){const n=c[t]=r.default.connect({...e,host:i[t].address,family:i[t].family});n.on("error",l),n.on("connect",h)}n.addEventListener("abort",d,{once:!0})}))},t.connectInSequence=async function(e,t,n){if(n.aborted)throw new o.default;const i=[],a=await u(e.host,t,n);for(const t of a)try{return await new Promise(((i,s)=>{const a=r.default.connect({...e,host:t.address,family:t.family}),c=()=>{a.removeListener("error",u),a.removeListener("connect",l),a.destroy(),s(new o.default)},u=e=>{n.removeEventListener("abort",c),a.removeListener("error",u),a.removeListener("connect",l),a.destroy(),s(e)},l=()=>{n.removeEventListener("abort",c),a.removeListener("error",u),a.removeListener("connect",l),i(a)};n.addEventListener("abort",c,{once:!0}),a.on("error",u),a.on("connect",l)}))}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw e;i.push(e);continue}throw new s.default(i,"Could not connect (sequence)")},t.lookupAllAddresses=u;var r=c(n(1808)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(5477)),o=c(n(69)),s=c(n(6630));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}async function u(e,t,n){if(n.aborted)throw new o.default;return r.default.isIPv6(e)?[{address:e,family:6}]:r.default.isIPv4(e)?[{address:e,family:4}]:await new Promise(((r,s)=>{const a=()=>{s(new o.default)};n.addEventListener("abort",a),t(i.toASCII(e),{all:!0},((e,t)=>{n.removeEventListener("abort",a),e?s(e):r(t)}))}))}},7983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeByName=t.TYPES=t.TYPE=void 0;var r=H(n(7662)),i=H(n(5309)),o=H(n(4695)),s=H(n(4961)),a=H(n(6101)),c=H(n(9705)),u=H(n(4164)),l=H(n(7420)),h=H(n(8955)),d=H(n(1635)),f=H(n(226)),p=H(n(5969)),m=H(n(7263)),g=H(n(4025)),y=H(n(7041)),_=H(n(367)),v=H(n(2510)),E=H(n(4802)),w=H(n(4799)),b=H(n(5521)),T=H(n(5792)),S=H(n(1904)),A=H(n(8442)),O=H(n(7486)),C=H(n(1481)),I=H(n(4496)),R=H(n(1337)),N=H(n(7027)),P=H(n(7617)),D=H(n(9676)),k=H(n(4647)),M=H(n(9918)),L=H(n(124)),x=H(n(6950)),U=H(n(6384)),F=H(n(8793)),B=H(n(8277)),q=H(n(4892)),j=H(n(6570));function H(e){return e&&e.__esModule?e:{default:e}}const Y={[r.default.id]:r.default,[i.default.id]:i.default,[o.default.id]:o.default,[s.default.id]:s.default,[a.default.id]:a.default,[c.default.id]:c.default,[u.default.id]:u.default,[l.default.id]:l.default,[h.default.id]:h.default,[d.default.id]:d.default,[f.default.id]:f.default,[p.default.id]:p.default,[m.default.id]:m.default,[g.default.id]:g.default,[y.default.id]:y.default,[_.default.id]:_.default,[v.default.id]:v.default,[E.default.id]:E.default,[w.default.id]:w.default,[b.default.id]:b.default,[T.default.id]:T.default,[S.default.id]:S.default,[A.default.id]:A.default,[O.default.id]:O.default,[C.default.id]:C.default,[I.default.id]:I.default,[R.default.id]:R.default,[N.default.id]:N.default,[P.default.id]:P.default,[D.default.id]:D.default,[k.default.id]:k.default,[M.default.id]:M.default,[L.default.id]:L.default,[x.default.id]:x.default,[U.default.id]:U.default,[F.default.id]:F.default,[B.default.id]:B.default,[q.default.id]:q.default,[j.default.id]:j.default};t.TYPE=Y;const V={TinyInt:i.default,Bit:o.default,SmallInt:s.default,Int:a.default,SmallDateTime:c.default,Real:u.default,Money:l.default,DateTime:h.default,Float:d.default,Decimal:f.default,Numeric:p.default,SmallMoney:m.default,BigInt:g.default,Image:y.default,Text:_.default,UniqueIdentifier:v.default,NText:w.default,VarBinary:I.default,VarChar:R.default,Binary:N.default,Char:P.default,NVarChar:D.default,NChar:k.default,Xml:M.default,Time:L.default,Date:x.default,DateTime2:U.default,DateTimeOffset:F.default,UDT:B.default,TVP:q.default,Variant:j.default};t.TYPES=V;const $=V;t.typeByName=$},4025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4802)),i=o(n(9546));function o(e){return e&&e.__esModule?e:{default:e}}const s=Buffer.from([8]),a=Buffer.from([0]),c={id:127,type:"INT8",name:"BigInt",declaration:function(){return"bigint"},generateTypeInfo:()=>Buffer.from([r.default.id,8]),generateParameterLength:(e,t)=>null==e.value?a:s,*generateParameterData(e,t){if(null==e.value)return;const n=new i.default(8);n.writeInt64LE(Number(e.value)),yield n.data},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw new TypeError("Invalid number.");if(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER)throw new TypeError(`Value must be between ${Number.MIN_SAFE_INTEGER} and ${Number.MAX_SAFE_INTEGER}, inclusive.  For smaller or bigger numbers, use VarChar type.`);return e}};var u=c;t.default=u,e.exports=c},7027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=Buffer.from([255,255]),r={id:173,type:"BIGBinary",name:"Binary",maximumLength:8e3,declaration:function(e){const t=e.value;let n;return n=e.length?e.length:null!=t?t.length||1:null!==t||e.output?this.maximumLength:1,"binary("+n+")"},resolveLength:function(e){const t=e.value;return null!=t?t.length:this.maximumLength},generateTypeInfo(e){const t=Buffer.alloc(3);return t.writeUInt8(this.id,0),t.writeUInt16LE(e.length,1),t},generateParameterLength(e,t){if(null==e.value)return n;const r=Buffer.alloc(2);return r.writeUInt16LE(e.length,0),r},*generateParameterData(e,t){null!=e.value&&(yield e.value.slice(0,void 0!==e.length?Math.min(e.length,this.maximumLength):this.maximumLength))},validate:function(e){if(null==e)return null;if(!Buffer.isBuffer(e))throw new TypeError("Invalid buffer.");return e}};var i=r;t.default=i,e.exports=r},4695:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(5521))&&r.__esModule?r:{default:r};const o=Buffer.from([1]),s=Buffer.from([0]),a={id:50,type:"BIT",name:"Bit",declaration:function(){return"bit"},generateTypeInfo:()=>Buffer.from([i.default.id,1]),generateParameterLength:(e,t)=>null==e.value?s:o,*generateParameterData(e,t){null!=e.value&&(yield e.value?Buffer.from([1]):Buffer.from([0]))},validate:function(e){return null==e?null:!!e}};var c=a;t.default=c,e.exports=a},5521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:104,type:"BITN",name:"BitN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},*generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},7617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(4914))&&r.__esModule?r:{default:r};const o=Buffer.from([255,255]),s={id:175,type:"BIGCHAR",name:"Char",maximumLength:8e3,declaration:function(e){const t=e.value;let n;return n=e.length?e.length:null!=t?t.length||1:null!==t||e.output?this.maximumLength:1,n<this.maximumLength?"char("+n+")":"char("+this.maximumLength+")"},resolveLength:function(e){const t=e.value;return null!=e.length?e.length:null!=t?t.length||1:this.maximumLength},generateTypeInfo(e){const t=Buffer.alloc(8);return t.writeUInt8(this.id,0),t.writeUInt16LE(e.length,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){const n=e.value;if(null==n)return o;const r=Buffer.alloc(2);return r.writeUInt16LE(n.length,0),r},*generateParameterData(e,t){null!=e.value&&(yield Buffer.from(e.value,"ascii"))},validate:function(e,t){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");if(!t)throw new Error("No collation was set by the server for the current connection.");if(!t.codepage)throw new Error("The collation set by the server has no associated encoding.");return i.default.encode(e,t.codepage)}};var a=s;t.default=a,e.exports=s},6950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(3266);const i=global.Date,o=r.LocalDate.ofYearDay(1,1),s=Buffer.from([0]),a=Buffer.from([3]),c={id:40,type:"DATEN",name:"Date",declaration:function(){return"date"},generateTypeInfo:function(){return Buffer.from([this.id])},generateParameterLength:(e,t)=>null==e.value?s:a,*generateParameterData(e,t){if(null==e.value)return;const n=e.value;let i;i=t.useUTC?r.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()):r.LocalDate.of(n.getFullYear(),n.getMonth()+1,n.getDate());const s=o.until(i,r.ChronoUnit.DAYS),a=Buffer.alloc(3);a.writeUIntLE(s,0,3),yield a},validate:function(e){if(null==e)return null;if(e instanceof i||(e=new i(i.parse(e))),isNaN(e))throw new TypeError("Invalid date.");return e}};var u=c;t.default=u,e.exports=c},8955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(1481))&&r.__esModule?r:{default:r},o=n(3266);const s=o.LocalDate.ofYearDay(1900,1),a=Buffer.from([0]),c=Buffer.from([8]),u={id:61,type:"DATETIME",name:"DateTime",declaration:function(){return"datetime"},generateTypeInfo:()=>Buffer.from([i.default.id,8]),generateParameterLength:(e,t)=>null==e.value?a:c,generateParameterData:function*(e,t){if(null==e.value)return;const n=e.value;let r;r=t.useUTC?o.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()):o.LocalDate.of(n.getFullYear(),n.getMonth()+1,n.getDate());let i,a,c=s.until(r,o.ChronoUnit.DAYS);if(t.useUTC){let e=60*n.getUTCHours()*60;e+=60*n.getUTCMinutes(),e+=n.getUTCSeconds(),i=1e3*e+n.getUTCMilliseconds()}else{let e=60*n.getHours()*60;e+=60*n.getMinutes(),e+=n.getSeconds(),i=1e3*e+n.getMilliseconds()}a=i/(3+1/3),a=Math.round(a),2592e4===a&&(c+=1,a=0);const u=Buffer.alloc(8);u.writeInt32LE(c,0),u.writeUInt32LE(a,4),yield u},validate:function(e){if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),isNaN(e))throw new TypeError("Invalid date.");return e}};var l=u;t.default=l,e.exports=u},6384:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(3266),o=(r=n(9546))&&r.__esModule?r:{default:r};const s=i.LocalDate.ofYearDay(1,1),a=Buffer.from([0]),c={id:42,type:"DATETIME2N",name:"DateTime2",declaration:function(e){return"datetime2("+this.resolveScale(e)+")"},resolveScale:function(e){return null!=e.scale?e.scale:null===e.value?0:7},generateTypeInfo(e,t){return Buffer.from([this.id,e.scale])},generateParameterLength(e,t){if(null==e.value)return a;switch(e.scale){case 0:case 1:case 2:return Buffer.from([6]);case 3:case 4:return Buffer.from([7]);case 5:case 6:case 7:return Buffer.from([8]);default:throw new Error("invalid scale")}},*generateParameterData(e,t){if(null==e.value)return;const n=e.value;let r=e.scale;const a=new o.default(16);let c,u;switch(c=t.useUTC?1e3*(60*(60*n.getUTCHours()+n.getUTCMinutes())+n.getUTCSeconds())+n.getUTCMilliseconds():1e3*(60*(60*n.getHours()+n.getMinutes())+n.getSeconds())+n.getMilliseconds(),c*=Math.pow(10,r-3),c+=(null!=n.nanosecondDelta?n.nanosecondDelta:0)*Math.pow(10,r),c=Math.round(c),r){case 0:case 1:case 2:a.writeUInt24LE(c);break;case 3:case 4:a.writeUInt32LE(c);break;case 5:case 6:case 7:a.writeUInt40LE(c)}u=t.useUTC?i.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()):i.LocalDate.of(n.getFullYear(),n.getMonth()+1,n.getDate());const l=s.until(u,i.ChronoUnit.DAYS);a.writeUInt24LE(l),yield a.data},validate:function(e){if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),isNaN(e))throw new TypeError("Invalid date.");return e}};var u=c;t.default=u,e.exports=c},1481:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:111,type:"DATETIMN",name:"DateTimeN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},8793:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(3266),o=(r=n(9546))&&r.__esModule?r:{default:r};const s=i.LocalDate.ofYearDay(1,1),a=Buffer.from([0]),c={id:43,type:"DATETIMEOFFSETN",name:"DateTimeOffset",declaration:function(e){return"datetimeoffset("+this.resolveScale(e)+")"},resolveScale:function(e){return null!=e.scale?e.scale:null===e.value?0:7},generateTypeInfo(e){return Buffer.from([this.id,e.scale])},generateParameterLength(e,t){if(null==e.value)return a;switch(e.scale){case 0:case 1:case 2:return Buffer.from([8]);case 3:case 4:return Buffer.from([9]);case 5:case 6:case 7:return Buffer.from([10]);default:throw new Error("invalid scale")}},*generateParameterData(e,t){if(null==e.value)return;const n=e.value;let r=e.scale;const a=new o.default(16);let c;switch(c=1e3*(60*(60*n.getUTCHours()+n.getUTCMinutes())+n.getUTCSeconds())+n.getMilliseconds(),c*=Math.pow(10,r-3),c+=(null!=n.nanosecondDelta?n.nanosecondDelta:0)*Math.pow(10,r),c=Math.round(c),r){case 0:case 1:case 2:a.writeUInt24LE(c);break;case 3:case 4:a.writeUInt32LE(c);break;case 5:case 6:case 7:a.writeUInt40LE(c)}const u=i.LocalDate.of(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()),l=s.until(u,i.ChronoUnit.DAYS);a.writeUInt24LE(l);const h=-n.getTimezoneOffset();a.writeInt16LE(h),yield a.data},validate:function(e){if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),isNaN(e))throw new TypeError("Invalid date.");return e}};var u=c;t.default=u,e.exports=c},226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(5792)),i=o(n(9546));function o(e){return e&&e.__esModule?e:{default:e}}const s=Buffer.from([0]),a={id:55,type:"DECIMAL",name:"Decimal",declaration:function(e){return"decimal("+this.resolvePrecision(e)+", "+this.resolveScale(e)+")"},resolvePrecision:function(e){return null!=e.precision?e.precision:null===e.value?1:18},resolveScale:function(e){return null!=e.scale?e.scale:0},generateTypeInfo(e,t){let n;return n=e.precision<=9?5:e.precision<=19?9:e.precision<=28?13:17,Buffer.from([r.default.id,n,e.precision,e.scale])},generateParameterLength(e,t){if(null==e.value)return s;const n=e.precision;return n<=9?Buffer.from([5]):n<=19?Buffer.from([9]):n<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(e,t){if(null==e.value)return;const n=e.value<0?0:1,r=Math.round(Math.abs(e.value*Math.pow(10,e.scale))),o=e.precision;if(o<=9){const e=Buffer.alloc(5);e.writeUInt8(n,0),e.writeUInt32LE(r,1),yield e}else if(o<=19){const e=new i.default(9);e.writeUInt8(n),e.writeUInt64LE(r),yield e.data}else if(o<=28){const e=new i.default(13);e.writeUInt8(n),e.writeUInt64LE(r),e.writeUInt32LE(0),yield e.data}else{const e=new i.default(17);e.writeUInt8(n),e.writeUInt64LE(r),e.writeUInt32LE(0),e.writeUInt32LE(0),yield e.data}},validate:function(e){if(null==e)return null;if(e=parseFloat(e),isNaN(e))throw new TypeError("Invalid number.");return e}};var c=a;t.default=c,e.exports=a},5792:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:106,type:"DECIMALN",name:"DecimalN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},1635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8442))&&r.__esModule?r:{default:r};const o=Buffer.from([0]),s={id:62,type:"FLT8",name:"Float",declaration:function(){return"float"},generateTypeInfo:()=>Buffer.from([i.default.id,8]),generateParameterLength:(e,t)=>null==e.value?o:Buffer.from([8]),*generateParameterData(e,t){if(null==e.value)return;const n=Buffer.alloc(8);n.writeDoubleLE(parseFloat(e.value),0),yield n},validate:function(e){if(null==e)return null;if(e=parseFloat(e),isNaN(e))throw new TypeError("Invalid number.");return e}};var a=s;t.default=a,e.exports=s},8442:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:109,type:"FLTN",name:"FloatN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},7041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=Buffer.from([255,255,255,255]),r={id:34,type:"IMAGE",name:"Image",hasTableName:!0,declaration:function(){return"image"},resolveLength:function(e){return null!=e.value?e.value.length:-1},generateTypeInfo(e){const t=Buffer.alloc(5);return t.writeUInt8(this.id,0),t.writeInt32LE(e.length,1),t},generateParameterLength(e,t){if(null==e.value)return n;const r=Buffer.alloc(4);return r.writeInt32LE(e.value.length,0),r},*generateParameterData(e,t){null!=e.value&&(yield e.value)},validate:function(e){if(null==e)return null;if(!Buffer.isBuffer(e))throw new TypeError("Invalid buffer.");return e}};var i=r;t.default=i,e.exports=r},6101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(4802))&&r.__esModule?r:{default:r};const o=Buffer.from([0]),s=Buffer.from([4]),a={id:56,type:"INT4",name:"Int",declaration:function(){return"int"},generateTypeInfo:()=>Buffer.from([i.default.id,4]),generateParameterLength:(e,t)=>null==e.value?o:s,*generateParameterData(e,t){if(null==e.value)return;const n=Buffer.alloc(4);n.writeInt32LE(Number(e.value),0),yield n},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw new TypeError("Invalid number.");if(e<-2147483648||e>2147483647)throw new TypeError("Value must be between -2147483648 and 2147483647, inclusive.");return 0|e}};var c=a;t.default=c,e.exports=a},4802:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:38,type:"INTN",name:"IntN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},7420:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7486))&&r.__esModule?r:{default:r};const o=Buffer.from([0]),s=Buffer.from([8]),a={id:60,type:"MONEY",name:"Money",declaration:function(){return"money"},generateTypeInfo:function(){return Buffer.from([i.default.id,8])},generateParameterLength:(e,t)=>null==e.value?o:s,*generateParameterData(e,t){if(null==e.value)return;const n=1e4*e.value,r=Buffer.alloc(8);r.writeInt32LE(Math.floor(2.3283064365386963e-10*n),0),r.writeInt32LE(-1&n,4),yield r},validate:function(e){if(null==e)return null;if(e=parseFloat(e),isNaN(e))throw new TypeError("Invalid number.");return e}};var c=a;t.default=c,e.exports=a},7486:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:110,type:"MONEYN",name:"MoneyN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},4647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=Buffer.from([255,255]),r={id:239,type:"NCHAR",name:"NChar",maximumLength:4e3,declaration:function(e){const t=e.value;let n;return n=e.length?e.length:null!=e.value?t.toString().length||1:null!==e.value||e.output?this.maximumLength:1,n<this.maximumLength?"nchar("+n+")":"nchar("+this.maximumLength+")"},resolveLength:function(e){const t=e.value;return null!=e.length?e.length:null!=e.value?Buffer.isBuffer(e.value)?e.value.length/2||1:t.toString().length||1:this.maximumLength},generateTypeInfo:function(e){const t=Buffer.alloc(8);return t.writeUInt8(this.id,0),t.writeUInt16LE(2*e.length,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){if(null==e.value)return n;const{value:r}=e;if(r instanceof Buffer){const e=r.length,t=Buffer.alloc(2);return t.writeUInt16LE(e,0),t}{const e=Buffer.byteLength(r.toString(),"ucs2"),t=Buffer.alloc(2);return t.writeUInt16LE(e,0),t}},*generateParameterData(e,t){if(null==e.value)return;const n=e.value;n instanceof Buffer?yield n:yield Buffer.from(n,"ucs2")},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");return e}};var i=r;t.default=i,e.exports=r},4799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=Buffer.from([255,255,255,255]),r={id:99,type:"NTEXT",name:"NText",hasTableName:!0,declaration:function(){return"ntext"},resolveLength:function(e){const t=e.value;return null!=t?t.length:-1},generateTypeInfo(e,t){const n=Buffer.alloc(10);return n.writeUInt8(this.id,0),n.writeInt32LE(e.length,1),e.collation&&e.collation.toBuffer().copy(n,5,0,5),n},generateParameterLength(e,t){if(null==e.value)return n;const r=Buffer.alloc(4);return r.writeInt32LE(Buffer.byteLength(e.value,"ucs2"),0),r},generateParameterData:function*(e,t){null!=e.value&&(yield Buffer.from(e.value.toString(),"ucs2"))},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");return e}};var i=r;t.default=i,e.exports=r},7662:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:31,type:"NULL",name:"Null",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},5969:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1904)),i=o(n(9546));function o(e){return e&&e.__esModule?e:{default:e}}const s=Buffer.from([0]),a={id:63,type:"NUMERIC",name:"Numeric",declaration:function(e){return"numeric("+this.resolvePrecision(e)+", "+this.resolveScale(e)+")"},resolvePrecision:function(e){return null!=e.precision?e.precision:null===e.value?1:18},resolveScale:function(e){return null!=e.scale?e.scale:0},generateTypeInfo(e){let t;return t=e.precision<=9?5:e.precision<=19?9:e.precision<=28?13:17,Buffer.from([r.default.id,t,e.precision,e.scale])},generateParameterLength(e,t){if(null==e.value)return s;const n=e.precision;return n<=9?Buffer.from([5]):n<=19?Buffer.from([9]):n<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(e,t){if(null==e.value)return;const n=e.value<0?0:1,r=Math.round(Math.abs(e.value*Math.pow(10,e.scale)));if(e.precision<=9){const e=Buffer.alloc(5);e.writeUInt8(n,0),e.writeUInt32LE(r,1),yield e}else if(e.precision<=19){const e=new i.default(10);e.writeUInt8(n),e.writeUInt64LE(r),yield e.data}else if(e.precision<=28){const e=new i.default(14);e.writeUInt8(n),e.writeUInt64LE(r),e.writeUInt32LE(0),yield e.data}else{const e=new i.default(18);e.writeUInt8(n),e.writeUInt64LE(r),e.writeUInt32LE(0),e.writeUInt32LE(0),yield e.data}},validate:function(e){if(null==e)return null;if(e=parseFloat(e),isNaN(e))throw new TypeError("Invalid number.");return e}};var c=a;t.default=c,e.exports=a},1904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:108,type:"NUMERICN",name:"NumericN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},9676:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=Buffer.from([254,255,255,255,255,255,255,255]),r=Buffer.from([0,0,0,0]),i=Buffer.from([255,255]),o=Buffer.from([255,255,255,255,255,255,255,255]),s={id:231,type:"NVARCHAR",name:"NVarChar",maximumLength:4e3,declaration:function(e){const t=e.value;let n;return n=e.length?e.length:null!=t?t.toString().length||1:null!==t||e.output?this.maximumLength:1,n<=this.maximumLength?"nvarchar("+n+")":"nvarchar(max)"},resolveLength:function(e){const t=e.value;return null!=e.length?e.length:null!=t?Buffer.isBuffer(t)?t.length/2||1:t.toString().length||1:this.maximumLength},generateTypeInfo(e){const t=Buffer.alloc(8);return t.writeUInt8(this.id,0),e.length<=this.maximumLength?t.writeUInt16LE(2*e.length,1):t.writeUInt16LE(65535,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){if(null==e.value)return e.length<=this.maximumLength?i:o;let r=e.value;if(e.length<=this.maximumLength){let e;r instanceof Buffer?e=r.length:(r=r.toString(),e=Buffer.byteLength(r,"ucs2"));const t=Buffer.alloc(2);return t.writeUInt16LE(e,0),t}return n},*generateParameterData(e,t){if(null==e.value)return;let n=e.value;if(e.length<=this.maximumLength)n instanceof Buffer?yield n:(n=n.toString(),yield Buffer.from(n,"ucs2"));else{if(n instanceof Buffer){const e=n.length;if(e>0){const t=Buffer.alloc(4);t.writeUInt32LE(e,0),yield t,yield n}}else{n=n.toString();const e=Buffer.byteLength(n,"ucs2");if(e>0){const t=Buffer.alloc(4);t.writeUInt32LE(e,0),yield t,yield Buffer.from(n,"ucs2")}}yield r}},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");return e}};var a=s;t.default=a,e.exports=s},4164:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8442))&&r.__esModule?r:{default:r};const o=Buffer.from([0]),s=Buffer.from([4]),a={id:59,type:"FLT4",name:"Real",declaration:function(){return"real"},generateTypeInfo:()=>Buffer.from([i.default.id,4]),generateParameterLength:(e,t)=>null==e.value?o:s,*generateParameterData(e,t){if(null==e.value)return;const n=Buffer.alloc(4);n.writeFloatLE(parseFloat(e.value),0),yield n},validate:function(e){if(null==e)return null;if(e=parseFloat(e),isNaN(e))throw new TypeError("Invalid number.");return e}};var c=a;t.default=c,e.exports=a},9705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(1481))&&r.__esModule?r:{default:r};const o=new Date(1900,0,1),s=new Date(Date.UTC(1900,0,1)),a=Buffer.from([4]),c=Buffer.from([0]),u={id:58,type:"DATETIM4",name:"SmallDateTime",declaration:function(){return"smalldatetime"},generateTypeInfo:()=>Buffer.from([i.default.id,4]),generateParameterLength:(e,t)=>null==e.value?c:a,generateParameterData:function*(e,t){if(null==e.value)return;const n=Buffer.alloc(4);let r,i,a;t.useUTC?(r=Math.floor((e.value.getTime()-s.getTime())/864e5),a=60*e.value.getUTCHours()+e.value.getUTCMinutes()):(i=60*-(e.value.getTimezoneOffset()-o.getTimezoneOffset())*1e3,r=Math.floor((e.value.getTime()-o.getTime()+i)/864e5),a=60*e.value.getHours()+e.value.getMinutes()),n.writeUInt16LE(r,0),n.writeUInt16LE(a,2),yield n},validate:function(e){if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),isNaN(e))throw new TypeError("Invalid date.");return e}};var l=u;t.default=l,e.exports=u},4961:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(4802))&&r.__esModule?r:{default:r};const o=Buffer.from([2]),s=Buffer.from([0]),a={id:52,type:"INT2",name:"SmallInt",declaration:function(){return"smallint"},generateTypeInfo:()=>Buffer.from([i.default.id,2]),generateParameterLength:(e,t)=>null==e.value?s:o,*generateParameterData(e,t){if(null==e.value)return;const n=Buffer.alloc(2);n.writeInt16LE(Number(e.value),0),yield n},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw new TypeError("Invalid number.");if(e<-32768||e>32767)throw new TypeError("Value must be between -32768 and 32767, inclusive.");return 0|e}};var c=a;t.default=c,e.exports=a},7263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7486))&&r.__esModule?r:{default:r};const o=Buffer.from([4]),s=Buffer.from([0]),a={id:122,type:"MONEY4",name:"SmallMoney",declaration:function(){return"smallmoney"},generateTypeInfo:function(){return Buffer.from([i.default.id,4])},generateParameterLength:(e,t)=>null==e.value?s:o,*generateParameterData(e,t){if(null==e.value)return;const n=Buffer.alloc(4);n.writeInt32LE(1e4*e.value,0),yield n},validate:function(e){if(null==e)return null;if(e=parseFloat(e),isNaN(e))throw new TypeError("Invalid number.");if(e<-214748.3648||e>214748.3647)throw new TypeError("Value must be between -214748.3648 and 214748.3647.");return e}};var c=a;t.default=c,e.exports=a},6570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:98,type:"SSVARIANTTYPE",name:"Variant",declaration:function(){return"sql_variant"},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},367:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(4914))&&r.__esModule?r:{default:r};const o=Buffer.from([255,255,255,255]),s={id:35,type:"TEXT",name:"Text",hasTableName:!0,declaration:function(){return"text"},resolveLength:function(e){const t=e.value;return null!=t?t.length:-1},generateTypeInfo(e,t){const n=Buffer.alloc(10);return n.writeUInt8(this.id,0),n.writeInt32LE(e.length,1),e.collation&&e.collation.toBuffer().copy(n,5,0,5),n},generateParameterLength(e,t){const n=e.value;if(null==n)return o;const r=Buffer.alloc(4);return r.writeInt32LE(n.length,0),r},generateParameterData:function*(e,t){const n=e.value;null!=n&&(yield n)},validate:function(e,t){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");if(!t)throw new Error("No collation was set by the server for the current connection.");if(!t.codepage)throw new Error("The collation set by the server has no associated encoding.");return i.default.encode(e,t.codepage)}};var a=s;t.default=a,e.exports=s},124:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(9546))&&r.__esModule?r:{default:r};const o=Buffer.from([0]),s={id:41,type:"TIMEN",name:"Time",declaration:function(e){return"time("+this.resolveScale(e)+")"},resolveScale:function(e){return null!=e.scale?e.scale:null===e.value?0:7},generateTypeInfo(e){return Buffer.from([this.id,e.scale])},generateParameterLength(e,t){if(null==e.value)return o;switch(e.scale){case 0:case 1:case 2:return Buffer.from([3]);case 3:case 4:return Buffer.from([4]);case 5:case 6:case 7:return Buffer.from([5]);default:throw new Error("invalid scale")}},*generateParameterData(e,t){if(null==e.value)return;const n=new i.default(16),r=e.value;let o;switch(o=t.useUTC?1e3*(60*(60*r.getUTCHours()+r.getUTCMinutes())+r.getUTCSeconds())+r.getUTCMilliseconds():1e3*(60*(60*r.getHours()+r.getMinutes())+r.getSeconds())+r.getMilliseconds(),o*=Math.pow(10,e.scale-3),o+=(null!=e.value.nanosecondDelta?e.value.nanosecondDelta:0)*Math.pow(10,e.scale),o=Math.round(o),e.scale){case 0:case 1:case 2:n.writeUInt24LE(o);break;case 3:case 4:n.writeUInt32LE(o);break;case 5:case 6:case 7:n.writeUInt40LE(o)}yield n.data},validate:function(e){if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),isNaN(e))throw new TypeError("Invalid time.");return e}};var a=s;t.default=a,e.exports=s},5309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(4802))&&r.__esModule?r:{default:r};const o=Buffer.from([1]),s=Buffer.from([0]),a={id:48,type:"INT1",name:"TinyInt",declaration:function(){return"tinyint"},generateTypeInfo:()=>Buffer.from([i.default.id,1]),generateParameterLength:(e,t)=>null==e.value?s:o,*generateParameterData(e,t){if(null==e.value)return;const n=Buffer.alloc(1);n.writeUInt8(Number(e.value),0),yield n},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw new TypeError("Invalid number.");if(e<0||e>255)throw new TypeError("Value must be between 0 and 255, inclusive.");return 0|e}};var c=a;t.default=c,e.exports=a},4892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(9546))&&r.__esModule?r:{default:r};const o=Buffer.from([1]),s=Buffer.from([0]),a=Buffer.from([255,255]),c={id:243,type:"TVPTYPE",name:"TVP",declaration:function(e){return e.value.name+" readonly"},generateTypeInfo(e){var t,n;const r=(null===(t=e.value)||void 0===t?void 0:t.schema)??"",o=(null===(n=e.value)||void 0===n?void 0:n.name)??"",s=2+Buffer.byteLength("","ucs2")+1+Buffer.byteLength(r,"ucs2")+1+Buffer.byteLength(o,"ucs2"),a=new i.default(s,"ucs2");return a.writeUInt8(this.id),a.writeBVarchar(""),a.writeBVarchar(r),a.writeBVarchar(o),a.data},generateParameterLength(e,t){if(null==e.value)return a;const{columns:n}=e.value,r=Buffer.alloc(2);return r.writeUInt16LE(n.length,0),r},*generateParameterData(e,t){if(null==e.value)return yield s,void(yield s);const{columns:n,rows:r}=e.value;for(let e=0,t=n.length;e<t;e++){const t=n[e],r=Buffer.alloc(6);r.writeUInt32LE(0,0),r.writeUInt16LE(0,4),yield r,yield t.type.generateTypeInfo(t),yield Buffer.from([0])}yield s;for(let i=0,s=r.length;i<s;i++){yield o;const s=r[i];for(let r=0,i=s.length;r<i;r++){const i=n[r],o=s[r],a={value:i.type.validate(o,e.collation),length:i.length,scale:i.scale,precision:i.precision};yield i.type.generateParameterLength(a,t),yield*i.type.generateParameterData(a,t)}}yield s},validate:function(e){if(null==e)return null;if("object"!=typeof e)throw new TypeError("Invalid table.");if(!Array.isArray(e.columns))throw new TypeError("Invalid table.");if(!Array.isArray(e.rows))throw new TypeError("Invalid table.");return e}};var u=c;t.default=u,e.exports=c},8277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:240,type:"UDTTYPE",name:"UDT",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},2510:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(8351);const i=Buffer.from([0]),o=Buffer.from([16]),s={id:36,type:"GUIDN",name:"UniqueIdentifier",declaration:function(){return"uniqueidentifier"},resolveLength:function(){return 16},generateTypeInfo(){return Buffer.from([this.id,16])},generateParameterLength:(e,t)=>null==e.value?i:o,generateParameterData:function*(e,t){null!=e.value&&(yield Buffer.from((0,r.guidToArray)(e.value)))},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))throw new TypeError("Invalid GUID.");return e}};var a=s;t.default=a,e.exports=s},4496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=Buffer.from([254,255,255,255,255,255,255,255]),r=Buffer.from([0,0,0,0]),i=Buffer.from([255,255]),o=Buffer.from([255,255,255,255,255,255,255,255]),s={id:165,type:"BIGVARBIN",name:"VarBinary",maximumLength:8e3,declaration:function(e){const t=e.value;let n;return n=e.length?e.length:null!=t?t.length||1:null!==t||e.output?this.maximumLength:1,n<=this.maximumLength?"varbinary("+n+")":"varbinary(max)"},resolveLength:function(e){const t=e.value;return null!=e.length?e.length:null!=t?t.length:this.maximumLength},generateTypeInfo:function(e){const t=Buffer.alloc(3);return t.writeUInt8(this.id,0),e.length<=this.maximumLength?t.writeUInt16LE(e.length,1):t.writeUInt16LE(65535,1),t},generateParameterLength(e,t){if(null==e.value)return e.length<=this.maximumLength?i:o;let r=e.value;Buffer.isBuffer(r)||(r=r.toString());const s=Buffer.byteLength(r,"ucs2");if(e.length<=this.maximumLength){const e=Buffer.alloc(2);return e.writeUInt16LE(s,0),e}return n},*generateParameterData(e,t){if(null==e.value)return;let n=e.value;if(e.length<=this.maximumLength)Buffer.isBuffer(n)?yield n:yield Buffer.from(n.toString(),"ucs2");else{Buffer.isBuffer(n)||(n=n.toString());const e=Buffer.byteLength(n,"ucs2");if(e>0){const t=Buffer.alloc(4);t.writeUInt32LE(e,0),yield t,Buffer.isBuffer(n)?yield n:yield Buffer.from(n,"ucs2")}yield r}},validate:function(e){if(null==e)return null;if(!Buffer.isBuffer(e))throw new TypeError("Invalid buffer.");return e}};var a=s;t.default=a,e.exports=s},1337:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(4914))&&r.__esModule?r:{default:r};const o=Buffer.from([254,255,255,255,255,255,255,255]),s=Buffer.from([0,0,0,0]),a=Buffer.from([255,255]),c=Buffer.from([255,255,255,255,255,255,255,255]),u={id:167,type:"BIGVARCHR",name:"VarChar",maximumLength:8e3,declaration:function(e){const t=e.value;let n;return n=e.length?e.length:null!=t?t.length||1:null!==t||e.output?this.maximumLength:1,n<=this.maximumLength?"varchar("+n+")":"varchar(max)"},resolveLength:function(e){const t=e.value;return null!=e.length?e.length:null!=t?t.length||1:this.maximumLength},generateTypeInfo(e){const t=Buffer.alloc(8);return t.writeUInt8(this.id,0),e.length<=this.maximumLength?t.writeUInt16LE(e.length,1):t.writeUInt16LE(65535,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){const n=e.value;if(null==n)return e.length<=this.maximumLength?a:c;if(e.length<=this.maximumLength){const e=Buffer.alloc(2);return e.writeUInt16LE(n.length,0),e}return o},*generateParameterData(e,t){const n=e.value;if(null!=n)if(e.length<=this.maximumLength)yield n;else{if(n.length>0){const e=Buffer.alloc(4);e.writeUInt32LE(n.length,0),yield e,yield n}yield s}},validate:function(e,t){if(null==e)return null;if("string"!=typeof e)throw new TypeError("Invalid string.");if(!t)throw new Error("No collation was set by the server for the current connection.");if(!t.codepage)throw new Error("The collation set by the server has no associated encoding.");return i.default.encode(e,t.codepage)}};var l=u;t.default=l,e.exports=u},9918:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={id:241,type:"XML",name:"Xml",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}};var r=n;t.default=r,e.exports=n},5170:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2361),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(3837));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}class s extends r.EventEmitter{constructor({data:e=!1,payload:t=!1,packet:n=!1,token:r=!1}={}){super(),this.options=void 0,this.indent=void 0,this.options={data:e,payload:t,packet:n,token:r},this.indent="  "}packet(e,t){this.haveListeners()&&this.options.packet&&(this.log(""),this.log(e),this.log(t.headerToString(this.indent)))}data(e){this.haveListeners()&&this.options.data&&this.log(e.dataToString(this.indent))}payload(e){this.haveListeners()&&this.options.payload&&this.log(e())}token(e){this.haveListeners()&&this.options.token&&this.log(i.inspect(e,{showHidden:!1,depth:5,colors:!0}))}haveListeners(){return this.listeners("debug").length>0}log(e){this.emit("debug",e)}}var a=s;t.default=a,e.exports=s},8871:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestError=t.ConnectionError=void 0;class n extends Error{constructor(e,t){super(e),this.code=void 0,this.isTransient=void 0,this.code=t}}t.ConnectionError=n;class r extends Error{constructor(e,t){super(e),this.code=void 0,this.number=void 0,this.state=void 0,this.class=void 0,this.serverName=void 0,this.procName=void 0,this.lineNumber=void 0,this.code=t}}t.RequestError=r},69:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class n extends Error{constructor(){super("The operation was aborted"),this.code=void 0,this.code="ABORT_ERR",this.name="AbortError"}}t.default=n},5622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class n extends Error{constructor(){super("The operation was aborted due to timeout"),this.code=void 0,this.code="TIMEOUT_ERR",this.name="TimeoutError"}}t.default=n},8351:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToLowerCaseGuid=function(e){return r[e[3]]+r[e[2]]+r[e[1]]+r[e[0]]+"-"+r[e[5]]+r[e[4]]+"-"+r[e[7]]+r[e[6]]+"-"+r[e[8]]+r[e[9]]+"-"+r[e[10]]+r[e[11]]+r[e[12]]+r[e[13]]+r[e[14]]+r[e[15]]},t.bufferToUpperCaseGuid=function(e){return n[e[3]]+n[e[2]]+n[e[1]]+n[e[0]]+"-"+n[e[5]]+n[e[4]]+"-"+n[e[7]]+n[e[6]]+"-"+n[e[8]]+n[e[9]]+"-"+n[e[10]]+n[e[11]]+n[e[12]]+n[e[13]]+n[e[14]]+n[e[15]]},t.guidToArray=function(e){return[i[e.charCodeAt(6)][e.charCodeAt(7)],i[e.charCodeAt(4)][e.charCodeAt(5)],i[e.charCodeAt(2)][e.charCodeAt(3)],i[e.charCodeAt(0)][e.charCodeAt(1)],i[e.charCodeAt(11)][e.charCodeAt(12)],i[e.charCodeAt(9)][e.charCodeAt(10)],i[e.charCodeAt(16)][e.charCodeAt(17)],i[e.charCodeAt(14)][e.charCodeAt(15)],i[e.charCodeAt(19)][e.charCodeAt(20)],i[e.charCodeAt(21)][e.charCodeAt(22)],i[e.charCodeAt(24)][e.charCodeAt(25)],i[e.charCodeAt(26)][e.charCodeAt(27)],i[e.charCodeAt(28)][e.charCodeAt(29)],i[e.charCodeAt(30)][e.charCodeAt(31)],i[e.charCodeAt(32)][e.charCodeAt(33)],i[e.charCodeAt(34)][e.charCodeAt(35)]]};const n=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],r=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],i={},o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"].map((e=>e.charCodeAt(0)));for(let e=0;e<o.length;e++){const t=i[o[e]]={};for(let n=0;n<o.length;n++){const r=String.fromCharCode(o[e],o[n]),i=parseInt(r,16);t[o[n]]=i}}},5732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(22)),i=n(2781),o=c(n(1030)),s=n(8037),a=n(8871);function c(e){return e&&e.__esModule?e:{default:e}}class u extends i.Transform{constructor(e){super({readableObjectMode:!0}),this.debug=void 0,this.bl=void 0,this.currentMessage=void 0,this.debug=e,this.currentMessage=void 0,this.bl=new r.default}pause(){return super.pause(),this.currentMessage&&this.currentMessage.pause(),this}resume(){return super.resume(),this.currentMessage&&this.currentMessage.resume(),this}processBufferedData(e){for(;this.bl.length>=s.HEADER_LENGTH;){const t=this.bl.readUInt16BE(2);if(t<s.HEADER_LENGTH)return e(new a.ConnectionError("Unable to process incoming packet"));if(!(this.bl.length>=t))break;{const n=this.bl.slice(0,t);this.bl.consume(t);const r=new s.Packet(n);this.debug.packet("Received",r),this.debug.data(r);let i=this.currentMessage;if(void 0===i&&(this.currentMessage=i=new o.default({type:r.type(),resetConnection:!1}),this.push(i)),r.isLast())return i.once("end",(()=>{this.currentMessage=void 0,this.processBufferedData(e)})),void i.end(r.data());if(!i.write(r.data()))return void i.once("drain",(()=>{this.processBufferedData(e)}))}}e()}_transform(e,t,n){this.bl.append(e),this.processBufferedData(n)}}var l=u;t.default=l,e.exports=u},4079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instanceLookup=async function(e){const t=e.server;if("string"!=typeof t)throw new TypeError('Invalid arguments: "server" must be a string');const n=e.instanceName;if("string"!=typeof n)throw new TypeError('Invalid arguments: "instanceName" must be a string');const a=void 0===e.timeout?2e3:e.timeout;if("number"!=typeof a)throw new TypeError('Invalid arguments: "timeout" must be a number');const u=void 0===e.retries?3:e.retries;if("number"!=typeof u)throw new TypeError('Invalid arguments: "retries" must be a number');if(void 0!==e.lookup&&"function"!=typeof e.lookup)throw new TypeError('Invalid arguments: "lookup" must be a function');const l=e.lookup??r.default.lookup;if(void 0!==e.port&&"number"!=typeof e.port)throw new TypeError('Invalid arguments: "port" must be a number');const h=e.port??1434,d=e.signal;if(d.aborted)throw new i.default;let f;for(let t=0;t<=u;t++)try{f=await(0,s.withTimeout)(a,(async t=>{const n=Buffer.from([2]);return await(0,o.sendMessage)(e.server,h,l,t,n)}),d)}catch(e){if(!d.aborted&&e instanceof Error&&"TimeoutError"===e.name)continue;throw e}if(!f)throw new Error("Failed to get response from SQL Server Browser on "+t);const p=c(f.toString("ascii",3),n);if(!p)throw new Error("Port for "+n+" not found in "+e.server);return p},t.parseBrowserResponse=c;var r=a(n(9523)),i=a(n(69)),o=n(204),s=n(7001);function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){let n;const r=e.split(";;");for(let e=0,i=r.length;e<i;e++){const i=r[e].split(";");for(let e=0,r=i.length;e<r;e+=2){const r=i[e],o=i[e+1];if("tcp"===r&&n)return parseInt(o,10);"InstanceName"===r&&(n=o.toUpperCase()===t.toUpperCase())}}}},1117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.name=void 0,t.name="Tedious"},6654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(8975),i=n(756);class o{constructor({tdsVersion:e,packetSize:t,clientProgVer:n,clientPid:r,connectionId:i,clientTimeZone:o,clientLcid:s}){this.tdsVersion=void 0,this.packetSize=void 0,this.clientProgVer=void 0,this.clientPid=void 0,this.connectionId=void 0,this.clientTimeZone=void 0,this.clientLcid=void 0,this.readOnlyIntent=void 0,this.initDbFatal=void 0,this.userName=void 0,this.password=void 0,this.serverName=void 0,this.appName=void 0,this.hostname=void 0,this.libraryName=void 0,this.language=void 0,this.database=void 0,this.clientId=void 0,this.sspi=void 0,this.attachDbFile=void 0,this.changePassword=void 0,this.fedAuth=void 0,this.tdsVersion=e,this.packetSize=t,this.clientProgVer=n,this.clientPid=r,this.connectionId=i,this.clientTimeZone=o,this.clientLcid=s,this.readOnlyIntent=!1,this.initDbFatal=!1,this.fedAuth=void 0,this.userName=void 0,this.password=void 0,this.serverName=void 0,this.appName=void 0,this.hostname=void 0,this.libraryName=void 0,this.language=void 0,this.database=void 0,this.clientId=void 0,this.sspi=void 0,this.attachDbFile=void 0,this.changePassword=void 0}toBuffer(){const e=Buffer.alloc(94),t=[e];let n=0,r=e.length;if(n=e.writeUInt32LE(0,n),n=e.writeUInt32LE(this.tdsVersion,n),n=e.writeUInt32LE(this.packetSize,n),n=e.writeUInt32LE(this.clientProgVer,n),n=e.writeUInt32LE(this.clientPid,n),n=e.writeUInt32LE(this.connectionId,n),n=e.writeUInt8(this.buildOptionFlags1(),n),n=e.writeUInt8(this.buildOptionFlags2(),n),n=e.writeUInt8(this.buildTypeFlags(),n),n=e.writeUInt8(this.buildOptionFlags3(),n),n=e.writeInt32LE(this.clientTimeZone,n),n=e.writeUInt32LE(this.clientLcid,n),n=e.writeUInt16LE(r,n),this.hostname){const i=Buffer.from(this.hostname,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(r,n);if(n=e.writeUInt16LE(r,n),this.userName){const i=Buffer.from(this.userName,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);if(n=e.writeUInt16LE(r,n),this.password){const i=Buffer.from(this.password,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(this.scramblePassword(i))}else n=e.writeUInt16LE(0,n);if(n=e.writeUInt16LE(r,n),this.appName){const i=Buffer.from(this.appName,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);if(n=e.writeUInt16LE(r,n),this.serverName){const i=Buffer.from(this.serverName,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);n=e.writeUInt16LE(r,n);const i=this.buildFeatureExt();n=e.writeUInt16LE(4,n);const o=Buffer.alloc(4);if(o.writeUInt32LE(r+=4,0),r+=i.length,t.push(o,i),n=e.writeUInt16LE(r,n),this.libraryName){const i=Buffer.from(this.libraryName,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);if(n=e.writeUInt16LE(r,n),this.language){const i=Buffer.from(this.language,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);if(n=e.writeUInt16LE(r,n),this.database){const i=Buffer.from(this.database,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);if(this.clientId&&this.clientId.copy(e,n,0,6),n+=6,n=e.writeUInt16LE(r,n),this.sspi?(n=this.sspi.length>65535?e.writeUInt16LE(65535,n):e.writeUInt16LE(this.sspi.length,n),t.push(this.sspi)):n=e.writeUInt16LE(0,n),n=e.writeUInt16LE(r,n),this.attachDbFile){const i=Buffer.from(this.attachDbFile,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);if(n=e.writeUInt16LE(r,n),this.changePassword){const i=Buffer.from(this.changePassword,"ucs2");n=e.writeUInt16LE(i.length/2,n),r+=i.length,t.push(i)}else n=e.writeUInt16LE(0,n);this.sspi&&this.sspi.length>65535?e.writeUInt32LE(this.sspi.length,n):e.writeUInt32LE(0,n);const s=Buffer.concat(t);return s.writeUInt32LE(s.length,0),s}buildOptionFlags1(){let e=176;return this.initDbFatal?e|=64:e|=0,e}buildFeatureExt(){const e=[],t=this.fedAuth;if(t)switch(t.type){case"ADAL":const n=Buffer.alloc(7);n.writeUInt8(2,0),n.writeUInt32LE(2,1),n.writeUInt8(4|(t.echo?1:0),5),n.writeUInt8("integrated"===t.workflow?2:1,6),e.push(n);break;case"SECURITYTOKEN":const r=Buffer.from(t.fedAuthToken,"ucs2"),i=Buffer.alloc(10);let o=0;o=i.writeUInt8(2,o),o=i.writeUInt32LE(r.length+4+1,o),o=i.writeUInt8(2|(t.echo?1:0),o),i.writeInt32LE(r.length,o),e.push(i),e.push(r)}if(this.tdsVersion>=i.versions["7_4"]){const t=10,n=1,r=Buffer.alloc(6);r.writeUInt8(t,0),r.writeUInt32LE(1,1),r.writeUInt8(n,5),e.push(r)}return e.push(Buffer.from([255])),Buffer.concat(e)}buildOptionFlags2(){let e=0;return this.sspi?e|=128:e|=0,e}buildTypeFlags(){let e=0;return this.readOnlyIntent?e|=32:e|=0,e}buildOptionFlags3(){return 24}scramblePassword(e){for(let t=0,n=e.length;t<n;t++){let n=e[t];n=(15&n)<<4|n>>4,n^=165,e[t]=n}return e}toString(e=""){return e+"Login7 - "+(0,r.sprintf)("TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X",this.tdsVersion,this.packetSize,this.clientProgVer,this.clientPid,this.connectionId)+"\n"+e+"         "+(0,r.sprintf)("Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X",this.buildOptionFlags1(),this.buildOptionFlags2(),this.buildTypeFlags(),this.buildOptionFlags3(),this.clientTimeZone,this.clientLcid)+"\n"+e+"         "+(0,r.sprintf)("Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'",this.hostname,this.userName,this.password,this.appName,this.serverName,this.libraryName)+"\n"+e+"         "+(0,r.sprintf)("Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'",this.language,this.database,this.sspi,this.attachDbFile,this.changePassword)}}var s=o;t.default=s,e.exports=o},283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(n(9533)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(4404)),o=n(2361),s=h(n(1030)),a=n(8037),c=h(n(5732)),u=h(n(3987));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}class d extends o.EventEmitter{constructor(e,t,n){super(),this.socket=void 0,this.debug=void 0,this.tlsNegotiationComplete=void 0,this.incomingMessageStream=void 0,this.outgoingMessageStream=void 0,this.securePair=void 0,this.incomingMessageIterator=void 0,this.socket=e,this.debug=n,this.tlsNegotiationComplete=!1,this.incomingMessageStream=new c.default(this.debug),this.incomingMessageIterator=this.incomingMessageStream[Symbol.asyncIterator](),this.outgoingMessageStream=new u.default(this.debug,{packetSize:t}),this.socket.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(this.socket)}packetSize(...e){if(e.length>0){const t=e[0];this.debug.log("Packet size changed from "+this.outgoingMessageStream.packetSize+" to "+t),this.outgoingMessageStream.packetSize=t}return this.securePair&&this.securePair.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.packetSize}startTls(e,t,n){e.maxVersion&&["TLSv1.2","TLSv1.1","TLSv1"].includes(e.maxVersion)||(e.maxVersion="TLSv1.2");const o=i.createSecureContext(e);return new Promise(((e,c)=>{const u=new r.default,l=this.securePair={cleartext:i.connect({socket:u.socket1,servername:t,secureContext:o,rejectUnauthorized:!n}),encrypted:u.socket2},h=()=>{l.encrypted.removeListener("readable",f),l.cleartext.removeListener("error",d),l.cleartext.removeListener("secureConnect",h),l.cleartext.once("error",(e=>{this.socket.destroy(e)}));const t=l.cleartext.getCipher();t&&this.debug.log("TLS negotiated ("+t.name+", "+t.version+")"),this.emit("secure",l.cleartext),l.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.unpipe(this.socket),this.socket.unpipe(this.incomingMessageStream),this.socket.pipe(l.encrypted),l.encrypted.pipe(this.socket),l.cleartext.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(l.cleartext),this.tlsNegotiationComplete=!0,e()},d=e=>{l.encrypted.removeListener("readable",f),l.cleartext.removeListener("error",d),l.cleartext.removeListener("secureConnect",h),l.cleartext.destroy(),l.encrypted.destroy(),c(e)},f=()=>{const e=new s.default({type:a.TYPE.PRELOGIN,resetConnection:!1});let t;for(;t=l.encrypted.read();)e.write(t);this.outgoingMessageStream.write(e),e.end(),this.readMessage().then((async e=>{l.encrypted.once("readable",f);for await(const t of e)l.encrypted.write(t)})).catch(d)};l.cleartext.once("error",d),l.cleartext.once("secureConnect",h),l.encrypted.once("readable",f)}))}sendMessage(e,t,n){const r=new s.default({type:e,resetConnection:n});return r.end(t),this.outgoingMessageStream.write(r),r}async readMessage(){const e=await this.incomingMessageIterator.next();if(e.done)throw new Error("unexpected end of message stream");return e.value}}var f=d;t.default=f,e.exports=d},1030:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2781);class i extends r.PassThrough{constructor({type:e,resetConnection:t=!1}){super(),this.type=void 0,this.resetConnection=void 0,this.ignore=void 0,this.type=e,this.resetConnection=t,this.ignore=!1}}var o=i;t.default=o,e.exports=i},6989:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.readCollation=s;var r=n(9624),i=n(7983),o=n(8975);function s(e,t){e.readBuffer(5,(e=>{t(r.Collation.fromBuffer(e))}))}function a(e,t,n){(t.tdsVersion<"7_2"?e.readUInt16LE:e.readUInt32LE).call(e,(t=>{e.readUInt16LE((r=>{e.readUInt8((a=>{const c=i.TYPE[a];if(!c)throw new Error((0,o.sprintf)("Unrecognised data type 0x%02X",a));switch(c.name){case"Null":case"TinyInt":case"SmallInt":case"Int":case"BigInt":case"Real":case"Float":case"SmallMoney":case"Money":case"Bit":case"SmallDateTime":case"DateTime":case"Date":return n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:void 0});case"IntN":case"FloatN":case"MoneyN":case"BitN":case"UniqueIdentifier":case"DateTimeN":return e.readUInt8((e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:void 0,dataLength:e,schema:void 0,udtInfo:void 0})}));case"Variant":case"Image":return e.readUInt32LE((e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:void 0,dataLength:e,schema:void 0,udtInfo:void 0})}));case"VarChar":case"Char":case"NVarChar":case"NChar":return e.readUInt16LE((i=>{s(e,(e=>{n({userType:t,flags:r,type:c,collation:e,precision:void 0,scale:void 0,dataLength:i,schema:void 0,udtInfo:void 0})}))}));case"Text":case"NText":return e.readUInt32LE((i=>{s(e,(e=>{n({userType:t,flags:r,type:c,collation:e,precision:void 0,scale:void 0,dataLength:i,schema:void 0,udtInfo:void 0})}))}));case"VarBinary":case"Binary":return e.readUInt16LE((e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:void 0,dataLength:e,schema:void 0,udtInfo:void 0})}));case"Xml":return function(e,t){e.readUInt8((n=>{1===n?e.readBVarChar((n=>{e.readBVarChar((r=>{e.readUsVarChar((e=>{t({dbname:n,owningSchema:r,xmlSchemaCollection:e})}))}))})):t(void 0)}))}(e,(e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:e,udtInfo:void 0})}));case"Time":case"DateTime2":case"DateTimeOffset":return e.readUInt8((e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:e,dataLength:void 0,schema:void 0,udtInfo:void 0})}));case"NumericN":case"DecimalN":return e.readUInt8((i=>{e.readUInt8((o=>{e.readUInt8((e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:o,scale:e,dataLength:i,schema:void 0,udtInfo:void 0})}))}))}));case"UDT":return function(e,t){e.readUInt16LE((n=>{e.readBVarChar((r=>{e.readBVarChar((i=>{e.readBVarChar((o=>{e.readUsVarChar((e=>{t({maxByteSize:n,dbname:r,owningSchema:i,typeName:o,assemblyName:e})}))}))}))}))}))}(e,(e=>{n({userType:t,flags:r,type:c,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:e})}));default:throw new Error((0,o.sprintf)("Unrecognised type %s",c.name))}}))}))}))}var c=a;t.default=c,e.exports=a,e.exports.readCollation=s},144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9546)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6113)),o=a(n(5799));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function a(e){return e&&e.__esModule?e:{default:e}}class c{constructor(e){this.data=void 0,this.data=this.createResponse(e)}toString(e=""){return e+"NTLM Auth"}createResponse(e){const t=this.createClientNonce(),n=e.domain,i=e.userName,o=e.password,s=e.ntlmpacket,a=s.target,c=s.nonce,u=64+2*n.length+2*i.length+24+16+8+8+8+4+a.length+4,l=new r.default(u);l.position=0,l.writeString("NTLMSSP\0","utf8"),l.writeUInt32LE(3);const h=64+2*n.length,d=h+2*i.length,f=d+24;l.writeUInt16LE(24),l.writeUInt16LE(24),l.writeUInt32LE(d),l.writeUInt16LE(16),l.writeUInt16LE(16),l.writeUInt32LE(f),l.writeUInt16LE(2*n.length),l.writeUInt16LE(2*n.length),l.writeUInt32LE(64),l.writeUInt16LE(2*i.length),l.writeUInt16LE(2*i.length),l.writeUInt32LE(h),l.writeUInt16LE(0),l.writeUInt16LE(0),l.writeUInt32LE(64),l.writeUInt16LE(0),l.writeUInt16LE(0),l.writeUInt32LE(64),l.writeUInt16LE(33281),l.writeUInt16LE(8),l.writeString(n,"ucs2"),l.writeString(i,"ucs2");const p=this.lmv2Response(n,i,o,c,t);l.copyFrom(p);const m=(new Date).getTime(),g=this.ntlmv2Response(n,i,o,c,a,t,m);l.copyFrom(g),l.writeUInt32LE(257),l.writeUInt32LE(0);const y=this.createTimestamp(m);return l.copyFrom(y),l.copyFrom(t),l.writeUInt32LE(0),l.copyFrom(a),l.writeUInt32LE(0),l.data}createClientNonce(){const e=Buffer.alloc(8,0);let t=0;for(;t<8;)e.writeUInt8(Math.ceil(255*Math.random()),t),t++;return e}ntlmv2Response(e,t,n,r,i,o,s){const a=this.createTimestamp(s),c=this.ntv2Hash(e,t,n),u=40+i.length,l=Buffer.alloc(u,0);return r.copy(l,0,0,8),l.writeUInt32LE(257,8),l.writeUInt32LE(0,12),a.copy(l,16,0,8),o.copy(l,24,0,8),l.writeUInt32LE(0,32),i.copy(l,36,0,i.length),l.writeUInt32LE(0,36+i.length),this.hmacMD5(l,c)}createTimestamp(e){const t=(BigInt(e)+BigInt(11644473600))*BigInt(1e7),n=Number(t&BigInt(4294967295)),r=Number(t>>BigInt(32)&BigInt(4294967295)),i=Buffer.alloc(8);return i.writeUInt32LE(n,0),i.writeUInt32LE(r,4),i}lmv2Response(e,t,n,r,i){const o=this.ntv2Hash(e,t,n),s=Buffer.alloc(r.length+i.length,0);r.copy(s),i.copy(s,r.length,0,i.length);const a=this.hmacMD5(s,o),c=Buffer.alloc(a.length+i.length,0);return a.copy(c),i.copy(c,a.length,0,i.length),c}ntv2Hash(e,t,n){const r=this.ntHash(n),i=Buffer.from(t.toUpperCase()+e.toUpperCase(),"ucs2");return this.hmacMD5(i,r)}ntHash(e){const t=Buffer.from(e,"ucs2");return Buffer.from(o.default.arrayBuffer(t))}hmacMD5(e,t){return i.createHmac("MD5",t).update(e).digest()}}var u=c;t.default=u,e.exports=c},7439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNTLMRequest=function(e){const t=escape(e.domain.toUpperCase()),f=e.workstation?escape(e.workstation.toUpperCase()):"";let p=n+r+i+o+s+a+c+l+u+h+d;""===f&&(p-=a);const m=Buffer.alloc(40),g=[m];let y=0;return y+=m.write("NTLMSSP",y,7,"ascii"),y=m.writeUInt8(0,y),y=m.writeUInt32LE(1,y),y=m.writeUInt32LE(p,y),y=m.writeUInt16LE(t.length,y),y=m.writeUInt16LE(t.length,y),y=m.writeUInt32LE(m.length+f.length,y),y=m.writeUInt16LE(f.length,y),y=m.writeUInt16LE(f.length,y),y=m.writeUInt32LE(m.length,y),y=m.writeUInt8(5,y),y=m.writeUInt8(0,y),y=m.writeUInt16LE(2195,y),y=m.writeUInt8(0,y),y=m.writeUInt8(0,y),y=m.writeUInt8(0,y),m.writeUInt8(15,y),g.push(Buffer.from(f,"ascii")),g.push(Buffer.from(t,"ascii")),Buffer.concat(g)};const n=1,r=2,i=4,o=512,s=4096,a=8192,c=32768,u=524288,l=33554432,h=536870912,d=2147483648},3987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(22))&&r.__esModule?r:{default:r},o=n(2781),s=n(8037);class a extends o.Duplex{constructor(e,{packetSize:t}){super({writableObjectMode:!0}),this.packetSize=void 0,this.debug=void 0,this.bl=void 0,this.currentMessage=void 0,this.packetSize=t,this.debug=e,this.bl=new i.default,this.on("finish",(()=>{this.push(null)}))}_write(e,t,n){const r=this.packetSize-s.HEADER_LENGTH;let i=0;this.currentMessage=e,this.currentMessage.on("data",(t=>{if(!e.ignore)for(this.bl.append(t);this.bl.length>r;){const t=this.bl.slice(0,r);this.bl.consume(r);const n=new s.Packet(e.type);n.packetId(i+=1),n.resetConnection(e.resetConnection),n.addData(t),this.debug.packet("Sent",n),this.debug.data(n),!1===this.push(n.buffer)&&e.pause()}})),this.currentMessage.on("end",(()=>{const t=this.bl.slice();this.bl.consume(t.length);const r=new s.Packet(e.type);r.packetId(i+=1),r.resetConnection(e.resetConnection),r.last(!0),r.ignore(e.ignore),r.addData(t),this.debug.packet("Sent",r),this.debug.data(r),this.push(r.buffer),this.currentMessage=void 0,n()}))}_read(e){this.currentMessage&&this.currentMessage.resume()}}var c=a;t.default=c,e.exports=a},8037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE=t.Packet=t.OFFSET=t.HEADER_LENGTH=void 0,t.isPacketComplete=function(e){return!(e.length<8)&&e.length>=e.readUInt16BE(a.Length)},t.packetLength=function(e){return e.readUInt16BE(a.Length)};var r=n(8975);t.HEADER_LENGTH=8;const i={SQL_BATCH:1,RPC_REQUEST:3,TABULAR_RESULT:4,ATTENTION:6,BULK_LOAD:7,TRANSACTION_MANAGER:14,LOGIN7:16,NTLMAUTH_PKT:17,PRELOGIN:18,FEDAUTH_TOKEN:8};t.TYPE=i;const o={};for(const e in i)o[i[e]]=e;const s={NORMAL:0,EOM:1,IGNORE:2,RESETCONNECTION:8,RESETCONNECTIONSKIPTRAN:16},a={Type:0,Status:1,Length:2,SPID:4,PacketID:6,Window:7};t.OFFSET=a,t.Packet=class{constructor(e){if(this.buffer=void 0,e instanceof Buffer)this.buffer=e;else{const t=e;this.buffer=Buffer.alloc(8,0),this.buffer.writeUInt8(t,a.Type),this.buffer.writeUInt8(s.NORMAL,a.Status),this.buffer.writeUInt16BE(0,a.SPID),this.buffer.writeUInt8(1,a.PacketID),this.buffer.writeUInt8(0,a.Window),this.setLength()}}setLength(){this.buffer.writeUInt16BE(this.buffer.length,a.Length)}length(){return this.buffer.readUInt16BE(a.Length)}resetConnection(e){let t=this.buffer.readUInt8(a.Status);e?t|=s.RESETCONNECTION:t&=255-s.RESETCONNECTION,this.buffer.writeUInt8(t,a.Status)}last(e){let t=this.buffer.readUInt8(a.Status);return arguments.length>0&&(e?t|=s.EOM:t&=255-s.EOM,this.buffer.writeUInt8(t,a.Status)),this.isLast()}ignore(e){let t=this.buffer.readUInt8(a.Status);e?t|=s.IGNORE:t&=255-s.IGNORE,this.buffer.writeUInt8(t,a.Status)}isLast(){return!!(this.buffer.readUInt8(a.Status)&s.EOM)}packetId(e){return e&&this.buffer.writeUInt8(e%256,a.PacketID),this.buffer.readUInt8(a.PacketID)}addData(e){return this.buffer=Buffer.concat([this.buffer,e]),this.setLength(),this}data(){return this.buffer.slice(8)}type(){return this.buffer.readUInt8(a.Type)}statusAsString(){const e=this.buffer.readUInt8(a.Status),t=[];for(const n in s)e&s[n]?t.push(n):t.push(void 0);return t.join(" ").trim()}headerToString(e=""){return e+(0,r.sprintf)("type:0x%02X(%s), status:0x%02X(%s), length:0x%04X, spid:0x%04X, packetId:0x%02X, window:0x%02X",this.buffer.readUInt8(a.Type),o[this.buffer.readUInt8(a.Type)],this.buffer.readUInt8(a.Status),this.statusAsString(),this.buffer.readUInt16BE(a.Length),this.buffer.readUInt16BE(a.SPID),this.buffer.readUInt8(a.PacketID),this.buffer.readUInt8(a.Window))}dataToString(e=""){const t=this.data();let n="",i="";for(let o=0;o<t.length;o++)o%32==0&&(n+=e,n+=(0,r.sprintf)("%04X  ",o)),t[o]<32||t[o]>126?(i+=".",(o+1)%8==0&&(o+1)%32!=0&&(i+=" ")):i+=String.fromCharCode(t[o]),null!=t[o]&&(n+=(0,r.sprintf)("%02X",t[o])),(o+1)%4==0&&(o+1)%32!=0&&(n+=" "),(o+1)%32==0&&(n+="  "+i,i="",o<t.length-1&&(n+="\n"));return i.length&&(n+="  "+i),n}toString(e=""){return this.headerToString(e)+"\n"+this.dataToString(e+e)}payloadString(){return""}}},2415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(8975),o=(r=n(9546))&&r.__esModule?r:{default:r};const s=20,a={OFF:0,ON:1,NOT_SUP:2,REQ:3},c={};for(const e in a)c[a[e]]=e;const u={OFF:0,ON:1},l={};for(const e in u)l[u[e]]=e;class h{constructor(e={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}){this.data=void 0,this.options=void 0,this.version=void 0,this.encryption=void 0,this.encryptionString=void 0,this.instance=void 0,this.threadId=void 0,this.mars=void 0,this.marsString=void 0,this.fedAuthRequired=void 0,e instanceof Buffer?(this.data=e,this.options={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}):(this.options=e,this.createOptions()),this.extractOptions()}createOptions(){const e=[this.createVersionOption(),this.createEncryptionOption(),this.createInstanceOption(),this.createThreadIdOption(),this.createMarsOption(),this.createFedAuthOption()];let t=0;for(let n=0,r=e.length;n<r;n++)t+=5+e[n].data.length;t++,this.data=Buffer.alloc(t,0);let n=0,r=5*e.length+1;for(let t=0,i=e.length;t<i;t++){const i=e[t];this.data.writeUInt8(i.token,n+0),this.data.writeUInt16BE(r,n+1),this.data.writeUInt16BE(i.data.length,n+3),n+=5,i.data.copy(this.data,r),r+=i.data.length}this.data.writeUInt8(255,n)}createVersionOption(){const e=new o.default(s);return e.writeUInt8(this.options.version.major),e.writeUInt8(this.options.version.minor),e.writeUInt16BE(this.options.version.build),e.writeUInt16BE(this.options.version.subbuild),{token:0,data:e.data}}createEncryptionOption(){const e=new o.default(s);return this.options.encrypt?e.writeUInt8(a.ON):e.writeUInt8(a.NOT_SUP),{token:1,data:e.data}}createInstanceOption(){const e=new o.default(s);return e.writeUInt8(0),{token:2,data:e.data}}createThreadIdOption(){const e=new o.default(s);return e.writeUInt32BE(0),{token:3,data:e.data}}createMarsOption(){const e=new o.default(s);return e.writeUInt8(u.OFF),{token:4,data:e.data}}createFedAuthOption(){const e=new o.default(s);return e.writeUInt8(1),{token:6,data:e.data}}extractOptions(){let e=0;for(;255!==this.data[e];){let t=this.data.readUInt16BE(e+1);const n=this.data.readUInt16BE(e+3);switch(this.data[e]){case 0:this.extractVersion(t);break;case 1:this.extractEncryption(t);break;case 2:this.extractInstance(t);break;case 3:n>0&&this.extractThreadId(t);break;case 4:this.extractMars(t);break;case 6:this.extractFedAuth(t)}e+=5,t+=n}}extractVersion(e){this.version={major:this.data.readUInt8(e+0),minor:this.data.readUInt8(e+1),build:this.data.readUInt16BE(e+2),subbuild:this.data.readUInt16BE(e+4)}}extractEncryption(e){this.encryption=this.data.readUInt8(e),this.encryptionString=c[this.encryption]}extractInstance(e){this.instance=this.data.readUInt8(e)}extractThreadId(e){this.threadId=this.data.readUInt32BE(e)}extractMars(e){this.mars=this.data.readUInt8(e),this.marsString=l[this.mars]}extractFedAuth(e){this.fedAuthRequired=this.data.readUInt8(e)}toString(e=""){return e+"PreLogin - "+(0,i.sprintf)("version:%d.%d.%d.%d, encryption:0x%02X(%s), instopt:0x%02X, threadId:0x%08X, mars:0x%02X(%s)",this.version.major,this.version.minor,this.version.build,this.version.subbuild,this.encryption?this.encryption:0,this.encryptionString?this.encryptionString:"",this.instance?this.instance:0,this.threadId?this.threadId:0,this.mars?this.mars:0,this.marsString?this.marsString:"")}}var d=h;t.default=d,e.exports=h},9276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2361),i=n(8871),o=n(415);class s extends r.EventEmitter{on(e,t){return super.on(e,t)}emit(e,...t){return super.emit(e,...t)}constructor(e,t,n){super(),this.sqlTextOrProcedure=void 0,this.parameters=void 0,this.parametersByName=void 0,this.preparing=void 0,this.canceled=void 0,this.paused=void 0,this.userCallback=void 0,this.handle=void 0,this.error=void 0,this.connection=void 0,this.timeout=void 0,this.rows=void 0,this.rst=void 0,this.rowCount=void 0,this.callback=void 0,this.shouldHonorAE=void 0,this.statementColumnEncryptionSetting=void 0,this.cryptoMetadataLoaded=void 0,this.sqlTextOrProcedure=e,this.parameters=[],this.parametersByName={},this.preparing=!1,this.handle=void 0,this.canceled=!1,this.paused=!1,this.error=void 0,this.connection=void 0,this.timeout=void 0,this.userCallback=t,this.statementColumnEncryptionSetting=n&&n.statementColumnEncryptionSetting||o.SQLServerStatementColumnEncryptionSetting.UseConnectionSetting,this.cryptoMetadataLoaded=!1,this.callback=function(e,t,n){this.preparing?(this.preparing=!1,e?this.emit("error",e):this.emit("prepared")):(this.userCallback(e,t,n),this.emit("requestCompleted"))}}addParameter(e,t,n,r){const{output:i=!1,length:o,precision:s,scale:a}=r??{},c={type:t,name:e,value:n,output:i,length:o,precision:s,scale:a};this.parameters.push(c),this.parametersByName[e]=c}addOutputParameter(e,t,n,r){this.addParameter(e,t,n,{...r,output:!0})}makeParamsParameter(e){let t="";for(let n=0,r=e.length;n<r;n++){const r=e[n];t.length>0&&(t+=", "),t+="@"+r.name+" ",t+=r.type.declaration(r),r.output&&(t+=" OUTPUT")}return t}validateParameters(e){for(let t=0,n=this.parameters.length;t<n;t++){const n=this.parameters[t];try{n.value=n.type.validate(n.value,e)}catch(e){throw new i.RequestError("Validation failed for parameter '"+n.name+"'. "+e.message,"EPARAM")}}}pause(){this.paused||(this.emit("pause"),this.paused=!0)}resume(){this.paused&&(this.paused=!1,this.emit("resume"))}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}setTimeout(e){this.timeout=e}}var a=s;t.default=a,e.exports=s},3091:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(9546))&&r.__esModule?r:{default:r},o=n(2602);let s;s=Symbol.iterator;class a{constructor(e,t,n,r,i){this.procedure=void 0,this.parameters=void 0,this.options=void 0,this.txnDescriptor=void 0,this.collation=void 0,this.procedure=e,this.parameters=t,this.options=r,this.txnDescriptor=n,this.collation=i}[s](){return this.generateData()}*generateData(){const e=new i.default(500);if(this.options.tdsVersion>="7_2"){const t=1;(0,o.writeToTrackingBuffer)(e,this.txnDescriptor,t)}"string"==typeof this.procedure?e.writeUsVarchar(this.procedure):(e.writeUShort(65535),e.writeUShort(this.procedure)),e.writeUInt16LE(0),yield e.data;const t=this.parameters.length;for(let e=0;e<t;e++)yield*this.generateParameterData(this.parameters[e])}toString(e=""){return e+"RPC Request - "+this.procedure}*generateParameterData(e){const t=new i.default(3+Buffer.byteLength(e.name,"ucs-2")+1);t.writeBVarchar("@"+e.name);let n=0;e.output&&(n|=1),t.writeUInt8(n),yield t.data;const r={value:e.value},o=e.type;32==(48&o.id)&&(e.length?r.length=e.length:o.resolveLength&&(r.length=o.resolveLength(e))),e.precision?r.precision=e.precision:o.resolvePrecision&&(r.precision=o.resolvePrecision(e)),e.scale?r.scale=e.scale:o.resolveScale&&(r.scale=o.resolveScale(e)),this.collation&&(r.collation=this.collation),yield o.generateTypeInfo(r,this.options),yield o.generateParameterLength(r,this.options),yield*o.generateParameterData(r,this.options)}}var c=a;t.default=c,e.exports=a},204:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendInParallel=u,t.sendMessage=async function(e,t,n,r,a){if(r.aborted)throw new s.default;let c;return c=i.default.isIP(e)?[{address:e,family:i.default.isIPv6(e)?6:4}]:await new Promise(((t,i)=>{const a=()=>{i(new s.default)};r.addEventListener("abort",a),n(o.toASCII(e),{all:!0},((e,n)=>{r.removeEventListener("abort",a),e?i(e):t(n)}))})),await u(c,t,a,r)};var r=c(n(1891)),i=c(n(1808)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(5477)),s=c(n(69));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}async function u(e,t,n,i){if(i.aborted)throw new s.default;return await new Promise(((o,a)=>{const c=[];let u=0;const l=t=>{u++,u===e.length&&(i.removeEventListener("abort",d),f(),a(t))},h=e=>{i.removeEventListener("abort",d),f(),o(e)},d=()=>{f(),a(new s.default)},f=()=>{for(const e of c)e.removeListener("error",l),e.removeListener("message",h),e.close()};i.addEventListener("abort",d,{once:!0});for(let i=0;i<e.length;i++){const o=6===e[i].family?"udp6":"udp4",s=r.default.createSocket(o);c.push(s),s.on("error",l),s.on("message",h),s.send(n,0,n.length,t,e[i].address)}}))}},8979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(9546))&&r.__esModule?r:{default:r},o=n(2602);let s;s=Symbol.iterator;class a{constructor(e,t,n){this.sqlText=void 0,this.txnDescriptor=void 0,this.options=void 0,this.sqlText=e,this.txnDescriptor=t,this.options=n}*[s](){if(this.options.tdsVersion>="7_2"){const e=new i.default(18,"ucs2"),t=1;(0,o.writeToTrackingBuffer)(e,this.txnDescriptor,t),yield e.data}yield Buffer.from(this.sqlText,"ucs2")}toString(e=""){return e+"SQL Batch - "+this.sqlText}}var c=a;t.default=c,e.exports=a},756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.versionsByValue=t.versions=void 0;const n={"7_1":1895825409,"7_2":1913192450,"7_3_A":1930035203,"7_3_B":1930100739,"7_4":1946157060};t.versions=n;const r={};t.versionsByValue=r;for(const e in n)r[n[e]]=e},5836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BulkLoad",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return a.ConnectionError}}),Object.defineProperty(t,"ISOLATION_LEVEL",{enumerable:!0,get:function(){return u.ISOLATION_LEVEL}}),Object.defineProperty(t,"Request",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"RequestError",{enumerable:!0,get:function(){return a.RequestError}}),Object.defineProperty(t,"TDS_VERSION",{enumerable:!0,get:function(){return l.versions}}),Object.defineProperty(t,"TYPES",{enumerable:!0,get:function(){return c.TYPES}}),t.connect=function(e,t){const n=new i.default(e);return n.connect(t),n},t.library=void 0;var r=h(n(6733)),i=h(n(7736)),o=h(n(9276)),s=n(1117),a=n(8871),c=n(7983),u=n(3326),l=n(756);function h(e){return e&&e.__esModule?e:{default:e}}const d={name:s.name};t.library=d},4725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(6989))&&r.__esModule?r:{default:r},o=n(5961);function s(e,t,n,r){(0,i.default)(e,t,(i=>{!function(e,t,n,r){n.type.hasTableName?t.tdsVersion>="7_2"?e.readUInt8((t=>{const n=[];let i=0;!function r(o){if(t===i)return o();e.readUsVarChar((e=>{n.push(e),i++,r(o)}))}((()=>{r(n)}))})):e.readUsVarChar(r):r(void 0)}(e,t,i,(o=>{!function(e,t,n,r,i){e.readBVarChar((e=>{t.columnNameReplacer?i(t.columnNameReplacer(e,n,r)):t.camelCaseColumns?i(e.replace(/^[A-Z]/,(function(e){return e.toLowerCase()}))):i(e)}))}(e,t,n,i,(e=>{r({userType:i.userType,flags:i.flags,type:i.type,collation:i.collation,precision:i.precision,scale:i.scale,udtInfo:i.udtInfo,dataLength:i.dataLength,schema:i.schema,colName:e,tableName:o})}))}))}))}async function a(e){for(;e.buffer.length-e.position<2;)await e.streamBuffer.waitForChunk();const t=e.buffer.readUInt16LE(e.position);e.position+=2;const n=[];for(let r=0;r<t;r++){let t;for(s(e,e.options,r,(e=>{t=e}));e.suspended;)await e.streamBuffer.waitForChunk(),e.suspended=!1,(0,e.next)();n.push(t)}return new o.ColMetadataToken(n)}var c=a;t.default=c,e.exports=a},5551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doneInProcParser=function(e,t,n){i(e,t,(e=>{n(new r.DoneInProcToken(e))}))},t.doneParser=function(e,t,n){i(e,t,(e=>{n(new r.DoneToken(e))}))},t.doneProcParser=function(e,t,n){i(e,t,(e=>{n(new r.DoneProcToken(e))}))};var r=n(5961);function i(e,t,n){e.readUInt16LE((r=>{const i=!!(1&r),o=!!(2&r),s=!!(16&r),a=!!(32&r),c=!!(256&r);e.readUInt16LE((r=>{const u=e=>{n({more:i,sqlError:o,attention:a,serverError:c,rowCount:s?e:void 0,curCmd:r})};t.tdsVersion<"7_2"?e.readUInt32LE(u):e.readBigUInt64LE((e=>{u(Number(e))}))}))}))}},1111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(9624),i=n(5961);const o={1:{name:"DATABASE",event:"databaseChange"},2:{name:"LANGUAGE",event:"languageChange"},3:{name:"CHARSET",event:"charsetChange"},4:{name:"PACKET_SIZE",event:"packetSizeChange"},7:{name:"SQL_COLLATION",event:"sqlCollationChange"},8:{name:"BEGIN_TXN",event:"beginTransaction"},9:{name:"COMMIT_TXN",event:"commitTransaction"},10:{name:"ROLLBACK_TXN",event:"rollbackTransaction"},13:{name:"DATABASE_MIRRORING_PARTNER",event:"partnerNode"},17:{name:"TXN_ENDED"},18:{name:"RESET_CONNECTION",event:"resetConnection"},20:{name:"ROUTING_CHANGE",event:"routingChange"}};function s(e,t,n){e.readUInt16LE((t=>{e.readUInt8((s=>{const a=o[s];if(!a)return console.error("Tedious > Unsupported ENVCHANGE type "+s),e.readBuffer(t-1,(()=>{n(void 0)}));!function(e,t,n,o){switch(n.name){case"DATABASE":case"LANGUAGE":case"CHARSET":case"PACKET_SIZE":case"DATABASE_MIRRORING_PARTNER":return e.readBVarChar((t=>{e.readBVarChar((e=>{switch(n.name){case"PACKET_SIZE":return o(new i.PacketSizeEnvChangeToken(parseInt(t),parseInt(e)));case"DATABASE":return o(new i.DatabaseEnvChangeToken(t,e));case"LANGUAGE":return o(new i.LanguageEnvChangeToken(t,e));case"CHARSET":return o(new i.CharsetEnvChangeToken(t,e));case"DATABASE_MIRRORING_PARTNER":return o(new i.DatabaseMirroringPartnerEnvChangeToken(t,e))}}))}));case"SQL_COLLATION":case"BEGIN_TXN":case"COMMIT_TXN":case"ROLLBACK_TXN":case"RESET_CONNECTION":return e.readBVarByte((t=>{e.readBVarByte((e=>{switch(n.name){case"SQL_COLLATION":{const n=t.length?r.Collation.fromBuffer(t):void 0,s=e.length?r.Collation.fromBuffer(e):void 0;return o(new i.CollationChangeToken(n,s))}case"BEGIN_TXN":return o(new i.BeginTransactionEnvChangeToken(t,e));case"COMMIT_TXN":return o(new i.CommitTransactionEnvChangeToken(t,e));case"ROLLBACK_TXN":return o(new i.RollbackTransactionEnvChangeToken(t,e));case"RESET_CONNECTION":return o(new i.ResetConnectionEnvChangeToken(t,e))}}))}));case"ROUTING_CHANGE":return e.readUInt16LE((t=>{e.readBuffer(t,(t=>{const n=t.readUInt8(0);if(0!==n)throw new Error("Unknown protocol byte in routing change event");const r=t.readUInt16LE(1),s=t.readUInt16LE(3),a={protocol:n,port:r,server:t.toString("ucs2",5,5+2*s)};e.readUInt16LE((t=>{e.readBuffer(t,(e=>{o(new i.RoutingEnvChangeToken(a,e))}))}))}))}));default:console.error("Tedious > Unsupported ENVCHANGE type "+n.name),e.readBuffer(t-1,(()=>{o(void 0)}))}}(e,t,a,(e=>{n(e)}))}))}))}var a=s;t.default=a,e.exports=s},143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961);function i(e,t,n){let i,o;!function t(){e.readUInt8((s=>{if(255===s)return n(new r.FeatureExtAckToken(i,o));e.readUInt32LE((n=>{e.readBuffer(n,(e=>{switch(s){case 2:i=e;break;case 10:o=!!e[0]}t()}))}))}))}()}var o=i;t.default=o,e.exports=i},6228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961);function i(e,t,n){e.readUInt32LE((t=>{e.readBuffer(t,(e=>{let t,i,o=0;const s=e.readUInt32LE(o);o+=4;for(let n=0;n<s;n++){const n=e.readUInt8(o);o+=1;const r=e.readUInt32LE(o);o+=4;const s=e.readUInt32LE(o);switch(o+=4,n){case 2:t=e.toString("ucs2",s,s+r);break;case 1:i=e.toString("ucs2",s,s+r)}}n(new r.FedAuthInfoToken(t,i))}))}))}var o=i;t.default=o,e.exports=i},2480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnexpectedTokenError=t.TokenHandler=t.RequestTokenHandler=t.Login7TokenHandler=t.InitialSqlTokenHandler=t.AttentionTokenHandler=void 0;var r=s(n(9276)),i=n(8871),o=s(n(6630));function s(e){return e&&e.__esModule?e:{default:e}}class a extends Error{constructor(e,t){super("Unexpected token `"+t.name+"` in `"+e.constructor.name+"`")}}t.UnexpectedTokenError=a;class c{onInfoMessage(e){throw new a(this,e)}onErrorMessage(e){throw new a(this,e)}onSSPI(e){throw new a(this,e)}onDatabaseChange(e){throw new a(this,e)}onLanguageChange(e){throw new a(this,e)}onCharsetChange(e){throw new a(this,e)}onSqlCollationChange(e){throw new a(this,e)}onRoutingChange(e){throw new a(this,e)}onPacketSizeChange(e){throw new a(this,e)}onResetConnection(e){throw new a(this,e)}onBeginTransaction(e){throw new a(this,e)}onCommitTransaction(e){throw new a(this,e)}onRollbackTransaction(e){throw new a(this,e)}onFedAuthInfo(e){throw new a(this,e)}onFeatureExtAck(e){throw new a(this,e)}onLoginAck(e){throw new a(this,e)}onColMetadata(e){throw new a(this,e)}onOrder(e){throw new a(this,e)}onRow(e){throw new a(this,e)}onReturnStatus(e){throw new a(this,e)}onReturnValue(e){throw new a(this,e)}onDoneProc(e){throw new a(this,e)}onDoneInProc(e){throw new a(this,e)}onDone(e){throw new a(this,e)}onDatabaseMirroringPartner(e){throw new a(this,e)}}t.TokenHandler=c,t.InitialSqlTokenHandler=class extends c{constructor(e){super(),this.connection=void 0,this.connection=e}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){this.connection.emit("errorMessage",e)}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onBeginTransaction(e){this.connection.transactionDescriptors.push(e.newValue),this.connection.inTransaction=!0}onCommitTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(e){this.connection.emit("error",new Error("Received 'columnMetadata' when no sqlRequest is in progress")),this.connection.close()}onOrder(e){this.connection.emit("error",new Error("Received 'order' when no sqlRequest is in progress")),this.connection.close()}onRow(e){this.connection.emit("error",new Error("Received 'row' when no sqlRequest is in progress")),this.connection.close()}onReturnStatus(e){}onReturnValue(e){}onDoneProc(e){}onDoneInProc(e){}onDone(e){}onResetConnection(e){this.connection.emit("resetConnection")}},t.Login7TokenHandler=class extends c{constructor(e){super(),this.connection=void 0,this.fedAuthInfoToken=void 0,this.routingData=void 0,this.loginAckReceived=!1,this.connection=e}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){this.connection.emit("errorMessage",e);const t=new i.ConnectionError(e.message,"ELOGIN");this.connection.transientErrorLookup.isTransientError(e.number)&&this.connection.curTransientRetryCount!==this.connection.config.options.maxRetriesOnTransientErrors&&(t.isTransient=!0),this.connection.loginError=t}onSSPI(e){e.ntlmpacket&&(this.connection.ntlmpacket=e.ntlmpacket,this.connection.ntlmpacketBuffer=e.ntlmpacketBuffer)}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onFedAuthInfo(e){this.fedAuthInfoToken=e}onFeatureExtAck(e){const{authentication:t}=this.connection.config;"azure-active-directory-password"===t.type||"azure-active-directory-access-token"===t.type||"azure-active-directory-msi-vm"===t.type||"azure-active-directory-msi-app-service"===t.type||"azure-active-directory-service-principal-secret"===t.type||"azure-active-directory-default"===t.type?void 0===e.fedAuth?this.connection.loginError=new i.ConnectionError("Did not receive Active Directory authentication acknowledgement"):0!==e.fedAuth.length&&(this.connection.loginError=new i.ConnectionError(`Active Directory authentication acknowledgment for ${t.type} authentication method includes extra data`)):void 0===e.fedAuth&&void 0===e.utf8Support?this.connection.loginError=new i.ConnectionError("Received acknowledgement for unknown feature"):e.fedAuth&&(this.connection.loginError=new i.ConnectionError("Did not request Active Directory authentication, but received the acknowledgment"))}onLoginAck(e){e.tdsVersion?e.interface?(this.connection.config.options.tdsVersion=e.tdsVersion,this.loginAckReceived=!0):this.connection.loginError=new i.ConnectionError("Server responded with unsupported interface.","EINTERFACENOTSUPP"):this.connection.loginError=new i.ConnectionError("Server responded with unknown TDS version.","ETDS")}onRoutingChange(e){const[t]=e.newValue.server.split("\\");this.routingData={server:t,port:e.newValue.port}}onDoneInProc(e){}onDone(e){}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onDatabaseMirroringPartner(e){}},t.RequestTokenHandler=class extends c{constructor(e,t){super(),this.connection=void 0,this.request=void 0,this.errors=void 0,this.connection=e,this.request=t,this.errors=[]}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){if(this.connection.emit("errorMessage",e),!this.request.canceled){const t=new i.RequestError(e.message,"EREQUEST");t.number=e.number,t.state=e.state,t.class=e.class,t.serverName=e.serverName,t.procName=e.procName,t.lineNumber=e.lineNumber,this.errors.push(t),this.request.error=t,this.request instanceof r.default&&this.errors.length>1&&(this.request.error=new o.default(this.errors))}}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onBeginTransaction(e){this.connection.transactionDescriptors.push(e.newValue),this.connection.inTransaction=!0}onCommitTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(e){if(!this.request.canceled)if(this.connection.config.options.useColumnNames){const t=Object.create(null);for(let n=0,r=e.columns.length;n<r;n++){const r=e.columns[n];null==t[r.colName]&&(t[r.colName]=r)}this.request.emit("columnMetadata",t)}else this.request.emit("columnMetadata",e.columns)}onOrder(e){this.request.canceled||this.request.emit("order",e.orderColumns)}onRow(e){this.request.canceled||(this.connection.config.options.rowCollectionOnRequestCompletion&&this.request.rows.push(e.columns),this.connection.config.options.rowCollectionOnDone&&this.request.rst.push(e.columns),this.request.emit("row",e.columns))}onReturnStatus(e){this.request.canceled||(this.connection.procReturnStatusValue=e.value)}onReturnValue(e){this.request.canceled||this.request.emit("returnValue",e.paramName,e.value,e.metadata)}onDoneProc(e){this.request.canceled||(e.sqlError&&!this.request.error&&(this.request.error=new i.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("doneProc",e.rowCount,e.more,this.connection.procReturnStatusValue,this.request.rst),this.connection.procReturnStatusValue=void 0,void 0!==e.rowCount&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDoneInProc(e){this.request.canceled||(this.request.emit("doneInProc",e.rowCount,e.more,this.request.rst),void 0!==e.rowCount&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDone(e){this.request.canceled||(e.sqlError&&!this.request.error&&(this.request.error=new i.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("done",e.rowCount,e.more,this.request.rst),void 0!==e.rowCount&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onResetConnection(e){this.connection.emit("resetConnection")}},t.AttentionTokenHandler=class extends c{constructor(e,t){super(),this.connection=void 0,this.request=void 0,this.attentionReceived=void 0,this.connection=e,this.request=t,this.attentionReceived=!1}onDone(e){e.attention&&(this.attentionReceived=!0)}}},9860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorParser=function(e,t,n){i(e,t,(e=>{n(new r.ErrorMessageToken(e))}))},t.infoParser=function(e,t,n){i(e,t,(e=>{n(new r.InfoMessageToken(e))}))};var r=n(5961);function i(e,t,n){e.readUInt16LE((()=>{e.readUInt32LE((r=>{e.readUInt8((i=>{e.readUInt8((o=>{e.readUsVarChar((s=>{e.readBVarChar((a=>{e.readBVarChar((c=>{(t.tdsVersion<"7_2"?e.readUInt16LE:e.readUInt32LE).call(e,(e=>{n({number:r,state:i,class:o,message:s,serverName:a,procName:c,lineNumber:e})}))}))}))}))}))}))}))}))}},117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961),i=n(756);const o={0:"SQL_DFLT",1:"SQL_TSQL"};function s(e,t,n){e.readUInt16LE((()=>{e.readUInt8((t=>{const s=o[t];e.readUInt32BE((t=>{const o=i.versionsByValue[t];e.readBVarChar((t=>{e.readUInt8((i=>{e.readUInt8((a=>{e.readUInt8((c=>{e.readUInt8((e=>{n(new r.LoginAckToken({interface:s,tdsVersion:o,progName:t,progVersion:{major:i,minor:a,buildNumHi:c,buildNumLow:e}}))}))}))}))}))}))}))}))}))}var a=s;t.default=a,e.exports=s},199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(5961),o=(r=n(9489))&&r.__esModule?r:{default:r};function s(e,t,n,r){r(null)}async function a(e){const t=e.colMetadata,n=Math.ceil(t.length/8),r=[],a=[];for(;e.buffer.length-e.position<n;)await e.streamBuffer.waitForChunk();const c=e.buffer.slice(e.position,e.position+n);e.position+=n;for(let e=0,t=c.length;e<t;e++){const t=c[e];a.push(!!(1&t)),a.push(!!(2&t)),a.push(!!(4&t)),a.push(!!(8&t)),a.push(!!(16&t)),a.push(!!(32&t)),a.push(!!(64&t)),a.push(!!(128&t))}for(let n=0;n<t.length;n++){const i=t[n];let c;for((a[n]?s:o.default)(e,i,e.options,(e=>{c=e}));e.suspended;)await e.streamBuffer.waitForChunk(),e.suspended=!1,(0,e.next)();r.push({value:c,metadata:i})}if(e.options.useColumnNames){const e={};return r.forEach((t=>{const n=t.metadata.colName;null==e[n]&&(e[n]=t)})),new i.NBCRowToken(e)}return new i.NBCRowToken(r)}var c=a;t.default=c,e.exports=a},1525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961);function i(e,t,n){e.readUInt16LE((t=>{const i=t/2,o=[];let s=0;!function t(n){if(s===i)return n();e.readUInt16LE((e=>{o.push(e),s++,t(n)}))}((()=>{n(new r.OrderToken(o))}))}))}var o=i;t.default=o,e.exports=i},1:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961);function i(e,t,n){e.readInt32LE((e=>{n(new r.ReturnStatusToken(e))}))}var o=i;t.default=o,e.exports=i},3034:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961),i=s(n(6989)),o=s(n(9489));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){e.readUInt16LE((s=>{e.readBVarChar((a=>{"@"===a.charAt(0)&&(a=a.slice(1)),e.readUInt8((()=>{(0,i.default)(e,t,(i=>{(0,o.default)(e,i,t,(e=>{n(new r.ReturnValueToken({paramOrdinal:s,paramName:a,metadata:i,value:e}))}))}))}))}))}))}var c=a;t.default=c,e.exports=a},4465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(5961),o=(r=n(9489))&&r.__esModule?r:{default:r};async function s(e){const t=e.colMetadata,n=t.length,r=[];for(let i=0;i<n;i++){const n=t[i];let s;for((0,o.default)(e,n,e.options,(e=>{s=e}));e.suspended;)await e.streamBuffer.waitForChunk(),e.suspended=!1,(0,e.next)();r.push({value:s,metadata:n})}if(e.options.useColumnNames){const e=Object.create(null);return r.forEach((t=>{const n=t.metadata.colName;null==e[n]&&(e[n]=t)})),new i.RowToken(e)}return new i.RowToken(r)}var a=s;t.default=a,e.exports=s},7629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961);function i(e,t,n){e.readUsVarByte((e=>{n(new r.SSPIToken(function(e){const t={};return t.magic=e.slice(0,8).toString("utf8"),t.type=e.readInt32LE(8),t.domainLen=e.readInt16LE(12),t.domainMax=e.readInt16LE(14),t.domainOffset=e.readInt32LE(16),t.flags=e.readInt32LE(20),t.nonce=e.slice(24,32),t.zeroes=e.slice(32,40),t.targetLen=e.readInt16LE(40),t.targetMax=e.readInt16LE(42),t.targetOffset=e.readInt32LE(44),t.oddData=e.slice(48,56),t.domain=e.slice(56,56+t.domainLen).toString("ucs2"),t.target=e.slice(56+t.domainLen,56+t.domainLen+t.targetLen),t}(e),e))}))}var o=i;t.default=o,e.exports=i},3655:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5961),i=y(n(4725)),o=n(5551),s=y(n(1111)),a=n(9860),c=y(n(6228)),u=y(n(143)),l=y(n(117)),h=y(n(1525)),d=y(n(1)),f=y(n(3034)),p=y(n(4465)),m=y(n(199)),g=y(n(7629));function y(e){return e&&e.__esModule?e:{default:e}}const _={[r.TYPE.DONE]:o.doneParser,[r.TYPE.DONEINPROC]:o.doneInProcParser,[r.TYPE.DONEPROC]:o.doneProcParser,[r.TYPE.ENVCHANGE]:s.default,[r.TYPE.ERROR]:a.errorParser,[r.TYPE.FEDAUTHINFO]:c.default,[r.TYPE.FEATUREEXTACK]:u.default,[r.TYPE.INFO]:a.infoParser,[r.TYPE.LOGINACK]:l.default,[r.TYPE.ORDER]:h.default,[r.TYPE.RETURNSTATUS]:d.default,[r.TYPE.RETURNVALUE]:f.default,[r.TYPE.SSPI]:g.default};class v{constructor(e){this.iterator=void 0,this.buffer=void 0,this.position=void 0,this.iterator=(e[Symbol.asyncIterator]||e[Symbol.iterator]).call(e),this.buffer=Buffer.alloc(0),this.position=0}async waitForChunk(){const e=await this.iterator.next();if(e.done)throw new Error("unexpected end of data");this.position===this.buffer.length?this.buffer=e.value:this.buffer=Buffer.concat([this.buffer.slice(this.position),e.value]),this.position=0}}class E{static async*parseTokens(e,t,n,o=[]){let s;const a=e=>{s=e},c=new v(e),u=new E(c,t,n);for(u.colMetadata=o;;){try{await c.waitForChunk()}catch(e){if(c.position===c.buffer.length)return;throw e}for(u.suspended&&(u.suspended=!1,(0,u.next)(),!u.suspended&&s&&(s instanceof r.ColMetadataToken&&(u.colMetadata=s.columns),yield s));!u.suspended&&u.position+1<=u.buffer.length;){const e=u.buffer.readUInt8(u.position);if(u.position+=1,e===r.TYPE.COLMETADATA){const e=await(0,i.default)(u);u.colMetadata=e.columns,yield e}else if(e===r.TYPE.ROW)yield(0,p.default)(u);else if(e===r.TYPE.NBCROW)yield(0,m.default)(u);else{if(!_[e])throw new Error("Unknown type: "+e);_[e](u,u.options,a),!u.suspended&&s&&(s instanceof r.ColMetadataToken&&(u.colMetadata=s.columns),yield s)}}}}constructor(e,t,n){this.debug=void 0,this.colMetadata=void 0,this.options=void 0,this.suspended=void 0,this.next=void 0,this.streamBuffer=void 0,this.debug=t,this.colMetadata=[],this.options=n,this.streamBuffer=e,this.suspended=!1,this.next=void 0}get buffer(){return this.streamBuffer.buffer}get position(){return this.streamBuffer.position}set position(e){this.streamBuffer.position=e}suspend(e){this.suspended=!0,this.next=e}awaitData(e,t){this.position+e<=this.buffer.length?t():this.suspend((()=>{this.awaitData(e,t)}))}readInt8(e){this.awaitData(1,(()=>{const t=this.buffer.readInt8(this.position);this.position+=1,e(t)}))}readUInt8(e){this.awaitData(1,(()=>{const t=this.buffer.readUInt8(this.position);this.position+=1,e(t)}))}readInt16LE(e){this.awaitData(2,(()=>{const t=this.buffer.readInt16LE(this.position);this.position+=2,e(t)}))}readInt16BE(e){this.awaitData(2,(()=>{const t=this.buffer.readInt16BE(this.position);this.position+=2,e(t)}))}readUInt16LE(e){this.awaitData(2,(()=>{const t=this.buffer.readUInt16LE(this.position);this.position+=2,e(t)}))}readUInt16BE(e){this.awaitData(2,(()=>{const t=this.buffer.readUInt16BE(this.position);this.position+=2,e(t)}))}readInt32LE(e){this.awaitData(4,(()=>{const t=this.buffer.readInt32LE(this.position);this.position+=4,e(t)}))}readInt32BE(e){this.awaitData(4,(()=>{const t=this.buffer.readInt32BE(this.position);this.position+=4,e(t)}))}readUInt32LE(e){this.awaitData(4,(()=>{const t=this.buffer.readUInt32LE(this.position);this.position+=4,e(t)}))}readUInt32BE(e){this.awaitData(4,(()=>{const t=this.buffer.readUInt32BE(this.position);this.position+=4,e(t)}))}readBigInt64LE(e){this.awaitData(8,(()=>{const t=this.buffer.readBigInt64LE(this.position);this.position+=8,e(t)}))}readInt64LE(e){this.awaitData(8,(()=>{const t=Math.pow(2,32)*this.buffer.readInt32LE(this.position+4)+(128==(128&this.buffer[this.position+4])?1:-1)*this.buffer.readUInt32LE(this.position);this.position+=8,e(t)}))}readInt64BE(e){this.awaitData(8,(()=>{const t=Math.pow(2,32)*this.buffer.readInt32BE(this.position)+(128==(128&this.buffer[this.position])?1:-1)*this.buffer.readUInt32BE(this.position+4);this.position+=8,e(t)}))}readBigUInt64LE(e){this.awaitData(8,(()=>{const t=this.buffer.readBigUInt64LE(this.position);this.position+=8,e(t)}))}readUInt64LE(e){this.awaitData(8,(()=>{const t=Math.pow(2,32)*this.buffer.readUInt32LE(this.position+4)+this.buffer.readUInt32LE(this.position);this.position+=8,e(t)}))}readUInt64BE(e){this.awaitData(8,(()=>{const t=Math.pow(2,32)*this.buffer.readUInt32BE(this.position)+this.buffer.readUInt32BE(this.position+4);this.position+=8,e(t)}))}readFloatLE(e){this.awaitData(4,(()=>{const t=this.buffer.readFloatLE(this.position);this.position+=4,e(t)}))}readFloatBE(e){this.awaitData(4,(()=>{const t=this.buffer.readFloatBE(this.position);this.position+=4,e(t)}))}readDoubleLE(e){this.awaitData(8,(()=>{const t=this.buffer.readDoubleLE(this.position);this.position+=8,e(t)}))}readDoubleBE(e){this.awaitData(8,(()=>{const t=this.buffer.readDoubleBE(this.position);this.position+=8,e(t)}))}readUInt24LE(e){this.awaitData(3,(()=>{const t=this.buffer.readUInt16LE(this.position),n=this.buffer.readUInt8(this.position+2);this.position+=3,e(t|n<<16)}))}readUInt40LE(e){this.awaitData(5,(()=>{const t=this.buffer.readUInt32LE(this.position),n=this.buffer.readUInt8(this.position+4);this.position+=5,e(4294967296*n+t)}))}readUNumeric64LE(e){this.awaitData(8,(()=>{const t=this.buffer.readUInt32LE(this.position),n=this.buffer.readUInt32LE(this.position+4);this.position+=8,e(4294967296*n+t)}))}readUNumeric96LE(e){this.awaitData(12,(()=>{const t=this.buffer.readUInt32LE(this.position),n=this.buffer.readUInt32LE(this.position+4),r=this.buffer.readUInt32LE(this.position+8);this.position+=12,e(t+4294967296*n+0x10000000000000000*r)}))}readUNumeric128LE(e){this.awaitData(16,(()=>{const t=this.buffer.readUInt32LE(this.position),n=this.buffer.readUInt32LE(this.position+4),r=this.buffer.readUInt32LE(this.position+8),i=this.buffer.readUInt32LE(this.position+12);this.position+=16,e(t+4294967296*n+0x10000000000000000*r+7922816251426434e13*i)}))}readBuffer(e,t){this.awaitData(e,(()=>{const n=this.buffer.slice(this.position,this.position+e);this.position+=e,t(n)}))}readBVarChar(e){this.readUInt8((t=>{this.readBuffer(2*t,(t=>{e(t.toString("ucs2"))}))}))}readUsVarChar(e){this.readUInt16LE((t=>{this.readBuffer(2*t,(t=>{e(t.toString("ucs2"))}))}))}readBVarByte(e){this.readUInt8((t=>{this.readBuffer(t,e)}))}readUsVarByte(e){this.readUInt16LE((t=>{this.readBuffer(t,e)}))}}var w=E;t.default=w,e.exports=E},2418:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var r,i=n(2361),o=(r=n(3655))&&r.__esModule?r:{default:r},s=n(2781);class a extends i.EventEmitter{constructor(e,t,n,r){super(),this.debug=void 0,this.options=void 0,this.parser=void 0,this.debug=t,this.options=r,this.parser=s.Readable.from(o.default.parseTokens(e,this.debug,this.options)),this.parser.on("data",(e=>{n[e.handlerName](e)})),this.parser.on("drain",(()=>{this.emit("drain")})),this.parser.on("end",(()=>{this.emit("end")}))}pause(){return this.parser.pause()}resume(){return this.parser.resume()}}t.Parser=a},5961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.TYPE=t.SSPIToken=t.RowToken=t.RoutingEnvChangeToken=t.RollbackTransactionEnvChangeToken=t.ReturnValueToken=t.ReturnStatusToken=t.ResetConnectionEnvChangeToken=t.PacketSizeEnvChangeToken=t.OrderToken=t.NBCRowToken=t.LoginAckToken=t.LanguageEnvChangeToken=t.InfoMessageToken=t.FedAuthInfoToken=t.FeatureExtAckToken=t.ErrorMessageToken=t.DoneToken=t.DoneProcToken=t.DoneInProcToken=t.DatabaseMirroringPartnerEnvChangeToken=t.DatabaseEnvChangeToken=t.CommitTransactionEnvChangeToken=t.CollationChangeToken=t.ColMetadataToken=t.CharsetEnvChangeToken=t.BeginTransactionEnvChangeToken=void 0,t.TYPE={ALTMETADATA:136,ALTROW:211,COLMETADATA:129,COLINFO:165,DONE:253,DONEPROC:254,DONEINPROC:255,ENVCHANGE:227,ERROR:170,FEATUREEXTACK:174,FEDAUTHINFO:238,INFO:171,LOGINACK:173,NBCROW:210,OFFSET:120,ORDER:169,RETURNSTATUS:121,RETURNVALUE:172,ROW:209,SSPI:237,TABNAME:164};class n{constructor(e,t){this.name=void 0,this.handlerName=void 0,this.name=e,this.handlerName=t}}t.Token=n,t.ColMetadataToken=class extends n{constructor(e){super("COLMETADATA","onColMetadata"),this.columns=void 0,this.columns=e}},t.DoneToken=class extends n{constructor({more:e,sqlError:t,attention:n,serverError:r,rowCount:i,curCmd:o}){super("DONE","onDone"),this.more=void 0,this.sqlError=void 0,this.attention=void 0,this.serverError=void 0,this.rowCount=void 0,this.curCmd=void 0,this.more=e,this.sqlError=t,this.attention=n,this.serverError=r,this.rowCount=i,this.curCmd=o}},t.DoneInProcToken=class extends n{constructor({more:e,sqlError:t,attention:n,serverError:r,rowCount:i,curCmd:o}){super("DONEINPROC","onDoneInProc"),this.more=void 0,this.sqlError=void 0,this.attention=void 0,this.serverError=void 0,this.rowCount=void 0,this.curCmd=void 0,this.more=e,this.sqlError=t,this.attention=n,this.serverError=r,this.rowCount=i,this.curCmd=o}},t.DoneProcToken=class extends n{constructor({more:e,sqlError:t,attention:n,serverError:r,rowCount:i,curCmd:o}){super("DONEPROC","onDoneProc"),this.more=void 0,this.sqlError=void 0,this.attention=void 0,this.serverError=void 0,this.rowCount=void 0,this.curCmd=void 0,this.more=e,this.sqlError=t,this.attention=n,this.serverError=r,this.rowCount=i,this.curCmd=o}},t.DatabaseEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onDatabaseChange"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="DATABASE",this.newValue=e,this.oldValue=t}},t.LanguageEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onLanguageChange"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="LANGUAGE",this.newValue=e,this.oldValue=t}},t.CharsetEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onCharsetChange"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="CHARSET",this.newValue=e,this.oldValue=t}},t.PacketSizeEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onPacketSizeChange"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="PACKET_SIZE",this.newValue=e,this.oldValue=t}},t.BeginTransactionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onBeginTransaction"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="BEGIN_TXN",this.newValue=e,this.oldValue=t}},t.CommitTransactionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onCommitTransaction"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="COMMIT_TXN",this.newValue=e,this.oldValue=t}},t.RollbackTransactionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onRollbackTransaction"),this.type=void 0,this.oldValue=void 0,this.newValue=void 0,this.type="ROLLBACK_TXN",this.newValue=e,this.oldValue=t}},t.DatabaseMirroringPartnerEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onDatabaseMirroringPartner"),this.type=void 0,this.oldValue=void 0,this.newValue=void 0,this.type="DATABASE_MIRRORING_PARTNER",this.newValue=e,this.oldValue=t}},t.ResetConnectionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onResetConnection"),this.type=void 0,this.oldValue=void 0,this.newValue=void 0,this.type="RESET_CONNECTION",this.newValue=e,this.oldValue=t}},t.CollationChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onSqlCollationChange"),this.type=void 0,this.oldValue=void 0,this.newValue=void 0,this.type="SQL_COLLATION",this.newValue=e,this.oldValue=t}},t.RoutingEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onRoutingChange"),this.type=void 0,this.newValue=void 0,this.oldValue=void 0,this.type="ROUTING_CHANGE",this.newValue=e,this.oldValue=t}},t.FeatureExtAckToken=class extends n{constructor(e,t){super("FEATUREEXTACK","onFeatureExtAck"),this.fedAuth=void 0,this.utf8Support=void 0,this.fedAuth=e,this.utf8Support=t}},t.FedAuthInfoToken=class extends n{constructor(e,t){super("FEDAUTHINFO","onFedAuthInfo"),this.spn=void 0,this.stsurl=void 0,this.spn=e,this.stsurl=t}},t.InfoMessageToken=class extends n{constructor({number:e,state:t,class:n,message:r,serverName:i,procName:o,lineNumber:s}){super("INFO","onInfoMessage"),this.number=void 0,this.state=void 0,this.class=void 0,this.message=void 0,this.serverName=void 0,this.procName=void 0,this.lineNumber=void 0,this.number=e,this.state=t,this.class=n,this.message=r,this.serverName=i,this.procName=o,this.lineNumber=s}},t.ErrorMessageToken=class extends n{constructor({number:e,state:t,class:n,message:r,serverName:i,procName:o,lineNumber:s}){super("ERROR","onErrorMessage"),this.number=void 0,this.state=void 0,this.class=void 0,this.message=void 0,this.serverName=void 0,this.procName=void 0,this.lineNumber=void 0,this.number=e,this.state=t,this.class=n,this.message=r,this.serverName=i,this.procName=o,this.lineNumber=s}},t.LoginAckToken=class extends n{constructor({interface:e,tdsVersion:t,progName:n,progVersion:r}){super("LOGINACK","onLoginAck"),this.interface=void 0,this.tdsVersion=void 0,this.progName=void 0,this.progVersion=void 0,this.interface=e,this.tdsVersion=t,this.progName=n,this.progVersion=r}},t.NBCRowToken=class extends n{constructor(e){super("NBCROW","onRow"),this.columns=void 0,this.columns=e}},t.OrderToken=class extends n{constructor(e){super("ORDER","onOrder"),this.orderColumns=void 0,this.orderColumns=e}},t.ReturnStatusToken=class extends n{constructor(e){super("RETURNSTATUS","onReturnStatus"),this.value=void 0,this.value=e}},t.ReturnValueToken=class extends n{constructor({paramOrdinal:e,paramName:t,metadata:n,value:r}){super("RETURNVALUE","onReturnValue"),this.paramOrdinal=void 0,this.paramName=void 0,this.metadata=void 0,this.value=void 0,this.paramOrdinal=e,this.paramName=t,this.metadata=n,this.value=r}},t.RowToken=class extends n{constructor(e){super("ROW","onRow"),this.columns=void 0,this.columns=e}},t.SSPIToken=class extends n{constructor(e,t){super("SSPICHALLENGE","onSSPI"),this.ntlmpacket=void 0,this.ntlmpacketBuffer=void 0,this.ntlmpacket=e,this.ntlmpacketBuffer=t}}},9546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=1/4294967296,r=Buffer.from([254,255,255,255,255,255,255,255]),i=Buffer.alloc(0);class o{constructor(e,t,n){this.initialSize=void 0,this.encoding=void 0,this.doubleSizeGrowth=void 0,this.buffer=void 0,this.compositeBuffer=void 0,this.position=void 0,this.initialSize=e,this.encoding=t||"ucs2",this.doubleSizeGrowth=n||!1,this.buffer=Buffer.alloc(this.initialSize,0),this.compositeBuffer=i,this.position=0}get data(){return this.newBuffer(0),this.compositeBuffer}copyFrom(e){const t=e.length;this.makeRoomFor(t),e.copy(this.buffer,this.position),this.position+=t}makeRoomFor(e){if(this.buffer.length-this.position<e)if(this.doubleSizeGrowth){let t=Math.max(128,2*this.buffer.length);for(;t<e;)t*=2;this.newBuffer(t)}else this.newBuffer(e)}newBuffer(e){const t=this.buffer.slice(0,this.position);this.compositeBuffer=Buffer.concat([this.compositeBuffer,t]),this.buffer=0===e?i:Buffer.alloc(e,0),this.position=0}writeUInt8(e){this.makeRoomFor(1),this.buffer.writeUInt8(e,this.position),this.position+=1}writeUInt16LE(e){this.makeRoomFor(2),this.buffer.writeUInt16LE(e,this.position),this.position+=2}writeUShort(e){this.writeUInt16LE(e)}writeUInt16BE(e){this.makeRoomFor(2),this.buffer.writeUInt16BE(e,this.position),this.position+=2}writeUInt24LE(e){this.makeRoomFor(3),this.buffer[this.position+2]=e>>>16&255,this.buffer[this.position+1]=e>>>8&255,this.buffer[this.position]=255&e,this.position+=3}writeUInt32LE(e){this.makeRoomFor(4),this.buffer.writeUInt32LE(e,this.position),this.position+=4}writeBigInt64LE(e){this.makeRoomFor(8),this.buffer.writeBigInt64LE(e,this.position),this.position+=8}writeInt64LE(e){this.writeBigInt64LE(BigInt(e))}writeUInt64LE(e){this.writeBigUInt64LE(BigInt(e))}writeBigUInt64LE(e){this.makeRoomFor(8),this.buffer.writeBigUInt64LE(e,this.position),this.position+=8}writeUInt32BE(e){this.makeRoomFor(4),this.buffer.writeUInt32BE(e,this.position),this.position+=4}writeUInt40LE(e){this.writeInt32LE(-1&e),this.writeUInt8(Math.floor(e*n))}writeInt8(e){this.makeRoomFor(1),this.buffer.writeInt8(e,this.position),this.position+=1}writeInt16LE(e){this.makeRoomFor(2),this.buffer.writeInt16LE(e,this.position),this.position+=2}writeInt16BE(e){this.makeRoomFor(2),this.buffer.writeInt16BE(e,this.position),this.position+=2}writeInt32LE(e){this.makeRoomFor(4),this.buffer.writeInt32LE(e,this.position),this.position+=4}writeInt32BE(e){this.makeRoomFor(4),this.buffer.writeInt32BE(e,this.position),this.position+=4}writeFloatLE(e){this.makeRoomFor(4),this.buffer.writeFloatLE(e,this.position),this.position+=4}writeDoubleLE(e){this.makeRoomFor(8),this.buffer.writeDoubleLE(e,this.position),this.position+=8}writeString(e,t){null==t&&(t=this.encoding);const n=Buffer.byteLength(e,t);this.makeRoomFor(n),this.buffer.write(e,this.position,t),this.position+=n}writeBVarchar(e,t){this.writeUInt8(e.length),this.writeString(e,t)}writeUsVarchar(e,t){this.writeUInt16LE(e.length),this.writeString(e,t)}writeUsVarbyte(e,t){let n;null==t&&(t=this.encoding),e instanceof Buffer?n=e.length:(e=e.toString(),n=Buffer.byteLength(e,t)),this.writeUInt16LE(n),e instanceof Buffer?this.writeBuffer(e):(this.makeRoomFor(n),this.buffer.write(e,this.position,t),this.position+=n)}writePLPBody(e,t){let n;null==t&&(t=this.encoding),e instanceof Buffer?n=e.length:(e=e.toString(),n=Buffer.byteLength(e,t)),this.writeBuffer(r),n>0&&(this.writeUInt32LE(n),e instanceof Buffer?this.writeBuffer(e):(this.makeRoomFor(n),this.buffer.write(e,this.position,t),this.position+=n)),this.writeUInt32LE(0)}writeBuffer(e){const t=e.length;this.makeRoomFor(t),e.copy(this.buffer,this.position),this.position+=t}writeMoney(e){this.writeInt32LE(Math.floor(e*n)),this.writeInt32LE(-1&e)}}var s=o;t.default=s,e.exports=o},3326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=t.OPERATION_TYPE=t.ISOLATION_LEVEL=void 0,t.assertValidIsolationLevel=function(e,t){if("number"!=typeof e)throw new TypeError(`The "${t}" ${t.includes(".")?"property":"argument"} must be of type number. Received type ${typeof e} (${e})`);if(!Number.isInteger(e))throw new RangeError(`The value of "${t}" is out of range. It must be an integer. Received: ${e}`);if(!(e>=0&&e<=5))throw new RangeError(`The value of "${t}" is out of range. It must be >= 0 && <= 5. Received: ${e}`)},t.isolationLevelByValue=void 0;var r,i=(r=n(9546))&&r.__esModule?r:{default:r},o=n(2602);const s={TM_GET_DTC_ADDRESS:0,TM_PROPAGATE_XACT:1,TM_BEGIN_XACT:5,TM_PROMOTE_XACT:6,TM_COMMIT_XACT:7,TM_ROLLBACK_XACT:8,TM_SAVE_XACT:9};t.OPERATION_TYPE=s;const a={NO_CHANGE:0,READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5};t.ISOLATION_LEVEL=a;const c={};t.isolationLevelByValue=c;for(const e in a)c[a[e]]=e;t.Transaction=class{constructor(e,t=a.NO_CHANGE){this.name=void 0,this.isolationLevel=void 0,this.outstandingRequestCount=void 0,this.name=e,this.isolationLevel=t,this.outstandingRequestCount=1}beginPayload(e){const t=new i.default(100,"ucs2");return(0,o.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(s.TM_BEGIN_XACT),t.writeUInt8(this.isolationLevel),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield t.data},toString:()=>"Begin Transaction: name="+this.name+", isolationLevel="+c[this.isolationLevel]}}commitPayload(e){const t=new i.default(100,"ascii");return(0,o.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(s.TM_COMMIT_XACT),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),t.writeUInt8(0),{*[Symbol.iterator](){yield t.data},toString:()=>"Commit Transaction: name="+this.name}}rollbackPayload(e){const t=new i.default(100,"ascii");return(0,o.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(s.TM_ROLLBACK_XACT),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),t.writeUInt8(0),{*[Symbol.iterator](){yield t.data},toString:()=>"Rollback Transaction: name="+this.name}}savePayload(e){const t=new i.default(100,"ascii");return(0,o.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(s.TM_SAVE_XACT),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield t.data},toString:()=>"Save Transaction: name="+this.name}}isolationLevelToTSQL(){switch(this.isolationLevel){case a.READ_UNCOMMITTED:return"READ UNCOMMITTED";case a.READ_COMMITTED:return"READ COMMITTED";case a.REPEATABLE_READ:return"REPEATABLE READ";case a.SERIALIZABLE:return"SERIALIZABLE";case a.SNAPSHOT:return"SNAPSHOT"}return""}}},1020:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransientErrorLookup=void 0,t.TransientErrorLookup=class{isTransientError(e){return-1!==[4060,10928,10929,40197,40501,40613].indexOf(e)}}},7001:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=async function(e,t,n){const r=new i.AbortController,s=()=>{r.abort()},a=setTimeout(s,e);null==n||n.addEventListener("abort",s,{once:!0});try{return await t(r.signal)}catch(e){if(e instanceof Error&&"AbortError"===e.name&&(!n||!n.aborted))throw new o.default;throw e}finally{null==n||n.removeEventListener("abort",s),clearTimeout(a)}};var r,i=n(3357),o=(r=n(5622))&&r.__esModule?r:{default:r}},9489:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(6989),o=n(7983),s=(r=n(4914))&&r.__esModule?r:{default:r},a=n(8975),c=n(8351);const u=65535,l=65535,h=Buffer.from([255,255,255,255,255,255,255,255]),d=Buffer.from([254,255,255,255,255,255,255,255]),f="utf8";function p(e,t){e.readUInt8(t)}function m(e,t){e.readInt16LE(t)}function g(e,t){e.readInt32LE(t)}function y(e,t){e.readBigInt64LE((e=>{t(e.toString())}))}function _(e,t){e.readFloatLE(t)}function v(e,t){e.readDoubleLE(t)}function E(e,t){e.readInt32LE((e=>{t(e/1e4)}))}function w(e,t){e.readInt32LE((n=>{e.readUInt32LE((e=>{t((e+4294967296*n)/1e4)}))}))}function b(e,t){e.readUInt8((e=>{t(!!e)}))}function T(e,t,n,r){const c=t.type;switch(c.name){case"Null":return r(null);case"TinyInt":return p(e,r);case"SmallInt":return m(e,r);case"Int":return g(e,r);case"BigInt":return y(e,r);case"IntN":return e.readUInt8((t=>{switch(t){case 0:return r(null);case 1:return p(e,r);case 2:return m(e,r);case 4:return g(e,r);case 8:return y(e,r);default:throw new Error("Unsupported dataLength "+t+" for IntN")}}));case"Real":return _(e,r);case"Float":return v(e,r);case"FloatN":return e.readUInt8((t=>{switch(t){case 0:return r(null);case 4:return _(e,r);case 8:return v(e,r);default:throw new Error("Unsupported dataLength "+t+" for FloatN")}}));case"SmallMoney":return E(e,r);case"Money":return w(e,r);case"MoneyN":return e.readUInt8((t=>{switch(t){case 0:return r(null);case 4:return E(e,r);case 8:return w(e,r);default:throw new Error("Unsupported dataLength "+t+" for MoneyN")}}));case"Bit":return b(e,r);case"BitN":return e.readUInt8((t=>{switch(t){case 0:return r(null);case 1:return b(e,r);default:throw new Error("Unsupported dataLength "+t+" for BitN")}}));case"VarChar":case"Char":const h=t.collation.codepage;return t.dataLength===l?function(e,t,n){null==t&&(t=f),P(e,(e=>{n(e?s.default.decode(e,t):null)}))}(e,h,r):e.readUInt16LE((t=>{if(t===u)return r(null);C(e,t,h,r)}));case"NVarChar":case"NChar":return t.dataLength===l?N(e,r):e.readUInt16LE((t=>{if(t===u)return r(null);I(e,t,r)}));case"VarBinary":case"Binary":return t.dataLength===l?R(e,r):e.readUInt16LE((t=>{if(t===u)return r(null);O(e,t,r)}));case"Text":return e.readUInt8((n=>{if(0===n)return r(null);e.readBuffer(n,(n=>{e.readBuffer(8,(n=>{e.readUInt32LE((n=>{C(e,n,t.collation.codepage,r)}))}))}))}));case"NText":return e.readUInt8((t=>{if(0===t)return r(null);e.readBuffer(t,(t=>{e.readBuffer(8,(t=>{e.readUInt32LE((t=>{I(e,t,r)}))}))}))}));case"Image":return e.readUInt8((t=>{if(0===t)return r(null);e.readBuffer(t,(t=>{e.readBuffer(8,(t=>{e.readUInt32LE((t=>{O(e,t,r)}))}))}))}));case"Xml":return N(e,r);case"SmallDateTime":return D(e,n.useUTC,r);case"DateTime":return k(e,n.useUTC,r);case"DateTimeN":return e.readUInt8((t=>{switch(t){case 0:return r(null);case 4:return D(e,n.useUTC,r);case 8:return k(e,n.useUTC,r);default:throw new Error("Unsupported dataLength "+t+" for DateTimeN")}}));case"Time":return e.readUInt8((i=>0===i?r(null):M(e,i,t.scale,n.useUTC,r)));case"Date":return e.readUInt8((t=>0===t?r(null):L(e,n.useUTC,r)));case"DateTime2":return e.readUInt8((i=>0===i?r(null):x(e,i,t.scale,n.useUTC,r)));case"DateTimeOffset":return e.readUInt8((n=>0===n?r(null):U(e,n,t.scale,r)));case"NumericN":case"DecimalN":return e.readUInt8((n=>0===n?r(null):A(e,n,t.precision,t.scale,r)));case"UniqueIdentifier":return e.readUInt8((t=>{switch(t){case 0:return r(null);case 16:return S(e,n,r);default:throw new Error((0,a.sprintf)("Unsupported guid size %d",t-1))}}));case"UDT":return R(e,r);case"Variant":return e.readUInt32LE((t=>{if(0===t)return r(null);!function(e,t,n,r){e.readUInt8((s=>{const a=o.TYPE[s];return e.readUInt8((o=>{switch(n=n-o-2,a.name){case"UniqueIdentifier":return S(e,t,r);case"Bit":return b(e,r);case"TinyInt":return p(e,r);case"SmallInt":return m(e,r);case"Int":return g(e,r);case"BigInt":return y(e,r);case"SmallDateTime":return D(e,t.useUTC,r);case"DateTime":return k(e,t.useUTC,r);case"Real":return _(e,r);case"Float":return v(e,r);case"SmallMoney":return E(e,r);case"Money":return w(e,r);case"Date":return L(e,t.useUTC,r);case"Time":return e.readUInt8((i=>M(e,n,i,t.useUTC,r)));case"DateTime2":return e.readUInt8((i=>x(e,n,i,t.useUTC,r)));case"DateTimeOffset":return e.readUInt8((t=>U(e,n,t,r)));case"VarBinary":case"Binary":return e.readUInt16LE((t=>{O(e,n,r)}));case"NumericN":case"DecimalN":return e.readUInt8((t=>{e.readUInt8((t=>{A(e,n,0,t,r)}))}));case"VarChar":case"Char":return e.readUInt16LE((t=>{(0,i.readCollation)(e,(t=>{C(e,n,t.codepage,r)}))}));case"NVarChar":case"NChar":return e.readUInt16LE((t=>{(0,i.readCollation)(e,(t=>{I(e,n,r)}))}));default:throw new Error("Invalid type!")}}))}))}(e,n,t,r)}));default:throw new Error((0,a.sprintf)("Unrecognised type %s",c.name))}}function S(e,t,n){e.readBuffer(16,(e=>{n(t.lowerCaseGuids?(0,c.bufferToLowerCaseGuid)(e):(0,c.bufferToUpperCaseGuid)(e))}))}function A(e,t,n,r,i){e.readUInt8((n=>{let o;if(n=1===n?1:-1,5===t)o=e.readUInt32LE;else if(9===t)o=e.readUNumeric64LE;else if(13===t)o=e.readUNumeric96LE;else{if(17!==t)throw new Error((0,a.sprintf)("Unsupported numeric dataLength %d",t));o=e.readUNumeric128LE}o.call(e,(e=>{i(e*n/Math.pow(10,r))}))}))}function O(e,t,n){return e.readBuffer(t,n)}function C(e,t,n,r){return null==n&&(n=f),e.readBuffer(t,(e=>{r(s.default.decode(e,n))}))}function I(e,t,n){e.readBuffer(t,(e=>{n(e.toString("ucs2"))}))}function R(e,t){return P(e,t)}function N(e,t){P(e,(e=>{t(e?e.toString("ucs2"):null)}))}function P(e,t){e.readBuffer(8,(n=>{if(n.equals(h))return t(null);if(n.equals(d))return function(e,t){const n=[];let r=0;!function t(i){e.readUInt32LE((o=>{if(!o)return i();e.readBuffer(o,(e=>{n.push(e),r+=o,t(i)}))}))}((()=>{t(Buffer.concat(n,r))}))}(e,t);{const r=n.readUInt32LE(0),i=n.readUInt32LE(4);return i>=2<<21&&console.warn("Read UInt64LE > 53 bits : high="+i+", low="+r),function(e,t,n){const r=Buffer.alloc(t,0);let i=0;!function t(n){e.readUInt32LE((o=>{if(!o)return n();e.readBuffer(o,(e=>{e.copy(r,i),i+=o,t(n)}))}))}((()=>{if(i!==t)throw new Error("Partially Length-prefixed Bytes unmatched lengths : expected "+t+", but got "+i+" bytes");n(r)}))}(e,r+4294967296*i,t)}}))}function D(e,t,n){e.readUInt16LE((r=>{e.readUInt16LE((e=>{let i;i=t?new Date(Date.UTC(1900,0,1+r,0,e)):new Date(1900,0,1+r,0,e),n(i)}))}))}function k(e,t,n){e.readInt32LE((r=>{e.readUInt32LE((e=>{const i=Math.round(3.3333333333333335*e);let o;o=t?new Date(Date.UTC(1900,0,1+r,0,0,0,i)):new Date(1900,0,1+r,0,0,0,i),n(o)}))}))}function M(e,t,n,r,i){let o;switch(t){case 3:o=e.readUInt24LE;break;case 4:o=e.readUInt32LE;break;case 5:o=e.readUInt40LE}o.call(e,(e=>{if(n<7)for(let t=n;t<7;t++)e*=10;let t;t=r?new Date(Date.UTC(1970,0,1,0,0,0,e/1e4)):new Date(1970,0,1,0,0,0,e/1e4),Object.defineProperty(t,"nanosecondsDelta",{enumerable:!1,value:e%1e4/Math.pow(10,7)}),i(t)}))}function L(e,t,n){e.readUInt24LE((e=>{n(t?new Date(Date.UTC(2e3,0,e-730118)):new Date(2e3,0,e-730118))}))}function x(e,t,n,r,i){M(e,t-3,n,r,(t=>{e.readUInt24LE((e=>{let n;n=r?new Date(Date.UTC(2e3,0,e-730118,0,0,0,+t)):new Date(2e3,0,e-730118,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),Object.defineProperty(n,"nanosecondsDelta",{enumerable:!1,value:t.nanosecondsDelta}),i(n)}))}))}function U(e,t,n,r){M(e,t-5,n,!0,(t=>{e.readUInt24LE((n=>{e.readInt16LE((()=>{const e=new Date(Date.UTC(2e3,0,n-730118,0,0,0,+t));Object.defineProperty(e,"nanosecondsDelta",{enumerable:!1,value:t.nanosecondsDelta}),r(e)}))}))}))}var F=T;t.default=F,e.exports=T},6679:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SqlPackageAction=t.ActionType=void 0;const c=o(n(1017)),u=o(n(2225)),l=o(n(27)),h=a(n(5731)),d=a(n(2573)),f=a(n(4738)),p=a(n(9769));var m,g;!function(e){e[e.DacpacAction=0]="DacpacAction",e[e.SqlAction=1]="SqlAction",e[e.BuildAndPublish=2]="BuildAndPublish"}(m=t.ActionType||(t.ActionType={})),function(e){e[e.Publish=0]="Publish",e[e.Extract=1]="Extract",e[e.Export=2]="Export",e[e.Import=3]="Import",e[e.DriftReport=4]="DriftReport",e[e.DeployReport=5]="DeployReport",e[e.Script=6]="Script"}(g=t.SqlPackageAction||(t.SqlPackageAction={})),t.default=class{constructor(e){this._inputs=e}execute(){return s(this,void 0,void 0,(function*(){if(this._inputs.actionType===m.DacpacAction)yield this._executeDacpacAction(this._inputs);else if(this._inputs.actionType===m.SqlAction)yield this._executeSqlFile(this._inputs);else{if(this._inputs.actionType!==m.BuildAndPublish)throw new Error(`Invalid AzureSqlAction '${this._inputs.actionType}'.`);{const e=this._inputs,t=yield this._executeBuildProject(e),n={actionType:m.DacpacAction,connectionConfig:e.connectionConfig,filePath:t,additionalArguments:e.additionalArguments,sqlpackageAction:e.sqlpackageAction};yield this._executeDacpacAction(n)}}}))}_executeDacpacAction(e){return s(this,void 0,void 0,(function*(){u.debug("Begin executing sqlpackage");let t=yield h.default.getSqlPackagePath(),n=this._getSqlPackageArguments(e);yield l.exec(`"${t}" ${n}`),console.log(`Successfully executed action ${g[e.sqlpackageAction]} on target database.`)}))}_executeSqlFile(e){return s(this,void 0,void 0,(function*(){u.debug("Begin executing sql script");let t=p.default.buildSqlCmdCallWithConnectionInfo(e.connectionConfig.Config);t+=` -i "${e.filePath}"`,e.additionalArguments&&(t+=` ${e.additionalArguments}`),yield l.exec(t),console.log("Successfully executed SQL file on target database.")}))}_executeBuildProject(e){var t,n;return s(this,void 0,void 0,(function*(){u.debug("Begin building project");const r=c.basename(e.filePath,f.default.sqlprojExtension),i=null!==(t=e.buildArguments)&&void 0!==t?t:"",o=yield d.default.parseCommandArguments(i);let s="";const a=yield d.default.findArgument(o,"--output","-o");if(a)s=a;else{const t=null!==(n=yield d.default.findArgument(o,"--configuration","-c"))&&void 0!==n?n:"Debug";s=c.join(c.dirname(e.filePath),"bin",t)}yield l.exec(`dotnet build "${e.filePath}" -p:NetCoreBuild=true ${i}`);const h=c.join(s,r+f.default.dacpacExtension);return console.log(`Successfully built database project to ${h}`),h}))}_getSqlPackageArguments(e){let t="";switch(e.sqlpackageAction){case g.Publish:case g.Script:case g.DeployReport:t+=`/Action:${g[e.sqlpackageAction]} /TargetConnectionString:"${e.connectionConfig.ConnectionString}" /SourceFile:"${e.filePath}"`;break;case g.DriftReport:t+=`/Action:${g[e.sqlpackageAction]} /TargetConnectionString:"${e.connectionConfig.ConnectionString}"`;break;default:throw new Error(`Not supported SqlPackage action: '${g[e.sqlpackageAction]}'`)}return e.additionalArguments&&(t+=" "+e.additionalArguments),t}}},5731:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=o(n(2225)),u=o(n(27)),l=o(n(1017)),h=o(n(7147)),d=o(n(7824)),f=a(n(1283)),p=n(6679),m="win32"===process.platform,g="linux"===process.platform;class y{static getSqlPackagePath(){return s(this,void 0,void 0,(function*(){return this._sqlPackagePath?(c.debug(`Return the cached path of SqlPackage executable: ${this._sqlPackagePath}`),this._sqlPackagePath):(this._sqlPackagePath=m?yield this._getSqlPackageExecutablePath():g?this._getSqlPackageBinaryPathLinux():this._getSqlPackageBinaryPathMac(),this._sqlPackagePath)}))}static getRegistrySubKeys(e){return new Promise((t=>{c.debug(`Getting sub-keys at registry path: HKLM:${e}`),new f.default({hive:f.default.HKLM,key:e}).keys(((e,n)=>e?"":t(n)))}))}static getRegistryValue(e,t){return new Promise((n=>{c.debug(`Getting registry value ${t} at path: HKLM:${e.key}`),e.get(t,((e,t)=>{n(e?"":t.value)}))}))}static registryKeyExists(e){return c.debug(`Checking if registry key 'HKLM:${e}' exists.`),new Promise((t=>{new f.default({hive:f.default.HKLM,key:e}).keyExists(((e,n)=>{t(!e&&n)}))}))}static resolveFilePath(e){let t=e;if(d.hasMagic(e)){let n=d.sync(e);if(0===n.length)throw new Error(`No files found matching pattern ${e}`);if(n.length>1)throw new Error(`Muliple files found matching pattern ${e}`);t=n[0]}if(!h.existsSync(t))throw new Error(`Unable to find file at location: ${t}`);return t}static getSqlpackageActionTypeFromString(e){if(!e)return p.SqlPackageAction.Publish;switch(e.trim().toLowerCase()){case"publish":return p.SqlPackageAction.Publish;case"driftreport":return p.SqlPackageAction.DriftReport;case"deployreport":return p.SqlPackageAction.DeployReport;case"script":return p.SqlPackageAction.Script;default:throw new Error(`Action ${e} is invalid. Supported action types are: Publish, Script, DriftReport, or DeployReport.`)}}static _getSqlPackageExecutablePath(){return s(this,void 0,void 0,(function*(){c.debug("Getting location of SQLPackage.exe");let e=yield this._getSqlPackageInstalledWithSSMS();c.debug(e.toString());let t=yield this._getSqlPackageInstalledWithDacMsi();c.debug(t.toString());let n=yield this._getSqlPackageInstalledWithSSDT();c.debug(n.toString());let r=Math.max(e[1],t[1],n[1]),i="";if(r===e[1]?i=e[0]:r===t[1]?i=t[0]:r===n[1]&&(i=n[0]),!i)throw new Error("Unable to find the location of SqlPackage.exe");return c.debug(`SqlPackage.exe found at location: ${i}`),i}))}static _getSqlPackageInstalledWithSSDT(){return s(this,void 0,void 0,(function*(){let e=yield this._getLatestVisualStudioInstallationPath();if(e){let t=l.join(e,"Common7","IDE","Extensions","Microsoft","SQLDB","DAC"),n=this._getSqlPackageInVSDacDirectory(t);if(n[0])return n}let t=l.join("\\","SOFTWARE","Microsoft","VisualStudio"),n=l.join("\\","SOFTWARE","Wow6432Node","Microsoft","VisualStudio");if(!(yield y.registryKeyExists(t))&&(t=n,!(yield y.registryKeyExists(t))))return["",0];let r=yield y.getRegistrySubKeys(t),i=this._getVersionsRegistryKeys(r);for(let e of i){let t=yield y.getRegistryValue(e,"InstallDir"),n=l.join(t,"Common7","IDE","Extensions","Microsoft","SQLDB","DAC"),r=this._getSqlPackageInVSDacDirectory(n);if(r[0])return r}return c.debug("Dac Framework (installed with Visual Studio) not found on machine."),["",0]}))}static _getSqlPackageInVSDacDirectory(e){if(h.existsSync(e)){let t=h.readdirSync(e).filter((e=>!isNaN(l.basename(e)))).sort(((e,t)=>{let n=l.basename(e),r=l.basename(t);return n>r?-1:n<r?1:0})).map((t=>l.join(e,t)));for(let e of t){let t=l.join(e,"SqlPackage.exe");if(h.existsSync(t))return c.debug(`Dac Framework installed with Visual Studio found at ${t}`),[t,parseInt(l.basename(e))]}}return["",0]}static _getLatestVisualStudioInstallationPath(){return s(this,void 0,void 0,(function*(){let e=l.join(process.env["ProgramFiles(x86)"],"Microsoft Visual Studio","Installer","vswhere.exe"),t="";try{yield u.exec(`"${e}"`,["-latest","-format","json"],{silent:!0,listeners:{stdout:e=>t+=e.toString()}})}catch(e){return c.debug(`Unable to find the location of latest Visual Studio Installation path using vswhere.exe. ${e}`),""}c.debug(t);let n=JSON.parse(t);return n[0]&&n[0].installationPath}))}static _getSqlPackageInstalledWithDacMsi(){return s(this,void 0,void 0,(function*(){let e=l.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server","Data-Tier Application Framework"),t=l.join("\\","SOFTWARE","Wow6432Node","Microsoft","Microsoft SQL Server","Data-Tier Application Framework");if(!(yield y.registryKeyExists(e))&&(e=t,!(yield y.registryKeyExists(e))))return["",0];let n=yield y.getRegistrySubKeys(e),r=this._getVersionsRegistryKeys(n);for(let e of r){let t=yield y.getRegistryValue(e,"InstallDir");if(t){let n=l.join(t,"SqlPackage.exe");if(h.existsSync(n))return c.debug(`SQLPackage.exe (installed with DacFramework) found at location: ${n}`),[n,parseInt(e.key.split("\\").slice(-1)[0])]}}return["",0]}))}static _getSqlPackageInstalledWithSSMS(){return s(this,void 0,void 0,(function*(){let e=l.join("\\","SOFTWARE","Microsoft","Microsoft SQL Server"),t=l.join("\\","SOFTWARE","Wow6432Node","Microsoft","Microsoft SQL Server");if(!(yield y.registryKeyExists(e))&&(e=t,!(yield y.registryKeyExists(e))))return["",0];let n=yield y.getRegistrySubKeys(e),r=this._getVersionsRegistryKeys(n);for(let e of r){let t=yield y.getRegistryValue(e,"VerSpecificRootDir");if(t){let n=l.join(t,"Dac","bin","SqlPackage.exe");if(h.existsSync(n))return c.debug(`SqlPackage.exe (installed with SSMS) found at location: ${n}`),[n,parseInt(e.key.split("\\").slice(-1)[0])]}}return["",0]}))}static _getVersionsRegistryKeys(e){return e.filter((e=>!isNaN(e.key.split("\\").slice(-1)[0]))).sort(((e,t)=>{let n=parseInt(e.key.split("\\").slice(-1)[0]),r=parseInt(t.key.split("\\").slice(-1)[0]);return n>r?-1:n<r?1:0}))}static _getSqlPackageBinaryPathLinux(){return"sqlpackage"}static _getSqlPackageBinaryPathMac(){throw new Error("This action is not supported on a Mac environment.")}}t.default=y,y._sqlPackagePath=""},5169:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(804),o="2021-11-01";class s{constructor(e){this._authorizer=e,this._restClient=new i.ServiceClient(e)}static getResourceManager(e,t){return r(this,void 0,void 0,(function*(){let n=new s(t);return yield n._populateSqlServerData(e),n}))}getSqlServer(){return this._resource}addFirewallRule(e,t){return r(this,void 0,void 0,(function*(){let n=new Date,r=`ClientIPAddress_${n.getFullYear()}-${n.getMonth()}-${n.getDay()}_${e}`,s={method:"PUT",uri:this._restClient.getRequestUri(`/${this._resource.id}/firewallRules/${r}`,{},[],o),body:JSON.stringify({properties:{startIpAddress:e,endIpAddress:t}})};try{let e=yield this._restClient.beginRequest(s);if(200!==e.statusCode&&201!==e.statusCode)throw(0,i.ToError)(e);return e.body}catch(e){if(e instanceof i.AzureError)throw new Error(JSON.stringify(e));throw e}}))}removeFirewallRule(e){return r(this,void 0,void 0,(function*(){let t={method:"DELETE",uri:this._restClient.getRequestUri(`/${this._resource.id}/firewallRules/${e.name}`,{},[],o)};try{let e=yield this._restClient.beginRequest(t);if(200!==e.statusCode&&204!==e.statusCode)throw(0,i.ToError)(e)}catch(e){if(e instanceof i.AzureError)throw new Error(JSON.stringify(e));throw e}}))}_populateSqlServerData(e){return r(this,void 0,void 0,(function*(){let t=this._authorizer.getCloudSuffixUrl("sqlServerHostname");e.endsWith(t)&&(e=e.slice(0,e.lastIndexOf(t)));let n={method:"GET",uri:this._restClient.getRequestUri("//subscriptions/{subscriptionId}/providers/Microsoft.Sql/servers",{},[],o)};try{let t=yield this._restClient.beginRequest(n);if(200!==t.statusCode)throw(0,i.ToError)(t);let r=t.body&&t.body.value;if(!(r&&r.length>0))throw new Error(`Unable to get details of SQL server ${e}. No SQL servers were found in the subscription ${this._authorizer.subscriptionID}.`);if(this._resource=r.filter((t=>t.name===e))[0],!this._resource)throw new Error(`Unable to get details of SQL server ${e}. Sql server '${e}' was not found in the subscription ${this._authorizer.subscriptionID}.`)}catch(e){if(e instanceof i.AzureError)throw new Error(JSON.stringify(e));throw e}}))}}t.default=s},4738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t.default=n,n.ipv4MatchPattern=/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/,n.connectionStringTester=/^[;\s]*([\w\s]+=(?:('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*)))(;[;\s]*([\w\s]+=(?:('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*))))*[;\s]*$/,n.connectionStringParserRegex=/(?<key>[\w\s]+)=(?<val>('[^']*(''[^']*)*')|("[^"]*(""[^"]*)*")|((?!['"])[^;]*))/g,n.dacpacExtension=".dacpac",n.sqlFileExtension=".sql",n.sqlprojExtension=".sqlproj",n.sqlcmdPasswordEnvVarName="SQLCMDPASSWORD"},2573:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static parseCommandArguments(e){return n(this,void 0,void 0,(function*(){let t={};const n=e.match(/(\-\-?[A-Za-z\-]+(?:$|\s+)(?:[^\s"'\-]+|"[^"]*"|'[^']*')?)/g);return null==n||n.forEach((e=>{const n=e.trim().indexOf(" ");if(n>=0){const r=e.substring(0,n),i=e.substring(n).trim();t[r]=i}else t[e]=void 0})),t}))}static findArgument(e,t,r){var i;return n(this,void 0,void 0,(function*(){return null!==(i=e[t])&&void 0!==i?i:r?e[r]:void 0}))}}},2873:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(2225));t.default=class{constructor(e){this._resourceManager=e}addFirewallRule(e){return s(this,void 0,void 0,(function*(){e?(console.log("Client does not have access to server. Adding firewall exception for client's IP address."),this._firewallRule=yield this._resourceManager.addFirewallRule(e,e),a.debug(JSON.stringify(this._firewallRule)),console.log(`Successfully added firewall rule ${this._firewallRule.name}.`)):a.debug("Client has access to Sql server. Skip adding firewall exception.")}))}removeFirewallRule(){return s(this,void 0,void 0,(function*(){this._firewallRule&&(console.log(`Removing firewall rule '${this._firewallRule.name}'.`),yield this._resourceManager.removeFirewallRule(this._firewallRule),console.log("Successfully removed firewall rule."))}))}}},4413:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sqlcmdVersion=t.sqlcmdToolName=void 0;const c=o(n(2225)),u=o(n(4392)),l=o(n(1017)),h=a(n(1171));t.sqlcmdToolName="go-sqlcmd",t.sqlcmdVersion="1.0.0",t.default=class{static setupSqlcmd(){return s(this,void 0,void 0,(function*(){let e=u.find(t.sqlcmdToolName,t.sqlcmdVersion);if(!e){const n=yield this.downloadAndExtractSqlcmd();e=yield u.cacheDir(n,t.sqlcmdToolName,t.sqlcmdVersion)}c.addPath(e)}))}static downloadAndExtractSqlcmd(){return s(this,void 0,void 0,(function*(){let e;switch(process.platform){case"linux":return e=yield u.downloadTool(`https://github.com/microsoft/go-sqlcmd/releases/download/v${t.sqlcmdVersion}/sqlcmd-v${t.sqlcmdVersion}-linux-x64.tar.bz2`),yield u.extractTar(e,void 0,"xj");case"win32":const n=l.join(process.env.RUNNER_TEMP||"",(0,h.default)()+".zip");return e=yield u.downloadTool(`https://github.com/microsoft/go-sqlcmd/releases/download/v${t.sqlcmdVersion}/sqlcmd-v${t.sqlcmdVersion}-windows-x64.zip`,n),yield u.extractZip(e);default:throw new Error(`Runner OS is not supported: ${process.platform}`)}}))}}},6068:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(2225)),c=n(3755),u=s(n(4738));t.default=class{constructor(e){this._validateConnectionString(e),this._connectionString=e,this._connectionConfig=c.ConnectionPool.parseConnectionString(e),this._maskSecrets(),this._setAuthentication(),this._validateconfig()}get Config(){return this._connectionConfig}get ConnectionString(){return this._connectionString}_validateConnectionString(e){if(!u.default.connectionStringTester.test(e))throw new Error("Invalid connection string. A valid connection string is a series of keyword/value pairs separated by semi-colons. If there are any special characters like quotes or semi-colons in the keyword value, enclose the value within quotes. Refer to this link for more info on connection string https://aka.ms/sqlconnectionstring")}_maskSecrets(){this._connectionConfig.user&&a.setSecret(this._connectionConfig.user),this._connectionConfig.password&&a.setSecret(this._connectionConfig.password)}_validateconfig(){var e,t,n,r;if(!this._connectionConfig.server)throw new Error("Invalid connection string. Please ensure 'Server' or 'Data Source' is provided in the connection string.");if(!this._connectionConfig.database)throw new Error("Invalid connection string. Please ensure 'Database' or 'Initial Catalog' is provided in the connection string.");const i=this._connectionConfig.authentication;switch(null==i?void 0:i.type){case void 0:if(!this._connectionConfig.user)throw new Error("Invalid connection string. Please ensure 'User' or 'User ID' is provided in the connection string.");if(!this._connectionConfig.password)throw new Error("Invalid connection string. Please ensure 'Password' is provided in the connection string.");break;case"azure-active-directory-password":if(!(null===(e=i.options)||void 0===e?void 0:e.userName))throw new Error("Invalid connection string. Please ensure 'User' or 'User ID' is provided in the connection string.");if(!(null===(t=i.options)||void 0===t?void 0:t.password))throw new Error("Invalid connection string. Please ensure 'Password' is provided in the connection string.");break;case"azure-active-directory-service-principal-secret":if(!(null===(n=i.options)||void 0===n?void 0:n.clientId))throw new Error("Invalid connection string. Please ensure client ID is provided in the 'User' or 'User ID' field of the connection string.");if(!(null===(r=i.options)||void 0===r?void 0:r.clientSecret))throw new Error("Invalid connection string. Please ensure client secret is provided in the 'Password' field of the connection string.")}}_setAuthentication(){const e=Array.from(this._connectionString.matchAll(u.default.connectionStringParserRegex)),t=this._findInConnectionString(e,"authentication");if(t)switch(t.replace(/\s/g,"").toLowerCase()){case"sqlpassword":break;case"activedirectorypassword":this._connectionConfig.authentication={type:"azure-active-directory-password",options:{userName:this._connectionConfig.user,password:this._connectionConfig.password,clientId:a.getInput("client-id")}};break;case"activedirectorydefault":this._connectionConfig.authentication={type:"azure-active-directory-default"};break;case"activedirectoryserviceprincipal":this._connectionConfig.authentication={type:"azure-active-directory-service-principal-secret",options:{clientId:this._connectionConfig.user,clientSecret:this._connectionConfig.password}};break;default:throw new Error(`Authentication type '${t}' is not supported.`)}}_findInConnectionString(e,t){for(const n of e)if(n.groups){const e=n.groups.key.replace(/\s/g,"");if(t=t.replace(/\s/g,""),e.toLowerCase()===t.toLowerCase()){let e=n.groups.val;return"'"===e[0]?(e=e.slice(1,-1),e=e.replace(/''/g,"'")):'"'===e[0]&&(e=e.slice(1,-1),e=e.replace(/""/g,'"')),e}}}}},9769:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=o(n(2225)),u=o(n(27)),l=a(n(4738));t.default=class{static detectIPAddress(e){return s(this,void 0,void 0,(function*(){let t=yield this.tryConnection(e,!0);if(t.success)return"";if(t.ipAddress)return t.ipAddress;if(t=yield this.tryConnection(e,!1),t.success)return"";if(t.ipAddress)return t.ipAddress;throw new Error(`Failed to add firewall rule. Unable to detect client IP Address. ${t.errorMessage}`)}))}static tryConnection(e,t){return s(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(e.Config));t&&(n.database="master");let r="";try{c.debug(`Validating if client has access to '${n.database}' on '${n.server}'.`);let e=this.buildSqlCmdCallWithConnectionInfo(n);return e+=" -Q \"SELECT 'Validating connection from GitHub SQL Action'\"",yield u.exec(e,[],{silent:!0,listeners:{stderr:e=>r+=e.toString(),stdout:e=>r+=e.toString()}}),{success:!0}}catch(e){return console.log(`${e.message}`),console.log(`SqlCmd stderr: ${r}`),{success:!1,errorMessage:r,ipAddress:this.parseErrorForIpAddress(r)}}}))}static parseErrorForIpAddress(e){let t;const n=e.match(l.default.ipv4MatchPattern);return n&&(t=n[0]),t}static buildSqlCmdCallWithConnectionInfo(e){var t;let n;switch(process.platform){case"win32":n="sqlcmd.exe";break;case"linux":case"darwin":n="sqlcmd";break;default:throw new Error(`Platform ${process.platform} is not supported.`)}let r=`"${n}" -S ${e.server},${null!==(t=e.port)&&void 0!==t?t:1433} -d ${e.database}`;const i=e.authentication;switch(null==i?void 0:i.type){case void 0:r+=` -U "${e.user}"`,c.exportVariable(l.default.sqlcmdPasswordEnvVarName,e.password);break;case"azure-active-directory-default":r+=" --authentication-method=ActiveDirectoryDefault";break;case"azure-active-directory-password":r+=` --authentication-method=ActiveDirectoryPassword -U "${i.options.userName}"`,c.exportVariable(l.default.sqlcmdPasswordEnvVarName,i.options.password);break;case"azure-active-directory-service-principal-secret":r+=` --authentication-method=ActiveDirectoryServicePrincipal -U "${e.user}"`,c.exportVariable(l.default.sqlcmdPasswordEnvVarName,i.options.clientSecret);break;default:throw new Error(`Authentication type ${i.type} is not supported.`)}return r}}},8519:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=o(n(2225)),u=o(n(6113)),l=o(n(1017)),h=n(2609),d=o(n(6679)),f=a(n(5169)),p=a(n(2873)),m=a(n(5731)),g=a(n(6068)),y=a(n(9769)),_=a(n(4738)),v=a(n(4413)),E=process.env.AZURE_HTTP_USER_AGENT?`${process.env.AZURE_HTTP_USER_AGENT}`:"";function w(){return s(this,void 0,void 0,(function*(){let e;yield v.default.setupSqlcmd();try{!function(){const e=u.createHash("sha256").update(`${process.env.GITHUB_REPOSITORY}`).digest("hex"),t=(E?`${E}+`:"")+`GITHUBACTIONS_AzureSqlAction_${e}`;c.exportVariable("AZURE_HTTP_USER_AGENT",t)}();const t=function(){c.debug("Get action inputs.");const e=c.getInput("connection-string",{required:!0}),t=new g.default(e);let n=c.getInput("path",{required:!0});n=m.default.resolveFilePath(n);const r=c.getInput("action");switch(l.extname(n).toLowerCase()){case _.default.sqlFileExtension:return{actionType:d.ActionType.SqlAction,connectionConfig:t,filePath:n,additionalArguments:c.getInput("arguments")||void 0};case _.default.dacpacExtension:if(!r)throw new Error("The action input must be specified when using a .dacpac file.");return{actionType:d.ActionType.DacpacAction,connectionConfig:t,filePath:n,sqlpackageAction:m.default.getSqlpackageActionTypeFromString(r),additionalArguments:c.getInput("arguments")||void 0};case _.default.sqlprojExtension:if(!r)throw new Error("The action input must be specified when using a .sqlproj file.");return{actionType:d.ActionType.BuildAndPublish,connectionConfig:t,filePath:n,buildArguments:c.getInput("build-arguments")||void 0,sqlpackageAction:m.default.getSqlpackageActionTypeFromString(r),additionalArguments:c.getInput("arguments")||void 0};default:throw new Error(`Invalid file type provided as input ${n}. File must be a .sql, .dacpac, or .sqlproj file.`)}}(),n=new d.default(t),r=yield y.default.detectIPAddress(t.connectionConfig);if(r){let n=yield h.AuthorizerFactory.getAuthorizer(),i=yield f.default.getResourceManager(t.connectionConfig.Config.server,n);e=new p.default(i),yield e.addFirewallRule(r)}yield n.execute()}catch(e){c.setFailed(e.message)}finally{e&&(yield e.removeFirewallRule()),c.exportVariable("AZURE_HTTP_USER_AGENT",E)}}))}t.default=w,w()},6149:(e,t,n)=>{e.exports=n(5468)},5468:(e,t,n)=>{"use strict";n(1808);var r,i=n(4404),o=n(3685),s=n(5687),a=n(2361),c=(n(9491),n(3837));function u(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",(function(e,n,r,i){for(var o=h(n,r,i),s=0,a=t.requests.length;s<a;++s){var c=t.requests[s];if(c.host===o.host&&c.port===o.port)return t.requests.splice(s,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)}))}function l(e,t){var n=this;u.prototype.createSocket.call(n,e,(function(r){var o=e.request.getHeader("host"),s=d({},n.options,{socket:r,servername:o?o.replace(/:.*$/,""):e.host}),a=i.connect(0,s);n.sockets[n.sockets.indexOf(r)]=a,t(a)}))}function h(e,t,n){return"string"==typeof e?{host:e,port:t,localAddress:n}:e}function d(e){for(var t=1,n=arguments.length;t<n;++t){var r=arguments[t];if("object"==typeof r)for(var i=Object.keys(r),o=0,s=i.length;o<s;++o){var a=i[o];void 0!==r[a]&&(e[a]=r[a])}}return e}t.httpOverHttp=function(e){var t=new u(e);return t.request=o.request,t},t.httpsOverHttp=function(e){var t=new u(e);return t.request=o.request,t.createSocket=l,t.defaultPort=443,t},t.httpOverHttps=function(e){var t=new u(e);return t.request=s.request,t},t.httpsOverHttps=function(e){var t=new u(e);return t.request=s.request,t.createSocket=l,t.defaultPort=443,t},c.inherits(u,a.EventEmitter),u.prototype.addRequest=function(e,t,n,r){var i=this,o=d({request:e},i.options,h(t,n,r));i.sockets.length>=this.maxSockets?i.requests.push(o):i.createSocket(o,(function(t){function n(){i.emit("free",t,o)}function r(e){i.removeSocket(t),t.removeListener("free",n),t.removeListener("close",r),t.removeListener("agentRemove",r)}t.on("free",n),t.on("close",r),t.on("agentRemove",r),e.onSocket(t)}))},u.prototype.createSocket=function(e,t){var n=this,i={};n.sockets.push(i);var o=d({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),r("making CONNECT request");var s=n.request(o);function a(o,a,c){var u;return s.removeAllListeners(),a.removeAllListeners(),200!==o.statusCode?(r("tunneling socket could not be established, statusCode=%d",o.statusCode),a.destroy(),(u=new Error("tunneling socket could not be established, statusCode="+o.statusCode)).code="ECONNRESET",e.request.emit("error",u),void n.removeSocket(i)):c.length>0?(r("got illegal response body from proxy"),a.destroy(),(u=new Error("got illegal response body from proxy")).code="ECONNRESET",e.request.emit("error",u),void n.removeSocket(i)):(r("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=a,t(a))}s.useChunkedEncodingByDefault=!1,s.once("response",(function(e){e.upgrade=!0})),s.once("upgrade",(function(e,t,n){process.nextTick((function(){a(e,t,n)}))})),s.once("connect",a),s.once("error",(function(t){s.removeAllListeners(),r("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, cause="+t.message);o.code="ECONNRESET",e.request.emit("error",o),n.removeSocket(i)})),s.end()},u.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var n=this.requests.shift();n&&this.createSocket(n,(function(e){n.request.onSocket(e)}))}},r=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=r},7723:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(7310),o=n(3685),s=n(5687),a=n(1320);let c,u;var l;!function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"}(l=t.HttpCodes||(t.HttpCodes={}));const h=[l.MovedPermanently,l.ResourceMoved,l.SeeOther,l.TemporaryRedirect,l.PermanentRedirect],d=[l.BadGateway,l.ServiceUnavailable,l.GatewayTimeout],f=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED"],p=["OPTIONS","GET","DELETE","HEAD"];class m{constructor(e){this.message=e}readBody(){return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){const n=[],i=a.obtainContentCharset(this),o=this.message.headers["content-encoding"]||"",s=new RegExp("(gzip$)|(gzip, *deflate)").test(o);this.message.on("data",(function(e){const t="string"==typeof e?Buffer.from(e,i):e;n.push(t)})).on("end",(function(){return r(this,void 0,void 0,(function*(){const t=Buffer.concat(n);if(s){const n=yield a.decompressGzippedContent(t,i);e(n)}else e(t.toString(i))}))})).on("error",(function(e){t(e)}))}))))}}var g;t.HttpClientResponse=m,t.isHttps=function(e){return"https:"===i.parse(e).protocol},function(e){e.HTTP_PROXY="HTTP_PROXY",e.HTTPS_PROXY="HTTPS_PROXY",e.NO_PROXY="NO_PROXY"}(g||(g={})),t.HttpClient=class{constructor(e,t,r){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[];let i=process.env[g.NO_PROXY];i&&(this._httpProxyBypassHosts=[],i.split(",").forEach((e=>{this._httpProxyBypassHosts.push(a.buildProxyBypassRegexFromEnv(e))}))),this.requestOptions=r,r&&(null!=r.ignoreSslError&&(this._ignoreSslError=r.ignoreSslError),this._socketTimeout=r.socketTimeout,this._httpProxy=r.proxy,r.proxy&&r.proxy.proxyBypassHosts&&(this._httpProxyBypassHosts=[],r.proxy.proxyBypassHosts.forEach((e=>{this._httpProxyBypassHosts.push(new RegExp(e,"i"))}))),this._certConfig=r.cert,this._certConfig&&(c=n(7147),this._certConfig.caFile&&c.existsSync(this._certConfig.caFile)&&(this._ca=c.readFileSync(this._certConfig.caFile,"utf8")),this._certConfig.certFile&&c.existsSync(this._certConfig.certFile)&&(this._cert=c.readFileSync(this._certConfig.certFile,"utf8")),this._certConfig.keyFile&&c.existsSync(this._certConfig.keyFile)&&(this._key=c.readFileSync(this._certConfig.keyFile,"utf8"))),null!=r.allowRedirects&&(this._allowRedirects=r.allowRedirects),null!=r.allowRedirectDowngrade&&(this._allowRedirectDowngrade=r.allowRedirectDowngrade),null!=r.maxRedirects&&(this._maxRedirects=Math.max(r.maxRedirects,0)),null!=r.keepAlive&&(this._keepAlive=r.keepAlive),null!=r.allowRetries&&(this._allowRetries=r.allowRetries),null!=r.maxRetries&&(this._maxRetries=r.maxRetries))}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,n){return this.request("POST",e,t,n||{})}patch(e,t,n){return this.request("PATCH",e,t,n||{})}put(e,t,n){return this.request("PUT",e,t,n||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,n,r){return this.request(e,t,n,r)}request(e,t,n,o){return r(this,void 0,void 0,(function*(){if(this._disposed)throw new Error("Client has already been disposed.");let r,s=i.parse(t),a=this._prepareRequest(e,s,o),c=this._allowRetries&&-1!=p.indexOf(e)?this._maxRetries+1:1,u=0;for(;u<c;){try{r=yield this.requestRaw(a,n)}catch(e){if(u++,e&&e.code&&f.indexOf(e.code)>-1&&u<c){yield this._performExponentialBackoff(u);continue}throw e}if(r&&r.message&&r.message.statusCode===l.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++)if(this.handlers[t].canHandleAuthentication(r)){e=this.handlers[t];break}return e?e.handleAuthentication(this,a,n):r}let t=this._maxRedirects;for(;-1!=h.indexOf(r.message.statusCode)&&this._allowRedirects&&t>0;){const c=r.message.headers.location;if(!c)break;let u=i.parse(c);if("https:"==s.protocol&&s.protocol!=u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");yield r.readBody(),a=this._prepareRequest(e,u,o),r=yield this.requestRaw(a,n),t--}if(-1==d.indexOf(r.message.statusCode))return r;u+=1,u<c&&(yield r.readBody(),yield this._performExponentialBackoff(u))}return r}))}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return new Promise(((n,r)=>{this.requestRawWithCallback(e,t,(function(e,t){e&&r(e),n(t)}))}))}requestRawWithCallback(e,t,n){let r;"string"==typeof t&&(e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let i=!1,o=(e,t)=>{i||(i=!0,n(e,t))},s=e.httpModule.request(e.options,(e=>{let t=new m(e);o(null,t)}));s.on("socket",(e=>{r=e})),s.setTimeout(this._socketTimeout||18e4,(()=>{r&&r.destroy(),o(new Error("Request timeout: "+e.options.path),null)})),s.on("error",(function(e){o(e,null)})),t&&"string"==typeof t&&s.write(t,"utf8"),t&&"string"!=typeof t?(t.on("close",(function(){s.end()})),t.pipe(s)):s.end()}_prepareRequest(e,t,n){const r={};r.parsedUrl=t;const a="https:"===r.parsedUrl.protocol;r.httpModule=a?s:o;const c=a?443:80;return r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):c,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=e,r.options.timeout=this.requestOptions&&this.requestOptions.socketTimeout||this._socketTimeout,this._socketTimeout=r.options.timeout,r.options.headers=this._mergeHeaders(n),null!=this.userAgent&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers&&!this._isPresigned(i.format(t))&&this.handlers.forEach((e=>{e.prepareRequest(r.options)})),r}_isPresigned(e){if(this.requestOptions&&this.requestOptions.presignedUrlPatterns){const t=this.requestOptions.presignedUrlPatterns;for(let n=0;n<t.length;n++)if(e.match(t[n]))return!0}return!1}_mergeHeaders(e){const t=e=>Object.keys(e).reduce(((t,n)=>(t[n.toLowerCase()]=e[n],t)),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},t(this.requestOptions.headers),t(e)):t(e||{})}_getAgent(e){let t,r=this._getProxy(e),i=r.proxyUrl&&r.proxyUrl.hostname&&!this._isMatchInBypassProxyList(e);if(this._keepAlive&&i&&(t=this._proxyAgent),this._keepAlive&&!i&&(t=this._agent),t)return t;const a="https:"===e.protocol;let c=100;if(this.requestOptions&&(c=this.requestOptions.maxSockets||o.globalAgent.maxSockets),i){u||(u=n(6149));const e={maxSockets:c,keepAlive:this._keepAlive,proxy:{proxyAuth:r.proxyAuth,host:r.proxyUrl.hostname,port:r.proxyUrl.port}};let i;const o="https:"===r.proxyUrl.protocol;i=a?o?u.httpsOverHttps:u.httpsOverHttp:o?u.httpOverHttps:u.httpOverHttp,t=i(e),this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:c};t=a?new s.Agent(e):new o.Agent(e),this._agent=t}return t||(t=a?s.globalAgent:o.globalAgent),a&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),a&&this._certConfig&&(t.options=Object.assign(t.options||{},{ca:this._ca,cert:this._cert,key:this._key,passphrase:this._certConfig.passphrase})),t}_getProxy(e){let t,n,r="https:"===e.protocol,o=this._httpProxy,s=process.env[g.HTTPS_PROXY],a=process.env[g.HTTP_PROXY];return o||(s&&r?o={proxyUrl:s}:a&&(o={proxyUrl:a})),o&&(o.proxyUrl.length>0&&(t=i.parse(o.proxyUrl)),(o.proxyUsername||o.proxyPassword)&&(n=o.proxyUsername+":"+o.proxyPassword)),{proxyUrl:t,proxyAuth:n}}_isMatchInBypassProxyList(e){if(!this._httpProxyBypassHosts)return!1;let t=!1;return this._httpProxyBypassHosts.forEach((n=>{n.test(e.href)&&(t=!0)})),t}_performExponentialBackoff(e){e=Math.min(10,e);const t=5*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}}},1320:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(6322),o=n(7310),s=n(1017),a=n(9796);t.getUrl=function(e,t,n){const r=s.posix||s;let a="";if(t)if(e){const n=o.parse(t),i=o.parse(e);i.protocol=i.protocol||n.protocol,i.auth=i.auth||n.auth,i.host=i.host||n.host,i.pathname=r.resolve(n.pathname,i.pathname),!i.pathname.endsWith("/")&&e.endsWith("/")&&(i.pathname+="/"),a=o.format(i)}else a=t;else a=e;return n?function(e,t){const n=e.replace(/\?$/g,""),r=i.stringify(t.params,function(e){return{addQueryPrefix:!0,delimiter:(e.options||{}).separator||"&",allowDots:(e.options||{}).shouldAllowDots||!1,arrayFormat:(e.options||{}).arrayFormat||"repeat",encodeValuesOnly:(e.options||{}).shouldOnlyEncodeValues||!0}}(t));return`${n}${r}`}(a,n):a},t.decompressGzippedContent=function(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,i)=>r(this,void 0,void 0,(function*(){a.gunzip(e,(function(e,r){e?i(e):n(r.toString(t||"utf-8"))}))}))))}))},t.buildProxyBypassRegexFromEnv=function(e){try{return new RegExp(e,"i")}catch(t){if(t instanceof SyntaxError&&(e||"").startsWith("*")){let t=e.replace("*","(.*)");return new RegExp(t,"i")}throw t}},t.obtainContentCharset=function(e){const t=(e.message.headers["content-type"]||"").match(/charset=([^;,\r\n]+)/i);return t&&t[1]&&-1!=["ascii","utf8","utf16le","ucs2","base64","binary","hex"].indexOf(t[1])?t[1]:"utf-8"}},8303:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC3986";e.exports={default:r,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}},6322:(e,t,n)=>{"use strict";var r=n(2367),i=n(1578),o=n(8303);e.exports={formats:o,parse:i,stringify:r}},1578:(e,t,n)=>{"use strict";var r=n(549),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(o),u=a?o.slice(0,a.index):o,l=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var h=0;n.depth>0&&null!==(a=s.exec(o))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+o.slice(a.index)+"]"),function(e,t,n,r){for(var i=r?t:c(t,n),o=e.length-1;o>=0;--o){var s,a=e[o];if("[]"===a&&n.parseArrays)s=[].concat(i);else{s=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(u,10);n.parseArrays||""!==u?!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(s=[])[l]=i:"__proto__"!==u&&(s[u]=i):s={0:i}}i=s}return i}(l,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var n,u={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,h),f=-1,p=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[n]?p="utf-8":"utf8=%26%2310003%3B"===d[n]&&(p="iso-8859-1"),f=n,n=d.length);for(n=0;n<d.length;++n)if(n!==f){var m,g,y=d[n],_=y.indexOf("]="),v=-1===_?y.indexOf("="):_+1;-1===v?(m=t.decoder(y,s.decoder,p,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(y.slice(0,v),s.decoder,p,"key"),g=r.maybeMap(c(y.slice(v+1),t),(function(e){return t.decoder(e,s.decoder,p,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===p&&(g=a(g)),y.indexOf("[]=")>-1&&(g=o(g)?[g]:g),i.call(u,m)?u[m]=r.combine(u[m],g):u[m]=g}return u}(e,n):e,h=n.plainObjects?Object.create(null):{},d=Object.keys(l),f=0;f<d.length;++f){var p=d[f],m=u(p,l[p],n,"string"==typeof e);h=r.merge(h,m,n)}return!0===n.allowSparse?h:r.compact(h)}},2367:(e,t,n)=>{"use strict";var r=n(7478),i=n(549),o=n(8303),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=String.prototype.split,l=Array.prototype.push,h=function(e,t){l.apply(e,c(t)?t:[t])},d=Date.prototype.toISOString,f=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},m={},g=function e(t,n,o,s,a,l,d,f,g,y,_,v,E,w,b,T){for(var S,A=t,O=T,C=0,I=!1;void 0!==(O=O.get(m))&&!I;){var R=O.get(t);if(C+=1,void 0!==R){if(R===C)throw new RangeError("Cyclic object value");I=!0}void 0===O.get(m)&&(C=0)}if("function"==typeof f?A=f(n,A):A instanceof Date?A=_(A):"comma"===o&&c(A)&&(A=i.maybeMap(A,(function(e){return e instanceof Date?_(e):e}))),null===A){if(a)return d&&!w?d(n,p.encoder,b,"key",v):n;A=""}if("string"==typeof(S=A)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||i.isBuffer(A)){if(d){var N=w?n:d(n,p.encoder,b,"key",v);if("comma"===o&&w){for(var P=u.call(String(A),","),D="",k=0;k<P.length;++k)D+=(0===k?"":",")+E(d(P[k],p.encoder,b,"value",v));return[E(N)+(s&&c(A)&&1===P.length?"[]":"")+"="+D]}return[E(N)+"="+E(d(A,p.encoder,b,"value",v))]}return[E(n)+"="+E(String(A))]}var M,L=[];if(void 0===A)return L;if("comma"===o&&c(A))M=[{value:A.length>0?A.join(",")||null:void 0}];else if(c(f))M=f;else{var x=Object.keys(A);M=g?x.sort(g):x}for(var U=s&&c(A)&&1===A.length?n+"[]":n,F=0;F<M.length;++F){var B=M[F],q="object"==typeof B&&void 0!==B.value?B.value:A[B];if(!l||null!==q){var j=c(A)?"function"==typeof o?o(U,B):U:U+(y?"."+B:"["+B+"]");T.set(t,C);var H=r();H.set(m,T),h(L,e(q,j,o,s,a,l,d,f,g,y,_,v,E,w,b,H))}}return L};e.exports=function(e,t){var n,i=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=p.filter;return("function"==typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?i=(0,u.filter)("",i):c(u.filter)&&(n=u.filter);var l,d=[];if("object"!=typeof i||null===i)return"";l=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[l];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===f&&t&&t.commaRoundTrip;n||(n=Object.keys(i)),u.sort&&n.sort(u.sort);for(var y=r(),_=0;_<n.length;++_){var v=n[_];u.skipNulls&&null===i[v]||h(d,g(i[v],v,f,m,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,y))}var E=d.join(u.delimiter),w=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),E.length>0?w+E:""}},549:(e,t,n)=>{"use strict";var r=n(8303),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],s=i.obj[i.prop],a=Object.keys(s),c=0;c<a.length;++c){var u=a[c],l=s[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:s,prop:u}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,i,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<a.length;++u){var l=a.charCodeAt(u);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===r.RFC1738&&(40===l||41===l)?c+=a.charAt(u):l<128?c+=s[l]:l<2048?c+=s[192|l>>6]+s[128|63&l]:l<55296||l>=57344?c+=s[224|l>>12]+s[128|l>>6&63]+s[128|63&l]:(u+=1,l=65536+((1023&l)<<10|1023&a.charCodeAt(u)),c+=s[240|l>>18]+s[128|l>>12&63]+s[128|l>>6&63]+s[128|63&l])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(o(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var s=t;return o(t)&&!o(n)&&(s=a(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(i.call(t,o)){var s=t[o];s&&"object"==typeof s&&n&&"object"==typeof n?t[o]=e(s,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var s=n[o];return i.call(t,o)?t[o]=e(t[o],s,r):t[o]=s,t}),s)}}},1159:(e,t,n)=>{e.exports=n(3837).deprecate},5327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},556:(e,t,n)=>{var r=n(6113);e.exports=function(){return r.randomBytes(16)}},1171:(e,t,n)=>{var r=n(556),i=n(5327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},1283:(e,t,n)=>{var r=n(3837),i=n(1017),o=n(2081).spawn,s="HKLM",a="HKCU",c="HKCR",u="HKCC",l=[s,a,c,"HKU",u],h="REG_SZ",d="REG_MULTI_SZ",f="REG_EXPAND_SZ",p="REG_DWORD",m="REG_QWORD",g="REG_BINARY",y="REG_NONE",_=[h,d,f,p,m,g,y],v=/(\\[a-zA-Z0-9_\s]+)*/,E=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,w=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function b(e,t){if(!(this instanceof b))return new b(e,t);Error.captureStackTrace(this,b),this.__defineGetter__("name",(function(){return b.name})),this.__defineGetter__("message",(function(){return e})),this.__defineGetter__("code",(function(){return t}))}function T(e){var t={stdout:"",stderr:""};return e.stdout.on("data",(function(e){t.stdout+=e.toString()})),e.stderr.on("data",(function(e){t.stderr+=e.toString()})),t}function S(e,t,n){var i=n.stdout.trim(),o=n.stderr.trim();return new b(r.format("%s command exited with code %d:\n%s\n%s",e,t,i,o),t)}function A(e,t){t&&e.push("/reg:"+function(e){if("x64"==e)return"64";if("x86"==e)return"32";throw new Error("illegal architecture: "+e+" (use x86 or x64)")}(t))}function O(){return"win32"===process.platform?i.join(process.env.windir,"system32","reg.exe"):"REG"}function C(e,t,n,r,i,o,s){if(!(this instanceof C))return new C(e,t,n,r,i,o,s);var a=e,c=t,u=n,l=r,h=i,d=o,f=s;this.__defineGetter__("host",(function(){return a})),this.__defineGetter__("hive",(function(){return c})),this.__defineGetter__("key",(function(){return u})),this.__defineGetter__("name",(function(){return l})),this.__defineGetter__("type",(function(){return h})),this.__defineGetter__("value",(function(){return d})),this.__defineGetter__("arch",(function(){return f}))}function I(e){if(!(this instanceof I))return new I(e);var t=e||{},n=""+(t.host||""),r=""+(t.hive||s),i=""+(t.key||""),o=t.arch||null;if(this.__defineGetter__("host",(function(){return n})),this.__defineGetter__("hive",(function(){return r})),this.__defineGetter__("key",(function(){return i})),this.__defineGetter__("path",(function(){return(0==n.length?"":"\\\\"+n+"\\")+r+i})),this.__defineGetter__("arch",(function(){return o})),this.__defineGetter__("parent",(function(){var e=i.lastIndexOf("\\");return new I({host:this.host,hive:this.hive,key:-1==e?"":i.substring(0,e),arch:this.arch})})),-1==l.indexOf(r))throw new Error("illegal hive specified.");if(!v.test(i))throw new Error("illegal key specified.");if(o&&"x64"!=o&&"x86"!=o)throw new Error("illegal architecture specified (use x86 or x64)")}r.inherits(b,Error),r.inherits(C,Object),I.HKLM=s,I.HKCU=a,I.HKCR=c,I.HKU="HKU",I.HKCC=u,I.HIVES=l,I.REG_SZ=h,I.REG_MULTI_SZ=d,I.REG_EXPAND_SZ=f,I.REG_DWORD=p,I.REG_QWORD=m,I.REG_BINARY=g,I.REG_NONE=y,I.REG_TYPES=_,I.DEFAULT_VALUE="",I.prototype.values=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];A(t,this.arch);var n=o(O(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=T(n);return n.on("close",(function(t){if(!s)if(0!==t)e(S("QUERY",t,a),null);else{for(var n=[],o=[],c=r.split("\n"),u=0,l=0,h=c.length;l<h;l++){var d=c[l].trim();d.length>0&&(0!=u&&n.push(d),++u)}for(l=0,h=n.length;l<h;l++){var f,p,m,g=w.exec(n[l]);g&&(f=g[1].trim(),p=g[2].trim(),m=g[3],o.push(new C(i.host,i.hive,i.key,f,p,m,i.arch)))}e(null,o)}})),n.stdout.on("data",(function(e){r+=e.toString()})),n.on("error",(function(t){s=t,e(t)})),this},I.prototype.keys=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];A(t,this.arch);var n=o(O(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=T(n);return n.on("close",(function(t){s||0!==t&&e(S("QUERY",t,a),null)})),n.stdout.on("data",(function(e){r+=e.toString()})),n.stdout.on("end",(function(){for(var t=[],n=[],o=r.split("\n"),s=0,a=o.length;s<a;s++){var c=o[s].trim();c.length>0&&t.push(c)}for(s=0,a=t.length;s<a;s++){var u,l=E.exec(t[s]);l&&(l[1],(u=l[2])&&u!==i.key&&n.push(new I({host:i.host,hive:i.hive,key:u,arch:i.arch})))}e(null,n)})),n.on("error",(function(t){s=t,e(t)})),this},I.prototype.get=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=["QUERY",this.path];""==e?n.push("/ve"):n=n.concat(["/v",e]),A(n,this.arch);var r=o(O(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",s=this,a=null,c=T(r);return r.on("close",(function(e){if(!a)if(0!==e)t(S("QUERY",e,c),null);else{for(var n=[],r=null,o=i.split("\n"),u=0,l=0,h=o.length;l<h;l++){var d=o[l].trim();d.length>0&&(0!=u&&n.push(d),++u)}var f,p,m,g=n[n.length-1]||"",y=w.exec(g);y&&(f=y[1].trim(),p=y[2].trim(),m=y[3],r=new C(s.host,s.hive,s.key,f,p,m,s.arch)),t(null,r)}})),r.stdout.on("data",(function(e){i+=e.toString()})),r.on("error",(function(e){a=e,t(e)})),this},I.prototype.set=function(e,t,n,r){if("function"!=typeof r)throw new TypeError("must specify a callback");if(-1==_.indexOf(t))throw Error("illegal type specified.");var i=["ADD",this.path];""==e?i.push("/ve"):i=i.concat(["/v",e]),A(i=i.concat(["/t",t,"/d",n,"/f"]),this.arch);var s=o(O(),i,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),a=null,c=T(s);return s.on("close",(function(e){a||r(0!==e?S("ADD",e,c):null)})),s.stdout.on("data",(function(e){})),s.on("error",(function(e){a=e,r(e)})),this},I.prototype.remove=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"];A(n,this.arch);var r=o(O(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,s=T(r);return r.on("close",(function(e){i||(0!==e?t(S("DELETE",e,s),null):t(null))})),r.stdout.on("data",(function(e){})),r.on("error",(function(e){i=e,t(e)})),this},I.prototype.clear=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"];A(t,this.arch);var n=o(O(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=T(n);return n.on("close",(function(t){r||(0!==t?e(S("DELETE",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},I.prototype.erase=I.prototype.clear,I.prototype.destroy=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f"];A(t,this.arch);var n=o(O(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=T(n);return n.on("close",(function(t){r||(0!==t?e(S("DELETE",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},I.prototype.create=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"];A(t,this.arch);var n=o(O(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=T(n);return n.on("close",(function(t){r||(0!==t?e(S("ADD",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},I.prototype.keyExists=function(e){return this.values((function(t,n){if(t)return 1==t.code?e(null,!1):e(t);e(null,!0)})),this},I.prototype.valueExists=function(e,t){return this.get(e,(function(e,n){if(e)return 1==e.code?t(null,!1):t(e);t(null,!0)})),this},e.exports=I},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},1891:e=>{"use strict";e.exports=require("dgram")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5673:e=>{"use strict";e.exports=require("node:events")},7561:e=>{"use strict";e.exports=require("node:fs")},3977:e=>{"use strict";e.exports=require("node:fs/promises")},9411:e=>{"use strict";e.exports=require("node:path")},4492:e=>{"use strict";e.exports=require("node:stream")},6915:e=>{"use strict";e.exports=require("node:string_decoder")},1041:e=>{"use strict";e.exports=require("node:url")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4637:(e,t)=>{"use strict";t.S=void 0,t.S={operationRequestMap:new WeakMap}},6308:(e,t)=>{"use strict";t.S=void 0,t.S={instrumenterImplementation:void 0}},8613:(e,t,n)=>{"use strict";var r=n(4453),i=n(3682),o=n(8344),s=n(661),a=n(7906),c=n(5819),u=n(8294);e.exports=function(e,t,n){if("Object"!==u(e))throw new r("Assertion failed: Type(O) is not Object");if(!a(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");return i(s,c,o,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":n,"[[Writable]]":!0})}},8344:(e,t,n)=>{"use strict";var r=n(4453),i=n(1108),o=n(7141);e.exports=function(e){if(void 0!==e&&!i(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return o(e)}},661:(e,t,n)=>{"use strict";var r=n(4453),i=n(8824),o=n(1108);e.exports=function(e){if(void 0===e)return!1;if(!o(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return!(!i(e,"[[Value]]")&&!i(e,"[[Writable]]"))}},7906:e=>{"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},5819:(e,t,n)=>{"use strict";var r=n(9086);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:r(e)&&r(t)}},8294:(e,t,n)=>{"use strict";var r=n(3951);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":r(e)}},5700:(e,t,n)=>{"use strict";var r=n(9143),i=n(1338),o=n(1645),s=n(4453);e.exports=function(e,t,n){if("string"!=typeof e)throw new s("Assertion failed: `S` must be a String");if(!i(t)||t<0||t>o)throw new s("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if("boolean"!=typeof n)throw new s("Assertion failed: `unicode` must be a Boolean");return n?t+1>=e.length?t+1:t+r(e,t)["[[CodeUnitCount]]"]:t+1}},5613:(e,t,n)=>{"use strict";var r=n(210),i=n(3464),o=n(4453),s=r("%Promise%",!0),a=n(1924),c=n(2149),u=n(8018),l=n(8409),h=n(9970),d=n(8066),f=a("Promise.prototype.then",!0);e.exports=function(e){if("Object"!==d(e))throw new o("Assertion failed: Type(O) is not Object");if(arguments.length>1)throw new i("although AsyncFromSyncIteratorContinuation should take a second argument, it is not used in this implementation");if(!s)throw new i("This environment does not support Promises.");return new s((function(t){var n=u(e),r=l(e),i=h(s,r);t(f(i,(function(e){return c(e,n)})))}))}},8583:(e,t,n)=>{"use strict";var r=n(210),i=n(1924),o=n(4453),s=n(5577),a=r("%Reflect.apply%",!0)||i("Function.prototype.apply");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!s(n))throw new o("Assertion failed: optional `argumentsList`, if provided, must be a List");return a(e,t,n)}},9143:(e,t,n)=>{"use strict";var r=n(4453),i=n(1924),o=n(9544),s=n(5424),a=n(2475),c=i("String.prototype.charAt"),u=i("String.prototype.charCodeAt");e.exports=function(e,t){if("string"!=typeof e)throw new r("Assertion failed: `string` must be a String");var n=e.length;if(t<0||t>=n)throw new r("Assertion failed: `position` must be >= 0, and < the length of `string`");var i=u(e,t),l=c(e,t),h=o(i),d=s(i);if(!h&&!d)return{"[[CodePoint]]":l,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(d||t+1===n)return{"[[CodePoint]]":l,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var f=u(e,t+1);return s(f)?{"[[CodePoint]]":a(i,f),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":l,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}},7009:(e,t,n)=>{"use strict";var r=n(210),i=n(3464),o=n(4453),s=r("%Promise%",!0),a=n(5613),c=n(8583),u=n(2149),l=n(760),h=n(6167),d=n(401),f=n(866),p=n(8066),m=n(9496),g=n(2733),y=r("%AsyncFromSyncIteratorPrototype%",!0)||{next:function(e){if(!s)throw new i("This environment does not support Promises.");var t=this;m.assert(t,"[[SyncIteratorRecord]]");var n=arguments.length;return new s((function(r){var i,o=m.get(t,"[[SyncIteratorRecord]]");i=n>0?d(o,e):d(o),r(a(i))}))},return:function(){if(!s)throw new i("This environment does not support Promises.");var e=this;m.assert(e,"[[SyncIteratorRecord]]");var t=arguments.length>0,n=t?arguments[0]:void 0;return new s((function(r,i){var s=m.get(e,"[[SyncIteratorRecord]]")["[[Iterator]]"],l=h(s,"return");if(void 0!==l){var d;d=t?c(l,s,[n]):c(l,s),"Object"===p(d)?r(a(d)):c(i,void 0,[new o("Iterator `return` method returned a non-object value.")])}else{var f=u(n,!0);c(r,void 0,[f])}}))},throw:function(){if(!s)throw new i("This environment does not support Promises.");var e=this;m.assert(e,"[[SyncIteratorRecord]]");var t=arguments.length>0,n=t?arguments[0]:void 0;return new s((function(r,i){var s,u=m.get(e,"[[SyncIteratorRecord]]")["[[Iterator]]"],l=h(u,"throw");void 0!==l?(s=t?c(l,u,[n]):c(l,u),"Object"===p(s)?r(a(s)):c(i,void 0,[new o("Iterator `throw` method returned a non-object value.")])):c(i,void 0,[n])}))}};e.exports=function(e){if(!g(e))throw new o("Assertion failed: `syncIteratorRecord` must be an Iterator Record");var t=f(y);return m.set(t,"[[SyncIteratorRecord]]",e),{"[[Iterator]]":t,"[[NextMethod]]":l(t,"next"),"[[Done]]":!1}}},7696:(e,t,n)=>{"use strict";var r=n(4453),i=n(9612),o=n(9503),s=n(8066);e.exports=function(e,t,n){if("Object"!==s(e))throw new r("Assertion failed: Type(O) is not Object");if(!i(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");return o(e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})}},3489:(e,t,n)=>{"use strict";var r=n(4453),i=n(7696),o=n(9612),s=n(8066);e.exports=function(e,t,n){if("Object"!==s(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");if(!i(e,t,n))throw new r("unable to create data property")}},2149:(e,t,n)=>{"use strict";var r=n(4453);e.exports=function(e,t){if("boolean"!=typeof t)throw new r("Assertion failed: Type(done) is not Boolean");return{value:e,done:t}}},5912:(e,t,n)=>{"use strict";var r=n(4453),i=n(1108),o=n(7141);e.exports=function(e){if(void 0!==e&&!i(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return o(e)}},760:(e,t,n)=>{"use strict";var r=n(4453),i=n(631),o=n(9612),s=n(8066);e.exports=function(e,t){if("Object"!==s(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+i(t));return e[t]}},1221:(e,t,n)=>{"use strict";var r=n(210),i=n(4453),o=r("%Symbol.asyncIterator%",!0),s=n(631),a=n(1405)(),c=n(5700),u=n(7009),l=n(3195),h=n(6167),d=n(5577),f=n(7113);e.exports=function(e,t){if("SYNC"!==t&&"ASYNC"!==t)throw new i("Assertion failed: `kind` must be one of 'sync' or 'async', got "+s(t));var n;if("ASYNC"===t&&a&&o&&(n=h(e,o)),void 0===n){var r=f({AdvanceStringIndex:c,GetMethod:h,IsArray:d},e);if("ASYNC"===t){if(void 0===r)throw new i("iterator method is `undefined`");var p=l(e,r);return u(p)}n=r}if(void 0===n)throw new i("iterator method is `undefined`");return l(e,n)}},3195:(e,t,n)=>{"use strict";var r=n(4453),i=n(8583),o=n(760),s=n(7036),a=n(8066);e.exports=function(e,t){if(!s(t))throw new r("method must be a function");var n=i(t,e);if("Object"!==a(n))throw new r("iterator must return an object");return{"[[Iterator]]":n,"[[NextMethod]]":o(n,"next"),"[[Done]]":!1}}},6167:(e,t,n)=>{"use strict";var r=n(4453),i=n(1071),o=n(7036),s=n(9612),a=n(631);e.exports=function(e,t){if(!s(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var n=i(e,t);if(null!=n){if(!o(n))throw new r(a(t)+" is not a function: "+a(n));return n}}},1071:(e,t,n)=>{"use strict";var r=n(4453),i=n(631),o=n(9612);e.exports=function(e,t){if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+i(t));return e[t]}},9270:(e,t,n)=>{"use strict";var r=n(4453),i=n(8824),o=n(1108);e.exports=function(e){if(void 0===e)return!1;if(!o(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return!(!i(e,"[[Get]]")&&!i(e,"[[Set]]"))}},5577:(e,t,n)=>{"use strict";e.exports=n(675)},7036:(e,t,n)=>{"use strict";e.exports=n(5320)},6077:(e,t,n)=>{"use strict";var r=n(4453),i=n(8824),o=n(1108);e.exports=function(e){if(void 0===e)return!1;if(!o(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return!(!i(e,"[[Value]]")&&!i(e,"[[Writable]]"))}},5625:(e,t,n)=>{"use strict";var r=n(210),i=r("%Object.preventExtensions%",!0),o=r("%Object.isExtensible%",!0),s=n(4790);e.exports=i?function(e){return!s(e)&&o(e)}:function(e){return!s(e)}},9448:(e,t,n)=>{"use strict";var r=n(4453),i=n(9270),o=n(6077),s=n(1108);e.exports=function(e){if(void 0===e)return!1;if(!s(e))throw new r("Assertion failed: `Desc` must be a Property Descriptor");return!i(e)&&!o(e)}},9612:e=>{"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},8018:(e,t,n)=>{"use strict";var r=n(4453),i=n(760),o=n(677),s=n(8066);e.exports=function(e){if("Object"!==s(e))throw new r("Assertion failed: Type(iterResult) is not Object");return o(i(e,"done"))}},401:(e,t,n)=>{"use strict";var r=n(4453),i=n(8583),o=n(8066),s=n(2733);e.exports=function(e){if(!s(e))throw new r("Assertion failed: `iteratorRecord` must be an Iterator Record");var t;if(t=arguments.length<2?i(e["[[NextMethod]]"],e["[[Iterator]]"]):i(e["[[NextMethod]]"],e["[[Iterator]]"],[arguments[1]]),"Object"!==o(t))throw new r("iterator next must return an object");return t}},8108:(e,t,n)=>{"use strict";var r=n(4453),i=n(8018),o=n(401),s=n(2733);e.exports=function(e){if(!s(e))throw new r("Assertion failed: `iteratorRecord` must be an Iterator Record");var t=o(e);return!0!==i(t)&&t}},9480:(e,t,n)=>{"use strict";var r=n(4453),i=n(1924)("Array.prototype.push"),o=n(8108),s=n(8409),a=n(2733);e.exports=function(e){if(!a(e))throw new r("Assertion failed: `iteratorRecord` must be an Iterator Record");for(var t=[],n=!0;n;)if(n=o(e)){var c=s(n);i(t,c)}return t}},8409:(e,t,n)=>{"use strict";var r=n(4453),i=n(760),o=n(8066);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: Type(iterResult) is not Object");return i(e,"value")}},9503:(e,t,n)=>{"use strict";var r=n(7296),i=n(3464),o=n(4453),s=n(1108),a=n(9270),c=n(5625),u=n(9612),l=n(9221),h=n(5095),d=n(8066),f=n(7613);e.exports=function(e,t,n){if("Object"!==d(e))throw new o("Assertion failed: O must be an Object");if(!u(t))throw new o("Assertion failed: P must be a Property Key");if(!s(n))throw new o("Assertion failed: Desc must be a Property Descriptor");if(!r){if(a(n))throw new i("This environment does not support accessor property descriptors.");var p=!(t in e)&&n["[[Writable]]"]&&n["[[Enumerable]]"]&&n["[[Configurable]]"]&&"[[Value]]"in n,m=t in e&&(!("[[Configurable]]"in n)||n["[[Configurable]]"])&&(!("[[Enumerable]]"in n)||n["[[Enumerable]]"])&&(!("[[Writable]]"in n)||n["[[Writable]]"])&&"[[Value]]"in n;if(p||m)return e[t]=n["[[Value]]"],h(e[t],n["[[Value]]"]);throw new i("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var g=r(e,t),y=g&&l(g),_=c(e);return f(e,t,_,n,y)}},9927:(e,t,n)=>{"use strict";var r=n(4453),i=n(5693),o=n(8066);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: O must be an Object");if(!i)throw new r("This environment does not support fetching prototypes.");return i(e)}},866:(e,t,n)=>{"use strict";var r=n(210)("%Object.create%",!0),i=n(4453),o=n(3464),s=n(5577),a=n(8066),c=n(1069),u=n(9496),l=n(8185)();e.exports=function(e){if(null!==e&&"Object"!==a(e))throw new i("Assertion failed: `proto` must be null or an object");var t,n=arguments.length<2?[]:arguments[1];if(!s(n))throw new i("Assertion failed: `additionalInternalSlotsList` must be an Array");if(r)t=r(e);else if(l)t={__proto__:e};else{if(null===e)throw new o("native Object.create support is required to create null objects");var h=function(){};h.prototype=e,t=new h}return n.length>0&&c(n,(function(e){u.set(t,e,void 0)})),t}},9314:(e,t,n)=>{"use strict";var r=n(4453),i=n(2105),o=n(9927);e.exports=function(e,t){if("object"!=typeof t)throw new r("Assertion failed: V must be Object or Null");try{i(e,t)}catch(e){return!1}return o(e)===t}},9970:(e,t,n)=>{"use strict";var r=n(210),i=n(5559),o=n(3464),s=r("%Promise.resolve%",!0),a=s&&i(s);e.exports=function(e,t){if(!a)throw new o("This environment does not support Promises.");return a(e,t)}},5095:(e,t,n)=>{"use strict";var r=n(9086);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:r(e)&&r(t)}},677:e=>{"use strict";e.exports=function(e){return!!e}},9221:(e,t,n)=>{"use strict";var r=n(8824),i=n(4453),o=n(8066),s=n(677),a=n(7036);e.exports=function(e){if("Object"!==o(e))throw new i("ToPropertyDescriptor requires an object");var t={};if(r(e,"enumerable")&&(t["[[Enumerable]]"]=s(e.enumerable)),r(e,"configurable")&&(t["[[Configurable]]"]=s(e.configurable)),r(e,"value")&&(t["[[Value]]"]=e.value),r(e,"writable")&&(t["[[Writable]]"]=s(e.writable)),r(e,"get")){var n=e.get;if(void 0!==n&&!a(n))throw new i("getter must be a function");t["[[Get]]"]=n}if(r(e,"set")){var c=e.set;if(void 0!==c&&!a(c))throw new i("setter must be a function");t["[[Set]]"]=c}if((r(t,"[[Get]]")||r(t,"[[Set]]"))&&(r(t,"[[Value]]")||r(t,"[[Writable]]")))throw new i("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},8066:(e,t,n)=>{"use strict";var r=n(3951);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":r(e)}},2475:(e,t,n)=>{"use strict";var r=n(210),i=n(4453),o=r("%String.fromCharCode%"),s=n(9544),a=n(5424);e.exports=function(e,t){if(!s(e)||!a(t))throw new i("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return o(e)+o(t)}},7613:(e,t,n)=>{"use strict";var r=n(4453),i=n(3682),o=n(9474),s=n(1108),a=n(5912),c=n(9270),u=n(6077),l=n(9448),h=n(9612),d=n(5095),f=n(8066);e.exports=function(e,t,n,p,m){var g,y,_=f(e);if("Undefined"!==_&&"Object"!==_)throw new r("Assertion failed: O must be undefined or an Object");if(!h(t))throw new r("Assertion failed: P must be a Property Key");if("boolean"!=typeof n)throw new r("Assertion failed: extensible must be a Boolean");if(!s(p))throw new r("Assertion failed: Desc must be a Property Descriptor");if(void 0!==m&&!s(m))throw new r("Assertion failed: current must be a Property Descriptor, or undefined");if(void 0===m)return!!n&&("Undefined"===_||(c(p)?i(u,d,a,e,t,p):i(u,d,a,e,t,{"[[Configurable]]":!!p["[[Configurable]]"],"[[Enumerable]]":!!p["[[Enumerable]]"],"[[Value]]":p["[[Value]]"],"[[Writable]]":!!p["[[Writable]]"]})));if(!o({IsAccessorDescriptor:c,IsDataDescriptor:u},m))throw new r("`current`, when present, must be a fully populated and valid Property Descriptor");if(!m["[[Configurable]]"]){if("[[Configurable]]"in p&&p["[[Configurable]]"])return!1;if("[[Enumerable]]"in p&&!d(p["[[Enumerable]]"],m["[[Enumerable]]"]))return!1;if(!l(p)&&!d(c(p),c(m)))return!1;if(c(m)){if("[[Get]]"in p&&!d(p["[[Get]]"],m["[[Get]]"]))return!1;if("[[Set]]"in p&&!d(p["[[Set]]"],m["[[Set]]"]))return!1}else if(!m["[[Writable]]"]){if("[[Writable]]"in p&&p["[[Writable]]"])return!1;if("[[Value]]"in p&&!d(p["[[Value]]"],m["[[Value]]"]))return!1}}return"Undefined"===_||(u(m)&&c(p)?(g=("[[Configurable]]"in p?p:m)["[[Configurable]]"],y=("[[Enumerable]]"in p?p:m)["[[Enumerable]]"],i(u,d,a,e,t,{"[[Configurable]]":!!g,"[[Enumerable]]":!!y,"[[Get]]":("[[Get]]"in p?p:m)["[[Get]]"],"[[Set]]":("[[Set]]"in p?p:m)["[[Set]]"]})):c(m)&&u(p)?(g=("[[Configurable]]"in p?p:m)["[[Configurable]]"],y=("[[Enumerable]]"in p?p:m)["[[Enumerable]]"],i(u,d,a,e,t,{"[[Configurable]]":!!g,"[[Enumerable]]":!!y,"[[Value]]":("[[Value]]"in p?p:m)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in p?p:m)["[[Writable]]"]})):i(u,d,a,e,t,p))}},3951:e=>{"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},3682:(e,t,n)=>{"use strict";var r=n(1044),i=n(4429),o=r.hasArrayLengthDefineBug(),s=o&&n(675),a=n(1924)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,n,r,c,u){if(!i){if(!e(u))return!1;if(!u["[[Configurable]]"]||!u["[[Writable]]"])return!1;if(c in r&&a(r,c)!==!!u["[[Enumerable]]"])return!1;var l=u["[[Value]]"];return r[c]=l,t(r[c],l)}return o&&"length"===c&&"[[Value]]"in u&&s(r)&&r.length!==u["[[Value]]"]?(r.length=u["[[Value]]"],r.length===u["[[Value]]"]):(i(r,c,n(u)),!0)}},675:(e,t,n)=>{"use strict";var r=n(210)("%Array%"),i=!r.isArray&&n(1924)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===i(e)}},1069:e=>{"use strict";e.exports=function(e,t){for(var n=0;n<e.length;n+=1)t(e[n],n,e)}},7141:e=>{"use strict";e.exports=function(e){if(void 0===e)return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}},7113:(e,t,n)=>{"use strict";var r=n(1405)(),i=n(210),o=n(1924),s=n(9981),a=i("%Symbol.iterator%",!0),c=o("String.prototype.slice"),u=i("%String%");e.exports=function(e,t){var n;return r?n=e.GetMethod(t,a):e.IsArray(t)?n=function(){var e=-1,t=this;return{next:function(){return{done:(e+=1)>=t.length,value:t[e]}}}}:s(t)&&(n=function(){var n=0;return{next:function(){var r=e.AdvanceStringIndex(u(t),n,!0),i=c(t,n,r);return n=r,{done:r>t.length,value:i}}}}),n}},5693:(e,t,n)=>{"use strict";var r=n(210)("%Object.getPrototypeOf%",!0),i=n(8185)();e.exports=r||(i?function(e){return e.__proto__}:null)},2633:(e,t,n)=>{"use strict";var r=n(9086);e.exports=function(e){return("number"==typeof e||"bigint"==typeof e)&&!r(e)&&e!==1/0&&e!==-1/0}},9474:(e,t,n)=>{"use strict";var r=n(1108);e.exports=function(e,t){return r(t)&&"object"==typeof t&&"[[Enumerable]]"in t&&"[[Configurable]]"in t&&(e.IsAccessorDescriptor(t)||e.IsDataDescriptor(t))}},1338:(e,t,n)=>{"use strict";var r=n(210),i=r("%Math.abs%"),o=r("%Math.floor%"),s=n(9086),a=n(2633);e.exports=function(e){if("number"!=typeof e||s(e)||!a(e))return!1;var t=i(e);return o(t)===t}},9544:e=>{"use strict";e.exports=function(e){return"number"==typeof e&&e>=55296&&e<=56319}},9086:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},4790:e=>{"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},5424:e=>{"use strict";e.exports=function(e){return"number"==typeof e&&e>=56320&&e<=57343}},1645:e=>{"use strict";e.exports=Number.MAX_SAFE_INTEGER||9007199254740991},2733:(e,t,n)=>{"use strict";var r=n(8824);e.exports=function(e){return!!e&&"object"==typeof e&&r(e,"[[Iterator]]")&&r(e,"[[NextMethod]]")&&"function"==typeof e["[[NextMethod]]"]&&r(e,"[[Done]]")&&"boolean"==typeof e["[[Done]]"]}},1108:(e,t,n)=>{"use strict";var r=n(4453),i=n(8824),o={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};e.exports=function(e){if(!e||"object"!=typeof e)return!1;for(var t in e)if(i(e,t)&&!o[t])return!1;var n=i(e,"[[Value]]")||i(e,"[[Writable]]"),s=i(e,"[[Get]]")||i(e,"[[Set]]");if(n&&s)throw new r("Property Descriptors may not be both accessor and data descriptors");return!0}},2105:(e,t,n)=>{"use strict";var r=n(210)("%Object.setPrototypeOf%",!0),i=n(8185)();e.exports=r||(i?function(e,t){return e.__proto__=t,e}:null)},9978:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Glob=void 0;const r=n(5152),i=n(2917),o=n(1041),s=n(1087),a=n(553),c="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class u{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,o.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth="number"==typeof t.maxDepth?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&void 0!==this.absolute)throw new Error("cannot set absolute and withFileTypes:true");if("string"==typeof e&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(e=e.map((e=>e.replace(/\\/g,"/")))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map((e=>e.includes("/")?e:`./**/${e}`))}if(this.pattern=e,this.platform=t.platform||c,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,void 0!==t.nocase&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const e="win32"===t.platform?i.PathScurryWin32:"darwin"===t.platform?i.PathScurryDarwin:t.platform?i.PathScurryPosix:i.PathScurry;this.scurry=new e(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;const n="darwin"===this.platform||"win32"===this.platform,a={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},u=this.pattern.map((e=>new r.Minimatch(e,a))),[l,h]=u.reduce(((e,t)=>(e[0].push(...t.set),e[1].push(...t.globParts),e)),[[],[]]);this.patterns=l.map(((e,t)=>{const n=h[t];if(!n)throw new Error("invalid pattern object");return new s.Pattern(e,n,0,this.platform)}))}async walk(){return[...await new a.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new a.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new a.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new a.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}t.Glob=u},9808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasMagic=void 0;const r=n(5152);t.hasMagic=(e,t={})=>{Array.isArray(e)||(e=[e]);for(const n of e)if(new r.Minimatch(n,t).hasMagic())return!0;return!1}},314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ignore=void 0;const r=n(5152),i=n(1087),o="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";t.Ignore=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:t,nocase:n,noext:s,noglobstar:a,platform:c=o}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];const u={dot:!0,nobrace:t,nocase:n,noext:s,noglobstar:a,optimizationLevel:2,platform:c,nocomment:!0,nonegate:!0};for(const t of e){const e=new r.Minimatch(t,u);for(let t=0;t<e.set.length;t++){const n=e.set[t],o=e.globParts[t];if(!n||!o)throw new Error("invalid pattern object");for(;"."===n[0]&&"."===o[0];)n.shift(),o.shift();const s=new i.Pattern(n,o,0,c),a=new r.Minimatch(s.globString(),u),l="**"===o[o.length-1],h=s.isAbsolute();h?this.absolute.push(a):this.relative.push(a),l&&(h?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}}ignored(e){const t=e.fullpath(),n=`${t}/`,r=e.relative()||".",i=`${r}/`;for(const e of this.relative)if(e.match(r)||e.match(i))return!0;for(const e of this.absolute)if(e.match(t)||e.match(n))return!0;return!1}childrenIgnored(e){const t=e.fullpath()+"/",n=(e.relative()||".")+"/";for(const e of this.relativeChildren)if(e.match(n))return!0;for(const e of this.absoluteChildren)if(e.match(t))return!0;return!1}}},7824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.glob=t.hasMagic=t.Glob=t.unescape=t.escape=t.sync=t.iterate=t.iterateSync=t.stream=t.streamSync=t.globIterate=t.globIterateSync=t.globSync=t.globStream=t.globStreamSync=void 0;const r=n(5152),i=n(9978),o=n(9808);function s(e,t={}){return new i.Glob(e,t).streamSync()}function a(e,t={}){return new i.Glob(e,t).stream()}function c(e,t={}){return new i.Glob(e,t).walkSync()}async function u(e,t={}){return new i.Glob(e,t).walk()}function l(e,t={}){return new i.Glob(e,t).iterateSync()}function h(e,t={}){return new i.Glob(e,t).iterate()}t.globStreamSync=s,t.globStream=a,t.globSync=c,t.globIterateSync=l,t.globIterate=h,t.streamSync=s,t.stream=Object.assign(a,{sync:s}),t.iterateSync=l,t.iterate=Object.assign(h,{sync:l}),t.sync=Object.assign(c,{stream:s,iterate:l});var d=n(5152);Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return d.escape}}),Object.defineProperty(t,"unescape",{enumerable:!0,get:function(){return d.unescape}});var f=n(9978);Object.defineProperty(t,"Glob",{enumerable:!0,get:function(){return f.Glob}});var p=n(9808);Object.defineProperty(t,"hasMagic",{enumerable:!0,get:function(){return p.hasMagic}}),t.glob=Object.assign(u,{glob:u,globSync:c,sync:t.sync,globStream:a,stream:t.stream,globStreamSync:s,streamSync:t.streamSync,globIterate:h,iterate:t.iterate,globIterateSync:l,iterateSync:t.iterateSync,Glob:i.Glob,hasMagic:o.hasMagic,escape:r.escape,unescape:r.unescape}),t.glob.glob=t.glob},1087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pattern=void 0;const r=n(5152);class i{#e;#t;#n;length;#r;#i;#o;#s;#a;#c;#u=!0;constructor(e,t,n,r){if(!(e.length>=1))throw new TypeError("empty pattern list");if(!(t.length>=1))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#n=n,this.#r=r,0===this.#n)if(this.isUNC()){const[e,t,n,r,...i]=this.#e,[o,s,a,c,...u]=this.#t;""===i[0]&&(i.shift(),u.shift());const l=[e,t,n,r,""].join("/"),h=[o,s,a,c,""].join("/");this.#e=[l,...i],this.#t=[h,...u],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){const[e,...t]=this.#e,[n,...r]=this.#t;""===t[0]&&(t.shift(),r.shift());const i=e+"/",o=n+"/";this.#e=[i,...t],this.#t=[o,...r],this.length=this.#e.length}}pattern(){return this.#e[this.#n]}isString(){return"string"==typeof this.#e[this.#n]}isGlobstar(){return this.#e[this.#n]===r.GLOBSTAR}isRegExp(){return this.#e[this.#n]instanceof RegExp}globString(){return this.#o=this.#o||(0===this.#n?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#n).join("/"))}hasMore(){return this.length>this.#n+1}rest(){return void 0!==this.#i?this.#i:this.hasMore()?(this.#i=new i(this.#e,this.#t,this.#n+1,this.#r),this.#i.#c=this.#c,this.#i.#a=this.#a,this.#i.#s=this.#s,this.#i):this.#i=null}isUNC(){const e=this.#e;return void 0!==this.#a?this.#a:this.#a="win32"===this.#r&&0===this.#n&&""===e[0]&&""===e[1]&&"string"==typeof e[2]&&!!e[2]&&"string"==typeof e[3]&&!!e[3]}isDrive(){const e=this.#e;return void 0!==this.#s?this.#s:this.#s="win32"===this.#r&&0===this.#n&&this.length>1&&"string"==typeof e[0]&&/^[a-z]:$/i.test(e[0])}isAbsolute(){const e=this.#e;return void 0!==this.#c?this.#c:this.#c=""===e[0]&&e.length>1||this.isDrive()||this.isUNC()}root(){const e=this.#e[0];return"string"==typeof e&&this.isAbsolute()&&0===this.#n?e:""}checkFollowGlobstar(){return!(0===this.#n||!this.isGlobstar()||!this.#u)}markFollowGlobstar(){return!(0===this.#n||!this.isGlobstar()||!this.#u||(this.#u=!1,0))}}t.Pattern=i},6441:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Processor=t.SubWalks=t.MatchRecord=t.HasWalkedCache=void 0;const r=n(5152);class i{store;constructor(e=new Map){this.store=e}copy(){return new i(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){const n=e.fullpath(),r=this.store.get(n);r?r.add(t.globString()):this.store.set(n,new Set([t.globString()]))}}t.HasWalkedCache=i;class o{store=new Map;add(e,t,n){const r=(t?2:0)|(n?1:0),i=this.store.get(e);this.store.set(e,void 0===i?r:r&i)}entries(){return[...this.store.entries()].map((([e,t])=>[e,!!(2&t),!!(1&t)]))}}t.MatchRecord=o;class s{store=new Map;add(e,t){if(!e.canReaddir())return;const n=this.store.get(e);n?n.find((e=>e.globString()===t.globString()))||n.push(t):this.store.set(e,[t])}get(e){const t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map((e=>[e,this.store.get(e)]))}keys(){return[...this.store.keys()].filter((e=>e.canReaddir()))}}t.SubWalks=s;class a{hasWalkedCache;matches=new o;subwalks=new s;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new i}processPatterns(e,t){this.patterns=t;const n=t.map((t=>[e,t]));for(let[e,t]of n){this.hasWalkedCache.storeWalked(e,t);const n=t.root(),i=t.isAbsolute()&&!1!==this.opts.absolute;if(n){e=e.resolve("/"===n&&void 0!==this.opts.root?this.opts.root:n);const r=t.rest();if(!r){this.matches.add(e,!0,!1);continue}t=r}if(e.isENOENT())continue;let o,s,a=!1;for(;"string"==typeof(o=t.pattern())&&(s=t.rest());){const n=e.resolve(o);e=n,t=s,a=!0}if(o=t.pattern(),s=t.rest(),a){if(this.hasWalkedCache.hasWalked(e,t))continue;this.hasWalkedCache.storeWalked(e,t)}if("string"!=typeof o)if(o===r.GLOBSTAR){(!e.isSymbolicLink()||this.follow||t.checkFollowGlobstar())&&this.subwalks.add(e,t);const n=s?.pattern(),r=s?.rest();if(s&&(""!==n&&"."!==n||r)){if(".."===n){const t=e.parent||e;r?this.hasWalkedCache.hasWalked(t,r)||this.subwalks.add(t,r):this.matches.add(t,i,!0)}}else this.matches.add(e,i,""===n||"."===n)}else o instanceof RegExp&&this.subwalks.add(e,t);else{const t=".."===o||""===o||"."===o;this.matches.add(e.resolve(o),i,t)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new a(this.opts,this.hasWalkedCache)}filterEntries(e,t){const n=this.subwalks.get(e),i=this.child();for(const e of t)for(const t of n){const n=t.isAbsolute(),o=t.pattern(),s=t.rest();o===r.GLOBSTAR?i.testGlobstar(e,t,s,n):o instanceof RegExp?i.testRegExp(e,o,s,n):i.testString(e,o,s,n)}return i}testGlobstar(e,t,n,r){if(!this.dot&&e.name.startsWith(".")||(t.hasMore()||this.matches.add(e,r,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(n&&t.checkFollowGlobstar()?this.subwalks.add(e,n):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),n){const t=n.pattern();if("string"==typeof t&&".."!==t&&""!==t&&"."!==t)this.testString(e,t,n.rest(),r);else if(".."===t){const t=e.parent||e;this.subwalks.add(t,n)}else t instanceof RegExp&&this.testRegExp(e,t,n.rest(),r)}}testRegExp(e,t,n,r){t.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,r,!1))}testString(e,t,n,r){e.isNamed(t)&&(n?this.subwalks.add(e,n):this.matches.add(e,r,!1))}}t.Processor=a},553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobStream=t.GlobWalker=t.GlobUtil=void 0;const r=n(1938),i=n(314),o=n(6441);class s{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#l=[];#h;#d;signal;maxDepth;constructor(e,t,n){this.patterns=e,this.path=t,this.opts=n,this.#d=n.posix||"win32"!==n.platform?"/":"\\",n.ignore&&(this.#h=((e,t)=>"string"==typeof e?new i.Ignore([e],t):Array.isArray(e)?new i.Ignore(e,t):e)(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",(()=>{this.#l.length=0})))}#f(e){return this.seen.has(e)||!!this.#h?.ignored?.(e)}#p(e){return!!this.#h?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;let e;for(this.paused=!1;!this.paused&&(e=this.#l.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#l.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}const r=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){const e=await r.realpath();e&&(e.isUnknown()||this.opts.stat)&&await e.lstat()}return this.matchCheckTest(r,t)}matchCheckTest(e,t){return!e||!(this.maxDepth===1/0||e.depth()<=this.maxDepth)||t&&!e.canReaddir()||this.opts.nodir&&e.isDirectory()||this.opts.nodir&&this.opts.follow&&e.isSymbolicLink()&&e.realpathCached()?.isDirectory()||this.#f(e)?void 0:e}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}const r=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){const e=r.realpathSync();e&&(e?.isUnknown()||this.opts.stat)&&e.lstatSync()}return this.matchCheckTest(r,t)}matchFinish(e,t){if(this.#f(e))return;const n=void 0===this.opts.absolute?t:this.opts.absolute;this.seen.add(e);const r=this.opts.mark&&e.isDirectory()?this.#d:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){const t=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(t+r)}else{const t=this.opts.posix?e.relativePosix():e.relative(),n=this.opts.dotRelative&&!t.startsWith(".."+this.#d)?"."+this.#d:"";this.matchEmit(t?n+t+r:"."+r)}}async match(e,t,n){const r=await this.matchCheck(e,n);r&&this.matchFinish(r,t)}matchSync(e,t,n){const r=this.matchCheckSync(e,n);r&&this.matchFinish(r,t)}walkCB(e,t,n){this.signal?.aborted&&n(),this.walkCB2(e,t,new o.Processor(this.opts),n)}walkCB2(e,t,n,r){if(this.#p(e))return r();if(this.signal?.aborted&&r(),this.paused)return void this.onResume((()=>this.walkCB2(e,t,n,r)));n.processPatterns(e,t);let i=1;const o=()=>{0==--i&&r()};for(const[e,t,r]of n.matches.entries())this.#f(e)||(i++,this.match(e,t,r).then((()=>o())));for(const e of n.subwalkTargets()){if(this.maxDepth!==1/0&&e.depth()>=this.maxDepth)continue;i++;const t=e.readdirCached();e.calledReaddir()?this.walkCB3(e,t,n,o):e.readdirCB(((t,r)=>this.walkCB3(e,r,n,o)),!0)}o()}walkCB3(e,t,n,r){n=n.filterEntries(e,t);let i=1;const o=()=>{0==--i&&r()};for(const[e,t,r]of n.matches.entries())this.#f(e)||(i++,this.match(e,t,r).then((()=>o())));for(const[e,t]of n.subwalks.entries())i++,this.walkCB2(e,t,n.child(),o);o()}walkCBSync(e,t,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,t,new o.Processor(this.opts),n)}walkCB2Sync(e,t,n,r){if(this.#p(e))return r();if(this.signal?.aborted&&r(),this.paused)return void this.onResume((()=>this.walkCB2Sync(e,t,n,r)));n.processPatterns(e,t);let i=1;const o=()=>{0==--i&&r()};for(const[e,t,r]of n.matches.entries())this.#f(e)||this.matchSync(e,t,r);for(const e of n.subwalkTargets()){if(this.maxDepth!==1/0&&e.depth()>=this.maxDepth)continue;i++;const t=e.readdirSync();this.walkCB3Sync(e,t,n,o)}o()}walkCB3Sync(e,t,n,r){n=n.filterEntries(e,t);let i=1;const o=()=>{0==--i&&r()};for(const[e,t,r]of n.matches.entries())this.#f(e)||this.matchSync(e,t,r);for(const[e,t]of n.subwalks.entries())i++,this.walkCB2Sync(e,t,n.child(),o);o()}}t.GlobUtil=s,t.GlobWalker=class extends s{matches;constructor(e,t,n){super(e,t,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise(((e,t)=>{this.walkCB(this.path,this.patterns,(()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)}))})),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason})),this.matches}},t.GlobStream=class extends s{results;constructor(e,t,n){super(e,t,n),this.results=new r.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",(()=>this.resume())),this.results.on("resume",(()=>this.resume()))}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){const e=this.path;return e.isUnknown()?e.lstat().then((()=>{this.walkCB(e,this.patterns,(()=>this.results.end()))})):this.walkCB(e,this.patterns,(()=>this.results.end())),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>this.results.end())),this.results}}},3319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertValidPattern=void 0,t.assertValidPattern=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")}},3548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AST=void 0;const r=n(6711),i=n(2027),o=new Set(["!","?","+","*","@"]),s=e=>o.has(e),a="(?!\\.)",c=new Set(["[","."]),u=new Set(["..","."]),l=new Set("().*{}+?[]^$\\!"),h="[^/]*?",d="[^/]+?";class f{type;#m;#g;#y=!1;#_=[];#v;#E;#w;#b=!1;#T;#S;#A=!1;constructor(e,t,n={}){this.type=e,e&&(this.#g=!0),this.#v=t,this.#m=this.#v?this.#v.#m:this,this.#T=this.#m===this?n:this.#m.#T,this.#w=this.#m===this?[]:this.#m.#w,"!"!==e||this.#m.#b||this.#w.push(this),this.#E=this.#v?this.#v.#_.length:0}get hasMagic(){if(void 0!==this.#g)return this.#g;for(const e of this.#_)if("string"!=typeof e&&(e.type||e.hasMagic))return this.#g=!0;return this.#g}toString(){return void 0!==this.#S?this.#S:this.type?this.#S=this.type+"("+this.#_.map((e=>String(e))).join("|")+")":this.#S=this.#_.map((e=>String(e))).join("")}#O(){if(this!==this.#m)throw new Error("should only call on root");if(this.#b)return this;let e;for(this.toString(),this.#b=!0;e=this.#w.pop();){if("!"!==e.type)continue;let t=e,n=t.#v;for(;n;){for(let r=t.#E+1;!n.type&&r<n.#_.length;r++)for(const t of e.#_){if("string"==typeof t)throw new Error("string part in extglob AST??");t.copyIn(n.#_[r])}t=n,n=t.#v}}return this}push(...e){for(const t of e)if(""!==t){if("string"!=typeof t&&!(t instanceof f&&t.#v===this))throw new Error("invalid part: "+t);this.#_.push(t)}}toJSON(){const e=null===this.type?this.#_.slice().map((e=>"string"==typeof e?e:e.toJSON())):[this.type,...this.#_.map((e=>e.toJSON()))];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#m||this.#m.#b&&"!"===this.#v?.type)&&e.push({}),e}isStart(){if(this.#m===this)return!0;if(!this.#v?.isStart())return!1;if(0===this.#E)return!0;const e=this.#v;for(let t=0;t<this.#E;t++){const n=e.#_[t];if(!(n instanceof f&&"!"===n.type))return!1}return!0}isEnd(){if(this.#m===this)return!0;if("!"===this.#v?.type)return!0;if(!this.#v?.isEnd())return!1;if(!this.type)return this.#v?.isEnd();const e=this.#v?this.#v.#_.length:0;return this.#E===e-1}copyIn(e){"string"==typeof e?this.push(e):this.push(e.clone(this))}clone(e){const t=new f(this.type,e);for(const e of this.#_)t.copyIn(e);return t}static#C(e,t,n,r){let i=!1,o=!1,a=-1,c=!1;if(null===t.type){let u=n,l="";for(;u<e.length;){const n=e.charAt(u++);if(i||"\\"===n)i=!i,l+=n;else if(o)u===a+1?"^"!==n&&"!"!==n||(c=!0):"]"!==n||u===a+2&&c||(o=!1),l+=n;else if("["!==n)if(r.noext||!s(n)||"("!==e.charAt(u))l+=n;else{t.push(l),l="";const i=new f(n,t);u=f.#C(e,i,u,r),t.push(i)}else o=!0,a=u,c=!1,l+=n}return t.push(l),u}let u=n+1,l=new f(null,t);const h=[];let d="";for(;u<e.length;){const n=e.charAt(u++);if(i||"\\"===n)i=!i,d+=n;else if(o)u===a+1?"^"!==n&&"!"!==n||(c=!0):"]"!==n||u===a+2&&c||(o=!1),d+=n;else if("["!==n)if(s(n)&&"("===e.charAt(u)){l.push(d),d="";const t=new f(n,l);l.push(t),u=f.#C(e,t,u,r)}else if("|"!==n){if(")"===n)return""===d&&0===t.#_.length&&(t.#A=!0),l.push(d),d="",t.push(...h,l),u;d+=n}else l.push(d),d="",h.push(l),l=new f(null,t);else o=!0,a=u,c=!1,d+=n}return t.type=null,t.#g=void 0,t.#_=[e.substring(n-1)],u}static fromGlob(e,t={}){const n=new f(null,void 0,t);return f.#C(e,n,0,t),n}toMMPattern(){if(this!==this.#m)return this.#m.toMMPattern();const e=this.toString(),[t,n,r,i]=this.toRegExpSource();if(!(r||this.#g||this.#T.nocase&&!this.#T.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;const o=(this.#T.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${t}$`,o),{_src:t,_glob:e})}get options(){return this.#T}toRegExpSource(e){const t=e??!!this.#T.dot;if(this.#m===this&&this.#O(),!this.type){const n=this.isStart()&&this.isEnd(),r=this.#_.map((t=>{const[r,i,o,s]="string"==typeof t?f.#I(t,this.#g,n):t.toRegExpSource(e);return this.#g=this.#g||o,this.#y=this.#y||s,r})).join("");let o="";if(this.isStart()&&"string"==typeof this.#_[0]&&(1!==this.#_.length||!u.has(this.#_[0]))){const n=c,i=t&&n.has(r.charAt(0))||r.startsWith("\\.")&&n.has(r.charAt(2))||r.startsWith("\\.\\.")&&n.has(r.charAt(4)),s=!t&&!e&&n.has(r.charAt(0));o=i?"(?!(?:^|/)\\.\\.?(?:$|/))":s?a:""}let s="";return this.isEnd()&&this.#m.#b&&"!"===this.#v?.type&&(s="(?:$|\\/)"),[o+r+s,(0,i.unescape)(r),this.#g=!!this.#g,this.#y]}const n="*"===this.type||"+"===this.type,r="!"===this.type?"(?:(?!(?:":"(?:";let o=this.#R(t);if(this.isStart()&&this.isEnd()&&!o&&"!"!==this.type){const e=this.toString();return this.#_=[e],this.type=null,this.#g=void 0,[e,(0,i.unescape)(this.toString()),!1,!1]}let s=!n||e||t?"":this.#R(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";return l="!"===this.type&&this.#A?(this.isStart()&&!t?a:"")+d:r+o+("!"===this.type?"))"+(!this.isStart()||t||e?"":a)+h+")":"@"===this.type?")":"?"===this.type?")?":"+"===this.type&&s?")":"*"===this.type&&s?")?":`)${this.type}`),[l,(0,i.unescape)(o),this.#g=!!this.#g,this.#y]}#R(e){return this.#_.map((t=>{if("string"==typeof t)throw new Error("string type in extglob ast??");const[n,r,i,o]=t.toRegExpSource(e);return this.#y=this.#y||o,n})).filter((e=>!(this.isStart()&&this.isEnd()&&!e))).join("|")}static#I(e,t,n=!1){let o=!1,s="",a=!1;for(let i=0;i<e.length;i++){const c=e.charAt(i);if(o)o=!1,s+=(l.has(c)?"\\":"")+c;else if("\\"!==c){if("["===c){const[n,o,c,u]=(0,r.parseClass)(e,i);if(c){s+=n,a=a||o,i+=c-1,t=t||u;continue}}"*"!==c?"?"!==c?s+=c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(s+="[^/]",t=!0):(s+=n&&"*"===e?d:h,t=!0)}else i===e.length-1?s+="\\\\":o=!0}return[s,(0,i.unescape)(e),!!t,a]}}t.AST=f},6711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClass=void 0;const n={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},r=e=>e.replace(/[[\]\\-]/g,"\\$&"),i=e=>e.join("");t.parseClass=(e,t)=>{const o=t;if("["!==e.charAt(o))throw new Error("not in a brace expression");const s=[],a=[];let c=o+1,u=!1,l=!1,h=!1,d=!1,f=o,p="";e:for(;c<e.length;){const t=e.charAt(c);if("!"!==t&&"^"!==t||c!==o+1){if("]"===t&&u&&!h){f=c+1;break}if(u=!0,"\\"!==t||h){if("["===t&&!h)for(const[t,[r,i,u]]of Object.entries(n))if(e.startsWith(t,c)){if(p)return["$.",!1,e.length-o,!0];c+=t.length,u?a.push(r):s.push(r),l=l||i;continue e}h=!1,p?(t>p?s.push(r(p)+"-"+r(t)):t===p&&s.push(r(t)),p="",c++):e.startsWith("-]",c+1)?(s.push(r(t+"-")),c+=2):e.startsWith("-",c+1)?(p=t,c+=2):(s.push(r(t)),c++)}else h=!0,c++}else d=!0,c++}if(f<c)return["",!1,0,!1];if(!s.length&&!a.length)return["$.",!1,e.length-o,!0];if(0===a.length&&1===s.length&&/^\\?.$/.test(s[0])&&!d){return[(m=2===s[0].length?s[0].slice(-1):s[0],m.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,f-o,!1]}var m;const g="["+(d?"^":"")+i(s)+"]",y="["+(d?"":"^")+i(a)+"]";return[s.length&&a.length?"("+g+"|"+y+")":s.length?g:y,l,f-o,!0]}},9789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escape=void 0,t.escape=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&")},5152:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unescape=t.escape=t.AST=t.Minimatch=t.match=t.makeRe=t.braceExpand=t.defaults=t.filter=t.GLOBSTAR=t.sep=t.minimatch=void 0;const i=r(n(5146)),o=n(3319),s=n(3548),a=n(9789),c=n(2027);t.minimatch=(e,t,n={})=>((0,o.assertValidPattern)(t),!(!n.nocomment&&"#"===t.charAt(0))&&new D(t,n).match(e));const u=/^\*+([^+@!?\*\[\(]*)$/,l=e=>t=>!t.startsWith(".")&&t.endsWith(e),h=e=>t=>t.endsWith(e),d=e=>(e=e.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)),f=e=>(e=e.toLowerCase(),t=>t.toLowerCase().endsWith(e)),p=/^\*+\.\*+$/,m=e=>!e.startsWith(".")&&e.includes("."),g=e=>"."!==e&&".."!==e&&e.includes("."),y=/^\.\*+$/,_=e=>"."!==e&&".."!==e&&e.startsWith("."),v=/^\*+$/,E=e=>0!==e.length&&!e.startsWith("."),w=e=>0!==e.length&&"."!==e&&".."!==e,b=/^\?+([^+@!?\*\[\(]*)?$/,T=([e,t=""])=>{const n=C([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},S=([e,t=""])=>{const n=I([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},A=([e,t=""])=>{const n=I([e]);return t?e=>n(e)&&e.endsWith(t):n},O=([e,t=""])=>{const n=C([e]);return t?e=>n(e)&&e.endsWith(t):n},C=([e])=>{const t=e.length;return e=>e.length===t&&!e.startsWith(".")},I=([e])=>{const t=e.length;return e=>e.length===t&&"."!==e&&".."!==e},R="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";t.sep="win32"===R?"\\":"/",t.minimatch.sep=t.sep,t.GLOBSTAR=Symbol("globstar **"),t.minimatch.GLOBSTAR=t.GLOBSTAR,t.filter=(e,n={})=>r=>(0,t.minimatch)(r,e,n),t.minimatch.filter=t.filter;const N=(e,t={})=>Object.assign({},e,t);t.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return t.minimatch;const n=t.minimatch;return Object.assign(((t,r,i={})=>n(t,r,N(e,i))),{Minimatch:class extends n.Minimatch{constructor(t,n={}){super(t,N(e,n))}static defaults(t){return n.defaults(N(e,t)).Minimatch}},AST:class extends n.AST{constructor(t,n,r={}){super(t,n,N(e,r))}static fromGlob(t,r={}){return n.AST.fromGlob(t,N(e,r))}},unescape:(t,r={})=>n.unescape(t,N(e,r)),escape:(t,r={})=>n.escape(t,N(e,r)),filter:(t,r={})=>n.filter(t,N(e,r)),defaults:t=>n.defaults(N(e,t)),makeRe:(t,r={})=>n.makeRe(t,N(e,r)),braceExpand:(t,r={})=>n.braceExpand(t,N(e,r)),match:(t,r,i={})=>n.match(t,r,N(e,i)),sep:n.sep,GLOBSTAR:t.GLOBSTAR})},t.minimatch.defaults=t.defaults,t.braceExpand=(e,t={})=>((0,o.assertValidPattern)(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:(0,i.default)(e)),t.minimatch.braceExpand=t.braceExpand,t.makeRe=(e,t={})=>new D(e,t).makeRe(),t.minimatch.makeRe=t.makeRe,t.match=(e,t,n={})=>{const r=new D(t,n);return e=e.filter((e=>r.match(e))),r.options.nonull&&!e.length&&e.push(t),e},t.minimatch.match=t.match;const P=/[?*]|[+@!]\(.*?\)|\[|\]/;class D{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){(0,o.assertValidPattern)(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||R,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==t.windowsNoMagicRoot?t.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if("string"!=typeof t)return!0;return!1}debug(...e){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,this.globSet);const n=this.globSet.map((e=>this.slashSplit(e)));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let r=this.globParts.map(((e,t,n)=>{if(this.isWindows&&this.windowsNoMagicRoot){const t=!(""!==e[0]||""!==e[1]||"?"!==e[2]&&P.test(e[2])||P.test(e[3])),n=/^[a-z]:/i.test(e[0]);if(t)return[...e.slice(0,4),...e.slice(4).map((e=>this.parse(e)))];if(n)return[e[0],...e.slice(1).map((e=>this.parse(e)))]}return e.map((e=>this.parse(e)))}));if(this.debug(this.pattern,r),this.set=r.filter((e=>-1===e.indexOf(!1))),this.isWindows)for(let e=0;e<this.set.length;e++){const t=this.set[e];""===t[0]&&""===t[1]&&"?"===this.globParts[e][2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3])&&(t[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)"**"===e[t][n]&&(e[t][n]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map((e=>{let t=-1;for(;-1!==(t=e.indexOf("**",t+1));){let n=t;for(;"**"===e[n+1];)n++;n!==t&&e.splice(t,n-t)}return e}))}levelOneOptimize(e){return e.map((e=>0===(e=e.reduce(((e,t)=>{const n=e[e.length-1];return"**"===t&&"**"===n?e:".."===t&&n&&".."!==n&&"."!==n&&"**"!==n?(e.pop(),e):(e.push(t),e)}),[])).length?[""]:e))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){const r=e[n];1===n&&""===r&&""===e[0]||"."!==r&&""!==r||(t=!0,e.splice(n,1),n--)}"."!==e[0]||2!==e.length||"."!==e[1]&&""!==e[1]||(t=!0,e.pop())}let n=0;for(;-1!==(n=e.indexOf("..",n+1));){const r=e[n-1];r&&"."!==r&&".."!==r&&"**"!==r&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return 0===e.length?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let r=-1;for(;-1!==(r=n.indexOf("**",r+1));){let i=r;for(;"**"===n[i+1];)i++;i>r&&n.splice(r+1,i-r);let o=n[r+1];const s=n[r+2],a=n[r+3];if(".."!==o)continue;if(!s||"."===s||".."===s||!a||"."===a||".."===a)continue;t=!0,n.splice(r,1);const c=n.slice(0);c[r]="**",e.push(c),r--}if(!this.preserveMultipleSlashes){for(let e=1;e<n.length-1;e++){const r=n[e];1===e&&""===r&&""===n[0]||"."!==r&&""!==r||(t=!0,n.splice(e,1),e--)}"."!==n[0]||2!==n.length||"."!==n[1]&&""!==n[1]||(t=!0,n.pop())}let i=0;for(;-1!==(i=n.indexOf("..",i+1));){const e=n[i-1];if(e&&"."!==e&&".."!==e&&"**"!==e){t=!0;const e=1===i&&"**"===n[i+1]?["."]:[];n.splice(i-1,2,...e),0===n.length&&n.push(""),i-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){const r=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);r&&(e[t]=r,e[n]=[])}return e.filter((e=>e.length))}partsMatch(e,t,n=!1){let r=0,i=0,o=[],s="";for(;r<e.length&&i<t.length;)if(e[r]===t[i])o.push("b"===s?t[i]:e[r]),r++,i++;else if(n&&"**"===e[r]&&t[i]===e[r+1])o.push(e[r]),r++;else if(n&&"**"===t[i]&&e[r]===t[i+1])o.push(t[i]),i++;else if("*"!==e[r]||!t[i]||!this.options.dot&&t[i].startsWith(".")||"**"===t[i]){if("*"!==t[i]||!e[r]||!this.options.dot&&e[r].startsWith(".")||"**"===e[r])return!1;if("a"===s)return!1;s="b",o.push(t[i]),r++,i++}else{if("b"===s)return!1;s="a",o.push(e[r]),r++,i++}return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,n=0;for(let r=0;r<e.length&&"!"===e.charAt(r);r++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,n,r=!1){const i=this.options;if(this.isWindows){const t="string"==typeof e[0]&&/^[a-z]:$/i.test(e[0]),r=!t&&""===e[0]&&""===e[1]&&"?"===e[2]&&/^[a-z]:$/i.test(e[3]),i="string"==typeof n[0]&&/^[a-z]:$/i.test(n[0]),o=r?3:t?0:void 0,s=!i&&""===n[0]&&""===n[1]&&"?"===n[2]&&"string"==typeof n[3]&&/^[a-z]:$/i.test(n[3])?3:i?0:void 0;if("number"==typeof o&&"number"==typeof s){const[t,r]=[e[o],n[s]];t.toLowerCase()===r.toLowerCase()&&(n[s]=t,s>o?n=n.slice(s):o>s&&(e=e.slice(o)))}}const{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var s=0,a=0,c=e.length,u=n.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var l=n[a],h=e[s];if(this.debug(n,l,h),!1===l)return!1;if(l===t.GLOBSTAR){this.debug("GLOBSTAR",[n,l,h]);var d=s,f=a+1;if(f===u){for(this.debug("** at the end");s<c;s++)if("."===e[s]||".."===e[s]||!i.dot&&"."===e[s].charAt(0))return!1;return!0}for(;d<c;){var p=e[d];if(this.debug("\nglobstar while",e,d,n,f,p),this.matchOne(e.slice(d),n.slice(f),r))return this.debug("globstar found match!",d,c,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,d,n,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",e,d,n,f),d!==c))}let o;if("string"==typeof l?(o=h===l,this.debug("string match",l,h,o)):(o=l.test(h),this.debug("pattern match",l,h,o)),!o)return!1}if(s===c&&a===u)return!0;if(s===c)return r;if(a===u)return s===c-1&&""===e[s];throw new Error("wtf?")}braceExpand(){return(0,t.braceExpand)(this.pattern,this.options)}parse(e){(0,o.assertValidPattern)(e);const n=this.options;if("**"===e)return t.GLOBSTAR;if(""===e)return"";let r,i=null;(r=e.match(v))?i=n.dot?w:E:(r=e.match(u))?i=(n.nocase?n.dot?f:d:n.dot?h:l)(r[1]):(r=e.match(b))?i=(n.nocase?n.dot?S:T:n.dot?A:O)(r):(r=e.match(p))?i=n.dot?g:m:(r=e.match(y))&&(i=_);const a=s.AST.fromGlob(e,this.options).toMMPattern();return i&&"object"==typeof a&&Reflect.defineProperty(a,"test",{value:i}),a}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const n=this.options,r=n.noglobstar?"[^/]*?":n.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=new Set(n.nocase?["i"]:[]);let o=e.map((e=>{const n=e.map((e=>{if(e instanceof RegExp)for(const t of e.flags.split(""))i.add(t);return"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e===t.GLOBSTAR?t.GLOBSTAR:e._src}));return n.forEach(((e,i)=>{const o=n[i+1],s=n[i-1];e===t.GLOBSTAR&&s!==t.GLOBSTAR&&(void 0===s?void 0!==o&&o!==t.GLOBSTAR?n[i+1]="(?:\\/|"+r+"\\/)?"+o:n[i]=r:void 0===o?n[i-1]=s+"(?:\\/|"+r+")?":o!==t.GLOBSTAR&&(n[i-1]=s+"(?:\\/|\\/"+r+"\\/)"+o,n[i+1]=t.GLOBSTAR))})),n.filter((e=>e!==t.GLOBSTAR)).join("/")})).join("|");const[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch(e){this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;const n=this.options;this.isWindows&&(e=e.split("\\").join("/"));const r=this.slashSplit(e);this.debug(this.pattern,"split",r);const i=this.set;this.debug(this.pattern,"set",i);let o=r[r.length-1];if(!o)for(let e=r.length-2;!o&&e>=0;e--)o=r[e];for(let e=0;e<i.length;e++){const s=i[e];let a=r;if(n.matchBase&&1===s.length&&(a=[o]),this.matchOne(a,s,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}static defaults(e){return t.minimatch.defaults(e).Minimatch}}t.Minimatch=D;var k=n(3548);Object.defineProperty(t,"AST",{enumerable:!0,get:function(){return k.AST}});var M=n(9789);Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return M.escape}});var L=n(2027);Object.defineProperty(t,"unescape",{enumerable:!0,get:function(){return L.unescape}}),t.minimatch.AST=s.AST,t.minimatch.Minimatch=D,t.minimatch.escape=a.escape,t.minimatch.unescape=c.unescape},2027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unescape=void 0,t.unescape=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")},1938:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Minipass=t.isWritable=t.isReadable=t.isStream=void 0;const i="object"==typeof process&&process?process:{stdout:null,stderr:null},o=n(5673),s=r(n(4492)),a=n(6915);t.isStream=e=>!!e&&"object"==typeof e&&(e instanceof Y||e instanceof s.default||(0,t.isReadable)(e)||(0,t.isWritable)(e)),t.isReadable=e=>!!e&&"object"==typeof e&&e instanceof o.EventEmitter&&"function"==typeof e.pipe&&e.pipe!==s.default.Writable.prototype.pipe,t.isWritable=e=>!!e&&"object"==typeof e&&e instanceof o.EventEmitter&&"function"==typeof e.write&&"function"==typeof e.end;const c=Symbol("EOF"),u=Symbol("maybeEmitEnd"),l=Symbol("emittedEnd"),h=Symbol("emittingEnd"),d=Symbol("emittedError"),f=Symbol("closed"),p=Symbol("read"),m=Symbol("flush"),g=Symbol("flushChunk"),y=Symbol("encoding"),_=Symbol("decoder"),v=Symbol("flowing"),E=Symbol("paused"),w=Symbol("resume"),b=Symbol("buffer"),T=Symbol("pipes"),S=Symbol("bufferLength"),A=Symbol("bufferPush"),O=Symbol("bufferShift"),C=Symbol("objectMode"),I=Symbol("destroyed"),R=Symbol("error"),N=Symbol("emitData"),P=Symbol("emitEnd"),D=Symbol("emitEnd2"),k=Symbol("async"),M=Symbol("abort"),L=Symbol("aborted"),x=Symbol("signal"),U=Symbol("dataListeners"),F=Symbol("discarded"),B=e=>Promise.resolve().then(e),q=e=>e();class j{src;dest;opts;ondrain;constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[w](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class H extends j{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=e=>t.emit("error",e),e.on("error",this.proxyErrors)}}class Y extends o.EventEmitter{[v]=!1;[E]=!1;[T]=[];[b]=[];[C];[y];[k];[_];[c]=!1;[l]=!1;[h]=!1;[f]=!1;[d]=null;[S]=0;[I]=!1;[x];[L]=!1;[U]=0;[F]=!1;writable=!0;readable=!0;constructor(...e){const t=e[0]||{};if(super(),t.objectMode&&"string"==typeof t.encoding)throw new TypeError("Encoding and objectMode may not be used together");var n;t.objectMode?(this[C]=!0,this[y]=null):!(n=t).objectMode&&n.encoding&&"buffer"!==n.encoding?(this[y]=t.encoding,this[C]=!1):(this[C]=!1,this[y]=null),this[k]=!!t.async,this[_]=this[y]?new a.StringDecoder(this[y]):null,t&&!0===t.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[b]}),t&&!0===t.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[T]});const{signal:r}=t;r&&(this[x]=r,r.aborted?this[M]():r.addEventListener("abort",(()=>this[M]())))}get bufferLength(){return this[S]}get encoding(){return this[y]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[C]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[k]}set async(e){this[k]=this[k]||!!e}[M](){this[L]=!0,this.emit("abort",this[x]?.reason),this.destroy(this[x]?.reason)}get aborted(){return this[L]}set aborted(e){}write(e,t,n){if(this[L])return!1;if(this[c])throw new Error("write after end");if(this[I])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof t&&(n=t,t="utf8"),t||(t="utf8");const r=this[k]?B:q;if(!this[C]&&!Buffer.isBuffer(e))if(i=e,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if((e=>e instanceof ArrayBuffer||!!e&&"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e))e=Buffer.from(e);else if("string"!=typeof e)throw new Error("Non-contiguous data written to non-objectMode stream");var i;return this[C]?(this[v]&&0!==this[S]&&this[m](!0),this[v]?this.emit("data",e):this[A](e),0!==this[S]&&this.emit("readable"),n&&r(n),this[v]):e.length?("string"!=typeof e||t===this[y]&&!this[_]?.lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[y]&&(e=this[_].write(e)),this[v]&&0!==this[S]&&this[m](!0),this[v]?this.emit("data",e):this[A](e),0!==this[S]&&this.emit("readable"),n&&r(n),this[v]):(0!==this[S]&&this.emit("readable"),n&&r(n),this[v])}read(e){if(this[I])return null;if(this[F]=!1,0===this[S]||0===e||e&&e>this[S])return this[u](),null;this[C]&&(e=null),this[b].length>1&&!this[C]&&(this[b]=[this[y]?this[b].join(""):Buffer.concat(this[b],this[S])]);const t=this[p](e||null,this[b][0]);return this[u](),t}[p](e,t){if(this[C])this[O]();else{const n=t;e===n.length||null===e?this[O]():"string"==typeof n?(this[b][0]=n.slice(e),t=n.slice(0,e),this[S]-=e):(this[b][0]=n.subarray(e),t=n.subarray(0,e),this[S]-=e)}return this.emit("data",t),this[b].length||this[c]||this.emit("drain"),t}end(e,t,n){return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t="utf8"),void 0!==e&&this.write(e,t),n&&this.once("end",n),this[c]=!0,this.writable=!1,!this[v]&&this[E]||this[u](),this}[w](){this[I]||(this[U]||this[T].length||(this[F]=!0),this[E]=!1,this[v]=!0,this.emit("resume"),this[b].length?this[m]():this[c]?this[u]():this.emit("drain"))}resume(){return this[w]()}pause(){this[v]=!1,this[E]=!0,this[F]=!1}get destroyed(){return this[I]}get flowing(){return this[v]}get paused(){return this[E]}[A](e){this[C]?this[S]+=1:this[S]+=e.length,this[b].push(e)}[O](){return this[C]?this[S]-=1:this[S]-=this[b][0].length,this[b].shift()}[m](e=!1){do{}while(this[g](this[O]())&&this[b].length);e||this[b].length||this[c]||this.emit("drain")}[g](e){return this.emit("data",e),this[v]}pipe(e,t){if(this[I])return e;this[F]=!1;const n=this[l];return t=t||{},e===i.stdout||e===i.stderr?t.end=!1:t.end=!1!==t.end,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this[T].push(t.proxyErrors?new H(this,e,t):new j(this,e,t)),this[k]?B((()=>this[w]())):this[w]()),e}unpipe(e){const t=this[T].find((t=>t.dest===e));t&&(1===this[T].length?(this[v]&&0===this[U]&&(this[v]=!1),this[T]=[]):this[T].splice(this[T].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){const n=super.on(e,t);if("data"===e)this[F]=!1,this[U]++,this[T].length||this[v]||this[w]();else if("readable"===e&&0!==this[S])super.emit("readable");else if((e=>"end"===e||"finish"===e||"prefinish"===e)(e)&&this[l])super.emit(e),this.removeAllListeners(e);else if("error"===e&&this[d]){const e=t;this[k]?B((()=>e.call(this,this[d]))):e.call(this,this[d])}return n}removeListener(e,t){return this.off(e,t)}off(e,t){const n=super.off(e,t);return"data"===e&&(this[U]=this.listeners("data").length,0!==this[U]||this[F]||this[T].length||(this[v]=!1)),n}removeAllListeners(e){const t=super.removeAllListeners(e);return"data"!==e&&void 0!==e||(this[U]=0,this[F]||this[T].length||(this[v]=!1)),t}get emittedEnd(){return this[l]}[u](){this[h]||this[l]||this[I]||0!==this[b].length||!this[c]||(this[h]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[f]&&this.emit("close"),this[h]=!1)}emit(e,...t){const n=t[0];if("error"!==e&&"close"!==e&&e!==I&&this[I])return!1;if("data"===e)return!(!this[C]&&!n)&&(this[k]?(B((()=>this[N](n))),!0):this[N](n));if("end"===e)return this[P]();if("close"===e){if(this[f]=!0,!this[l]&&!this[I])return!1;const e=super.emit("close");return this.removeAllListeners("close"),e}if("error"===e){this[d]=n,super.emit(R,n);const e=!(this[x]&&!this.listeners("error").length)&&super.emit("error",n);return this[u](),e}if("resume"===e){const e=super.emit("resume");return this[u](),e}if("finish"===e||"prefinish"===e){const t=super.emit(e);return this.removeAllListeners(e),t}const r=super.emit(e,...t);return this[u](),r}[N](e){for(const t of this[T])!1===t.dest.write(e)&&this.pause();const t=!this[F]&&super.emit("data",e);return this[u](),t}[P](){return!this[l]&&(this[l]=!0,this.readable=!1,this[k]?(B((()=>this[D]())),!0):this[D]())}[D](){if(this[_]){const e=this[_].end();if(e){for(const t of this[T])t.dest.write(e);this[F]||super.emit("data",e)}}for(const e of this[T])e.end();const e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){const e=Object.assign([],{dataLength:0});this[C]||(e.dataLength=0);const t=this.promise();return this.on("data",(t=>{e.push(t),this[C]||(e.dataLength+=t.length)})),await t,e}async concat(){if(this[C])throw new Error("cannot concat in objectMode");const e=await this.collect();return this[y]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise(((e,t)=>{this.on(I,(()=>t(new Error("stream destroyed")))),this.on("error",(e=>t(e))),this.on("end",(()=>e()))}))}[Symbol.asyncIterator](){this[F]=!1;let e=!1;const t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();const n=this.read();if(null!==n)return Promise.resolve({done:!1,value:n});if(this[c])return t();let r,i;const o=e=>{this.off("data",s),this.off("end",a),this.off(I,u),t(),i(e)},s=e=>{this.off("error",o),this.off("end",a),this.off(I,u),this.pause(),r({value:e,done:!!this[c]})},a=()=>{this.off("error",o),this.off("data",s),this.off(I,u),t(),r({done:!0,value:void 0})},u=()=>o(new Error("stream destroyed"));return new Promise(((e,t)=>{i=t,r=e,this.once(I,u),this.once("error",o),this.once("end",a),this.once("data",s)}))},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[F]=!1;let e=!1;const t=()=>(this.pause(),this.off(R,t),this.off(I,t),this.off("end",t),e=!0,{done:!0,value:void 0});return this.once("end",t),this.once(R,t),this.once(I,t),{next:()=>{if(e)return t();const n=this.read();return null===n?t():{done:!1,value:n}},throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){return this[I]?(e?this.emit("error",e):this.emit(I),this):(this[I]=!0,this[F]=!0,this[b].length=0,this[S]=0,"function"!=typeof this.close||this[f]||this.close(),e?this.emit("error",e):this.emit(I),this)}static get isStream(){return t.isStream}}t.Minipass=Y},2917:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PathScurry=t.Path=t.PathScurryDarwin=t.PathScurryPosix=t.PathScurryWin32=t.PathScurryBase=t.PathPosix=t.PathWin32=t.PathBase=t.ChildrenCache=t.ResolveCache=void 0;const s=n(6317),a=n(9411),c=n(1041),u=n(7147),l=o(n(7561)),h=u.realpathSync.native,d=n(3977),f=n(1938),p={lstatSync:u.lstatSync,readdir:u.readdir,readdirSync:u.readdirSync,readlinkSync:u.readlinkSync,realpathSync:h,promises:{lstat:d.lstat,readdir:d.readdir,readlink:d.readlink,realpath:d.realpath}},m=e=>e&&e!==p&&e!==l?{...p,...e,promises:{...p.promises,...e.promises||{}}}:p,g=/^\\\\\?\\([a-z]:)\\?$/i,y=/[\\\/]/,_=10,v=15,E=-16,w=128,b=e=>e.isFile()?8:e.isDirectory()?4:e.isSymbolicLink()?_:e.isCharacterDevice()?2:e.isBlockDevice()?6:e.isSocket()?12:e.isFIFO()?1:0,T=new Map,S=e=>{const t=T.get(e);if(t)return t;const n=e.normalize("NFKD");return T.set(e,n),n},A=new Map,O=e=>{const t=A.get(e);if(t)return t;const n=S(e.toLowerCase());return A.set(e,n),n};class C extends s.LRUCache{constructor(){super({max:256})}}t.ResolveCache=C;class I extends s.LRUCache{constructor(e=16384){super({maxSize:e,sizeCalculation:e=>e.length+1})}}t.ChildrenCache=I;const R=Symbol("PathScurry setAsCwd");class N{name;root;roots;parent;nocase;isCWD=!1;#N;#P;get dev(){return this.#P}#D;get mode(){return this.#D}#k;get nlink(){return this.#k}#M;get uid(){return this.#M}#L;get gid(){return this.#L}#x;get rdev(){return this.#x}#U;get blksize(){return this.#U}#F;get ino(){return this.#F}#B;get size(){return this.#B}#q;get blocks(){return this.#q}#j;get atimeMs(){return this.#j}#H;get mtimeMs(){return this.#H}#Y;get ctimeMs(){return this.#Y}#V;get birthtimeMs(){return this.#V}#$;get atime(){return this.#$}#z;get mtime(){return this.#z}#G;get ctime(){return this.#G}#W;get birthtime(){return this.#W}#K;#Q;#X;#Z;#J;#ee;#te;#ne;#re;#ie;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=0,n,r,i,o,s){this.name=e,this.#K=i?O(e):S(e),this.#te=1023&t,this.nocase=i,this.roots=r,this.root=n||this,this.#ne=o,this.#X=s.fullpath,this.#J=s.relative,this.#ee=s.relativePosix,this.parent=s.parent,this.parent?this.#N=this.parent.#N:this.#N=m(s.fs)}depth(){return void 0!==this.#Q?this.#Q:this.parent?this.#Q=this.parent.depth()+1:this.#Q=0}childrenCache(){return this.#ne}resolve(e){if(!e)return this;const t=this.getRootString(e),n=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#oe(n):this.#oe(n)}#oe(e){let t=this;for(const n of e)t=t.child(n);return t}children(){const e=this.#ne.get(this);if(e)return e;const t=Object.assign([],{provisional:0});return this.#ne.set(this,t),this.#te&=-17,t}child(e,t){if(""===e||"."===e)return this;if(".."===e)return this.parent||this;const n=this.children(),r=this.nocase?O(e):S(e);for(const e of n)if(e.#K===r)return e;const i=this.parent?this.sep:"",o=this.#X?this.#X+i+e:void 0,s=this.newChild(e,0,{...t,parent:this,fullpath:o});return this.canReaddir()||(s.#te|=w),n.push(s),s}relative(){if(this.isCWD)return"";if(void 0!==this.#J)return this.#J;const e=this.name,t=this.parent;if(!t)return this.#J=this.name;const n=t.relative();return n+(n&&t.parent?this.sep:"")+e}relativePosix(){if("/"===this.sep)return this.relative();if(this.isCWD)return"";if(void 0!==this.#ee)return this.#ee;const e=this.name,t=this.parent;if(!t)return this.#ee=this.fullpathPosix();const n=t.relativePosix();return n+(n&&t.parent?"/":"")+e}fullpath(){if(void 0!==this.#X)return this.#X;const e=this.name,t=this.parent;if(!t)return this.#X=this.name;const n=t.fullpath()+(t.parent?this.sep:"")+e;return this.#X=n}fullpathPosix(){if(void 0!==this.#Z)return this.#Z;if("/"===this.sep)return this.#Z=this.fullpath();if(!this.parent){const e=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(e)?this.#Z=`//?/${e}`:this.#Z=e}const e=this.parent,t=e.fullpathPosix(),n=t+(t&&e.parent?"/":"")+this.name;return this.#Z=n}isUnknown(){return 0==(this.#te&v)}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return 8==(this.#te&v)}isDirectory(){return 4==(this.#te&v)}isCharacterDevice(){return 2==(this.#te&v)}isBlockDevice(){return 6==(this.#te&v)}isFIFO(){return 1==(this.#te&v)}isSocket(){return 12==(this.#te&v)}isSymbolicLink(){return(this.#te&_)===_}lstatCached(){return 32&this.#te?this:void 0}readlinkCached(){return this.#re}realpathCached(){return this.#ie}readdirCached(){const e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#re)return!0;if(!this.parent)return!1;const e=this.#te&v;return!(0!==e&&e!==_||256&this.#te||this.#te&w)}calledReaddir(){return!!(16&this.#te)}isENOENT(){return!!(this.#te&w)}isNamed(e){return this.nocase?this.#K===O(e):this.#K===S(e)}async readlink(){const e=this.#re;if(e)return e;if(this.canReadlink()&&this.parent)try{const e=await this.#N.promises.readlink(this.fullpath()),t=(await this.parent.realpath())?.resolve(e);if(t)return this.#re=t}catch(e){return void this.#se(e.code)}}readlinkSync(){const e=this.#re;if(e)return e;if(this.canReadlink()&&this.parent)try{const e=this.#N.readlinkSync(this.fullpath()),t=this.parent.realpathSync()?.resolve(e);if(t)return this.#re=t}catch(e){return void this.#se(e.code)}}#ae(e){this.#te|=16;for(let t=e.provisional;t<e.length;t++){const n=e[t];n&&n.#ce()}}#ce(){this.#te&w||(this.#te=(this.#te|w)&E,this.#ue())}#ue(){const e=this.children();e.provisional=0;for(const t of e)t.#ce()}#le(){this.#te|=512,this.#he()}#he(){if(64&this.#te)return;let e=this.#te;4==(e&v)&&(e&=E),this.#te=64|e,this.#ue()}#de(e=""){"ENOTDIR"===e||"EPERM"===e?this.#he():"ENOENT"===e?this.#ce():this.children().provisional=0}#fe(e=""){"ENOTDIR"===e?this.parent.#he():"ENOENT"===e&&this.#ce()}#se(e=""){let t=this.#te;t|=256,"ENOENT"===e&&(t|=w),"EINVAL"!==e&&"UNKNOWN"!==e||(t&=E),this.#te=t,"ENOTDIR"===e&&this.parent&&this.parent.#he()}#pe(e,t){return this.#me(e,t)||this.#ge(e,t)}#ge(e,t){const n=b(e),r=this.newChild(e.name,n,{parent:this}),i=r.#te&v;return 4!==i&&i!==_&&0!==i&&(r.#te|=64),t.unshift(r),t.provisional++,r}#me(e,t){for(let n=t.provisional;n<t.length;n++){const r=t[n];if((this.nocase?O(e.name):S(e.name))===r.#K)return this.#ye(e,r,n,t)}}#ye(e,t,n,r){const i=t.name;return t.#te=t.#te&E|b(e),i!==e.name&&(t.name=e.name),n!==r.provisional&&(n===r.length-1?r.pop():r.splice(n,1),r.unshift(t)),r.provisional++,t}async lstat(){if(0==(this.#te&w))try{return this.#_e(await this.#N.promises.lstat(this.fullpath())),this}catch(e){this.#fe(e.code)}}lstatSync(){if(0==(this.#te&w))try{return this.#_e(this.#N.lstatSync(this.fullpath())),this}catch(e){this.#fe(e.code)}}#_e(e){const{atime:t,atimeMs:n,birthtime:r,birthtimeMs:i,blksize:o,blocks:s,ctime:a,ctimeMs:c,dev:u,gid:l,ino:h,mode:d,mtime:f,mtimeMs:p,nlink:m,rdev:g,size:y,uid:v}=e;this.#$=t,this.#j=n,this.#W=r,this.#V=i,this.#U=o,this.#q=s,this.#G=a,this.#Y=c,this.#P=u,this.#L=l,this.#F=h,this.#D=d,this.#z=f,this.#H=p,this.#k=m,this.#x=g,this.#B=y,this.#M=v;const w=b(e);this.#te=this.#te&E|w|32,0!==w&&4!==w&&w!==_&&(this.#te|=64)}#ve=[];#Ee=!1;#we(e){this.#Ee=!1;const t=this.#ve.slice();this.#ve.length=0,t.forEach((t=>t(null,e)))}readdirCB(e,t=!1){if(!this.canReaddir())return void(t?e(null,[]):queueMicrotask((()=>e(null,[]))));const n=this.children();if(this.calledReaddir()){const r=n.slice(0,n.provisional);return void(t?e(null,r):queueMicrotask((()=>e(null,r))))}if(this.#ve.push(e),this.#Ee)return;this.#Ee=!0;const r=this.fullpath();this.#N.readdir(r,{withFileTypes:!0},((e,t)=>{if(e)this.#de(e.code),n.provisional=0;else{for(const e of t)this.#pe(e,n);this.#ae(n)}this.#we(n.slice(0,n.provisional))}))}#be;async readdir(){if(!this.canReaddir())return[];const e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);const t=this.fullpath();if(this.#be)await this.#be;else{let n=()=>{};this.#be=new Promise((e=>n=e));try{for(const n of await this.#N.promises.readdir(t,{withFileTypes:!0}))this.#pe(n,e);this.#ae(e)}catch(t){this.#de(t.code),e.provisional=0}this.#be=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];const e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);const t=this.fullpath();try{for(const n of this.#N.readdirSync(t,{withFileTypes:!0}))this.#pe(n,e);this.#ae(e)}catch(t){this.#de(t.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(704&this.#te)return!1;const e=v&this.#te;return 0===e||4===e||e===_}shouldWalk(e,t){return 4==(4&this.#te)&&!(704&this.#te)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#ie)return this.#ie;if(!(896&this.#te))try{const e=await this.#N.promises.realpath(this.fullpath());return this.#ie=this.resolve(e)}catch(e){this.#le()}}realpathSync(){if(this.#ie)return this.#ie;if(!(896&this.#te))try{const e=this.#N.realpathSync(this.fullpath());return this.#ie=this.resolve(e)}catch(e){this.#le()}}[R](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;const t=new Set([]);let n=[],r=this;for(;r&&r.parent;)t.add(r),r.#J=n.join(this.sep),r.#ee=n.join("/"),r=r.parent,n.push("..");for(r=e;r&&r.parent&&!t.has(r);)r.#J=void 0,r.#ee=void 0,r=r.parent}}t.PathBase=N;class P extends N{sep="\\";splitSep=y;constructor(e,t=0,n,r,i,o,s){super(e,t,n,r,i,o,s)}newChild(e,t=0,n={}){return new P(e,t,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return a.win32.parse(e).root}getRoot(e){if((e=(e=>e.replace(/\//g,"\\").replace(g,"$1\\"))(e.toUpperCase()))===this.root.name)return this.root;for(const[t,n]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=n;return this.roots[e]=new M(e,this).root}sameRoot(e,t=this.root.name){return(e=e.toUpperCase().replace(/\//g,"\\").replace(g,"$1\\"))===t}}t.PathWin32=P;class D extends N{splitSep="/";sep="/";constructor(e,t=0,n,r,i,o,s){super(e,t,n,r,i,o,s)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=0,n={}){return new D(e,t,this.root,this.roots,this.nocase,this.childrenCache(),n)}}t.PathPosix=D;class k{root;rootPath;roots;cwd;#Te;#Se;#ne;nocase;#N;constructor(e=process.cwd(),t,n,{nocase:r,childrenCacheSize:i=16384,fs:o=p}={}){this.#N=m(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,c.fileURLToPath)(e));const s=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(s),this.#Te=new C,this.#Se=new C,this.#ne=new I(i);const a=s.substring(this.rootPath.length).split(n);if(1!==a.length||a[0]||a.pop(),void 0===r)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=r,this.root=this.newRoot(this.#N),this.roots[this.rootPath]=this.root;let u=this.root,l=a.length-1;const h=t.sep;let d=this.rootPath,f=!1;for(const e of a){const t=l--;u=u.child(e,{relative:new Array(t).fill("..").join(h),relativePosix:new Array(t).fill("..").join("/"),fullpath:d+=(f?"":h)+e}),f=!0}this.cwd=u}depth(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#ne}resolve(...e){let t="";for(let n=e.length-1;n>=0;n--){const r=e[n];if(r&&"."!==r&&(t=t?`${r}/${t}`:r,this.isAbsolute(r)))break}const n=this.#Te.get(t);if(void 0!==n)return n;const r=this.cwd.resolve(t).fullpath();return this.#Te.set(t,r),r}resolvePosix(...e){let t="";for(let n=e.length-1;n>=0;n--){const r=e[n];if(r&&"."!==r&&(t=t?`${r}/${t}`:r,this.isAbsolute(r)))break}const n=this.#Se.get(t);if(void 0!==n)return n;const r=this.cwd.resolve(t).fullpathPosix();return this.#Se.set(t,r),r}relative(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n}=t;if(e.canReaddir()){const t=await e.readdir();return n?t:t.map((e=>e.name))}return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n=!0}=t;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map((e=>e.name)):[]}async lstat(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e.withFileTypes,e=this.cwd);const n=await e.readlink();return t?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e.withFileTypes,e=this.cwd);const n=e.readlinkSync();return t?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e.withFileTypes,e=this.cwd);const n=await e.realpath();return t?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e.withFileTypes,e=this.cwd);const n=e.realpathSync();return t?n:n?.fullpath()}async walk(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n=!0,follow:r=!1,filter:i,walkFilter:o}=t,s=[];i&&!i(e)||s.push(n?e:e.fullpath());const a=new Set,c=(e,t)=>{a.add(e),e.readdirCB(((e,u)=>{if(e)return t(e);let l=u.length;if(!l)return t();const h=()=>{0==--l&&t()};for(const e of u)i&&!i(e)||s.push(n?e:e.fullpath()),r&&e.isSymbolicLink()?e.realpath().then((e=>e?.isUnknown()?e.lstat():e)).then((e=>e?.shouldWalk(a,o)?c(e,h):h())):e.shouldWalk(a,o)?c(e,h):h()}),!0)},u=e;return new Promise(((e,t)=>{c(u,(n=>{if(n)return t(n);e(s)}))}))}walkSync(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n=!0,follow:r=!1,filter:i,walkFilter:o}=t,s=[];i&&!i(e)||s.push(n?e:e.fullpath());const a=new Set([e]);for(const e of a){const t=e.readdirSync();for(const e of t){i&&!i(e)||s.push(n?e:e.fullpath());let t=e;if(e.isSymbolicLink()){if(!r||!(t=e.realpathSync()))continue;t.isUnknown()&&t.lstatSync()}t.shouldWalk(a,o)&&a.add(t)}}return s}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n=!0,follow:r=!1,filter:i,walkFilter:o}=t;i&&!i(e)||(yield n?e:e.fullpath());const s=new Set([e]);for(const e of s){const t=e.readdirSync();for(const e of t){i&&!i(e)||(yield n?e:e.fullpath());let t=e;if(e.isSymbolicLink()){if(!r||!(t=e.realpathSync()))continue;t.isUnknown()&&t.lstatSync()}t.shouldWalk(s,o)&&s.add(t)}}}stream(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n=!0,follow:r=!1,filter:i,walkFilter:o}=t,s=new f.Minipass({objectMode:!0});i&&!i(e)||s.write(n?e:e.fullpath());const a=new Set,c=[e];let u=0;const l=()=>{let e=!1;for(;!e;){const t=c.shift();if(!t)return void(0===u&&s.end());u++,a.add(t);const h=(t,f,p=!1)=>{if(t)return s.emit("error",t);if(r&&!p){const e=[];for(const t of f)t.isSymbolicLink()&&e.push(t.realpath().then((e=>e?.isUnknown()?e.lstat():e)));if(e.length)return void Promise.all(e).then((()=>h(null,f,!0)))}for(const t of f)!t||i&&!i(t)||s.write(n?t:t.fullpath())||(e=!0);u--;for(const e of f){const t=e.realpathCached()||e;t.shouldWalk(a,o)&&c.push(t)}e&&!s.flowing?s.once("drain",l):d||l()};let d=!0;t.readdirCB(h,!0),d=!1}};return l(),s}streamSync(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof N||(t=e,e=this.cwd);const{withFileTypes:n=!0,follow:r=!1,filter:i,walkFilter:o}=t,s=new f.Minipass({objectMode:!0}),a=new Set;i&&!i(e)||s.write(n?e:e.fullpath());const c=[e];let u=0;const l=()=>{let e=!1;for(;!e;){const t=c.shift();if(!t)return void(0===u&&s.end());u++,a.add(t);const l=t.readdirSync();for(const t of l)i&&!i(t)||s.write(n?t:t.fullpath())||(e=!0);u--;for(const e of l){let t=e;if(e.isSymbolicLink()){if(!r||!(t=e.realpathSync()))continue;t.isUnknown()&&t.lstatSync()}t.shouldWalk(a,o)&&c.push(t)}}e&&!s.flowing&&s.once("drain",l)};return l(),s}chdir(e=this.cwd){const t=this.cwd;this.cwd="string"==typeof e?this.cwd.resolve(e):e,this.cwd[R](t)}}t.PathScurryBase=k;class M extends k{sep="\\";constructor(e=process.cwd(),t={}){const{nocase:n=!0}=t;super(e,a.win32,"\\",{...t,nocase:n}),this.nocase=n;for(let e=this.cwd;e;e=e.parent)e.nocase=this.nocase}parseRootPath(e){return a.win32.parse(e).root.toUpperCase()}newRoot(e){return new P(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}}t.PathScurryWin32=M;class L extends k{sep="/";constructor(e=process.cwd(),t={}){const{nocase:n=!1}=t;super(e,a.posix,"/",{...t,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new D(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}}t.PathScurryPosix=L;class x extends L{constructor(e=process.cwd(),t={}){const{nocase:n=!0}=t;super(e,{...t,nocase:n})}}t.PathScurryDarwin=x,t.Path="win32"===process.platform?P:D,t.PathScurry="win32"===process.platform?M:"darwin"===process.platform?x:L},6317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const n="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=new Set,i="object"==typeof process&&process?process:{},o=(e,t,n,r)=>{"function"==typeof i.emitWarning?i.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)};let s=globalThis.AbortController,a=globalThis.AbortSignal;if(void 0===s){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},s=class{constructor(){t()}signal=new a;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==i.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const c=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),u=e=>c(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?l:null:null;class l extends Array{constructor(e){super(e),this.fill(0)}}class h{heap;length;static#Ae=!1;static create(e){const t=u(e);if(!t)return[];h.#Ae=!0;const n=new h(e,t);return h.#Ae=!1,n}constructor(e,t){if(!h.#Ae)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class d{#Oe;#Ce;#Ie;#Re;#Ne;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#B;#Pe;#De;#ke;#Me;#Le;#xe;#Ue;#Fe;#Be;#qe;#je;#He;#Ye;#Ve;#$e;#ze;static unsafeExposeInternals(e){return{starts:e.#He,ttls:e.#Ye,sizes:e.#je,keyMap:e.#De,keyList:e.#ke,valList:e.#Me,next:e.#Le,prev:e.#xe,get head(){return e.#Ue},get tail(){return e.#Fe},free:e.#Be,isBackgroundFetch:t=>e.#Ge(t),backgroundFetch:(t,n,r,i)=>e.#We(t,n,r,i),moveToTail:t=>e.#Ke(t),indexes:t=>e.#Qe(t),rindexes:t=>e.#Xe(t),isStale:t=>e.#Ze(t)}}get max(){return this.#Oe}get maxSize(){return this.#Ce}get calculatedSize(){return this.#Pe}get size(){return this.#B}get fetchMethod(){return this.#Ne}get dispose(){return this.#Ie}get disposeAfter(){return this.#Re}constructor(e){const{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:f,dispose:p,disposeAfter:m,noDisposeOnSet:g,noUpdateTTL:y,maxSize:_=0,maxEntrySize:v=0,sizeCalculation:E,fetchMethod:w,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:T,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:A,ignoreFetchAbort:O}=e;if(0!==t&&!c(t))throw new TypeError("max option must be a nonnegative integer");const C=t?u(t):Array;if(!C)throw new Error("invalid max value: "+t);if(this.#Oe=t,this.#Ce=_,this.maxEntrySize=v||this.#Ce,this.sizeCalculation=E,this.sizeCalculation){if(!this.#Ce&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==w&&"function"!=typeof w)throw new TypeError("fetchMethod must be a function if specified");if(this.#Ne=w,this.#$e=!!w,this.#De=new Map,this.#ke=new Array(t).fill(void 0),this.#Me=new Array(t).fill(void 0),this.#Le=new C(t),this.#xe=new C(t),this.#Ue=0,this.#Fe=0,this.#Be=h.create(t),this.#B=0,this.#Pe=0,"function"==typeof p&&(this.#Ie=p),"function"==typeof m?(this.#Re=m,this.#qe=[]):(this.#Re=void 0,this.#qe=void 0),this.#Ve=!!this.#Ie,this.#ze=!!this.#Re,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!O,0!==this.maxEntrySize){if(0!==this.#Ce&&!c(this.#Ce))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#Je()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!T,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=c(i)||0===i?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#et()}if(0===this.#Oe&&0===this.ttl&&0===this.#Ce)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#Oe&&!this.#Ce){const e="LRU_CACHE_UNBOUNDED";(e=>!r.has(e))(e)&&(r.add(e),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,d))}}getRemainingTTL(e){return this.#De.has(e)?1/0:0}#et(){const e=new l(this.#Oe),t=new l(this.#Oe);this.#Ye=e,this.#He=t,this.#tt=(r,i,o=n.now())=>{if(t[r]=0!==i?o:0,e[r]=i,0!==i&&this.ttlAutopurge){const e=setTimeout((()=>{this.#Ze(r)&&this.delete(this.#ke[r])}),i+1);e.unref&&e.unref()}},this.#nt=r=>{t[r]=0!==e[r]?n.now():0},this.#rt=(n,o)=>{if(e[o]){const s=e[o],a=t[o];if(!s||!a)return;n.ttl=s,n.start=a,n.now=r||i();const c=n.now-a;n.remainingTTL=s-c}};let r=0;const i=()=>{const e=n.now();if(this.ttlResolution>0){r=e;const t=setTimeout((()=>r=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=n=>{const o=this.#De.get(n);if(void 0===o)return 0;const s=e[o],a=t[o];return s&&a?s-((r||i())-a):1/0},this.#Ze=n=>{const o=t[n],s=e[n];return!!s&&!!o&&(r||i())-o>s}}#nt=()=>{};#rt=()=>{};#tt=()=>{};#Ze=()=>!1;#Je(){const e=new l(this.#Oe);this.#Pe=0,this.#je=e,this.#it=t=>{this.#Pe-=e[t],e[t]=0},this.#ot=(e,t,n,r)=>{if(this.#Ge(t))return 0;if(!c(n)){if(!r)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof r)throw new TypeError("sizeCalculation must be a function");if(n=r(t,e),!c(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n},this.#st=(t,n,r)=>{if(e[t]=n,this.#Ce){const n=this.#Ce-e[t];for(;this.#Pe>n;)this.#at(!0)}this.#Pe+=e[t],r&&(r.entrySize=n,r.totalCalculatedSize=this.#Pe)}}#it=e=>{};#st=(e,t,n)=>{};#ot=(e,t,n,r)=>{if(n||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#Qe({allowStale:e=this.allowStale}={}){if(this.#B)for(let t=this.#Fe;this.#ct(t)&&(!e&&this.#Ze(t)||(yield t),t!==this.#Ue);)t=this.#xe[t]}*#Xe({allowStale:e=this.allowStale}={}){if(this.#B)for(let t=this.#Ue;this.#ct(t)&&(!e&&this.#Ze(t)||(yield t),t!==this.#Fe);)t=this.#Le[t]}#ct(e){return void 0!==e&&this.#De.get(this.#ke[e])===e}*entries(){for(const e of this.#Qe())void 0===this.#Me[e]||void 0===this.#ke[e]||this.#Ge(this.#Me[e])||(yield[this.#ke[e],this.#Me[e]])}*rentries(){for(const e of this.#Xe())void 0===this.#Me[e]||void 0===this.#ke[e]||this.#Ge(this.#Me[e])||(yield[this.#ke[e],this.#Me[e]])}*keys(){for(const e of this.#Qe()){const t=this.#ke[e];void 0===t||this.#Ge(this.#Me[e])||(yield t)}}*rkeys(){for(const e of this.#Xe()){const t=this.#ke[e];void 0===t||this.#Ge(this.#Me[e])||(yield t)}}*values(){for(const e of this.#Qe())void 0===this.#Me[e]||this.#Ge(this.#Me[e])||(yield this.#Me[e])}*rvalues(){for(const e of this.#Xe())void 0===this.#Me[e]||this.#Ge(this.#Me[e])||(yield this.#Me[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const n of this.#Qe()){const r=this.#Me[n],i=this.#Ge(r)?r.__staleWhileFetching:r;if(void 0!==i&&e(i,this.#ke[n],this))return this.get(this.#ke[n],t)}}forEach(e,t=this){for(const n of this.#Qe()){const r=this.#Me[n],i=this.#Ge(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#ke[n],this)}}rforEach(e,t=this){for(const n of this.#Xe()){const r=this.#Me[n],i=this.#Ge(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#ke[n],this)}}purgeStale(){let e=!1;for(const t of this.#Xe({allowStale:!0}))this.#Ze(t)&&(this.delete(this.#ke[t]),e=!0);return e}info(e){const t=this.#De.get(e);if(void 0===t)return;const r=this.#Me[t],i=this.#Ge(r)?r.__staleWhileFetching:r;if(void 0===i)return;const o={value:i};if(this.#Ye&&this.#He){const e=this.#Ye[t],r=this.#He[t];if(e&&r){const t=e-(n.now()-r);o.ttl=t,o.start=Date.now()}}return this.#je&&(o.size=this.#je[t]),o}dump(){const e=[];for(const t of this.#Qe({allowStale:!0})){const r=this.#ke[t],i=this.#Me[t],o=this.#Ge(i)?i.__staleWhileFetching:i;if(void 0===o||void 0===r)continue;const s={value:o};if(this.#Ye&&this.#He){s.ttl=this.#Ye[t];const e=n.now()-this.#He[t];s.start=Math.floor(Date.now()-e)}this.#je&&(s.size=this.#je[t]),e.unshift([r,s])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const e=Date.now()-r.start;r.start=n.now()-e}this.set(t,r.value,r)}}set(e,t,n={}){if(void 0===t)return this.delete(e),this;const{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=n;let{noUpdateTTL:c=this.noUpdateTTL}=n;const u=this.#ot(e,t,n.size||0,s);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(e),this;let l=0===this.#B?void 0:this.#De.get(e);if(void 0===l)l=0===this.#B?this.#Fe:0!==this.#Be.length?this.#Be.pop():this.#B===this.#Oe?this.#at(!1):this.#B,this.#ke[l]=e,this.#Me[l]=t,this.#De.set(e,l),this.#Le[this.#Fe]=l,this.#xe[l]=this.#Fe,this.#Fe=l,this.#B++,this.#st(l,u,a),a&&(a.set="add"),c=!1;else{this.#Ke(l);const n=this.#Me[l];if(t!==n){if(this.#$e&&this.#Ge(n)){n.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=n;void 0===t||o||(this.#Ve&&this.#Ie?.(t,e,"set"),this.#ze&&this.#qe?.push([t,e,"set"]))}else o||(this.#Ve&&this.#Ie?.(n,e,"set"),this.#ze&&this.#qe?.push([n,e,"set"]));if(this.#it(l),this.#st(l,u,a),this.#Me[l]=t,a){a.set="replace";const e=n&&this.#Ge(n)?n.__staleWhileFetching:n;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===r||this.#Ye||this.#et(),this.#Ye&&(c||this.#tt(l,r,i),a&&this.#rt(a,l)),!o&&this.#ze&&this.#qe){const e=this.#qe;let t;for(;t=e?.shift();)this.#Re?.(...t)}return this}pop(){try{for(;this.#B;){const e=this.#Me[this.#Ue];if(this.#at(!0),this.#Ge(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#ze&&this.#qe){const e=this.#qe;let t;for(;t=e?.shift();)this.#Re?.(...t)}}}#at(e){const t=this.#Ue,n=this.#ke[t],r=this.#Me[t];return this.#$e&&this.#Ge(r)?r.__abortController.abort(new Error("evicted")):(this.#Ve||this.#ze)&&(this.#Ve&&this.#Ie?.(r,n,"evict"),this.#ze&&this.#qe?.push([r,n,"evict"])),this.#it(t),e&&(this.#ke[t]=void 0,this.#Me[t]=void 0,this.#Be.push(t)),1===this.#B?(this.#Ue=this.#Fe=0,this.#Be.length=0):this.#Ue=this.#Le[t],this.#De.delete(n),this.#B--,t}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:r}=t,i=this.#De.get(e);if(void 0!==i){const e=this.#Me[i];if(this.#Ge(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#Ze(i))return n&&this.#nt(i),r&&(r.has="hit",this.#rt(r,i)),!0;r&&(r.has="stale",this.#rt(r,i))}else r&&(r.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,r=this.#De.get(e);if(void 0===r||!n&&this.#Ze(r))return;const i=this.#Me[r];return this.#Ge(i)?i.__staleWhileFetching:i}#We(e,t,n,r){const i=void 0===t?void 0:this.#Me[t];if(this.#Ge(i))return i;const o=new s,{signal:a}=n;a?.addEventListener("abort",(()=>o.abort(a.reason)),{signal:o.signal});const c={signal:o.signal,options:n,context:r},u=(r,i=!1)=>{const{aborted:s}=o.signal,a=n.ignoreFetchAbort&&void 0!==r;if(n.status&&(s&&!i?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,a&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),s&&!a&&!i)return l(o.signal.reason);const u=h;return this.#Me[t]===h&&(void 0===r?u.__staleWhileFetching?this.#Me[t]=u.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,r,c.options))),r},l=r=>{const{aborted:i}=o.signal,s=i&&n.allowStaleOnFetchAbort,a=s||n.allowStaleOnFetchRejection,c=a||n.noDeleteOnFetchRejection,u=h;if(this.#Me[t]===h&&(c&&void 0!==u.__staleWhileFetching?s||(this.#Me[t]=u.__staleWhileFetching):this.delete(e)),a)return n.status&&void 0!==u.__staleWhileFetching&&(n.status.returnedStale=!0),u.__staleWhileFetching;if(u.__returned===u)throw r};n.status&&(n.status.fetchDispatched=!0);const h=new Promise(((t,r)=>{const s=this.#Ne?.(e,i,c);s&&s instanceof Promise&&s.then((e=>t(void 0===e?void 0:e)),r),o.signal.addEventListener("abort",(()=>{n.ignoreFetchAbort&&!n.allowStaleOnFetchAbort||(t(void 0),n.allowStaleOnFetchAbort&&(t=e=>u(e,!0)))}))})).then(u,(e=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=e),l(e)))),d=Object.assign(h,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,d,{...c.options,status:void 0}),t=this.#De.get(e)):this.#Me[t]=d,d}#Ge(e){if(!this.#$e)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof s}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:m=!1,status:g,signal:y}=t;if(!this.#$e)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,status:g});const _={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:g,signal:y};let v=this.#De.get(e);if(void 0===v){g&&(g.fetch="miss");const t=this.#We(e,v,_,p);return t.__returned=t}{const t=this.#Me[v];if(this.#Ge(t)){const e=n&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=this.#Ze(v);if(!m&&!i)return g&&(g.fetch="hit"),this.#Ke(v),r&&this.#nt(v),g&&this.#rt(g,v),t;const o=this.#We(e,v,_,p),s=void 0!==o.__staleWhileFetching&&n;return g&&(g.fetch=i?"stale":"refresh",s&&i&&(g.returnedStale=!0)),s?o.__staleWhileFetching:o.__returned=o}}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,s=this.#De.get(e);if(void 0!==s){const t=this.#Me[s],a=this.#Ge(t);return o&&this.#rt(o,s),this.#Ze(s)?(o&&(o.get="stale"),a?(o&&n&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),n?t.__staleWhileFetching:void 0):(i||this.delete(e),o&&n&&(o.returnedStale=!0),n?t:void 0)):(o&&(o.get="hit"),a?t.__staleWhileFetching:(this.#Ke(s),r&&this.#nt(s),t))}o&&(o.get="miss")}#ut(e,t){this.#xe[t]=e,this.#Le[e]=t}#Ke(e){e!==this.#Fe&&(e===this.#Ue?this.#Ue=this.#Le[e]:this.#ut(this.#xe[e],this.#Le[e]),this.#ut(this.#Fe,e),this.#Fe=e)}delete(e){let t=!1;if(0!==this.#B){const n=this.#De.get(e);if(void 0!==n)if(t=!0,1===this.#B)this.clear();else{this.#it(n);const t=this.#Me[n];if(this.#Ge(t)?t.__abortController.abort(new Error("deleted")):(this.#Ve||this.#ze)&&(this.#Ve&&this.#Ie?.(t,e,"delete"),this.#ze&&this.#qe?.push([t,e,"delete"])),this.#De.delete(e),this.#ke[n]=void 0,this.#Me[n]=void 0,n===this.#Fe)this.#Fe=this.#xe[n];else if(n===this.#Ue)this.#Ue=this.#Le[n];else{const e=this.#xe[n];this.#Le[e]=this.#Le[n];const t=this.#Le[n];this.#xe[t]=this.#xe[n]}this.#B--,this.#Be.push(n)}}if(this.#ze&&this.#qe?.length){const e=this.#qe;let t;for(;t=e?.shift();)this.#Re?.(...t)}return t}clear(){for(const e of this.#Xe({allowStale:!0})){const t=this.#Me[e];if(this.#Ge(t))t.__abortController.abort(new Error("deleted"));else{const n=this.#ke[e];this.#Ve&&this.#Ie?.(t,n,"delete"),this.#ze&&this.#qe?.push([t,n,"delete"])}}if(this.#De.clear(),this.#Me.fill(void 0),this.#ke.fill(void 0),this.#Ye&&this.#He&&(this.#Ye.fill(0),this.#He.fill(0)),this.#je&&this.#je.fill(0),this.#Ue=0,this.#Fe=0,this.#Be.length=0,this.#Pe=0,this.#B=0,this.#ze&&this.#qe){const e=this.#qe;let t;for(;t=e?.shift();)this.#Re?.(...t)}}}t.LRUCache=d},3480:e=>{"use strict";e.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},3336:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},7348:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},4284:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},1532:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},6258:e=>{"use strict";e.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},4346:e=>{"use strict";e.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]]')},7014:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},3134:e=>{"use strict";e.exports=JSON.parse('{"author":"Mike D Pilsbury <mike.pilsbury@gmail.com>","contributors":["Alex Robson","Arthur Schreiber","Bret Copeland <bret@atlantisflight.org> (https://github.com/bretcope)","Bryan Ross <bryan@rossipedia.com> (https://github.com/rossipedia)","Ciaran Jessup <ciaranj@gmail.com>","Cort Fritz <cfritz@caa.com>","lastonesky","Patrik Simek <patrik@patriksimek.cz>","Phil Dodderidge <pdodde@poyntz.com>","Zach Aller"],"name":"tedious","description":"A TDS driver, for connecting to MS SQLServer databases.","keywords":["sql","database","mssql","sqlserver","sql-server","tds","msnodesql","azure"],"homepage":"https://github.com/tediousjs/tedious","bugs":"https://github.com/tediousjs/tedious/issues","license":"MIT","version":"15.1.3","main":"./lib/tedious.js","repository":{"type":"git","url":"https://github.com/tediousjs/tedious.git"},"engines":{"node":">=14"},"publishConfig":{"tag":"next"},"dependencies":{"@azure/identity":"^2.0.4","@azure/keyvault-keys":"^4.4.0","@js-joda/core":"^5.2.0","bl":"^5.0.0","es-aggregate-error":"^1.0.8","iconv-lite":"^0.6.3","js-md4":"^0.3.2","jsbi":"^4.3.0","native-duplexpair":"^1.0.0","node-abort-controller":"^3.0.1","punycode":"^2.1.0","sprintf-js":"^1.1.2"},"devDependencies":{"@babel/cli":"^7.17.10","@babel/core":"^7.17.10","@babel/node":"^7.17.10","@babel/plugin-proposal-class-properties":"^7.16.7","@babel/preset-env":"^7.17.10","@babel/preset-typescript":"^7.16.7","@babel/register":"^7.17.7","@commitlint/cli":"^16.2.4","@commitlint/config-conventional":"^16.2.4","@commitlint/travis-cli":"^16.2.4","@types/es-aggregate-error":"^1.0.2","@types/async":"^3.2.13","@types/bl":"^5.0.2","@types/chai":"^4.3.1","@types/depd":"^1.1.32","@types/lru-cache":"^5.1.0","@types/mocha":"^9.1.1","@types/node":"^12.20.50","@types/sprintf-js":"^1.1.2","@typescript-eslint/eslint-plugin":"^5.22.0","@typescript-eslint/parser":"^5.22.0","async":"^3.2.3","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","codecov":"^3.8.3","eslint":"^7.32.0","mitm":"^1.7.2","mocha":"^9.2.2","nyc":"^15.1.0","rimraf":"^3.0.2","semantic-release":"^19.0.3","sinon":"^11.1.2","typedoc":"^0.22.15","typescript":"^4.6.4"},"scripts":{"docs":"typedoc","lint":"eslint src test --ext .js,.ts && tsc","test":"mocha test/unit test/unit/token test/unit/tracking-buffer","test-integration":"mocha test/integration/","test-all":"mocha test/unit/ test/unit/token/ test/unit/tracking-buffer test/integration/","build":"rimraf lib && babel src --out-dir lib --extensions .js,.ts","prepublish":"npm run build","semantic-release":"semantic-release"},"babel":{"sourceMaps":"both","ignore":["./src/**/*.d.ts"],"presets":[["@babel/preset-env",{"targets":{"node":14}}],["@babel/preset-typescript",{"allowDeclareFields":true}]],"plugins":[["@babel/transform-typescript",{"allowDeclareFields":true}],["@babel/plugin-proposal-class-properties",{"loose":true}],["@babel/plugin-proposal-private-methods",{"loose":true}],["@babel/plugin-proposal-private-property-in-object",{"loose":true}]]},"commitlint":{"extends":["@commitlint/config-conventional"],"rules":{"body-max-line-length":[1,"always",100],"footer-max-line-length":[1,"always",100],"header-max-length":[1,"always",100]}},"mocha":{"require":"test/setup.js","timeout":5000,"extension":["js","ts"]},"nyc":{"sourceMap":false,"instrument":false,"extension":[".ts"]}}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8519)})();